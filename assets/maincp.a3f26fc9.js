import{d as is,u as Is,e as zs,_ as gi,r as Dt,o as ee,f as be,g as de,Q as Ye,w as De,h as ut,i as Z,j as ke,t as ze,k as we,p as qd,l as Qd,m as Yn,n as eu,F as yi,q as Es,s as tu,v as yr,x as iu,y as nf,z as Zd,A as uo,B as pe,C as ls,D as ui,E as Us,G as ct,H as or,I as Nt,J as dc,K as af,L as lf,M as hc,N as As,O as Bt,P as wt,R as _s,S as df,T as nn,U as cc,V as uc,W as Ma,X as hf,Y as cf,Z as pc,$ as gc,a0 as uf,a1 as pf,a2 as gf,a3 as ff,a4 as ld,a5 as dd,a6 as su,a7 as xo,a8 as mf,a9 as Jd,aa as vf,ab as eh,ac as Cf,ad as ou,ae as ru,af as fc,ag as yf,ah as bf,ai as wf,aj as xf,ak as Sf,al as Ef,am as Af,an as Rf,ao as Df,b as Tf}from"./index.f0f2983e.js";const Pf=is({setup(){const e=Is(),t=zs();return{mainStore:e,apiStore:t}},emits:["photo"],data(){return{device:!1,video:!1,canvas:!1,estado:!1,stream:!1,listaDeDispositivos:!1,devices:[],openModal:!1,error:""}},methods:{stopDevices(){this.stream&&this.stream.getTracks().forEach(function(e){e.stop()})},changeDevice(){this.stopDevices(),this.mostrarStream(this.device)},mostrarStream(e){(navigator.getUserMedia||navigator.mozGetUserMedia||navigator.mediaDevices.getUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia).apply(navigator,[{video:{deviceId:e}},t=>{this.getDevices(),this.stream=t,this.video.srcObject=this.stream,this.video.play()},t=>{console.log(t),this.error="No se puede acceder a la c\xE1mara, o no diste permiso."}])},getDevices(){navigator.mediaDevices.enumerateDevices().then(e=>{const t=[];e.forEach(i=>{i.kind==="videoinput"&&t.push(i)}),t.length>0&&(t.forEach(i=>{this.devices.push({label:i.label,value:i.deviceId})}),this.devices[0]&&(this.device=this.devices[0].value))})},takePhoto(){this.video.pause();let e=this.canvas.getContext("2d");this.canvas.width=this.video.videoWidth,this.canvas.height=this.video.videoHeight,e.drawImage(this.video,0,0,this.canvas.width,this.canvas.height);let t=this.canvas.toDataURL();this.$emit("photo",t),this.video.play(),this.openModal=!1}},watch:{openModal(e){this.error="",e?setTimeout(()=>{this.video=this.$refs.video,this.canvas=this.$refs.canvas,this.estado=this.$el.querySelector("#estado"),this.mostrarStream()},1e3):this.stopDevices()}},beforeUnmount(){this.stopDevices()}}),Ff=e=>(qd("data-v-d29b51a4"),e=e(),Qd(),e),Lf={class:"row flex-center q-mb-md"},Mf={class:"q-mt-sm flex-center video-container"},If=Ff(()=>Z("div",{class:"led"},null,-1)),Of={muted:"muted",ref:"video"},kf={ref:"canvas",style:{display:"none"}};function Nf(e,t,i,s,n,l){const u=Dt("t-msg"),g=Dt("t-input"),C=Dt("t-modal");return ee(),be("div",null,[de(Ye,{onClick:t[0]||(t[0]=S=>e.openModal=!0),color:"primary",round:"",icon:"fa fa-camera",class:"q-ml-sm",size:"md","text-color":"white"}),de(C,{modelValue:e.openModal,"onUpdate:modelValue":t[2]||(t[2]=S=>e.openModal=S),title:"Tomar foto"},{footer:De(()=>[de(g,{type:"select",onChange:e.changeDevice,label:"Dispositivos Disponibles",modelValue:e.device,"onUpdate:modelValue":t[1]||(t[1]=S=>e.device=S),list:e.devices,style:{width:"100%","max-width":"260px"}},null,8,["onChange","modelValue","list"]),de(Ye,{onClick:e.takePhoto,color:"primary",icon:"fa fa-camera"},{default:De(()=>[ut(" \xA0\xA0Capturar")]),_:1},8,["onClick"])]),default:De(()=>[Z("div",Lf,[Z("div",Mf,[If,Z("video",Of,null,512),Z("canvas",kf,null,512)])]),e.error?(ee(),ke(u,{key:0,type:"warning"},{default:De(()=>[ut(ze(e.error),1)]),_:1})):we("",!0)]),_:1},8,["modelValue"])])}var Gf=gi(Pf,[["render",Nf],["__scopeId","data-v-d29b51a4"]]);/*!
 * Cropper.js v1.6.2
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2024-04-21T07:43:05.335Z
 */function mc(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),i.push.apply(i,s)}return i}function nu(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?mc(Object(i),!0).forEach(function(s){Bf(e,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):mc(Object(i)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(i,s))})}return e}function _f(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var s=i.call(e,t||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function au(e){var t=_f(e,"string");return typeof t=="symbol"?t:t+""}function hd(e){return hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hd(e)}function Vf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vc(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,au(s.key),s)}}function Hf(e,t,i){return t&&vc(e.prototype,t),i&&vc(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function Bf(e,t,i){return t=au(t),t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function lu(e){return Wf(e)||zf(e)||Uf(e)||Yf()}function Wf(e){if(Array.isArray(e))return cd(e)}function zf(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Uf(e,t){if(!!e){if(typeof e=="string")return cd(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return cd(e,t)}}function cd(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,s=new Array(t);i<t;i++)s[i]=e[i];return s}function Yf(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var il=typeof window<"u"&&typeof window.document<"u",Rs=il?window:{},th=il&&Rs.document.documentElement?"ontouchstart"in Rs.document.documentElement:!1,ih=il?"PointerEvent"in Rs:!1,Yt="cropper",sh="all",du="crop",hu="move",cu="zoom",Co="e",yo="w",rr="s",eo="n",en="ne",tn="nw",sn="se",on="sw",ud="".concat(Yt,"-crop"),Cc="".concat(Yt,"-disabled"),Ii="".concat(Yt,"-hidden"),yc="".concat(Yt,"-hide"),Xf="".concat(Yt,"-invisible"),Ia="".concat(Yt,"-modal"),pd="".concat(Yt,"-move"),mn="".concat(Yt,"Action"),Ca="".concat(Yt,"Preview"),oh="crop",uu="move",pu="none",gd="crop",fd="cropend",md="cropmove",vd="cropstart",bc="dblclick",$f=th?"touchstart":"mousedown",jf=th?"touchmove":"mousemove",Kf=th?"touchend touchcancel":"mouseup",wc=ih?"pointerdown":$f,xc=ih?"pointermove":jf,Sc=ih?"pointerup pointercancel":Kf,Ec="ready",Ac="resize",Rc="wheel",Cd="zoom",Dc="image/jpeg",qf=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,Qf=/^data:/,Zf=/^data:image\/jpeg;base64,/,Jf=/^img|canvas$/i,gu=200,fu=100,Tc={viewMode:0,dragMode:oh,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:gu,minContainerHeight:fu,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},em='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',tm=Number.isNaN||Rs.isNaN;function ft(e){return typeof e=="number"&&!tm(e)}var Pc=function(t){return t>0&&t<1/0};function zl(e){return typeof e>"u"}function Mo(e){return hd(e)==="object"&&e!==null}var im=Object.prototype.hasOwnProperty;function hr(e){if(!Mo(e))return!1;try{var t=e.constructor,i=t.prototype;return t&&i&&im.call(i,"isPrototypeOf")}catch{return!1}}function Mi(e){return typeof e=="function"}var sm=Array.prototype.slice;function mu(e){return Array.from?Array.from(e):sm.call(e)}function ni(e,t){return e&&Mi(t)&&(Array.isArray(e)||ft(e.length)?mu(e).forEach(function(i,s){t.call(e,i,s,e)}):Mo(e)&&Object.keys(e).forEach(function(i){t.call(e,e[i],i,e)})),e}var $t=Object.assign||function(t){for(var i=arguments.length,s=new Array(i>1?i-1:0),n=1;n<i;n++)s[n-1]=arguments[n];return Mo(t)&&s.length>0&&s.forEach(function(l){Mo(l)&&Object.keys(l).forEach(function(u){t[u]=l[u]})}),t},om=/\.\d*(?:0|9){12}\d*$/;function gr(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return om.test(e)?Math.round(e*t)/t:e}var rm=/^width|height|left|top|marginLeft|marginTop$/;function so(e,t){var i=e.style;ni(t,function(s,n){rm.test(n)&&ft(s)&&(s="".concat(s,"px")),i[n]=s})}function nm(e,t){return e.classList?e.classList.contains(t):e.className.indexOf(t)>-1}function hi(e,t){if(!!t){if(ft(e.length)){ni(e,function(s){hi(s,t)});return}if(e.classList){e.classList.add(t);return}var i=e.className.trim();i?i.indexOf(t)<0&&(e.className="".concat(i," ").concat(t)):e.className=t}}function ws(e,t){if(!!t){if(ft(e.length)){ni(e,function(i){ws(i,t)});return}if(e.classList){e.classList.remove(t);return}e.className.indexOf(t)>=0&&(e.className=e.className.replace(t,""))}}function cr(e,t,i){if(!!t){if(ft(e.length)){ni(e,function(s){cr(s,t,i)});return}i?hi(e,t):ws(e,t)}}var am=/([a-z\d])([A-Z])/g;function rh(e){return e.replace(am,"$1-$2").toLowerCase()}function yd(e,t){return Mo(e[t])?e[t]:e.dataset?e.dataset[t]:e.getAttribute("data-".concat(rh(t)))}function vn(e,t,i){Mo(i)?e[t]=i:e.dataset?e.dataset[t]=i:e.setAttribute("data-".concat(rh(t)),i)}function lm(e,t){if(Mo(e[t]))try{delete e[t]}catch{e[t]=void 0}else if(e.dataset)try{delete e.dataset[t]}catch{e.dataset[t]=void 0}else e.removeAttribute("data-".concat(rh(t)))}var vu=/\s\s*/,Cu=function(){var e=!1;if(il){var t=!1,i=function(){},s=Object.defineProperty({},"once",{get:function(){return e=!0,t},set:function(l){t=l}});Rs.addEventListener("test",i,s),Rs.removeEventListener("test",i,s)}return e}();function ns(e,t,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},n=i;t.trim().split(vu).forEach(function(l){if(!Cu){var u=e.listeners;u&&u[l]&&u[l][i]&&(n=u[l][i],delete u[l][i],Object.keys(u[l]).length===0&&delete u[l],Object.keys(u).length===0&&delete e.listeners)}e.removeEventListener(l,n,s)})}function ji(e,t,i){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},n=i;t.trim().split(vu).forEach(function(l){if(s.once&&!Cu){var u=e.listeners,g=u===void 0?{}:u;n=function(){delete g[l][i],e.removeEventListener(l,n,s);for(var S=arguments.length,A=new Array(S),D=0;D<S;D++)A[D]=arguments[D];i.apply(e,A)},g[l]||(g[l]={}),g[l][i]&&e.removeEventListener(l,g[l][i],s),g[l][i]=n,e.listeners=g}e.addEventListener(l,n,s)})}function fr(e,t,i){var s;return Mi(Event)&&Mi(CustomEvent)?s=new CustomEvent(t,{detail:i,bubbles:!0,cancelable:!0}):(s=document.createEvent("CustomEvent"),s.initCustomEvent(t,!0,!0,i)),e.dispatchEvent(s)}function yu(e){var t=e.getBoundingClientRect();return{left:t.left+(window.pageXOffset-document.documentElement.clientLeft),top:t.top+(window.pageYOffset-document.documentElement.clientTop)}}var Ul=Rs.location,dm=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function Fc(e){var t=e.match(dm);return t!==null&&(t[1]!==Ul.protocol||t[2]!==Ul.hostname||t[3]!==Ul.port)}function Lc(e){var t="timestamp=".concat(new Date().getTime());return e+(e.indexOf("?")===-1?"?":"&")+t}function pn(e){var t=e.rotate,i=e.scaleX,s=e.scaleY,n=e.translateX,l=e.translateY,u=[];ft(n)&&n!==0&&u.push("translateX(".concat(n,"px)")),ft(l)&&l!==0&&u.push("translateY(".concat(l,"px)")),ft(t)&&t!==0&&u.push("rotate(".concat(t,"deg)")),ft(i)&&i!==1&&u.push("scaleX(".concat(i,")")),ft(s)&&s!==1&&u.push("scaleY(".concat(s,")"));var g=u.length?u.join(" "):"none";return{WebkitTransform:g,msTransform:g,transform:g}}function hm(e){var t=nu({},e),i=0;return ni(e,function(s,n){delete t[n],ni(t,function(l){var u=Math.abs(s.startX-l.startX),g=Math.abs(s.startY-l.startY),C=Math.abs(s.endX-l.endX),S=Math.abs(s.endY-l.endY),A=Math.sqrt(u*u+g*g),D=Math.sqrt(C*C+S*S),M=(D-A)/A;Math.abs(M)>Math.abs(i)&&(i=M)})}),i}function ya(e,t){var i=e.pageX,s=e.pageY,n={endX:i,endY:s};return t?n:nu({startX:i,startY:s},n)}function cm(e){var t=0,i=0,s=0;return ni(e,function(n){var l=n.startX,u=n.startY;t+=l,i+=u,s+=1}),t/=s,i/=s,{pageX:t,pageY:i}}function oo(e){var t=e.aspectRatio,i=e.height,s=e.width,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",l=Pc(s),u=Pc(i);if(l&&u){var g=i*t;n==="contain"&&g>s||n==="cover"&&g<s?i=s/t:s=i*t}else l?i=s/t:u&&(s=i*t);return{width:s,height:i}}function um(e){var t=e.width,i=e.height,s=e.degree;if(s=Math.abs(s)%180,s===90)return{width:i,height:t};var n=s%90*Math.PI/180,l=Math.sin(n),u=Math.cos(n),g=t*u+i*l,C=t*l+i*u;return s>90?{width:C,height:g}:{width:g,height:C}}function pm(e,t,i,s){var n=t.aspectRatio,l=t.naturalWidth,u=t.naturalHeight,g=t.rotate,C=g===void 0?0:g,S=t.scaleX,A=S===void 0?1:S,D=t.scaleY,M=D===void 0?1:D,W=i.aspectRatio,z=i.naturalWidth,U=i.naturalHeight,X=s.fillColor,q=X===void 0?"transparent":X,_=s.imageSmoothingEnabled,J=_===void 0?!0:_,se=s.imageSmoothingQuality,$=se===void 0?"low":se,Y=s.maxWidth,oe=Y===void 0?1/0:Y,Oe=s.maxHeight,re=Oe===void 0?1/0:Oe,Ve=s.minWidth,Pe=Ve===void 0?0:Ve,He=s.minHeight,tt=He===void 0?0:He,Ge=document.createElement("canvas"),et=Ge.getContext("2d"),Gt=oo({aspectRatio:W,width:oe,height:re}),At=oo({aspectRatio:W,width:Pe,height:tt},"cover"),vt=Math.min(Gt.width,Math.max(At.width,z)),_t=Math.min(Gt.height,Math.max(At.height,U)),ti=oo({aspectRatio:n,width:oe,height:re}),ii=oo({aspectRatio:n,width:Pe,height:tt},"cover"),pt=Math.min(ti.width,Math.max(ii.width,l)),Ke=Math.min(ti.height,Math.max(ii.height,u)),qt=[-pt/2,-Ke/2,pt,Ke];return Ge.width=gr(vt),Ge.height=gr(_t),et.fillStyle=q,et.fillRect(0,0,vt,_t),et.save(),et.translate(vt/2,_t/2),et.rotate(C*Math.PI/180),et.scale(A,M),et.imageSmoothingEnabled=J,et.imageSmoothingQuality=$,et.drawImage.apply(et,[e].concat(lu(qt.map(function(Kt){return Math.floor(gr(Kt))})))),et.restore(),Ge}var bu=String.fromCharCode;function gm(e,t,i){var s="";i+=t;for(var n=t;n<i;n+=1)s+=bu(e.getUint8(n));return s}var fm=/^data:.*,/;function mm(e){var t=e.replace(fm,""),i=atob(t),s=new ArrayBuffer(i.length),n=new Uint8Array(s);return ni(n,function(l,u){n[u]=i.charCodeAt(u)}),s}function vm(e,t){for(var i=[],s=8192,n=new Uint8Array(e);n.length>0;)i.push(bu.apply(null,mu(n.subarray(0,s)))),n=n.subarray(s);return"data:".concat(t,";base64,").concat(btoa(i.join("")))}function Cm(e){var t=new DataView(e),i;try{var s,n,l;if(t.getUint8(0)===255&&t.getUint8(1)===216)for(var u=t.byteLength,g=2;g+1<u;){if(t.getUint8(g)===255&&t.getUint8(g+1)===225){n=g;break}g+=1}if(n){var C=n+4,S=n+10;if(gm(t,C,4)==="Exif"){var A=t.getUint16(S);if(s=A===18761,(s||A===19789)&&t.getUint16(S+2,s)===42){var D=t.getUint32(S+4,s);D>=8&&(l=S+D)}}}if(l){var M=t.getUint16(l,s),W,z;for(z=0;z<M;z+=1)if(W=l+z*12+2,t.getUint16(W,s)===274){W+=8,i=t.getUint16(W,s),t.setUint16(W,1,s);break}}}catch{i=1}return i}function ym(e){var t=0,i=1,s=1;switch(e){case 2:i=-1;break;case 3:t=-180;break;case 4:s=-1;break;case 5:t=90,s=-1;break;case 6:t=90;break;case 7:t=90,i=-1;break;case 8:t=-90;break}return{rotate:t,scaleX:i,scaleY:s}}var bm={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,i=this.options,s=this.container,n=this.cropper,l=Number(i.minContainerWidth),u=Number(i.minContainerHeight);hi(n,Ii),ws(t,Ii);var g={width:Math.max(s.offsetWidth,l>=0?l:gu),height:Math.max(s.offsetHeight,u>=0?u:fu)};this.containerData=g,so(n,{width:g.width,height:g.height}),hi(t,Ii),ws(n,Ii)},initCanvas:function(){var t=this.containerData,i=this.imageData,s=this.options.viewMode,n=Math.abs(i.rotate)%180===90,l=n?i.naturalHeight:i.naturalWidth,u=n?i.naturalWidth:i.naturalHeight,g=l/u,C=t.width,S=t.height;t.height*g>t.width?s===3?C=t.height*g:S=t.width/g:s===3?S=t.width/g:C=t.height*g;var A={aspectRatio:g,naturalWidth:l,naturalHeight:u,width:C,height:S};this.canvasData=A,this.limited=s===1||s===2,this.limitCanvas(!0,!0),A.width=Math.min(Math.max(A.width,A.minWidth),A.maxWidth),A.height=Math.min(Math.max(A.height,A.minHeight),A.maxHeight),A.left=(t.width-A.width)/2,A.top=(t.height-A.height)/2,A.oldLeft=A.left,A.oldTop=A.top,this.initialCanvasData=$t({},A)},limitCanvas:function(t,i){var s=this.options,n=this.containerData,l=this.canvasData,u=this.cropBoxData,g=s.viewMode,C=l.aspectRatio,S=this.cropped&&u;if(t){var A=Number(s.minCanvasWidth)||0,D=Number(s.minCanvasHeight)||0;g>1?(A=Math.max(A,n.width),D=Math.max(D,n.height),g===3&&(D*C>A?A=D*C:D=A/C)):g>0&&(A?A=Math.max(A,S?u.width:0):D?D=Math.max(D,S?u.height:0):S&&(A=u.width,D=u.height,D*C>A?A=D*C:D=A/C));var M=oo({aspectRatio:C,width:A,height:D});A=M.width,D=M.height,l.minWidth=A,l.minHeight=D,l.maxWidth=1/0,l.maxHeight=1/0}if(i)if(g>(S?0:1)){var W=n.width-l.width,z=n.height-l.height;l.minLeft=Math.min(0,W),l.minTop=Math.min(0,z),l.maxLeft=Math.max(0,W),l.maxTop=Math.max(0,z),S&&this.limited&&(l.minLeft=Math.min(u.left,u.left+(u.width-l.width)),l.minTop=Math.min(u.top,u.top+(u.height-l.height)),l.maxLeft=u.left,l.maxTop=u.top,g===2&&(l.width>=n.width&&(l.minLeft=Math.min(0,W),l.maxLeft=Math.max(0,W)),l.height>=n.height&&(l.minTop=Math.min(0,z),l.maxTop=Math.max(0,z))))}else l.minLeft=-l.width,l.minTop=-l.height,l.maxLeft=n.width,l.maxTop=n.height},renderCanvas:function(t,i){var s=this.canvasData,n=this.imageData;if(i){var l=um({width:n.naturalWidth*Math.abs(n.scaleX||1),height:n.naturalHeight*Math.abs(n.scaleY||1),degree:n.rotate||0}),u=l.width,g=l.height,C=s.width*(u/s.naturalWidth),S=s.height*(g/s.naturalHeight);s.left-=(C-s.width)/2,s.top-=(S-s.height)/2,s.width=C,s.height=S,s.aspectRatio=u/g,s.naturalWidth=u,s.naturalHeight=g,this.limitCanvas(!0,!1)}(s.width>s.maxWidth||s.width<s.minWidth)&&(s.left=s.oldLeft),(s.height>s.maxHeight||s.height<s.minHeight)&&(s.top=s.oldTop),s.width=Math.min(Math.max(s.width,s.minWidth),s.maxWidth),s.height=Math.min(Math.max(s.height,s.minHeight),s.maxHeight),this.limitCanvas(!1,!0),s.left=Math.min(Math.max(s.left,s.minLeft),s.maxLeft),s.top=Math.min(Math.max(s.top,s.minTop),s.maxTop),s.oldLeft=s.left,s.oldTop=s.top,so(this.canvas,$t({width:s.width,height:s.height},pn({translateX:s.left,translateY:s.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var i=this.canvasData,s=this.imageData,n=s.naturalWidth*(i.width/i.naturalWidth),l=s.naturalHeight*(i.height/i.naturalHeight);$t(s,{width:n,height:l,left:(i.width-n)/2,top:(i.height-l)/2}),so(this.image,$t({width:s.width,height:s.height},pn($t({translateX:s.left,translateY:s.top},s)))),t&&this.output()},initCropBox:function(){var t=this.options,i=this.canvasData,s=t.aspectRatio||t.initialAspectRatio,n=Number(t.autoCropArea)||.8,l={width:i.width,height:i.height};s&&(i.height*s>i.width?l.height=l.width/s:l.width=l.height*s),this.cropBoxData=l,this.limitCropBox(!0,!0),l.width=Math.min(Math.max(l.width,l.minWidth),l.maxWidth),l.height=Math.min(Math.max(l.height,l.minHeight),l.maxHeight),l.width=Math.max(l.minWidth,l.width*n),l.height=Math.max(l.minHeight,l.height*n),l.left=i.left+(i.width-l.width)/2,l.top=i.top+(i.height-l.height)/2,l.oldLeft=l.left,l.oldTop=l.top,this.initialCropBoxData=$t({},l)},limitCropBox:function(t,i){var s=this.options,n=this.containerData,l=this.canvasData,u=this.cropBoxData,g=this.limited,C=s.aspectRatio;if(t){var S=Number(s.minCropBoxWidth)||0,A=Number(s.minCropBoxHeight)||0,D=g?Math.min(n.width,l.width,l.width+l.left,n.width-l.left):n.width,M=g?Math.min(n.height,l.height,l.height+l.top,n.height-l.top):n.height;S=Math.min(S,n.width),A=Math.min(A,n.height),C&&(S&&A?A*C>S?A=S/C:S=A*C:S?A=S/C:A&&(S=A*C),M*C>D?M=D/C:D=M*C),u.minWidth=Math.min(S,D),u.minHeight=Math.min(A,M),u.maxWidth=D,u.maxHeight=M}i&&(g?(u.minLeft=Math.max(0,l.left),u.minTop=Math.max(0,l.top),u.maxLeft=Math.min(n.width,l.left+l.width)-u.width,u.maxTop=Math.min(n.height,l.top+l.height)-u.height):(u.minLeft=0,u.minTop=0,u.maxLeft=n.width-u.width,u.maxTop=n.height-u.height))},renderCropBox:function(){var t=this.options,i=this.containerData,s=this.cropBoxData;(s.width>s.maxWidth||s.width<s.minWidth)&&(s.left=s.oldLeft),(s.height>s.maxHeight||s.height<s.minHeight)&&(s.top=s.oldTop),s.width=Math.min(Math.max(s.width,s.minWidth),s.maxWidth),s.height=Math.min(Math.max(s.height,s.minHeight),s.maxHeight),this.limitCropBox(!1,!0),s.left=Math.min(Math.max(s.left,s.minLeft),s.maxLeft),s.top=Math.min(Math.max(s.top,s.minTop),s.maxTop),s.oldLeft=s.left,s.oldTop=s.top,t.movable&&t.cropBoxMovable&&vn(this.face,mn,s.width>=i.width&&s.height>=i.height?hu:sh),so(this.cropBox,$t({width:s.width,height:s.height},pn({translateX:s.left,translateY:s.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),fr(this.element,gd,this.getData())}},wm={initPreview:function(){var t=this.element,i=this.crossOrigin,s=this.options.preview,n=i?this.crossOriginUrl:this.url,l=t.alt||"The image to preview",u=document.createElement("img");if(i&&(u.crossOrigin=i),u.src=n,u.alt=l,this.viewBox.appendChild(u),this.viewBoxImage=u,!!s){var g=s;typeof s=="string"?g=t.ownerDocument.querySelectorAll(s):s.querySelector&&(g=[s]),this.previews=g,ni(g,function(C){var S=document.createElement("img");vn(C,Ca,{width:C.offsetWidth,height:C.offsetHeight,html:C.innerHTML}),i&&(S.crossOrigin=i),S.src=n,S.alt=l,S.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',C.innerHTML="",C.appendChild(S)})}},resetPreview:function(){ni(this.previews,function(t){var i=yd(t,Ca);so(t,{width:i.width,height:i.height}),t.innerHTML=i.html,lm(t,Ca)})},preview:function(){var t=this.imageData,i=this.canvasData,s=this.cropBoxData,n=s.width,l=s.height,u=t.width,g=t.height,C=s.left-i.left-t.left,S=s.top-i.top-t.top;!this.cropped||this.disabled||(so(this.viewBoxImage,$t({width:u,height:g},pn($t({translateX:-C,translateY:-S},t)))),ni(this.previews,function(A){var D=yd(A,Ca),M=D.width,W=D.height,z=M,U=W,X=1;n&&(X=M/n,U=l*X),l&&U>W&&(X=W/l,z=n*X,U=W),so(A,{width:z,height:U}),so(A.getElementsByTagName("img")[0],$t({width:u*X,height:g*X},pn($t({translateX:-C*X,translateY:-S*X},t))))}))}},xm={bind:function(){var t=this.element,i=this.options,s=this.cropper;Mi(i.cropstart)&&ji(t,vd,i.cropstart),Mi(i.cropmove)&&ji(t,md,i.cropmove),Mi(i.cropend)&&ji(t,fd,i.cropend),Mi(i.crop)&&ji(t,gd,i.crop),Mi(i.zoom)&&ji(t,Cd,i.zoom),ji(s,wc,this.onCropStart=this.cropStart.bind(this)),i.zoomable&&i.zoomOnWheel&&ji(s,Rc,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),i.toggleDragModeOnDblclick&&ji(s,bc,this.onDblclick=this.dblclick.bind(this)),ji(t.ownerDocument,xc,this.onCropMove=this.cropMove.bind(this)),ji(t.ownerDocument,Sc,this.onCropEnd=this.cropEnd.bind(this)),i.responsive&&ji(window,Ac,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,i=this.options,s=this.cropper;Mi(i.cropstart)&&ns(t,vd,i.cropstart),Mi(i.cropmove)&&ns(t,md,i.cropmove),Mi(i.cropend)&&ns(t,fd,i.cropend),Mi(i.crop)&&ns(t,gd,i.crop),Mi(i.zoom)&&ns(t,Cd,i.zoom),ns(s,wc,this.onCropStart),i.zoomable&&i.zoomOnWheel&&ns(s,Rc,this.onWheel,{passive:!1,capture:!0}),i.toggleDragModeOnDblclick&&ns(s,bc,this.onDblclick),ns(t.ownerDocument,xc,this.onCropMove),ns(t.ownerDocument,Sc,this.onCropEnd),i.responsive&&ns(window,Ac,this.onResize)}},Sm={resize:function(){if(!this.disabled){var t=this.options,i=this.container,s=this.containerData,n=i.offsetWidth/s.width,l=i.offsetHeight/s.height,u=Math.abs(n-1)>Math.abs(l-1)?n:l;if(u!==1){var g,C;t.restore&&(g=this.getCanvasData(),C=this.getCropBoxData()),this.render(),t.restore&&(this.setCanvasData(ni(g,function(S,A){g[A]=S*u})),this.setCropBoxData(ni(C,function(S,A){C[A]=S*u})))}}},dblclick:function(){this.disabled||this.options.dragMode===pu||this.setDragMode(nm(this.dragBox,ud)?uu:oh)},wheel:function(t){var i=this,s=Number(this.options.wheelZoomRatio)||.1,n=1;this.disabled||(t.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){i.wheeling=!1},50),t.deltaY?n=t.deltaY>0?1:-1:t.wheelDelta?n=-t.wheelDelta/120:t.detail&&(n=t.detail>0?1:-1),this.zoom(-n*s,t)))},cropStart:function(t){var i=t.buttons,s=t.button;if(!(this.disabled||(t.type==="mousedown"||t.type==="pointerdown"&&t.pointerType==="mouse")&&(ft(i)&&i!==1||ft(s)&&s!==0||t.ctrlKey))){var n=this.options,l=this.pointers,u;t.changedTouches?ni(t.changedTouches,function(g){l[g.identifier]=ya(g)}):l[t.pointerId||0]=ya(t),Object.keys(l).length>1&&n.zoomable&&n.zoomOnTouch?u=cu:u=yd(t.target,mn),!!qf.test(u)&&fr(this.element,vd,{originalEvent:t,action:u})!==!1&&(t.preventDefault(),this.action=u,this.cropping=!1,u===du&&(this.cropping=!0,hi(this.dragBox,Ia)))}},cropMove:function(t){var i=this.action;if(!(this.disabled||!i)){var s=this.pointers;t.preventDefault(),fr(this.element,md,{originalEvent:t,action:i})!==!1&&(t.changedTouches?ni(t.changedTouches,function(n){$t(s[n.identifier]||{},ya(n,!0))}):$t(s[t.pointerId||0]||{},ya(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var i=this.action,s=this.pointers;t.changedTouches?ni(t.changedTouches,function(n){delete s[n.identifier]}):delete s[t.pointerId||0],i&&(t.preventDefault(),Object.keys(s).length||(this.action=""),this.cropping&&(this.cropping=!1,cr(this.dragBox,Ia,this.cropped&&this.options.modal)),fr(this.element,fd,{originalEvent:t,action:i}))}}},Em={change:function(t){var i=this.options,s=this.canvasData,n=this.containerData,l=this.cropBoxData,u=this.pointers,g=this.action,C=i.aspectRatio,S=l.left,A=l.top,D=l.width,M=l.height,W=S+D,z=A+M,U=0,X=0,q=n.width,_=n.height,J=!0,se;!C&&t.shiftKey&&(C=D&&M?D/M:1),this.limited&&(U=l.minLeft,X=l.minTop,q=U+Math.min(n.width,s.width,s.left+s.width),_=X+Math.min(n.height,s.height,s.top+s.height));var $=u[Object.keys(u)[0]],Y={x:$.endX-$.startX,y:$.endY-$.startY},oe=function(re){switch(re){case Co:W+Y.x>q&&(Y.x=q-W);break;case yo:S+Y.x<U&&(Y.x=U-S);break;case eo:A+Y.y<X&&(Y.y=X-A);break;case rr:z+Y.y>_&&(Y.y=_-z);break}};switch(g){case sh:S+=Y.x,A+=Y.y;break;case Co:if(Y.x>=0&&(W>=q||C&&(A<=X||z>=_))){J=!1;break}oe(Co),D+=Y.x,D<0&&(g=yo,D=-D,S-=D),C&&(M=D/C,A+=(l.height-M)/2);break;case eo:if(Y.y<=0&&(A<=X||C&&(S<=U||W>=q))){J=!1;break}oe(eo),M-=Y.y,A+=Y.y,M<0&&(g=rr,M=-M,A-=M),C&&(D=M*C,S+=(l.width-D)/2);break;case yo:if(Y.x<=0&&(S<=U||C&&(A<=X||z>=_))){J=!1;break}oe(yo),D-=Y.x,S+=Y.x,D<0&&(g=Co,D=-D,S-=D),C&&(M=D/C,A+=(l.height-M)/2);break;case rr:if(Y.y>=0&&(z>=_||C&&(S<=U||W>=q))){J=!1;break}oe(rr),M+=Y.y,M<0&&(g=eo,M=-M,A-=M),C&&(D=M*C,S+=(l.width-D)/2);break;case en:if(C){if(Y.y<=0&&(A<=X||W>=q)){J=!1;break}oe(eo),M-=Y.y,A+=Y.y,D=M*C}else oe(eo),oe(Co),Y.x>=0?W<q?D+=Y.x:Y.y<=0&&A<=X&&(J=!1):D+=Y.x,Y.y<=0?A>X&&(M-=Y.y,A+=Y.y):(M-=Y.y,A+=Y.y);D<0&&M<0?(g=on,M=-M,D=-D,A-=M,S-=D):D<0?(g=tn,D=-D,S-=D):M<0&&(g=sn,M=-M,A-=M);break;case tn:if(C){if(Y.y<=0&&(A<=X||S<=U)){J=!1;break}oe(eo),M-=Y.y,A+=Y.y,D=M*C,S+=l.width-D}else oe(eo),oe(yo),Y.x<=0?S>U?(D-=Y.x,S+=Y.x):Y.y<=0&&A<=X&&(J=!1):(D-=Y.x,S+=Y.x),Y.y<=0?A>X&&(M-=Y.y,A+=Y.y):(M-=Y.y,A+=Y.y);D<0&&M<0?(g=sn,M=-M,D=-D,A-=M,S-=D):D<0?(g=en,D=-D,S-=D):M<0&&(g=on,M=-M,A-=M);break;case on:if(C){if(Y.x<=0&&(S<=U||z>=_)){J=!1;break}oe(yo),D-=Y.x,S+=Y.x,M=D/C}else oe(rr),oe(yo),Y.x<=0?S>U?(D-=Y.x,S+=Y.x):Y.y>=0&&z>=_&&(J=!1):(D-=Y.x,S+=Y.x),Y.y>=0?z<_&&(M+=Y.y):M+=Y.y;D<0&&M<0?(g=en,M=-M,D=-D,A-=M,S-=D):D<0?(g=sn,D=-D,S-=D):M<0&&(g=tn,M=-M,A-=M);break;case sn:if(C){if(Y.x>=0&&(W>=q||z>=_)){J=!1;break}oe(Co),D+=Y.x,M=D/C}else oe(rr),oe(Co),Y.x>=0?W<q?D+=Y.x:Y.y>=0&&z>=_&&(J=!1):D+=Y.x,Y.y>=0?z<_&&(M+=Y.y):M+=Y.y;D<0&&M<0?(g=tn,M=-M,D=-D,A-=M,S-=D):D<0?(g=on,D=-D,S-=D):M<0&&(g=en,M=-M,A-=M);break;case hu:this.move(Y.x,Y.y),J=!1;break;case cu:this.zoom(hm(u),t),J=!1;break;case du:if(!Y.x||!Y.y){J=!1;break}se=yu(this.cropper),S=$.startX-se.left,A=$.startY-se.top,D=l.minWidth,M=l.minHeight,Y.x>0?g=Y.y>0?sn:en:Y.x<0&&(S-=D,g=Y.y>0?on:tn),Y.y<0&&(A-=M),this.cropped||(ws(this.cropBox,Ii),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}J&&(l.width=D,l.height=M,l.left=S,l.top=A,this.action=g,this.renderCropBox()),ni(u,function(Oe){Oe.startX=Oe.endX,Oe.startY=Oe.endY})}},Am={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&hi(this.dragBox,Ia),ws(this.cropBox,Ii),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=$t({},this.initialImageData),this.canvasData=$t({},this.initialCanvasData),this.cropBoxData=$t({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&($t(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),ws(this.dragBox,Ia),hi(this.cropBox,Ii)),this},replace:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&t&&(this.isImg&&(this.element.src=t),i?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,ni(this.previews,function(s){s.getElementsByTagName("img")[0].src=t}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,ws(this.cropper,Cc)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,hi(this.cropper,Cc)),this},destroy:function(){var t=this.element;return t[Yt]?(t[Yt]=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,s=this.canvasData,n=s.left,l=s.top;return this.moveTo(zl(t)?t:n+Number(t),zl(i)?i:l+Number(i))},moveTo:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,s=this.canvasData,n=!1;return t=Number(t),i=Number(i),this.ready&&!this.disabled&&this.options.movable&&(ft(t)&&(s.left=t,n=!0),ft(i)&&(s.top=i,n=!0),n&&this.renderCanvas(!0)),this},zoom:function(t,i){var s=this.canvasData;return t=Number(t),t<0?t=1/(1-t):t=1+t,this.zoomTo(s.width*t/s.naturalWidth,null,i)},zoomTo:function(t,i,s){var n=this.options,l=this.canvasData,u=l.width,g=l.height,C=l.naturalWidth,S=l.naturalHeight;if(t=Number(t),t>=0&&this.ready&&!this.disabled&&n.zoomable){var A=C*t,D=S*t;if(fr(this.element,Cd,{ratio:t,oldRatio:u/C,originalEvent:s})===!1)return this;if(s){var M=this.pointers,W=yu(this.cropper),z=M&&Object.keys(M).length?cm(M):{pageX:s.pageX,pageY:s.pageY};l.left-=(A-u)*((z.pageX-W.left-l.left)/u),l.top-=(D-g)*((z.pageY-W.top-l.top)/g)}else hr(i)&&ft(i.x)&&ft(i.y)?(l.left-=(A-u)*((i.x-l.left)/u),l.top-=(D-g)*((i.y-l.top)/g)):(l.left-=(A-u)/2,l.top-=(D-g)/2);l.width=A,l.height=D,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return t=Number(t),ft(t)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var i=this.imageData.scaleY;return this.scale(t,ft(i)?i:1)},scaleY:function(t){var i=this.imageData.scaleX;return this.scale(ft(i)?i:1,t)},scale:function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,s=this.imageData,n=!1;return t=Number(t),i=Number(i),this.ready&&!this.disabled&&this.options.scalable&&(ft(t)&&(s.scaleX=t,n=!0),ft(i)&&(s.scaleY=i,n=!0),n&&this.renderCanvas(!0,!0)),this},getData:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,i=this.options,s=this.imageData,n=this.canvasData,l=this.cropBoxData,u;if(this.ready&&this.cropped){u={x:l.left-n.left,y:l.top-n.top,width:l.width,height:l.height};var g=s.width/s.naturalWidth;if(ni(u,function(A,D){u[D]=A/g}),t){var C=Math.round(u.y+u.height),S=Math.round(u.x+u.width);u.x=Math.round(u.x),u.y=Math.round(u.y),u.width=S-u.x,u.height=C-u.y}}else u={x:0,y:0,width:0,height:0};return i.rotatable&&(u.rotate=s.rotate||0),i.scalable&&(u.scaleX=s.scaleX||1,u.scaleY=s.scaleY||1),u},setData:function(t){var i=this.options,s=this.imageData,n=this.canvasData,l={};if(this.ready&&!this.disabled&&hr(t)){var u=!1;i.rotatable&&ft(t.rotate)&&t.rotate!==s.rotate&&(s.rotate=t.rotate,u=!0),i.scalable&&(ft(t.scaleX)&&t.scaleX!==s.scaleX&&(s.scaleX=t.scaleX,u=!0),ft(t.scaleY)&&t.scaleY!==s.scaleY&&(s.scaleY=t.scaleY,u=!0)),u&&this.renderCanvas(!0,!0);var g=s.width/s.naturalWidth;ft(t.x)&&(l.left=t.x*g+n.left),ft(t.y)&&(l.top=t.y*g+n.top),ft(t.width)&&(l.width=t.width*g),ft(t.height)&&(l.height=t.height*g),this.setCropBoxData(l)}return this},getContainerData:function(){return this.ready?$t({},this.containerData):{}},getImageData:function(){return this.sized?$t({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,i={};return this.ready&&ni(["left","top","width","height","naturalWidth","naturalHeight"],function(s){i[s]=t[s]}),i},setCanvasData:function(t){var i=this.canvasData,s=i.aspectRatio;return this.ready&&!this.disabled&&hr(t)&&(ft(t.left)&&(i.left=t.left),ft(t.top)&&(i.top=t.top),ft(t.width)?(i.width=t.width,i.height=t.width/s):ft(t.height)&&(i.height=t.height,i.width=t.height*s),this.renderCanvas(!0)),this},getCropBoxData:function(){var t=this.cropBoxData,i;return this.ready&&this.cropped&&(i={left:t.left,top:t.top,width:t.width,height:t.height}),i||{}},setCropBoxData:function(t){var i=this.cropBoxData,s=this.options.aspectRatio,n,l;return this.ready&&this.cropped&&!this.disabled&&hr(t)&&(ft(t.left)&&(i.left=t.left),ft(t.top)&&(i.top=t.top),ft(t.width)&&t.width!==i.width&&(n=!0,i.width=t.width),ft(t.height)&&t.height!==i.height&&(l=!0,i.height=t.height),s&&(n?i.height=i.width/s:l&&(i.width=i.height*s)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var i=this.canvasData,s=pm(this.image,this.imageData,i,t);if(!this.cropped)return s;var n=this.getData(t.rounded),l=n.x,u=n.y,g=n.width,C=n.height,S=s.width/Math.floor(i.naturalWidth);S!==1&&(l*=S,u*=S,g*=S,C*=S);var A=g/C,D=oo({aspectRatio:A,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),M=oo({aspectRatio:A,width:t.minWidth||0,height:t.minHeight||0},"cover"),W=oo({aspectRatio:A,width:t.width||(S!==1?s.width:g),height:t.height||(S!==1?s.height:C)}),z=W.width,U=W.height;z=Math.min(D.width,Math.max(M.width,z)),U=Math.min(D.height,Math.max(M.height,U));var X=document.createElement("canvas"),q=X.getContext("2d");X.width=gr(z),X.height=gr(U),q.fillStyle=t.fillColor||"transparent",q.fillRect(0,0,z,U);var _=t.imageSmoothingEnabled,J=_===void 0?!0:_,se=t.imageSmoothingQuality;q.imageSmoothingEnabled=J,se&&(q.imageSmoothingQuality=se);var $=s.width,Y=s.height,oe=l,Oe=u,re,Ve,Pe,He,tt,Ge;oe<=-g||oe>$?(oe=0,re=0,Pe=0,tt=0):oe<=0?(Pe=-oe,oe=0,re=Math.min($,g+oe),tt=re):oe<=$&&(Pe=0,re=Math.min(g,$-oe),tt=re),re<=0||Oe<=-C||Oe>Y?(Oe=0,Ve=0,He=0,Ge=0):Oe<=0?(He=-Oe,Oe=0,Ve=Math.min(Y,C+Oe),Ge=Ve):Oe<=Y&&(He=0,Ve=Math.min(C,Y-Oe),Ge=Ve);var et=[oe,Oe,re,Ve];if(tt>0&&Ge>0){var Gt=z/g;et.push(Pe*Gt,He*Gt,tt*Gt,Ge*Gt)}return q.drawImage.apply(q,[s].concat(lu(et.map(function(At){return Math.floor(gr(At))})))),X},setAspectRatio:function(t){var i=this.options;return!this.disabled&&!zl(t)&&(i.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var i=this.options,s=this.dragBox,n=this.face;if(this.ready&&!this.disabled){var l=t===oh,u=i.movable&&t===uu;t=l||u?t:pu,i.dragMode=t,vn(s,mn,t),cr(s,ud,l),cr(s,pd,u),i.cropBoxMovable||(vn(n,mn,t),cr(n,ud,l),cr(n,pd,u))}return this}},Rm=Rs.Cropper,wu=function(){function e(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Vf(this,e),!t||!Jf.test(t.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=t,this.options=$t({},Tc,hr(i)&&i),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return Hf(e,[{key:"init",value:function(){var i=this.element,s=i.tagName.toLowerCase(),n;if(!i[Yt]){if(i[Yt]=this,s==="img"){if(this.isImg=!0,n=i.getAttribute("src")||"",this.originalUrl=n,!n)return;n=i.src}else s==="canvas"&&window.HTMLCanvasElement&&(n=i.toDataURL());this.load(n)}}},{key:"load",value:function(i){var s=this;if(!!i){this.url=i,this.imageData={};var n=this.element,l=this.options;if(!l.rotatable&&!l.scalable&&(l.checkOrientation=!1),!l.checkOrientation||!window.ArrayBuffer){this.clone();return}if(Qf.test(i)){Zf.test(i)?this.read(mm(i)):this.clone();return}var u=new XMLHttpRequest,g=this.clone.bind(this);this.reloading=!0,this.xhr=u,u.onabort=g,u.onerror=g,u.ontimeout=g,u.onprogress=function(){u.getResponseHeader("content-type")!==Dc&&u.abort()},u.onload=function(){s.read(u.response)},u.onloadend=function(){s.reloading=!1,s.xhr=null},l.checkCrossOrigin&&Fc(i)&&n.crossOrigin&&(i=Lc(i)),u.open("GET",i,!0),u.responseType="arraybuffer",u.withCredentials=n.crossOrigin==="use-credentials",u.send()}}},{key:"read",value:function(i){var s=this.options,n=this.imageData,l=Cm(i),u=0,g=1,C=1;if(l>1){this.url=vm(i,Dc);var S=ym(l);u=S.rotate,g=S.scaleX,C=S.scaleY}s.rotatable&&(n.rotate=u),s.scalable&&(n.scaleX=g,n.scaleY=C),this.clone()}},{key:"clone",value:function(){var i=this.element,s=this.url,n=i.crossOrigin,l=s;this.options.checkCrossOrigin&&Fc(s)&&(n||(n="anonymous"),l=Lc(s)),this.crossOrigin=n,this.crossOriginUrl=l;var u=document.createElement("img");n&&(u.crossOrigin=n),u.src=l||s,u.alt=i.alt||"The image to crop",this.image=u,u.onload=this.start.bind(this),u.onerror=this.stop.bind(this),hi(u,yc),i.parentNode.insertBefore(u,i.nextSibling)}},{key:"start",value:function(){var i=this,s=this.image;s.onload=null,s.onerror=null,this.sizing=!0;var n=Rs.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(Rs.navigator.userAgent),l=function(S,A){$t(i.imageData,{naturalWidth:S,naturalHeight:A,aspectRatio:S/A}),i.initialImageData=$t({},i.imageData),i.sizing=!1,i.sized=!0,i.build()};if(s.naturalWidth&&!n){l(s.naturalWidth,s.naturalHeight);return}var u=document.createElement("img"),g=document.body||document.documentElement;this.sizingImage=u,u.onload=function(){l(u.width,u.height),n||g.removeChild(u)},u.src=s.src,n||(u.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",g.appendChild(u))}},{key:"stop",value:function(){var i=this.image;i.onload=null,i.onerror=null,i.parentNode.removeChild(i),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var i=this.element,s=this.options,n=this.image,l=i.parentNode,u=document.createElement("div");u.innerHTML=em;var g=u.querySelector(".".concat(Yt,"-container")),C=g.querySelector(".".concat(Yt,"-canvas")),S=g.querySelector(".".concat(Yt,"-drag-box")),A=g.querySelector(".".concat(Yt,"-crop-box")),D=A.querySelector(".".concat(Yt,"-face"));this.container=l,this.cropper=g,this.canvas=C,this.dragBox=S,this.cropBox=A,this.viewBox=g.querySelector(".".concat(Yt,"-view-box")),this.face=D,C.appendChild(n),hi(i,Ii),l.insertBefore(g,i.nextSibling),ws(n,yc),this.initPreview(),this.bind(),s.initialAspectRatio=Math.max(0,s.initialAspectRatio)||NaN,s.aspectRatio=Math.max(0,s.aspectRatio)||NaN,s.viewMode=Math.max(0,Math.min(3,Math.round(s.viewMode)))||0,hi(A,Ii),s.guides||hi(A.getElementsByClassName("".concat(Yt,"-dashed")),Ii),s.center||hi(A.getElementsByClassName("".concat(Yt,"-center")),Ii),s.background&&hi(g,"".concat(Yt,"-bg")),s.highlight||hi(D,Xf),s.cropBoxMovable&&(hi(D,pd),vn(D,mn,sh)),s.cropBoxResizable||(hi(A.getElementsByClassName("".concat(Yt,"-line")),Ii),hi(A.getElementsByClassName("".concat(Yt,"-point")),Ii)),this.render(),this.ready=!0,this.setDragMode(s.dragMode),s.autoCrop&&this.crop(),this.setData(s.data),Mi(s.ready)&&ji(i,Ec,s.ready,{once:!0}),fr(i,Ec)}}},{key:"unbuild",value:function(){if(!!this.ready){this.ready=!1,this.unbind(),this.resetPreview();var i=this.cropper.parentNode;i&&i.removeChild(this.cropper),ws(this.element,Ii)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=Rm,e}},{key:"setDefaults",value:function(i){$t(Tc,hr(i)&&i)}}])}();$t(wu.prototype,bm,wm,xm,Sm,Em,Am);const Dm=is({setup(){const e=Is(),t=zs();return{mainStore:e,apiStore:t}},emits:["update:modelValue","selected","close"],mixins:[Yn],components:{TCamera:Gf},name:"t-upload",data:()=>({form:{},message:"",page:"login",croppable:!1,maskedImage:!1,cropper:!1,imageSelected:!1,loading:!1,modal:!1,uploading:!1,uploaded:!1,valuex:"",configPost:{headers:{"content-type":"multipart/form-data"},onUploadProgress:!0}}),computed:{scale(){let e=1;switch(this.orientation){case"portrait":e=.7;break;case"landscape":e=1.5;break;case"square":e=1;break}return e}},methods:{reset(){this.loading=!1,this.uploaded=!1,this.imageSelected=!1,this.maskedImage=!1,this.valuex=!1},clean_progress(){setTimeout(()=>{let e=[];if(this.g_progress){for(const t in this.g_progress)if(this.g_progress.hasOwnProperty(t)){const i=this.g_progress[t];(parseInt(i)||0)===100&&e.push(t)}e.forEach(t=>{this.g_progress[t]&&delete this.g_progress[t],window.apiprogress[t]&&delete window.apiprogress[t]})}},2e3)},setPhoto(e){this.imageSelected=e,this.setCropper()},removeFile(){this.uploaded=!1,this.maskedImage="",this.imageSelected="",this.valuex="",this.$emit("update:modelValue","")},onLoad(e){e.stopPropagation(),e.preventDefault();const i=(e.target.files||e.dataTransfer.files)[0];this.getBase64Image(i)},getBase64Image(e){let t=new FileReader;t.addEventListener("load",()=>{this.imageSelected=t.result,this.setCropper()},!1),e&&t.readAsDataURL(e)},uploadFile(){this.uploaded=!1,this.clean_progress(),this.loading=!0,this.progress=0;let e=new FormData,t=this.dataURItoBlob(this.maskedImage);e.append("type",this.type),e.append("id",this.id),e.append("image",t),setTimeout(()=>{this.configPost.headers={"content-type":"multipart/form-data"},this.g_post("uploads",e,!1,this.configPost).then(i=>{this.loading=!1,i.res&&(this.progress=0,this.$emit("update:modelValue",i.res),this.uploaded=!0,this.imageSelected="")}).catch(()=>{this.loading=!1})},2e3)},dataURItoBlob(e){let t=atob(e.split(",")[1]),i=e.split(",")[0].split(":")[1].split(";")[0],s=new ArrayBuffer(t.length),n=new Uint8Array(s);for(let u=0;u<t.length;u++)n[u]=t.charCodeAt(u);let l=new DataView(s);return new Blob([l],{type:i})},reduceSize(e,t){if(e=parseFloat(e)||0,t=parseFloat(t)||0,e>900||t>900){e=e*.95,t=t*.95,this.reduceSize(e,t);const s=this.reduceSize(e,t);e=s.width,t=s.height}return{width:e,height:t}},setCropper(){let e=this;e.maskedImage=!1,e.croppable=!1,this.$nextTick(()=>{const t=e.$el.querySelector("#image");this.cropper=new wu(t,{autoCropArea:1,aspectRatio:e.scale||1,guides:!0,center:!0,highlight:!0,cropBoxMovable:!0,cropBoxResizable:!0,fillColor:"#fff",imageSmoothingEnabled:!1,imageSmoothingQuality:"medium",ready(){e.croppable=!0}})})},getCropped(){this.uploaded=!1,this.loading=!0,setTimeout(()=>{if(!this.croppable)return;let e=this.cropper.getCroppedCanvas();this.maskedImage=e.toDataURL(),this.$emit("selected",this.maskedImage),this.cropper.destroy(),setTimeout(()=>{this.loading=!1,this.imageSelected=!1},100)},200)}},watch:{g_progress(){this.clean_progress()},"this.imageSelected"(){this.imageSelected&&this.setCropper()},modal(e){e||this.$emit("close")},open(e){this.modal=e},valuex(e){this.$emit("update:modelValue",e)},modelValue(e){this.valuex=e,e===""&&this.reset()}},mounted(){},props:{id:{default:"",type:String},orientation:{default:"portrait",type:String},modelValue:{default:"",type:String},type:{default:"inventory",type:String},label:{default:"",type:String}}}),Tm={class:"q-if-label ellipsis full-width"},Pm=["src"],Fm={key:0},Lm={class:"flex-center"},Mm={key:0,class:"btn display-inline"},Im={key:1},Om={class:"col-sm-12 text-center m-t-20"},km={class:"absolute-full flex flex-center"};function Nm(e,t,i,s,n,l){const u=Dt("t-progress"),g=Dt("t-msg"),C=Dt("t-camera");return ee(),be("div",null,[e.loading?(ee(),ke(u,{key:0,class:"col-sm-12 text-center"})):we("",!0),Z("div",null,[Z("form",null,[Z("div",{class:"drop display-inline text-center",onDragover:t[2]||(t[2]=eu(()=>{},["prevent"])),onDrop:t[3]||(t[3]=S=>e.onLoad(S))},[Z("div",Tm,ze(e.label),1),Z("div",null,[(e.maskedImage?e.maskedImage:e.imageSelected?e.imageSelected:e.valuex)?(ee(),be("img",{key:0,id:"image",src:e.maskedImage?e.maskedImage:e.imageSelected?e.imageSelected:e.valuex},null,8,Pm)):we("",!0)]),e.maskedImage&&!e.imageSelected&&!e.uploaded?(ee(),be("div",Fm,[de(Ye,{class:"hide-mobile-btn-text",color:"primary",onClick:e.uploadFile,label:"Subir",icon:"fa fa-upload"},null,8,["onClick"]),de(Ye,{class:"hide-mobile-btn-text",color:"negative",onClick:e.removeFile,label:"Quitar",icon:"fa fa-eraser"},null,8,["onClick"]),de(g,{type:"warning"},{default:De(()=>[ut("Es necesario subir su imagen antes de Guardar el formulario.")]),_:1})])):we("",!0),Z("div",Lm,[!e.maskedImage&&!e.imageSelected?(ee(),be("label",Mm,[ut(" SELECCIONAR O ARRASTRAR IMAGEN "),Z("input",{type:"file",name:"image",onChange:t[0]||(t[0]=S=>e.onLoad(S))},null,32)])):we("",!0),!e.maskedImage&&!e.imageSelected?(ee(),ke(C,{key:1,onPhoto:t[1]||(t[1]=S=>e.setPhoto(S))})):we("",!0)]),e.uploaded?(ee(),ke(g,{key:1},{default:De(()=>[ut("Recuerde Pulsar el bot\xF3n Guardar para mantener cambios realizados. ")]),_:1})):we("",!0)],32)])]),e.imageSelected?(ee(),be("div",Im,[Z("div",Om,[de(Ye,{color:"primary",onClick:t[4]||(t[4]=S=>e.getCropped())},{default:De(()=>[ut("Finalizar Recorte")]),_:1})])])):we("",!0),(ee(!0),be(yi,null,Es(e.g_progress,(S,A)=>(ee(),be("div",{key:"progress_"+A},[de(iu,{size:"20px","model-value":parseFloat(S),style:yr({width:S+"%"}),color:"primary"},{default:De(()=>[Z("div",km,[de(tu,{color:"white","text-color":"primary",label:S+" %"},null,8,["label"])])]),_:2},1032,["model-value","style"])]))),128))])}var Gm=gi(Dm,[["render",Nm],["__scopeId","data-v-517cead4"]]),xu={exports:{}};(function(e,t){(function(i,s){e.exports=s()})(nf,function(){return function(i){function s(l){if(n[l])return n[l].exports;var u=n[l]={i:l,l:!1,exports:{}};return i[l].call(u.exports,u,u.exports,s),u.l=!0,u.exports}var n={};return s.m=i,s.c=n,s.i=function(l){return l},s.d=function(l,u,g){s.o(l,u)||Object.defineProperty(l,u,{configurable:!1,enumerable:!0,get:g})},s.n=function(l){var u=l&&l.__esModule?function(){return l.default}:function(){return l};return s.d(u,"a",u),u},s.o=function(l,u){return Object.prototype.hasOwnProperty.call(l,u)},s.p=".",s(s.s=9)}([function(i,s,n){s.a={prefix:"",suffix:"",thousands:",",decimal:".",precision:2}},function(i,s,n){var l=n(2),u=n(5),g=n(0);s.a=function(C,S){if(S.value){var A=n.i(u.a)(g.a,S.value);if(C.tagName.toLocaleUpperCase()!=="INPUT"){var D=C.getElementsByTagName("input");D.length!==1||(C=D[0])}C.oninput=function(){var M=C.value.length-C.selectionEnd;C.value=n.i(l.a)(C.value,A),M=Math.max(M,A.suffix.length),M=C.value.length-M,M=Math.max(M,A.prefix.length+1),n.i(l.b)(C,M),C.dispatchEvent(n.i(l.c)("change"))},C.onfocus=function(){n.i(l.b)(C,C.value.length-A.suffix.length)},C.oninput(),C.dispatchEvent(n.i(l.c)("input"))}}},function(i,s,n){function l(q){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:X.a;typeof q=="number"&&(q=q.toFixed(C(_.precision)));var J=q.indexOf("-")>=0?"-":"",se=g(q),$=A(se,_.precision),Y=W($).split("."),oe=Y[0],Oe=Y[1];return oe=D(oe,_.thousands),_.prefix+J+M(oe,Oe,_.decimal)+_.suffix}function u(q,_){var J=q.indexOf("-")>=0?-1:1,se=g(q),$=A(se,_);return parseFloat($)*J}function g(q){return W(q).replace(/\D+/g,"")||"0"}function C(q){return S(0,q,20)}function S(q,_,J){return Math.max(q,Math.min(_,J))}function A(q,_){var J=Math.pow(10,_);return(parseFloat(q)/J).toFixed(C(_))}function D(q,_){return q.replace(/(\d)(?=(?:\d{3})+\b)/gm,"$1"+_)}function M(q,_,J){return _?q+J+_:q}function W(q){return q?q.toString():""}function z(q,_){var J=function(){q.setSelectionRange(_,_)};q===document.activeElement&&(J(),setTimeout(J,1))}function U(q){var _=document.createEvent("Event");return _.initEvent(q,!0,!0),_}var X=n(0);n.d(s,"a",function(){return l}),n.d(s,"d",function(){return u}),n.d(s,"b",function(){return z}),n.d(s,"c",function(){return U})},function(i,s,n){function l(D,M){M&&Object.keys(M).map(function(W){S.a[W]=M[W]}),D.directive("money",C.a),D.component("money",g.a)}Object.defineProperty(s,"__esModule",{value:!0});var u=n(6),g=n.n(u),C=n(1),S=n(0);n.d(s,"Money",function(){return g.a}),n.d(s,"VMoney",function(){return C.a}),n.d(s,"options",function(){return S.a}),n.d(s,"VERSION",function(){return A});var A="0.8.1";s.default=l,typeof window<"u"&&window.Vue&&window.Vue.use(l)},function(i,s,n){Object.defineProperty(s,"__esModule",{value:!0});var l=n(1),u=n(0),g=n(2);s.default={name:"Money",props:{value:{required:!0,type:[Number,String],default:0},masked:{type:Boolean,default:!1},precision:{type:Number,default:function(){return u.a.precision}},decimal:{type:String,default:function(){return u.a.decimal}},thousands:{type:String,default:function(){return u.a.thousands}},prefix:{type:String,default:function(){return u.a.prefix}},suffix:{type:String,default:function(){return u.a.suffix}}},directives:{money:l.a},data:function(){return{formattedValue:""}},watch:{value:{immediate:!0,handler:function(C,S){var A=n.i(g.a)(C,this.$props);A!==this.formattedValue&&(this.formattedValue=A)}}},methods:{change:function(C){this.$emit("input",this.masked?C.target.value:n.i(g.d)(C.target.value,this.precision))}}}},function(i,s,n){s.a=function(l,u){return l=l||{},u=u||{},Object.keys(l).concat(Object.keys(u)).reduce(function(g,C){return g[C]=u[C]===void 0?l[C]:u[C],g},{})}},function(i,s,n){var l=n(7)(n(4),n(8),null,null);i.exports=l.exports},function(i,s){i.exports=function(n,l,u,g){var C,S=n=n||{},A=typeof n.default;A!=="object"&&A!=="function"||(C=n,S=n.default);var D=typeof S=="function"?S.options:S;if(l&&(D.render=l.render,D.staticRenderFns=l.staticRenderFns),u&&(D._scopeId=u),g){var M=D.computed||(D.computed={});Object.keys(g).forEach(function(W){var z=g[W];M[W]=function(){return z}})}return{esModule:C,exports:S,options:D}}},function(i,s){i.exports={render:function(){var n=this,l=n.$createElement;return(n._self._c||l)("input",{directives:[{name:"money",rawName:"v-money",value:{precision:n.precision,decimal:n.decimal,thousands:n.thousands,prefix:n.prefix,suffix:n.suffix},expression:"{precision, decimal, thousands, prefix, suffix}"}],staticClass:"v-money",attrs:{type:"tel"},domProps:{value:n.formattedValue},on:{change:n.change}})},staticRenderFns:[]}},function(i,s,n){i.exports=n(3)}])})})(xu);const _m={key:2},Vm={class:"q-ml-sm"},Hm={key:3,class:"t-input-toggle"},Bm={class:"q-ml-sm"},Wm={key:4,class:"t-input-radio t-input-box"},zm={class:"q-if-label ellipsis full-width"},Um={key:0,class:"q-gutter-sm"},Ym={class:"q-ml-sm"},Xm={key:5,class:"t-input-multi-check t-input-box"},$m={class:"q-if-label ellipsis full-width"},jm={class:"q-ml-sm"},Km={class:"q-gutter-sm"},qm={key:6,class:"t-input-multi-check t-input-box"},Qm={class:"q-if-label ellipsis full-width q-mb-md"},Zm={class:"q-ml-sm"},Jm={class:"q-ml-sm"},ev={class:"q-gutter-sm q-my-sm"},tv={key:7},iv={class:"q-ml-sm"},sv={key:8},ov={class:"row items-center justify-end"},rv={key:9},nv={class:"q-ml-sm"},av={key:10},lv={key:11,class:"form-title"},dv={key:12},hv={class:"q-ml-sm"},cv={key:13},uv={key:14},pv={key:15},gv={class:"q-field--focused q-field__label text-weight-regular text-body2"},fv={for:"file-2"},mv=Z("svg",{xmlns:"http://www.w3.org/2000/svg",class:"iborrainputfile",width:"20",height:"17",viewBox:"0 0 20 17"},[Z("path",{d:"M10 0l-5.2 4.9h3.3v5.1h3.8v-5.1h3.3l-5.2-4.9zm9.3 11.5l-3.2-2.1h-2l3.4 2.6h-3.5c-.1 0-.2.1-.2.1l-.8 2.3h-6l-.8-2.2c-.1-.1-.1-.2-.2-.2h-3.6l3.4-2.6h-2l-3.2 2.1c-.4.3-.7 1-.6 1.5l.6 3.1c.1.5.7.9 1.2.9h16.3c.6 0 1.1-.4 1.3-.9l.6-3.1c.1-.5-.2-1.2-.7-1.5z"})],-1),vv={key:0,class:"iborrainputfile"},Cv={key:1,class:"iborrainputfile"},yv={key:16},bv={class:"content-img"},wv=Z("div",{class:"helper"},null,-1),xv=["src"],Sv=Z("br",null,null,-1),Ev=Z("br",null,null,-1),Av={key:1,class:"btn display-inline"},Rv={key:17},Dv={key:18},Tv={__name:"t-input",props:{minFilter:{type:[Number,String],default:0},type:{type:String,default:""},id:{type:String,default:""},label:{type:String,default:""},xlabel:{type:String,default:""},xrequired:{type:Boolean,default:!1},col:{type:[String,Number],default:"12"},xs:{type:String,default:"12"},icon:{type:String,default:""},iconr:{type:String,default:""},disabled:{type:Boolean,default:!1},get:{type:String,default:""},getCache:{type:String,default:""},access:{type:String,default:"x"},n_label:{type:String,default:""},n_value:{type:String,default:""},map:{type:String,default:""},cond:{type:String,default:"cond"},mask:{type:String,default:""},hint:{type:String,default:""},fillMask:{type:String,default:""},bgColor:{type:String,default:""},prefix:{type:String,default:""},suffix:{type:String,default:""},align:{type:String,default:"left"},color:{type:String,default:"primary"},orientation:{type:String,default:"portrait"},error:{type:[String,Boolean,Number,Array,Object],default:null},after:{type:[String,Boolean,Number,Array,Object],default:null},attributes:{type:[String,Boolean,Number,Array,Object],default:null},min:{type:[String,Boolean,Number,Array,Object],default:null},max:{type:[String,Boolean,Number,Array,Object],default:null},step:{type:[String,Boolean,Number,Array,Object],default:null},autofocus:{type:Boolean,default:null},placeholder:{type:[String,Boolean,Number,Array,Object],default:null},maxlength:{type:[String,Boolean,Number,Array,Object],default:null},modelValue:{type:[String,Boolean,Number,Array,Object],default:null},loading:{type:Boolean,default:!1},rows:{type:Number,String,default:3},list:{type:[Array,Boolean],default:function(){return[]}},inline:{type:Boolean,default:!0},filter:{type:[Boolean,Number,String],default:!1},filterArray:{type:[String,Array],default:""},clearable:{type:Boolean,default:!1},filled:{type:Boolean,default:!0},outlined:{type:Boolean,default:!1},rounded:{type:Boolean,default:!1},noordered:{type:Boolean,default:!1},help:{type:String,default:""}},emits:["selected","update:modelValue","list","focus","blur","keydown","keypress","keyup","update","change"],setup(e,{expose:t,emit:i}){const s=Zd(),n=i,{u_getLang:l,u_get:u,u_getCache:g,u_module:C}=uo(),S=pe(),A=pe(),D=pe(),M=pe(""),W=pe(""),z=pe([]),U=pe(!1),X=pe(""),q=pe(""),_=pe(""),J=pe([]),se=pe({}),$=pe(!1),Y=pe({}),oe=pe(!1),Oe=pe(!1),re=pe([]),Ve=pe([]);let Pe=!1;const He=pe({days:"Domingo_Lunes_Martes_Mi\xE9rcoles_Jueves_Viernes_S\xE1bado".split("_"),daysShort:"Dom_Lun_Mar_Mi\xE9_Jue_Vie_S\xE1b".split("_"),months:"Enero_Febrero_Marzo_Abril_Mayo_Junio_Julio_Agosto_Septiembre_Octubre_Noviembre_Diciembre".split("_"),monthsShort:"Ene_Feb_Mar_Abr_May_Jun_Jul_Ago_Sep_Oct_Nov_Dic".split("_"),firstDayOfWeek:1,format24h:!0,pluralDay:"dias"}),tt=ve=>{Ne.value=ve.target.value.split("\\").pop(),n("change",ve)},Ge=(ve,le)=>{g("configurations/help/"+ve).then(_e=>{_e.res&&_e.res.text&&(M.value=_e.res.text,W.value=le)})},et=()=>{if(Ae.type=="select"){J.value=Ve.value;let ve=D.value||{};(ve.$el||0)&&!Pe&&(Pe=!0,ve.$el.children[0].children[0].children[0].children[0].firstChild.addEventListener("keyup",_e=>{if(_e.key=="Enter"||_e.code=="Enter"||_e.keyCode==13){oe.value=!0;const fe=_e.target.value||"";if(Ae.map&&Ae.map!=""&&(se.value[fe]||0)){const ye=se.value[fe]||{};n("selected",ye),J.value=Ve.value,ve.hidePopup()}}else oe.value=!1}))}},Gt=()=>{Ae.type==="editor"?re.value=[["bold","italic","strike","underline","subscript","superscript"],[{icon:s.iconSet.editor.fontSize,fixedLabel:!0,fixedIcon:!0,options:["size-1","size-2","size-3","size-4","size-5","size-6","size-7"]},{icon:s.iconSet.editor.font,fixedIcon:!0,list:"no-icons",options:["default_font","arial","arial_black","comic_sans","courier_new","impact","lucida_grande","times_new_roman","verdana"]},"removeFormat"],["unordered","ordered",{icon:s.iconSet.editor.align,fixedLabel:!0,options:["left","center","right","justify"]},"token","hr","link","custom_btn"],["viewsource","print","fullscreen"]]:Ae.type==="editor-mini"&&(re.value=[["bold","italic",{icon:s.iconSet.editor.fontSize,fixedLabel:!0,fixedIcon:!0,options:["size-1","size-2","size-3","size-4","size-5","size-6","size-7"]},"removeFormat",{icon:s.iconSet.editor.align,fixedLabel:!0,options:["left","center","right","justify"]},"hr","viewsource"]])},At=()=>{},vt=(ve,le,_e)=>{const fe=parseInt(Ae.minFilter)||0;if(fe>0&&ve.length<fe&&ve!==" "){_e();return}let ye=0;fe>1&&(ye=500),setTimeout(()=>{const zt=(ve||"").toLowerCase();if(oe.value){_e(),oe.value=!1;return}if(ve===""||ve===" "){le(()=>{J.value=Ve.value,ve=""});return}oe.value=!1,le(()=>{Y.value={},J.value=Ve.value.filter(Ie=>(Ie.label||"").toLowerCase().indexOf(zt)>-1)})},ye)},_t=function(ve){ve.stopPropagation(),ve.preventDefault();var le=ve.dataTransfer.files;ii(le[0])},ti=ve=>{const le=ve.target.files;ii(le[0])},ii=ve=>{if(Oe.value=!0,!ve.type.match("image.*")){alert("Select an image");return}const le=new FileReader;le.onprogress=function(_e){console.log("prog",_e);const fe=_e.total||0,ye=_e.loaded||0;let zt=fe*100/ye;console.log("PERCENT",zt)},le.onload=function(_e){_.value=_e.target.result,q.value=_e.target.result,Oe.value=!1,n("change",_e.target.result),ht(_e.target.result)},le.onerror=function(_e){console.error(_e),Oe.value=-1},le.readAsDataURL(ve)},pt=()=>{q.value="",ht("")},Ke=ve=>{const _e=document.getElementById("previus").getContext("2d"),fe=new Image;fe.onload=function(){_e.drawImage(fe,0,0)},fe.src=ve},qt=ve=>{const le=ve.target,_e=new FileReader;if(le.files[0].size>3e5)X.value="La imagen es muy pesada.",le.files[0].value="";else{U.value=!0,X.value="";var fe=document.getElementById("previus"),ye=fe.getContext("2d");_e.onload=function(){let zt=_e.result;var Ie=new Image;Ie.onload=function(){ye.drawImage(Ie,10,10)},Ie.src=zt,Ne.value=zt.split(" ").join("+")},_e.readAsDataURL(le.files[0])}},Kt=ve=>{const le=parseFloat(ve)||0;return!isNaN(le)},xt=(ve,le)=>{Ae.type=="number",n(ve,le)},ht=ve=>{Ae.type=="select"?(oe.value=!1,Mt(ve,2)):Ae.type=="number"?Kt(ve)?Mt(ve,3):Mt(0,4):Ae.type=="money"?(ve=ve.replace(",",""),Mt(ve,3)):Ae.type=="checkbox"||Ae.type=="toggle"?Mt(ve,7):Ae.type=="date"||Ae.type=="time"?(S.value.hide(),A.value&&A.value.hide(),ve&&Mt(ve,5)):Mt(ve,6)},Mt=(ve,le="")=>{n("update:modelValue",ve),Ne.value=ve},si=ve=>ve,Pt=(ve=!1)=>{let le=!1,_e=!1;return Ae.get!==""&&Ae.type!=="image"?(le=Ae.get,_e=u(le),_e.then(fe=>{Ae.noordered?z.value=fe.res:z.value=si(fe.res),Ee(),n("list",z.value)})):Ae.getCache!==""&&(le=Ae.getCache,_e=g(le,[],ve),_e.then(fe=>{Ae.noordered?z.value=fe.res:z.value=si(fe.res),Ee(),n("list",z.value)})),_e},Ee=()=>{let ve=[];Ae.get!==""||Ae.getCache!==""?ve=z.value||[]:ve=Ae.list||[];let le={};if(Ae.map&&Ae.map!=""&&ve.forEach(_e=>{const fe=((_e[Ae.map]||0)+"").trim();le[fe]=_e}),se.value=le,Array.isArray(ve)){const _e=(Ae.n_label||0)&&Ae.n_label.length>0?Ae.n_label:"label",fe=(Ae.n_value||0)&&Ae.n_value.length>0?Ae.n_value:"value";ve.forEach((ye,zt)=>{ve[zt].label=ye[_e],ve[zt].value=ye[fe]})}(Ae.filter||0)&&Ae.filter.length>0&&Ae.cond!==""&&Array.isArray(ve)&&(ve=ve.filter(_e=>_e[Ae.cond]==Ae.filter)),Ae.filterArray&&Array.isArray(Ae.filterArray)&&Ae.filterArray.length>0&&Array.isArray(ve)&&(ve=ve.filter(_e=>{let fe=_e[Ae.filterArray],ye=0;return Array.isArray(fe)&&fe.length>0&&fe.forEach(zt=>{Ae.filterArray.indexOf(zt)>-1&&ye++}),ye==Ae.filterArray.length})),Ve.value=ve,et()},ne=ls(()=>{let ve=Ae.label||l.value[Ae.xlabel]||null;return(Ae.xrequired||!1)&&Ae.xrequired!==""&&(ve=ve+"*"),ve}),te=ls(()=>Ae.icon?[{icon:Ae.icon}]:Ae.access!=="x"?[{icon:"bug_report"}]:[]),qe=ls(()=>{let ve=12;switch(Ae.col){case"12":case"11":case"10":case"9":case"8":case"7":case"6":case"5":ve=12;break;case"4":case"3":case"2":case"1":ve=6;break}return"col-sm-"+Ae.col+" col-xs-"+ve}),Ne=ls({get(){let ve="";if(Ae.type==="number")ve="";else{if(Ae.type==="toggle")return ve=q.value,typeof q.value=="string"&&(ve=parseInt(q.value)||0),ve=Boolean(ve)||!1,ve;if(Ae.type==="multi-check")return typeof q.value=="string"?JSON.parse(q.value)||[]:q.value||[]}return q.value||ve},set(ve){Ae.type==="toggle"&&(typeof ve=="string"&&(ve=ve=="true"?ve=="false"?0:1:0,ve=parseInt(ve)||0),ve=Boolean(ve)||!1),q.value=ve}}),Ae=e;return ui(Ae,ve=>{ve.list&&Ee(),ve.filter&&Ee(),Ne.value=ve.modelValue}),ui(Ve,ve=>{J.value=ve}),Us(()=>{J.value=Ve.value,Ne.value=Ae.modelValue,Ee(),Pt()||et(),Gt()}),t({setValue:Mt,preloadImg:Ke,uploadFile:qt,mapList:se,tselect:D,map:Ae.map}),(ve,le)=>{const _e=Dt("t-help"),fe=Dt("t-progress");return!$.value&&(e.access=="x"||ct(C)(e.access))?(ee(),be("div",{key:0,class:As(qe.value+" q-px-xs")},[e.type==="search"||e.type==="text"||e.type==="textarea"||e.type==="password"||e.type==="tel"||e.type==="email"||e.type==="number"||e.type==="password"||e.type==="url"?(ee(),ke(or,{key:0,filled:e.filled,outlined:e.outlined,rounded:e.rounded,type:e.type==="hidden"?"text":e.type,clearable:e.clearable,autofocus:e.autofocus,ref:"customInput",prefix:e.prefix,rows:e.rows,suffix:e.suffix,label:ne.value,after:[{icon:"warning",error:!0,color:"red"}],error:e.error,maxlength:e.max,min:e.min,step:e.step,loading:e.loading,align:e.align,color:e.color,"bg-color":e.bgColor,dense:"",disable:e.disabled,modelValue:Ne.value,"onUpdate:modelValue":le[1]||(le[1]=ye=>ht(ye)),onClick:At,onFocus:le[2]||(le[2]=ye=>xt("focus",ye)),onBlur:le[3]||(le[3]=ye=>xt("blur",ye)),onKeydown:le[4]||(le[4]=ye=>xt("keydown",ye)),onKeyup:le[5]||(le[5]=ye=>xt("keyup",ye)),onKeypress:le[6]||(le[6]=ye=>xt("keypress",ye)),style:{width:"100%"},mask:e.mask,hint:e.hint,"fill-mask":e.fillMask},{append:De(()=>[e.type==="search"?(ee(),ke(_s,{key:0,name:"search"})):we("",!0),e.help?(ee(),ke(_e,{key:1,onClick:le[0]||(le[0]=ye=>Ge(e.help,ne.value)),message:M.value,title:W.value},null,8,["message","title"])):we("",!0)]),prepend:De(()=>[e.icon?(ee(),ke(_s,{key:0,name:e.icon},null,8,["name"])):we("",!0)]),_:1},8,["filled","outlined","rounded","type","clearable","autofocus","prefix","rows","suffix","label","error","maxlength","min","step","loading","align","color","bg-color","disable","modelValue","mask","hint","fill-mask"])):e.type==="money"?Nt((ee(),ke(or,{key:1,filled:e.filled,outlined:e.outlined,rounded:e.rounded,type:"text",clearable:e.clearable,autofocus:e.autofocus,ref:"customInput",prefix:"$",rows:e.rows,suffix:e.suffix,label:ne.value,after:[{icon:"warning",error:!0,color:"red"}],error:e.error,maxlength:e.max,min:e.min,step:e.step,loading:e.loading,align:e.align,color:e.color,"bg-color":e.bgColor,dense:"",disable:e.disabled,modelValue:Ne.value,"onUpdate:modelValue":le[7]||(le[7]=ye=>ht(ye)),onClick:At,onFocus:le[8]||(le[8]=ye=>xt("focus",ye)),onBlur:le[9]||(le[9]=ye=>xt("blur",ye)),onKeydown:le[10]||(le[10]=ye=>xt("keydown",ye)),onKeyup:le[11]||(le[11]=ye=>xt("keyup",ye)),onKeypress:le[12]||(le[12]=ye=>xt("keypress",ye)),style:{width:"100%"},hint:e.hint},null,8,["filled","outlined","rounded","clearable","autofocus","rows","suffix","label","error","maxlength","min","step","loading","align","color","bg-color","disable","modelValue","hint"])),[[ct(xu.exports.VMoney),{decimal:".",thousands:",",prefix:"",suffix:"",precision:0,masked:!1}]]):e.type==="checkbox"?(ee(),be("div",_m,[de(dc,{class:"q-mt-sm",label:ne.value,color:e.color,"bg-color":e.bgColor,disable:e.disabled,modelValue:Ne.value,"unchecked-icon":"visibility_off","onUpdate:modelValue":le[13]||(le[13]=ye=>ht(ye))},null,8,["label","color","bg-color","disable","modelValue"]),Z("span",Vm,[e.help?(ee(),ke(_e,{key:0,onClick:le[14]||(le[14]=ye=>Ge(e.help,ne.value)),message:M.value,title:W.value},null,8,["message","title"])):we("",!0)])])):e.type==="toggle"?(ee(),be("div",Hm,[de(af,{modelValue:Ne.value,"onUpdate:modelValue":le[16]||(le[16]=ye=>ht(ye)),color:e.color,"bg-color":e.bgColor,label:ne.value},{default:De(()=>[Z("span",Bm,[e.help?(ee(),ke(_e,{key:0,onClick:le[15]||(le[15]=ye=>Ge(e.help,ne.value)),message:M.value,title:W.value},null,8,["message","title"])):we("",!0)])]),_:1},8,["modelValue","color","bg-color","label"])])):e.type==="radio"?(ee(),be("div",Wm,[Z("div",zm,ze(ne.value),1),Ve.value.length>0?(ee(),be("div",Um,[(ee(!0),be(yi,null,Es(Ve.value,(ye,zt)=>(ee(),ke(df,{key:zt,modelValue:Ne.value,"onUpdate:modelValue":le[17]||(le[17]=Ie=>ht(Ie)),val:ye.value,label:ye.label,inline:e.inline,color:e.color,"bg-color":e.bgColor,size:"xs"},null,8,["modelValue","val","label","inline","color","bg-color"]))),128)),Z("span",Ym,[e.help?(ee(),ke(_e,{key:0,onClick:le[18]||(le[18]=ye=>Ge(e.help,ne.value)),message:M.value,title:W.value},null,8,["message","title"])):we("",!0)])])):we("",!0)])):e.type==="multi-check"&&Ve.value.length>0?(ee(),be("div",Xm,[Z("div",$m,[ut(ze(ne.value)+" ",1),Z("span",jm,[e.help?(ee(),ke(_e,{key:0,onClick:le[19]||(le[19]=ye=>Ge(e.help,ne.value)),message:M.value,title:W.value},null,8,["message","title"])):we("",!0)])]),Z("div",Km,[(ee(!0),be(yi,null,Es(Ve.value,(ye,zt)=>(ee(),ke(dc,{key:zt,modelValue:Ne.value,"onUpdate:modelValue":le[20]||(le[20]=Ie=>ht(Ie)),val:ye.value,label:ye.label,color:e.color,"bg-color":e.bgColor,size:"sm"},null,8,["modelValue","val","label","color","bg-color"]))),128))])])):e.type==="editor"||e.type==="editor-mini"?(ee(),be("div",qm,[Z("div",Qm,[ut(ze(ne.value)+" ",1),Z("span",Zm,[e.help?(ee(),ke(_e,{key:0,onClick:le[21]||(le[21]=ye=>Ge(e.help,ne.value)),message:M.value,title:W.value},null,8,["message","title"])):we("",!0)]),Z("span",Jm,[e.help?(ee(),ke(_e,{key:0,onClick:le[22]||(le[22]=ye=>Ge(e.help,ne.value)),message:M.value,title:W.value},null,8,["message","title"])):we("",!0)])]),Z("div",ev,[de(lf,{dense:ct(s).screen.lt.md,"max-height":"70px",modelValue:Ne.value,"onUpdate:modelValue":le[23]||(le[23]=ye=>ht(ye)),"toolbar-bg":e.color,"toolbar-text-color":"white","toolbar-toggle-color":"warning","toolbar-rounded":"",toolbar:re.value,fonts:{arial:"Arial",arial_black:"Arial Black",comic_sans:"Comic Sans MS",courier_new:"Courier New",impact:"Impact",lucida_grande:"Lucida Grande",times_new_roman:"Times New Roman",verdana:"Verdana"}},null,8,["dense","modelValue","toolbar-bg","toolbar"])])])):e.type==="date"?(ee(),be("div",tv,[de(or,{filled:e.filled,outlined:e.outlined,rounded:e.rounded,dense:"",onClick:At,before:te.value,modelValue:Ne.value,"onUpdate:modelValue":le[26]||(le[26]=ye=>ht(ye)),label:ne.value,style:{width:"100%"},locale:He.value},{append:De(()=>[de(_s,{name:"event",class:"cursor-pointer"},{default:De(()=>[de(nn,{ref_key:"qDateProxy",ref:S,"transition-show":"scale","transition-hide":"scale"},{default:De(()=>[de(cc,{mask:"YYYY-MM-DD",modelValue:Ne.value,"onUpdate:modelValue":le[24]||(le[24]=ye=>ht(ye)),color:e.color,"bg-color":e.bgColor,locale:He.value},null,8,["modelValue","color","bg-color","locale"])]),_:1},512)]),_:1}),Z("span",iv,[e.help?(ee(),ke(_e,{key:0,onClick:le[25]||(le[25]=ye=>Ge(e.help,ne.value)),message:M.value,title:W.value},null,8,["message","title"])):we("",!0)])]),_:1},8,["filled","outlined","rounded","before","modelValue","label","locale"])])):e.type==="datetime"?(ee(),be("div",sv,[de(or,{filled:"",label:ne.value,modelValue:Ne.value,"onUpdate:modelValue":le[29]||(le[29]=ye=>ht(ye))},{prepend:De(()=>[de(_s,{name:"event",class:"cursor-pointer"},{default:De(()=>[de(nn,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:De(()=>[de(cc,{modelValue:Ne.value,mask:"YYYY-MM-DD HH:mm","onUpdate:modelValue":le[27]||(le[27]=ye=>ht(ye)),locale:He.value},{default:De(()=>[Z("div",ov,[Nt(de(Ye,{label:"Close",color:"primary",flat:""},null,512),[[uf]])])]),_:1},8,["modelValue","locale"])]),_:1})]),_:1})]),append:De(()=>[de(_s,{name:"access_time",class:"cursor-pointer"},{default:De(()=>[de(nn,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:De(()=>[de(uc,{modelValue:Ne.value,mask:"YYYY-MM-DD HH:mm","onUpdate:modelValue":le[28]||(le[28]=ye=>ht(ye)),locale:He.value},null,8,["modelValue","locale"])]),_:1})]),_:1})]),_:1},8,["label","modelValue"])])):e.type==="time"?(ee(),be("div",rv,[de(or,{filled:e.filled,outlined:e.outlined,rounded:e.rounded,dense:"",before:te.value,modelValue:Ne.value,"onUpdate:modelValue":le[32]||(le[32]=ye=>ht(ye)),label:ne.value,style:{width:"100%"},locale:He.value},{append:De(()=>[de(_s,{name:"event",class:"cursor-pointer"},{default:De(()=>[de(nn,{ref_key:"qDateProxy",ref:S,"transition-show":"scale","transition-hide":"scale"},{default:De(()=>[de(uc,{mask:"HH:mm",modelValue:Ne.value,color:e.color,"bg-color":e.bgColor,"onUpdate:modelValue":le[30]||(le[30]=ye=>ht(ye))},null,8,["modelValue","color","bg-color"])]),_:1},512)]),_:1}),Z("span",nv,[e.help?(ee(),ke(_e,{key:0,onClick:le[31]||(le[31]=ye=>Ge(e.help,ne.value)),message:M.value,title:W.value},null,8,["message","title"])):we("",!0)])]),_:1},8,["filled","outlined","rounded","before","modelValue","label","locale"])])):e.type==="space"?(ee(),be("div",av)):e.type==="title"?(ee(),be("div",lv,ze(ne.value),1)):e.type==="select"?(ee(),be("div",dv,[de(hc,{autocomplete:"off",autocorrect:"off",autocapitalize:"off",dense:"",style:{width:"100%"},ref_key:"tselect",ref:D,"stack-label":"",behavior:"menu",filled:e.filled,outlined:e.outlined,rounded:e.rounded,"hide-selected":!0,"fill-input":!0,readonly:e.disabled,disable:e.disabled,"input-debounce":500,autofocus:e.autofocus,"use-input":!0,"emit-value":!0,"map-options":!0,"virtual-scroll-slice-size":15,label:ne.value,options:J.value,modelValue:Ne.value,color:e.color,"bg-color":e.bgColor,"options-selected-class":"text-deep-blue",clearable:e.clearable,hint:e.hint,onFilter:vt,"onUpdate:modelValue":le[34]||(le[34]=ye=>ht(ye))},{option:De(ye=>[de(Ma,hf(cf(ye.itemProps)),{default:De(()=>[de(pc,null,{default:De(()=>[de(gc,{innerHTML:ye.opt.label,class:"capitalize"},null,8,["innerHTML"]),de(gc,{caption:""},{default:De(()=>[ut(ze(ye.opt.description),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),after:De(()=>[Z("span",hv,[e.help?(ee(),ke(_e,{key:0,onClick:le[33]||(le[33]=ye=>Ge(e.help,ne.value)),message:M.value,title:W.value},null,8,["message","title"])):we("",!0)])]),"no-option":De(()=>[de(Ma,null,{default:De(()=>[de(pc,{class:"text-italic text-grey"},{default:De(()=>[ut(" Sin Resultados ")]),_:1})]),_:1})]),_:1},8,["filled","outlined","rounded","readonly","disable","autofocus","label","options","modelValue","color","bg-color","clearable","hint"])])):e.type==="select-multi"?(ee(),be("div",cv,[de(hc,{autocomplete:"off",autocorrect:"off",autocapitalize:"off","use-chips":"",multiple:"",dense:"",style:{width:"100%"},ref_key:"tselect",ref:D,"stack-label":"",behavior:"menu",filled:e.filled,outlined:e.outlined,rounded:e.rounded,readonly:e.disabled,disable:e.disabled,"input-debounce":500,autofocus:e.autofocus,"use-input":!0,"fill-input":!0,"emit-value":!0,"virtual-scroll-slice-size":15,modelValue:Ne.value,"onUpdate:modelValue":le[35]||(le[35]=ye=>ht(ye)),label:ne.value,options:J.value,color:e.color,"bg-color":e.bgColor,"options-selected-class":"text-deep-blue",clearable:e.clearable,"map-options":!0,onFilter:vt,"hide-selected":!1},null,8,["filled","outlined","rounded","readonly","disable","autofocus","modelValue","label","options","color","bg-color","clearable"])])):e.type==="image"?(ee(),be("div",uv,[de(Gm,{modelValue:Ne.value,"onUpdate:modelValue":le[36]||(le[36]=ye=>ht(ye)),label:ne.value,orientation:e.orientation,id:e.id,type:e.get},null,8,["modelValue","label","orientation","id","type"])])):e.type==="file2"?(ee(),be("div",pv,[Z("span",gv,ze(ne.value),1),Z("input",{id:"file-2",type:"file",class:"inputfile inputfile-2",onChange:tt,style:{width:"100%"}},null,32),Z("label",fv,[mv,Ne.value?(ee(),be("span",vv,ze(Ne.value),1)):(ee(),be("span",Cv,"Seleccionar archivo "))])])):e.type==="file"?(ee(),be("div",yv,[de(or,{type:"text",clearable:e.clearable,class:"hidden",ref:"customInput",prefix:e.prefix,suffix:e.suffix,label:ne.value,before:te.value,after:[{icon:"warning",error:!0,color:"red"}],error:e.error,step:e.step,loading:e.loading,align:e.align,color:e.color,"bg-color":e.bgColor,disable:e.disabled,modelValue:Ne.value,"onUpdate:modelValue":le[37]||(le[37]=ye=>ht(ye))},null,8,["clearable","prefix","suffix","label","before","error","step","loading","align","color","bg-color","disable","modelValue"]),Z("div",bv,[Z("div",{class:"drop display-inline align-center",onDragover:le[38]||(le[38]=eu(()=>{},["prevent"])),onDrop:_t},[wv,Ne.value!=""?(ee(),be("div",{key:0,class:As(["hidden display-inline align-center",{image:!0}])},[Z("img",{src:Ne.value,alt:"",class:"img"},null,8,xv),Sv,Ev,de(Ye,{class:"hide-mobile-btn-text",color:"negative",onClick:pt,label:ct(l).btn_delete},null,8,["label"])])):(ee(),be("label",Av,[ut(" SELECCIONA O ARRASTRE UNA IMAGEN "),Z("input",{type:"file",name:"image",onChange:ti},null,32)])),Nt(de(fe,{label:"LEYENDO ...",color:"white"},null,512),[[Bt,Oe.value]])],32)])])):e.type==="hidden"?(ee(),be("div",Rv)):(ee(),be("div",Dv," T-INPUT "+ze(e.type)+" NOT EXIST ",1)),wt(ve.$slots,"default")],2)):we("",!0)}}};const Pv=is({setup(){const e=Is(),t=zs();return{mainStore:e,apiStore:t}},computed:{selfClass(){let e="";switch(this.size){case"sm":e="sm-tmodal";break;case"md":e="md-tmodal";break;case"lg":e="lg-tmodal";break;case"xl":e="xl-tmodal";break;default:e="";break}return e}},emits:["update:modelValue","hide"],mixins:[Yn],data(){return{opened:!1,maximizedState:!1}},watch:{opened(e){this.$emit("update:modelValue",e)},modelValue(e){this.opened=e},maximized(e){this.maximizedState=e}},methods:{closeX(){this.opened=!1,this.$emit("hide",this.opened),this.$emit("update:modelValue",this.opened)}},mounted(){this.opened=this.modelValue,this.maximizedState=this.maximized},props:{style:{type:[String,Object],default:""},modelValue:{type:Boolean,default:!1},maximized:{type:Boolean,default:!1},title:{type:String,default:""},"o-name":{type:String,default:""},"o-color":{type:String,default:""},"o-icon":{type:String,default:""},"content-class":{type:String,default:""},size:{type:String,default:"md"},position:{type:String,default:"standard"},icon:{type:String,default:""}}}),Fv={id:"modal-container"},Lv={key:0,class:"q-pa-sm q-pb-xl"},Mv=Z("br",null,null,-1),Iv=Z("br",null,null,-1);function Ov(e,t,i,s,n,l){return ee(),be("div",Fv,[de(pf,{modelValue:e.opened,"onUpdate:modelValue":t[1]||(t[1]=u=>e.opened=u),maximized:e.maximizedState,onHide:e.closeX,class:As(e.contentClass+" "+e.selfClass),position:e.position,style:yr(e.style)},{default:De(()=>[de(gf,{container:"",class:"bg-white"},{default:De(()=>[de(ff,{class:"bg-accent text-white"},{default:De(()=>[de(ld,null,{default:De(()=>[de(dd,null,{default:De(()=>[e.icon?(ee(),ke(_s,{key:0,name:e.icon},null,8,["name"])):we("",!0),ut(" "+ze(e.title),1)]),_:1}),de(Ye,{round:"",dense:"",size:"xs",color:"white","text-color":"primary",icon:e.maximizedState?"fa fa-compress-alt fa-1x":"fa fa-expand-alt",onClick:t[0]||(t[0]=u=>e.maximizedState=!e.maximizedState),class:"hide-mobile-btn q-mr-sm"},null,8,["icon"]),de(Ye,{round:"",dense:"",class:"close-button",size:"xs",icon:"fa fa-times",color:"white","text-color":"primary",onClick:e.closeX},null,8,["onClick"])]),_:1})]),_:1}),e.opened?(ee(),be("div",Lv,[wt(e.$slots,"default"),Mv,Iv])):we("",!0),de(su,{class:"text-primary"},{default:De(()=>[de(ld,{class:"q-pa-xs",style:{"flex-wrap":"wrap"}},{default:De(()=>[de(dd),wt(e.$slots,"btn1"),wt(e.$slots,"btn2"),wt(e.$slots,"footer"),wt(e.$slots,"config")]),_:3})]),_:3})]),_:3})]),_:3},8,["modelValue","maximized","onHide","class","position","style"]),e.oName?(ee(),ke(Ye,{key:0,color:e.oColor,onClick:t[2]||(t[2]=u=>e.opened=!0),label:e.oName,icon:e.oIcon},null,8,["color","label","icon"])):we("",!0)])}var kv=gi(Pv,[["render",Ov]]);const Nv={setup(e,t){let i=e.params||t.attrs.params||{};const s=Zd(),{u_directCache:n,u_currency:l}=uo(),u=Is(),g=pe(""),C=pe(""),S=pe(""),A=()=>{s.dialog({title:i.data.description,message:C.value,html:!0}).onOk(()=>{}).onCancel(()=>{}).onDismiss(()=>{})},D=z=>{let U='<div class="full q-card q-pa-sm box-item-audit">';for(const X in z)if(Object.hasOwnProperty.call(z,X)){const q=z[X];q!==""&&(U+=`<p><strong>${u.language[X]}</strong> ${q}</p>`)}return U+="</div>",U},M=(z,U)=>((z=="price1"||z=="base")&&(U=l(U)),U),W=(z,U=!1)=>{const X=["sku","name","count","base","price1","utility","rack","row"];let q={};return X.forEach(_=>{const J=U&&(U[_]||0)?U[_]:"";let se="";J!==""&&(se='<del class="text-red">'+M(_,J)+"</del> ");const $=M(_,z[_]?z[_]:"");q["inventory_"+_]=se+$}),q};return Us(()=>{xo(()=>{g.value=i.value,S.value=i.data.table;let z="<div>";if(i.data.table=="inventory"){const U=n("general-inventory");let X=i.data.before,q=i.data.after;if(X.length>0){try{X=JSON.parse(X)}catch{}u.language&&Array.isArray(X)&&X.forEach(_=>{const J=W(_);z+=D(J)})}if(q.length>0)try{q=JSON.parse(q)}catch{}if(Array.isArray(U)){const _=U.filter(J=>J.id==i.value)[0]||!1;if(_){g.value=_.sku,_.value=_;const J=W(_,X);z+=D(J)}else if(q){const J=W(q,X);z+=D(J)}}}z+="</div>",C.value=z})}),{label:g,showInfo:A,table:S}}},Gv={key:1};function _v(e,t,i,s,n,l){return ee(),be("div",null,[s.table=="inventory"?(ee(),ke(Ye,{key:0,size:"xs",round:"",onClick:s.showInfo},{default:De(()=>[ut(ze(s.label),1)]),_:1},8,["onClick"])):(ee(),be("span",Gv,ze(s.label),1))])}var Vv=gi(Nv,[["render",_v]]);const Hv=is({setup(){const e=Is(),t=zs();return{mainStore:e,apiStore:t}},mixins:[Yn],data(){return{list:[],modal:!1,columns:[{label:"M\xF3dulo",field:"table",width:140},{label:"ID",field:"id",width:100,cellRenderer:Vv},{label:"Descripci\xF3n",field:"description",width:210},{label:"Anterior",field:"before",width:250},{label:"Nuevo",field:"after",width:250},{label:"Fecha",field:"registered",width:150},{label:"Usuario",field:"id_users",width:150}]}},methods:{getList(e){let t=e[0]||"",i=e[1]||"";this.g_get("audit/list/"+this.table+"/x/"+t+"/"+i).then(s=>{this.list=s.res||[]})}},mounted(){this.getList([this.g_date,this.g_date])},props:{table:{type:String,default:"x"}}}),Bv={class:"q-px-sm"};function Wv(e,t,i,s,n,l){const u=Dt("t-table"),g=Dt("t-modal");return ee(),be("div",null,[de(Ye,{onClick:t[0]||(t[0]=C=>e.modal=!0),icon:"fa fa-eye","text-color":"primary",class:"q-mr-sm"},{default:De(()=>[Z("label",Bv,ze(e.getLang.modifications),1),e.list.length?(ee(),ke(tu,{key:0,color:"red",floating:""},{default:De(()=>[ut(ze(e.list.length),1)]),_:1})):we("",!0)]),_:1}),de(g,{modelValue:e.modal,"onUpdate:modelValue":t[1]||(t[1]=C=>e.modal=C),title:e.getLang.modifications},{default:De(()=>[de(u,{data:e.list,columns:e.columns,onDateChange:e.getList,"date-filter":""},null,8,["data","columns","onDateChange"])]),_:1},8,["modelValue","title"])])}var zv=gi(Hv,[["render",Wv]]);const Uv={props:{open:{type:String,default:""},title:{type:String,default:""},"o-name":{type:String,default:""},"o-color":{type:String,default:""},"o-icon":{type:String,default:""}}};function Yv(e,t,i,s,n,l){const u=Dt("t-modal");return ee(),ke(u,{title:"Select Image","o-color":"primary","o-icon":"close"},{default:De(()=>[ut(" --- ")]),_:1})}var Xv=gi(Uv,[["render",Yv]]);const $v=is({setup(){const e=Is(),t=zs();return{mainStore:e,apiStore:t}},mixins:[Yn],data(){return{filterText:"",openFab:!0,viewportHeight:0,viewportWidth:0,isPortrait:!0,isMobile:!1,reveal:!1}},emits:["open"],watch:{openFab(e){this.$emit("open",e)}},props:{title:{type:String,default:""},selection:{default:"single",type:String}},mounted(){this.$q.platform.is.desktop?this.reveal=!1:this.reveal=!0}}),jv={class:"t-footer"},Kv=Z("br",null,null,-1);function qv(e,t,i,s,n,l){return ee(),be("div",jv,[Kv,de(su,{reveal:e.reveal,class:"row justify-end q-py-xs btn-container"},{default:De(()=>[wt(e.$slots,"default")]),_:3},8,["reveal"])])}var Qv=gi($v,[["render",qv]]);const Zv=e=>(qd("data-v-38385cb1"),e=e(),Qd(),e),Jv={class:"row q-px-sm"},eC={class:"row justify-center full q-pt-sm"},tC={key:1,class:"row flex-center"},iC={key:0,class:"controls row justify-end"},sC={key:0,class:"btn-input-container"},oC={key:0,class:"row form-row justify-center q-mb-lg"},rC={class:"row form-row q-pa-sm"},nC={class:"row form-row q-pa-sm"},aC={class:"row justify-center"},lC={key:1,class:"row justify-center"},dC={key:3,class:"row justify-center"},hC=Zv(()=>Z("br",null,null,-1)),cC={__name:"t-form",props:{code:{type:String,default:""},strict:{type:Boolean,default:!1},"key-name":{type:String,default:"id"},data:{type:Object,default:()=>{}},hideButtons:{type:Boolean,default:!1},dev:{type:Boolean,default:!1},clean:{type:Boolean,default:!1},hideBorder:{type:Boolean,default:!1},hideTitle:{type:Boolean,default:!1}},emits:["form-config","saving","saved","invalid","save","invalid","clean","focus","keydown","keypress","keyup","keydown","blur","change","update:modelValue"],setup(e,{expose:t,emit:i}){const s=i,n=pe(),l=pe(!1),u=pe(!1),g=pe(!1),C=pe(!1),S=pe(!1),A=pe(!0),D=pe(!1),M=pe(!1),W=pe(!0),z=pe("Title"),U=pe(""),X=pe(""),q=pe(""),_=pe(""),J=pe(""),se=pe(""),$=pe(""),Y=pe({}),oe=pe([[]]),Oe=pe([]),re=pe({size:"4",required:!1,clearable:!1,type:"text",list:"",listCache:"",help:null}),Ve=pe([]);mf(()=>{Ve.value=[]});const Pe=()=>{_t()&&(D.value=!D.value)},He=pe([{value:"title",label:"title"},{value:"text",label:"text"},{value:"editor",label:"Editor"},{value:"editor-mini",label:"Editor Mini"},{value:"textarea",label:"long text"},{value:"number",label:"number"},{value:"file",label:"file"},{value:"image",label:"image"},{value:"password",label:"password"},{value:"tel",label:"tel"},{value:"email",label:"email"},{value:"url",label:"url"},{value:"space",label:"space"},{value:"radio",label:"radio"},{value:"checkbox",label:"checkbox"},{value:"multi-check",label:"multi-check"},{value:"toggle",label:"toggle"},{value:"select",label:"select"},{value:"select-multi",label:"select-multi"},{value:"date",label:"date"},{value:"time",label:"time"},{value:"datetime",label:"datetime"},{value:"hidden",label:"hidden"}]),{u_put:tt,u_post:Ge,u_getCache:et,u_message:Gt,u_loading:At,u_getLang:vt,u_localhost:_t,u_module:ti}=uo(),ii=ls(()=>Y.value.hasOwnProperty(Ke.keyName)&&Y.value[Ke.keyName]!==0&&Y.value[Ke.keyName]!==""),pt=ls(()=>{for(var Ie in Y.value)if(Y.value.hasOwnProperty(Ie))return!1;return!0}),Ke=e;Jd(()=>{for(let Ie=1;Ie<13;Ie++){let ue=Ie+"";Oe.value.push({value:ue,label:ue})}}),ui(Ke,Ie=>{Ie.data&&ht()});const qt=(Ie,ue="")=>{Ve.value[Ie]&&Ve.value[Ie].setValue(ue,7)},Kt=Ie=>Y.value[Ie],xt=()=>{let Ie={};Ie.code="upsert_form",Ie.name=Ke.code,Ie.id=Ke.code,Ie.fields=oe.value,Ie.title=z.value,Ie.urlx=$.value,Ie.save_text=U.value,Ie.edit_text=_.value,Ie.save_module=X.value,Ie.edit_module=J.value,Ie.save_icon=q.value,Ie.edit_icon=se.value,tt("query",Ie).then(ue=>{ue.res&&(D.value=!1)})},ht=()=>{g.value=!0,et("query/get_form/"+Ke.code).then(Ie=>{if(g.value=!1,Ie.res){S.value=!0,Ke.strict||(Y.value=Ke.data||{});let ue=Ie.res;U.value=ue.save_text,_.value=ue.edit_text,X.value=ue.save_module,J.value=ue.edit_module,q.value=ue.save_icon,se.value=ue.edit_icon;const Me={form_save_text:U.value,form_save_module:X.value,form_save_icon:q.value,form_edit:W.value,form_edit_text:_.value,form_edit_module:J.value,form_edit_icon:se.value};s("form-config",Me),oe.value=ue.fields,oe.value.forEach(bt=>{bt.forEach(at=>{Ke.strict&&(Ke.data[at.var_name]||0)&&(Y.value[at.var_name]=Ke.data[at.var_name]),at.type==="select-multi"&&typeof Y.value[at.var_name]>"u"&&(Y.value[at.var_name]=[]),Y.value.id=="logo"&&(at.type="hidden")})}),z.value=ue.title,$.value=ue.url}})},Mt=()=>{let Ie=!0;if(Array.isArray(oe.value)){let ue;for(ue=0;ue<oe.value.length;ue++){let Me=oe.value[ue];if(Array.isArray(Me)){let bt;for(bt=0;bt<Me.length;bt++){let at=Me[bt],Re=Y.value[at.var_name]||"";if(at.required&&at.required!==""&&!(Re!==""&&Re!==0)&&(at.name||0)){const gt=((n.value||{}).parentElement.getElementsByTagName("input")||[])[0]||!1;gt&&gt.focus(),Gt(vt.value[at.name]+" "+vt.value.form_required,"warning"),Ie=!1;break}}if(!Ie)break}}return Ie}},si=()=>{Y.value={},s("clean",!0)},Pt=(Ie=!1)=>{if(Mt()){s("saving",!0),console.log("saving"),C.value=!0,At();let ue=$.value,Me=Y.value||{};ue.search("query")>=0&&(Me.code=ue.replace("query/",""),ue="query");let bt="post";if(Me[Ke.keyName]&&Me[Ke.keyName]!==0&&Me[Ke.keyName]!==""&&(bt="put"),Ie==!0&&Me[Ke.keyName]&&(bt="post",delete Me[Ke.keyName]),ue!=""){let at=null;bt==="put"?at=tt(ue,Me):at=Ge(ue,Me),at.then(Re=>{console.log("saved"),C.value=!1;let gt=Re.res;bt=="put"&&(gt=Me[Ke.keyName]),Re.res?(s("saved",{res:gt,method:bt}),si()):s("invalid",!0)}).finally(()=>{At(0)})}else{let at={};Array.isArray(oe.value)&&oe.value.forEach(Re=>{Array.isArray(Re)&&Re.forEach(gt=>{at[gt.var_name]=Me[gt.var_name]})}),s("save",at),C.value=!1,At(0)}}else s("invalid",!0)},Ee=(Ie="")=>{Y.value[Ie]=""},ne=(Ie,ue,Me={})=>{Me.depends&&Ee(Me.depends),s(Ie,ue)},te=()=>{qe(),M.value=!1},qe=()=>{console.log("cleanForm")},Ne=()=>{let Ie=re.value.row-1,ue=re.value.field||0,Me=re.value,bt={name:Me.name,var_name:Me.var_name,size:Me.size,type:Me.type,icon:Me.icon,orientation:Me.orientation,required:Me.required,clearable:Me.clearable,noedit:Me.noedit,disabled:Me.disabled,list:Me.list,listCache:Me.listCache,module:Me.module,help:Me.help,cond:Me.cond,filter:Me.filter,depends:Me.depends};ue?oe.value[Ie][ue-1]=bt:(oe.value[Ie]||(oe.value[Ie]=[]),oe.value[Ie].push(bt)),te()},Ae=()=>{oe.value.push([])},ve=Ie=>{qe(),re.value.row=Ie+1,M.value=!0},le=Ie=>{oe.value.splice(Ie,1)},_e=(Ie=0,ue=0)=>{qe(),M.value=!0,re.value=oe.value[Ie][ue],re.value.row=Ie+1,re.value.field=ue+1},fe=(Ie=0,ue=0)=>{oe.value[Ie].splice(ue,1)},ye=(Ie="up",ue=0)=>{let Me=parseFloat(ue),bt=!1;if(Ie=="up"?Me>0&&(Me--,bt=!0):Me<oe.value.length-1&&(bt=!0),bt){let at=JSON.stringify(oe.value);at=JSON.parse(at);let Re=at[ue],gt=[];at.splice(ue,1),Array.isArray(at)&&at.forEach(($e,mi)=>{mi==Me&&Ie=="up"&&gt.push(Re),gt.push($e),mi==Me&&Ie=="down"&&gt.push(Re)}),at=gt,oe.value=at}},zt=(Ie="left",ue=0,Me=0)=>{let bt=parseFloat(Me),at=!1;if(Ie=="left"?bt>0&&(bt--,at=!0):bt<oe.value[ue].length-1&&(at=!0),at){let Re=JSON.stringify(oe.value);Re=JSON.parse(Re);let gt=Re[ue][Me],$e=[];Re[ue].splice(Me,1),Array.isArray(Re[ue])&&Re[ue].forEach((mi,It)=>{It==bt&&Ie=="left"&&$e.push(gt),$e.push(mi),It==bt&&Ie=="right"&&$e.push(gt)}),Re[ue]=$e,oe.value=Re}};return t({form:oe,form_data:Y,setValue:qt,getValue:Kt,sendForm:Pt,getForm:ht,saveForm:xt,cleanForm:qe,cleanData:si,props:Ke,loaded:S,tFormInternalRef:n}),Us(()=>{Ke.code&&ht()}),(Ie,ue)=>{const Me=Dt("t-input"),bt=Dt("t-edit-list"),at=Dt("t-title");return ee(),be("div",{ref_key:"tFormInternalRef",ref:n},[Z("div",{class:As({"form-border":!e.hideBorder})},[D.value?(ee(),ke(vf,{key:0,side:"right",modelValue:M.value,"onUpdate:modelValue":ue[18]||(ue[18]=Re=>M.value=Re),"content-class":Ie.$q.theme==="mat"?"bg-grey-3":null,"content-style":{fontSize:"16px"}},{default:De(()=>[de(ld,{color:"primary"},{default:De(()=>[de(dd,null,{default:De(()=>[ut(ze(ct(vt).new_field),1)]),_:1})]),_:1}),Z("div",Jv,[de(Me,{type:"select",label:"Type",modelValue:re.value.type,"onUpdate:modelValue":ue[0]||(ue[0]=Re=>re.value.type=Re),col:"12",list:He.value},null,8,["modelValue","list"]),de(Me,{type:"text",label:"Row",modelValue:re.value.row,"onUpdate:modelValue":ue[1]||(ue[1]=Re=>re.value.row=Re),col:"6"},null,8,["modelValue"]),Oe.value.length>0?(ee(),ke(Me,{key:0,type:"select",label:"Size",modelValue:re.value.size,"onUpdate:modelValue":ue[2]||(ue[2]=Re=>re.value.size=Re),col:"6",list:Oe.value},null,8,["modelValue","list"])):we("",!0),Nt(de(Me,{type:"text",label:"Name",modelValue:re.value.name,"onUpdate:modelValue":ue[3]||(ue[3]=Re=>re.value.name=Re),col:"12"},null,8,["modelValue"]),[[Bt,re.value.type!="space"]]),Nt(de(Me,{type:"text",label:"Var Name",modelValue:re.value.var_name,"onUpdate:modelValue":ue[4]||(ue[4]=Re=>re.value.var_name=Re),col:"12"},null,8,["modelValue"]),[[Bt,re.value.type!="space"]]),Nt(de(Me,{type:"text",label:"Module",modelValue:re.value.module,"onUpdate:modelValue":ue[5]||(ue[5]=Re=>re.value.module=Re),col:"12"},null,8,["modelValue"]),[[Bt,re.value.type!="space"]]),Nt(de(Me,{type:"text",label:"Help",modelValue:re.value.help,"onUpdate:modelValue":ue[6]||(ue[6]=Re=>re.value.help=Re),col:"12"},null,8,["modelValue"]),[[Bt,re.value.type!="space"]]),Nt(de(Me,{type:"text",label:"List",modelValue:re.value.list,"onUpdate:modelValue":ue[7]||(ue[7]=Re=>re.value.list=Re),col:"12"},null,8,["modelValue"]),[[Bt,re.value.type=="select"||re.value.type=="select-multi"||re.value.type=="radio"||re.value.type=="image"||re.value.type=="multi-check"]]),Nt(de(Me,{type:"text",label:"List Cach\xE9",modelValue:re.value.listCache,"onUpdate:modelValue":ue[8]||(ue[8]=Re=>re.value.listCache=Re),col:"12"},null,8,["modelValue"]),[[Bt,re.value.type=="select"||re.value.type=="select-multi"||re.value.type=="radio"||re.value.type=="multi-check"]]),Nt(de(Me,{type:"text",label:"Cond",modelValue:re.value.cond,"onUpdate:modelValue":ue[9]||(ue[9]=Re=>re.value.cond=Re),col:"12"},null,8,["modelValue"]),[[Bt,re.value.type=="select"||re.value.type=="select-multi"||re.value.type=="radio"||re.value.type=="multi-check"]]),Nt(de(Me,{type:"text",label:"Filter",modelValue:re.value.filter,"onUpdate:modelValue":ue[10]||(ue[10]=Re=>re.value.filter=Re),col:"12"},null,8,["modelValue"]),[[Bt,re.value.type=="select"||re.value.type=="select-multi"||re.value.type=="radio"||re.value.type=="multi-check"]]),Nt(de(Me,{type:"text",label:"Depends",modelValue:re.value.depends,"onUpdate:modelValue":ue[11]||(ue[11]=Re=>re.value.depends=Re),col:"12"},null,8,["modelValue"]),[[Bt,re.value.type=="select"||re.value.type=="radio"||re.value.type=="multi-check"]]),Nt(de(Me,{type:"select",label:"Orientracion",modelValue:re.value.orientation,"onUpdate:modelValue":ue[12]||(ue[12]=Re=>re.value.orientation=Re),list:[{label:"Portrait",value:"portrait"},{label:"Landscape",value:"landscape"},{label:"Square",value:"square"}],col:"12"},null,8,["modelValue"]),[[Bt,re.value.type=="image"]]),Nt(de(Me,{type:"select",label:"Icon",icon:re.value.icon,modelValue:re.value.icon,"onUpdate:modelValue":ue[13]||(ue[13]=Re=>re.value.icon=Re),col:"12","get-cache":"general-icons"},null,8,["icon","modelValue"]),[[Bt,re.value.type!="space"]]),de(Me,{class:"q-mt-sm",type:"checkbox",label:"Required",icon:"account_box",list:[{value:1,label:"Required"}],modelValue:re.value.required,"onUpdate:modelValue":ue[14]||(ue[14]=Re=>re.value.required=Re),col:"12"},null,8,["modelValue"]),de(Me,{class:"q-mt-sm",type:"checkbox",label:"Clearable",icon:"account_box",list:[{value:1,label:"Required"}],modelValue:re.value.clearable,"onUpdate:modelValue":ue[15]||(ue[15]=Re=>re.value.clearable=Re),col:"12"},null,8,["modelValue"]),de(Me,{class:"q-mt-sm",type:"checkbox",label:"Disabled",icon:"account_box",list:[{value:1,label:"Required"}],modelValue:re.value.disabled,"onUpdate:modelValue":ue[16]||(ue[16]=Re=>re.value.disabled=Re),col:"12"},null,8,["modelValue"]),de(Me,{class:"q-my-sm",type:"checkbox",label:"No Editable",icon:"account_box",list:[{value:1,label:"Required"}],modelValue:re.value.noedit,"onUpdate:modelValue":ue[17]||(ue[17]=Re=>re.value.noedit=Re),col:"12"},null,8,["modelValue"]),Z("div",eC,[de(Ye,{icon:"save",color:"primary",onClick:Ne,class:"q-mr-sm"},{default:De(()=>[ut("Save")]),_:1}),de(Ye,{icon:"clear",color:"dark",onClick:te,class:"q-mr-sm"},{default:De(()=>[ut("Cancel")]),_:1}),de(bt,{modal:!0,label:"",icon:"language",title:"LANG",id:"language",code:"code",get:"language",delete:"query/delete_language",object:!0,size:"sm"})])])]),_:1},8,["modelValue","content-class"])):we("",!0),g.value?(ee(),be("div",tC,[de(eh,{color:"primary",size:30})])):we("",!0),S.value&&!u.value?(ee(),be(yi,{key:2},[ct(ti)("superadmin")&&ct(_t)()?(ee(),ke(Ye,{key:0,icon:"edit",color:"positive",class:"q-mt-lg q-ml-sm",onClick:Pe,size:"xs",round:""})):we("",!0),e.hideTitle?we("",!0):(ee(),be(yi,{key:1},[de(at,{name:ct(vt)[z.value]||z.value},{default:De(()=>[wt(Ie.$slots,"title",{},void 0,!0)]),_:3},8,["name"]),D.value?(ee(),ke(Cf,{key:0},{default:De(()=>[de(Me,{type:"text",modelValue:z.value,"onUpdate:modelValue":ue[19]||(ue[19]=Re=>z.value=Re),label:"Title"},null,8,["modelValue"])]),_:1})):we("",!0)],64)),wt(Ie.$slots,"top",{},void 0,!0),(ee(!0),be(yi,null,Es(oe.value,(Re,gt)=>(ee(),be("div",{class:As(["row q-pa-xxs",D.value?"form-row":""]),key:"formItemWrapper-"+gt},[D.value?(ee(),be("div",iC,[Nt(de(Ye,{icon:"keyboard_arrow_up",color:"tertiary",size:"xs",dense:"",onClick:$e=>ye("up",gt)},null,8,["onClick"]),[[Bt,gt!=0]]),Nt(de(Ye,{icon:"keyboard_arrow_down",color:"tertiary",size:"xs",dense:"",onClick:$e=>ye("down",gt)},null,8,["onClick"]),[[Bt,gt!=oe.value.length-1]]),de(Ye,{icon:"add",color:"primary",size:"xs",dense:"",onClick:$e=>ve(gt)},null,8,["onClick"]),de(Ye,{icon:"clear",color:"negative",size:"xs",dense:"",onClick:$e=>le(gt)},null,8,["onClick"])])):we("",!0),(ee(!0),be(yi,null,Es(Re,($e,mi)=>(ee(),ke(Me,{key:"formItem-"+gt+"-"+mi,type:$e.type,xlabel:$e.name,xrequired:($e.required||!1)&&$e.required!=="",clearable:$e.clearable||!1,modelValue:Y.value[$e.var_name],"onUpdate:modelValue":[It=>Y.value[$e.var_name]=It,It=>ne("update:modelValue",[$e.var_name,It],$e)],icon:$e.icon,col:$e.size,access:$e.module,help:$e.help,disabled:$e.noedit&&ii.value||$e.disabled||$e.filter&&(!Y.value[$e.filter]||Y.value[$e.filter]==""),get:$e.list,id:Y.value.id,orientation:$e.orientation,getCache:$e.listCache,noordered:$e.noordered,ref_for:!0,ref:It=>{Ve.value[$e.var_name||0||null]=It},onFocus:It=>ne("focus",[$e.var_name,It],$e),onBlur:It=>ne("blur",[$e.var_name,It],$e),onKeydown:It=>ne("keydown",[$e.var_name,It],$e),onKeyup:It=>ne("keyup",[$e.var_name,It],$e),onKeypress:It=>ne("keypress",[$e.var_name,It],$e),onChange:It=>ne("change",[$e.var_name,It],$e),cond:$e.cond,filter:Y.value[$e.filter]},{default:De(()=>[D.value?(ee(),be("div",sC,[Nt(de(Ye,{icon:"keyboard_arrow_left",color:"tertiary",size:"xs",dense:"",onClick:It=>zt("left",gt,mi)},null,8,["onClick"]),[[Bt,mi!=0]]),de(Ye,{icon:"edit",color:"primary",size:"xs",dense:"",onClick:It=>_e(gt,mi)},null,8,["onClick"]),de(Ye,{icon:"clear",color:"negative",size:"xs",dense:"",onClick:It=>fe(gt,mi)},null,8,["onClick"]),Nt(de(Ye,{icon:"keyboard_arrow_right",color:"tertiary",size:"xs",dense:"",onClick:It=>zt("right",gt,mi)},null,8,["onClick"]),[[Bt,mi!=Re.length-1]])])):we("",!0)]),_:2},1032,["type","xlabel","xrequired","clearable","modelValue","onUpdate:modelValue","icon","col","access","help","disabled","get","id","orientation","getCache","noordered","onFocus","onBlur","onKeydown","onKeyup","onKeypress","onChange","cond","filter"]))),128)),wt(Ie.$slots,"bottom",{},void 0,!0)],2))),128)),D.value?(ee(),be(yi,{key:2},[D.value?(ee(),be("div",oC,[de(Me,{type:"text",modelValue:$.value,"onUpdate:modelValue":ue[20]||(ue[20]=Re=>$.value=Re),label:"URL"},null,8,["modelValue"])])):we("",!0),Z("div",rC,[de(Me,{class:"q-mt-md",type:"checkbox",label:"Save",icon:"account_box",modelValue:A.value,"onUpdate:modelValue":ue[21]||(ue[21]=Re=>A.value=Re),col:"2"},null,8,["modelValue"]),de(Me,{disabled:!A.value,type:"text",label:"Alt Name",col:"5",modelValue:U.value,"onUpdate:modelValue":ue[22]||(ue[22]=Re=>U.value=Re)},null,8,["disabled","modelValue"]),de(Me,{disabled:!A.value,type:"text",label:"Module",col:"3",modelValue:X.value,"onUpdate:modelValue":ue[23]||(ue[23]=Re=>X.value=Re)},null,8,["disabled","modelValue"]),de(Me,{disabled:!W.value,type:"text",label:"Icon",col:"2",modelValue:q.value,"onUpdate:modelValue":ue[24]||(ue[24]=Re=>q.value=Re)},null,8,["disabled","modelValue"])]),Z("div",nC,[de(Me,{class:"q-mt-md",type:"checkbox",label:"Update",icon:"account_box",modelValue:W.value,"onUpdate:modelValue":ue[25]||(ue[25]=Re=>W.value=Re),col:"2"},null,8,["modelValue"]),de(Me,{disabled:!W.value,type:"text",label:"Alt Name",col:"5",modelValue:_.value,"onUpdate:modelValue":ue[26]||(ue[26]=Re=>_.value=Re)},null,8,["disabled","modelValue"]),de(Me,{disabled:!W.value,type:"text",label:"Module",col:"3",modelValue:J.value,"onUpdate:modelValue":ue[27]||(ue[27]=Re=>J.value=Re)},null,8,["disabled","modelValue"]),de(Me,{disabled:!W.value,type:"text",label:"Icon",col:"2",modelValue:se.value,"onUpdate:modelValue":ue[28]||(ue[28]=Re=>se.value=Re)},null,8,["disabled","modelValue"])]),Z("div",aC,[de(Ye,{icon:"add",color:"primary",size:"sm",class:"q-mt-lg",onClick:Ae},{default:De(()=>[ut("\xA0 Add Row")]),_:1}),de(Ye,{icon:"save",color:"warning",size:"sm",class:"q-mt-lg q-ml-sm",onClick:xt},{default:De(()=>[ut("\xA0 Save Form ")]),_:1}),de(Ye,{icon:"close",color:"negative",size:"sm",class:"q-mt-lg q-ml-sm",onClick:ue[29]||(ue[29]=Re=>D.value=!1)},{default:De(()=>[ut("\xA0 Cancel ")]),_:1})]),(ee(),be("div",lC,[Z("pre",null,ze(oe.value),1),Z("pre",null,ze(Y.value),1)]))],64)):we("",!0),e.hideButtons?we("",!0):(ee(),be("div",dC,[W.value&&ii.value?(ee(),ke(Ye,{key:0,icon:se.value||"save",color:"warning",class:"q-mt-lg q-ml-sm",onClick:ue[30]||(ue[30]=Re=>Pt()),disabled:C.value},{default:De(()=>[ut("\xA0 "+ze(_.value||"Actualizar"),1)]),_:1},8,["icon","disabled"])):we("",!0),A.value&&!ii.value?(ee(),ke(Ye,{key:1,icon:q.value||"save",color:"primary",class:"q-mt-lg q-ml-sm",onClick:ue[31]||(ue[31]=Re=>Pt()),disabled:C.value},{default:De(()=>[ut("\xA0 "+ze(U.value||"Guardar"),1)]),_:1},8,["icon","disabled"])):we("",!0),A.value&&!pt.value&&e.clean?(ee(),ke(Ye,{key:2,icon:"clear",color:"negative",class:"q-mt-lg q-ml-sm",onClick:si},{default:De(()=>[ut("\xA0 Limpiar")]),_:1})):we("",!0)]))],64)):we("",!0)],2),ct(_t)()?(ee(),be(yi,{key:0},[hC,Z("i",{class:"fa fa-code",onClick:ue[32]||(ue[32]=Re=>l.value=!l.value)}),Nt(Z("pre",null,ze(Y.value),513),[[Bt,l.value]])],64)):we("",!0)],512)}}};var uC=gi(cC,[["__scopeId","data-v-38385cb1"]]),nh=Object.defineProperty,pC=Object.defineProperties,gC=Object.getOwnPropertyDescriptor,fC=Object.getOwnPropertyDescriptors,Oa=Object.getOwnPropertySymbols,Su=Object.prototype.hasOwnProperty,Eu=Object.prototype.propertyIsEnumerable,Mc=(e,t,i)=>t in e?nh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,We=(e,t)=>{for(var i in t||(t={}))Su.call(t,i)&&Mc(e,i,t[i]);if(Oa)for(var i of Oa(t))Eu.call(t,i)&&Mc(e,i,t[i]);return e},Vt=(e,t)=>pC(e,fC(t)),mC=(e,t)=>{var i={};for(var s in e)Su.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(e!=null&&Oa)for(var s of Oa(e))t.indexOf(s)<0&&Eu.call(e,s)&&(i[s]=e[s]);return i},fi=(e,t)=>{for(var i in t)nh(e,i,{get:t[i],enumerable:!0})},E=(e,t,i,s)=>{for(var n=s>1?void 0:s?gC(t,i):t,l=e.length-1,u;l>=0;l--)(u=e[l])&&(n=(s?u(t,i,n):u(n))||n);return s&&n&&nh(t,i,n),n},ds=(e,t)=>(i,s)=>t(i,s,e),Au={};fi(Au,{attrToBoolean:()=>ka,attrToNumber:()=>ro,attrToString:()=>vC,defaultComparator:()=>CC,exists:()=>ce,jsonEquals:()=>bd,makeNull:()=>xs,missing:()=>Xe,missingOrEmpty:()=>Hi,toStringOrNull:()=>Cn,values:()=>Ao});function xs(e){return e==null||e===""?null:e}function ce(e,t=!1){return e!=null&&(e!==""||t)}function Xe(e){return!ce(e)}function Hi(e){return e==null||e.length===0}function Cn(e){return e!=null&&typeof e.toString=="function"?e.toString():null}function ro(e){if(e===void 0)return;if(e===null||e==="")return null;if(typeof e=="number")return isNaN(e)?void 0:e;const t=parseInt(e,10);return isNaN(t)?void 0:t}function ka(e){if(e!==void 0)return e===null||e===""?!1:typeof e=="boolean"?e:/true/i.test(e)}function vC(e){if(!(e==null||e===""))return e}function bd(e,t){const i=e?JSON.stringify(e):null,s=t?JSON.stringify(t):null;return i===s}function CC(e,t,i=!1){const s=e==null,n=t==null;if(e&&e.toNumber&&(e=e.toNumber()),t&&t.toNumber&&(t=t.toNumber()),s&&n)return 0;if(s)return-1;if(n)return 1;function l(u,g){return u>g?1:u<g?-1:0}if(typeof e!="string"||!i)return l(e,t);try{return e.localeCompare(t)}catch{return l(e,t)}}function Ao(e){if(e instanceof Set||e instanceof Map){const t=[];return e.forEach(i=>t.push(i)),t}return Object.values(e)}var yC=class{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=Cn(e);let i=0;for(;;){let s;if(e?(s=e,i!==0&&(s+="_"+i)):t?(s=t,i!==0&&(s+="_"+i)):s=i,!this.existingKeys[s])return this.existingKeys[s]=!0,String(s);i++}}},Ru={};fi(Ru,{cloneObject:()=>ah,deepCloneDefinition:()=>Na,getAllValuesInObject:()=>no,getValueUsingField:()=>mr,isNonNullObject:()=>Ga,iterateObject:()=>bi,mergeDeep:()=>Wi,removeAllReferences:()=>Du});function bi(e,t){if(e!=null){if(Array.isArray(e)){for(let i=0;i<e.length;i++)t(i.toString(),e[i]);return}for(const[i,s]of Object.entries(e))t(i,s)}}function ah(e){const t={},i=Object.keys(e);for(let s=0;s<i.length;s++){const n=i[s],l=e[n];t[n]=l}return t}function Na(e,t){if(!e)return;const i=e,s={};return Object.keys(i).forEach(n=>{if(t&&t.indexOf(n)>=0)return;const l=i[n];Ga(l)&&l.constructor===Object?s[n]=Na(l):s[n]=l}),s}function no(e){if(!e)return[];const t=Object;if(typeof t.values=="function")return t.values(e);const i=[];for(const s in e)e.hasOwnProperty(s)&&e.propertyIsEnumerable(s)&&i.push(e[s]);return i}function Wi(e,t,i=!0,s=!1){!ce(t)||bi(t,(n,l)=>{let u=e[n];u!==l&&(s&&u==null&&l!=null&&typeof l=="object"&&l.constructor===Object&&(u={},e[n]=u),Ga(l)&&Ga(u)&&!Array.isArray(u)?Wi(u,l,i,s):(i||l!==void 0)&&(e[n]=l))})}function mr(e,t,i){if(!t||!e)return;if(!i)return e[t];const s=t.split(".");let n=e;for(let l=0;l<s.length;l++){if(n==null)return;n=n[s[l]]}return n}function Du(e,t=[],i){Object.keys(e).forEach(u=>{typeof e[u]=="object"&&!t.includes(u)&&(e[u]=void 0)});const s=Object.getPrototypeOf(e),n={},l=u=>`AG Grid: Grid API function ${u}() cannot be called as the grid has been destroyed.
    It is recommended to remove local references to the grid api. Alternatively, check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.
    To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${i}`;Object.getOwnPropertyNames(s).forEach(u=>{if(typeof s[u]=="function"&&!t.includes(u)){const C=()=>{console.warn(l(u))};n[u]={value:C,writable:!0}}}),Object.defineProperties(e,n)}function Ga(e){return typeof e=="object"&&e!==null}var Tu={};fi(Tu,{compose:()=>bC,debounce:()=>Ai,doOnce:()=>Ro,errorOnce:()=>ys,executeAfter:()=>Fu,executeInAWhile:()=>Pu,executeNextVMTurn:()=>wd,getFunctionName:()=>sl,isFunction:()=>ol,noop:()=>wC,throttle:()=>xd,waitUntil:()=>lh,warnOnce:()=>Ue});var Ic={};function Ro(e,t){Ic[t]||(e(),Ic[t]=!0)}function Ue(e){Ro(()=>console.warn("AG Grid: "+e),e)}function ys(e){Ro(()=>console.error("AG Grid: "+e),e)}function sl(e){if(e.name)return e.name;const t=/function\s+([^\(]+)/.exec(e.toString());return t&&t.length===2?t[1].trim():null}function ol(e){return!!(e&&e.constructor&&e.call&&e.apply)}function Pu(e){Fu(e,400)}var Yl=[],Xl=!1;function wd(e){Yl.push(e),!Xl&&(Xl=!0,window.setTimeout(()=>{const t=Yl.slice();Yl.length=0,Xl=!1,t.forEach(i=>i())},0))}function Fu(e,t=0){e.length>0&&window.setTimeout(()=>e.forEach(i=>i()),t)}function Ai(e,t){let i;return function(...s){const n=this;window.clearTimeout(i),i=window.setTimeout(function(){e.apply(n,s)},t)}}function xd(e,t){let i=0;return function(...s){const n=this,l=new Date().getTime();l-i<t||(i=l,e.apply(n,s))}}function lh(e,t,i=100,s){const n=new Date().getTime();let l=null,u=!1;const g=()=>{const C=new Date().getTime()-n>i;(e()||C)&&(t(),u=!0,l!=null&&(window.clearInterval(l),l=null),C&&s&&console.warn(s))};g(),u||(l=window.setInterval(g,10))}function bC(...e){return t=>e.reduce((i,s)=>s(i),t)}var wC=()=>{},Lu=(e=>(e.CommunityCoreModule="@ag-grid-community/core",e.InfiniteRowModelModule="@ag-grid-community/infinite-row-model",e.ClientSideRowModelModule="@ag-grid-community/client-side-row-model",e.CsvExportModule="@ag-grid-community/csv-export",e.EnterpriseCoreModule="@ag-grid-enterprise/core",e.RowGroupingModule="@ag-grid-enterprise/row-grouping",e.ColumnsToolPanelModule="@ag-grid-enterprise/column-tool-panel",e.FiltersToolPanelModule="@ag-grid-enterprise/filter-tool-panel",e.MenuModule="@ag-grid-enterprise/menu",e.SetFilterModule="@ag-grid-enterprise/set-filter",e.MultiFilterModule="@ag-grid-enterprise/multi-filter",e.StatusBarModule="@ag-grid-enterprise/status-bar",e.SideBarModule="@ag-grid-enterprise/side-bar",e.RangeSelectionModule="@ag-grid-enterprise/range-selection",e.MasterDetailModule="@ag-grid-enterprise/master-detail",e.RichSelectModule="@ag-grid-enterprise/rich-select",e.GridChartsModule="@ag-grid-enterprise/charts",e.ViewportRowModelModule="@ag-grid-enterprise/viewport-row-model",e.ServerSideRowModelModule="@ag-grid-enterprise/server-side-row-model",e.ExcelExportModule="@ag-grid-enterprise/excel-export",e.ClipboardModule="@ag-grid-enterprise/clipboard",e.SparklinesModule="@ag-grid-enterprise/sparklines",e.AdvancedFilterModule="@ag-grid-enterprise/advanced-filter",e.AngularModule="@ag-grid-community/angular",e.ReactModule="@ag-grid-community/react",e.VueModule="@ag-grid-community/vue",e))(Lu||{}),rl=class Tt{static register(t){Tt.__register(t,!0,void 0)}static registerModules(t){Tt.__registerModules(t,!0,void 0)}static __register(t,i,s){Tt.runVersionChecks(t),s!==void 0?(Tt.areGridScopedModules=!0,Tt.gridModulesMap[s]===void 0&&(Tt.gridModulesMap[s]={}),Tt.gridModulesMap[s][t.moduleName]=t):Tt.globalModulesMap[t.moduleName]=t,Tt.setModuleBased(i)}static __unRegisterGridModules(t){delete Tt.gridModulesMap[t]}static __registerModules(t,i,s){Tt.setModuleBased(i),t&&t.forEach(n=>Tt.__register(n,i,s))}static isValidModuleVersion(t){const[i,s]=t.version.split(".")||[],[n,l]=Tt.currentModuleVersion.split(".")||[];return i===n&&s===l}static runVersionChecks(t){if(Tt.currentModuleVersion||(Tt.currentModuleVersion=t.version),t.version?Tt.isValidModuleVersion(t)||console.error(`AG Grid: You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. '${t.moduleName}' is version ${t.version} but the other modules are version ${this.currentModuleVersion}. Please update all modules to the same version.`):console.error(`AG Grid: You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. '${t.moduleName}' is incompatible. Please update all modules to the same version.`),t.validate){const i=t.validate();i.isValid||console.error(`AG Grid: ${i.message}`)}}static setModuleBased(t){Tt.moduleBased===void 0?Tt.moduleBased=t:Tt.moduleBased!==t&&Ro(()=>{console.warn("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),console.warn("Please see https://www.ag-grid.com/javascript-grid/packages-modules/ for more information.")},"ModulePackageCheck")}static __setIsBundled(){Tt.isBundled=!0}static __assertRegistered(t,i,s){var n;if(this.__isRegistered(t,s))return!0;const l=i+t;let u;if(Tt.isBundled)u=`AG Grid: unable to use ${i} as 'ag-grid-enterprise' has not been loaded. Check you are using the Enterprise bundle:
        
        <script src="https://cdn.jsdelivr.net/npm/ag-grid-enterprise@AG_GRID_VERSION/dist/ag-grid-enterprise.min.js"><\/script>
        
For more info see: https://ag-grid.com/javascript-data-grid/getting-started/#getting-started-with-ag-grid-enterprise`;else if(Tt.moduleBased||Tt.moduleBased===void 0){let g=(n=Object.entries(Lu).find(([C,S])=>S===t))==null?void 0:n[0];u=`AG Grid: unable to use ${i} as the ${g} is not registered${Tt.areGridScopedModules?` for gridId: ${s}`:""}. Check if you have registered the module:
           
    import { ModuleRegistry } from '@ag-grid-community/core';
    import { ${g} } from '${t}';
    
    ModuleRegistry.registerModules([ ${g} ]);

For more info see: https://www.ag-grid.com/javascript-grid/modules/`}else u=`AG Grid: unable to use ${i} as package 'ag-grid-enterprise' has not been imported. Check that you have imported the package:
            
    import 'ag-grid-enterprise';
            
For more info see: https://www.ag-grid.com/javascript-grid/packages/`;return Ro(()=>{console.warn(u)},l),!1}static __warnEnterpriseChartDisabled(t){const s="ag-charts-enterprise"+":"+t,l=`AG Grid: the '${t}' chart type is not supported in AG Charts Community as 'ag-grid-charts-enterprise' or '@ag-grid-enterprise/charts-enterprise' hasn't been loaded. See https://www.ag-grid.com/javascript-data-grid/integrated-charts-installation/ for more details.`;Ro(()=>{console.warn(l)},s)}static __isRegistered(t,i){var s;return!!Tt.globalModulesMap[t]||!!((s=Tt.gridModulesMap[i])!=null&&s[t])}static __getRegisteredModules(t){return[...Ao(Tt.globalModulesMap),...Ao(Tt.gridModulesMap[t]||{})]}static __getGridRegisteredModules(t){var i;return Ao((i=Tt.gridModulesMap[t])!=null?i:{})||[]}static __isPackageBased(){return!Tt.moduleBased}};rl.globalModulesMap={};rl.gridModulesMap={};rl.areGridScopedModules=!1;var Rt=rl,xC=class{constructor(e,t){if(this.beanWrappers={},this.destroyed=!1,!e||!e.beanClasses)return;this.contextParams=e,this.logger=t,this.logger.log(">> creating ag-Application Context"),this.createBeans();const i=this.getBeanInstances();this.wireBeans(i),this.logger.log(">> ag-Application Context ready - component is alive")}getBeanInstances(){return Ao(this.beanWrappers).map(e=>e.beanInstance)}createBean(e,t){if(!e)throw Error("Can't wire to bean since it is null");return this.wireBeans([e],t),e}wireBeans(e,t){this.autoWireBeans(e),this.methodWireBeans(e),this.callLifeCycleMethods(e,"preConstructMethods"),ce(t)&&e.forEach(t),this.callLifeCycleMethods(e,"postConstructMethods")}createBeans(){this.contextParams.beanClasses.forEach(this.createBeanWrapper.bind(this)),bi(this.beanWrappers,(t,i)=>{let s;i.bean.__agBeanMetaData&&i.bean.__agBeanMetaData.autowireMethods&&i.bean.__agBeanMetaData.autowireMethods.agConstructor&&(s=i.bean.__agBeanMetaData.autowireMethods.agConstructor);const n=this.getBeansForParameters(s,i.bean.name),l=new(i.bean.bind.apply(i.bean,[null,...n]));i.beanInstance=l});const e=Object.keys(this.beanWrappers).join(", ");this.logger.log(`created beans: ${e}`)}createBeanWrapper(e){const t=e.__agBeanMetaData;if(!t){let s;e.prototype.constructor?s=sl(e.prototype.constructor):s=""+e,console.error(`Context item ${s} is not a bean`);return}const i={bean:e,beanInstance:null,beanName:t.beanName};this.beanWrappers[t.beanName]=i}autoWireBeans(e){e.forEach(t=>{this.forEachMetaDataInHierarchy(t,(i,s)=>{const n=i.agClassAttributes;!n||n.forEach(l=>{const u=this.lookupBeanInstance(s,l.beanName,l.optional);t[l.attributeName]=u})})})}methodWireBeans(e){e.forEach(t=>{this.forEachMetaDataInHierarchy(t,(i,s)=>{bi(i.autowireMethods,(n,l)=>{if(n==="agConstructor")return;const u=this.getBeansForParameters(l,s);t[n].apply(t,u)})})})}forEachMetaDataInHierarchy(e,t){let i=Object.getPrototypeOf(e);for(;i!=null;){const s=i.constructor;if(s.hasOwnProperty("__agBeanMetaData")){const n=s.__agBeanMetaData,l=this.getBeanName(s);t(n,l)}i=Object.getPrototypeOf(i)}}getBeanName(e){if(e.__agBeanMetaData&&e.__agBeanMetaData.beanName)return e.__agBeanMetaData.beanName;const t=e.toString();return t.substring(9,t.indexOf("("))}getBeansForParameters(e,t){const i=[];return e&&bi(e,(s,n)=>{const l=this.lookupBeanInstance(t,n);i[Number(s)]=l}),i}lookupBeanInstance(e,t,i=!1){if(this.destroyed)return this.logger.log(`AG Grid: bean reference ${t} is used after the grid is destroyed!`),null;if(t==="context")return this;if(this.contextParams.providedBeanInstances&&this.contextParams.providedBeanInstances.hasOwnProperty(t))return this.contextParams.providedBeanInstances[t];const s=this.beanWrappers[t];return s?s.beanInstance:(i||console.error(`AG Grid: unable to find bean reference ${t} while initialising ${e}`),null)}callLifeCycleMethods(e,t){e.forEach(i=>this.callLifeCycleMethodsOnBean(i,t))}callLifeCycleMethodsOnBean(e,t,i){const s={};this.forEachMetaDataInHierarchy(e,l=>{const u=l[t];u&&u.forEach(g=>{g!=i&&(s[g]=!0)})}),Object.keys(s).forEach(l=>e[l]())}getBean(e){return this.lookupBeanInstance("getBean",e,!0)}destroy(){if(this.destroyed)return;this.destroyed=!0,this.logger.log(">> Shutting down ag-Application Context");const e=this.getBeanInstances();this.destroyBeans(e),this.contextParams.providedBeanInstances=null,Rt.__unRegisterGridModules(this.contextParams.gridId),this.logger.log(">> ag-Application Context shut down - component is dead")}destroyBean(e){!e||this.destroyBeans([e])}destroyBeans(e){return e?(e.forEach(t=>{this.callLifeCycleMethodsOnBean(t,"preDestroyMethods","destroy");const i=t;typeof i.destroy=="function"&&i.destroy()}),[]):[]}isDestroyed(){return this.destroyed}getGridId(){return this.contextParams.gridId}};function Mu(e,t,i){const s=Io(e.constructor);s.preConstructMethods||(s.preConstructMethods=[]),s.preConstructMethods.push(t)}function Ce(e,t,i){const s=Io(e.constructor);s.postConstructMethods||(s.postConstructMethods=[]),s.postConstructMethods.push(t)}function Di(e,t,i){const s=Io(e.constructor);s.preDestroyMethods||(s.preDestroyMethods=[]),s.preDestroyMethods.push(t)}function Fe(e){return t=>{const i=Io(t);i.beanName=e}}function N(e){return(t,i,s)=>{Iu(t,e,!1,t,i,null)}}function mt(e){return(t,i,s)=>{Iu(t,e,!0,t,i,null)}}function Iu(e,t,i,s,n,l){if(t===null){console.error("AG Grid: Autowired name should not be null");return}if(typeof l=="number"){console.error("AG Grid: Autowired should be on an attribute");return}const u=Io(e.constructor);u.agClassAttributes||(u.agClassAttributes=[]),u.agClassAttributes.push({attributeName:n,beanName:t,optional:i})}function Qi(e){return(t,i,s)=>{const n=typeof t=="function"?t:t.constructor;let l;if(typeof s=="number"){let u;i?(l=Io(n),u=i):(l=Io(n),u="agConstructor"),l.autowireMethods||(l.autowireMethods={}),l.autowireMethods[u]||(l.autowireMethods[u]={}),l.autowireMethods[u][s]=e}}}function Io(e){return e.hasOwnProperty("__agBeanMetaData")||(e.__agBeanMetaData={}),e.__agBeanMetaData}var ps=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setBeans(e,t,i=null,s=null){if(this.frameworkOverrides=t,this.gridOptionsService=e,i){const n=e.useAsyncEvents();this.addGlobalListener(i,n)}s&&this.addGlobalListener(s,!1)}setFrameworkOverrides(e){this.frameworkOverrides=e}getListeners(e,t,i){const s=t?this.allAsyncListeners:this.allSyncListeners;let n=s.get(e);return!n&&i&&(n=new Set,s.set(e,n)),n}noRegisteredListenersExist(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0}addEventListener(e,t,i=!1){this.getListeners(e,i,!0).add(t)}removeEventListener(e,t,i=!1){const s=this.getListeners(e,i,!1);!s||(s.delete(t),s.size===0&&(i?this.allAsyncListeners:this.allSyncListeners).delete(e))}addGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).add(e)}removeGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).delete(e)}dispatchEvent(e){let t=e;this.gridOptionsService&&this.gridOptionsService.addGridCommonParams(t),this.dispatchToListeners(t,!0),this.dispatchToListeners(t,!1),this.firedEvents[t.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){var i;const s=e.type;if(t&&"event"in e){const C=e.event;C instanceof Event&&(e.eventPath=C.composedPath())}const n=(C,S)=>C.forEach(A=>{if(!S.has(A))return;const D=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>A(e)):()=>A(e);t?this.dispatchAsync(D):D()}),l=(i=this.getListeners(s,t,!1))!=null?i:new Set,u=new Set(l);u.size>0&&n(u,l),new Set(t?this.globalAsyncListeners:this.globalSyncListeners).forEach(C=>{const S=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>C(s,e)):()=>C(s,e);t?this.dispatchAsync(S):S()})}dispatchAsync(e){this.asyncFunctionsQueue.push(e),this.scheduled||(this.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)}),this.scheduled=!0)}flushAsyncQueue(){this.scheduled=!1;const e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],e.forEach(t=>t())}};E([ds(0,Qi("gridOptionsService")),ds(1,Qi("frameworkOverrides")),ds(2,Qi("globalEventListener")),ds(3,Qi("globalSyncEventListener"))],ps.prototype,"setBeans",1);ps=E([Fe("eventService")],ps);var dh=class{constructor(e){this.frameworkOverrides=e,this.wrappedListeners=new Map,this.wrappedGlobalListeners=new Map}wrap(e){let t=e;return this.frameworkOverrides.shouldWrapOutgoing&&(t=i=>{this.frameworkOverrides.wrapOutgoing(()=>e(i))},this.wrappedListeners.set(e,t)),t}wrapGlobal(e){let t=e;return this.frameworkOverrides.shouldWrapOutgoing&&(t=(i,s)=>{this.frameworkOverrides.wrapOutgoing(()=>e(i,s))},this.wrappedGlobalListeners.set(e,t)),t}unwrap(e){var t;return(t=this.wrappedListeners.get(e))!=null?t:e}unwrapGlobal(e){var t;return(t=this.wrappedGlobalListeners.get(e))!=null?t:e}},SC={resizable:!0,sortable:!0},EC=0;function Ou(){return EC++}var ei=class ku{constructor(t,i,s,n){this.instanceId=Ou(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.eventService=new ps,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=t,this.userProvidedColDef=i,this.colId=s,this.primary=n,this.setState(t)}getInstanceId(){return this.instanceId}setState(t){t.sort!==void 0?(t.sort==="asc"||t.sort==="desc")&&(this.sort=t.sort):(t.initialSort==="asc"||t.initialSort==="desc")&&(this.sort=t.initialSort);const i=t.sortIndex,s=t.initialSortIndex;i!==void 0?i!==null&&(this.sortIndex=i):s!==null&&(this.sortIndex=s);const n=t.hide,l=t.initialHide;n!==void 0?this.visible=!n:this.visible=!l,t.pinned!==void 0?this.setPinned(t.pinned):this.setPinned(t.initialPinned);const u=t.flex,g=t.initialFlex;u!==void 0?this.flex=u:g!==void 0&&(this.flex=g)}setColDef(t,i,s){this.colDef=t,this.userProvidedColDef=i,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),this.eventService.dispatchEvent(this.createColumnEvent("colDefChanged",s))}getUserProvidedColDef(){return this.userProvidedColDef}setParent(t){this.parent=t}getParent(){return this.parent}setOriginalParent(t){this.originalParent=t}getOriginalParent(){return this.originalParent}initialise(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip()}initDotNotation(){const t=this.gridOptionsService.get("suppressFieldDotNotation");this.fieldContainsDots=ce(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!t,this.tooltipFieldContainsDots=ce(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!t}initMinAndMaxWidths(){const t=this.colDef;this.minWidth=this.columnUtils.calculateColMinWidth(t),this.maxWidth=this.columnUtils.calculateColMaxWidth(t)}initTooltip(){this.tooltipEnabled=ce(this.colDef.tooltipField)||ce(this.colDef.tooltipValueGetter)||ce(this.colDef.tooltipComponent)}resetActualWidth(t){const i=this.columnUtils.calculateColInitialWidth(this.colDef);this.setActualWidth(i,t,!0)}isEmptyGroup(){return!1}isRowGroupDisplayed(t){if(Xe(this.colDef)||Xe(this.colDef.showRowGroup))return!1;const i=this.colDef.showRowGroup===!0,s=this.colDef.showRowGroup===t;return i||s}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}addEventListener(t,i){var s,n;this.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.eventService.setFrameworkOverrides(this.frameworkOverrides),this.frameworkEventListenerService=new dh(this.frameworkOverrides));const l=(n=(s=this.frameworkEventListenerService)==null?void 0:s.wrap(i))!=null?n:i;this.eventService.addEventListener(t,l)}removeEventListener(t,i){var s,n;const l=(n=(s=this.frameworkEventListenerService)==null?void 0:s.unwrap(i))!=null?n:i;this.eventService.removeEventListener(t,l)}createColumnFunctionCallbackParams(t){return this.gridOptionsService.addGridCommonParams({node:t,data:t.data,column:this,colDef:this.colDef})}isSuppressNavigable(t){if(typeof this.colDef.suppressNavigable=="boolean")return this.colDef.suppressNavigable;if(typeof this.colDef.suppressNavigable=="function"){const i=this.createColumnFunctionCallbackParams(t),s=this.colDef.suppressNavigable;return s(i)}return!1}isCellEditable(t){return t.group&&!this.gridOptionsService.get("enableGroupEdit")?!1:this.isColumnFunc(t,this.colDef.editable)}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(t){return this.isColumnFunc(t,this.colDef.rowDrag)}isDndSource(t){return this.isColumnFunc(t,this.colDef.dndSource)}isCellCheckboxSelection(t){return this.isColumnFunc(t,this.colDef.checkboxSelection)}isSuppressPaste(t){return this.isColumnFunc(t,this.colDef?this.colDef.suppressPaste:null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(t){var i;return(i=this.colDef[t])!=null?i:SC[t]}isColumnFunc(t,i){if(typeof i=="boolean")return i;if(typeof i=="function"){const s=this.createColumnFunctionCallbackParams(t);return i(s)}return!1}setMoving(t,i){this.moving=t,this.eventService.dispatchEvent(this.createColumnEvent("movingChanged",i))}createColumnEvent(t,i){return this.gridOptionsService.addGridCommonParams({type:t,column:this,columns:[this],source:i})}isMoving(){return this.moving}getSort(){return this.sort}setSort(t,i){this.sort!==t&&(this.sort=t,this.eventService.dispatchEvent(this.createColumnEvent("sortChanged",i))),this.dispatchStateUpdatedEvent("sort")}setMenuVisible(t,i){this.menuVisible!==t&&(this.menuVisible=t,this.eventService.dispatchEvent(this.createColumnEvent("menuVisibleChanged",i)))}isMenuVisible(){return this.menuVisible}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return this.sort==="asc"}isSortDescending(){return this.sort==="desc"}isSortNone(){return Xe(this.sort)}isSorting(){return ce(this.sort)}getSortIndex(){return this.sortIndex}setSortIndex(t){this.sortIndex=t,this.dispatchStateUpdatedEvent("sortIndex")}setAggFunc(t){this.aggFunc=t,this.dispatchStateUpdatedEvent("aggFunc")}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(t,i){this.oldLeft=this.left,this.left!==t&&(this.left=t,this.eventService.dispatchEvent(this.createColumnEvent("leftChanged",i)))}isFilterActive(){return this.filterActive}setFilterActive(t,i,s){this.filterActive!==t&&(this.filterActive=t,this.eventService.dispatchEvent(this.createColumnEvent("filterActiveChanged",i)));const n=this.createColumnEvent("filterChanged",i);s&&Wi(n,s),this.eventService.dispatchEvent(n)}isHovered(){return this.columnHoverService.isHovered(this)}setPinned(t){t===!0||t==="left"?this.pinned="left":t==="right"?this.pinned="right":this.pinned=null,this.dispatchStateUpdatedEvent("pinned")}setFirstRightPinned(t,i){this.firstRightPinned!==t&&(this.firstRightPinned=t,this.eventService.dispatchEvent(this.createColumnEvent("firstRightPinnedChanged",i)))}setLastLeftPinned(t,i){this.lastLeftPinned!==t&&(this.lastLeftPinned=t,this.eventService.dispatchEvent(this.createColumnEvent("lastLeftPinnedChanged",i)))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return this.pinned==="left"||this.pinned==="right"}isPinnedLeft(){return this.pinned==="left"}isPinnedRight(){return this.pinned==="right"}getPinned(){return this.pinned}setVisible(t,i){const s=t===!0;this.visible!==s&&(this.visible=s,this.eventService.dispatchEvent(this.createColumnEvent("visibleChanged",i))),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){const t=this.getColDef();return!t.suppressSpanHeaderHeight&&!t.autoHeaderHeight}getColumnGroupPaddingInfo(){let t=this.getParent();if(!t||!t.isPadding())return{numberOfParents:0,isSpanningTotal:!1};const i=t.getPaddingLevel()+1;let s=!0;for(;t;){if(!t.isPadding()){s=!1;break}t=t.getParent()}return{numberOfParents:i,isSpanningTotal:s}}getColDef(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getDefinition(){return this.colDef}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(t){const i=t!==this.autoHeaderHeight;return this.autoHeaderHeight=t,i}createBaseColDefParams(t){return this.gridOptionsService.addGridCommonParams({node:t,data:t.data,colDef:this.colDef,column:this})}getColSpan(t){if(Xe(this.colDef.colSpan))return 1;const i=this.createBaseColDefParams(t),s=this.colDef.colSpan(i);return Math.max(s,1)}getRowSpan(t){if(Xe(this.colDef.rowSpan))return 1;const i=this.createBaseColDefParams(t),s=this.colDef.rowSpan(i);return Math.max(s,1)}setActualWidth(t,i,s=!1){this.minWidth!=null&&(t=Math.max(t,this.minWidth)),this.maxWidth!=null&&(t=Math.min(t,this.maxWidth)),this.actualWidth!==t&&(this.actualWidth=t,this.flex&&i!=="flex"&&i!=="gridInitializing"&&(this.flex=null),s||this.fireColumnWidthChangedEvent(i)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(t){this.eventService.dispatchEvent(this.createColumnEvent("widthChanged",t))}isGreaterThanMax(t){return this.maxWidth!=null?t>this.maxWidth:!1}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex||0}setFlex(t){this.flex!==t&&(this.flex=t),this.dispatchStateUpdatedEvent("flex")}setMinimum(t){ce(this.minWidth)&&this.setActualWidth(this.minWidth,t)}setRowGroupActive(t,i){this.rowGroupActive!==t&&(this.rowGroupActive=t,this.eventService.dispatchEvent(this.createColumnEvent("columnRowGroupChanged",i))),this.dispatchStateUpdatedEvent("rowGroup")}isRowGroupActive(){return this.rowGroupActive}setPivotActive(t,i){this.pivotActive!==t&&(this.pivotActive=t,this.eventService.dispatchEvent(this.createColumnEvent("columnPivotChanged",i))),this.dispatchStateUpdatedEvent("pivot")}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}setValueActive(t,i){this.aggregationActive!==t&&(this.aggregationActive=t,this.eventService.dispatchEvent(this.createColumnEvent("columnValueChanged",i)))}isValueActive(){return this.aggregationActive}isAllowPivot(){return this.colDef.enablePivot===!0}isAllowValue(){return this.colDef.enableValue===!0}isAllowRowGroup(){return this.colDef.enableRowGroup===!0}getMenuTabs(t){Ue("As of v31.1, 'getMenuTabs' is deprecated. Use 'getColDef().menuTabs ?? defaultValues' instead.");let i=this.getColDef().menuTabs;return i==null&&(i=t),i}dispatchStateUpdatedEvent(t){this.eventService.dispatchEvent({type:ku.EVENT_STATE_UPDATED,key:t})}};ei.EVENT_MOVING_CHANGED="movingChanged";ei.EVENT_LEFT_CHANGED="leftChanged";ei.EVENT_WIDTH_CHANGED="widthChanged";ei.EVENT_LAST_LEFT_PINNED_CHANGED="lastLeftPinnedChanged";ei.EVENT_FIRST_RIGHT_PINNED_CHANGED="firstRightPinnedChanged";ei.EVENT_VISIBLE_CHANGED="visibleChanged";ei.EVENT_FILTER_CHANGED="filterChanged";ei.EVENT_FILTER_ACTIVE_CHANGED="filterActiveChanged";ei.EVENT_SORT_CHANGED="sortChanged";ei.EVENT_COL_DEF_CHANGED="colDefChanged";ei.EVENT_MENU_VISIBLE_CHANGED="menuVisibleChanged";ei.EVENT_ROW_GROUP_CHANGED="columnRowGroupChanged";ei.EVENT_PIVOT_CHANGED="columnPivotChanged";ei.EVENT_VALUE_CHANGED="columnValueChanged";ei.EVENT_STATE_UPDATED="columnStateUpdated";E([N("gridOptionsService")],ei.prototype,"gridOptionsService",2);E([N("columnUtils")],ei.prototype,"columnUtils",2);E([N("columnHoverService")],ei.prototype,"columnHoverService",2);E([N("frameworkOverrides")],ei.prototype,"frameworkOverrides",2);E([Ce],ei.prototype,"initialise",1);var Lt=ei,nl=class an{constructor(t,i,s,n){this.localEventService=new ps,this.expandable=!1,this.instanceId=Ou(),this.expandableListenerRemoveCallback=null,this.colGroupDef=t,this.groupId=i,this.expanded=!!t&&!!t.openByDefault,this.padding=s,this.level=n}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0)}reset(t,i){this.colGroupDef=t,this.level=i,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}setOriginalParent(t){this.originalParent=t}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return this.children?this.children.some(t=>t.isVisible()):!1}isPadding(){return this.padding}setExpanded(t){this.expanded=t===void 0?!1:t;const i={type:an.EVENT_EXPANDED_CHANGED};this.localEventService.dispatchEvent(i)}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(t){this.children=t}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){const t=[];return this.addLeafColumns(t),t}addLeafColumns(t){!this.children||this.children.forEach(i=>{i instanceof Lt?t.push(i):i instanceof an&&i.addLeafColumns(t)})}getColumnGroupShow(){const t=this.colGroupDef;if(!!t)return t.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();const t=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach(i=>i.addEventListener("visibleChanged",t)),this.expandableListenerRemoveCallback=()=>{this.getLeafColumns().forEach(i=>i.removeEventListener("visibleChanged",t)),this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let t=!1,i=!1,s=!1;const n=this.findChildrenRemovingPadding();for(let u=0,g=n.length;u<g;u++){const C=n[u];if(!C.isVisible())continue;const S=C.getColumnGroupShow();S==="open"?(t=!0,s=!0):S==="closed"?(i=!0,s=!0):(t=!0,i=!0)}const l=t&&i&&s;if(this.expandable!==l){this.expandable=l;const u={type:an.EVENT_EXPANDABLE_CHANGED};this.localEventService.dispatchEvent(u)}}findChildrenRemovingPadding(){const t=[],i=s=>{s.forEach(n=>{n instanceof an&&n.isPadding()?i(n.children):t.push(n)})};return i(this.children),t}onColumnVisibilityChanged(){this.setExpandable()}addEventListener(t,i){this.localEventService.addEventListener(t,i)}removeEventListener(t,i){this.localEventService.removeEventListener(t,i)}};nl.EVENT_EXPANDED_CHANGED="expandedChanged";nl.EVENT_EXPANDABLE_CHANGED="expandableChanged";E([Di],nl.prototype,"destroy",1);var Qt=nl,AC={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}},Nu={};fi(Nu,{addSafePassiveEventListener:()=>Xu,createEventPath:()=>Uu,getCtrlForEventTarget:()=>_a,getEventPath:()=>Yu,isElementInEventPath:()=>Va,isEventSupported:()=>ch,isStopPropagationForAgGrid:()=>us,stopPropagationForAgGrid:()=>gs});var Gu={};fi(Gu,{areEqual:()=>bs,existsAndNotEmpty:()=>_u,flatten:()=>Wu,forEachReverse:()=>PC,includes:()=>zi,insertArrayIntoArray:()=>Sd,insertIntoArray:()=>yn,last:()=>yt,moveInArray:()=>Ed,pushAll:()=>Ad,removeAllFromArray:()=>Bu,removeAllFromUnorderedArray:()=>Hu,removeFromArray:()=>Oi,removeFromUnorderedArray:()=>hh,removeRepeatsFromArray:()=>DC,shallowCompare:()=>RC,sortNumerically:()=>Vu,toStrings:()=>TC});function _u(e){return e!=null&&e.length>0}function yt(e){if(!(!e||!e.length))return e[e.length-1]}function bs(e,t,i){return e==null&&t==null?!0:e!=null&&t!=null&&e.length===t.length&&e.every((s,n)=>i?i(s,t[n]):t[n]===s)}function RC(e,t){return bs(e,t)}function Vu(e){return e.sort((t,i)=>t-i)}function DC(e,t){if(!!e)for(let i=e.length-2;i>=0;i--){const s=e[i]===t,n=e[i+1]===t;s&&n&&e.splice(i+1,1)}}function hh(e,t){const i=e.indexOf(t);i>=0&&(e[i]=e[e.length-1],e.pop())}function Oi(e,t){const i=e.indexOf(t);i>=0&&e.splice(i,1)}function Hu(e,t){for(let i=0;i<t.length;i++)hh(e,t[i])}function Bu(e,t){for(let i=0;i<t.length;i++)Oi(e,t[i])}function yn(e,t,i){e.splice(i,0,t)}function Sd(e,t,i){if(!(e==null||t==null))for(let s=t.length-1;s>=0;s--){const n=t[s];yn(e,n,i)}}function Ed(e,t,i){Bu(e,t),t.slice().reverse().forEach(s=>yn(e,s,i))}function zi(e,t){return e.indexOf(t)>-1}function Wu(e){return[].concat.apply([],e)}function Ad(e,t){t==null||e==null||t.forEach(i=>e.push(i))}function TC(e){return e.map(Cn)}function PC(e,t){if(e!=null)for(let i=e.length-1;i>=0;i--)t(e[i],i)}var zu="__ag_Grid_Stop_Propagation",FC=["touchstart","touchend","touchmove","touchcancel","scroll"],$l={};function gs(e){e[zu]=!0}function us(e){return e[zu]===!0}var ch=(()=>{const e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return i=>{if(typeof $l[i]=="boolean")return $l[i];const s=document.createElement(e[i]||"div");return i="on"+i,$l[i]=i in s}})();function _a(e,t,i){let s=t;for(;s;){const n=e.getDomData(s,i);if(n)return n;s=s.parentElement}return null}function Va(e,t){return!t||!e?!1:Yu(t).indexOf(e)>=0}function Uu(e){const t=[];let i=e.target;for(;i;)t.push(i),i=i.parentElement;return t}function Yu(e){const t=e;return t.path?t.path:t.composedPath?t.composedPath():Uu(t)}function Xu(e,t,i,s){const l=zi(FC,i)?{passive:!0}:void 0;e&&e.addEventListener&&e.addEventListener(t,i,s,l)}var Ys=class $u{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.lastChangeSetIdLookup={},this.propertyListenerId=0,this.isAlive=()=>!this.destroyed}getFrameworkOverrides(){return this.frameworkOverrides}getContext(){return this.context}destroy(){this.destroyFunctions.forEach(t=>t()),this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchEvent({type:$u.EVENT_DESTROYED})}addEventListener(t,i){this.localEventService||(this.localEventService=new ps),this.localEventService.addEventListener(t,i)}removeEventListener(t,i){this.localEventService&&this.localEventService.removeEventListener(t,i)}dispatchEvent(t){this.localEventService&&this.localEventService.dispatchEvent(t)}addManagedListener(t,i,s){if(this.destroyed)return;t instanceof HTMLElement?Xu(this.getFrameworkOverrides(),t,i,s):t.addEventListener(i,s);const n=()=>(t.removeEventListener(i,s),this.destroyFunctions=this.destroyFunctions.filter(l=>l!==n),null);return this.destroyFunctions.push(n),n}setupGridOptionListener(t,i){this.gridOptionsService.addEventListener(t,i);const s=()=>(this.gridOptionsService.removeEventListener(t,i),this.destroyFunctions=this.destroyFunctions.filter(n=>n!==s),null);return this.destroyFunctions.push(s),s}addManagedPropertyListener(t,i){return this.destroyed?()=>null:this.setupGridOptionListener(t,i)}addManagedPropertyListeners(t,i){if(this.destroyed)return;const s=t.join("-")+this.propertyListenerId++,n=l=>{if(l.changeSet){if(l.changeSet&&l.changeSet.id===this.lastChangeSetIdLookup[s])return;this.lastChangeSetIdLookup[s]=l.changeSet.id}const u={type:"gridPropertyChanged",changeSet:l.changeSet,source:l.source};i(u)};t.forEach(l=>this.setupGridOptionListener(l,n))}addDestroyFunc(t){this.isAlive()?this.destroyFunctions.push(t):t()}createManagedBean(t,i){const s=this.createBean(t,i);return this.addDestroyFunc(this.destroyBean.bind(this,t,i)),s}createBean(t,i,s){return(i||this.getContext()).createBean(t,s)}destroyBean(t,i){return(i||this.getContext()).destroyBean(t)}destroyBeans(t,i){return t&&t.forEach(s=>this.destroyBean(s,i)),[]}};Ys.EVENT_DESTROYED="destroyed";E([N("frameworkOverrides")],Ys.prototype,"frameworkOverrides",2);E([N("context")],Ys.prototype,"context",2);E([N("eventService")],Ys.prototype,"eventService",2);E([N("gridOptionsService")],Ys.prototype,"gridOptionsService",2);E([N("localeService")],Ys.prototype,"localeService",2);E([N("environment")],Ys.prototype,"environment",2);E([Di],Ys.prototype,"destroy",1);var ge=Ys,br=class extends ge{setBeans(e){this.logger=e.create("ColumnFactory")}createColumnTree(e,t,i,s){const n=new yC,{existingCols:l,existingGroups:u,existingColKeys:g}=this.extractExistingTreeData(i);n.addExistingKeys(g);const C=this.recursivelyCreateColumns(e,0,t,l,n,u,s),S=this.findMaxDept(C,0);this.logger.log("Number of levels for grouped columns is "+S);const A=this.balanceColumnTree(C,0,S,n),D=(M,W)=>{M instanceof Qt&&M.setupExpandable(),M.setOriginalParent(W)};return this.columnUtils.depthFirstOriginalTreeSearch(null,A,D),{columnTree:A,treeDept:S}}extractExistingTreeData(e){const t=[],i=[],s=[];return e&&this.columnUtils.depthFirstOriginalTreeSearch(null,e,n=>{if(n instanceof Qt){const l=n;i.push(l)}else{const l=n;s.push(l.getId()),t.push(l)}}),{existingCols:t,existingGroups:i,existingColKeys:s}}createForAutoGroups(e,t){return e.map(i=>this.createAutoGroupTreeItem(t,i))}createAutoGroupTreeItem(e,t){const i=this.findDepth(e);let s=t;for(let n=i-1;n>=0;n--){const l=new Qt(null,`FAKE_PATH_${t.getId()}}_${n}`,!0,n);this.createBean(l),l.setChildren([s]),s.setOriginalParent(l),s=l}return i===0&&t.setOriginalParent(null),s}findDepth(e){let t=0,i=e;for(;i&&i[0]&&i[0]instanceof Qt;)t++,i=i[0].getChildren();return t}balanceColumnTree(e,t,i,s){const n=[];for(let l=0;l<e.length;l++){const u=e[l];if(u instanceof Qt){const g=u,C=this.balanceColumnTree(g.getChildren(),t+1,i,s);g.setChildren(C),n.push(g)}else{let g,C;for(let S=i-1;S>=t;S--){const A=s.getUniqueKey(null,null),D=this.createMergedColGroupDef(null),M=new Qt(D,A,!0,t);this.createBean(M),C&&C.setChildren([M]),C=M,g||(g=C)}if(g&&C)if(n.push(g),e.some(A=>A instanceof Qt)){C.setChildren([u]);continue}else{C.setChildren(e);break}n.push(u)}}return n}findMaxDept(e,t){let i=t;for(let s=0;s<e.length;s++){const n=e[s];if(n instanceof Qt){const l=n,u=this.findMaxDept(l.getChildren(),t+1);i<u&&(i=u)}}return i}recursivelyCreateColumns(e,t,i,s,n,l,u){if(!e)return[];const g=new Array(e.length);for(let C=0;C<g.length;C++){const S=e[C];this.isColumnGroup(S)?g[C]=this.createColumnGroup(i,S,t,s,n,l,u):g[C]=this.createColumn(i,S,s,n,u)}return g}createColumnGroup(e,t,i,s,n,l,u){const g=this.createMergedColGroupDef(t),C=n.getUniqueKey(g.groupId||null,null),S=new Qt(g,C,!1,i);this.createBean(S);const A=this.findExistingGroup(t,l);A&&l.splice(A.idx,1);let D=A?.group;D&&S.setExpanded(D.isExpanded());const M=this.recursivelyCreateColumns(g.children,i+1,e,s,n,l,u);return S.setChildren(M),S}createMergedColGroupDef(e){const t={};return Object.assign(t,this.gridOptionsService.get("defaultColGroupDef")),Object.assign(t,e),t}createColumn(e,t,i,s,n){const l=this.findExistingColumn(t,i);l&&i?.splice(l.idx,1);let u=l?.column;if(u){const g=this.addColumnDefaultAndTypes(t,u.getColId());u.setColDef(g,t,n),this.applyColumnState(u,g,n)}else{const g=s.getUniqueKey(t.colId,t.field),C=this.addColumnDefaultAndTypes(t,g);u=new Lt(C,t,g,e),this.context.createBean(u)}return this.dataTypeService.addColumnListeners(u),u}applyColumnState(e,t,i){const s=ro(t.flex);if(s!==void 0&&e.setFlex(s),e.getFlex()<=0){const g=ro(t.width);if(g!=null)e.setActualWidth(g,i);else{const C=e.getActualWidth();e.setActualWidth(C,i)}}t.sort!==void 0&&(t.sort=="asc"||t.sort=="desc"?e.setSort(t.sort,i):e.setSort(void 0,i));const l=ro(t.sortIndex);l!==void 0&&e.setSortIndex(l);const u=ka(t.hide);u!==void 0&&e.setVisible(!u,i),t.pinned!==void 0&&e.setPinned(t.pinned)}findExistingColumn(e,t){if(!!t)for(let i=0;i<t.length;i++){const s=t[i].getUserProvidedColDef();if(!s)continue;if(e.colId!=null){if(t[i].getId()===e.colId)return{idx:i,column:t[i]};continue}if(e.field!=null){if(s.field===e.field)return{idx:i,column:t[i]};continue}if(s===e)return{idx:i,column:t[i]}}}findExistingGroup(e,t){if(e.groupId!=null)for(let s=0;s<t.length;s++){const n=t[s];if(!!n.getColGroupDef()&&n.getId()===e.groupId)return{idx:s,group:n}}}addColumnDefaultAndTypes(e,t){const i={},s=this.gridOptionsService.get("defaultColDef");Wi(i,s,!1,!0);const n=this.dataTypeService.updateColDefAndGetColumnType(i,e,t);n&&this.assignColumnTypes(n,i),Wi(i,e,!1,!0);const l=this.gridOptionsService.get("autoGroupColumnDef"),u=this.gridOptionsService.isColumnsSortingCoupledToGroup();return e.rowGroup&&l&&u&&Wi(i,{sort:l.sort,initialSort:l.initialSort},!1,!0),this.dataTypeService.validateColDef(i),i}assignColumnTypes(e,t){if(!e.length)return;const i=Object.assign({},AC),s=this.gridOptionsService.get("columnTypes")||{};bi(s,(n,l)=>{n in i?console.warn(`AG Grid: the column type '${n}' is a default column type and cannot be overridden.`):(l.type&&Ue("Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type."),i[n]=l)}),e.forEach(n=>{const l=i[n.trim()];l?Wi(t,l,!1,!0):console.warn("AG Grid: colDef.type '"+n+"' does not correspond to defined gridOptions.columnTypes")})}isColumnGroup(e){return e.children!==void 0}};E([N("columnUtils")],br.prototype,"columnUtils",2);E([N("dataTypeService")],br.prototype,"dataTypeService",2);E([ds(0,Qi("loggerFactory"))],br.prototype,"setBeans",1);br=E([Fe("columnFactory")],br);var al=class vs{constructor(t,i,s,n){this.displayedChildren=[],this.localEventService=new ps,this.groupId=i,this.partId=s,this.providedColumnGroup=t,this.pinned=n}static createUniqueId(t,i){return t+"_"+i}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}setParent(t){this.parent=t}getUniqueId(){return vs.createUniqueId(this.groupId,this.partId)}isEmptyGroup(){return this.displayedChildren.length===0}isMoving(){const t=this.getProvidedColumnGroup().getLeafColumns();return!t||t.length===0?!1:t.every(i=>i.isMoving())}checkLeft(){if(this.displayedChildren.forEach(t=>{t instanceof vs&&t.checkLeft()}),this.displayedChildren.length>0)if(this.gridOptionsService.get("enableRtl")){const i=yt(this.displayedChildren).getLeft();this.setLeft(i)}else{const t=this.displayedChildren[0].getLeft();this.setLeft(t)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(t){this.oldLeft=this.left,this.left!==t&&(this.left=t,this.localEventService.dispatchEvent(this.createAgEvent(vs.EVENT_LEFT_CHANGED)))}getPinned(){return this.pinned}createAgEvent(t){return{type:t}}addEventListener(t,i){this.localEventService.addEventListener(t,i)}removeEventListener(t,i){this.localEventService.removeEventListener(t,i)}getGroupId(){return this.groupId}getPartId(){return this.partId}isChildInThisGroupDeepSearch(t){let i=!1;return this.children.forEach(s=>{t===s&&(i=!0),s instanceof vs&&s.isChildInThisGroupDeepSearch(t)&&(i=!0)}),i}getActualWidth(){let t=0;return this.displayedChildren&&this.displayedChildren.forEach(i=>{t+=i.getActualWidth()}),t}isResizable(){if(!this.displayedChildren)return!1;let t=!1;return this.displayedChildren.forEach(i=>{i.isResizable()&&(t=!0)}),t}getMinWidth(){let t=0;return this.displayedChildren.forEach(i=>{t+=i.getMinWidth()||0}),t}addChild(t){this.children||(this.children=[]),this.children.push(t)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){const t=[];return this.addLeafColumns(t),t}getDisplayedLeafColumns(){const t=[];return this.addDisplayedLeafColumns(t),t}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(t){this.providedColumnGroup.setExpanded(t)}addDisplayedLeafColumns(t){this.displayedChildren.forEach(i=>{i instanceof Lt?t.push(i):i instanceof vs&&i.addDisplayedLeafColumns(t)})}addLeafColumns(t){this.children.forEach(i=>{i instanceof Lt?t.push(i):i instanceof vs&&i.addLeafColumns(t)})}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){const t=this.getParent();return!this.isPadding()||!t||!t.isPadding()?0:1+t.getPaddingLevel()}calculateDisplayedColumns(){this.displayedChildren=[];let t=this;for(;t!=null&&t.isPadding();)t=t.getParent();if(!(t?t.providedColumnGroup.isExpandable():!1)){this.displayedChildren=this.children,this.localEventService.dispatchEvent(this.createAgEvent(vs.EVENT_DISPLAYED_CHILDREN_CHANGED));return}this.children.forEach(s=>{if(s instanceof vs&&(!s.displayedChildren||!s.displayedChildren.length))return;switch(s.getColumnGroupShow()){case"open":t.providedColumnGroup.isExpanded()&&this.displayedChildren.push(s);break;case"closed":t.providedColumnGroup.isExpanded()||this.displayedChildren.push(s);break;default:this.displayedChildren.push(s);break}}),this.localEventService.dispatchEvent(this.createAgEvent(vs.EVENT_DISPLAYED_CHILDREN_CHANGED))}};al.EVENT_LEFT_CHANGED="leftChanged";al.EVENT_DISPLAYED_CHILDREN_CHANGED="displayedChildrenChanged";E([N("gridOptionsService")],al.prototype,"gridOptionsService",2);var ri=al,L=class{};L.EVENT_COLUMN_EVERYTHING_CHANGED="columnEverythingChanged";L.EVENT_NEW_COLUMNS_LOADED="newColumnsLoaded";L.EVENT_COLUMN_PIVOT_MODE_CHANGED="columnPivotModeChanged";L.EVENT_PIVOT_MAX_COLUMNS_EXCEEDED="pivotMaxColumnsExceeded";L.EVENT_COLUMN_ROW_GROUP_CHANGED="columnRowGroupChanged";L.EVENT_EXPAND_COLLAPSE_ALL="expandOrCollapseAll";L.EVENT_COLUMN_PIVOT_CHANGED="columnPivotChanged";L.EVENT_GRID_COLUMNS_CHANGED="gridColumnsChanged";L.EVENT_COLUMN_VALUE_CHANGED="columnValueChanged";L.EVENT_COLUMN_MOVED="columnMoved";L.EVENT_COLUMN_VISIBLE="columnVisible";L.EVENT_COLUMN_PINNED="columnPinned";L.EVENT_COLUMN_GROUP_OPENED="columnGroupOpened";L.EVENT_COLUMN_RESIZED="columnResized";L.EVENT_DISPLAYED_COLUMNS_CHANGED="displayedColumnsChanged";L.EVENT_SUPPRESS_COLUMN_MOVE_CHANGED="suppressMovableColumns";L.EVENT_SUPPRESS_MENU_HIDE_CHANGED="suppressMenuHide";L.EVENT_SUPPRESS_FIELD_DOT_NOTATION="suppressFieldDotNotation";L.EVENT_VIRTUAL_COLUMNS_CHANGED="virtualColumnsChanged";L.EVENT_COLUMN_HEADER_MOUSE_OVER="columnHeaderMouseOver";L.EVENT_COLUMN_HEADER_MOUSE_LEAVE="columnHeaderMouseLeave";L.EVENT_COLUMN_HEADER_CLICKED="columnHeaderClicked";L.EVENT_COLUMN_HEADER_CONTEXT_MENU="columnHeaderContextMenu";L.EVENT_ASYNC_TRANSACTIONS_FLUSHED="asyncTransactionsFlushed";L.EVENT_ROW_GROUP_OPENED="rowGroupOpened";L.EVENT_ROW_DATA_UPDATED="rowDataUpdated";L.EVENT_PINNED_ROW_DATA_CHANGED="pinnedRowDataChanged";L.EVENT_RANGE_SELECTION_CHANGED="rangeSelectionChanged";L.EVENT_CHART_CREATED="chartCreated";L.EVENT_CHART_RANGE_SELECTION_CHANGED="chartRangeSelectionChanged";L.EVENT_CHART_OPTIONS_CHANGED="chartOptionsChanged";L.EVENT_CHART_DESTROYED="chartDestroyed";L.EVENT_TOOL_PANEL_VISIBLE_CHANGED="toolPanelVisibleChanged";L.EVENT_TOOL_PANEL_SIZE_CHANGED="toolPanelSizeChanged";L.EVENT_COLUMN_PANEL_ITEM_DRAG_START="columnPanelItemDragStart";L.EVENT_COLUMN_PANEL_ITEM_DRAG_END="columnPanelItemDragEnd";L.EVENT_MODEL_UPDATED="modelUpdated";L.EVENT_CUT_START="cutStart";L.EVENT_CUT_END="cutEnd";L.EVENT_PASTE_START="pasteStart";L.EVENT_PASTE_END="pasteEnd";L.EVENT_FILL_START="fillStart";L.EVENT_FILL_END="fillEnd";L.EVENT_RANGE_DELETE_START="rangeDeleteStart";L.EVENT_RANGE_DELETE_END="rangeDeleteEnd";L.EVENT_UNDO_STARTED="undoStarted";L.EVENT_UNDO_ENDED="undoEnded";L.EVENT_REDO_STARTED="redoStarted";L.EVENT_REDO_ENDED="redoEnded";L.EVENT_KEY_SHORTCUT_CHANGED_CELL_START="keyShortcutChangedCellStart";L.EVENT_KEY_SHORTCUT_CHANGED_CELL_END="keyShortcutChangedCellEnd";L.EVENT_CELL_CLICKED="cellClicked";L.EVENT_CELL_DOUBLE_CLICKED="cellDoubleClicked";L.EVENT_CELL_MOUSE_DOWN="cellMouseDown";L.EVENT_CELL_CONTEXT_MENU="cellContextMenu";L.EVENT_CELL_VALUE_CHANGED="cellValueChanged";L.EVENT_CELL_EDIT_REQUEST="cellEditRequest";L.EVENT_ROW_VALUE_CHANGED="rowValueChanged";L.EVENT_CELL_FOCUSED="cellFocused";L.EVENT_CELL_FOCUS_CLEARED="cellFocusCleared";L.EVENT_FULL_WIDTH_ROW_FOCUSED="fullWidthRowFocused";L.EVENT_ROW_SELECTED="rowSelected";L.EVENT_SELECTION_CHANGED="selectionChanged";L.EVENT_TOOLTIP_SHOW="tooltipShow";L.EVENT_TOOLTIP_HIDE="tooltipHide";L.EVENT_CELL_KEY_DOWN="cellKeyDown";L.EVENT_CELL_MOUSE_OVER="cellMouseOver";L.EVENT_CELL_MOUSE_OUT="cellMouseOut";L.EVENT_FILTER_CHANGED="filterChanged";L.EVENT_FILTER_MODIFIED="filterModified";L.EVENT_FILTER_OPENED="filterOpened";L.EVENT_ADVANCED_FILTER_BUILDER_VISIBLE_CHANGED="advancedFilterBuilderVisibleChanged";L.EVENT_SORT_CHANGED="sortChanged";L.EVENT_VIRTUAL_ROW_REMOVED="virtualRowRemoved";L.EVENT_ROW_CLICKED="rowClicked";L.EVENT_ROW_DOUBLE_CLICKED="rowDoubleClicked";L.EVENT_GRID_READY="gridReady";L.EVENT_GRID_PRE_DESTROYED="gridPreDestroyed";L.EVENT_GRID_SIZE_CHANGED="gridSizeChanged";L.EVENT_VIEWPORT_CHANGED="viewportChanged";L.EVENT_SCROLLBAR_WIDTH_CHANGED="scrollbarWidthChanged";L.EVENT_FIRST_DATA_RENDERED="firstDataRendered";L.EVENT_DRAG_STARTED="dragStarted";L.EVENT_DRAG_STOPPED="dragStopped";L.EVENT_CHECKBOX_CHANGED="checkboxChanged";L.EVENT_ROW_EDITING_STARTED="rowEditingStarted";L.EVENT_ROW_EDITING_STOPPED="rowEditingStopped";L.EVENT_CELL_EDITING_STARTED="cellEditingStarted";L.EVENT_CELL_EDITING_STOPPED="cellEditingStopped";L.EVENT_BODY_SCROLL="bodyScroll";L.EVENT_BODY_SCROLL_END="bodyScrollEnd";L.EVENT_HEIGHT_SCALE_CHANGED="heightScaleChanged";L.EVENT_PAGINATION_CHANGED="paginationChanged";L.EVENT_COMPONENT_STATE_CHANGED="componentStateChanged";L.EVENT_STORE_REFRESHED="storeRefreshed";L.EVENT_STATE_UPDATED="stateUpdated";L.EVENT_COLUMN_MENU_VISIBLE_CHANGED="columnMenuVisibleChanged";L.EVENT_BODY_HEIGHT_CHANGED="bodyHeightChanged";L.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED="columnContainerWidthChanged";L.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED="displayedColumnsWidthChanged";L.EVENT_SCROLL_VISIBILITY_CHANGED="scrollVisibilityChanged";L.EVENT_COLUMN_HOVER_CHANGED="columnHoverChanged";L.EVENT_FLASH_CELLS="flashCells";L.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED="paginationPixelOffsetChanged";L.EVENT_DISPLAYED_ROWS_CHANGED="displayedRowsChanged";L.EVENT_LEFT_PINNED_WIDTH_CHANGED="leftPinnedWidthChanged";L.EVENT_RIGHT_PINNED_WIDTH_CHANGED="rightPinnedWidthChanged";L.EVENT_ROW_CONTAINER_HEIGHT_CHANGED="rowContainerHeightChanged";L.EVENT_HEADER_HEIGHT_CHANGED="headerHeightChanged";L.EVENT_COLUMN_HEADER_HEIGHT_CHANGED="columnHeaderHeightChanged";L.EVENT_ROW_DRAG_ENTER="rowDragEnter";L.EVENT_ROW_DRAG_MOVE="rowDragMove";L.EVENT_ROW_DRAG_LEAVE="rowDragLeave";L.EVENT_ROW_DRAG_END="rowDragEnd";L.EVENT_GRID_STYLES_CHANGED="gridStylesChanged";L.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST="columnRowGroupChangeRequest";L.EVENT_COLUMN_PIVOT_CHANGE_REQUEST="columnPivotChangeRequest";L.EVENT_COLUMN_VALUE_CHANGE_REQUEST="columnValueChangeRequest";L.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST="columnAggFuncChangeRequest";L.EVENT_STORE_UPDATED="storeUpdated";L.EVENT_FILTER_DESTROYED="filterDestroyed";L.EVENT_ROW_DATA_UPDATE_STARTED="rowDataUpdateStarted";L.EVENT_ROW_COUNT_READY="rowCountReady";L.EVENT_ADVANCED_FILTER_ENABLED_CHANGED="advancedFilterEnabledChanged";L.EVENT_DATA_TYPES_INFERRED="dataTypesInferred";L.EVENT_FIELD_VALUE_CHANGED="fieldValueChanged";L.EVENT_FIELD_PICKER_VALUE_SELECTED="fieldPickerValueSelected";L.EVENT_SIDE_BAR_UPDATED="sideBarUpdated";var Ea=new Set([L.EVENT_GRID_PRE_DESTROYED]),ju=class{constructor(){this.existingIds={}}getInstanceIdForKey(e){const t=this.existingIds[e];let i;return typeof t!="number"?i=0:i=t+1,this.existingIds[e]=i,i}},wr="ag-Grid-AutoColumn",bn=class extends ge{createAutoGroupColumns(e){const t=[],i=this.gridOptionsService.get("treeData");let s=this.gridOptionsService.isGroupMultiAutoColumn();return i&&s&&(console.warn('AG Grid: you cannot mix groupDisplayType = "multipleColumns" with treeData, only one column can be used to display groups when doing tree data'),s=!1),s?e.forEach((n,l)=>{t.push(this.createOneAutoGroupColumn(n,l))}):t.push(this.createOneAutoGroupColumn()),t}updateAutoGroupColumns(e,t){e.forEach((i,s)=>this.updateOneAutoGroupColumn(i,s,t))}createOneAutoGroupColumn(e,t){let i;e?i=`${wr}-${e.getId()}`:i=wr;const s=this.createAutoGroupColDef(i,e,t);s.colId=i;const n=new Lt(s,null,i,!0);return this.context.createBean(n),n}updateOneAutoGroupColumn(e,t,i){const s=e.getColDef(),n=typeof s.showRowGroup=="string"?s.showRowGroup:void 0,l=n!=null?this.columnModel.getPrimaryColumn(n):void 0,u=this.createAutoGroupColDef(e.getId(),l??void 0,t);e.setColDef(u,null,i),this.columnFactory.applyColumnState(e,u,i)}createAutoGroupColDef(e,t,i){let s=this.createBaseColDef(t);const n=this.gridOptionsService.get("autoGroupColumnDef");Wi(s,n),s=this.columnFactory.addColumnDefaultAndTypes(s,e),this.gridOptionsService.get("treeData")||Xe(s.field)&&Xe(s.valueGetter)&&Xe(s.filterValueGetter)&&s.filter!=="agGroupColumnFilter"&&(s.filter=!1),i&&i>0&&(s.headerCheckboxSelection=!1);const l=this.gridOptionsService.isColumnsSortingCoupledToGroup(),u=s.valueGetter||s.field!=null;return l&&!u&&(s.sortIndex=void 0,s.initialSort=void 0),s}createBaseColDef(e){const t=this.gridOptionsService.get("autoGroupColumnDef"),s={headerName:this.localeService.getLocaleTextFunc()("group","Group")};if(t&&(t.cellRenderer||t.cellRendererSelector)||(s.cellRenderer="agGroupCellRenderer"),e){const l=e.getColDef();Object.assign(s,{headerName:this.columnModel.getDisplayNameForColumn(e,"header"),headerValueGetter:l.headerValueGetter}),l.cellRenderer&&Object.assign(s,{cellRendererParams:{innerRenderer:l.cellRenderer,innerRendererParams:l.cellRendererParams}}),s.showRowGroup=e.getColId()}else s.showRowGroup=!0;return s}};E([N("columnModel")],bn.prototype,"columnModel",2);E([N("columnFactory")],bn.prototype,"columnFactory",2);bn=E([Fe("autoGroupColService")],bn);var Ku={};fi(Ku,{camelCaseToHumanText:()=>qu,camelCaseToHyphenated:()=>Qu,capitalise:()=>OC,escapeString:()=>ai,utf8_encode:()=>IC});var LC=/[&<>"']/g,MC={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function IC(e){const t=String.fromCharCode;function i(D){const M=[];if(!D)return[];const W=D.length;let z=0,U,X;for(;z<W;)U=D.charCodeAt(z++),U>=55296&&U<=56319&&z<W?(X=D.charCodeAt(z++),(X&64512)==56320?M.push(((U&1023)<<10)+(X&1023)+65536):(M.push(U),z--)):M.push(U);return M}function s(D){if(D>=55296&&D<=57343)throw Error("Lone surrogate U+"+D.toString(16).toUpperCase()+" is not a scalar value")}function n(D,M){return t(D>>M&63|128)}function l(D){if(D>=0&&D<=31&&D!==10)return`_x${D.toString(16).toUpperCase().padStart(4,"0")}_`;if((D&4294967168)==0)return t(D);let M="";return(D&4294965248)==0?M=t(D>>6&31|192):(D&4294901760)==0?(s(D),M=t(D>>12&15|224),M+=n(D,6)):(D&4292870144)==0&&(M=t(D>>18&7|240),M+=n(D,12),M+=n(D,6)),M+=t(D&63|128),M}const u=i(e),g=u.length;let C=-1,S,A="";for(;++C<g;)S=u[C],A+=l(S);return A}function OC(e){return e[0].toUpperCase()+e.substring(1).toLowerCase()}function ai(e,t){if(e==null)return null;const i=e.toString().toString();return t?i:i.replace(LC,s=>MC[s])}function qu(e){if(!e||e==null)return null;const t=/([a-z])([A-Z])/g,i=/([A-Z]+)([A-Z])([a-z])/g;return e.replace(t,"$1 $2").replace(i,"$1 $2$3").replace(/\./g," ").split(" ").map(n=>n.substring(0,1).toUpperCase()+(n.length>1?n.substring(1,n.length):"")).join(" ")}function Qu(e){return e.replace(/[A-Z]/g,t=>`-${t.toLocaleLowerCase()}`)}var Zu={};fi(Zu,{convertToMap:()=>io,keys:()=>NC,mapById:()=>kC});function io(e){const t=new Map;return e.forEach(i=>t.set(i[0],i[1])),t}function kC(e,t){const i=new Map;return e.forEach(s=>i.set(t(s),s)),i}function NC(e){const t=[];return e.forEach((i,s)=>t.push(s)),t}var di=class extends ge{constructor(){super(...arguments),this.primaryHeaderRowCount=0,this.secondaryHeaderRowCount=0,this.gridHeaderRowCount=0,this.displayedColumnsLeft=[],this.displayedColumnsRight=[],this.displayedColumnsCenter=[],this.displayedColumns=[],this.displayedColumnsAndGroupsMap={},this.viewportColumns=[],this.viewportColumnsHash="",this.headerViewportColumns=[],this.viewportColumnsCenter=[],this.headerViewportColumnsCenter=[],this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={},this.autoHeightActiveAtLeastOnce=!1,this.rowGroupColumns=[],this.valueColumns=[],this.pivotColumns=[],this.ready=!1,this.changeEventsDispatching=!1,this.autoGroupsNeedBuilding=!1,this.forceRecreateAutoGroups=!1,this.pivotMode=!1,this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.bodyWidthDirty=!0,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}init(){this.suppressColumnVirtualisation=this.gridOptionsService.get("suppressColumnVirtualisation");const e=this.gridOptionsService.get("pivotMode");this.isPivotSettingAllowed(e)&&(this.pivotMode=e),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents"],t=>this.buildAutoGroupColumns(ur(t.source))),this.addManagedPropertyListener("autoGroupColumnDef",t=>this.onAutoGroupColumnDefChanged(ur(t.source))),this.addManagedPropertyListeners(["defaultColDef","columnTypes","suppressFieldDotNotation"],t=>this.onSharedColDefChanged(ur(t.source))),this.addManagedPropertyListener("pivotMode",t=>this.setPivotMode(this.gridOptionsService.get("pivotMode"),ur(t.source))),this.addManagedListener(this.eventService,L.EVENT_FIRST_DATA_RENDERED,()=>this.onFirstDataRendered())}buildAutoGroupColumns(e){!this.columnDefs||(this.autoGroupsNeedBuilding=!0,this.forceRecreateAutoGroups=!0,this.updateGridColumns(),this.updateDisplayedColumns(e))}onAutoGroupColumnDefChanged(e){this.groupAutoColumns&&this.autoGroupColService.updateAutoGroupColumns(this.groupAutoColumns,e)}onSharedColDefChanged(e){!this.gridColumns||(this.groupAutoColumns&&this.autoGroupColService.updateAutoGroupColumns(this.groupAutoColumns,e),this.createColumnsFromColumnDefs(!0,e))}setColumnDefs(e,t){const i=!!this.columnDefs;this.columnDefs=e,this.createColumnsFromColumnDefs(i,t)}recreateColumnDefs(e){this.onSharedColDefChanged(e)}destroyOldColumns(e,t){const i={};if(!e)return;this.columnUtils.depthFirstOriginalTreeSearch(null,e,n=>{i[n.getInstanceId()]=n}),t&&this.columnUtils.depthFirstOriginalTreeSearch(null,t,n=>{i[n.getInstanceId()]=null});const s=Object.values(i).filter(n=>n!=null);this.destroyBeans(s)}destroyColumns(){this.destroyOldColumns(this.primaryColumnTree),this.destroyOldColumns(this.secondaryBalancedTree),this.destroyOldColumns(this.groupAutoColsBalancedTree)}createColumnsFromColumnDefs(e,t){const i=e?this.compareColumnStatesAndDispatchEvents(t):void 0;this.valueCache.expire(),this.autoGroupsNeedBuilding=!0;const s=this.primaryColumns,n=this.primaryColumnTree,l=this.columnFactory.createColumnTree(this.columnDefs,!0,n,t);this.destroyOldColumns(this.primaryColumnTree,l.columnTree),this.primaryColumnTree=l.columnTree,this.primaryHeaderRowCount=l.treeDept+1,this.primaryColumns=this.getColumnsFromTree(this.primaryColumnTree),this.primaryColumnsMap={},this.primaryColumns.forEach(C=>this.primaryColumnsMap[C.getId()]=C),this.extractRowGroupColumns(t,s),this.extractPivotColumns(t,s),this.extractValueColumns(t,s),this.ready=!0;const u=this.gridColsArePrimary===void 0;(this.gridColsArePrimary||u||this.autoGroupsNeedBuilding)&&(this.updateGridColumns(),e&&this.gridColsArePrimary&&!this.gridOptionsService.get("maintainColumnOrder")&&this.orderGridColumnsLikePrimary(),this.updateDisplayedColumns(t),this.checkViewportColumns()),this.dispatchEverythingChanged(t),this.changeEventsDispatching=!0,i&&i(),this.changeEventsDispatching=!1,this.dispatchNewColumnsLoaded(t)}shouldRowModelIgnoreRefresh(){return this.changeEventsDispatching}dispatchNewColumnsLoaded(e){const t={type:L.EVENT_NEW_COLUMNS_LOADED,source:e};this.eventService.dispatchEvent(t),e==="gridInitializing"&&this.onColumnsReady()}dispatchEverythingChanged(e){const t={type:L.EVENT_COLUMN_EVERYTHING_CHANGED,source:e};this.eventService.dispatchEvent(t)}orderGridColumnsLikePrimary(){const e=this.primaryColumns;if(!e)return;const t=e.filter(s=>this.gridColumns.indexOf(s)>=0),i=this.gridColumns.filter(s=>t.indexOf(s)<0);this.gridColumns=[...i,...t],this.gridColumns=this.placeLockedColumns(this.gridColumns)}getAllDisplayedAutoHeightCols(){return this.displayedAutoHeightCols}setViewport(){this.gridOptionsService.get("enableRtl")?(this.viewportLeft=this.bodyWidth-this.scrollPosition-this.scrollWidth,this.viewportRight=this.bodyWidth-this.scrollPosition):(this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition)}getDisplayedColumnsStartingAt(e){let t=e;const i=[];for(;t!=null;)i.push(t),t=this.getDisplayedColAfter(t);return i}checkViewportColumns(e=!1){if(this.displayedColumnsCenter==null||!this.extractViewport())return;const i={type:L.EVENT_VIRTUAL_COLUMNS_CHANGED,afterScroll:e};this.eventService.dispatchEvent(i)}setViewportPosition(e,t,i=!1){(e!==this.scrollWidth||t!==this.scrollPosition||this.bodyWidthDirty)&&(this.scrollWidth=e,this.scrollPosition=t,this.bodyWidthDirty=!0,this.setViewport(),this.ready&&this.checkViewportColumns(i))}isPivotMode(){return this.pivotMode}isPivotSettingAllowed(e){return e&&this.gridOptionsService.get("treeData")?(console.warn("AG Grid: Pivot mode not available in conjunction Tree Data i.e. 'gridOptions.treeData: true'"),!1):!0}setPivotMode(e,t){if(e===this.pivotMode||!this.isPivotSettingAllowed(this.pivotMode)||(this.pivotMode=e,!this.gridColumns))return;this.autoGroupsNeedBuilding=!0,this.updateGridColumns(),this.updateDisplayedColumns(t);const i={type:L.EVENT_COLUMN_PIVOT_MODE_CHANGED};this.eventService.dispatchEvent(i)}getSecondaryPivotColumn(e,t){if(Xe(this.secondaryColumns))return null;const i=this.getPrimaryColumn(t);let s=null;return this.secondaryColumns.forEach(n=>{const l=n.getColDef().pivotKeys,u=n.getColDef().pivotValueColumn;bs(l,e)&&u===i&&(s=n)}),s}setBeans(e){this.logger=e.create("columnModel")}setFirstRightAndLastLeftPinned(e){let t,i;this.gridOptionsService.get("enableRtl")?(t=this.displayedColumnsLeft?this.displayedColumnsLeft[0]:null,i=this.displayedColumnsRight?yt(this.displayedColumnsRight):null):(t=this.displayedColumnsLeft?yt(this.displayedColumnsLeft):null,i=this.displayedColumnsRight?this.displayedColumnsRight[0]:null),this.gridColumns.forEach(s=>{s.setLastLeftPinned(s===t,e),s.setFirstRightPinned(s===i,e)})}autoSizeColumns(e){if(this.shouldQueueResizeOperations){this.resizeOperationQueue.push(()=>this.autoSizeColumns(e));return}const{columns:t,skipHeader:i,skipHeaderGroups:s,stopAtGroup:n,source:l="api"}=e;this.animationFrameService.flushAllFrames();const u=[];let g=-1;const C=i??this.gridOptionsService.get("skipHeaderOnAutoSize"),S=s??C;for(;g!==0;)g=0,this.actionOnGridColumns(t,A=>{if(u.indexOf(A)>=0)return!1;const D=this.autoWidthCalculator.getPreferredWidthForColumn(A,C);if(D>0){const M=this.normaliseColumnWidth(A,D);A.setActualWidth(M,l),u.push(A),g++}return!0},l);S||this.autoSizeColumnGroupsByColumns(t,l,n),this.dispatchColumnResizedEvent(u,!0,"autosizeColumns")}dispatchColumnResizedEvent(e,t,i,s=null){if(e&&e.length){const n={type:L.EVENT_COLUMN_RESIZED,columns:e,column:e.length===1?e[0]:null,flexColumns:s,finished:t,source:i};this.eventService.dispatchEvent(n)}}dispatchColumnChangedEvent(e,t,i){const s={type:e,columns:t,column:t&&t.length==1?t[0]:null,source:i};this.eventService.dispatchEvent(s)}dispatchColumnMovedEvent(e){const{movedColumns:t,source:i,toIndex:s,finished:n}=e,l={type:L.EVENT_COLUMN_MOVED,columns:t,column:t&&t.length===1?t[0]:null,toIndex:s,finished:n,source:i};this.eventService.dispatchEvent(l)}dispatchColumnPinnedEvent(e,t){if(!e.length)return;const i=e.length===1?e[0]:null,s=this.getCommonValue(e,l=>l.getPinned()),n={type:L.EVENT_COLUMN_PINNED,pinned:s??null,columns:e,column:i,source:t};this.eventService.dispatchEvent(n)}dispatchColumnVisibleEvent(e,t){if(!e.length)return;const i=e.length===1?e[0]:null,s=this.getCommonValue(e,l=>l.isVisible()),n={type:L.EVENT_COLUMN_VISIBLE,visible:s,columns:e,column:i,source:t};this.eventService.dispatchEvent(n)}autoSizeColumn(e,t,i){e&&this.autoSizeColumns({columns:[e],skipHeader:i,skipHeaderGroups:!0,source:t})}autoSizeColumnGroupsByColumns(e,t,i){const s=new Set;this.getGridColumns(e).forEach(g=>{let C=g.getParent();for(;C&&C!=i;)C.isPadding()||s.add(C),C=C.getParent()});let l;const u=[];for(const g of s){for(const C of this.ctrlsService.getHeaderRowContainerCtrls())if(l=C.getHeaderCtrlForColumn(g),l)break;l&&l.resizeLeafColumnsToFit(t)}return u}autoSizeAllColumns(e,t){if(this.shouldQueueResizeOperations){this.resizeOperationQueue.push(()=>this.autoSizeAllColumns(e,t));return}const i=this.getAllDisplayedColumns();this.autoSizeColumns({columns:i,skipHeader:t,source:e})}getColumnsFromTree(e){const t=[],i=s=>{for(let n=0;n<s.length;n++){const l=s[n];l instanceof Lt?t.push(l):l instanceof Qt&&i(l.getChildren())}};return i(e),t}getAllDisplayedTrees(){return this.displayedTreeLeft&&this.displayedTreeRight&&this.displayedTreeCentre?this.displayedTreeLeft.concat(this.displayedTreeCentre).concat(this.displayedTreeRight):null}getPrimaryColumnTree(){return this.primaryColumnTree}getHeaderRowCount(){return this.gridHeaderRowCount}getDisplayedTreeLeft(){return this.displayedTreeLeft}getDisplayedTreeRight(){return this.displayedTreeRight}getDisplayedTreeCentre(){return this.displayedTreeCentre}isColumnDisplayed(e){return this.getAllDisplayedColumns().indexOf(e)>=0}getAllDisplayedColumns(){return this.displayedColumns}getViewportColumns(){return this.viewportColumns}getDisplayedLeftColumnsForRow(e){return this.colSpanActive?this.getDisplayedColumnsForRow(e,this.displayedColumnsLeft):this.displayedColumnsLeft}getDisplayedRightColumnsForRow(e){return this.colSpanActive?this.getDisplayedColumnsForRow(e,this.displayedColumnsRight):this.displayedColumnsRight}isColSpanActive(){return this.colSpanActive}getDisplayedColumnsForRow(e,t,i,s){const n=[];let l=null;for(let u=0;u<t.length;u++){const g=t[u],C=t.length-u,S=Math.min(g.getColSpan(e),C),A=[g];if(S>1){const M=S-1;for(let W=1;W<=M;W++)A.push(t[u+W]);u+=M}let D;i?(D=!1,A.forEach(M=>{i(M)&&(D=!0)})):D=!0,D&&(n.length===0&&l&&(s?s(g):!1)&&n.push(l),n.push(g)),l=g}return n}getViewportCenterColumnsForRow(e){if(!this.colSpanActive)return this.viewportColumnsCenter;const t=s=>{const n=s.getLeft();return ce(n)&&n>this.viewportLeft},i=this.isColumnVirtualisationSuppressed()?null:this.isColumnInRowViewport.bind(this);return this.getDisplayedColumnsForRow(e,this.displayedColumnsCenter,i,t)}isColumnAtEdge(e,t){const i=this.getAllDisplayedColumns();if(!i.length)return!1;const s=t==="first";let n;if(e instanceof ri){const l=e.getDisplayedLeafColumns();if(!l.length)return!1;n=s?l[0]:yt(l)}else n=e;return(s?i[0]:yt(i))===n}getAriaColumnIndex(e){let t;return e instanceof ri?t=e.getLeafColumns()[0]:t=e,this.ariaOrderColumns.indexOf(t)+1}isColumnInHeaderViewport(e){return e.isAutoHeaderHeight()?!0:this.isColumnInRowViewport(e)}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;const t=e.getLeft()||0,i=t+e.getActualWidth(),s=this.viewportLeft-200,n=this.viewportRight+200,l=t<s&&i<s,u=t>n&&i>n;return!l&&!u}getDisplayedColumnsLeftWidth(){return this.getWidthOfColsInList(this.displayedColumnsLeft)}getDisplayedColumnsRightWidth(){return this.getWidthOfColsInList(this.displayedColumnsRight)}updatePrimaryColumnList(e,t,i,s,n,l){if(!e||Hi(e))return;let u=!1;if(e.forEach(C=>{if(!C)return;const S=this.getPrimaryColumn(C);if(!!S){if(i){if(t.indexOf(S)>=0)return;t.push(S)}else{if(t.indexOf(S)<0)return;Oi(t,S)}s(S),u=!0}}),!u)return;this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(l);const g={type:n,columns:t,column:t.length===1?t[0]:null,source:l};this.eventService.dispatchEvent(g)}setRowGroupColumns(e,t){this.autoGroupsNeedBuilding=!0,this.setPrimaryColumnList(e,this.rowGroupColumns,L.EVENT_COLUMN_ROW_GROUP_CHANGED,!0,this.setRowGroupActive.bind(this),t)}setRowGroupActive(e,t,i){e!==t.isRowGroupActive()&&(t.setRowGroupActive(e,i),e&&!this.gridOptionsService.get("suppressRowGroupHidesColumns")&&this.setColumnsVisible([t],!1,i),!e&&!this.gridOptionsService.get("suppressMakeColumnVisibleAfterUnGroup")&&this.setColumnsVisible([t],!0,i))}addRowGroupColumns(e,t){this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(e,this.rowGroupColumns,!0,this.setRowGroupActive.bind(this,!0),L.EVENT_COLUMN_ROW_GROUP_CHANGED,t)}removeRowGroupColumns(e,t){this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(e,this.rowGroupColumns,!1,this.setRowGroupActive.bind(this,!1),L.EVENT_COLUMN_ROW_GROUP_CHANGED,t)}addPivotColumns(e,t){this.updatePrimaryColumnList(e,this.pivotColumns,!0,i=>i.setPivotActive(!0,t),L.EVENT_COLUMN_PIVOT_CHANGED,t)}setPivotColumns(e,t){this.setPrimaryColumnList(e,this.pivotColumns,L.EVENT_COLUMN_PIVOT_CHANGED,!0,(i,s)=>{s.setPivotActive(i,t)},t)}removePivotColumns(e,t){this.updatePrimaryColumnList(e,this.pivotColumns,!1,i=>i.setPivotActive(!1,t),L.EVENT_COLUMN_PIVOT_CHANGED,t)}setPrimaryColumnList(e,t,i,s,n,l){if(!this.gridColumns)return;const u=new Map;t.forEach((g,C)=>u.set(g,C)),t.length=0,ce(e)&&e.forEach(g=>{const C=this.getPrimaryColumn(g);C&&t.push(C)}),t.forEach((g,C)=>{const S=u.get(g);if(S===void 0){u.set(g,0);return}s&&S!==C||u.delete(g)}),(this.primaryColumns||[]).forEach(g=>{const C=t.indexOf(g)>=0;n(C,g)}),this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(l),this.dispatchColumnChangedEvent(i,[...u.keys()],l)}setValueColumns(e,t){this.setPrimaryColumnList(e,this.valueColumns,L.EVENT_COLUMN_VALUE_CHANGED,!1,this.setValueActive.bind(this),t)}setValueActive(e,t,i){if(e!==t.isValueActive()&&(t.setValueActive(e,i),e&&!t.getAggFunc())){const s=this.aggFuncService.getDefaultAggFunc(t);t.setAggFunc(s)}}addValueColumns(e,t){this.updatePrimaryColumnList(e,this.valueColumns,!0,this.setValueActive.bind(this,!0),L.EVENT_COLUMN_VALUE_CHANGED,t)}removeValueColumns(e,t){this.updatePrimaryColumnList(e,this.valueColumns,!1,this.setValueActive.bind(this,!1),L.EVENT_COLUMN_VALUE_CHANGED,t)}normaliseColumnWidth(e,t){const i=e.getMinWidth();ce(i)&&t<i&&(t=i);const s=e.getMaxWidth();return ce(s)&&e.isGreaterThanMax(t)&&(t=s),t}getPrimaryOrGridColumn(e){return this.getPrimaryColumn(e)||this.getGridColumn(e)}setColumnWidths(e,t,i,s){const n=[];e.forEach(l=>{const u=this.getPrimaryOrGridColumn(l.key);if(!u)return;if(n.push({width:l.newWidth,ratios:[1],columns:[u]}),this.gridOptionsService.get("colResizeDefault")==="shift"&&(t=!t),t){const C=this.getDisplayedColAfter(u);if(!C)return;const S=u.getActualWidth()-l.newWidth,A=C.getActualWidth()+S;n.push({width:A,ratios:[1],columns:[C]})}}),n.length!==0&&this.resizeColumnSets({resizeSets:n,finished:i,source:s})}checkMinAndMaxWidthsForSet(e){const{columns:t,width:i}=e;let s=0,n=0,l=!0;t.forEach(C=>{s+=C.getMinWidth()||0;const A=C.getMaxWidth();ce(A)&&A>0?n+=A:l=!1});const u=i>=s,g=!l||i<=n;return u&&g}resizeColumnSets(e){const{resizeSets:t,finished:i,source:s}=e;if(!(!t||t.every(A=>this.checkMinAndMaxWidthsForSet(A)))){if(i){const A=t&&t.length>0?t[0].columns:null;this.dispatchColumnResizedEvent(A,i,s)}return}const l=[],u=[];t.forEach(A=>{const{width:D,columns:M,ratios:W}=A,z={},U={};M.forEach(_=>u.push(_));let X=!0,q=0;for(;X;){if(q++,q>1e3){console.error("AG Grid: infinite loop in resizeColumnSets");break}X=!1;const _=[];let J=0,se=D;M.forEach((Y,oe)=>{U[Y.getId()]?se-=z[Y.getId()]:(_.push(Y),J+=W[oe])});const $=1/J;_.forEach((Y,oe)=>{const Oe=oe===_.length-1;let re;Oe?re=se:(re=Math.round(W[oe]*D*$),se-=re);const Ve=Y.getMinWidth(),Pe=Y.getMaxWidth();ce(Ve)&&re<Ve?(re=Ve,U[Y.getId()]=!0,X=!0):ce(Pe)&&Pe>0&&re>Pe&&(re=Pe,U[Y.getId()]=!0,X=!0),z[Y.getId()]=re})}M.forEach(_=>{const J=z[_.getId()];_.getActualWidth()!==J&&(_.setActualWidth(J,s),l.push(_))})});const g=l.length>0;let C=[];g&&(C=this.refreshFlexedColumns({resizingCols:u,skipSetLeft:!0}),this.setLeftValues(s),this.updateBodyWidths(),this.checkViewportColumns());const S=u.concat(C);(g||i)&&this.dispatchColumnResizedEvent(S,i,s,C)}setColumnAggFunc(e,t,i){if(!e)return;const s=this.getPrimaryColumn(e);!s||(s.setAggFunc(t),this.dispatchColumnChangedEvent(L.EVENT_COLUMN_VALUE_CHANGED,[s],i))}moveRowGroupColumn(e,t,i){if(this.isRowGroupEmpty())return;const s=this.rowGroupColumns[e],n=this.rowGroupColumns.slice(e,t);this.rowGroupColumns.splice(e,1),this.rowGroupColumns.splice(t,0,s);const l={type:L.EVENT_COLUMN_ROW_GROUP_CHANGED,columns:n,column:n.length===1?n[0]:null,source:i};this.eventService.dispatchEvent(l)}moveColumns(e,t,i,s=!0){if(!this.gridColumns)return;if(this.columnAnimationService.start(),t>this.gridColumns.length-e.length){console.warn("AG Grid: tried to insert columns in invalid location, toIndex = "+t),console.warn("AG Grid: remember that you should not count the moving columns when calculating the new index");return}const n=this.getGridColumns(e);!this.doesMovePassRules(n,t)||(Ed(this.gridColumns,n,t),this.updateDisplayedColumns(i),this.dispatchColumnMovedEvent({movedColumns:n,source:i,toIndex:t,finished:s}),this.columnAnimationService.finish())}doesMovePassRules(e,t){const i=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(i)}doesOrderPassRules(e){return!(!this.doesMovePassMarryChildren(e)||!this.doesMovePassLockedPositions(e))}getProposedColumnOrder(e,t){const i=this.gridColumns.slice();return Ed(i,e,t),i}sortColumnsLikeGridColumns(e){!e||e.length<=1||e.filter(i=>this.gridColumns.indexOf(i)<0).length>0||e.sort((i,s)=>{const n=this.gridColumns.indexOf(i),l=this.gridColumns.indexOf(s);return n-l})}doesMovePassLockedPositions(e){let t=0,i=!0;const s=n=>n?n===!0||n==="left"?0:2:1;return e.forEach(n=>{const l=s(n.getColDef().lockPosition);l<t&&(i=!1),t=l}),i}doesMovePassMarryChildren(e){let t=!0;return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,i=>{if(!(i instanceof Qt))return;const s=i,n=s.getColGroupDef();if(!(n&&n.marryChildren))return;const u=[];s.getLeafColumns().forEach(D=>{const M=e.indexOf(D);u.push(M)});const g=Math.max.apply(Math,u),C=Math.min.apply(Math,u),S=g-C,A=s.getLeafColumns().length-1;S>A&&(t=!1)}),t}moveColumnByIndex(e,t,i){if(!this.gridColumns)return;const s=this.gridColumns[e];this.moveColumns([s],t,i)}getColumnDefs(){if(!this.primaryColumns)return;const e=this.primaryColumns.slice();return this.gridColsArePrimary?e.sort((t,i)=>this.gridColumns.indexOf(t)-this.gridColumns.indexOf(i)):this.lastPrimaryOrder&&e.sort((t,i)=>this.lastPrimaryOrder.indexOf(t)-this.lastPrimaryOrder.indexOf(i)),this.columnDefFactory.buildColumnDefs(e,this.rowGroupColumns,this.pivotColumns)}getBodyContainerWidth(){return this.bodyWidth}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}updateBodyWidths(){const e=this.getWidthOfColsInList(this.displayedColumnsCenter),t=this.getWidthOfColsInList(this.displayedColumnsLeft),i=this.getWidthOfColsInList(this.displayedColumnsRight);if(this.bodyWidthDirty=this.bodyWidth!==e,this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==i){this.bodyWidth=e,this.leftWidth=t,this.rightWidth=i;const n={type:L.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED};this.eventService.dispatchEvent(n);const l={type:L.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED};this.eventService.dispatchEvent(l)}}getValueColumns(){return this.valueColumns?this.valueColumns:[]}getPivotColumns(){return this.pivotColumns?this.pivotColumns:[]}isPivotActive(){return this.pivotColumns&&this.pivotColumns.length>0&&this.pivotMode}getRowGroupColumns(){return this.rowGroupColumns?this.rowGroupColumns:[]}getDisplayedCenterColumns(){return this.displayedColumnsCenter}getDisplayedLeftColumns(){return this.displayedColumnsLeft}getDisplayedRightColumns(){return this.displayedColumnsRight}getDisplayedColumns(e){switch(e){case"left":return this.getDisplayedLeftColumns();case"right":return this.getDisplayedRightColumns();default:return this.getDisplayedCenterColumns()}}getAllPrimaryColumns(){return this.primaryColumns?this.primaryColumns:null}getSecondaryColumns(){return this.secondaryColumns?this.secondaryColumns:null}getAllColumnsForQuickFilter(){return this.columnsForQuickFilter}getAllGridColumns(){var e;return(e=this.gridColumns)!=null?e:[]}isEmpty(){return Hi(this.gridColumns)}isRowGroupEmpty(){return Hi(this.rowGroupColumns)}setColumnsVisible(e,t=!1,i){this.applyColumnState({state:e.map(s=>({colId:typeof s=="string"?s:s.getColId(),hide:!t}))},i)}setColumnsPinned(e,t,i){if(!this.gridColumns)return;if(this.gridOptionsService.isDomLayout("print")){console.warn("AG Grid: Changing the column pinning status is not allowed with domLayout='print'");return}this.columnAnimationService.start();let s;t===!0||t==="left"?s="left":t==="right"?s="right":s=null,this.actionOnGridColumns(e,n=>n.getPinned()!==s?(n.setPinned(s),!0):!1,i,()=>({type:L.EVENT_COLUMN_PINNED,pinned:s,column:null,columns:null,source:i})),this.columnAnimationService.finish()}actionOnGridColumns(e,t,i,s){if(Hi(e))return;const n=[];if(e.forEach(l=>{if(!l)return;const u=this.getGridColumn(l);if(!u)return;t(u)!==!1&&n.push(u)}),!!n.length&&(this.updateDisplayedColumns(i),ce(s)&&s)){const l=s();l.columns=n,l.column=n.length===1?n[0]:null,this.eventService.dispatchEvent(l)}}getDisplayedColBefore(e){const t=this.getAllDisplayedColumns(),i=t.indexOf(e);return i>0?t[i-1]:null}getDisplayedColAfter(e){const t=this.getAllDisplayedColumns(),i=t.indexOf(e);return i<t.length-1?t[i+1]:null}getDisplayedGroupAfter(e){return this.getDisplayedGroupAtDirection(e,"After")}getDisplayedGroupBefore(e){return this.getDisplayedGroupAtDirection(e,"Before")}getDisplayedGroupAtDirection(e,t){const i=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),s=e.getDisplayedLeafColumns(),n=t==="After"?yt(s):s[0],l=`getDisplayedCol${t}`;for(;;){const u=this[l](n);if(!u)return null;const g=this.getColumnGroupAtLevel(u,i);if(g!==e)return g}}getColumnGroupAtLevel(e,t){let i=e.getParent(),s,n;for(;s=i.getProvidedColumnGroup().getLevel(),n=i.getPaddingLevel(),!(s+n<=t);)i=i.getParent();return i}isPinningLeft(){return this.displayedColumnsLeft.length>0}isPinningRight(){return this.displayedColumnsRight.length>0}getPrimaryAndSecondaryAndAutoColumns(){return[].concat(this.primaryColumns||[],this.groupAutoColumns||[],this.secondaryColumns||[])}createStateItemFromColumn(e){const t=e.isRowGroupActive()?this.rowGroupColumns.indexOf(e):null,i=e.isPivotActive()?this.pivotColumns.indexOf(e):null,s=e.isValueActive()?e.getAggFunc():null,n=e.getSort()!=null?e.getSort():null,l=e.getSortIndex()!=null?e.getSortIndex():null,u=e.getFlex()!=null&&e.getFlex()>0?e.getFlex():null;return{colId:e.getColId(),width:e.getActualWidth(),hide:!e.isVisible(),pinned:e.getPinned(),sort:n,sortIndex:l,aggFunc:s,rowGroup:e.isRowGroupActive(),rowGroupIndex:t,pivot:e.isPivotActive(),pivotIndex:i,flex:u}}getColumnState(){if(Xe(this.primaryColumns)||!this.isAlive())return[];const t=this.getPrimaryAndSecondaryAndAutoColumns().map(this.createStateItemFromColumn.bind(this));return this.orderColumnStateList(t),t}orderColumnStateList(e){const t=io(this.gridColumns.map((i,s)=>[i.getColId(),s]));e.sort((i,s)=>{const n=t.has(i.colId)?t.get(i.colId):-1,l=t.has(s.colId)?t.get(s.colId):-1;return n-l})}resetColumnState(e){if(Hi(this.primaryColumns))return;const t=this.getColumnsFromTree(this.primaryColumnTree),i=[];let s=1e3,n=1e3,l=[];this.groupAutoColumns&&(l=l.concat(this.groupAutoColumns)),t&&(l=l.concat(t)),l.forEach(u=>{const g=this.getColumnStateFromColDef(u);Xe(g.rowGroupIndex)&&g.rowGroup&&(g.rowGroupIndex=s++),Xe(g.pivotIndex)&&g.pivot&&(g.pivotIndex=n++),i.push(g)}),this.applyColumnState({state:i,applyOrder:!0},e)}getColumnStateFromColDef(e){const t=(z,U)=>z??U??null,i=e.getColDef(),s=t(i.sort,i.initialSort),n=t(i.sortIndex,i.initialSortIndex),l=t(i.hide,i.initialHide),u=t(i.pinned,i.initialPinned),g=t(i.width,i.initialWidth),C=t(i.flex,i.initialFlex);let S=t(i.rowGroupIndex,i.initialRowGroupIndex),A=t(i.rowGroup,i.initialRowGroup);S==null&&(A==null||A==!1)&&(S=null,A=null);let D=t(i.pivotIndex,i.initialPivotIndex),M=t(i.pivot,i.initialPivot);D==null&&(M==null||M==!1)&&(D=null,M=null);const W=t(i.aggFunc,i.initialAggFunc);return{colId:e.getColId(),sort:s,sortIndex:n,hide:l,pinned:u,width:g,flex:C,rowGroup:A,rowGroupIndex:S,pivot:M,pivotIndex:D,aggFunc:W}}applyColumnState(e,t){if(Hi(this.primaryColumns))return!1;if(e&&e.state&&!e.state.forEach)return console.warn("AG Grid: applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;const i=(l,u,g)=>{const C=this.compareColumnStatesAndDispatchEvents(t);this.autoGroupsNeedBuilding=!0;const S=u.slice(),A={},D={},M=[],W=[];let z=0;const U=this.rowGroupColumns.slice(),X=this.pivotColumns.slice();l.forEach(se=>{const $=se.colId||"";if($.startsWith(wr)){M.push(se),W.push(se);return}const oe=g($);oe?(this.syncColumnWithStateItem(oe,se,e.defaultState,A,D,!1,t),Oi(S,oe)):(W.push(se),z+=1)});const q=se=>this.syncColumnWithStateItem(se,null,e.defaultState,A,D,!1,t);S.forEach(q);const _=(se,$,Y,oe)=>{const Oe=se[Y.getId()],re=se[oe.getId()],Ve=Oe!=null,Pe=re!=null;if(Ve&&Pe)return Oe-re;if(Ve)return-1;if(Pe)return 1;const He=$.indexOf(Y),tt=$.indexOf(oe),Ge=He>=0,et=tt>=0;return Ge&&et?He-tt:Ge?-1:1};this.rowGroupColumns.sort(_.bind(this,A,U)),this.pivotColumns.sort(_.bind(this,D,X)),this.updateGridColumns();const J=this.groupAutoColumns?this.groupAutoColumns.slice():[];return M.forEach(se=>{const $=this.getAutoColumn(se.colId);Oi(J,$),this.syncColumnWithStateItem($,se,e.defaultState,null,null,!0,t)}),J.forEach(q),this.applyOrderAfterApplyState(e),this.updateDisplayedColumns(t),this.dispatchEverythingChanged(t),C(),{unmatchedAndAutoStates:W,unmatchedCount:z}};this.columnAnimationService.start();let{unmatchedAndAutoStates:s,unmatchedCount:n}=i(e.state||[],this.primaryColumns||[],l=>this.getPrimaryColumn(l));return(s.length>0||ce(e.defaultState))&&(n=i(s,this.secondaryColumns||[],l=>this.getSecondaryColumn(l)).unmatchedCount),this.columnAnimationService.finish(),n===0}applyOrderAfterApplyState(e){if(!e.applyOrder||!e.state)return;let t=[];const i={};e.state.forEach(n=>{if(!n.colId||i[n.colId])return;const l=this.gridColumnsMap[n.colId];l&&(t.push(l),i[n.colId]=!0)});let s=0;if(this.gridColumns.forEach(n=>{const l=n.getColId();if(i[l]!=null)return;l.startsWith(wr)?yn(t,n,s++):t.push(n)}),t=this.placeLockedColumns(t),!this.doesMovePassMarryChildren(t)){console.warn("AG Grid: Applying column order broke a group where columns should be married together. Applying new order has been discarded.");return}this.gridColumns=t}compareColumnStatesAndDispatchEvents(e){const t={rowGroupColumns:this.rowGroupColumns.slice(),pivotColumns:this.pivotColumns.slice(),valueColumns:this.valueColumns.slice()},i=this.getColumnState(),s={};return i.forEach(n=>{s[n.colId]=n}),()=>{const n=this.getPrimaryAndSecondaryAndAutoColumns(),l=(U,X,q,_)=>{const J=X.map(_),se=q.map(_);if(bs(J,se))return;const Y=new Set(X);q.forEach(re=>{Y.delete(re)||Y.add(re)});const oe=[...Y],Oe={type:U,columns:oe,column:oe.length===1?oe[0]:null,source:e};this.eventService.dispatchEvent(Oe)},u=U=>{const X=[];return n.forEach(q=>{const _=s[q.getColId()];_&&U(_,q)&&X.push(q)}),X},g=U=>U.getColId();l(L.EVENT_COLUMN_ROW_GROUP_CHANGED,t.rowGroupColumns,this.rowGroupColumns,g),l(L.EVENT_COLUMN_PIVOT_CHANGED,t.pivotColumns,this.pivotColumns,g);const S=u((U,X)=>{const q=U.aggFunc!=null,_=q!=X.isValueActive(),J=q&&U.aggFunc!=X.getAggFunc();return _||J});S.length>0&&this.dispatchColumnChangedEvent(L.EVENT_COLUMN_VALUE_CHANGED,S,e);const A=(U,X)=>U.width!=X.getActualWidth();this.dispatchColumnResizedEvent(u(A),!0,e);const D=(U,X)=>U.pinned!=X.getPinned();this.dispatchColumnPinnedEvent(u(D),e);const M=(U,X)=>U.hide==X.isVisible();this.dispatchColumnVisibleEvent(u(M),e);const z=u((U,X)=>U.sort!=X.getSort()||U.sortIndex!=X.getSortIndex());z.length>0&&this.sortController.dispatchSortChangedEvents(e,z),this.normaliseColumnMovedEventForColumnState(i,e)}}getCommonValue(e,t){if(!e||e.length==0)return;const i=t(e[0]);for(let s=1;s<e.length;s++)if(i!==t(e[s]))return;return i}normaliseColumnMovedEventForColumnState(e,t){const i=this.getColumnState(),s={};i.forEach(C=>s[C.colId]=C);const n={};e.forEach(C=>{s[C.colId]&&(n[C.colId]=!0)});const l=e.filter(C=>n[C.colId]),u=i.filter(C=>n[C.colId]),g=[];u.forEach((C,S)=>{const A=l&&l[S];if(A&&A.colId!==C.colId){const D=this.getGridColumn(A.colId);D&&g.push(D)}}),g.length&&this.dispatchColumnMovedEvent({movedColumns:g,source:t,finished:!0})}syncColumnWithStateItem(e,t,i,s,n,l,u){if(!e)return;const g=(J,se)=>{const $={value1:void 0,value2:void 0};let Y=!1;return t&&(t[J]!==void 0&&($.value1=t[J],Y=!0),ce(se)&&t[se]!==void 0&&($.value2=t[se],Y=!0)),!Y&&i&&(i[J]!==void 0&&($.value1=i[J]),ce(se)&&i[se]!==void 0&&($.value2=i[se])),$},C=g("hide").value1;C!==void 0&&e.setVisible(!C,u);const S=g("pinned").value1;S!==void 0&&e.setPinned(S);const A=this.columnUtils.calculateColMinWidth(e.getColDef()),D=g("flex").value1;if(D!==void 0&&e.setFlex(D),D==null){const J=g("width").value1;J!=null&&A!=null&&J>=A&&e.setActualWidth(J,u)}const M=g("sort").value1;M!==void 0&&(M==="desc"||M==="asc"?e.setSort(M,u):e.setSort(void 0,u));const W=g("sortIndex").value1;if(W!==void 0&&e.setSortIndex(W),l||!e.isPrimary())return;const z=g("aggFunc").value1;z!==void 0&&(typeof z=="string"?(e.setAggFunc(z),e.isValueActive()||(e.setValueActive(!0,u),this.valueColumns.push(e))):(ce(z)&&console.warn("AG Grid: stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),e.isValueActive()&&(e.setValueActive(!1,u),Oi(this.valueColumns,e))));const{value1:U,value2:X}=g("rowGroup","rowGroupIndex");(U!==void 0||X!==void 0)&&(typeof X=="number"||U?(e.isRowGroupActive()||(e.setRowGroupActive(!0,u),this.rowGroupColumns.push(e)),s&&typeof X=="number"&&(s[e.getId()]=X)):e.isRowGroupActive()&&(e.setRowGroupActive(!1,u),Oi(this.rowGroupColumns,e)));const{value1:q,value2:_}=g("pivot","pivotIndex");(q!==void 0||_!==void 0)&&(typeof _=="number"||q?(e.isPivotActive()||(e.setPivotActive(!0,u),this.pivotColumns.push(e)),n&&typeof _=="number"&&(n[e.getId()]=_)):e.isPivotActive()&&(e.setPivotActive(!1,u),Oi(this.pivotColumns,e)))}getGridColumns(e){return this.getColumns(e,this.getGridColumn.bind(this))}getColumns(e,t){const i=[];return e&&e.forEach(s=>{const n=t(s);n&&i.push(n)}),i}getColumnWithValidation(e){if(e==null)return null;const t=this.getGridColumn(e);return t||console.warn("AG Grid: could not find column "+e),t}getPrimaryColumn(e){return this.primaryColumns?this.getColumn(e,this.primaryColumns,this.primaryColumnsMap):null}getGridColumn(e){return this.getColumn(e,this.gridColumns,this.gridColumnsMap)}lookupGridColumn(e){return this.gridColumnsMap[e]}getSecondaryColumn(e){return this.secondaryColumns?this.getColumn(e,this.secondaryColumns,this.secondaryColumnsMap):null}getColumn(e,t,i){if(!e||!i)return null;if(typeof e=="string"&&i[e])return i[e];for(let s=0;s<t.length;s++)if(this.columnsMatch(t[s],e))return t[s];return this.getAutoColumn(e)}getSourceColumnsForGroupColumn(e){const t=e.getColDef().showRowGroup;if(!t)return null;if(t===!0)return this.rowGroupColumns.slice(0);const i=this.getPrimaryColumn(t);return i?[i]:null}getAutoColumn(e){return!this.groupAutoColumns||!ce(this.groupAutoColumns)||Xe(this.groupAutoColumns)?null:this.groupAutoColumns.find(t=>this.columnsMatch(t,e))||null}columnsMatch(e,t){const i=e===t,s=e.getColDef()===t,n=e.getColId()==t;return i||s||n}getDisplayNameForColumn(e,t,i=!1){if(!e)return null;const s=this.getHeaderName(e.getColDef(),e,null,null,t);return i?this.wrapHeaderNameWithAggFunc(e,s):s}getDisplayNameForProvidedColumnGroup(e,t,i){const s=t?t.getColGroupDef():null;return s?this.getHeaderName(s,null,e,t,i):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,i,s,n){const l=e.headerValueGetter;if(l){const u=this.gridOptionsService.addGridCommonParams({colDef:e,column:t,columnGroup:i,providedColumnGroup:s,location:n});return typeof l=="function"?l(u):typeof l=="string"?this.expressionService.evaluate(l,u):(console.warn("AG Grid: headerValueGetter must be a function or a string"),"")}else{if(e.headerName!=null)return e.headerName;if(e.field)return qu(e.field)}return""}wrapHeaderNameWithAggFunc(e,t){if(this.gridOptionsService.get("suppressAggFuncInHeader"))return t;const i=e.getColDef().pivotValueColumn,s=ce(i);let n=null,l;if(s){const u=this.gridOptionsService.get("removePivotHeaderRowWhenSingleValueColumn")&&this.valueColumns.length===1,g=e.getColDef().pivotTotalColumnIds!==void 0;if(u&&!g)return t;n=i?i.getAggFunc():null,l=!0}else{const u=e.isValueActive(),g=this.pivotMode||!this.isRowGroupEmpty();u&&g?(n=e.getAggFunc(),l=!0):l=!1}if(l){const u=typeof n=="string"?n:"func";return`${this.localeService.getLocaleTextFunc()(u,u)}(${t})`}return t}getColumnGroup(e,t){if(!e)return null;if(e instanceof ri)return e;const i=this.getAllDisplayedTrees(),s=typeof t=="number";let n=null;return this.columnUtils.depthFirstAllColumnTreeSearch(i,l=>{if(l instanceof ri){const u=l;let g;s?g=e===u.getGroupId()&&t===u.getPartId():g=e===u.getGroupId(),g&&(n=u)}}),n}isReady(){return this.ready}extractValueColumns(e,t){this.valueColumns=this.extractColumns(t,this.valueColumns,(i,s)=>i.setValueActive(s,e),()=>{},()=>{},i=>{const s=i.aggFunc;if(s===null||s==="")return null;if(s!==void 0)return!!s},i=>i.initialAggFunc!=null&&i.initialAggFunc!=""),this.valueColumns.forEach(i=>{const s=i.getColDef();s.aggFunc!=null&&s.aggFunc!=""?i.setAggFunc(s.aggFunc):i.getAggFunc()||i.setAggFunc(s.initialAggFunc)})}extractRowGroupColumns(e,t){this.rowGroupColumns=this.extractColumns(t,this.rowGroupColumns,(i,s)=>i.setRowGroupActive(s,e),i=>i.rowGroupIndex,i=>i.initialRowGroupIndex,i=>i.rowGroup,i=>i.initialRowGroup)}extractColumns(e=[],t=[],i,s,n,l,u){const g=[],C=[];(this.primaryColumns||[]).forEach(D=>{const M=e.indexOf(D)<0,W=D.getColDef(),z=ka(l(W)),U=ka(u(W)),X=ro(s(W)),q=ro(n(W));let _;z!==void 0?_=z:X!==void 0?X===null?_=!1:_=X>=0:M?U!==void 0?_=U:q!==void 0?_=q!=null&&q>=0:_=!1:_=t.indexOf(D)>=0,_&&((M?X!=null||q!=null:X!=null)?g.push(D):C.push(D))});const S=D=>{const M=s(D.getColDef()),W=n(D.getColDef());return M??W};g.sort((D,M)=>{const W=S(D),z=S(M);return W===z?0:W<z?-1:1});const A=[].concat(g);return t.forEach(D=>{C.indexOf(D)>=0&&A.push(D)}),C.forEach(D=>{A.indexOf(D)<0&&A.push(D)}),t.forEach(D=>{A.indexOf(D)<0&&i(D,!1)}),A.forEach(D=>{t.indexOf(D)<0&&i(D,!0)}),A}extractPivotColumns(e,t){this.pivotColumns=this.extractColumns(t,this.pivotColumns,(i,s)=>i.setPivotActive(s,e),i=>i.pivotIndex,i=>i.initialPivotIndex,i=>i.pivot,i=>i.initialPivot)}resetColumnGroupState(e){if(!this.primaryColumnTree)return;const t=[];this.columnUtils.depthFirstOriginalTreeSearch(null,this.primaryColumnTree,i=>{if(i instanceof Qt){const s=i.getColGroupDef(),n={groupId:i.getGroupId(),open:s?s.openByDefault:void 0};t.push(n)}}),this.setColumnGroupState(t,e)}getColumnGroupState(){const e=[];return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,t=>{t instanceof Qt&&e.push({groupId:t.getGroupId(),open:t.isExpanded()})}),e}setColumnGroupState(e,t){if(!this.gridBalancedTree)return;this.columnAnimationService.start();const i=[];if(e.forEach(s=>{const n=s.groupId,l=s.open,u=this.getProvidedColumnGroup(n);!u||u.isExpanded()!==l&&(this.logger.log("columnGroupOpened("+u.getGroupId()+","+l+")"),u.setExpanded(l),i.push(u))}),this.updateGroupsAndDisplayedColumns(t),this.setFirstRightAndLastLeftPinned(t),i.length){const s={type:L.EVENT_COLUMN_GROUP_OPENED,columnGroup:Qt.length===1?i[0]:void 0,columnGroups:i};this.eventService.dispatchEvent(s)}this.columnAnimationService.finish()}setColumnGroupOpened(e,t,i){let s;e instanceof Qt?s=e.getId():s=e||"",this.setColumnGroupState([{groupId:s,open:t}],i)}getProvidedColumnGroup(e){typeof e!="string"&&console.error("AG Grid: group key must be a string");let t=null;return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,i=>{i instanceof Qt&&i.getId()===e&&(t=i)}),t}calculateColumnsForDisplay(){let e;return this.pivotMode&&Xe(this.secondaryColumns)?e=this.gridColumns.filter(t=>{const i=this.groupAutoColumns&&zi(this.groupAutoColumns,t),s=this.valueColumns&&zi(this.valueColumns,t);return i||s}):e=this.gridColumns.filter(t=>this.groupAutoColumns&&zi(this.groupAutoColumns,t)||t.isVisible()),e}checkColSpanActiveInCols(e){let t=!1;return e.forEach(i=>{ce(i.getColDef().colSpan)&&(t=!0)}),t}calculateColumnsForGroupDisplay(){this.groupDisplayColumns=[],this.groupDisplayColumnsMap={};const e=t=>{const i=t.getColDef(),s=i.showRowGroup;i&&ce(s)&&(this.groupDisplayColumns.push(t),typeof s=="string"?this.groupDisplayColumnsMap[s]=t:s===!0&&this.getRowGroupColumns().forEach(n=>{this.groupDisplayColumnsMap[n.getId()]=t}))};this.gridColumns.forEach(e)}getGroupDisplayColumns(){return this.groupDisplayColumns}getGroupDisplayColumnForGroup(e){return this.groupDisplayColumnsMap[e]}updateDisplayedColumns(e){const t=this.calculateColumnsForDisplay();this.buildDisplayedTrees(t),this.updateGroupsAndDisplayedColumns(e),this.setFirstRightAndLastLeftPinned(e)}isSecondaryColumnsPresent(){return ce(this.secondaryColumns)}setSecondaryColumns(e,t){if(!this.gridColumns)return;const i=e;if(!(!i&&Xe(this.secondaryColumns))){if(i){this.processSecondaryColumnDefinitions(e);const s=this.columnFactory.createColumnTree(e,!1,this.secondaryBalancedTree||this.previousSecondaryColumns||void 0,t);this.destroyOldColumns(this.secondaryBalancedTree,s.columnTree),this.secondaryBalancedTree=s.columnTree,this.secondaryHeaderRowCount=s.treeDept+1,this.secondaryColumns=this.getColumnsFromTree(this.secondaryBalancedTree),this.secondaryColumnsMap={},this.secondaryColumns.forEach(n=>this.secondaryColumnsMap[n.getId()]=n),this.previousSecondaryColumns=null}else this.previousSecondaryColumns=this.secondaryBalancedTree,this.secondaryBalancedTree=null,this.secondaryHeaderRowCount=-1,this.secondaryColumns=null,this.secondaryColumnsMap={};this.updateGridColumns(),this.updateDisplayedColumns(t)}}processSecondaryColumnDefinitions(e){const t=this.gridOptionsService.get("processPivotResultColDef"),i=this.gridOptionsService.get("processPivotResultColGroupDef");if(!t&&!i)return;const s=n=>{n.forEach(l=>{if(ce(l.children)){const g=l;i&&i(g),s(g.children)}else t&&t(l)})};e&&s(e)}updateGridColumns(){const e=this.gridBalancedTree;if(this.gridColsArePrimary?this.lastPrimaryOrder=this.gridColumns:this.lastSecondaryOrder=this.gridColumns,this.createGroupAutoColumnsIfNeeded()){const s=io(this.groupAutoColumns.map(n=>[n,!0]));this.lastPrimaryOrder&&(this.lastPrimaryOrder=this.lastPrimaryOrder.filter(n=>!s.has(n)),this.lastPrimaryOrder=[...this.groupAutoColumns,...this.lastPrimaryOrder]),this.lastSecondaryOrder&&(this.lastSecondaryOrder=this.lastSecondaryOrder.filter(n=>!s.has(n)),this.lastSecondaryOrder=[...this.groupAutoColumns,...this.lastSecondaryOrder])}let i;if(this.secondaryColumns&&this.secondaryBalancedTree){const s=this.secondaryColumns.some(n=>this.gridColumnsMap[n.getColId()]!==void 0);this.gridBalancedTree=this.secondaryBalancedTree.slice(),this.gridHeaderRowCount=this.secondaryHeaderRowCount,this.gridColumns=this.secondaryColumns.slice(),this.gridColsArePrimary=!1,s&&(i=this.lastSecondaryOrder)}else this.primaryColumns&&(this.gridBalancedTree=this.primaryColumnTree.slice(),this.gridHeaderRowCount=this.primaryHeaderRowCount,this.gridColumns=this.primaryColumns.slice(),this.gridColsArePrimary=!0,i=this.lastPrimaryOrder);if(this.addAutoGroupToGridColumns(),this.orderGridColsLike(i),this.gridColumns=this.placeLockedColumns(this.gridColumns),this.calculateColumnsForGroupDisplay(),this.refreshQuickFilterColumns(),this.clearDisplayedAndViewportColumns(),this.colSpanActive=this.checkColSpanActiveInCols(this.gridColumns),this.gridColumnsMap={},this.gridColumns.forEach(s=>this.gridColumnsMap[s.getId()]=s),this.setAutoHeightActive(),!bs(e,this.gridBalancedTree)){const s={type:L.EVENT_GRID_COLUMNS_CHANGED};this.eventService.dispatchEvent(s)}}setAutoHeightActive(){this.autoHeightActive=this.gridColumns.filter(e=>e.isAutoHeight()).length>0,this.autoHeightActive&&(this.autoHeightActiveAtLeastOnce=!0,this.gridOptionsService.isRowModelType("clientSide")||this.gridOptionsService.isRowModelType("serverSide")||Ue("autoHeight columns only work with Client Side Row Model and Server Side Row Model."))}orderGridColsLike(e){if(Xe(e))return;const t=io(e.map((C,S)=>[C,S]));let i=!0;if(this.gridColumns.forEach(C=>{t.has(C)&&(i=!1)}),i)return;const s=io(this.gridColumns.map(C=>[C,!0])),n=e.filter(C=>s.has(C)),l=io(n.map(C=>[C,!0])),u=this.gridColumns.filter(C=>!l.has(C)),g=n.slice();u.forEach(C=>{let S=C.getOriginalParent();if(!S){g.push(C);return}const A=[];for(;!A.length&&S;)S.getLeafColumns().forEach(z=>{const U=g.indexOf(z)>=0,X=A.indexOf(z)<0;U&&X&&A.push(z)}),S=S.getOriginalParent();if(!A.length){g.push(C);return}const D=A.map(W=>g.indexOf(W)),M=Math.max(...D);yn(g,C,M+1)}),this.gridColumns=g}isPrimaryColumnGroupsPresent(){return this.primaryHeaderRowCount>1}refreshQuickFilterColumns(){var e;let t=(e=this.isPivotMode()?this.secondaryColumns:this.primaryColumns)!=null?e:[];this.groupAutoColumns&&(t=t.concat(this.groupAutoColumns)),this.columnsForQuickFilter=this.gridOptionsService.get("includeHiddenColumnsInQuickFilter")?t:t.filter(i=>i.isVisible()||i.isRowGroupActive())}placeLockedColumns(e){const t=[],i=[],s=[];return e.forEach(n=>{const l=n.getColDef().lockPosition;l==="right"?s.push(n):l==="left"||l===!0?t.push(n):i.push(n)}),[...t,...i,...s]}addAutoGroupToGridColumns(){if(Xe(this.groupAutoColumns)){this.destroyOldColumns(this.groupAutoColsBalancedTree),this.groupAutoColsBalancedTree=null;return}this.gridColumns=this.groupAutoColumns?this.groupAutoColumns.concat(this.gridColumns):this.gridColumns;const e=this.columnFactory.createForAutoGroups(this.groupAutoColumns,this.gridBalancedTree);this.destroyOldColumns(this.groupAutoColsBalancedTree,e),this.groupAutoColsBalancedTree=e,this.gridBalancedTree=e.concat(this.gridBalancedTree)}clearDisplayedAndViewportColumns(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={},this.displayedColumnsLeft=[],this.displayedColumnsRight=[],this.displayedColumnsCenter=[],this.displayedColumns=[],this.ariaOrderColumns=[],this.viewportColumns=[],this.headerViewportColumns=[],this.viewportColumnsHash=""}updateGroupsAndDisplayedColumns(e){this.updateOpenClosedVisibilityInColumnGroups(),this.deriveDisplayedColumns(e),this.refreshFlexedColumns(),this.extractViewport(),this.updateBodyWidths();const t={type:L.EVENT_DISPLAYED_COLUMNS_CHANGED};this.eventService.dispatchEvent(t)}deriveDisplayedColumns(e){this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeLeft,this.displayedColumnsLeft),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeCentre,this.displayedColumnsCenter),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeRight,this.displayedColumnsRight),this.joinColumnsAriaOrder(),this.joinDisplayedColumns(),this.setLeftValues(e),this.displayedAutoHeightCols=this.displayedColumns.filter(t=>t.isAutoHeight())}isAutoRowHeightActive(){return this.autoHeightActive}wasAutoRowHeightEverActive(){return this.autoHeightActiveAtLeastOnce}joinColumnsAriaOrder(){const e=this.getAllGridColumns(),t=[],i=[],s=[];for(const n of e){const l=n.getPinned();l?l===!0||l==="left"?t.push(n):s.push(n):i.push(n)}this.ariaOrderColumns=t.concat(i).concat(s)}joinDisplayedColumns(){this.gridOptionsService.get("enableRtl")?this.displayedColumns=this.displayedColumnsRight.concat(this.displayedColumnsCenter).concat(this.displayedColumnsLeft):this.displayedColumns=this.displayedColumnsLeft.concat(this.displayedColumnsCenter).concat(this.displayedColumnsRight)}setLeftValues(e){this.setLeftValuesOfColumns(e),this.setLeftValuesOfGroups()}setLeftValuesOfColumns(e){if(!this.primaryColumns)return;const t=this.getPrimaryAndSecondaryAndAutoColumns().slice(0),i=this.gridOptionsService.get("enableRtl");[this.displayedColumnsLeft,this.displayedColumnsRight,this.displayedColumnsCenter].forEach(s=>{if(i){let n=this.getWidthOfColsInList(s);s.forEach(l=>{n-=l.getActualWidth(),l.setLeft(n,e)})}else{let n=0;s.forEach(l=>{l.setLeft(n,e),n+=l.getActualWidth()})}Hu(t,s)}),t.forEach(s=>{s.setLeft(null,e)})}setLeftValuesOfGroups(){[this.displayedTreeLeft,this.displayedTreeRight,this.displayedTreeCentre].forEach(e=>{e.forEach(t=>{t instanceof ri&&t.checkLeft()})})}derivedDisplayedColumnsFromDisplayedTree(e,t){t.length=0,this.columnUtils.depthFirstDisplayedColumnTreeSearch(e,i=>{i instanceof Lt&&t.push(i)})}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||this.viewportRight===0}extractViewportColumns(){this.isColumnVirtualisationSuppressed()?(this.viewportColumnsCenter=this.displayedColumnsCenter,this.headerViewportColumnsCenter=this.displayedColumnsCenter):(this.viewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInRowViewport.bind(this)),this.headerViewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInHeaderViewport.bind(this))),this.viewportColumns=this.viewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight),this.headerViewportColumns=this.headerViewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight)}getVirtualHeaderGroupRow(e,t){let i;switch(e){case"left":i=this.viewportRowLeft[t];break;case"right":i=this.viewportRowRight[t];break;default:i=this.viewportRowCenter[t];break}return Xe(i)&&(i=[]),i}calculateHeaderRows(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={};const e={};this.headerViewportColumns.forEach(i=>e[i.getId()]=!0);const t=(i,s,n)=>{let l=!1;for(let u=0;u<i.length;u++){const g=i[u];let C=!1;if(g instanceof Lt)C=e[g.getId()]===!0;else{const A=g.getDisplayedChildren();A&&(C=t(A,s,n+1))}C&&(l=!0,s[n]||(s[n]=[]),s[n].push(g))}return l};t(this.displayedTreeLeft,this.viewportRowLeft,0),t(this.displayedTreeRight,this.viewportRowRight,0),t(this.displayedTreeCentre,this.viewportRowCenter,0)}extractViewport(){const e=s=>`${s.getId()}-${s.getPinned()||"normal"}`;this.extractViewportColumns();const t=this.viewportColumns.map(e).join("#"),i=this.viewportColumnsHash!==t;return i&&(this.viewportColumnsHash=t,this.calculateHeaderRows()),i}refreshFlexedColumns(e={}){var t;const i=e.source?e.source:"flex";if(e.viewportWidth!=null&&(this.flexViewportWidth=e.viewportWidth),!this.flexViewportWidth)return[];let s=-1;if(e.resizingCols){const M=new Set(e.resizingCols);let W=this.displayedColumnsCenter;for(let z=W.length-1;z>=0;z--)if(M.has(W[z])){s=z;break}}let n=0,l=[],u=0,g=0;for(let M=0;M<this.displayedColumnsCenter.length;M++)this.displayedColumnsCenter[M].getFlex()&&M>s?(l.push(this.displayedColumnsCenter[M]),g+=this.displayedColumnsCenter[M].getFlex(),u+=(t=this.displayedColumnsCenter[M].getMinWidth())!=null?t:0):n+=this.displayedColumnsCenter[M].getActualWidth();if(!l.length)return[];let C=[];n+u>this.flexViewportWidth&&(l.forEach(M=>{var W;return M.setActualWidth((W=M.getMinWidth())!=null?W:0,i)}),C=l,l=[]);const S=[];let A;e:for(;;){A=this.flexViewportWidth-n;const M=A/g;for(let W=0;W<l.length;W++){const z=l[W],U=M*z.getFlex();let X=0;const q=z.getMinWidth(),_=z.getMaxWidth();if(ce(q)&&U<q?X=q:ce(_)&&U>_&&(X=_),X){z.setActualWidth(X,i),hh(l,z),g-=z.getFlex(),C.push(z),n+=z.getActualWidth();continue e}S[W]=Math.round(U)}break}let D=A;return l.forEach((M,W)=>{M.setActualWidth(Math.min(S[W],D),i),C.push(M),D-=S[W]}),e.skipSetLeft||this.setLeftValues(i),e.updateBodyWidths&&this.updateBodyWidths(),e.fireResizedEvent&&this.dispatchColumnResizedEvent(C,!0,i,l),l}sizeColumnsToFit(e,t="sizeColumnsToFit",i,s){var n,l,u,g,C;if(this.shouldQueueResizeOperations){this.resizeOperationQueue.push(()=>this.sizeColumnsToFit(e,t,i,s));return}const S={};s&&((n=s?.columnLimits)==null||n.forEach(q=>{var _=q,{key:J}=_,se=mC(_,["key"]);S[typeof J=="string"?J:J.getColId()]=se}));const A=this.getAllDisplayedColumns(),D=e===this.getWidthOfColsInList(A);if(e<=0||!A.length||D)return;const M=[],W=[];A.forEach(q=>{q.getColDef().suppressSizeToFit===!0?W.push(q):M.push(q)});const z=M.slice(0);let U=!1;const X=q=>{Oi(M,q),W.push(q)};for(M.forEach(q=>{var _,J;q.resetActualWidth(t);const se=S?.[q.getId()],$=(_=se?.minWidth)!=null?_:s?.defaultMinWidth,Y=(J=se?.maxWidth)!=null?J:s?.defaultMaxWidth,oe=q.getActualWidth();typeof $=="number"&&oe<$?q.setActualWidth($,t,!0):typeof Y=="number"&&oe>Y&&q.setActualWidth(Y,t,!0)});!U;){U=!0;const q=e-this.getWidthOfColsInList(W);if(q<=0)M.forEach(_=>{var J,se;const $=(se=(J=S?.[_.getId()])==null?void 0:J.minWidth)!=null?se:s?.defaultMinWidth;if(typeof $=="number"){_.setActualWidth($,t,!0);return}_.setMinimum(t)});else{const _=q/this.getWidthOfColsInList(M);let J=q;for(let se=M.length-1;se>=0;se--){const $=M[se],Y=S?.[$.getId()],oe=(l=Y?.minWidth)!=null?l:s?.defaultMinWidth,Oe=(u=Y?.maxWidth)!=null?u:s?.defaultMaxWidth,re=(g=$.getMinWidth())!=null?g:0,Ve=(C=$.getMaxWidth())!=null?C:Number.MAX_VALUE,Pe=typeof oe=="number"&&oe>re?oe:$.getMinWidth(),He=typeof Oe=="number"&&Oe<Ve?Oe:$.getMaxWidth();let tt=Math.round($.getActualWidth()*_);ce(Pe)&&tt<Pe?(tt=Pe,X($),U=!1):ce(He)&&tt>He?(tt=He,X($),U=!1):se===0&&(tt=J),$.setActualWidth(tt,t,!0),J-=tt}}}z.forEach(q=>{q.fireColumnWidthChangedEvent(t)}),this.setLeftValues(t),this.updateBodyWidths(),!i&&this.dispatchColumnResizedEvent(z,!0,t)}buildDisplayedTrees(e){const t=[],i=[],s=[];e.forEach(l=>{switch(l.getPinned()){case"left":t.push(l);break;case"right":i.push(l);break;default:s.push(l);break}});const n=new ju;this.displayedTreeLeft=this.displayedGroupCreator.createDisplayedGroups(t,n,"left",this.displayedTreeLeft),this.displayedTreeRight=this.displayedGroupCreator.createDisplayedGroups(i,n,"right",this.displayedTreeRight),this.displayedTreeCentre=this.displayedGroupCreator.createDisplayedGroups(s,n,null,this.displayedTreeCentre),this.updateDisplayedMap()}updateDisplayedMap(){this.displayedColumnsAndGroupsMap={};const e=t=>{this.displayedColumnsAndGroupsMap[t.getUniqueId()]=t};this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeCentre,e),this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeLeft,e),this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeRight,e)}isDisplayed(e){return this.displayedColumnsAndGroupsMap[e.getUniqueId()]===e}updateOpenClosedVisibilityInColumnGroups(){const e=this.getAllDisplayedTrees();this.columnUtils.depthFirstAllColumnTreeSearch(e,t=>{t instanceof ri&&t.calculateDisplayedColumns()})}getGroupAutoColumns(){return this.groupAutoColumns}createGroupAutoColumnsIfNeeded(){const e=this.forceRecreateAutoGroups;if(this.forceRecreateAutoGroups=!1,!this.autoGroupsNeedBuilding)return!1;this.autoGroupsNeedBuilding=!1;const t=this.gridOptionsService.isGroupUseEntireRow(this.pivotMode),i=this.pivotMode?this.gridOptionsService.get("pivotSuppressAutoColumn"):this.isGroupSuppressAutoColumn();if((this.rowGroupColumns.length>0||this.gridOptionsService.get("treeData"))&&!i&&!t){const l=this.autoGroupColService.createAutoGroupColumns(this.rowGroupColumns);if(!this.autoColsEqual(l,this.groupAutoColumns)||e)return this.groupAutoColumns=l,!0}else this.groupAutoColumns=null;return!1}isGroupSuppressAutoColumn(){return this.gridOptionsService.get("groupDisplayType")==="custom"?!0:this.gridOptionsService.get("treeDataDisplayType")==="custom"}autoColsEqual(e,t){return bs(e,t,(i,s)=>i.getColId()===s.getColId())}getWidthOfColsInList(e){return e.reduce((t,i)=>t+i.getActualWidth(),0)}getFirstDisplayedColumn(){const e=this.gridOptionsService.get("enableRtl"),t=["getDisplayedLeftColumns","getDisplayedCenterColumns","getDisplayedRightColumns"];e&&t.reverse();for(let i=0;i<t.length;i++){const s=this[t[i]]();if(s.length)return e?yt(s):s[0]}return null}setColumnHeaderHeight(e,t){if(e.setAutoHeaderHeight(t)){const s={type:L.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,column:e,columns:[e],source:"autosizeColumnHeaderHeight"};this.eventService.dispatchEvent(s)}}getColumnGroupHeaderRowHeight(){return this.isPivotMode()?this.getPivotGroupHeaderHeight():this.getGroupHeaderHeight()}getColumnHeaderRowHeight(){const e=this.isPivotMode()?this.getPivotHeaderHeight():this.getHeaderHeight(),t=this.getAllDisplayedColumns().filter(i=>i.isAutoHeaderHeight()).map(i=>i.getAutoHeaderHeight()||0);return Math.max(e,...t)}getHeaderHeight(){var e;return(e=this.gridOptionsService.get("headerHeight"))!=null?e:this.environment.getFromTheme(25,"headerHeight")}getFloatingFiltersHeight(){var e;return(e=this.gridOptionsService.get("floatingFiltersHeight"))!=null?e:this.getHeaderHeight()}getGroupHeaderHeight(){var e;return(e=this.gridOptionsService.get("groupHeaderHeight"))!=null?e:this.getHeaderHeight()}getPivotHeaderHeight(){var e;return(e=this.gridOptionsService.get("pivotHeaderHeight"))!=null?e:this.getHeaderHeight()}getPivotGroupHeaderHeight(){var e;return(e=this.gridOptionsService.get("pivotGroupHeaderHeight"))!=null?e:this.getGroupHeaderHeight()}queueResizeOperations(){this.shouldQueueResizeOperations=!0}processResizeOperations(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach(e=>e()),this.resizeOperationQueue=[]}resetColumnDefIntoColumn(e,t){const i=e.getUserProvidedColDef();if(!i)return!1;const s=this.columnFactory.addColumnDefaultAndTypes(i,e.getColId());return e.setColDef(s,i,t),!0}isColumnGroupingLocked(e){const t=this.gridOptionsService.get("groupLockGroupColumns");if(!e.isRowGroupActive()||t===0)return!1;if(t===-1)return!0;const i=this.rowGroupColumns.findIndex(s=>s.getColId()===e.getColId());return t>i}generateColumnStateForRowGroupAndPivotIndexes(e,t){let i={};const s=(n,l,u,g,C,S)=>{if(!l.length||!this.primaryColumns)return[];const A=Object.keys(n),D=new Set(A),M=new Set(A),W=new Set(l.map($=>{const Y=$.getColId();return M.delete(Y),Y}).concat(A)),z=[],U={};let X=0;for(let $=0;$<this.primaryColumns.length;$++){const Y=this.primaryColumns[$].getColId();W.has(Y)&&(z.push(Y),U[Y]=X++)}let q=1e3,_=!1,J=0;const se=$=>{const Y=U[$];for(let oe=J;oe<Y;oe++){const Oe=z[oe];M.has(Oe)&&(n[Oe][C]=q++,M.delete(Oe))}J=Y};l.forEach($=>{const Y=$.getColId();if(D.has(Y))se(Y),n[Y][C]=q++;else{const oe=$.getColDef();(oe[C]===null||oe[C]===void 0&&oe[S]==null)&&(_||(oe[u]||oe[u]===void 0&&oe[g]?se(Y):(M.forEach(Ve=>{n[Ve][C]=q+U[Ve]}),q+=z.length,_=!0)),i[Y]||(i[Y]={colId:Y}),i[Y][C]=q++)}})};return s(e,this.rowGroupColumns,"rowGroup","initialRowGroup","rowGroupIndex","initialRowGroupIndex"),s(t,this.pivotColumns,"pivot","initialPivot","pivotIndex","initialPivotIndex"),Object.values(i)}onColumnsReady(){const e=this.gridOptionsService.get("autoSizeStrategy");if(!e)return;const{type:t}=e;setTimeout(()=>{if(t==="fitGridWidth"){const{columnLimits:i,defaultMinWidth:s,defaultMaxWidth:n}=e,l=i?.map(({colId:u,minWidth:g,maxWidth:C})=>({key:u,minWidth:g,maxWidth:C}));this.ctrlsService.getGridBodyCtrl().sizeColumnsToFit({defaultMinWidth:s,defaultMaxWidth:n,columnLimits:l})}else t==="fitProvidedWidth"&&this.sizeColumnsToFit(e.width,"sizeColumnsToFit")})}onFirstDataRendered(){const e=this.gridOptionsService.get("autoSizeStrategy");if(e?.type!=="fitCellContents")return;const{colIds:t,skipHeader:i}=e;setTimeout(()=>{t?this.autoSizeColumns({columns:t,skipHeader:i,source:"autosizeColumns"}):this.autoSizeAllColumns("autosizeColumns",i)})}};E([N("expressionService")],di.prototype,"expressionService",2);E([N("columnFactory")],di.prototype,"columnFactory",2);E([N("displayedGroupCreator")],di.prototype,"displayedGroupCreator",2);E([N("ctrlsService")],di.prototype,"ctrlsService",2);E([N("autoWidthCalculator")],di.prototype,"autoWidthCalculator",2);E([N("columnUtils")],di.prototype,"columnUtils",2);E([N("columnAnimationService")],di.prototype,"columnAnimationService",2);E([N("autoGroupColService")],di.prototype,"autoGroupColService",2);E([mt("aggFuncService")],di.prototype,"aggFuncService",2);E([mt("valueCache")],di.prototype,"valueCache",2);E([mt("animationFrameService")],di.prototype,"animationFrameService",2);E([N("sortController")],di.prototype,"sortController",2);E([N("columnDefFactory")],di.prototype,"columnDefFactory",2);E([Ce],di.prototype,"init",1);E([Di],di.prototype,"destroyColumns",1);E([ds(0,Qi("loggerFactory"))],di.prototype,"setBeans",1);di=E([Fe("columnModel")],di);function ur(e){return e==="gridOptionsUpdated"?"gridOptionsChanged":e}var Rd=class extends ge{calculateColMinWidth(e){return e.minWidth!=null?e.minWidth:this.environment.getMinColWidth()}calculateColMaxWidth(e){return e.maxWidth!=null?e.maxWidth:Number.MAX_SAFE_INTEGER}calculateColInitialWidth(e){const t=this.calculateColMinWidth(e),i=this.calculateColMaxWidth(e);let s;const n=ro(e.width),l=ro(e.initialWidth);return n!=null?s=n:l!=null?s=l:s=200,Math.max(Math.min(s,i),t)}getOriginalPathForColumn(e,t){const i=[];let s=!1;const n=(l,u)=>{for(let g=0;g<l.length;g++){if(s)return;const C=l[g];C instanceof Qt?(n(C.getChildren(),u+1),i[u]=C):C===e&&(s=!0)}};return n(t,0),s?i:null}depthFirstOriginalTreeSearch(e,t,i){!t||t.forEach(s=>{s instanceof Qt&&this.depthFirstOriginalTreeSearch(s,s.getChildren(),i),i(s,e)})}depthFirstAllColumnTreeSearch(e,t){!e||e.forEach(i=>{i instanceof ri&&this.depthFirstAllColumnTreeSearch(i.getChildren(),t),t(i)})}depthFirstDisplayedColumnTreeSearch(e,t){!e||e.forEach(i=>{i instanceof ri&&this.depthFirstDisplayedColumnTreeSearch(i.getDisplayedChildren(),t),t(i)})}};Rd=E([Fe("columnUtils")],Rd);var Dd=class extends ge{createDisplayedGroups(e,t,i,s){const n=this.mapOldGroupsById(s),l=[];let u=e;for(;u.length;){const g=u;u=[];let C=0;const S=A=>{const D=C;C=A;const M=g[D],z=(M instanceof ri?M.getProvidedColumnGroup():M).getOriginalParent();if(z==null){for(let X=D;X<A;X++)l.push(g[X]);return}const U=this.createColumnGroup(z,t,n,i);for(let X=D;X<A;X++)U.addChild(g[X]);u.push(U)};for(let A=1;A<g.length;A++){const D=g[A],W=(D instanceof ri?D.getProvidedColumnGroup():D).getOriginalParent(),z=g[C],X=(z instanceof ri?z.getProvidedColumnGroup():z).getOriginalParent();W!==X&&S(A)}C<g.length&&S(g.length)}return this.setupParentsIntoColumns(l,null),l}createColumnGroup(e,t,i,s){const n=e.getGroupId(),l=t.getInstanceIdForKey(n),u=ri.createUniqueId(n,l);let g=i[u];return g&&g.getProvidedColumnGroup()!==e&&(g=null),ce(g)?g.reset():(g=new ri(e,n,l,s),this.context.createBean(g)),g}mapOldGroupsById(e){const t={},i=s=>{s.forEach(n=>{if(n instanceof ri){const l=n;t[n.getUniqueId()]=l,i(l.getChildren())}})};return e&&i(e),t}setupParentsIntoColumns(e,t){e.forEach(i=>{if(i.setParent(t),i instanceof ri){const s=i;this.setupParentsIntoColumns(s.getChildren(),s)}})}};Dd=E([Fe("displayedGroupCreator")],Dd);var GC={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,excludeHiddenColumnsFromQuickFilter:!0,advancedFilterModel:!0,customChartThemes:!0,chartThemeOverrides:!0,enableChartToolPanelsButton:!0,suppressChartToolPanelsButton:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressParentsInRowNodes:!0,suppressTouch:!0,suppressAsyncEvents:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,suppressAggFuncInHeader:!0,suppressAggAtRootLevel:!0,removePivotHeaderRowWhenSingleValueColumn:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,suppressGroupMaintainValueType:!0,groupLockGroupColumns:!0,rowGroupPanelSuppressSort:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,suppressServerSideInfiniteScroll:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,functionsPassive:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,columnMenu:!0},ci=class{};ci.STRING_PROPERTIES=["rowSelection","overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode"];ci.OBJECT_PROPERTIES=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","statusBar","sideBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterModel","advancedFilterParent","advancedFilterBuilderParams","initialState","autoSizeStrategy"];ci.ARRAY_PROPERTIES=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"];ci.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns"];ci.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupIncludeTotalFooter","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressParentsInRowNodes","suppressColumnMoveAnimation","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressAggAtRootLevel","suppressFocusAfterRefresh","functionsPassive","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","excludeHiddenColumnsFromQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterMovesDown","enterMovesDownAfterEdit","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","enableChartToolPanelsButton","suppressChartToolPanelsButton","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideFilterAllLevels","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","serverSideSortOnServer","serverSideFilterOnServer","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","maintainColumnOrder","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","suppressServerSideInfiniteScroll","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","suppressGroupMaintainValueType","reactiveCustomComponents"];ci.FUNCTIONAL_PROPERTIES=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher"];ci.CALLBACK_PROPERTIES=["getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","groupIncludeFooter","loadingCellRendererSelector","getRowId","groupAggFiltering","chartMenuItems"];ci.FUNCTION_PROPERTIES=[...ci.FUNCTIONAL_PROPERTIES,...ci.CALLBACK_PROPERTIES];ci.ALL_PROPERTIES=[...ci.ARRAY_PROPERTIES,...ci.OBJECT_PROPERTIES,...ci.STRING_PROPERTIES,...ci.NUMBER_PROPERTIES,...ci.FUNCTION_PROPERTIES,...ci.BOOLEAN_PROPERTIES];var Ds=ci,Zt=class Aa{static getCallbackForEvent(t){return!t||t.length<2?t:"on"+t[0].toUpperCase()+t.substring(1)}static getGridOptionKeys(){return this.ALL_PROPERTIES_AND_CALLBACKS}static combineAttributesAndGridOptions(t,i){typeof t!="object"&&(t={});const s=We({},t);return Aa.getGridOptionKeys().forEach(l=>{const u=i[l];typeof u<"u"&&u!==Aa.VUE_OMITTED_PROPERTY&&(s[l]=u)}),s}static processOnChange(t,i){if(!t)return;const s={};let n=!1;if(Object.keys(t).filter(u=>Aa.ALL_PROPERTIES_AND_CALLBACKS_SET.has(u)).forEach(u=>{s[u]=t[u],n=!0}),!n)return;i.__internalUpdateGridOptions(s);const l={type:L.EVENT_COMPONENT_STATE_CHANGED};bi(s,(u,g)=>{l[u]=g}),i.dispatchEvent(l)}};Zt.EVENTS=Ao(L);Zt.VUE_OMITTED_PROPERTY="AG-VUE-OMITTED-PROPERTY";Zt.EXCLUDED_INTERNAL_EVENTS=[L.EVENT_SCROLLBAR_WIDTH_CHANGED,L.EVENT_CHECKBOX_CHANGED,L.EVENT_HEIGHT_SCALE_CHANGED,L.EVENT_BODY_HEIGHT_CHANGED,L.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED,L.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,L.EVENT_SCROLL_VISIBILITY_CHANGED,L.EVENT_COLUMN_HOVER_CHANGED,L.EVENT_FLASH_CELLS,L.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,L.EVENT_DISPLAYED_ROWS_CHANGED,L.EVENT_LEFT_PINNED_WIDTH_CHANGED,L.EVENT_RIGHT_PINNED_WIDTH_CHANGED,L.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,L.EVENT_STORE_UPDATED,L.EVENT_COLUMN_PANEL_ITEM_DRAG_START,L.EVENT_COLUMN_PANEL_ITEM_DRAG_END,L.EVENT_FILL_START,L.EVENT_FILL_END,L.EVENT_KEY_SHORTCUT_CHANGED_CELL_START,L.EVENT_KEY_SHORTCUT_CHANGED_CELL_END,L.EVENT_FULL_WIDTH_ROW_FOCUSED,L.EVENT_HEADER_HEIGHT_CHANGED,L.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,L.EVENT_CELL_FOCUS_CLEARED,L.EVENT_GRID_STYLES_CHANGED,L.EVENT_FILTER_DESTROYED,L.EVENT_ROW_DATA_UPDATE_STARTED,L.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,L.EVENT_DATA_TYPES_INFERRED,L.EVENT_FIELD_VALUE_CHANGED,L.EVENT_FIELD_PICKER_VALUE_SELECTED,L.EVENT_SUPPRESS_COLUMN_MOVE_CHANGED,L.EVENT_SUPPRESS_MENU_HIDE_CHANGED,L.EVENT_SUPPRESS_FIELD_DOT_NOTATION,L.EVENT_ROW_COUNT_READY,L.EVENT_SIDE_BAR_UPDATED];Zt.PUBLIC_EVENTS=Zt.EVENTS.filter(e=>!zi(Zt.EXCLUDED_INTERNAL_EVENTS,e));Zt.EVENT_CALLBACKS=Zt.EVENTS.map(e=>Zt.getCallbackForEvent(e));Zt.STRING_PROPERTIES=Ds.STRING_PROPERTIES;Zt.OBJECT_PROPERTIES=Ds.OBJECT_PROPERTIES;Zt.ARRAY_PROPERTIES=Ds.ARRAY_PROPERTIES;Zt.NUMBER_PROPERTIES=Ds.NUMBER_PROPERTIES;Zt.BOOLEAN_PROPERTIES=Ds.BOOLEAN_PROPERTIES;Zt.FUNCTION_PROPERTIES=Ds.FUNCTION_PROPERTIES;Zt.ALL_PROPERTIES=Ds.ALL_PROPERTIES;Zt.ALL_PROPERTIES_AND_CALLBACKS=[...Zt.ALL_PROPERTIES,...Zt.EVENT_CALLBACKS];Zt.ALL_PROPERTIES_AND_CALLBACKS_SET=new Set(Zt.ALL_PROPERTIES_AND_CALLBACKS);var qi=Zt,Td=class extends ge{constructor(){super(...arguments),this.componentsMappedByName={}}setupComponents(e){e&&e.forEach(t=>this.addComponent(t))}addComponent(e){const i=e.componentName.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase().toUpperCase();this.componentsMappedByName[i]=e.componentClass}getComponentClass(e){return this.componentsMappedByName[e]}};Td=E([Fe("agStackComponentsRegistry")],Td);var Ju={};fi(Ju,{getAriaCheckboxStateName:()=>hl,getAriaLabel:()=>sp,getAriaLevel:()=>_C,getAriaPosInSet:()=>ip,getAriaSortState:()=>tp,removeAriaExpanded:()=>ap,removeAriaSort:()=>pp,setAriaActiveDescendant:()=>fh,setAriaAtomic:()=>op,setAriaChecked:()=>HC,setAriaColCount:()=>hp,setAriaColIndex:()=>vh,setAriaColSpan:()=>cp,setAriaControls:()=>Ch,setAriaDescribedBy:()=>VC,setAriaDisabled:()=>gh,setAriaExpanded:()=>Hs,setAriaHidden:()=>Xn,setAriaLabel:()=>fs,setAriaLabelledBy:()=>Ha,setAriaLevel:()=>np,setAriaLive:()=>ph,setAriaMultiSelectable:()=>lp,setAriaPosInSet:()=>dl,setAriaRelevant:()=>rp,setAriaRole:()=>jt,setAriaRowCount:()=>dp,setAriaRowIndex:()=>mh,setAriaSelected:()=>xr,setAriaSetSize:()=>ll,setAriaSort:()=>up});function ss(e,t,i){i==null||typeof i=="string"&&i==""?uh(e,t):os(e,t,i)}function os(e,t,i){e.setAttribute(ep(t),i.toString())}function uh(e,t){e.removeAttribute(ep(t))}function ep(e){return`aria-${e}`}function jt(e,t){t?e.setAttribute("role",t):e.removeAttribute("role")}function tp(e){let t;return e==="asc"?t="ascending":e==="desc"?t="descending":e==="mixed"?t="other":t="none",t}function _C(e){return parseInt(e.getAttribute("aria-level"),10)}function ip(e){return parseInt(e.getAttribute("aria-posinset"),10)}function sp(e){return e.getAttribute("aria-label")}function fs(e,t){ss(e,"label",t)}function Ha(e,t){ss(e,"labelledby",t)}function VC(e,t){ss(e,"describedby",t)}function ph(e,t){ss(e,"live",t)}function op(e,t){ss(e,"atomic",t)}function rp(e,t){ss(e,"relevant",t)}function np(e,t){ss(e,"level",t)}function gh(e,t){ss(e,"disabled",t)}function Xn(e,t){ss(e,"hidden",t)}function fh(e,t){ss(e,"activedescendant",t)}function Hs(e,t){os(e,"expanded",t)}function ap(e){uh(e,"expanded")}function ll(e,t){os(e,"setsize",t)}function dl(e,t){os(e,"posinset",t)}function lp(e,t){os(e,"multiselectable",t)}function dp(e,t){os(e,"rowcount",t)}function mh(e,t){os(e,"rowindex",t)}function hp(e,t){os(e,"colcount",t)}function vh(e,t){os(e,"colindex",t)}function cp(e,t){os(e,"colspan",t)}function up(e,t){os(e,"sort",t)}function pp(e){uh(e,"sort")}function xr(e,t){ss(e,"selected",t)}function HC(e,t){os(e,"checked",t===void 0?"mixed":t)}function Ch(e,t){ss(e,"controls",t.id),Ha(t,e.id)}function hl(e,t){return t===void 0?e("ariaIndeterminate","indeterminate"):t===!0?e("ariaChecked","checked"):e("ariaUnchecked","unchecked")}var gp={};fi(gp,{browserSupportsPreventScroll:()=>xh,getBodyHeight:()=>vp,getBodyWidth:()=>mp,getMaxDivHeight:()=>fp,getSafariVersion:()=>yh,getScrollbarWidth:()=>Cp,getTabIndex:()=>Ba,isBrowserChrome:()=>cl,isBrowserFirefox:()=>bh,isBrowserSafari:()=>Ts,isIOSUserAgent:()=>Xs,isInvisibleScrollbar:()=>Sh,isMacOsUserAgent:()=>wh});var jl,ba,Kl,ql,Ql,Zl,Pd,Fd;function Ts(){return jl===void 0&&(jl=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),jl}function yh(){if(ba===void 0)if(Ts()){const e=navigator.userAgent.match(/version\/(\d+)/i);e&&(ba=e[1]!=null?parseFloat(e[1]):0)}else ba=0;return ba}function cl(){if(Kl===void 0){const e=window;Kl=!!e.chrome&&(!!e.chrome.webstore||!!e.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return Kl}function bh(){return ql===void 0&&(ql=/(firefox)/i.test(navigator.userAgent)),ql}function wh(){return Ql===void 0&&(Ql=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),Ql}function Xs(){return Zl===void 0&&(Zl=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),Zl}function xh(){return!Ts()||yh()>=15}function Ba(e){if(!e)return null;const t=e.tabIndex,i=e.getAttribute("tabIndex");return t===-1&&(i===null||i===""&&!bh())?null:t.toString()}function fp(){if(!document.body)return-1;let e=1e6;const t=navigator.userAgent.toLowerCase().match(/firefox/)?6e6:1e9,i=document.createElement("div");for(document.body.appendChild(i);;){const s=e*2;if(i.style.height=s+"px",s>t||i.clientHeight!==s)break;e=s}return document.body.removeChild(i),e}function mp(){var e,t,i;return(i=(e=document.body)==null?void 0:e.clientWidth)!=null?i:window.innerHeight||((t=document.documentElement)==null?void 0:t.clientWidth)||-1}function vp(){var e,t,i;return(i=(e=document.body)==null?void 0:e.clientHeight)!=null?i:window.innerHeight||((t=document.documentElement)==null?void 0:t.clientHeight)||-1}function Cp(){return Fd==null&&yp(),Fd}function yp(){const e=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",e.appendChild(t);let i=t.offsetWidth-t.clientWidth;i===0&&t.clientWidth===0&&(i=null),t.parentNode&&t.parentNode.removeChild(t),i!=null&&(Fd=i,Pd=i===0)}function Sh(){return Pd==null&&yp(),Pd}var bp={};fi(bp,{dateToFormattedString:()=>Cr,parseDateTimeFromString:()=>ki,serialiseDate:()=>Zi});var wp={};fi(wp,{cleanNumber:()=>BC,createArrayOfNumbers:()=>xp,decToHex:()=>WC,formatNumberCommas:()=>Eh,formatNumberTwoDecimalPlacesAndCommas:()=>zC,padStartWidthZeros:()=>vr,sum:()=>UC});function vr(e,t){return e.toString().padStart(t,"0")}function xp(e,t){const i=[];for(let s=e;s<=t;s++)i.push(s);return i}function BC(e){return typeof e=="string"&&(e=parseInt(e,10)),typeof e=="number"?Math.floor(e):null}function WC(e,t){let i="";for(let s=0;s<t;s++)i+=String.fromCharCode(e&255),e>>>=8;return i}function zC(e,t,i){return typeof e!="number"?"":Eh(Math.round(e*100)/100,t,i)}function Eh(e,t,i){return typeof e!="number"?"":e.toString().replace(".",i).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${t}`)}function UC(e){return e==null?null:e.reduce((t,i)=>t+i,0)}function Zi(e,t=!0,i="-"){if(!e)return null;let s=[e.getFullYear(),e.getMonth()+1,e.getDate()].map(n=>vr(n,2)).join(i);return t&&(s+=" "+[e.getHours(),e.getMinutes(),e.getSeconds()].map(n=>vr(n,2)).join(":")),s}var Jl=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};function Cr(e,t="YYYY-MM-DD"){const i=vr(e.getFullYear(),4),s=["January","February","March","April","May","June","July","August","September","October","November","December"],n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],l={YYYY:()=>i.slice(i.length-4,i.length),YY:()=>i.slice(i.length-2,i.length),Y:()=>`${e.getFullYear()}`,MMMM:()=>s[e.getMonth()],MMM:()=>s[e.getMonth()].slice(0,3),MM:()=>vr(e.getMonth()+1,2),Mo:()=>`${e.getMonth()+1}${Jl(e.getMonth()+1)}`,M:()=>`${e.getMonth()+1}`,Do:()=>`${e.getDate()}${Jl(e.getDate())}`,DD:()=>vr(e.getDate(),2),D:()=>`${e.getDate()}`,dddd:()=>n[e.getDay()],ddd:()=>n[e.getDay()].slice(0,3),dd:()=>n[e.getDay()].slice(0,2),do:()=>`${e.getDay()}${Jl(e.getDay())}`,d:()=>`${e.getDay()}`},u=new RegExp(Object.keys(l).join("|"),"g");return t.replace(u,g=>g in l?l[g]():g)}function ki(e){if(!e)return null;const[t,i]=e.split(" ");if(!t)return null;const s=t.split("-").map(D=>parseInt(D,10));if(s.filter(D=>!isNaN(D)).length!==3)return null;const[n,l,u]=s,g=new Date(n,l-1,u);if(g.getFullYear()!==n||g.getMonth()!==l-1||g.getDate()!==u)return null;if(!i||i==="00:00:00")return g;const[C,S,A]=i.split(":").map(D=>parseInt(D,10));return C>=0&&C<24&&g.setHours(C),S>=0&&S<60&&g.setMinutes(S),A>=0&&A<60&&g.setSeconds(A),g}var Sp={};fi(Sp,{FOCUSABLE_EXCLUDE:()=>Ah,FOCUSABLE_SELECTOR:()=>Ep,addOrRemoveAttribute:()=>Ss,addStylesToElement:()=>Mh,bindCellRendererToHtmlElement:()=>Oh,clearElement:()=>Jt,copyNodeList:()=>Pp,ensureDomOrder:()=>Fh,formatSize:()=>ul,getAbsoluteHeight:()=>Dh,getAbsoluteWidth:()=>wn,getElementRectWithOffset:()=>Th,getElementSize:()=>po,getInnerHeight:()=>$n,getInnerWidth:()=>zo,getScrollLeft:()=>Sn,insertWithDomOrder:()=>Rp,isElementChildOfClass:()=>Do,isFocusableFormField:()=>Rh,isHorizontalScrollShowing:()=>Dp,isInDOM:()=>Ph,isNodeOrElement:()=>jn,isRtlNegativeScroll:()=>xn,isVerticalScrollShowing:()=>Tp,isVisible:()=>Ui,iterateNamedNodeMap:()=>Fp,loadTemplate:()=>Ni,nodeListForEach:()=>Ih,radioCssClass:()=>Ld,removeFromParent:()=>hs,setDisabled:()=>Sr,setDisplayed:()=>lt,setDomChildOrder:()=>Lh,setElementHeight:()=>YC,setElementWidth:()=>An,setFixedHeight:()=>To,setFixedWidth:()=>Ji,setScrollLeft:()=>En,setVisible:()=>Ap});var wa;function Ld(e,t,i){const s=e.parentElement;let n=s&&s.firstChild;for(;n;)t&&n.classList.toggle(t,n===e),i&&n.classList.toggle(i,n!==e),n=n.nextSibling}var Ep="[tabindex], input, select, button, textarea, [href]",Ah="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function Rh(e){const t=Element.prototype.matches||Element.prototype.msMatchesSelector,i="input, select, button, textarea",s=t.call(e,i),n=t.call(e,Ah),l=Ui(e);return s&&!n&&l}function lt(e,t,i={}){const{skipAriaHidden:s}=i;e.classList.toggle("ag-hidden",!t),s||Xn(e,!t)}function Ap(e,t,i={}){const{skipAriaHidden:s}=i;e.classList.toggle("ag-invisible",!t),s||Xn(e,!t)}function Sr(e,t){const i="disabled",s=t?n=>n.setAttribute(i,""):n=>n.removeAttribute(i);s(e),Ih(e.querySelectorAll("input"),n=>s(n))}function Do(e,t,i){let s=0;for(;e;){if(e.classList.contains(t))return!0;if(e=e.parentElement,typeof i=="number"){if(++s>i)break}else if(e===i)break}return!1}function po(e){const{height:t,width:i,borderTopWidth:s,borderRightWidth:n,borderBottomWidth:l,borderLeftWidth:u,paddingTop:g,paddingRight:C,paddingBottom:S,paddingLeft:A,marginTop:D,marginRight:M,marginBottom:W,marginLeft:z,boxSizing:U}=window.getComputedStyle(e);return{height:parseFloat(t||"0"),width:parseFloat(i||"0"),borderTopWidth:parseFloat(s||"0"),borderRightWidth:parseFloat(n||"0"),borderBottomWidth:parseFloat(l||"0"),borderLeftWidth:parseFloat(u||"0"),paddingTop:parseFloat(g||"0"),paddingRight:parseFloat(C||"0"),paddingBottom:parseFloat(S||"0"),paddingLeft:parseFloat(A||"0"),marginTop:parseFloat(D||"0"),marginRight:parseFloat(M||"0"),marginBottom:parseFloat(W||"0"),marginLeft:parseFloat(z||"0"),boxSizing:U}}function $n(e){const t=po(e);return t.boxSizing==="border-box"?t.height-t.paddingTop-t.paddingBottom:t.height}function zo(e){const t=po(e);return t.boxSizing==="border-box"?t.width-t.paddingLeft-t.paddingRight:t.width}function Dh(e){const t=po(e),i=t.marginBottom+t.marginTop;return Math.ceil(e.offsetHeight+i)}function wn(e){const t=po(e),i=t.marginLeft+t.marginRight;return Math.ceil(e.offsetWidth+i)}function Th(e){const t=e.getBoundingClientRect(),{borderTopWidth:i,borderLeftWidth:s,borderRightWidth:n,borderBottomWidth:l}=po(e);return{top:t.top+(i||0),left:t.left+(s||0),right:t.right+(n||0),bottom:t.bottom+(l||0)}}function xn(){if(typeof wa=="boolean")return wa;const e=document.createElement("div");return e.style.direction="rtl",e.style.width="1px",e.style.height="1px",e.style.position="fixed",e.style.top="0px",e.style.overflow="hidden",e.dir="rtl",e.innerHTML=`<div style="width: 2px">
            <span style="display: inline-block; width: 1px"></span>
            <span style="display: inline-block; width: 1px"></span>
        </div>`,document.body.appendChild(e),e.scrollLeft=1,wa=Math.floor(e.scrollLeft)===0,document.body.removeChild(e),wa}function Sn(e,t){let i=e.scrollLeft;return t&&(i=Math.abs(i),cl()&&!xn()&&(i=e.scrollWidth-e.clientWidth-i)),i}function En(e,t,i){i&&(xn()?t*=-1:(Ts()||cl())&&(t=e.scrollWidth-e.clientWidth-t)),e.scrollLeft=t}function Jt(e){for(;e&&e.firstChild;)e.removeChild(e.firstChild)}function hs(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Ph(e){return!!e.offsetParent}function Ui(e){const t=e;return t.checkVisibility?t.checkVisibility({checkVisibilityCSS:!0}):!(!Ph(e)||window.getComputedStyle(e).visibility!=="visible")}function Ni(e){const t=document.createElement("div");return t.innerHTML=(e||"").trim(),t.firstChild}function Fh(e,t,i){i&&i.nextSibling===t||(i?i.nextSibling?e.insertBefore(t,i.nextSibling):e.appendChild(t):e.firstChild&&e.firstChild!==t&&e.insertAdjacentElement("afterbegin",t))}function Lh(e,t){for(let i=0;i<t.length;i++){const s=t[i],n=e.children[i];n!==s&&e.insertBefore(s,n)}}function Rp(e,t,i){i?i.insertAdjacentElement("afterend",t):e.firstChild?e.insertAdjacentElement("afterbegin",t):e.appendChild(t)}function Mh(e,t){if(!!t)for(const[i,s]of Object.entries(t)){if(!i||!i.length||s==null)continue;const n=Qu(i),l=s.toString(),u=l.replace(/\s*!important/g,""),g=u.length!=l.length?"important":void 0;e.style.setProperty(n,u,g)}}function Dp(e){return e.clientWidth<e.scrollWidth}function Tp(e){return e.clientHeight<e.scrollHeight}function An(e,t){t==="flex"?(e.style.removeProperty("width"),e.style.removeProperty("minWidth"),e.style.removeProperty("maxWidth"),e.style.flex="1 1 auto"):Ji(e,t)}function Ji(e,t){t=ul(t),e.style.width=t.toString(),e.style.maxWidth=t.toString(),e.style.minWidth=t.toString()}function YC(e,t){t==="flex"?(e.style.removeProperty("height"),e.style.removeProperty("minHeight"),e.style.removeProperty("maxHeight"),e.style.flex="1 1 auto"):To(e,t)}function To(e,t){t=ul(t),e.style.height=t.toString(),e.style.maxHeight=t.toString(),e.style.minHeight=t.toString()}function ul(e){return typeof e=="number"?`${e}px`:e}function jn(e){return e instanceof Node||e instanceof HTMLElement}function Pp(e){if(e==null)return[];const t=[];return Ih(e,i=>t.push(i)),t}function Fp(e,t){if(!!e)for(let i=0;i<e.length;i++){const s=e[i];t(s.name,s.value)}}function Ss(e,t,i){i==null?e.removeAttribute(t):e.setAttribute(t,i.toString())}function Ih(e,t){if(e!=null)for(let i=0;i<e.length;i++)t(e[i])}function Oh(e,t){e.then(i=>{const s=i.getGui();s!=null&&(typeof s=="object"?t.appendChild(s):t.innerHTML=s)})}var Lp={};fi(Lp,{fuzzyCheckStrings:()=>Mp,fuzzySuggestions:()=>Kn});function Mp(e,t,i){const s={},n=e.filter(l=>!t.some(u=>u===l));return n.length>0&&n.forEach(l=>s[l]=Kn(l,i).values),s}function Kn(e,t,i,s){let n=t.map((g,C)=>({value:g,relevance:XC(e.toLowerCase(),g.toLocaleLowerCase()),idx:C}));if(n.sort((g,C)=>C.relevance-g.relevance),i&&(n=n.filter(g=>g.relevance!==0)),n.length>0&&s&&s>0){const C=n[0].relevance*s;n=n.filter(S=>C-S.relevance<0)}const l=[],u=[];for(const g of n)l.push(g.value),u.push(g.idx);return{values:l,indices:u}}function XC(e,t){const i=e.replace(/\s/g,""),s=t.replace(/\s/g,"");let n=0,l=-1;for(let u=0;u<i.length;u++){const g=s.indexOf(i[u],l+1);g!==-1&&(l=g,n+=100-l*100/1e4*100)}return n}var Ip={};fi(Ip,{createIcon:()=>Ki,createIconNoSpan:()=>Wt,iconNameClassMap:()=>Op});var Op={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",setFilterGroupClosed:"tree-closed",setFilterGroupOpen:"tree-open",setFilterGroupIndeterminate:"tree-indeterminate",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",menuAlt:"menu-alt",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none",advancedFilterBuilder:"group",advancedFilterBuilderDrag:"grip",advancedFilterBuilderInvalid:"not-allowed",advancedFilterBuilderMoveUp:"up",advancedFilterBuilderMoveDown:"down",advancedFilterBuilderAdd:"plus",advancedFilterBuilderRemove:"minus",chartsMenuEdit:"chart",chartsMenuAdvancedSettings:"settings",chartsMenuAdd:"plus"};function Ki(e,t,i){const s=Wt(e,t,i);if(s){const{className:l}=s;if(typeof l=="string"&&l.indexOf("ag-icon")>-1||typeof l=="object"&&l["ag-icon"])return s}const n=document.createElement("span");return n.appendChild(s),n}function Wt(e,t,i,s){let n=null;const l=i&&i.getColDef().icons;if(l&&(n=l[e]),t&&!n){const u=t.get("icons");u&&(n=u[e])}if(n){let u;if(typeof n=="function")u=n();else if(typeof n=="string")u=n;else throw new Error("icon from grid options needs to be a string or a function");if(typeof u=="string")return Ni(u);if(jn(u))return u;console.warn("AG Grid: iconRenderer should return back a string or a dom object")}else{const u=document.createElement("span");let g=Op[e];return g||(s?g=e:(console.warn(`AG Grid: Did not find icon ${e}`),g="")),u.setAttribute("class",`ag-icon ag-icon-${g}`),u.setAttribute("unselectable","on"),jt(u,"presentation"),u}}var kp={};fi(kp,{isDeleteKey:()=>_p,isEventFromPrintableCharacter:()=>pl,isUserSuppressingHeaderKeyboardEvent:()=>Np,isUserSuppressingKeyboardEvent:()=>Wa,normaliseQwertyAzerty:()=>Gp});var Q=class{};Q.BACKSPACE="Backspace";Q.TAB="Tab";Q.ENTER="Enter";Q.ESCAPE="Escape";Q.SPACE=" ";Q.LEFT="ArrowLeft";Q.UP="ArrowUp";Q.RIGHT="ArrowRight";Q.DOWN="ArrowDown";Q.DELETE="Delete";Q.F2="F2";Q.PAGE_UP="PageUp";Q.PAGE_DOWN="PageDown";Q.PAGE_HOME="Home";Q.PAGE_END="End";Q.A="KeyA";Q.C="KeyC";Q.D="KeyD";Q.V="KeyV";Q.X="KeyX";Q.Y="KeyY";Q.Z="KeyZ";var $C=65,jC=67,KC=86,qC=68,QC=90,ZC=89;function pl(e){return e.altKey||e.ctrlKey||e.metaKey?!1:e.key.length===1}function Wa(e,t,i,s,n){const l=s?s.getColDef().suppressKeyboardEvent:void 0;if(!l)return!1;const u=e.addGridCommonParams({event:t,editing:n,column:s,node:i,data:i.data,colDef:s.getColDef()});return!!(l&&l(u))}function Np(e,t,i,s){const n=s.getDefinition(),l=n&&n.suppressHeaderKeyboardEvent;if(!ce(l))return!1;const u=e.addGridCommonParams({colDef:n,column:s,headerRowIndex:i,event:t});return!!l(u)}function Gp(e){const{keyCode:t}=e;let i;switch(t){case $C:i=Q.A;break;case jC:i=Q.C;break;case KC:i=Q.V;break;case qC:i=Q.D;break;case QC:i=Q.Z;break;case ZC:i=Q.Y;break;default:i=e.code}return i}function _p(e,t=!1){return e===Q.DELETE?!0:!t&&e===Q.BACKSPACE?wh():!1}var Vp={};fi(Vp,{areEventsNear:()=>kh});function kh(e,t,i){if(i===0)return!1;const s=Math.abs(e.clientX-t.clientX),n=Math.abs(e.clientY-t.clientY);return Math.max(s,n)<=i}var Hp={};fi(Hp,{sortRowNodesByOrder:()=>JC});function JC(e,t){if(!e)return!1;const i=(u,g)=>{const C=t[u.id],S=t[g.id],A=C!==void 0,D=S!==void 0,M=A&&D,W=!A&&!D;return M?C-S:W?u.__objectId-g.__objectId:A?1:-1};let s,n,l=!1;for(let u=0;u<e.length-1;u++)if(s=e[u],n=e[u+1],i(s,n)>0){l=!0;break}return l?(e.sort(i),!0):!1}var Bp={};fi(Bp,{convertToSet:()=>Nh});function Nh(e){const t=new Set;return e.forEach(i=>t.add(i)),t}var ey=We(We(We(We(We(We(We(We(We(We(We(We(We(We(We(We(We(We({},Ju),Gu),gp),bp),Sp),Nu),Tu),Lp),Au),Ip),kp),Zu),Vp),wp),Ru),Hp),Bp),Ku),ot=ey,Er=class{constructor(e=0,t=1){this.nextValue=e,this.step=t}next(){const e=this.nextValue;return this.nextValue+=this.step,e}peek(){return this.nextValue}skip(e){this.nextValue+=e}},Bi=class Ra{constructor(t){this.status=0,this.resolution=null,this.waiters=[],t(i=>this.onDone(i),i=>this.onReject(i))}static all(t){return new Ra(i=>{let s=t.length;const n=new Array(s);t.forEach((l,u)=>{l.then(g=>{n[u]=g,s--,s===0&&i(n)})})})}static resolve(t=null){return new Ra(i=>i(t))}then(t){return new Ra(i=>{this.status===1?i(t(this.resolution)):this.waiters.push(s=>i(t(s)))})}resolveNow(t,i){return this.status===1?i(this.resolution):t}onDone(t){this.status=1,this.resolution=t,this.waiters.forEach(i=>i(t))}onReject(t){console.warn("TBI")}},ty=class{constructor(e){this.cssClassStates={},this.getGui=e}addCssClass(e){const t=(e||"").split(" ");if(t.length>1){t.forEach(s=>this.addCssClass(s));return}if(this.cssClassStates[e]!==!0&&e.length){const s=this.getGui();s&&s.classList.add(e),this.cssClassStates[e]=!0}}removeCssClass(e){const t=(e||"").split(" ");if(t.length>1){t.forEach(s=>this.removeCssClass(s));return}if(this.cssClassStates[e]!==!1&&e.length){const s=this.getGui();s&&s.classList.remove(e),this.cssClassStates[e]=!1}}containsCssClass(e){const t=this.getGui();return t?t.classList.contains(e):!1}addOrRemoveCssClass(e,t){if(!e)return;if(e.indexOf(" ")>=0){const s=(e||"").split(" ");if(s.length>1){s.forEach(n=>this.addOrRemoveCssClass(n,t));return}}if(this.cssClassStates[e]!==t&&e.length){const s=this.getGui();s&&s.classList.toggle(e,t),this.cssClassStates[e]=t}}},qn=class bo extends ge{constructor(t,i,s,n){super(),this.parentComp=t,this.tooltipShowDelayOverride=i,this.tooltipHideDelayOverride=s,this.shouldDisplayTooltip=n,this.SHOW_QUICK_TOOLTIP_DIFF=1e3,this.FADE_OUT_TOOLTIP_TIMEOUT=1e3,this.INTERACTIVE_HIDE_DELAY=100,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}postConstruct(){this.gridOptionsService.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gridOptionsService.get("tooltipMouseTrack");const t=this.parentComp.getGui();this.tooltipTrigger===0&&(this.addManagedListener(t,"mouseenter",this.onMouseEnter.bind(this)),this.addManagedListener(t,"mouseleave",this.onMouseLeave.bind(this))),this.tooltipTrigger===1&&(this.addManagedListener(t,"focusin",this.onFocusIn.bind(this)),this.addManagedListener(t,"focusout",this.onFocusOut.bind(this))),this.addManagedListener(t,"mousemove",this.onMouseMove.bind(this)),this.interactionEnabled||(this.addManagedListener(t,"mousedown",this.onMouseDown.bind(this)),this.addManagedListener(t,"keydown",this.onKeyDown.bind(this)))}getGridOptionsTooltipDelay(t){const i=this.gridOptionsService.get(t);return i<0&&Ue(`${t} should not be lower than 0`),Math.max(200,i)}getTooltipDelay(t){var i,s;return t==="show"?(i=this.tooltipShowDelayOverride)!=null?i:this.getGridOptionsTooltipDelay("tooltipShowDelay"):(s=this.tooltipHideDelayOverride)!=null?s:this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){const t=this.gridOptionsService.get("tooltipTrigger");return!t||t==="hover"?0:1}onMouseEnter(t){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!Xs()&&(bo.isLocked?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(t)},this.INTERACTIVE_HIDE_DELAY):this.prepareToShowTooltip(t))}onMouseMove(t){this.lastMouseEvent&&(this.lastMouseEvent=t),this.tooltipMouseTrack&&this.state===2&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(t){var i;const s=t.relatedTarget,n=this.parentComp.getGui(),l=(i=this.tooltipComp)==null?void 0:i.getGui();this.isInteractingWithTooltip||n.contains(s)||this.interactionEnabled&&l?.contains(s)||this.setToDoNothing()}onKeyDown(){this.setToDoNothing()}prepareToShowTooltip(t){if(this.state!=0||bo.isLocked)return;let i=0;t&&(i=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=t||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),i),this.state=1}isLastTooltipHiddenRecently(){const t=new Date().getTime(),i=bo.lastTooltipHideTime;return t-i<this.SHOW_QUICK_TOOLTIP_DIFF}setToDoNothing(){this.state===2&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){const t=We({},this.parentComp.getTooltipParams());if(!ce(t.value)||this.shouldDisplayTooltip&&!this.shouldDisplayTooltip()){this.setToDoNothing();return}this.state=2,this.tooltipInstanceCount++;const i=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.userComponentFactory.getTooltipCompDetails(t).newAgStackInstance().then(i)}hideTooltip(t){if(!t&&this.isInteractingWithTooltip)return;this.tooltipComp&&(this.destroyTooltipComp(),bo.lastTooltipHideTime=new Date().getTime());const i={type:L.EVENT_TOOLTIP_HIDE,parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(i),this.state=0}newTooltipComponentCallback(t,i){if(this.state!==2||this.tooltipInstanceCount!==t){this.getContext().destroyBean(i);return}const n=i.getGui();this.tooltipComp=i,n.classList.contains("ag-tooltip")||n.classList.add("ag-tooltip-custom"),this.tooltipTrigger===0&&n.classList.add("ag-tooltip-animate"),this.interactionEnabled&&n.classList.add("ag-tooltip-interactive");const l=this.localeService.getLocaleTextFunc(),u=this.popupService.addPopup({eChild:n,ariaLabel:l("ariaLabelTooltip","Tooltip")});u&&(this.tooltipPopupDestroyFunc=u.hideFunc),this.positionTooltip(),this.tooltipTrigger===1&&(this.onBodyScrollEventCallback=this.addManagedListener(this.eventService,L.EVENT_BODY_SCROLL,this.setToDoNothing.bind(this)),this.onColumnMovedEventCallback=this.addManagedListener(this.eventService,L.EVENT_COLUMN_MOVED,this.setToDoNothing.bind(this))),this.interactionEnabled&&(this.tooltipTrigger===0?(this.tooltipMouseEnterListener=this.addManagedListener(n,"mouseenter",this.onTooltipMouseEnter.bind(this))||null,this.tooltipMouseLeaveListener=this.addManagedListener(n,"mouseleave",this.onTooltipMouseLeave.bind(this))||null):(this.tooltipFocusInListener=this.addManagedListener(n,"focusin",this.onTooltipFocusIn.bind(this))||null,this.tooltipFocusOutListener=this.addManagedListener(n,"focusout",this.onTooltipFocusOut.bind(this))||null));const g={type:L.EVENT_TOOLTIP_SHOW,tooltipGui:n,parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(g),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isInteractingWithTooltip=!1,this.lockService()}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}onTooltipFocusOut(t){var i;const s=this.parentComp.getGui(),n=(i=this.tooltipComp)==null?void 0:i.getGui(),l=t.relatedTarget;n?.contains(l)||(this.isInteractingWithTooltip=!1,s.contains(l)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){const t={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupService.positionPopupUnderMouseEvent(Vt(We({},t),{mouseEvent:this.lastMouseEvent})):this.popupService.positionPopupByComponent(Vt(We({},t),{eventSource:this.parentComp.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5}))}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");const t=this.tooltipPopupDestroyFunc,i=this.tooltipComp,s=this.tooltipTrigger===0?this.FADE_OUT_TOOLTIP_TIMEOUT:0;window.setTimeout(()=>{t(),this.getContext().destroyBean(i)},s),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach(t=>{t&&t()}),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){bo.isLocked=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},this.INTERACTIVE_HIDE_DELAY)}unlockService(){bo.isLocked=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){!this.showTooltipTimeoutId||(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){!this.hideTooltipTimeoutId||(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){!this.interactiveTooltipTimeoutId||(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}};qn.isLocked=!1;E([N("popupService")],qn.prototype,"popupService",2);E([N("userComponentFactory")],qn.prototype,"userComponentFactory",2);E([Ce],qn.prototype,"postConstruct",1);var iy=qn,$s=class extends ge{constructor(e,t){super(),this.ctrl=e,t&&(this.beans=t)}postConstruct(){this.refreshToolTip()}setBrowserTooltip(e){const t="title",i=this.ctrl.getGui();!i||(e!=null&&e!=""?i.setAttribute(t,e):i.removeAttribute(t))}updateTooltipText(){this.tooltip=this.ctrl.getTooltipValue()}createTooltipFeatureIfNeeded(){var e,t,i,s;if(this.tooltipManager!=null)return;const n={getTooltipParams:()=>this.getTooltipParams(),getGui:()=>this.ctrl.getGui()};this.tooltipManager=this.createBean(new iy(n,(t=(e=this.ctrl).getTooltipShowDelayOverride)==null?void 0:t.call(e),(s=(i=this.ctrl).getTooltipHideDelayOverride)==null?void 0:s.call(i),this.ctrl.shouldDisplayTooltip),this.beans.context)}refreshToolTip(){this.browserTooltips=this.beans.gridOptionsService.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context))):(this.setBrowserTooltip(null),this.createTooltipFeatureIfNeeded())}getTooltipParams(){const e=this.ctrl,t=e.getColumn?e.getColumn():void 0,i=e.getColDef?e.getColDef():void 0,s=e.getRowNode?e.getRowNode():void 0;return{location:e.getLocation(),colDef:i,column:t,rowIndex:e.getRowIndex?e.getRowIndex():void 0,node:s,data:s?s.data:void 0,value:this.getTooltipText(),valueFormatted:e.getValueFormatted?e.getValueFormatted():void 0,hideTooltipCallback:()=>{var n;return(n=this.tooltipManager)==null?void 0:n.hideTooltip(!0)}}}getTooltipText(){return this.tooltip}destroy(){this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)),super.destroy()}};E([N("beans")],$s.prototype,"beans",2);E([Ce],$s.prototype,"postConstruct",1);var sy=new Er,Qn=class Md extends ge{constructor(t){super(),this.displayed=!0,this.visible=!0,this.compId=sy.next(),this.cssClassManager=new ty(()=>this.eGui),t&&this.setTemplate(t)}preConstructOnComponent(){this.usingBrowserTooltips=this.gridOptionsService.get("enableBrowserTooltips")}getCompId(){return this.compId}getTooltipParams(){return{value:this.tooltipText,location:"UNKNOWN"}}setTooltip(t){const{newTooltipText:i,showDelayOverride:s,hideDelayOverride:n,location:l,shouldDisplayTooltip:u}=t||{};this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),this.tooltipText!==i&&(this.tooltipText=i);const g=()=>this.tooltipText;i!=null&&(this.tooltipFeature=this.createBean(new $s({getTooltipValue:g,getGui:()=>this.getGui(),getLocation:()=>l??"UNKNOWN",getTooltipShowDelayOverride:s!=null?()=>s:void 0,getTooltipHideDelayOverride:n!=null?()=>n:void 0,shouldDisplayTooltip:u})))}createChildComponentsFromTags(t,i){Pp(t.childNodes).forEach(n=>{if(!(n instanceof HTMLElement))return;const l=this.createComponentFromElement(n,u=>{u.getGui()&&this.copyAttributesFromNode(n,u.getGui())},i);if(l){if(l.addItems&&n.children.length){this.createChildComponentsFromTags(n,i);const u=Array.prototype.slice.call(n.children);l.addItems(u)}this.swapComponentForNode(l,t,n)}else n.childNodes&&this.createChildComponentsFromTags(n,i)})}createComponentFromElement(t,i,s){const n=t.nodeName,l=s?s[t.getAttribute("ref")]:void 0,u=this.agStackComponentsRegistry.getComponentClass(n);if(u){Md.elementGettingCreated=t;const g=new u(l);return g.setParentComponent(this),this.createBean(g,null,i),g}return null}copyAttributesFromNode(t,i){Fp(t.attributes,(s,n)=>i.setAttribute(s,n))}swapComponentForNode(t,i,s){const n=t.getGui();i.replaceChild(n,s),i.insertBefore(document.createComment(s.nodeName),n),this.addDestroyFunc(this.destroyBean.bind(this,t)),this.swapInComponentForQuerySelectors(t,s)}swapInComponentForQuerySelectors(t,i){const s=this;this.iterateOverQuerySelectors(n=>{s[n.attributeName]===i&&(s[n.attributeName]=t)})}iterateOverQuerySelectors(t){let i=Object.getPrototypeOf(this);for(;i!=null;){const s=i.__agComponentMetaData,n=sl(i.constructor);s&&s[n]&&s[n].querySelectors&&s[n].querySelectors.forEach(l=>t(l)),i=Object.getPrototypeOf(i)}}activateTabIndex(t){const i=this.gridOptionsService.get("tabIndex");t||(t=[]),t.length||t.push(this.getGui()),t.forEach(s=>s.setAttribute("tabindex",i.toString()))}setTemplate(t,i){const s=Ni(t);this.setTemplateFromElement(s,i)}setTemplateFromElement(t,i){this.eGui=t,this.eGui.__agComponent=this,this.wireQuerySelectors(),this.getContext()&&this.createChildComponentsFromTags(this.getGui(),i)}createChildComponentsPreConstruct(){this.getGui()&&this.createChildComponentsFromTags(this.getGui())}wireQuerySelectors(){if(!this.eGui)return;const t=this;this.iterateOverQuerySelectors(i=>{const s=l=>t[i.attributeName]=l;if(i.refSelector&&this.getAttribute("ref")===i.refSelector)s(this.eGui);else{const l=this.eGui.querySelector(i.querySelector);l&&s(l.__agComponent||l)}})}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(t){this.parentComponent=t}getParentComponent(){return this.parentComponent}setGui(t){this.eGui=t}queryForHtmlElement(t){return this.eGui.querySelector(t)}queryForHtmlInputElement(t){return this.eGui.querySelector(t)}appendChild(t,i){if(t!=null)if(i||(i=this.eGui),jn(t))i.appendChild(t);else{const s=t;i.appendChild(s.getGui())}}isDisplayed(){return this.displayed}setVisible(t,i={}){if(t!==this.visible){this.visible=t;const{skipAriaHidden:s}=i;Ap(this.eGui,t,{skipAriaHidden:s})}}setDisplayed(t,i={}){if(t!==this.displayed){this.displayed=t;const{skipAriaHidden:s}=i;lt(this.eGui,t,{skipAriaHidden:s});const n={type:Md.EVENT_DISPLAYED_CHANGED,visible:this.displayed};this.dispatchEvent(n)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));const t=this.eGui;t&&t.__agComponent&&(t.__agComponent=void 0),super.destroy()}addGuiEventListener(t,i,s){this.eGui.addEventListener(t,i,s),this.addDestroyFunc(()=>this.eGui.removeEventListener(t,i))}addCssClass(t){this.cssClassManager.addCssClass(t)}removeCssClass(t){this.cssClassManager.removeCssClass(t)}containsCssClass(t){return this.cssClassManager.containsCssClass(t)}addOrRemoveCssClass(t,i){this.cssClassManager.addOrRemoveCssClass(t,i)}getAttribute(t){const{eGui:i}=this;return i?i.getAttribute(t):null}getRefElement(t){return this.queryForHtmlElement(`[ref="${t}"]`)}};Qn.EVENT_DISPLAYED_CHANGED="displayedChanged";E([N("agStackComponentsRegistry")],Qn.prototype,"agStackComponentsRegistry",2);E([Mu],Qn.prototype,"preConstructOnComponent",1);E([Mu],Qn.prototype,"createChildComponentsPreConstruct",1);var Ze=Qn;function xe(e){return oy.bind(this,`[ref=${e}]`,e)}function oy(e,t,i,s,n){if(e===null){console.error("AG Grid: QuerySelector selector should not be null");return}if(typeof n=="number"){console.error("AG Grid: QuerySelector should be on an attribute");return}ry(i,"querySelectors",{attributeName:s,querySelector:e,refSelector:t})}function ry(e,t,i){const s=ny(e,sl(e.constructor));s[t]||(s[t]=[]),s[t].push(i)}function ny(e,t){return e.__agComponentMetaData||(e.__agComponentMetaData={}),e.__agComponentMetaData[t]||(e.__agComponentMetaData[t]={}),e.__agComponentMetaData[t]}var Gh=class extends Ze{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field ref="eFloatingFilterText"></ag-input-text-field>
            </div>`)}destroy(){super.destroy()}init(e){this.params=e;const t=this.columnModel.getDisplayNameForColumn(e.column,"header",!0),i=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${t} ${i("ariaFilterInput","Filter Input")}`)}onParentModelChanged(e){if(e==null){this.eFloatingFilterText.setValue("");return}this.params.parentFilterInstance(t=>{if(t.getModelAsString){const i=t.getModelAsString(e);this.eFloatingFilterText.setValue(i)}})}onParamsUpdated(e){this.refresh(e)}refresh(e){this.init(e)}};E([xe("eFloatingFilterText")],Gh.prototype,"eFloatingFilterText",2);E([N("columnModel")],Gh.prototype,"columnModel",2);var Wp=class{constructor(e,t,i,s){this.alive=!0,this.context=e,this.eParent=s,t.getDateCompDetails(i).newAgStackInstance().then(u=>{if(!this.alive){e.destroyBean(u);return}this.dateComp=u,u&&(s.appendChild(u.getGui()),u.afterGuiAttached&&u.afterGuiAttached(),this.tempValue&&u.setDate(this.tempValue),this.disabled!=null&&this.setDateCompDisabled(this.disabled))})}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(e){this.dateComp?this.dateComp.setDate(e):this.tempValue=e}setDisabled(e){this.dateComp?this.setDateCompDisabled(e):this.disabled=e}setDisplayed(e){lt(this.eParent,e)}setInputPlaceholder(e){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(e)}setInputAriaLabel(e){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(e)}afterGuiAttached(e){this.dateComp&&typeof this.dateComp.afterGuiAttached=="function"&&this.dateComp.afterGuiAttached(e)}updateParams(e){var t,i;let s=!1;((t=this.dateComp)==null?void 0:t.refresh)&&typeof this.dateComp.refresh=="function"&&this.dateComp.refresh(e)!==null&&(s=!0),!s&&((i=this.dateComp)==null?void 0:i.onParamsUpdated)&&typeof this.dateComp.onParamsUpdated=="function"&&this.dateComp.onParamsUpdated(e)!==null&&Ue("Custom date component method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")}setDateCompDisabled(e){this.dateComp!=null&&this.dateComp.setDisabled!=null&&this.dateComp.setDisabled(e)}},zp=class{constructor(){this.customFilterOptions={}}init(e,t){this.filterOptions=e.filterOptions||t,this.mapCustomOptions(),this.selectDefaultItem(e)}getFilterOptions(){return this.filterOptions}mapCustomOptions(){!this.filterOptions||this.filterOptions.forEach(e=>{if(typeof e=="string")return;const t=[["displayKey"],["displayName"],["predicate","test"]],i=s=>s.some(n=>e[n]!=null)?!0:(console.warn(`AG Grid: ignoring FilterOptionDef as it doesn't contain one of '${s}'`),!1);if(!t.every(i)){this.filterOptions=this.filterOptions.filter(s=>s===e)||[];return}this.customFilterOptions[e.displayKey]=e})}selectDefaultItem(e){if(e.defaultOption)this.defaultOption=e.defaultOption;else if(this.filterOptions.length>=1){const t=this.filterOptions[0];typeof t=="string"?this.defaultOption=t:t.displayKey?this.defaultOption=t.displayKey:console.warn("AG Grid: invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else console.warn("AG Grid: no filter options for filter")}getDefaultOption(){return this.defaultOption}getCustomOption(e){return this.customFilterOptions[e]}},Up={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"},gl=class Yp extends ge{constructor(t,i={}){super(),this.eFocusableElement=t,this.callbacks=i,this.callbacks=We({shouldStopEventPropagation:()=>!1,onTabKeyDown:s=>{if(s.defaultPrevented)return;const n=this.focusService.findNextFocusableElement(this.eFocusableElement,!1,s.shiftKey);!n||(n.focus(),s.preventDefault())}},i)}postConstruct(){this.eFocusableElement.classList.add(Yp.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedListener(this.eFocusableElement,"focusin",this.callbacks.onFocusIn),this.callbacks.onFocusOut&&this.addManagedListener(this.eFocusableElement,"focusout",this.callbacks.onFocusOut)}addKeyDownListeners(t){this.addManagedListener(t,"keydown",i=>{if(!(i.defaultPrevented||us(i))){if(this.callbacks.shouldStopEventPropagation(i)){gs(i);return}i.key===Q.TAB?this.callbacks.onTabKeyDown(i):this.callbacks.handleKeyDown&&this.callbacks.handleKeyDown(i)}})}};gl.FOCUS_MANAGED_CLASS="ag-focus-managed";E([N("focusService")],gl.prototype,"focusService",2);E([Ce],gl.prototype,"postConstruct",1);var go=gl,Xp="ag-resizer-wrapper",ay=`<div class="${Xp}">
        <div ref="eTopLeftResizer" class="ag-resizer ag-resizer-topLeft"></div>
        <div ref="eTopResizer" class="ag-resizer ag-resizer-top"></div>
        <div ref="eTopRightResizer" class="ag-resizer ag-resizer-topRight"></div>
        <div ref="eRightResizer" class="ag-resizer ag-resizer-right"></div>
        <div ref="eBottomRightResizer" class="ag-resizer ag-resizer-bottomRight"></div>
        <div ref="eBottomResizer" class="ag-resizer ag-resizer-bottom"></div>
        <div ref="eBottomLeftResizer" class="ag-resizer ag-resizer-bottomLeft"></div>
        <div ref="eLeftResizer" class="ag-resizer ag-resizer-left"></div>
    </div>`,Or=class extends ge{constructor(e,t){super(),this.element=e,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},t)}center(){const{clientHeight:e,clientWidth:t}=this.offsetParent,i=t/2-this.getWidth()/2,s=e/2-this.getHeight()/2;this.offsetElement(i,s)}initialisePosition(){if(this.positioned)return;const{centered:e,forcePopupParentAsOffsetParent:t,minWidth:i,width:s,minHeight:n,height:l,x:u,y:g}=this.config;this.offsetParent||this.setOffsetParent();let C=0,S=0;const A=Ui(this.element);if(A){const D=this.findBoundaryElement(),M=window.getComputedStyle(D);if(M.minWidth!=null){const W=D.offsetWidth-this.element.offsetWidth;S=parseInt(M.minWidth,10)-W}if(M.minHeight!=null){const W=D.offsetHeight-this.element.offsetHeight;C=parseInt(M.minHeight,10)-W}}if(this.minHeight=n||C,this.minWidth=i||S,s&&this.setWidth(s),l&&this.setHeight(l),(!s||!l)&&this.refreshSize(),e)this.center();else if(u||g)this.offsetElement(u,g);else if(A&&t){let D=this.boundaryEl,M=!0;if(D||(D=this.findBoundaryElement(),M=!1),D){const W=parseFloat(D.style.top),z=parseFloat(D.style.left);M?this.offsetElement(isNaN(z)?0:z,isNaN(W)?0:W):this.setPosition(z,W)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(e,t){if(!this.config.popup||e===this.movable)return;this.movable=e;const i=this.moveElementDragListener||{eElement:t,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?(this.dragService.addDragSource(i),this.moveElementDragListener=i):(this.dragService.removeDragSource(i),this.moveElementDragListener=void 0)}setResizable(e){if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),typeof e=="boolean"){if(e===!1)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach(t=>{const s=!!e[t],n=this.getResizerElement(t),l={dragStartPixels:0,eElement:n,onDragStart:u=>this.onResizeStart(u,t),onDragging:this.onResize.bind(this),onDragStop:u=>this.onResizeEnd(u,t)};(s||!this.isAlive()&&!s)&&(s?(this.dragService.addDragSource(l),this.resizeListeners.push(l),n.style.pointerEvents="all"):n.style.pointerEvents="none",this.resizable[t]=s)})}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";const{height:e,width:t}=this.lastSize;t!==-1&&(this.element.style.width=`${t}px`),e!==-1&&(this.element.style.height=`${e}px`)}getHeight(){return this.element.offsetHeight}setHeight(e){const{popup:t}=this.config,i=this.element;let s=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)To(i,e),e=Dh(i),s=!0;else if(e=Math.max(this.minHeight,e),this.positioned){const n=this.getAvailableHeight();n&&e>n&&(e=n)}this.getHeight()!==e&&(s?(i.style.maxHeight="unset",i.style.minHeight="unset"):t?To(i,e):(i.style.height=`${e}px`,i.style.flex="0 0 auto",this.lastSize.height=typeof e=="number"?e:parseFloat(e)))}getAvailableHeight(){const{popup:e,forcePopupParentAsOffsetParent:t}=this.config;this.positioned||this.initialisePosition();const{clientHeight:i}=this.offsetParent;if(!i)return null;const s=this.element.getBoundingClientRect(),n=this.offsetParent.getBoundingClientRect(),l=e?this.position.y:s.top,u=e?0:n.top;let g=0;if(t){const S=this.element.parentElement;if(S){const{bottom:A}=S.getBoundingClientRect();g=A-s.bottom}}return i+u-l-g}getWidth(){return this.element.offsetWidth}setWidth(e){const t=this.element,{popup:i}=this.config;let s=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)Ji(t,e),e=wn(t),s=!0;else if(this.positioned){e=Math.max(this.minWidth,e);const{clientWidth:n}=this.offsetParent,l=i?this.position.x:this.element.getBoundingClientRect().left;n&&e+l>n&&(e=n-l)}this.getWidth()!==e&&(s?(t.style.maxWidth="unset",t.style.minWidth="unset"):this.config.popup?Ji(t,e):(t.style.width=`${e}px`,t.style.flex=" unset",this.lastSize.width=typeof e=="number"?e:parseFloat(e)))}offsetElement(e=0,t=0){const{forcePopupParentAsOffsetParent:i}=this.config,s=i?this.boundaryEl:this.element;!s||(this.popupService.positionPopup({ePopup:s,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:e,y:t})}),this.setPosition(parseFloat(s.style.left),parseFloat(s.style.top)))}constrainSizeToAvailableHeight(e){if(!this.config.forcePopupParentAsOffsetParent)return;const t=()=>{const i=this.getAvailableHeight();this.element.style.setProperty("max-height",`${i}px`)};e?this.resizeObserverSubscriber=this.resizeObserverService.observeResize(this.popupService.getPopupParent(),t):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(e,t){this.position.x=e,this.position.y=t}updateDragStartPosition(e,t){this.dragStartPosition={x:e,y:t}}calculateMouseMovement(e){const{e:t,isLeft:i,isTop:s,anywhereWithin:n,topBuffer:l}=e,u=t.clientX-this.dragStartPosition.x,g=t.clientY-this.dragStartPosition.y,C=this.shouldSkipX(t,!!i,!!n,u)?0:u,S=this.shouldSkipY(t,!!s,l,g)?0:g;return{movementX:C,movementY:S}}shouldSkipX(e,t,i,s){const n=this.element.getBoundingClientRect(),l=this.offsetParent.getBoundingClientRect(),u=this.boundaryEl.getBoundingClientRect(),g=this.config.popup?this.position.x:n.left;let C=g<=0&&l.left>=e.clientX||l.right<=e.clientX&&l.right<=u.right;return C?!0:(t?C=s<0&&e.clientX>g+l.left||s>0&&e.clientX<g+l.left:i?C=s<0&&e.clientX>u.right||s>0&&e.clientX<g+l.left:C=s<0&&e.clientX>u.right||s>0&&e.clientX<u.right,C)}shouldSkipY(e,t,i=0,s){const n=this.element.getBoundingClientRect(),l=this.offsetParent.getBoundingClientRect(),u=this.boundaryEl.getBoundingClientRect(),g=this.config.popup?this.position.y:n.top;let C=g<=0&&l.top>=e.clientY||l.bottom<=e.clientY&&l.bottom<=u.bottom;return C?!0:(t?C=s<0&&e.clientY>g+l.top+i||s>0&&e.clientY<g+l.top:C=s<0&&e.clientY>u.bottom||s>0&&e.clientY<u.bottom,C)}createResizeMap(){const e=this.element;this.resizerMap={topLeft:{element:e.querySelector("[ref=eTopLeftResizer]")},top:{element:e.querySelector("[ref=eTopResizer]")},topRight:{element:e.querySelector("[ref=eTopRightResizer]")},right:{element:e.querySelector("[ref=eRightResizer]")},bottomRight:{element:e.querySelector("[ref=eBottomRightResizer]")},bottom:{element:e.querySelector("[ref=eBottomResizer]")},bottomLeft:{element:e.querySelector("[ref=eBottomLeftResizer]")},left:{element:e.querySelector("[ref=eLeftResizer]")}}}addResizers(){if(this.resizersAdded)return;const e=this.element;if(!e)return;const i=new DOMParser().parseFromString(ay,"text/html").body;e.appendChild(i.firstChild),this.createResizeMap(),this.resizersAdded=!0}removeResizers(){this.resizerMap=void 0;const e=this.element.querySelector(`.${Xp}`);e&&this.element.removeChild(e),this.resizersAdded=!1}getResizerElement(e){return this.resizerMap[e].element}onResizeStart(e,t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!t.match(/top/i),isRight:!!t.match(/right/i),isBottom:!!t.match(/bottom/i),isLeft:!!t.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[t].element.classList.add("ag-active");const{popup:i,forcePopupParentAsOffsetParent:s}=this.config;!i&&!s&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){const t=this.element.parentElement;return t?Array.prototype.slice.call(t.children).filter(i=>!i.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){const e=this.getSiblings()||[];let t=0,i=0;for(let s=0;s<e.length;s++){const n=e[s],l=!!n.style.flex&&n.style.flex!=="0 0 auto";if(n===this.element)continue;let u=this.minHeight||0,g=this.minWidth||0;if(l){const C=window.getComputedStyle(n);C.minHeight&&(u=parseInt(C.minHeight,10)),C.minWidth&&(g=parseInt(C.minWidth,10))}else u=n.offsetHeight,g=n.offsetWidth;t+=u,i+=g}return{height:t,width:i}}applySizeToSiblings(e){let t=null;const i=this.getSiblings();if(!!i){for(let s=0;s<i.length;s++){const n=i[s];n!==t&&(e?n.style.height=`${n.offsetHeight}px`:n.style.width=`${n.offsetWidth}px`,n.style.flex="0 0 auto",n===this.element&&(t=i[s+1]))}t&&(t.style.removeProperty("height"),t.style.removeProperty("min-height"),t.style.removeProperty("max-height"),t.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(e=>e)}onResize(e){if(!this.isResizing||!this.currentResizer)return;const{popup:t,forcePopupParentAsOffsetParent:i}=this.config,{isTop:s,isRight:n,isBottom:l,isLeft:u}=this.currentResizer,g=n||u,C=l||s,{movementX:S,movementY:A}=this.calculateMouseMovement({e,isLeft:u,isTop:s}),D=this.position.x,M=this.position.y;let W=0,z=0;if(g&&S){const U=u?-1:1,X=this.getWidth(),q=X+S*U;let _=!1;u&&(W=X-q,(D+W<=0||q<=this.minWidth)&&(_=!0,W=0)),_||this.setWidth(q)}if(C&&A){const U=s?-1:1,X=this.getHeight(),q=X+A*U;let _=!1;s?(z=X-q,(M+z<=0||q<=this.minHeight)&&(_=!0,z=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&X<q&&this.getMinSizeOfSiblings().height+q>this.element.parentElement.offsetHeight&&(_=!0),_||this.setHeight(q)}this.updateDragStartPosition(e.clientX,e.clientY),((t||i)&&W||z)&&this.offsetElement(D+W,M+z)}onResizeEnd(e,t){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null;const i={type:"resize"};this.element.classList.remove("ag-resizing"),this.resizerMap[t].element.classList.remove("ag-active"),this.dispatchEvent(i)}refreshSize(){const e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;const{x:t,y:i}=this.position;let s;this.config.calculateTopBuffer&&(s=this.config.calculateTopBuffer());const{movementX:n,movementY:l}=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer:s});this.offsetElement(t+n,i+l),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent?this.offsetParent=this.popupService.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let e=this.element;for(;e;){if(window.getComputedStyle(e).position!=="static")return e;e=e.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){const e=this.resizeListeners.pop();this.dragService.removeDragSource(e)}}destroy(){super.destroy(),this.moveElementDragListener&&this.dragService.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}};E([N("popupService")],Or.prototype,"popupService",2);E([N("resizeObserverService")],Or.prototype,"resizeObserverService",2);E([N("dragService")],Or.prototype,"dragService",2);var fl=class ln extends Ze{constructor(t){super(),this.filterNameKey=t,this.applyActive=!1,this.hidePopup=null,this.debouncePending=!1,this.appliedModel=null,this.buttonListeners=[]}postConstruct(){this.resetTemplate(),this.createManagedBean(new go(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new Or(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)}handleKeyDown(t){}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return!!this.appliedModel}resetTemplate(t){let i=this.getGui();i&&i.removeEventListener("submit",this.onFormSubmit);const s=`
            <form class="ag-filter-wrapper">
                <div class="ag-filter-body-wrapper ag-${this.getCssIdentifier()}-body-wrapper" ref="eFilterBody">
                    ${this.createBodyTemplate()}
                </div>
            </form>`;this.setTemplate(s,t),i=this.getGui(),i&&i.addEventListener("submit",this.onFormSubmit)}isReadOnly(){return!!this.providedFilterParams.readOnly}init(t){this.setParams(t),this.resetUiToDefaults(!0).then(()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}setParams(t){this.providedFilterParams=t,this.applyActive=ln.isUseApplyButton(t),this.resetButtonsPanel()}updateParams(t){this.providedFilterParams=t,this.applyActive=ln.isUseApplyButton(t),this.resetUiToActiveModel(this.getModel(),()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}resetButtonsPanel(){const{buttons:t}=this.providedFilterParams,i=t&&t.length>0&&!this.isReadOnly();if(this.eButtonsPanel?(Jt(this.eButtonsPanel),this.buttonListeners.forEach(l=>l?.()),this.buttonListeners=[]):i&&(this.eButtonsPanel=document.createElement("div"),this.eButtonsPanel.classList.add("ag-filter-apply-panel")),!i){this.eButtonsPanel&&hs(this.eButtonsPanel);return}const s=document.createDocumentFragment(),n=l=>{let u,g;switch(l){case"apply":u=this.translate("applyFilter"),g=A=>this.onBtApply(!1,!1,A);break;case"clear":u=this.translate("clearFilter"),g=()=>this.onBtClear();break;case"reset":u=this.translate("resetFilter"),g=()=>this.onBtReset();break;case"cancel":u=this.translate("cancelFilter"),g=A=>{this.onBtCancel(A)};break;default:console.warn("AG Grid: Unknown button type specified");return}const S=Ni(`<button
                    type="${l==="apply"?"submit":"button"}"
                    ref="${l}FilterButton"
                    class="ag-button ag-standard-button ag-filter-apply-panel-button"
                >${u}
                </button>`);this.buttonListeners.push(this.addManagedListener(S,"click",g)),s.append(S)};Nh(t).forEach(l=>n(l)),this.eButtonsPanel.append(s),this.getGui().appendChild(this.eButtonsPanel)}getDefaultDebounceMs(){return 0}setupOnBtApplyDebounce(){const t=ln.getDebounceMs(this.providedFilterParams,this.getDefaultDebounceMs()),i=Ai(this.checkApplyDebounce.bind(this),t);this.onBtApplyDebounce=()=>{this.debouncePending=!0,i()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())}getModel(){return this.appliedModel?this.appliedModel:null}setModel(t){return(t!=null?this.setModelIntoUi(t):this.resetUiToDefaults()).then(()=>{this.updateUiVisibility(),this.applyModel("api")})}onBtCancel(t){this.resetUiToActiveModel(this.getModel(),()=>{this.handleCancelEnd(t)})}handleCancelEnd(t){this.providedFilterParams.closeOnApply&&this.close(t)}resetUiToActiveModel(t,i){const s=()=>{this.onUiChanged(!1,"prevent"),i?.()};t!=null?this.setModelIntoUi(t).then(s):this.resetUiToDefaults().then(s)}onBtClear(){this.resetUiToDefaults().then(()=>this.onUiChanged())}onBtReset(){this.onBtClear(),this.onBtApply()}applyModel(t="api"){const i=this.getModelFromUi();if(!this.isModelValid(i))return!1;const s=this.appliedModel;return this.appliedModel=i,!this.areModelsEqual(s,i)}isModelValid(t){return!0}onFormSubmit(t){t.preventDefault()}onBtApply(t=!1,i=!1,s){if(s&&s.preventDefault(),this.applyModel(i?"rowDataUpdated":"ui")){const l="columnFilter";this.providedFilterParams.filterChangedCallback({afterFloatingFilter:t,afterDataChange:i,source:l})}const{closeOnApply:n}=this.providedFilterParams;n&&this.applyActive&&!t&&!i&&this.close(s)}onNewRowsLoaded(){}close(t){if(!this.hidePopup)return;const i=t,s=i&&i.key;let n;(s==="Enter"||s==="Space")&&(n={keyboardEvent:i}),this.hidePopup(n),this.hidePopup=null}onUiChanged(t=!1,i){if(this.updateUiVisibility(),this.providedFilterParams.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){const s=this.isModelValid(this.getModelFromUi()),n=this.getRefElement("applyFilterButton");n&&Sr(n,!s)}t&&!i||i==="immediately"?this.onBtApply(t):(!this.applyActive&&!i||i==="debounce")&&this.onBtApplyDebounce()}afterGuiAttached(t){t&&(this.hidePopup=t.hidePopup),this.refreshFilterResizer(t?.container)}refreshFilterResizer(t){if(!this.positionableFeature||t==="toolPanel")return;const i=t==="floatingFilter"||t==="columnFilter",{positionableFeature:s,gridOptionsService:n}=this;i?(s.restoreLastSize(),s.setResizable(n.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(this.positionableFeature.removeSizeFromEl(),this.positionableFeature.setResizable(!1)),this.positionableFeature.constrainSizeToAvailableHeight(!0)}afterGuiDetached(){this.checkApplyDebounce(),this.positionableFeature&&this.positionableFeature.constrainSizeToAvailableHeight(!1)}static getDebounceMs(t,i){return ln.isUseApplyButton(t)?(t.debounceMs!=null&&console.warn("AG Grid: debounceMs is ignored when apply button is present"),0):t.debounceMs!=null?t.debounceMs:i}static isUseApplyButton(t){return!!t.buttons&&t.buttons.indexOf("apply")>=0}refresh(t){return this.providedFilterParams=t,!0}destroy(){const t=this.getGui();t&&t.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,this.positionableFeature&&(this.positionableFeature=this.destroyBean(this.positionableFeature)),this.appliedModel=null,super.destroy()}translate(t){return this.localeService.getLocaleTextFunc()(t,Up[t])}getCellValue(t){return this.providedFilterParams.getValue(t)}getPositionableElement(){return this.eFilterBody}};E([N("rowModel")],fl.prototype,"rowModel",2);E([xe("eFilterBody")],fl.prototype,"eFilterBody",2);E([Ce],fl.prototype,"postConstruct",1);var za=fl,_h=class extends Ze{constructor(e,t){super(t),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{}}postConstruct(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");const{labelSeparator:e,label:t,labelWidth:i,labelAlignment:s,disabled:n}=this.config;n!=null&&this.setDisabled(n),e!=null&&this.setLabelSeparator(e),t!=null&&this.setLabel(t),i!=null&&this.setLabelWidth(i),this.setLabelAlignment(s||this.labelAlignment),this.refreshLabel()}refreshLabel(){Jt(this.eLabel),typeof this.label=="string"?this.eLabel.innerText=this.label+this.labelSeparator:this.label&&this.eLabel.appendChild(this.label),this.label===""?(lt(this.eLabel,!1),jt(this.eLabel,"presentation")):(lt(this.eLabel,!0),jt(this.eLabel,null))}setLabelSeparator(e){return this.labelSeparator===e?this:(this.labelSeparator=e,this.label!=null&&this.refreshLabel(),this)}getLabelId(){return this.eLabel.id=this.eLabel.id||`ag-${this.getCompId()}-label`,this.eLabel.id}getLabel(){return this.label}setLabel(e){return this.label===e?this:(this.label=e,this.refreshLabel(),this)}setLabelAlignment(e){const i=this.getGui().classList;return i.toggle("ag-label-align-left",e==="left"),i.toggle("ag-label-align-right",e==="right"),i.toggle("ag-label-align-top",e==="top"),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return this.label==null?this:(An(this.eLabel,e),this)}setDisabled(e){e=!!e;const t=this.getGui();return Sr(t,e),t.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}};E([Ce],_h.prototype,"postConstruct",1);var $p=class extends _h{constructor(e,t,i){super(e,t),this.className=i}postConstruct(){super.postConstruct();const{width:e,value:t,onValueChange:i}=this.config;e!=null&&this.setWidth(e),t!=null&&this.setValue(t),i!=null&&this.onValueChange(i),this.className&&this.addCssClass(this.className),this.refreshAriaLabelledBy()}refreshAriaLabelledBy(){const e=this.getAriaElement(),t=this.getLabelId();sp(e)!==null?Ha(e,""):Ha(e,t??"")}setAriaLabel(e){return fs(this.getAriaElement(),e),this.refreshAriaLabelledBy(),this}onValueChange(e){return this.addManagedListener(this,L.EVENT_FIELD_VALUE_CHANGED,()=>e(this.getValue())),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return Ji(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,t){return this.value===e?this:(this.previousValue=this.value,this.value=e,t||this.dispatchEvent({type:L.EVENT_FIELD_VALUE_CHANGED}),this)}},ly=`
    <div class="ag-picker-field" role="presentation">
        <div ref="eLabel"></div>
            <div ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-picker-collapsed">
            <div ref="eDisplayField" class="ag-picker-field-display"></div>
            <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
        </div>
    </div>`,Uo=class extends $p{constructor(e){if(super(e,e?.template||ly,e?.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.ariaRole=e?.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!e)return;const{pickerGap:t,maxPickerHeight:i,variableWidth:s,minPickerWidth:n,maxPickerWidth:l}=e;t!=null&&(this.pickerGap=t),this.variableWidth=!!s,i!=null&&this.setPickerMaxHeight(i),n!=null&&this.setPickerMinWidth(n),l!=null&&this.setPickerMaxWidth(l)}postConstruct(){super.postConstruct(),this.setupAria();const e=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",e);const t=this.getAriaElement();this.addManagedListener(t,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(this.eLabel,"mousedown",this.onLabelOrWrapperMouseDown.bind(this)),this.addManagedListener(this.eWrapper,"mousedown",this.onLabelOrWrapperMouseDown.bind(this));const{pickerIcon:i,inputWidth:s}=this.config;if(i){const n=Wt(i,this.gridOptionsService);n&&this.eIcon.appendChild(n)}s!=null&&this.setInputWidth(s)}setupAria(){const e=this.getAriaElement();e.setAttribute("tabindex",this.gridOptionsService.get("tabIndex").toString()),Hs(e,!1),this.ariaRole&&jt(e,this.ariaRole)}onLabelOrWrapperMouseDown(e){if(e){const t=this.getFocusableElement();if(t!==this.eWrapper&&e?.target===t)return;e.preventDefault(),this.getFocusableElement().focus()}if(this.skipClick){this.skipClick=!1;return}this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(e){switch(e.key){case Q.UP:case Q.DOWN:case Q.ENTER:case Q.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case Q.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker());break}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());const e=this.pickerComponent.getGui();e.addEventListener("focusin",this.onPickerFocusIn),e.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){const e=this.gridOptionsService.getDocument(),t=this.pickerComponent.getGui();this.gridOptionsService.get("suppressScrollWhenPopupsAreOpen")||(this.destroyMouseWheelFunc=this.addManagedListener(this.eventService,L.EVENT_BODY_SCROLL,()=>{this.hidePicker()}));const i=this.localeService.getLocaleTextFunc(),{pickerAriaLabelKey:s,pickerAriaLabelValue:n,modalPicker:l=!0}=this.config,u={modal:l,eChild:t,closeOnEsc:!0,closedCallback:()=>{const W=e.activeElement===e.body;this.beforeHidePicker(),W&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:i(s,n)},g=this.popupService.addPopup(u),{maxPickerHeight:C,minPickerWidth:S,maxPickerWidth:A,variableWidth:D}=this;D?(S&&(t.style.minWidth=S),t.style.width=ul(wn(this.eWrapper)),A&&(t.style.maxWidth=A)):An(t,A??wn(this.eWrapper));const M=C??`${$n(this.popupService.getPopupParent())}px`;return t.style.setProperty("max-height",M),t.style.position="absolute",this.alignPickerToComponent(),g.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;const{pickerType:e}=this.config,{pickerGap:t}=this,i=this.gridOptionsService.get("enableRtl")?"right":"left";this.popupService.positionPopupByComponent({type:e,eventSource:this.eWrapper,ePopup:this.pickerComponent.getGui(),position:"under",alignSide:i,keepWithinBounds:!0,nudgeY:t})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);const e=this.pickerComponent.getGui();e.removeEventListener("focusin",this.onPickerFocusIn),e.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(e){if(!this.isAlive())return;const t=this.getAriaElement();Hs(t,e),this.eWrapper.classList.toggle("ag-picker-expanded",e),this.eWrapper.classList.toggle("ag-picker-collapsed",!e)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(e){var t;(t=this.pickerComponent)!=null&&t.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(e){!this.pickerComponent||this.eWrapper.classList.toggle("ag-picker-has-focus",e)}hidePicker(){this.hideCurrentPicker&&this.hideCurrentPicker()}setInputWidth(e){return An(this.eWrapper,e),this}getFocusableElement(){return this.eWrapper}setPickerGap(e){return this.pickerGap=e,this}setPickerMinWidth(e){return typeof e=="number"&&(e=`${e}px`),this.minPickerWidth=e??void 0,this}setPickerMaxWidth(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerWidth=e??void 0,this}setPickerMaxHeight(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerHeight=e??void 0,this}destroy(){this.hidePicker(),super.destroy()}};E([N("popupService")],Uo.prototype,"popupService",2);E([xe("eLabel")],Uo.prototype,"eLabel",2);E([xe("eWrapper")],Uo.prototype,"eWrapper",2);E([xe("eDisplayField")],Uo.prototype,"eDisplayField",2);E([xe("eIcon")],Uo.prototype,"eIcon",2);var ml=class Da extends Ze{constructor(t="default",i=!1){super(`<div class="ag-list ag-${t}-list" role="listbox"></div>`),this.cssIdentifier=t,this.unFocusable=i,this.options=[],this.itemEls=[]}init(){const t=this.getGui();this.addManagedListener(t,"mouseleave",()=>this.clearHighlighted()),!this.unFocusable&&this.addManagedListener(t,"keydown",this.handleKeyDown.bind(this))}handleKeyDown(t){const i=t.key;switch(i){case Q.ENTER:if(!this.highlightedEl)this.setValue(this.getValue());else{const l=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(l)}break;case Q.DOWN:case Q.UP:const s=i===Q.DOWN;let n;if(t.preventDefault(),!this.highlightedEl)n=this.itemEls[s?0:this.itemEls.length-1];else{let u=this.itemEls.indexOf(this.highlightedEl)+(s?1:-1);u=Math.min(Math.max(u,0),this.itemEls.length-1),n=this.itemEls[u]}this.highlightItem(n);break}}addOptions(t){return t.forEach(i=>this.addOption(i)),this}addOption(t){const{value:i,text:s}=t,n=s||i;return this.options.push({value:i,text:n}),this.renderOption(i,n),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0),this.itemEls.forEach(t=>{hs(t)}),this.itemEls=[]}updateIndices(){const t=this.getGui().querySelectorAll(".ag-list-item");t.forEach((i,s)=>{dl(i,s+1),ll(i,t.length)})}renderOption(t,i){const s=this.gridOptionsService.getDocument(),n=s.createElement("div");jt(n,"option"),n.classList.add("ag-list-item",`ag-${this.cssIdentifier}-list-item`);const l=s.createElement("span");n.appendChild(l),l.innerText=i,this.unFocusable||(n.tabIndex=-1),this.itemEls.push(n),this.addManagedListener(n,"mousemove",()=>this.highlightItem(n)),this.addManagedListener(n,"mousedown",u=>{u.preventDefault(),this.setValue(t)}),this.createManagedBean(new $s({getTooltipValue:()=>i,getGui:()=>n,getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>l.scrollWidth>l.clientWidth})),this.getGui().appendChild(n)}setValue(t,i){if(this.value===t)return this.fireItemSelected(),this;if(t==null)return this.reset(i),this;const s=this.options.findIndex(n=>n.value===t);if(s!==-1){const n=this.options[s];this.value=n.value,this.displayValue=n.text,this.highlightItem(this.itemEls[s]),i||this.fireChangeEvent()}return this}setValueByIndex(t){return this.setValue(this.options[t].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();const t=this.options.findIndex(i=>i.value===this.value);t!==-1&&this.highlightItem(this.itemEls[t])}reset(t){this.value=null,this.displayValue=null,this.clearHighlighted(),t||this.fireChangeEvent()}highlightItem(t){if(!Ui(t))return;this.clearHighlighted(),this.highlightedEl=t,this.highlightedEl.classList.add(Da.ACTIVE_CLASS),xr(this.highlightedEl,!0);const i=this.getGui(),s=i.getBoundingClientRect(),n=s.top+i.scrollTop,l=s.height,{offsetTop:u,offsetHeight:g}=t;(u+g>n+l||u<n)&&this.highlightedEl.scrollIntoView({block:"nearest"}),this.unFocusable||this.highlightedEl.focus()}clearHighlighted(){!this.highlightedEl||!Ui(this.highlightedEl)||(this.highlightedEl.classList.remove(Da.ACTIVE_CLASS),xr(this.highlightedEl,!1),this.highlightedEl=null)}fireChangeEvent(){this.dispatchEvent({type:L.EVENT_FIELD_VALUE_CHANGED}),this.fireItemSelected()}fireItemSelected(){this.dispatchEvent({type:Da.EVENT_ITEM_SELECTED})}};ml.EVENT_ITEM_SELECTED="selectedItem";ml.ACTIVE_CLASS="ag-active-item";E([Ce],ml.prototype,"init",1);var Oc=ml,jp=class Kp extends Uo{constructor(t){super(We({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"smallDown",ariaRole:"combobox"},t))}postConstruct(){super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gridOptionsService.get("tabIndex");const{options:t,value:i,placeholder:s}=this.config;t!=null&&this.addOptions(t),i!=null&&this.setValue(i,!0),s&&i==null&&(this.eDisplayField.textContent=s),this.addManagedListener(this.eWrapper,"focusout",this.onWrapperFocusOut.bind(this))}onWrapperFocusOut(t){this.eWrapper.contains(t.relatedTarget)||this.hidePicker()}createListComponent(){this.listComponent=this.createBean(new Oc("select",!0)),this.listComponent.setParentComponent(this);const t=this.listComponent.getAriaElement(),i=`ag-select-list-${this.listComponent.getCompId()}`;t.setAttribute("id",i),Ch(this.getAriaElement(),t),this.listComponent.addManagedListener(this.listComponent,Oc.EVENT_ITEM_SELECTED,()=>{this.hidePicker(),this.dispatchEvent({type:Kp.EVENT_ITEM_SELECTED})}),this.listComponent.addManagedListener(this.listComponent,L.EVENT_FIELD_VALUE_CHANGED,()=>{!this.listComponent||(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())})}createPickerComponent(){return this.listComponent}onKeyDown(t){var i;const{key:s}=t;s===Q.TAB?this.hidePicker():!this.isPickerDisplayed||s!==Q.ENTER&&s!==Q.UP&&s!==Q.DOWN?super.onKeyDown(t):(i=this.listComponent)==null||i.handleKeyDown(t)}showPicker(){!this.listComponent||(super.showPicker(),this.listComponent.refreshHighlighted())}addOptions(t){return t.forEach(i=>this.addOption(i)),this}addOption(t){return this.listComponent.addOption(t),this}clearOptions(){var t;return(t=this.listComponent)==null||t.clearOptions(),this}setValue(t,i,s){if(this.value===t||!this.listComponent)return this;if(s||this.listComponent.setValue(t,!0),this.listComponent.getValue()===this.getValue())return this;let l=this.listComponent.getDisplayValue();return l==null&&this.config.placeholder&&(l=this.config.placeholder),this.eDisplayField.innerHTML=l,this.setTooltip({newTooltipText:l??null,shouldDisplayTooltip:()=>this.eDisplayField.scrollWidth>this.eDisplayField.clientWidth}),super.setValue(t,i)}destroy(){this.listComponent&&(this.destroyBean(this.listComponent),this.listComponent=void 0),super.destroy()}};jp.EVENT_ITEM_SELECTED="selectedItem";var vl=jp,cs=class extends $p{constructor(e,t,i="text",s="input"){super(e,`
            <div role="presentation">
                <div ref="eLabel" class="ag-input-field-label"></div>
                <div ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">
                    <${s} ref="eInput" class="ag-input-field-input"></${s}>
                </div>
            </div>`,t),this.inputType=i,this.displayFieldTag=s}postConstruct(){super.postConstruct(),this.setInputType(),this.eLabel.classList.add(`${this.className}-label`),this.eWrapper.classList.add(`${this.className}-input-wrapper`),this.eInput.classList.add(`${this.className}-input`),this.addCssClass("ag-input-field"),this.eInput.id=this.eInput.id||`ag-${this.getCompId()}-input`;const{inputName:e,inputWidth:t}=this.config;e!=null&&this.setInputName(e),t!=null&&this.setInputWidth(t),this.addInputListeners(),this.activateTabIndex([this.eInput])}addInputListeners(){this.addManagedListener(this.eInput,"input",e=>this.setValue(e.target.value))}setInputType(){this.displayFieldTag==="input"&&this.eInput.setAttribute("type",this.inputType)}getInputElement(){return this.eInput}setInputWidth(e){return An(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){const t=this.eInput;return t.maxLength=e,this}setInputPlaceholder(e){return Ss(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return fs(this.eInput,e),this.refreshAriaLabelledBy(),this}setDisabled(e){return Sr(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){if(e===!0)Ss(this.eInput,"autocomplete",null);else{const t=typeof e=="string"?e:"off";Ss(this.eInput,"autocomplete",t)}return this}};E([xe("eLabel")],cs.prototype,"eLabel",2);E([xe("eWrapper")],cs.prototype,"eWrapper",2);E([xe("eInput")],cs.prototype,"eInput",2);var Cl=class extends cs{constructor(e,t="ag-checkbox",i="checkbox"){super(e,t,i),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();const{readOnly:e,passive:t}=this.config;typeof e=="boolean"&&this.setReadOnly(e),typeof t=="boolean"&&this.setPassive(t)}addInputListeners(){this.addManagedListener(this.eInput,"click",this.onCheckboxClick.bind(this)),this.addManagedListener(this.eLabel,"click",this.toggle.bind(this))}getNextValue(){return this.selected===void 0?!0:!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;const e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}getValue(){return this.isSelected()}setValue(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this}setName(e){const t=this.getInputElement();return t.name=e,this}isSelected(){return this.selected}setSelected(e,t){this.isSelected()!==e&&(this.previousValue=this.isSelected(),e=this.selected=typeof e=="boolean"?e:void 0,this.eInput.checked=e,this.eInput.indeterminate=e===void 0,t||this.dispatchChange(this.selected,this.previousValue))}dispatchChange(e,t,i){this.dispatchEvent({type:L.EVENT_FIELD_VALUE_CHANGED,selected:e,previousValue:t,event:i});const s=this.getInputElement(),n={type:L.EVENT_CHECKBOX_CHANGED,id:s.id,name:s.name,selected:e,previousValue:t};this.eventService.dispatchEvent(n)}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;const t=this.isSelected(),i=this.selected=e.target.checked;this.refreshSelectedClass(i),this.dispatchChange(i,t,e)}refreshSelectedClass(e){this.eWrapper.classList.toggle("ag-checked",e===!0),this.eWrapper.classList.toggle("ag-indeterminate",e==null)}},qp=class extends Cl{constructor(e){super(e,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedListener(this.eventService,L.EVENT_CHECKBOX_CHANGED,this.onChange.bind(this))}onChange(e){e.selected&&e.name&&this.eInput.name&&this.eInput.name===e.name&&e.id&&this.eInput.id!==e.id&&this.setValue(!1,!0)}},Vh=class{constructor(e,t,i){this.localeService=e,this.optionsFactory=t,this.valueFormatter=i}getModelAsString(e){if(!e)return null;const t=e.operator!=null,i=this.localeService.getLocaleTextFunc();if(t){const s=e;let{conditions:n}=s;if(!n){const{condition1:g,condition2:C}=s;n=[g,C]}const l=n.map(g=>this.getModelAsString(g)),u=s.operator==="AND"?"andCondition":"orCondition";return l.join(` ${i(u,Up[u])} `)}else{if(e.type===Xt.BLANK||e.type===Xt.NOT_BLANK)return i(e.type,e.type);{const s=e,n=this.optionsFactory.getCustomOption(s.type),{displayKey:l,displayName:u,numberOfInputs:g}=n||{};return l&&u&&g===0?(i(l,u),u):this.conditionToString(s,n)}}}updateParams(e){this.optionsFactory=e.optionsFactory}formatValue(e){var t;return this.valueFormatter?(t=this.valueFormatter(e??null))!=null?t:"":String(e)}},Ti=class nr extends za{constructor(){super(...arguments),this.eTypes=[],this.eJoinOperatorPanels=[],this.eJoinOperatorsAnd=[],this.eJoinOperatorsOr=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}getNumberOfInputs(t){const i=this.optionsFactory.getCustomOption(t);if(i){const{numberOfInputs:n}=i;return n??1}const s=[nr.EMPTY,nr.NOT_BLANK,nr.BLANK];return t&&s.indexOf(t)>=0?0:t===nr.IN_RANGE?2:1}onFloatingFilterChanged(t,i){this.setTypeFromFloatingFilter(t),this.setValueFromFloatingFilter(i),this.onUiChanged(!0)}setTypeFromFloatingFilter(t){this.eTypes.forEach((i,s)=>{s===0?i.setValue(t,!0):i.setValue(this.optionsFactory.getDefaultOption(),!0)})}getModelFromUi(){const t=this.getUiCompleteConditions();return t.length===0?null:this.maxNumConditions>1&&t.length>1?{filterType:this.getFilterType(),operator:this.getJoinOperator(),condition1:t[0],condition2:t[1],conditions:t}:t[0]}getConditionTypes(){return this.eTypes.map(t=>t.getValue())}getConditionType(t){return this.eTypes[t].getValue()}getJoinOperator(){return this.eJoinOperatorsOr.length===0?this.defaultJoinOperator:this.eJoinOperatorsOr[0].getValue()===!0?"OR":"AND"}areModelsEqual(t,i){if(!t&&!i)return!0;if(!t&&i||t&&!i)return!1;const s=!t.operator,n=!i.operator;if(!s&&n||s&&!n)return!1;let u;if(s){const g=t,C=i;u=this.areSimpleModelsEqual(g,C)}else{const g=t,C=i;u=g.operator===C.operator&&bs(g.conditions,C.conditions,(S,A)=>this.areSimpleModelsEqual(S,A))}return u}shouldRefresh(t){var i,s,n;const l=this.getModel(),u=l?(i=l.conditions)!=null?i:[l]:null,g=(n=(s=t.filterOptions)==null?void 0:s.map(S=>typeof S=="string"?S:S.displayKey))!=null?n:this.getDefaultFilterOptions();return!(!(!u||u.every(S=>g.find(A=>A===S.type)!==void 0))||typeof t.maxNumConditions=="number"&&u&&u.length>t.maxNumConditions)}refresh(t){return!this.shouldRefresh(t)||!super.refresh(t)?!1:(this.setParams(t),this.removeConditionsAndOperators(0),this.createOption(),this.setModel(this.getModel()),!0)}setModelIntoUi(t){if(t.operator){let s=t;s.conditions||(s.conditions=[s.condition1,s.condition2]);const n=this.validateAndUpdateConditions(s.conditions),l=this.getNumConditions();if(n<l)this.removeConditionsAndOperators(n);else if(n>l)for(let g=l;g<n;g++)this.createJoinOperatorPanel(),this.createOption();const u=s.operator==="OR";this.eJoinOperatorsAnd.forEach(g=>g.setValue(!u,!0)),this.eJoinOperatorsOr.forEach(g=>g.setValue(u,!0)),s.conditions.forEach((g,C)=>{this.eTypes[C].setValue(g.type,!0),this.setConditionIntoUi(g,C)})}else{const s=t;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(s.type,!0),this.setConditionIntoUi(s,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),Bi.resolve()}validateAndUpdateConditions(t){let i=t.length;return i>this.maxNumConditions&&(t.splice(this.maxNumConditions),Ue('Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.'),i=this.maxNumConditions),i}doesFilterPass(t){var i;const s=this.getModel();if(s==null)return!0;const{operator:n}=s,l=[];if(n){const g=s;l.push(...(i=g.conditions)!=null?i:[])}else l.push(s);return l[n&&n==="OR"?"some":"every"](g=>this.individualConditionPasses(t,g))}setParams(t){super.setParams(t),this.setNumConditions(t),this.defaultJoinOperator=this.getDefaultJoinOperator(t.defaultJoinOperator),this.filterPlaceholder=t.filterPlaceholder,this.optionsFactory=new zp,this.optionsFactory.init(t,this.getDefaultFilterOptions()),this.createFilterListOptions(),this.createOption(),this.createMissingConditionsAndOperators(),this.isReadOnly()&&this.eFilterBody.setAttribute("tabindex","-1")}setNumConditions(t){var i,s;t.suppressAndOrCondition!=null&&Ue('Since v29.2 "filterParams.suppressAndOrCondition" is deprecated. Use "filterParams.maxNumConditions = 1" instead.'),t.alwaysShowBothConditions!=null&&Ue('Since v29.2 "filterParams.alwaysShowBothConditions" is deprecated. Use "filterParams.numAlwaysVisibleConditions = 2" instead.'),this.maxNumConditions=(i=t.maxNumConditions)!=null?i:t.suppressAndOrCondition?1:2,this.maxNumConditions<1&&(Ue('"filterParams.maxNumConditions" must be greater than or equal to zero.'),this.maxNumConditions=1),this.numAlwaysVisibleConditions=(s=t.numAlwaysVisibleConditions)!=null?s:t.alwaysShowBothConditions?2:1,this.numAlwaysVisibleConditions<1&&(Ue('"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.'),this.numAlwaysVisibleConditions=1),this.numAlwaysVisibleConditions>this.maxNumConditions&&(Ue('"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".'),this.numAlwaysVisibleConditions=this.maxNumConditions)}createOption(){const t=this.createManagedBean(new vl);this.eTypes.push(t),t.addCssClass("ag-filter-select"),this.eFilterBody.appendChild(t.getGui());const i=this.createValueElement();this.eConditionBodies.push(i),this.eFilterBody.appendChild(i),this.putOptionsIntoDropdown(t),this.resetType(t);const s=this.getNumConditions()-1;this.forEachPositionInput(s,n=>this.resetInput(n)),this.addChangedListeners(t,s)}createJoinOperatorPanel(){const t=document.createElement("div");this.eJoinOperatorPanels.push(t),t.classList.add("ag-filter-condition");const i=this.createJoinOperator(this.eJoinOperatorsAnd,t,"and"),s=this.createJoinOperator(this.eJoinOperatorsOr,t,"or");this.eFilterBody.appendChild(t);const n=this.eJoinOperatorPanels.length-1,l=this.joinOperatorId++;this.resetJoinOperatorAnd(i,n,l),this.resetJoinOperatorOr(s,n,l),this.isReadOnly()||(i.onValueChange(this.listener),s.onValueChange(this.listener))}createJoinOperator(t,i,s){const n=this.createManagedBean(new qp);return t.push(n),n.addCssClass("ag-filter-condition-operator"),n.addCssClass(`ag-filter-condition-operator-${s}`),i.appendChild(n.getGui()),n}getDefaultJoinOperator(t){return t==="AND"||t==="OR"?t:"AND"}createFilterListOptions(){const t=this.optionsFactory.getFilterOptions();this.filterListOptions=t.map(i=>typeof i=="string"?this.createBoilerplateListOption(i):this.createCustomListOption(i))}putOptionsIntoDropdown(t){this.filterListOptions.forEach(i=>{t.addOption(i)}),t.setDisabled(this.filterListOptions.length<=1)}createBoilerplateListOption(t){return{value:t,text:this.translate(t)}}createCustomListOption(t){const{displayKey:i}=t,s=this.optionsFactory.getCustomOption(t.displayKey);return{value:i,text:s?this.localeService.getLocaleTextFunc()(s.displayKey,s.displayName):this.translate(i)}}isAllowTwoConditions(){return this.maxNumConditions>=2}createBodyTemplate(){return""}getCssIdentifier(){return"simple-filter"}updateUiVisibility(){const t=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,t)}updateNumConditions(){var t;let i=-1,s=!0;for(let n=0;n<this.getNumConditions();n++)this.isConditionUiComplete(n)?i=n:s=!1;if(this.shouldAddNewConditionAtEnd(s))this.createJoinOperatorPanel(),this.createOption();else{const n=(t=this.lastUiCompletePosition)!=null?t:this.getNumConditions()-2;if(i<n){this.removeConditionsAndOperators(n+1);const l=i+1,u=n-l;u>0&&this.removeConditionsAndOperators(l,u),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=i}updateConditionStatusesAndValues(t,i){this.eTypes.forEach((n,l)=>{const u=this.isConditionDisabled(l,t);n.setDisabled(u||this.filterListOptions.length<=1),l===1&&(Sr(this.eJoinOperatorPanels[0],u),this.eJoinOperatorsAnd[0].setDisabled(u),this.eJoinOperatorsOr[0].setDisabled(u))}),this.eConditionBodies.forEach((n,l)=>{lt(n,this.isConditionBodyVisible(l))});const s=(i??this.getJoinOperator())==="OR";this.eJoinOperatorsAnd.forEach((n,l)=>{n.setValue(!s,!0)}),this.eJoinOperatorsOr.forEach((n,l)=>{n.setValue(s,!0)}),this.forEachInput((n,l,u,g)=>{this.setElementDisplayed(n,l<g),this.setElementDisabled(n,this.isConditionDisabled(u,t))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(t){return t&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(t,i){if(t>=this.getNumConditions())return;this.removeComponents(this.eTypes,t,i),this.removeElements(this.eConditionBodies,t,i),this.removeValueElements(t,i);const s=Math.max(t-1,0);this.removeElements(this.eJoinOperatorPanels,s,i),this.removeComponents(this.eJoinOperatorsAnd,s,i),this.removeComponents(this.eJoinOperatorsOr,s,i)}removeElements(t,i,s){this.removeItems(t,i,s).forEach(l=>hs(l))}removeComponents(t,i,s){this.removeItems(t,i,s).forEach(l=>{hs(l.getGui()),this.destroyBean(l)})}removeItems(t,i,s){return s==null?t.splice(i):t.splice(i,s)}afterGuiAttached(t){if(super.afterGuiAttached(t),this.resetPlaceholder(),!t?.suppressFocus)if(this.isReadOnly())this.eFilterBody.focus();else{const i=this.getInputs(0)[0];if(!i)return;i instanceof cs&&i.getInputElement().focus()}}afterGuiDetached(){super.afterGuiDetached();const t=this.getModel();this.resetUiToActiveModel(t);let i=-1,s=-1,n=!1;const l=this.getJoinOperator();for(let g=this.getNumConditions()-1;g>=0;g--)if(this.isConditionUiComplete(g))i===-1&&(i=g,s=g);else{const C=g>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(g-1),S=g<i;(C||S)&&(this.removeConditionsAndOperators(g,1),n=!0,S&&s--)}let u=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),u=!0),this.shouldAddNewConditionAtEnd(s===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),u=!0),u&&this.updateConditionStatusesAndValues(s,l),n&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=s}getPlaceholderText(t,i){let s=this.translate(t);if(ol(this.filterPlaceholder)){const n=this.filterPlaceholder,l=this.eTypes[i].getValue(),u=this.translate(l);s=n({filterOptionKey:l,filterOption:u,placeholder:s})}else typeof this.filterPlaceholder=="string"&&(s=this.filterPlaceholder);return s}resetPlaceholder(){const t=this.localeService.getLocaleTextFunc();this.forEachInput((i,s,n,l)=>{if(!(i instanceof cs))return;const u=s===0&&l>1?"inRangeStart":s===0?"filterOoo":"inRangeEnd",g=s===0&&l>1?t("ariaFilterFromValue","Filter from value"):s===0?t("ariaFilterValue","Filter Value"):t("ariaFilterToValue","Filter to Value");i.setInputPlaceholder(this.getPlaceholderText(u,n)),i.setInputAriaLabel(g)})}setElementValue(t,i,s){t instanceof cs&&t.setValue(i!=null?String(i):null,!0)}setElementDisplayed(t,i){t instanceof Ze&&lt(t.getGui(),i)}setElementDisabled(t,i){t instanceof Ze&&Sr(t.getGui(),i)}attachElementOnChange(t,i){t instanceof cs&&t.onValueChange(i)}forEachInput(t){this.getConditionTypes().forEach((i,s)=>{this.forEachPositionTypeInput(s,i,t)})}forEachPositionInput(t,i){const s=this.getConditionType(t);this.forEachPositionTypeInput(t,s,i)}forEachPositionTypeInput(t,i,s){const n=this.getNumberOfInputs(i),l=this.getInputs(t);for(let u=0;u<l.length;u++){const g=l[u];g!=null&&s(g,u,t,n)}}isConditionDisabled(t,i){return this.isReadOnly()?!0:t===0?!1:t>i+1}isConditionBodyVisible(t){const i=this.getConditionType(t);return this.getNumberOfInputs(i)>0}isConditionUiComplete(t){return!(t>=this.getNumConditions()||this.getConditionType(t)===nr.EMPTY||this.getValues(t).some(s=>s==null))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){const t=[];for(let i=0;i<this.getNumConditions();i++)this.isConditionUiComplete(i)&&t.push(this.createCondition(i));return t}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let t=this.getNumConditions();t<this.numAlwaysVisibleConditions;t++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(t){return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(i=>this.resetType(i)),this.eJoinOperatorsAnd.forEach((i,s)=>this.resetJoinOperatorAnd(i,s,this.joinOperatorId+s)),this.eJoinOperatorsOr.forEach((i,s)=>this.resetJoinOperatorOr(i,s,this.joinOperatorId+s)),this.joinOperatorId++,this.forEachInput(i=>this.resetInput(i)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,t||this.onUiChanged(),Bi.resolve()}resetType(t){const s=this.localeService.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");t.setValue(this.optionsFactory.getDefaultOption(),!0).setAriaLabel(s).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(t,i,s){this.resetJoinOperator(t,i,this.isDefaultOperator("AND"),this.translate("andCondition"),s)}resetJoinOperatorOr(t,i,s){this.resetJoinOperator(t,i,this.isDefaultOperator("OR"),this.translate("orCondition"),s)}resetJoinOperator(t,i,s,n,l){this.updateJoinOperatorDisabled(t.setValue(s,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${l}`).setLabel(n),i)}updateJoinOperatorsDisabled(){this.eJoinOperatorsAnd.forEach((t,i)=>this.updateJoinOperatorDisabled(t,i)),this.eJoinOperatorsOr.forEach((t,i)=>this.updateJoinOperatorDisabled(t,i))}updateJoinOperatorDisabled(t,i){t.setDisabled(this.isReadOnly()||i>0)}resetInput(t){this.setElementValue(t,null),this.setElementDisabled(t,this.isReadOnly())}setConditionIntoUi(t,i){const s=this.mapValuesFromModel(t);this.forEachInput((n,l,u,g)=>{u===i&&this.setElementValue(n,s[l]!=null?s[l]:null)})}setValueFromFloatingFilter(t){this.forEachInput((i,s,n,l)=>{this.setElementValue(i,s===0&&n===0?t:null,!0)})}isDefaultOperator(t){return t===this.defaultJoinOperator}addChangedListeners(t,i){this.isReadOnly()||(t.onValueChange(this.listener),this.forEachPositionInput(i,s=>{this.attachElementOnChange(s,this.listener)}))}individualConditionPasses(t,i){const s=this.getCellValue(t.node),n=this.mapValuesFromModel(i),l=this.optionsFactory.getCustomOption(i.type),u=this.evaluateCustomFilter(l,n,s);return u??(s==null?this.evaluateNullValue(i.type):this.evaluateNonNullValue(n,s,i,t))}evaluateCustomFilter(t,i,s){if(t==null)return;const{predicate:n}=t;if(n!=null&&!i.some(l=>l==null))return n(i,s)}isBlank(t){return t==null||typeof t=="string"&&t.trim().length===0}hasInvalidInputs(){return!1}};Ti.EMPTY="empty";Ti.BLANK="blank";Ti.NOT_BLANK="notBlank";Ti.EQUALS="equals";Ti.NOT_EQUAL="notEqual";Ti.LESS_THAN="lessThan";Ti.LESS_THAN_OR_EQUAL="lessThanOrEqual";Ti.GREATER_THAN="greaterThan";Ti.GREATER_THAN_OR_EQUAL="greaterThanOrEqual";Ti.IN_RANGE="inRange";Ti.CONTAINS="contains";Ti.NOT_CONTAINS="notContains";Ti.STARTS_WITH="startsWith";Ti.ENDS_WITH="endsWith";var Xt=Ti,oi=class li extends Xt{setParams(t){super.setParams(t),this.scalarFilterParams=t}evaluateNullValue(t){switch(t){case li.EQUALS:case li.NOT_EQUAL:if(this.scalarFilterParams.includeBlanksInEquals)return!0;break;case li.GREATER_THAN:case li.GREATER_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInGreaterThan)return!0;break;case li.LESS_THAN:case li.LESS_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInLessThan)return!0;break;case li.IN_RANGE:if(this.scalarFilterParams.includeBlanksInRange)return!0;break;case li.BLANK:return!0;case li.NOT_BLANK:return!1}return!1}evaluateNonNullValue(t,i,s){const n=this.comparator(),l=t[0]!=null?n(t[0],i):0;switch(s.type){case li.EQUALS:return l===0;case li.NOT_EQUAL:return l!==0;case li.GREATER_THAN:return l>0;case li.GREATER_THAN_OR_EQUAL:return l>=0;case li.LESS_THAN:return l<0;case li.LESS_THAN_OR_EQUAL:return l<=0;case li.IN_RANGE:{const u=n(t[1],i);return this.scalarFilterParams.inRangeInclusive?l>=0&&u<=0:l>0&&u<0}case li.BLANK:return this.isBlank(i);case li.NOT_BLANK:return!this.isBlank(i);default:return console.warn('AG Grid: Unexpected type of filter "'+s.type+'", it looks like the filter was configured with incorrect Filter Options'),!0}}},kc=1e3,Nc=1/0,Qp=class extends Vh{constructor(e,t,i){super(t,i),this.dateFilterParams=e}conditionToString(e,t){const{type:i}=e,{numberOfInputs:s}=t||{},n=i==Xt.IN_RANGE||s===2,l=ki(e.dateFrom),u=ki(e.dateTo),g=this.dateFilterParams.inRangeFloatingFilterDateFormat;if(n){const C=l!==null?Cr(l,g):"null",S=u!==null?Cr(u,g):"null";return`${C}-${S}`}return l!=null?Cr(l,g):`${i}`}updateParams(e){super.updateParams(e),this.dateFilterParams=e.dateFilterParams}},Hh=class Zp extends oi{constructor(){super("dateFilter"),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=kc,this.maxValidYear=Nc,this.minValidDate=null,this.maxValidDate=null}afterGuiAttached(t){super.afterGuiAttached(t),this.dateConditionFromComps[0].afterGuiAttached(t)}mapValuesFromModel(t){const{dateFrom:i,dateTo:s,type:n}=t||{};return[i&&ki(i)||null,s&&ki(s)||null].slice(0,this.getNumberOfInputs(n))}comparator(){return this.dateFilterParams.comparator?this.dateFilterParams.comparator:this.defaultComparator.bind(this)}defaultComparator(t,i){const s=i;return i==null||s<t?-1:s>t?1:0}setParams(t){this.dateFilterParams=t,super.setParams(t);const i=(s,n)=>{if(t[s]!=null)if(isNaN(t[s]))console.warn(`AG Grid: DateFilter ${s} is not a number`);else return t[s]==null?n:Number(t[s]);return n};this.minValidYear=i("minValidYear",kc),this.maxValidYear=i("maxValidYear",Nc),this.minValidYear>this.maxValidYear&&console.warn("AG Grid: DateFilter minValidYear should be <= maxValidYear"),t.minValidDate?this.minValidDate=t.minValidDate instanceof Date?t.minValidDate:ki(t.minValidDate):this.minValidDate=null,t.maxValidDate?this.maxValidDate=t.maxValidDate instanceof Date?t.maxValidDate:ki(t.maxValidDate):this.maxValidDate=null,this.minValidDate&&this.maxValidDate&&this.minValidDate>this.maxValidDate&&console.warn("AG Grid: DateFilter minValidDate should be <= maxValidDate"),this.filterModelFormatter=new Qp(this.dateFilterParams,this.localeService,this.optionsFactory)}createDateCompWrapper(t){const i=new Wp(this.getContext(),this.userComponentFactory,{onDateChanged:()=>this.onUiChanged(),filterParams:this.dateFilterParams},t);return this.addDestroyFunc(()=>i.destroy()),i}setElementValue(t,i){t.setDate(i)}setElementDisplayed(t,i){t.setDisplayed(i)}setElementDisabled(t,i){t.setDisabled(i)}getDefaultFilterOptions(){return Zp.DEFAULT_FILTER_OPTIONS}createValueElement(){const t=document.createElement("div");return t.classList.add("ag-filter-body"),this.createFromToElement(t,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(t,this.eConditionPanelsTo,this.dateConditionToComps,"to"),t}createFromToElement(t,i,s,n){const l=document.createElement("div");l.classList.add(`ag-filter-${n}`),l.classList.add(`ag-filter-date-${n}`),i.push(l),t.appendChild(l),s.push(this.createDateCompWrapper(l))}removeValueElements(t,i){this.removeDateComps(this.dateConditionFromComps,t,i),this.removeDateComps(this.dateConditionToComps,t,i),this.removeItems(this.eConditionPanelsFrom,t,i),this.removeItems(this.eConditionPanelsTo,t,i)}removeDateComps(t,i,s){this.removeItems(t,i,s).forEach(l=>l.destroy())}isValidDateValue(t){if(t===null)return!1;if(this.minValidDate){if(t<this.minValidDate)return!1}else if(t.getUTCFullYear()<this.minValidYear)return!1;if(this.maxValidDate){if(t>this.maxValidDate)return!1}else if(t.getUTCFullYear()>this.maxValidYear)return!1;return!0}isConditionUiComplete(t){if(!super.isConditionUiComplete(t))return!1;let i=!0;return this.forEachInput((s,n,l,u)=>{l!==t||!i||n>=u||(i=i&&this.isValidDateValue(s.getDate()))}),i}areSimpleModelsEqual(t,i){return t.dateFrom===i.dateFrom&&t.dateTo===i.dateTo&&t.type===i.type}getFilterType(){return"date"}createCondition(t){const i=this.getConditionType(t),s={},n=this.getValues(t);return n.length>0&&(s.dateFrom=Zi(n[0])),n.length>1&&(s.dateTo=Zi(n[1])),We({dateFrom:null,dateTo:null,filterType:this.getFilterType(),type:i},s)}resetPlaceholder(){const t=this.localeService.getLocaleTextFunc(),i=this.translate("dateFormatOoo"),s=t("ariaFilterValue","Filter Value");this.forEachInput(n=>{n.setInputPlaceholder(i),n.setInputAriaLabel(s)})}getInputs(t){return t>=this.dateConditionFromComps.length?[null,null]:[this.dateConditionFromComps[t],this.dateConditionToComps[t]]}getValues(t){const i=[];return this.forEachPositionInput(t,(s,n,l,u)=>{n<u&&i.push(s.getDate())}),i}translate(t){return t===oi.LESS_THAN?super.translate("before"):t===oi.GREATER_THAN?super.translate("after"):super.translate(t)}getModelAsString(t){var i;return(i=this.filterModelFormatter.getModelAsString(t))!=null?i:""}};Hh.DEFAULT_FILTER_OPTIONS=[oi.EQUALS,oi.NOT_EQUAL,oi.LESS_THAN,oi.GREATER_THAN,oi.IN_RANGE,oi.BLANK,oi.NOT_BLANK];E([N("userComponentFactory")],Hh.prototype,"userComponentFactory",2);var Jp=Hh,eg=class extends Ze{getDefaultDebounceMs(){return 0}destroy(){super.destroy()}isEventFromFloatingFilter(e){return e&&e.afterFloatingFilter}isEventFromDataChange(e){return e?.afterDataChange}getLastType(){return this.lastType}isReadOnly(){return this.readOnly}setLastTypeFromModel(e){if(!e){this.lastType=this.optionsFactory.getDefaultOption();return}const t=e.operator;let i;t?i=e.conditions[0]:i=e,this.lastType=i.type}canWeEditAfterModelFromParentFilter(e){if(!e)return this.isTypeEditable(this.lastType);if(e.operator)return!1;const i=e;return this.isTypeEditable(i.type)}init(e){this.setSimpleParams(e,!1)}setSimpleParams(e,t=!0){this.optionsFactory=new zp,this.optionsFactory.init(e.filterParams,this.getDefaultFilterOptions()),t||(this.lastType=this.optionsFactory.getDefaultOption()),this.readOnly=!!e.filterParams.readOnly;const i=this.isTypeEditable(this.optionsFactory.getDefaultOption());this.setEditable(i)}onParamsUpdated(e){this.refresh(e)}refresh(e){this.setSimpleParams(e)}doesFilterHaveSingleInput(e){const t=this.optionsFactory.getCustomOption(e),{numberOfInputs:i}=t||{};return i==null||i==1}isTypeEditable(e){const t=[Xt.IN_RANGE,Xt.EMPTY,Xt.BLANK,Xt.NOT_BLANK];return!!e&&!this.isReadOnly()&&this.doesFilterHaveSingleInput(e)&&t.indexOf(e)<0}},yl=class extends eg{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field ref="eReadOnlyText"></ag-input-text-field>
                <div ref="eDateWrapper" style="display: flex;"></div>
            </div>`)}getDefaultFilterOptions(){return Jp.DEFAULT_FILTER_OPTIONS}init(e){super.init(e),this.params=e,this.filterParams=e.filterParams,this.createDateComponent(),this.filterModelFormatter=new Qp(this.filterParams,this.localeService,this.optionsFactory);const t=this.localeService.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(t("ariaDateFilterInput","Date Filter Input"))}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.params=e,this.filterParams=e.filterParams,this.updateDateComponent(),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory,dateFilterParams:this.filterParams}),this.updateCompOnModelChange(e.currentParentModel())}updateCompOnModelChange(e){const t=!this.isReadOnly()&&this.canWeEditAfterModelFromParentFilter(e);if(this.setEditable(t),t){if(e){const i=e;this.dateComp.setDate(ki(i.dateFrom))}else this.dateComp.setDate(null);this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null)}setEditable(e){lt(this.eDateWrapper,e),lt(this.eReadOnlyText.getGui(),!e)}onParentModelChanged(e,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(super.setLastTypeFromModel(e),this.updateCompOnModelChange(e))}onDateChanged(){const e=this.dateComp.getDate(),t=Zi(e);this.params.parentFilterInstance(i=>{if(i){const s=ki(t);i.onFloatingFilterChanged(this.getLastType()||null,s)}})}getDateComponentParams(){const e=za.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs());return{onDateChanged:Ai(this.onDateChanged.bind(this),e),filterParams:this.params.column.getColDef().filterParams}}createDateComponent(){this.dateComp=new Wp(this.getContext(),this.userComponentFactory,this.getDateComponentParams(),this.eDateWrapper),this.addDestroyFunc(()=>this.dateComp.destroy())}updateDateComponent(){const e=this.gridOptionsService.addGridCommonParams(this.getDateComponentParams());this.dateComp.updateParams(e)}getFilterModelFormatter(){return this.filterModelFormatter}};E([N("userComponentFactory")],yl.prototype,"userComponentFactory",2);E([xe("eReadOnlyText")],yl.prototype,"eReadOnlyText",2);E([xe("eDateWrapper")],yl.prototype,"eDateWrapper",2);var tg=class extends Ze{constructor(){super(`
            <div class="ag-filter-filter">
                <ag-input-text-field class="ag-date-filter" ref="eDateInput"></ag-input-text-field>
            </div>`)}destroy(){super.destroy()}init(e){this.params=e,this.setParams(e);const t=this.gridOptionsService.getDocument(),i=this.eDateInput.getInputElement();this.addManagedListener(i,"mousedown",()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||i.focus()}),this.addManagedListener(i,"input",s=>{s.target===t.activeElement&&(this.eDateInput.isDisabled()||this.params.onDateChanged())})}setParams(e){const t=this.eDateInput.getInputElement(),i=this.shouldUseBrowserDatePicker(e);this.usingSafariDatePicker=i&&Ts(),t.type=i?"date":"text";const{minValidYear:s,maxValidYear:n,minValidDate:l,maxValidDate:u}=e.filterParams||{};if(l&&s&&Ue("DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored."),u&&n&&Ue("DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored."),l&&u){const[g,C]=[l,u].map(S=>S instanceof Date?S:ki(S));g&&C&&g.getTime()>C.getTime()&&Ue("DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.")}l?l instanceof Date?t.min=Cr(l):t.min=l:s&&(t.min=`${s}-01-01`),u?u instanceof Date?t.max=Cr(u):t.max=u:n&&(t.max=`${n}-12-31`)}onParamsUpdated(e){this.refresh(e)}refresh(e){this.params=e,this.setParams(e)}getDate(){return ki(this.eDateInput.getValue())}setDate(e){this.eDateInput.setValue(Zi(e,!1))}setInputPlaceholder(e){this.eDateInput.setInputPlaceholder(e)}setDisabled(e){this.eDateInput.setDisabled(e)}afterGuiAttached(e){(!e||!e.suppressFocus)&&this.eDateInput.getInputElement().focus()}shouldUseBrowserDatePicker(e){return e.filterParams&&e.filterParams.browserDatePicker!=null?e.filterParams.browserDatePicker:cl()||bh()||Ts()&&yh()>=14.1}};E([xe("eDateInput")],tg.prototype,"eDateInput",2);var Yo=class extends cs{constructor(e,t="ag-text-field",i="text"){super(e,t,i)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(e,t){return this.eInput.value!==e&&(this.eInput.value=ce(e)?e:""),super.setValue(e,t)}setStartValue(e){this.setValue(e,!0)}preventDisallowedCharacters(){const e=new RegExp(`[${this.config.allowedCharPattern}]`),t=i=>{!pl(i)||i.key&&!e.test(i.key)&&i.preventDefault()};this.addManagedListener(this.eInput,"keydown",t),this.addManagedListener(this.eInput,"paste",i=>{var s;const n=(s=i.clipboardData)==null?void 0:s.getData("text");n&&n.split("").some(l=>!e.test(l))&&i.preventDefault()})}},Bh=class extends Yo{constructor(e){super(e,"ag-number-field","number")}postConstruct(){super.postConstruct(),this.addManagedListener(this.eInput,"blur",()=>{const n=parseFloat(this.eInput.value),l=isNaN(n)?"":this.normalizeValue(n.toString());this.value!==l&&this.setValue(l)}),this.addManagedListener(this.eInput,"wheel",this.onWheel.bind(this)),this.eInput.step="any";const{precision:e,min:t,max:i,step:s}=this.config;typeof e=="number"&&this.setPrecision(e),typeof t=="number"&&this.setMin(t),typeof i=="number"&&this.setMax(i),typeof s=="number"&&this.setStep(s)}onWheel(e){document.activeElement===this.eInput&&e.preventDefault()}normalizeValue(e){if(e==="")return"";this.precision!=null&&(e=this.adjustPrecision(e));const t=parseFloat(e);return this.min!=null&&t<this.min?e=this.min.toString():this.max!=null&&t>this.max&&(e=this.max.toString()),e}adjustPrecision(e,t){if(this.precision==null)return e;if(t){const s=parseFloat(e).toFixed(this.precision);return parseFloat(s).toString()}const i=String(e).split(".");if(i.length>1){if(i[1].length<=this.precision)return e;if(this.precision>0)return`${i[0]}.${i[1].slice(0,this.precision)}`}return i[0]}setMin(e){return this.min===e?this:(this.min=e,Ss(this.eInput,"min",e),this)}setMax(e){return this.max===e?this:(this.max=e,Ss(this.eInput,"max",e),this)}setPrecision(e){return this.precision=e,this}setStep(e){return this.step===e?this:(this.step=e,Ss(this.eInput,"step",e),this)}setValue(e,t){return this.setValueOrInputValue(i=>super.setValue(i,t),()=>this,e)}setStartValue(e){return this.setValueOrInputValue(t=>super.setValue(t,!0),t=>{this.eInput.value=t},e)}setValueOrInputValue(e,t,i){if(ce(i)){let s=this.isScientificNotation(i);if(s&&this.eInput.validity.valid)return e(i);if(!s){i=this.adjustPrecision(i);const n=this.normalizeValue(i);s=i!=n}if(s)return t(i)}return e(i)}getValue(){if(!this.eInput.validity.valid)return;const e=this.eInput.value;return this.isScientificNotation(e)?this.adjustPrecision(e,!0):super.getValue()}isScientificNotation(e){return typeof e=="string"&&e.includes("e")}},ig=class extends Vh{conditionToString(e,t){const{numberOfInputs:i}=t||{};return e.type==Xt.IN_RANGE||i===2?`${this.formatValue(e.filter)}-${this.formatValue(e.filterTo)}`:e.filter!=null?this.formatValue(e.filter):`${e.type}`}};function Id(e){const{allowedCharPattern:t}=e??{};return t??null}var sg=class og extends oi{constructor(){super("numberFilter"),this.eValuesFrom=[],this.eValuesTo=[]}refresh(t){return this.numberFilterParams.allowedCharPattern!==t.allowedCharPattern?!1:super.refresh(t)}mapValuesFromModel(t){const{filter:i,filterTo:s,type:n}=t||{};return[this.processValue(i),this.processValue(s)].slice(0,this.getNumberOfInputs(n))}getDefaultDebounceMs(){return 500}comparator(){return(t,i)=>t===i?0:t<i?1:-1}setParams(t){this.numberFilterParams=t,super.setParams(t),this.filterModelFormatter=new ig(this.localeService,this.optionsFactory,this.numberFilterParams.numberFormatter)}getDefaultFilterOptions(){return og.DEFAULT_FILTER_OPTIONS}setElementValue(t,i,s){const n=!s&&this.numberFilterParams.numberFormatter?this.numberFilterParams.numberFormatter(i??null):i;super.setElementValue(t,n)}createValueElement(){const t=Id(this.numberFilterParams),i=document.createElement("div");return i.classList.add("ag-filter-body"),jt(i,"presentation"),this.createFromToElement(i,this.eValuesFrom,"from",t),this.createFromToElement(i,this.eValuesTo,"to",t),i}createFromToElement(t,i,s,n){const l=this.createManagedBean(n?new Yo({allowedCharPattern:n}):new Bh);l.addCssClass(`ag-filter-${s}`),l.addCssClass("ag-filter-filter"),i.push(l),t.appendChild(l.getGui())}removeValueElements(t,i){this.removeComponents(this.eValuesFrom,t,i),this.removeComponents(this.eValuesTo,t,i)}getValues(t){const i=[];return this.forEachPositionInput(t,(s,n,l,u)=>{n<u&&i.push(this.processValue(this.stringToFloat(s.getValue())))}),i}areSimpleModelsEqual(t,i){return t.filter===i.filter&&t.filterTo===i.filterTo&&t.type===i.type}getFilterType(){return"number"}processValue(t){return t==null||isNaN(t)?null:t}stringToFloat(t){if(typeof t=="number")return t;let i=xs(t);return i!=null&&i.trim()===""&&(i=null),this.numberFilterParams.numberParser?this.numberFilterParams.numberParser(i):i==null||i.trim()==="-"?null:parseFloat(i)}createCondition(t){const i=this.getConditionType(t),s={filterType:this.getFilterType(),type:i},n=this.getValues(t);return n.length>0&&(s.filter=n[0]),n.length>1&&(s.filterTo=n[1]),s}getInputs(t){return t>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[t],this.eValuesTo[t]]}getModelAsString(t){var i;return(i=this.filterModelFormatter.getModelAsString(t))!=null?i:""}hasInvalidInputs(){let t=!1;return this.forEachInput(i=>{if(!i.getInputElement().validity.valid){t=!0;return}}),t}};sg.DEFAULT_FILTER_OPTIONS=[oi.EQUALS,oi.NOT_EQUAL,oi.GREATER_THAN,oi.GREATER_THAN_OR_EQUAL,oi.LESS_THAN,oi.LESS_THAN_OR_EQUAL,oi.IN_RANGE,oi.BLANK,oi.NOT_BLANK];var rg=sg,ng=class extends Vh{conditionToString(e,t){const{numberOfInputs:i}=t||{};return e.type==Xt.IN_RANGE||i===2?`${e.filter}-${e.filterTo}`:e.filter!=null?`${e.filter}`:`${e.type}`}},as=class ar extends Xt{constructor(){super("textFilter"),this.eValuesFrom=[],this.eValuesTo=[]}static trimInput(t){const i=t&&t.trim();return i===""?t:i}getDefaultDebounceMs(){return 500}setParams(t){this.textFilterParams=t,super.setParams(t),this.matcher=this.getTextMatcher(),this.formatter=this.textFilterParams.textFormatter||(this.textFilterParams.caseSensitive?ar.DEFAULT_FORMATTER:ar.DEFAULT_LOWERCASE_FORMATTER),this.filterModelFormatter=new ng(this.localeService,this.optionsFactory)}getTextMatcher(){const t=this.textFilterParams.textCustomComparator;return t?(ot.warnOnce("textCustomComparator is deprecated, use textMatcher instead."),({filterOption:i,value:s,filterText:n})=>t(i,s,n)):this.textFilterParams.textMatcher||ar.DEFAULT_MATCHER}createCondition(t){const i=this.getConditionType(t),s={filterType:this.getFilterType(),type:i},n=this.getValuesWithSideEffects(t,!0);return n.length>0&&(s.filter=n[0]),n.length>1&&(s.filterTo=n[1]),s}getFilterType(){return"text"}areSimpleModelsEqual(t,i){return t.filter===i.filter&&t.filterTo===i.filterTo&&t.type===i.type}getInputs(t){return t>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[t],this.eValuesTo[t]]}getValues(t){return this.getValuesWithSideEffects(t,!1)}getValuesWithSideEffects(t,i){const s=[];return this.forEachPositionInput(t,(n,l,u,g)=>{var C;if(l<g){let S=xs(n.getValue());i&&this.textFilterParams.trimInput&&(S=(C=ar.trimInput(S))!=null?C:null,n.setValue(S,!0)),s.push(S)}}),s}getDefaultFilterOptions(){return ar.DEFAULT_FILTER_OPTIONS}createValueElement(){const t=document.createElement("div");return t.classList.add("ag-filter-body"),jt(t,"presentation"),this.createFromToElement(t,this.eValuesFrom,"from"),this.createFromToElement(t,this.eValuesTo,"to"),t}createFromToElement(t,i,s){const n=this.createManagedBean(new Yo);n.addCssClass(`ag-filter-${s}`),n.addCssClass("ag-filter-filter"),i.push(n),t.appendChild(n.getGui())}removeValueElements(t,i){this.removeComponents(this.eValuesFrom,t,i),this.removeComponents(this.eValuesTo,t,i)}mapValuesFromModel(t){const{filter:i,filterTo:s,type:n}=t||{};return[i||null,s||null].slice(0,this.getNumberOfInputs(n))}evaluateNullValue(t){const i=[Xt.NOT_EQUAL,Xt.NOT_CONTAINS,Xt.BLANK];return t?i.indexOf(t)>=0:!1}evaluateNonNullValue(t,i,s,n){const l=t.map(z=>this.formatter(z))||[],u=this.formatter(i),{api:g,colDef:C,column:S,columnApi:A,context:D,textFormatter:M}=this.textFilterParams;if(s.type===Xt.BLANK)return this.isBlank(i);if(s.type===Xt.NOT_BLANK)return!this.isBlank(i);const W={api:g,colDef:C,column:S,columnApi:A,context:D,node:n.node,data:n.data,filterOption:s.type,value:u,textFormatter:M};return l.some(z=>this.matcher(Vt(We({},W),{filterText:z})))}getModelAsString(t){var i;return(i=this.filterModelFormatter.getModelAsString(t))!=null?i:""}};as.DEFAULT_FILTER_OPTIONS=[Xt.CONTAINS,Xt.NOT_CONTAINS,Xt.EQUALS,Xt.NOT_EQUAL,Xt.STARTS_WITH,Xt.ENDS_WITH,Xt.BLANK,Xt.NOT_BLANK];as.DEFAULT_FORMATTER=e=>e;as.DEFAULT_LOWERCASE_FORMATTER=e=>e==null?null:e.toString().toLowerCase();as.DEFAULT_MATCHER=({filterOption:e,value:t,filterText:i})=>{if(i==null)return!1;switch(e){case as.CONTAINS:return t.indexOf(i)>=0;case as.NOT_CONTAINS:return t.indexOf(i)<0;case as.EQUALS:return t===i;case as.NOT_EQUAL:return t!=i;case as.STARTS_WITH:return t.indexOf(i)===0;case as.ENDS_WITH:const s=t.lastIndexOf(i);return s>=0&&s===t.length-i.length;default:return!1}};var Wh=as,ag=class extends ge{constructor(e){super(),this.params=e,this.valueChangedListener=()=>{}}setupGui(e){var t;this.eFloatingFilterTextInput=this.createManagedBean(new Yo((t=this.params)==null?void 0:t.config));const i=this.eFloatingFilterTextInput.getGui();e.appendChild(i),this.addManagedListener(i,"input",s=>this.valueChangedListener(s)),this.addManagedListener(i,"keydown",s=>this.valueChangedListener(s))}setEditable(e){this.eFloatingFilterTextInput.setDisabled(!e)}setAutoComplete(e){this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.eFloatingFilterTextInput.getValue()}setValue(e,t){this.eFloatingFilterTextInput.setValue(e,t)}setValueChangedListener(e){this.valueChangedListener=e}setParams(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterTextInput.setInputAriaLabel(e)}},Zn=class extends eg{postConstruct(){this.setTemplate(`
            <div class="ag-floating-filter-input" role="presentation" ref="eFloatingFilterInputContainer"></div>
        `)}getDefaultDebounceMs(){return 500}onParentModelChanged(e,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.floatingFilterInputService.setValue(this.getFilterModelFormatter().getModelAsString(e)))}init(e){this.setupFloatingFilterInputService(e),super.init(e),this.setTextInputParams(e)}setupFloatingFilterInputService(e){this.floatingFilterInputService=this.createFloatingFilterInputService(e),this.floatingFilterInputService.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(e){var t;this.params=e;const i=(t=e.browserAutoComplete)!=null?t:!1;if(this.floatingFilterInputService.setParams({ariaLabel:this.getAriaLabel(e),autoComplete:i}),this.applyActive=za.isUseApplyButton(this.params.filterParams),!this.isReadOnly()){const s=za.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs()),n=Ai(this.syncUpWithParentFilter.bind(this),s);this.floatingFilterInputService.setValueChangedListener(n)}}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.setTextInputParams(e)}recreateFloatingFilterInputService(e){const t=this.floatingFilterInputService.getValue();Jt(this.eFloatingFilterInputContainer),this.destroyBean(this.floatingFilterInputService),this.setupFloatingFilterInputService(e),this.floatingFilterInputService.setValue(t,!0)}getAriaLabel(e){const t=this.columnModel.getDisplayNameForColumn(e.column,"header",!0),i=this.localeService.getLocaleTextFunc();return`${t} ${i("ariaFilterInput","Filter Input")}`}syncUpWithParentFilter(e){const t=e.key===Q.ENTER;if(this.applyActive&&!t)return;let i=this.floatingFilterInputService.getValue();this.params.filterParams.trimInput&&(i=Wh.trimInput(i),this.floatingFilterInputService.setValue(i,!0)),this.params.parentFilterInstance(s=>{s&&s.onFloatingFilterChanged(this.getLastType()||null,i||null)})}setEditable(e){this.floatingFilterInputService.setEditable(e)}};E([N("columnModel")],Zn.prototype,"columnModel",2);E([xe("eFloatingFilterInputContainer")],Zn.prototype,"eFloatingFilterInputContainer",2);E([Ce],Zn.prototype,"postConstruct",1);var dy=class extends ge{constructor(){super(...arguments),this.valueChangedListener=()=>{},this.numberInputActive=!0}setupGui(e){this.eFloatingFilterNumberInput=this.createManagedBean(new Bh),this.eFloatingFilterTextInput=this.createManagedBean(new Yo),this.eFloatingFilterTextInput.setDisabled(!0);const t=this.eFloatingFilterNumberInput.getGui(),i=this.eFloatingFilterTextInput.getGui();e.appendChild(t),e.appendChild(i),this.setupListeners(t,s=>this.valueChangedListener(s)),this.setupListeners(i,s=>this.valueChangedListener(s))}setEditable(e){this.numberInputActive=e,this.eFloatingFilterNumberInput.setDisplayed(this.numberInputActive),this.eFloatingFilterTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(e){this.eFloatingFilterNumberInput.setAutoComplete(e),this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.getActiveInputElement().getValue()}setValue(e,t){this.getActiveInputElement().setValue(e,t)}getActiveInputElement(){return this.numberInputActive?this.eFloatingFilterNumberInput:this.eFloatingFilterTextInput}setValueChangedListener(e){this.valueChangedListener=e}setupListeners(e,t){this.addManagedListener(e,"input",t),this.addManagedListener(e,"keydown",t)}setParams(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterNumberInput.setInputAriaLabel(e),this.eFloatingFilterTextInput.setInputAriaLabel(e)}},hy=class extends Zn{init(e){var t;super.init(e),this.filterModelFormatter=new ig(this.localeService,this.optionsFactory,(t=e.filterParams)==null?void 0:t.numberFormatter)}onParamsUpdated(e){this.refresh(e)}refresh(e){Id(e.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return rg.DEFAULT_FILTER_OPTIONS}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(e){return this.allowedCharPattern=Id(e.filterParams),this.allowedCharPattern?this.createManagedBean(new ag({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new dy)}},cy=class extends Zn{init(e){super.init(e),this.filterModelFormatter=new ng(this.localeService,this.optionsFactory)}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return Wh.DEFAULT_FILTER_OPTIONS}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(){return this.createManagedBean(new ag)}},Jn=class dn{constructor(t,i=!1){this.destroyFuncs=[],this.touching=!1,this.eventService=new ps,this.eElement=t,this.preventMouseClick=i;const s=this.onTouchStart.bind(this),n=this.onTouchMove.bind(this),l=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",s,{passive:!0}),this.eElement.addEventListener("touchmove",n,{passive:!0}),this.eElement.addEventListener("touchend",l,{passive:!1}),this.destroyFuncs.push(()=>{this.eElement.removeEventListener("touchstart",s,{passive:!0}),this.eElement.removeEventListener("touchmove",n,{passive:!0}),this.eElement.removeEventListener("touchend",l,{passive:!1})})}getActiveTouch(t){for(let i=0;i<t.length;i++)if(t[i].identifier===this.touchStart.identifier)return t[i];return null}addEventListener(t,i){this.eventService.addEventListener(t,i)}removeEventListener(t,i){this.eventService.removeEventListener(t,i)}onTouchStart(t){if(this.touching)return;this.touchStart=t.touches[0],this.touching=!0,this.moved=!1;const i=this.touchStart;window.setTimeout(()=>{const s=this.touchStart===i;if(this.touching&&s&&!this.moved){this.moved=!0;const n={type:dn.EVENT_LONG_TAP,touchStart:this.touchStart,touchEvent:t};this.eventService.dispatchEvent(n)}},500)}onTouchMove(t){if(!this.touching)return;const i=this.getActiveTouch(t.touches);if(!i)return;!kh(i,this.touchStart,4)&&(this.moved=!0)}onTouchEnd(t){if(!!this.touching){if(!this.moved){const i={type:dn.EVENT_TAP,touchStart:this.touchStart};this.eventService.dispatchEvent(i),this.checkForDoubleTap()}this.preventMouseClick&&t.cancelable&&t.preventDefault(),this.touching=!1}}checkForDoubleTap(){const t=new Date().getTime();if(this.lastTapTime&&this.lastTapTime>0)if(t-this.lastTapTime>dn.DOUBLE_TAP_MILLIS){const s={type:dn.EVENT_DOUBLE_TAP,touchStart:this.touchStart};this.eventService.dispatchEvent(s),this.lastTapTime=null}else this.lastTapTime=t;else this.lastTapTime=t}destroy(){this.destroyFuncs.forEach(t=>t())}};Jn.EVENT_TAP="tap";Jn.EVENT_DOUBLE_TAP="doubleTap";Jn.EVENT_LONG_TAP="longTap";Jn.DOUBLE_TAP_MILLIS=500;var pi=Jn,js=class lg extends Ze{constructor(t){super(),t||this.setTemplate(lg.TEMPLATE)}attachCustomElements(t,i,s,n,l){this.eSortOrder=t,this.eSortAsc=i,this.eSortDesc=s,this.eSortMixed=n,this.eSortNone=l}setupSort(t,i=!1){this.column=t,this.suppressOrder=i,this.setupMultiSortIndicator(),this.column.isSortable()&&(this.addInIcon("sortAscending",this.eSortAsc,t),this.addInIcon("sortDescending",this.eSortDesc,t),this.addInIcon("sortUnSort",this.eSortNone,t),this.addManagedPropertyListener("unSortIcon",()=>this.updateIcons()),this.addManagedListener(this.eventService,L.EVENT_NEW_COLUMNS_LOADED,()=>this.updateIcons()),this.addManagedListener(this.eventService,L.EVENT_SORT_CHANGED,()=>this.onSortChanged()),this.addManagedListener(this.eventService,L.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.onSortChanged()),this.onSortChanged())}addInIcon(t,i,s){if(i==null)return;const n=Wt(t,this.gridOptionsService,s);n&&i.appendChild(n)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){const t=this.sortController.getDisplaySortForColumn(this.column);if(this.eSortAsc){const i=t==="asc";lt(this.eSortAsc,i,{skipAriaHidden:!0})}if(this.eSortDesc){const i=t==="desc";lt(this.eSortDesc,i,{skipAriaHidden:!0})}if(this.eSortNone){const i=!this.column.getColDef().unSortIcon&&!this.gridOptionsService.get("unSortIcon"),s=t==null;lt(this.eSortNone,!i&&s,{skipAriaHidden:!0})}}setupMultiSortIndicator(){this.addInIcon("sortUnSort",this.eSortMixed,this.column);const t=this.column.getColDef().showRowGroup;this.gridOptionsService.isColumnsSortingCoupledToGroup()&&t&&(this.addManagedListener(this.eventService,L.EVENT_SORT_CHANGED,()=>this.updateMultiSortIndicator()),this.addManagedListener(this.eventService,L.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.updateMultiSortIndicator()),this.updateMultiSortIndicator())}updateMultiSortIndicator(){if(this.eSortMixed){const t=this.sortController.getDisplaySortForColumn(this.column)==="mixed";lt(this.eSortMixed,t,{skipAriaHidden:!0})}}updateSortOrder(){var t;if(!this.eSortOrder)return;const i=this.sortController.getColumnsWithSortingOrdered(),s=(t=this.sortController.getDisplaySortIndexForColumn(this.column))!=null?t:-1,n=i.some(u=>{var g;return(g=this.sortController.getDisplaySortIndexForColumn(u))!=null?g:-1>=1}),l=s>=0&&n;lt(this.eSortOrder,l,{skipAriaHidden:!0}),s>=0?this.eSortOrder.textContent=(s+1).toString():Jt(this.eSortOrder)}};js.TEMPLATE=`<span class="ag-sort-indicator-container">
            <span ref="eSortOrder" class="ag-sort-indicator-icon ag-sort-order ag-hidden" aria-hidden="true"></span>
            <span ref="eSortAsc" class="ag-sort-indicator-icon ag-sort-ascending-icon ag-hidden" aria-hidden="true"></span>
            <span ref="eSortDesc" class="ag-sort-indicator-icon ag-sort-descending-icon ag-hidden" aria-hidden="true"></span>
            <span ref="eSortMixed" class="ag-sort-indicator-icon ag-sort-mixed-icon ag-hidden" aria-hidden="true"></span>
            <span ref="eSortNone" class="ag-sort-indicator-icon ag-sort-none-icon ag-hidden" aria-hidden="true"></span>
        </span>`;E([xe("eSortOrder")],js.prototype,"eSortOrder",2);E([xe("eSortAsc")],js.prototype,"eSortAsc",2);E([xe("eSortDesc")],js.prototype,"eSortDesc",2);E([xe("eSortMixed")],js.prototype,"eSortMixed",2);E([xe("eSortNone")],js.prototype,"eSortNone",2);E([N("columnModel")],js.prototype,"columnModel",2);E([N("sortController")],js.prototype,"sortController",2);var zh=js,Si=class dg extends Ze{constructor(){super(...arguments),this.lastMovingChanged=0}destroy(){super.destroy()}refresh(t){return this.params=t,this.workOutTemplate()!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||this.workOutSort()!=this.currentSort||this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide?!1:(this.setDisplayName(t),!0)}workOutTemplate(){var t;let i=(t=this.params.template)!=null?t:dg.TEMPLATE;return i=i&&i.trim?i.trim():i,i}init(t){this.params=t,this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate),this.setupTap(),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setupFilterButton(),this.setDisplayName(t)}setDisplayName(t){if(this.currentDisplayName!=t.displayName){this.currentDisplayName=t.displayName;const i=ai(this.currentDisplayName,!0);this.eText&&(this.eText.textContent=i)}}addInIcon(t,i,s){if(i==null)return;const n=Wt(t,this.gridOptionsService,s);n&&i.appendChild(n)}setupTap(){const{gridOptionsService:t}=this;if(t.get("suppressTouch"))return;const i=new pi(this.getGui(),!0),s=this.shouldSuppressMenuHide(),n=s&&ce(this.eMenu),l=n?new pi(this.eMenu,!0):i;if(this.params.enableMenu){const u=n?"EVENT_TAP":"EVENT_LONG_TAP",g=C=>this.params.showColumnMenuAfterMouseClick(C.touchStart);this.addManagedListener(l,pi[u],g)}if(this.params.enableSorting){const u=g=>{var C,S;const A=g.touchStart.target;s&&(((C=this.eMenu)==null?void 0:C.contains(A))||((S=this.eFilterButton)==null?void 0:S.contains(A)))||this.sortController.progressSort(this.params.column,!1,"uiColumnSorted")};this.addManagedListener(i,pi.EVENT_TAP,u)}if(this.params.enableFilterButton){const u=new pi(this.eFilterButton,!0);this.addManagedListener(u,"tap",()=>this.params.showFilter(this.eFilterButton)),this.addDestroyFunc(()=>u.destroy())}this.addDestroyFunc(()=>i.destroy()),n&&this.addDestroyFunc(()=>l.destroy())}workOutShowMenu(){return this.params.enableMenu&&this.menuService.isHeaderMenuButtonEnabled()}shouldSuppressMenuHide(){return this.menuService.isHeaderMenuButtonAlwaysShowEnabled()}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){hs(this.eMenu),this.eMenu=void 0;return}const t=this.menuService.isLegacyMenuEnabled();this.addInIcon(t?"menu":"menuAlt",this.eMenu,this.params.column),this.eMenu.classList.toggle("ag-header-menu-icon",!t),this.currentSuppressMenuHide=this.shouldSuppressMenuHide(),this.addManagedListener(this.eMenu,"click",()=>this.params.showColumnMenu(this.eMenu)),this.eMenu.classList.toggle("ag-header-menu-always-show",this.currentSuppressMenuHide)}onMenuKeyboardShortcut(t){var i,s,n,l;const{column:u}=this.params,g=this.menuService.isLegacyMenuEnabled();if(t&&!g){if(this.menuService.isFilterMenuInHeaderEnabled(u))return this.params.showFilter((s=(i=this.eFilterButton)!=null?i:this.eMenu)!=null?s:this.getGui()),!0}else if(this.params.enableMenu)return this.params.showColumnMenu((l=(n=this.eMenu)!=null?n:this.eFilterButton)!=null?l:this.getGui()),!0;return!1}workOutSort(){return this.params.enableSorting}setupSort(){if(this.currentSort=this.params.enableSorting,this.eSortIndicator||(this.eSortIndicator=this.context.createBean(new zh(!0)),this.eSortIndicator.attachCustomElements(this.eSortOrder,this.eSortAsc,this.eSortDesc,this.eSortMixed,this.eSortNone)),this.eSortIndicator.setupSort(this.params.column),!this.currentSort)return;this.addManagedListener(this.params.column,Lt.EVENT_MOVING_CHANGED,()=>{this.lastMovingChanged=new Date().getTime()}),this.eLabel&&this.addManagedListener(this.eLabel,"click",i=>{const s=this.params.column.isMoving(),l=new Date().getTime()-this.lastMovingChanged<50;if(!(s||l)){const C=this.gridOptionsService.get("multiSortKey")==="ctrl"?i.ctrlKey||i.metaKey:i.shiftKey;this.params.progressSort(C)}});const t=()=>{if(this.addOrRemoveCssClass("ag-header-cell-sorted-asc",this.params.column.isSortAscending()),this.addOrRemoveCssClass("ag-header-cell-sorted-desc",this.params.column.isSortDescending()),this.addOrRemoveCssClass("ag-header-cell-sorted-none",this.params.column.isSortNone()),this.params.column.getColDef().showRowGroup){const i=this.columnModel.getSourceColumnsForGroupColumn(this.params.column),n=!i?.every(l=>this.params.column.getSort()==l.getSort());this.addOrRemoveCssClass("ag-header-cell-sorted-mixed",n)}};this.addManagedListener(this.eventService,L.EVENT_SORT_CHANGED,t),this.addManagedListener(this.eventService,L.EVENT_COLUMN_ROW_GROUP_CHANGED,t)}setupFilterIcon(){!this.eFilter||this.configureFilter(this.params.enableFilterIcon,this.eFilter,this.onFilterChangedIcon.bind(this))}setupFilterButton(){if(!this.eFilterButton)return;this.configureFilter(this.params.enableFilterButton,this.eFilterButton,this.onFilterChangedButton.bind(this))?this.addManagedListener(this.eFilterButton,"click",()=>this.params.showFilter(this.eFilterButton)):this.eFilterButton=void 0}configureFilter(t,i,s){if(!t)return hs(i),!1;const{column:n}=this.params;return this.addInIcon("filter",i,n),this.addManagedListener(n,Lt.EVENT_FILTER_CHANGED,s),s(),!0}onFilterChangedIcon(){const t=this.params.column.isFilterActive();lt(this.eFilter,t,{skipAriaHidden:!0})}onFilterChangedButton(){const t=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",t)}getAnchorElementForMenu(t){var i,s,n,l;return t?(s=(i=this.eFilterButton)!=null?i:this.eMenu)!=null?s:this.getGui():(l=(n=this.eMenu)!=null?n:this.eFilterButton)!=null?l:this.getGui()}};Si.TEMPLATE=`<div class="ag-cell-label-container" role="presentation">
            <span ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>
            <span ref="eFilterButton" class="ag-header-icon ag-header-cell-filter-button" aria-hidden="true"></span>
            <div ref="eLabel" class="ag-header-cell-label" role="presentation">
                <span ref="eText" class="ag-header-cell-text"></span>
                <span ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>
                <ag-sort-indicator ref="eSortIndicator"></ag-sort-indicator>
            </div>
        </div>`;E([N("sortController")],Si.prototype,"sortController",2);E([N("menuService")],Si.prototype,"menuService",2);E([N("columnModel")],Si.prototype,"columnModel",2);E([xe("eFilter")],Si.prototype,"eFilter",2);E([xe("eFilterButton")],Si.prototype,"eFilterButton",2);E([xe("eSortIndicator")],Si.prototype,"eSortIndicator",2);E([xe("eMenu")],Si.prototype,"eMenu",2);E([xe("eLabel")],Si.prototype,"eLabel",2);E([xe("eText")],Si.prototype,"eText",2);E([xe("eSortOrder")],Si.prototype,"eSortOrder",2);E([xe("eSortAsc")],Si.prototype,"eSortAsc",2);E([xe("eSortDesc")],Si.prototype,"eSortDesc",2);E([xe("eSortMixed")],Si.prototype,"eSortMixed",2);E([xe("eSortNone")],Si.prototype,"eSortNone",2);var Od=Si,ea=class hg extends Ze{constructor(){super(hg.TEMPLATE)}destroy(){super.destroy()}init(t){this.params=t,this.checkWarnings(),this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()}checkWarnings(){this.params.template&&Ue("A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)")}setupExpandIcons(){this.addInIcon("columnGroupOpened","agOpened"),this.addInIcon("columnGroupClosed","agClosed");const t=n=>{if(us(n))return;const l=!this.params.columnGroup.isExpanded();this.columnModel.setColumnGroupOpened(this.params.columnGroup.getProvidedColumnGroup(),l,"uiColumnExpanded")};this.addTouchAndClickListeners(this.eCloseIcon,t),this.addTouchAndClickListeners(this.eOpenIcon,t);const i=n=>{gs(n)};this.addManagedListener(this.eCloseIcon,"dblclick",i),this.addManagedListener(this.eOpenIcon,"dblclick",i),this.addManagedListener(this.getGui(),"dblclick",t),this.updateIconVisibility();const s=this.params.columnGroup.getProvidedColumnGroup();this.addManagedListener(s,Qt.EVENT_EXPANDED_CHANGED,this.updateIconVisibility.bind(this)),this.addManagedListener(s,Qt.EVENT_EXPANDABLE_CHANGED,this.updateIconVisibility.bind(this))}addTouchAndClickListeners(t,i){const s=new pi(t,!0);this.addManagedListener(s,pi.EVENT_TAP,i),this.addDestroyFunc(()=>s.destroy()),this.addManagedListener(t,"click",i)}updateIconVisibility(){if(this.params.columnGroup.isExpandable()){const i=this.params.columnGroup.isExpanded();lt(this.eOpenIcon,i),lt(this.eCloseIcon,!i)}else lt(this.eOpenIcon,!1),lt(this.eCloseIcon,!1)}addInIcon(t,i){const s=Wt(t,this.gridOptionsService,null);s&&this.getRefElement(i).appendChild(s)}addGroupExpandIcon(){if(!this.params.columnGroup.isExpandable()){lt(this.eOpenIcon,!1),lt(this.eCloseIcon,!1);return}}setupLabel(){var t;const{displayName:i,columnGroup:s}=this.params;if(ce(i)){const n=ai(i,!0);this.getRefElement("agLabel").textContent=n}this.addOrRemoveCssClass("ag-sticky-label",!((t=s.getColGroupDef())!=null&&t.suppressStickyLabel))}};ea.TEMPLATE=`<div class="ag-header-group-cell-label" ref="agContainer" role="presentation">
            <span ref="agLabel" class="ag-header-group-text" role="presentation"></span>
            <span ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>
            <span ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>
        </div>`;E([N("columnModel")],ea.prototype,"columnModel",2);E([xe("agOpened")],ea.prototype,"eOpenIcon",2);E([xe("agClosed")],ea.prototype,"eCloseIcon",2);var uy=ea,Xo=class extends Ze{isPopup(){return!0}setParentComponent(e){e.addCssClass("ag-has-popup"),super.setParentComponent(e)}destroy(){const e=this.parentComponent;e&&e.isAlive()&&e.getGui().classList.remove("ag-has-popup"),super.destroy()}},Uh=class cg extends Xo{constructor(){super(cg.TEMPLATE)}init(t){this.params=t,this.focusAfterAttached=t.cellStartedEdit,this.eTextArea.setMaxLength(t.maxLength||200).setCols(t.cols||60).setRows(t.rows||10),ce(t.value,!0)&&this.eTextArea.setValue(t.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}onKeyDown(t){const i=t.key;(i===Q.LEFT||i===Q.UP||i===Q.RIGHT||i===Q.DOWN||t.shiftKey&&i===Q.ENTER)&&t.stopPropagation()}afterGuiAttached(){const t=this.localeService.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(t("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()}getValue(){const t=this.eTextArea.getValue();return!ce(t)&&!ce(this.params.value)?this.params.value:this.params.parseValue(t)}};Uh.TEMPLATE=`<div class="ag-large-text">
            <ag-input-text-area ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>
        </div>`;E([xe("eTextArea")],Uh.prototype,"eTextArea",2);var py=Uh,Yh=class extends Xo{constructor(){super(`<div class="ag-cell-edit-wrapper">
                <ag-select class="ag-cell-editor" ref="eSelect"></ag-select>
            </div>`),this.startedByEnter=!1}init(e){this.focusAfterAttached=e.cellStartedEdit;const{eSelect:t,valueFormatterService:i,gridOptionsService:s}=this,{values:n,value:l,eventKey:u}=e;if(Xe(n)){console.warn("AG Grid: no values found for select cellEditor");return}this.startedByEnter=u!=null?u===Q.ENTER:!1;let g=!1;n.forEach(D=>{const M={value:D},W=i.formatValue(e.column,null,D),z=W!=null;M.text=z?W:D,t.addOption(M),g=g||l===D}),g?t.setValue(e.value,!0):e.values.length&&t.setValue(e.values[0],!0);const{valueListGap:C,valueListMaxWidth:S,valueListMaxHeight:A}=e;C!=null&&t.setPickerGap(C),A!=null&&t.setPickerMaxHeight(A),S!=null&&t.setPickerMaxWidth(S),s.get("editType")!=="fullRow"&&this.addManagedListener(this.eSelect,vl.EVENT_ITEM_SELECTED,()=>e.stopEditing())}afterGuiAttached(){this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&setTimeout(()=>{this.isAlive()&&this.eSelect.showPicker()})}focusIn(){this.eSelect.getFocusableElement().focus()}getValue(){return this.eSelect.getValue()}isPopup(){return!1}};E([N("valueFormatterService")],Yh.prototype,"valueFormatterService",2);E([xe("eSelect")],Yh.prototype,"eSelect",2);var ta=class extends Xo{constructor(e){super(`
            <div class="ag-cell-edit-wrapper">
                ${e.getTemplate()}
            </div>`),this.cellEditorInput=e}init(e){this.params=e;const t=this.eInput;this.cellEditorInput.init(t,e);let i;if(e.cellStartedEdit){this.focusAfterAttached=!0;const s=e.eventKey;s===Q.BACKSPACE||e.eventKey===Q.DELETE?i="":s&&s.length===1?i=s:(i=this.cellEditorInput.getStartValue(),s!==Q.F2&&(this.highlightAllOnFocus=!0))}else this.focusAfterAttached=!1,i=this.cellEditorInput.getStartValue();i!=null&&t.setStartValue(i),this.addManagedListener(t.getGui(),"keydown",s=>{const{key:n}=s;(n===Q.PAGE_UP||n===Q.PAGE_DOWN)&&s.preventDefault()})}afterGuiAttached(){var e,t;const i=this.localeService.getLocaleTextFunc(),s=this.eInput;if(s.setInputAriaLabel(i("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;Ts()||s.getFocusableElement().focus();const n=s.getInputElement();this.highlightAllOnFocus?n.select():(t=(e=this.cellEditorInput).setCaret)==null||t.call(e)}focusIn(){const e=this.eInput,t=e.getFocusableElement(),i=e.getInputElement();t.focus(),i.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}};E([xe("eInput")],ta.prototype,"eInput",2);var gy=class{getTemplate(){return'<ag-input-text-field class="ag-cell-editor" ref="eInput"></ag-input-text-field>'}init(e,t){this.eInput=e,this.params=t,t.maxLength!=null&&e.setMaxLength(t.maxLength)}getValue(){const e=this.eInput.getValue();return!ce(e)&&!ce(this.params.value)?this.params.value:this.params.parseValue(e)}getStartValue(){return this.params.useFormatter||this.params.column.getColDef().refData?this.params.formatValue(this.params.value):this.params.value}setCaret(){const e=this.eInput.getValue(),t=ce(e)&&e.length||0;t&&this.eInput.getInputElement().setSelectionRange(t,t)}},Gc=class extends ta{constructor(){super(new gy)}},fy="\u2191",my="\u2193",ug=class extends Ze{constructor(){super(),this.refreshCount=0;const e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-change-delta");const i=document.createElement("span");i.setAttribute("class","ag-value-change-value"),e.appendChild(t),e.appendChild(i),this.setTemplateFromElement(e)}init(e){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(e,!0)}showDelta(e,t){const i=Math.abs(t),s=e.formatValue(i),n=ce(s)?s:i,l=t>=0;l?this.eDelta.textContent=fy+n:this.eDelta.textContent=my+n,this.eDelta.classList.toggle("ag-value-change-delta-up",l),this.eDelta.classList.toggle("ag-value-change-delta-down",!l)}setTimerToRemoveDelta(){this.refreshCount++;const e=this.refreshCount;this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.hideDeltaValue()},2e3)})}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),Jt(this.eDelta)}refresh(e,t=!1){const i=e.value;if(i===this.lastValue||(ce(e.valueFormatted)?this.eValue.textContent=e.valueFormatted:ce(e.value)?this.eValue.textContent=i:Jt(this.eValue),this.filterManager.isSuppressFlashingCellsBecauseFiltering()))return!1;if(typeof i=="number"&&typeof this.lastValue=="number"){const s=i-this.lastValue;this.showDelta(e,s)}return this.lastValue&&this.eValue.classList.add("ag-value-change-value-highlight"),t||this.setTimerToRemoveDelta(),this.lastValue=i,!0}};E([N("filterManager")],ug.prototype,"filterManager",2);var pg=class extends Ze{constructor(){super(),this.refreshCount=0;const e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-slide-current"),e.appendChild(t),this.setTemplateFromElement(e),this.eCurrent=this.queryForHtmlElement(".ag-value-slide-current")}init(e){this.refresh(e,!0)}addSlideAnimation(){this.refreshCount++;const e=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious);const t=document.createElement("span");t.setAttribute("class","ag-value-slide-previous ag-value-slide-out"),this.ePrevious=t,this.ePrevious.textContent=this.eCurrent.textContent,this.getGui().insertBefore(this.ePrevious,this.eCurrent),this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(()=>{e===this.refreshCount&&(this.getGui().removeChild(this.ePrevious),this.ePrevious=null)},3e3)})}refresh(e,t=!1){let i=e.value;return Xe(i)&&(i=""),i===this.lastValue||this.filterManager.isSuppressFlashingCellsBecauseFiltering()?!1:(t||this.addSlideAnimation(),this.lastValue=i,ce(e.valueFormatted)?this.eCurrent.textContent=e.valueFormatted:ce(e.value)?this.eCurrent.textContent=i:Jt(this.eCurrent),!0)}};E([N("filterManager")],pg.prototype,"filterManager",2);var Ht=class kt{constructor(t){this.rowIndex=null,this.key=null,this.childrenMapped={},this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=kt.OBJECT_ID_SEQUENCE++,this.__autoHeights={},this.alreadyRendered=!1,this.highlighted=null,this.hovered=!1,this.selected=!1,this.beans=t}setData(t){this.setDataCommon(t,!1)}updateData(t){this.setDataCommon(t,!0)}setDataCommon(t,i){const s=this.data;this.data=t,this.beans.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable(),this.resetQuickFilterAggregateText();const n=this.createDataChangedEvent(t,s,i);this.dispatchLocalEvent(n)}updateDataOnDetailNode(){this.detailNode&&(this.detailNode.data=this.data)}createDataChangedEvent(t,i,s){return{type:kt.EVENT_DATA_CHANGED,node:this,oldData:i,newData:t,update:s}}createLocalRowEvent(t){return{type:t,node:this}}getRowIndexString(){return this.rowPinned==="top"?"t-"+this.rowIndex:this.rowPinned==="bottom"?"b-"+this.rowIndex:this.rowIndex.toString()}createDaemonNode(){const t=new kt(this.beans);return t.id=this.id,t.data=this.data,t.__daemon=!0,t.selected=this.selected,t.level=this.level,t}setDataAndId(t,i){const s=ce(this.id)?this.createDaemonNode():null,n=this.data;this.data=t,this.updateDataOnDetailNode(),this.setId(i),this.checkRowSelectable(),this.beans.selectionService.syncInRowNode(this,s);const l=this.createDataChangedEvent(t,n,!1);this.dispatchLocalEvent(l)}checkRowSelectable(){const t=this.beans.gridOptionsService.get("isRowSelectable");this.setRowSelectable(t?t(this):!0)}setRowSelectable(t,i){if(this.selectable!==t){if(this.selectable=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(kt.EVENT_SELECTABLE_CHANGED)),i)return;if(this.beans.gridOptionsService.get("groupSelectsChildren")){const n=this.calculateSelectedFromChildren();this.setSelectedParams({newValue:n??!1,source:"selectableChanged"});return}this.isSelected()&&!this.selectable&&this.setSelectedParams({newValue:!1,source:"selectableChanged"})}}setId(t){const i=this.beans.gridOptionsService.getCallback("getRowId");if(i)if(this.data){const s=this.getGroupKeys(!0);this.id=i({data:this.data,parentKeys:s.length>0?s:void 0,level:this.level}),this.id!==null&&typeof this.id=="string"&&this.id.startsWith(kt.ID_PREFIX_ROW_GROUP)&&console.error(`AG Grid: Row IDs cannot start with ${kt.ID_PREFIX_ROW_GROUP}, this is a reserved prefix for AG Grid's row grouping feature.`),this.id!==null&&typeof this.id!="string"&&(this.id=""+this.id)}else this.id=void 0;else this.id=t}getGroupKeys(t=!1){const i=[];let s=this;for(t&&(s=s.parent);s&&s.level>=0;)i.push(s.key),s=s.parent;return i.reverse(),i}isPixelInRange(t){return!ce(this.rowTop)||!ce(this.rowHeight)?!1:t>=this.rowTop&&t<this.rowTop+this.rowHeight}setFirstChild(t){this.firstChild!==t&&(this.firstChild=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(kt.EVENT_FIRST_CHILD_CHANGED)))}setLastChild(t){this.lastChild!==t&&(this.lastChild=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(kt.EVENT_LAST_CHILD_CHANGED)))}setChildIndex(t){this.childIndex!==t&&(this.childIndex=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(kt.EVENT_CHILD_INDEX_CHANGED)))}setRowTop(t){this.oldRowTop=this.rowTop,this.rowTop!==t&&(this.rowTop=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(kt.EVENT_TOP_CHANGED)),this.setDisplayed(t!==null))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setDisplayed(t){this.displayed!==t&&(this.displayed=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(kt.EVENT_DISPLAYED_CHANGED)))}setDragging(t){this.dragging!==t&&(this.dragging=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(kt.EVENT_DRAGGING_CHANGED)))}setHighlighted(t){t!==this.highlighted&&(this.highlighted=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(kt.EVENT_HIGHLIGHT_CHANGED)))}setHovered(t){this.hovered!==t&&(this.hovered=t)}isHovered(){return this.hovered}setAllChildrenCount(t){this.allChildrenCount!==t&&(this.allChildrenCount=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(kt.EVENT_ALL_CHILDREN_COUNT_CHANGED)))}setMaster(t){this.master!==t&&(this.master&&!t&&(this.expanded=!1),this.master=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(kt.EVENT_MASTER_CHANGED)))}setGroup(t){this.group!==t&&(this.group&&!t&&(this.expanded=!1),this.group=t,this.updateHasChildren(),this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(kt.EVENT_GROUP_CHANGED)))}setRowHeight(t,i=!1){this.rowHeight=t,this.rowHeightEstimated=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(kt.EVENT_HEIGHT_CHANGED))}setRowAutoHeight(t,i){this.__autoHeights||(this.__autoHeights={}),this.__autoHeights[i.getId()]=t,t!=null&&(this.checkAutoHeightsDebounced==null&&(this.checkAutoHeightsDebounced=Ai(this.checkAutoHeights.bind(this),1)),this.checkAutoHeightsDebounced())}checkAutoHeights(){let t=!1,i=!0,s=0;const n=this.__autoHeights;if(n==null||(this.beans.columnModel.getAllDisplayedAutoHeightCols().forEach(g=>{let C=n[g.getId()];if(C==null)if(this.beans.columnModel.isColSpanActive()){let S=[];switch(g.getPinned()){case"left":S=this.beans.columnModel.getDisplayedLeftColumnsForRow(this);break;case"right":S=this.beans.columnModel.getDisplayedRightColumnsForRow(this);break;case null:S=this.beans.columnModel.getViewportCenterColumnsForRow(this);break}if(S.includes(g)){t=!0;return}C=-1}else{t=!0;return}else i=!1;C>s&&(s=C)}),t)||((i||s<10)&&(s=this.beans.gridOptionsService.getRowHeightForNode(this).height),s==this.rowHeight))return;this.setRowHeight(s);const u=this.beans.rowModel;u.onRowHeightChangedDebounced&&u.onRowHeightChangedDebounced()}setRowIndex(t){this.rowIndex!==t&&(this.rowIndex=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(kt.EVENT_ROW_INDEX_CHANGED)))}setUiLevel(t){this.uiLevel!==t&&(this.uiLevel=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(kt.EVENT_UI_LEVEL_CHANGED)))}setExpanded(t,i){if(this.expanded===t)return;this.expanded=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(kt.EVENT_EXPANDED_CHANGED));const s=Object.assign({},this.createGlobalRowEvent(L.EVENT_ROW_GROUP_OPENED),{expanded:t,event:i||null});this.beans.rowNodeEventThrottle.dispatchExpanded(s),this.sibling&&this.beans.rowRenderer.refreshCells({rowNodes:[this]})}createGlobalRowEvent(t){return this.beans.gridOptionsService.addGridCommonParams({type:t,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned})}dispatchLocalEvent(t){this.eventService&&this.eventService.dispatchEvent(t)}setDataValue(t,i,s){const l=(()=>{var C;return typeof t!="string"?t:(C=this.beans.columnModel.getGridColumn(t))!=null?C:this.beans.columnModel.getPrimaryColumn(t)})(),u=this.getValueFromValueService(l);if(this.beans.gridOptionsService.get("readOnlyEdit"))return this.dispatchEventForSaveValueReadOnly(l,u,i,s),!1;const g=this.beans.valueService.setValue(this,l,i,s);return this.dispatchCellChangedEvent(l,i,u),this.checkRowSelectable(),g}getValueFromValueService(t){const i=this.leafGroup&&this.beans.columnModel.isPivotMode(),s=this.group&&this.expanded&&!this.footer&&!i,l=this.beans.gridOptionsService.getGroupIncludeFooter()({node:this}),u=this.beans.gridOptionsService.get("groupSuppressBlankHeader"),g=s&&l&&!u;return this.beans.valueService.getValue(t,this,!1,g)}dispatchEventForSaveValueReadOnly(t,i,s,n){const l=this.beans.gridOptionsService.addGridCommonParams({type:L.EVENT_CELL_EDIT_REQUEST,event:null,rowIndex:this.rowIndex,rowPinned:this.rowPinned,column:t,colDef:t.getColDef(),data:this.data,node:this,oldValue:i,newValue:s,value:s,source:n});this.beans.eventService.dispatchEvent(l)}setGroupValue(t,i){const s=this.beans.columnModel.getGridColumn(t);Xe(this.groupData)&&(this.groupData={});const n=s.getColId(),l=this.groupData[n];l!==i&&(this.groupData[n]=i,this.dispatchCellChangedEvent(s,i,l))}setAggData(t){const i=this.aggData;if(this.aggData=t,this.eventService){const s=n=>{const l=this.aggData?this.aggData[n]:void 0,u=i?i[n]:void 0;if(l===u)return;const g=this.beans.columnModel.lookupGridColumn(n);!g||this.dispatchCellChangedEvent(g,l,u)};for(const n in this.aggData)s(n);for(const n in t)n in this.aggData||s(n)}}updateHasChildren(){let t=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;if(this.beans.gridOptionsService.isRowModelType("serverSide")){const s=this.beans.gridOptionsService.get("treeData"),n=this.beans.gridOptionsService.get("isServerSideGroup");t=!this.stub&&!this.footer&&(s?!!n&&n(this.data):!!this.group)}t!==this.__hasChildren&&(this.__hasChildren=!!t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(kt.EVENT_HAS_CHILDREN_CHANGED)))}hasChildren(){return this.__hasChildren==null&&this.updateHasChildren(),this.__hasChildren}isEmptyRowGroupNode(){return this.group&&Hi(this.childrenAfterGroup)}dispatchCellChangedEvent(t,i,s){const n={type:kt.EVENT_CELL_CHANGED,node:this,column:t,newValue:i,oldValue:s};this.dispatchLocalEvent(n)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){return this.footer?!1:this.beans.columnModel.isPivotMode()?this.hasChildren()&&!this.leafGroup:this.hasChildren()||!!this.master}isSelected(){return this.footer?this.sibling.isSelected():this.selected}depthFirstSearch(t){this.childrenAfterGroup&&this.childrenAfterGroup.forEach(i=>i.depthFirstSearch(t)),t(this)}calculateSelectedFromChildren(){var t;let i=!1,s=!1,n=!1;if(!((t=this.childrenAfterGroup)!=null&&t.length))return this.selectable?this.selected:null;for(let l=0;l<this.childrenAfterGroup.length;l++){const u=this.childrenAfterGroup[l];let g=u.isSelected();if(!u.selectable){const C=u.calculateSelectedFromChildren();if(C===null)continue;g=C}switch(g){case!0:i=!0;break;case!1:s=!0;break;default:n=!0;break}}if(!(n||i&&s))return i?!0:s?!1:this.selectable?this.selected:null}setSelectedInitialValue(t){this.selected=t}selectThisNode(t,i,s="api"){const n=!this.selectable&&t,l=this.selected===t;if(n||l)return!1;if(this.selected=t,this.eventService){this.dispatchLocalEvent(this.createLocalRowEvent(kt.EVENT_ROW_SELECTED));const g=this.sibling;g&&g.footer&&g.dispatchLocalEvent(g.createLocalRowEvent(kt.EVENT_ROW_SELECTED))}const u=Vt(We({},this.createGlobalRowEvent(L.EVENT_ROW_SELECTED)),{event:i||null,source:s});return this.beans.eventService.dispatchEvent(u),!0}setSelected(t,i=!1,s="api"){if(typeof s=="boolean"){console.warn("AG Grid: since version v30, rowNode.setSelected() property `suppressFinishActions` has been removed, please use `gridApi.setNodesSelected()` for bulk actions, and the event `source` property for ignoring events instead.");return}this.setSelectedParams({newValue:t,clearSelection:i,rangeSelect:!1,source:s})}setSelectedParams(t){return this.rowPinned?(console.warn("AG Grid: cannot select pinned rows"),0):this.id===void 0?(console.warn("AG Grid: cannot select node until id for node is known"),0):this.beans.selectionService.setNodesSelected(Vt(We({},t),{nodes:[this.footer?this.sibling:this]}))}isRowPinned(){return this.rowPinned==="top"||this.rowPinned==="bottom"}isParentOfNode(t){let i=this.parent;for(;i;){if(i===t)return!0;i=i.parent}return!1}addEventListener(t,i){var s,n;this.eventService||(this.eventService=new ps),this.beans.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.eventService.setFrameworkOverrides(this.beans.frameworkOverrides),this.frameworkEventListenerService=new dh(this.beans.frameworkOverrides));const l=(n=(s=this.frameworkEventListenerService)==null?void 0:s.wrap(i))!=null?n:i;this.eventService.addEventListener(t,l)}removeEventListener(t,i){var s,n;if(!this.eventService)return;const l=(n=(s=this.frameworkEventListenerService)==null?void 0:s.unwrap(i))!=null?n:i;this.eventService.removeEventListener(t,l),this.eventService.noRegisteredListenersExist()&&(this.eventService=null)}onMouseEnter(){this.dispatchLocalEvent(this.createLocalRowEvent(kt.EVENT_MOUSE_ENTER))}onMouseLeave(){this.dispatchLocalEvent(this.createLocalRowEvent(kt.EVENT_MOUSE_LEAVE))}getFirstChildOfFirstChild(t){let i=this,s=!0,n=!1,l=null;for(;s&&!n;){const u=i.parent;ce(u)&&i.firstChild?u.rowGroupColumn===t&&(n=!0,l=u):s=!1,i=u}return n?l:null}isFullWidthCell(){if(this.detail)return!0;const t=this.beans.gridOptionsService.getCallback("isFullWidthRow");return t?t({rowNode:this}):!1}getRoute(){if(this.key==null)return;const t=[];let i=this;for(;i.key!=null;)t.push(i.key),i=i.parent;return t.reverse()}createFooter(){if(this.sibling)return;const t=new Set(["eventService","__objectId","sticky"]),i=new kt(this.beans);Object.keys(this).forEach(s=>{t.has(s)||(i[s]=this[s])}),i.footer=!0,i.setRowTop(null),i.setRowIndex(null),i.oldRowTop=null,i.id="rowGroupFooter_"+this.id,i.sibling=this,this.sibling=i}destroyFooter(){!this.sibling||(this.sibling.setRowTop(null),this.sibling.setRowIndex(null),this.sibling=void 0)}};Ht.ID_PREFIX_ROW_GROUP="row-group-";Ht.ID_PREFIX_TOP_PINNED="t-";Ht.ID_PREFIX_BOTTOM_PINNED="b-";Ht.OBJECT_ID_SEQUENCE=0;Ht.EVENT_ROW_SELECTED="rowSelected";Ht.EVENT_DATA_CHANGED="dataChanged";Ht.EVENT_CELL_CHANGED="cellChanged";Ht.EVENT_ALL_CHILDREN_COUNT_CHANGED="allChildrenCountChanged";Ht.EVENT_MASTER_CHANGED="masterChanged";Ht.EVENT_GROUP_CHANGED="groupChanged";Ht.EVENT_MOUSE_ENTER="mouseEnter";Ht.EVENT_MOUSE_LEAVE="mouseLeave";Ht.EVENT_HEIGHT_CHANGED="heightChanged";Ht.EVENT_TOP_CHANGED="topChanged";Ht.EVENT_DISPLAYED_CHANGED="displayedChanged";Ht.EVENT_FIRST_CHILD_CHANGED="firstChildChanged";Ht.EVENT_LAST_CHILD_CHANGED="lastChildChanged";Ht.EVENT_CHILD_INDEX_CHANGED="childIndexChanged";Ht.EVENT_ROW_INDEX_CHANGED="rowIndexChanged";Ht.EVENT_EXPANDED_CHANGED="expandedChanged";Ht.EVENT_HAS_CHILDREN_CHANGED="hasChildrenChanged";Ht.EVENT_SELECTABLE_CHANGED="selectableChanged";Ht.EVENT_UI_LEVEL_CHANGED="uiLevelChanged";Ht.EVENT_HIGHLIGHT_CHANGED="rowHighlightChanged";Ht.EVENT_DRAGGING_CHANGED="draggingChanged";var st=Ht,bl=class extends Ze{constructor(){super(`
            <div class="ag-selection-checkbox" role="presentation">
                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>
            </div>`)}postConstruct(){this.eCheckbox.setPassive(!0)}getCheckboxId(){return this.eCheckbox.getInputElement().id}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){const e=this.localeService.getLocaleTextFunc(),t=this.rowNode.isSelected(),i=hl(e,t),[s,n]=this.rowNode.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],l=e(s,n);this.eCheckbox.setValue(t,!0),this.eCheckbox.setInputAriaLabel(`${l} (${i})`)}onClicked(e,t,i){return this.rowNode.setSelectedParams({newValue:e,rangeSelect:i.shiftKey,groupSelectsFiltered:t,event:i,source:"checkboxSelected"})}init(e){if(this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListener(this.eCheckbox.getInputElement(),"dblclick",s=>{gs(s)}),this.addManagedListener(this.eCheckbox.getInputElement(),"click",s=>{gs(s);const n=this.gridOptionsService.get("groupSelectsFiltered"),l=this.eCheckbox.getValue();this.shouldHandleIndeterminateState(l,n)?this.onClicked(!0,n,s||{})===0&&this.onClicked(!1,n,s):l?this.onClicked(!1,n,s):this.onClicked(!0,n,s||{})}),this.addManagedListener(this.rowNode,st.EVENT_ROW_SELECTED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.rowNode,st.EVENT_DATA_CHANGED,this.onDataChanged.bind(this)),this.addManagedListener(this.rowNode,st.EVENT_SELECTABLE_CHANGED,this.onSelectableChanged.bind(this)),this.gridOptionsService.get("isRowSelectable")||typeof this.getIsVisible()=="function"){const s=this.showOrHideSelect.bind(this);this.addManagedListener(this.eventService,L.EVENT_DISPLAYED_COLUMNS_CHANGED,s),this.addManagedListener(this.rowNode,st.EVENT_DATA_CHANGED,s),this.addManagedListener(this.rowNode,st.EVENT_CELL_CHANGED,s),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}shouldHandleIndeterminateState(e,t){return t&&(this.eCheckbox.getPreviousValue()===void 0||e===void 0)&&this.gridOptionsService.isRowModelType("clientSide")}showOrHideSelect(){var e,t,i;let s=this.rowNode.selectable;const n=this.getIsVisible();if(s)if(typeof n=="function"){const u=(e=this.overrides)==null?void 0:e.callbackParams;if(!this.column)s=n(Vt(We({},u),{node:this.rowNode,data:this.rowNode.data}));else{const g=this.column.createColumnFunctionCallbackParams(this.rowNode);s=n(We(We({},u),g))}}else s=n??!1;if((t=this.column)==null?void 0:t.getColDef().showDisabledCheckboxes){this.eCheckbox.setDisabled(!s),this.setVisible(!0),this.setDisplayed(!0);return}if((i=this.overrides)!=null&&i.removeHidden){this.setDisplayed(s);return}this.setVisible(s)}getIsVisible(){var e,t;return this.overrides?this.overrides.isVisible:(t=(e=this.column)==null?void 0:e.getColDef())==null?void 0:t.checkboxSelection}};E([xe("eCheckbox")],bl.prototype,"eCheckbox",2);E([Ce],bl.prototype,"postConstruct",1);var gg=(e=>(e[e.Left=0]="Left",e[e.Right=1]="Right",e))(gg||{}),Je=class extends ge{constructor(){super(...arguments),this.dragSourceAndParamsList=[],this.dropTargets=[]}init(){this.ePinnedIcon=Ki("columnMovePin",this.gridOptionsService,null),this.eHideIcon=Ki("columnMoveHide",this.gridOptionsService,null),this.eMoveIcon=Ki("columnMoveMove",this.gridOptionsService,null),this.eLeftIcon=Ki("columnMoveLeft",this.gridOptionsService,null),this.eRightIcon=Ki("columnMoveRight",this.gridOptionsService,null),this.eGroupIcon=Ki("columnMoveGroup",this.gridOptionsService,null),this.eAggregateIcon=Ki("columnMoveValue",this.gridOptionsService,null),this.ePivotIcon=Ki("columnMovePivot",this.gridOptionsService,null),this.eDropNotAllowedIcon=Ki("dropNotAllowed",this.gridOptionsService,null)}addDragSource(e,t=!1){const i={eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),includeTouch:t};this.dragSourceAndParamsList.push({params:i,dragSource:e}),this.dragService.addDragSource(i)}removeDragSource(e){const t=this.dragSourceAndParamsList.find(i=>i.dragSource===e);t&&(this.dragService.removeDragSource(t.params),Oi(this.dragSourceAndParamsList,t))}clearDragSourceParamsList(){this.dragSourceAndParamsList.forEach(e=>this.dragService.removeDragSource(e.params)),this.dragSourceAndParamsList.length=0,this.dropTargets.length=0}nudge(){this.dragging&&this.onDragging(this.eventLastTime,!0)}onDragStart(e,t){this.dragging=!0,this.dragSource=e,this.eventLastTime=t,this.dragItem=this.dragSource.getDragItem(),this.dragSource.onDragStarted&&this.dragSource.onDragStarted(),this.createGhost()}onDragStop(e){if(this.eventLastTime=null,this.dragging=!1,this.dragSource.onDragStopped&&this.dragSource.onDragStopped(),this.lastDropTarget&&this.lastDropTarget.onDragStop){const t=this.createDropTargetEvent(this.lastDropTarget,e,null,null,!1);this.lastDropTarget.onDragStop(t)}this.lastDropTarget=null,this.dragItem=null,this.removeGhost()}onDragging(e,t){var i,s,n,l;const u=this.getHorizontalDirection(e),g=this.getVerticalDirection(e);this.eventLastTime=e,this.positionGhost(e);const C=this.dropTargets.filter(A=>this.isMouseOnDropTarget(e,A)),S=this.findCurrentDropTarget(e,C);if(S!==this.lastDropTarget)this.leaveLastTargetIfExists(e,u,g,t),this.lastDropTarget!==null&&S===null&&((s=(i=this.dragSource).onGridExit)==null||s.call(i,this.dragItem)),this.lastDropTarget===null&&S!==null&&((l=(n=this.dragSource).onGridEnter)==null||l.call(n,this.dragItem)),this.enterDragTargetIfExists(S,e,u,g,t),this.lastDropTarget=S;else if(S&&S.onDragging){const A=this.createDropTargetEvent(S,e,u,g,t);S.onDragging(A)}}getAllContainersFromDropTarget(e){const t=e.getSecondaryContainers?e.getSecondaryContainers():null,i=[[e.getContainer()]];return t?i.concat(t):i}allContainersIntersect(e,t){for(const i of t){const s=i.getBoundingClientRect();if(s.width===0||s.height===0)return!1;const n=e.clientX>=s.left&&e.clientX<s.right,l=e.clientY>=s.top&&e.clientY<s.bottom;if(!n||!l)return!1}return!0}isMouseOnDropTarget(e,t){const i=this.getAllContainersFromDropTarget(t);let s=!1;for(const n of i)if(this.allContainersIntersect(e,n)){s=!0;break}return t.targetContainsSource&&!t.getContainer().contains(this.dragSource.eElement)?!1:s&&t.isInterestedIn(this.dragSource.type,this.dragSource.eElement)}findCurrentDropTarget(e,t){const i=t.length;if(i===0)return null;if(i===1)return t[0];const n=this.gridOptionsService.getRootNode().elementsFromPoint(e.clientX,e.clientY);for(const l of n)for(const u of t)if(Wu(this.getAllContainersFromDropTarget(u)).indexOf(l)!==-1)return u;return null}enterDragTargetIfExists(e,t,i,s,n){if(!!e){if(e.onDragEnter){const l=this.createDropTargetEvent(e,t,i,s,n);e.onDragEnter(l)}this.setGhostIcon(e.getIconName?e.getIconName():null)}}leaveLastTargetIfExists(e,t,i,s){if(!!this.lastDropTarget){if(this.lastDropTarget.onDragLeave){const n=this.createDropTargetEvent(this.lastDropTarget,e,t,i,s);this.lastDropTarget.onDragLeave(n)}this.setGhostIcon(null)}}addDropTarget(e){this.dropTargets.push(e)}removeDropTarget(e){this.dropTargets=this.dropTargets.filter(t=>t.getContainer()!==e.getContainer())}hasExternalDropZones(){return this.dropTargets.some(e=>e.external)}findExternalZone(e){return this.dropTargets.filter(i=>i.external).find(i=>i.getContainer()===e.getContainer())||null}getHorizontalDirection(e){const t=this.eventLastTime&&this.eventLastTime.clientX,i=e.clientX;return t===i?null:t>i?0:1}getVerticalDirection(e){const t=this.eventLastTime&&this.eventLastTime.clientY,i=e.clientY;return t===i?null:t>i?0:1}createDropTargetEvent(e,t,i,s,n){const l=e.getContainer(),u=l.getBoundingClientRect(),{gridApi:g,columnApi:C,dragItem:S,dragSource:A}=this,D=t.clientX-u.left,M=t.clientY-u.top;return{event:t,x:D,y:M,vDirection:s,hDirection:i,dragSource:A,fromNudge:n,dragItem:S,api:g,columnApi:C,dropZoneTarget:l}}positionGhost(e){const t=this.eGhost;if(!t)return;const s=t.getBoundingClientRect().height,n=mp()-2,l=vp()-2,u=Th(t.offsetParent),{clientY:g,clientX:C}=e;let S=g-u.top-s/2,A=C-u.left-10;const D=this.gridOptionsService.getDocument(),M=D.defaultView||window,W=M.pageYOffset||D.documentElement.scrollTop,z=M.pageXOffset||D.documentElement.scrollLeft;n>0&&A+t.clientWidth>n+z&&(A=n+z-t.clientWidth),A<0&&(A=0),l>0&&S+t.clientHeight>l+W&&(S=l+W-t.clientHeight),S<0&&(S=0),t.style.left=`${A}px`,t.style.top=`${S}px`}removeGhost(){this.eGhost&&this.eGhostParent&&this.eGhostParent.removeChild(this.eGhost),this.eGhost=null}createGhost(){this.eGhost=Ni(Je.GHOST_TEMPLATE),this.mouseEventService.stampTopLevelGridCompWithGridInstance(this.eGhost);const{theme:e}=this.environment.getTheme();e&&this.eGhost.classList.add(e),this.eGhostIcon=this.eGhost.querySelector(".ag-dnd-ghost-icon"),this.setGhostIcon(null);const t=this.eGhost.querySelector(".ag-dnd-ghost-label");let i=this.dragSource.dragItemName;ol(i)&&(i=i()),t.innerHTML=ai(i)||"",this.eGhost.style.height="25px",this.eGhost.style.top="20px",this.eGhost.style.left="20px";const s=this.gridOptionsService.getDocument();let n=null,l=null;try{n=s.fullscreenElement}catch{}finally{n||(n=this.gridOptionsService.getRootNode());const u=n.querySelector("body");u?l=u:n instanceof ShadowRoot?l=n:n instanceof Document?l=n?.documentElement:l=n}this.eGhostParent=l,this.eGhostParent?this.eGhostParent.appendChild(this.eGhost):console.warn("AG Grid: could not find document body, it is needed for dragging columns")}setGhostIcon(e,t=!1){Jt(this.eGhostIcon);let i=null;switch(e||(e=this.dragSource.getDefaultIconName?this.dragSource.getDefaultIconName():Je.ICON_NOT_ALLOWED),e){case Je.ICON_PINNED:i=this.ePinnedIcon;break;case Je.ICON_MOVE:i=this.eMoveIcon;break;case Je.ICON_LEFT:i=this.eLeftIcon;break;case Je.ICON_RIGHT:i=this.eRightIcon;break;case Je.ICON_GROUP:i=this.eGroupIcon;break;case Je.ICON_AGGREGATE:i=this.eAggregateIcon;break;case Je.ICON_PIVOT:i=this.ePivotIcon;break;case Je.ICON_NOT_ALLOWED:i=this.eDropNotAllowedIcon;break;case Je.ICON_HIDE:i=this.eHideIcon;break}this.eGhostIcon.classList.toggle("ag-shake-left-to-right",t),!(i===this.eHideIcon&&this.gridOptionsService.get("suppressDragLeaveHidesColumns"))&&i&&this.eGhostIcon.appendChild(i)}};Je.ICON_PINNED="pinned";Je.ICON_MOVE="move";Je.ICON_LEFT="left";Je.ICON_RIGHT="right";Je.ICON_GROUP="group";Je.ICON_AGGREGATE="aggregate";Je.ICON_PIVOT="pivot";Je.ICON_NOT_ALLOWED="notAllowed";Je.ICON_HIDE="hide";Je.GHOST_TEMPLATE=`<div class="ag-dnd-ghost ag-unselectable">
            <span class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>
            <div class="ag-dnd-ghost-label"></div>
        </div>`;E([N("dragService")],Je.prototype,"dragService",2);E([N("mouseEventService")],Je.prototype,"mouseEventService",2);E([N("columnApi")],Je.prototype,"columnApi",2);E([N("gridApi")],Je.prototype,"gridApi",2);E([Ce],Je.prototype,"init",1);E([Di],Je.prototype,"clearDragSourceParamsList",1);Je=E([Fe("dragAndDropService")],Je);var Oo=class extends Ze{constructor(e,t,i,s,n,l){super(),this.cellValueFn=e,this.rowNode=t,this.column=i,this.customGui=s,this.dragStartPixels=n,this.suppressVisibilityChange=l,this.dragSource=null}isCustomGui(){return this.customGui!=null}postConstruct(){if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(Wt("rowDrag",this.gridOptionsService,null)),this.addDragSource()),this.checkCompatibility(),!this.suppressVisibilityChange){const e=this.gridOptionsService.get("rowDragManaged")?new vg(this,this.beans,this.rowNode,this.column):new mg(this,this.beans,this.rowNode,this.column);this.createManagedBean(e,this.beans.context)}}setDragElement(e,t){this.setTemplateFromElement(e),this.addDragSource(t)}getSelectedNodes(){if(!this.gridOptionsService.get("rowDragMultiRow"))return[this.rowNode];const t=this.beans.selectionService.getSelectedNodes();return t.indexOf(this.rowNode)!==-1?t:[this.rowNode]}checkCompatibility(){const e=this.gridOptionsService.get("rowDragManaged");this.gridOptionsService.get("treeData")&&e&&Ue("If using row drag with tree data, you cannot have rowDragManaged=true")}getDragItem(){return{rowNode:this.rowNode,rowNodes:this.getSelectedNodes(),columns:this.column?[this.column]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(e){if(e){const t=e.getColDef();if(t.rowDragText)return t.rowDragText}return this.gridOptionsService.get("rowDragText")}addDragSource(e=4){this.dragSource&&this.removeDragSource();const t=this.localeService.getLocaleTextFunc();this.dragSource={type:2,eElement:this.getGui(),dragItemName:()=>{var i;const s=this.getDragItem(),n=((i=s.rowNodes)==null?void 0:i.length)||1,l=this.getRowDragText(this.column);return l?l(s,n):n===1?this.cellValueFn():`${n} ${t("rowDragRows","rows")}`},getDragItem:()=>this.getDragItem(),dragStartPixels:e,dragSourceDomDataKey:this.gridOptionsService.getDomDataKey()},this.beans.dragAndDropService.addDragSource(this.dragSource,!0)}removeDragSource(){this.dragSource&&this.beans.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null}};E([N("beans")],Oo.prototype,"beans",2);E([Ce],Oo.prototype,"postConstruct",1);E([Di],Oo.prototype,"removeDragSource",1);var fg=class extends ge{constructor(e,t,i){super(),this.parent=e,this.rowNode=t,this.column=i}setDisplayedOrVisible(e){const t={skipAriaHidden:!0};if(e)this.parent.setDisplayed(!1,t);else{let i=!0,s=!1;this.column&&(i=this.column.isRowDrag(this.rowNode)||this.parent.isCustomGui(),s=ol(this.column.getColDef().rowDrag)),s?(this.parent.setDisplayed(!0,t),this.parent.setVisible(i,t)):(this.parent.setDisplayed(i,t),this.parent.setVisible(!0,t))}}},mg=class extends fg{constructor(e,t,i,s){super(e,i,s),this.beans=t}postConstruct(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.addManagedListener(this.rowNode,st.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,st.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,st.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,L.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const e=this.gridOptionsService.get("suppressRowDrag");this.setDisplayedOrVisible(e)}};E([Ce],mg.prototype,"postConstruct",1);var vg=class extends fg{constructor(e,t,i,s){super(e,i,s),this.beans=t}postConstruct(){this.addManagedListener(this.beans.eventService,L.EVENT_SORT_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,L.EVENT_FILTER_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,L.EVENT_COLUMN_ROW_GROUP_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,L.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,st.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,st.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const t=this.beans.ctrlsService.getGridBodyCtrl().getRowDragFeature(),i=t&&t.shouldPreventRowMove(),s=this.gridOptionsService.get("suppressRowDrag"),n=this.beans.dragAndDropService.hasExternalDropZones(),l=i&&!n||s;this.setDisplayedOrVisible(l)}};E([Ce],vg.prototype,"postConstruct",1);var kr=class extends ge{init(e,t,i,s,n,l,u){var g,C,S,A;this.params=u,this.eGui=t,this.eCheckbox=i,this.eExpanded=s,this.eContracted=n,this.comp=e,this.compClass=l;const{node:D,value:M,colDef:W}=u,z=this.isTopLevelFooter();if(!z){if(this.isEmbeddedRowMismatch())return;if(D.footer&&this.gridOptionsService.get("groupHideOpenParents")){const X=W&&W.showRowGroup,q=D.rowGroupColumn&&D.rowGroupColumn.getColId();if(X!==q)return}}if(this.setupShowingValueForOpenedParent(),this.findDisplayedGroupNode(),!z){const U=u.node.footer&&u.node.rowGroupIndex===this.columnModel.getRowGroupColumns().findIndex(Y=>{var oe;return Y.getColId()===((oe=u.colDef)==null?void 0:oe.showRowGroup)}),q=this.gridOptionsService.get("groupDisplayType")!="multipleColumns"||this.gridOptionsService.get("treeData")||this.gridOptionsService.get("showOpenedGroup")&&!u.node.footer&&(!u.node.group||u.node.rowGroupIndex!=null&&u.node.rowGroupIndex>this.columnModel.getRowGroupColumns().findIndex(Y=>{var oe;return Y.getColId()===((oe=u.colDef)==null?void 0:oe.showRowGroup)})),_=!D.group&&(((g=this.params.colDef)==null?void 0:g.field)||((C=this.params.colDef)==null?void 0:C.valueGetter)),J=this.isExpandable(),se=this.columnModel.isPivotMode()&&D.leafGroup&&((S=D.rowGroupColumn)==null?void 0:S.getColId())===((A=u.column)==null?void 0:A.getColDef().showRowGroup);if(!this.showingValueForOpenedParent&&!J&&!_&&!q&&!U&&!se)return}this.addExpandAndContract(),this.addFullWidthRowDraggerIfNeeded(),this.addCheckboxIfNeeded(),this.addValueElement(),this.setupIndent(),this.refreshAriaExpanded()}getCellAriaRole(){var e,t;const i=(e=this.params.colDef)==null?void 0:e.cellAriaRole,s=(t=this.params.column)==null?void 0:t.getColDef().cellAriaRole;return i||s||"gridcell"}destroy(){super.destroy(),this.expandListener=null}refreshAriaExpanded(){const{node:e,eGridCell:t}=this.params;if(this.expandListener&&(this.expandListener=this.expandListener()),!this.isExpandable()){ap(t);return}const i=()=>{Hs(t,!!e.expanded)};this.expandListener=this.addManagedListener(e,st.EVENT_EXPANDED_CHANGED,i)||null,i()}isTopLevelFooter(){if(!this.gridOptionsService.get("groupIncludeTotalFooter")||this.params.value!=null||this.params.node.level!=-1)return!1;const e=this.params.colDef;if(e==null||e.showRowGroup===!0)return!0;const i=this.columnModel.getRowGroupColumns();return!i||i.length===0?!0:i[0].getId()===e.showRowGroup}isEmbeddedRowMismatch(){if(!this.params.fullWidth||!this.gridOptionsService.get("embedFullWidthRows"))return!1;const e=this.params.pinned==="left",t=this.params.pinned==="right",i=!e&&!t;return this.gridOptionsService.get("enableRtl")?this.columnModel.isPinningLeft()?!t:!i:this.columnModel.isPinningLeft()?!e:!i}findDisplayedGroupNode(){const e=this.params.column,t=this.params.node;if(this.showingValueForOpenedParent){let i=t.parent;for(;i!=null;){if(i.rowGroupColumn&&e.isRowGroupDisplayed(i.rowGroupColumn.getId())){this.displayedGroupNode=i;break}i=i.parent}}Xe(this.displayedGroupNode)&&(this.displayedGroupNode=t)}setupShowingValueForOpenedParent(){const e=this.params.node,t=this.params.column;if(!this.gridOptionsService.get("groupHideOpenParents")){this.showingValueForOpenedParent=!1;return}if(!e.groupData){this.showingValueForOpenedParent=!1;return}if(e.rowGroupColumn!=null){const n=e.rowGroupColumn.getId();if(t.isRowGroupDisplayed(n)){this.showingValueForOpenedParent=!1;return}}const s=e.groupData[t.getId()]!=null;this.showingValueForOpenedParent=s}addValueElement(){this.displayedGroupNode.footer?this.addFooterValue():(this.addGroupValue(),this.addChildCount())}addGroupValue(){var e;const t=this.adjustParamsWithDetailsFromRelatedColumn(),i=this.getInnerCompDetails(t),{valueFormatted:s,value:n}=t;let l=s;if(l==null){const u=this.displayedGroupNode.rowGroupColumn&&((e=this.params.column)==null?void 0:e.isRowGroupDisplayed(this.displayedGroupNode.rowGroupColumn.getId()));this.displayedGroupNode.key===""&&this.displayedGroupNode.group&&u?l=this.localeService.getLocaleTextFunc()("blanks","(Blanks)"):l=n??null}this.comp.setInnerRenderer(i,l)}adjustParamsWithDetailsFromRelatedColumn(){const e=this.displayedGroupNode.rowGroupColumn,t=this.params.column;if(!e)return this.params;if(t!=null&&!t.isRowGroupDisplayed(e.getId()))return this.params;const s=this.params,{value:n,node:l}=this.params,u=this.valueFormatterService.formatValue(e,l,n);return Vt(We({},s),{valueFormatted:u})}addFooterValue(){const e=this.params.footerValueGetter;let t="";if(e){const s=ah(this.params);s.value=this.params.value,typeof e=="function"?t=e(s):typeof e=="string"?t=this.expressionService.evaluate(e,s):console.warn("AG Grid: footerValueGetter should be either a function or a string (expression)")}else t=this.localeService.getLocaleTextFunc()("footerTotal","Total")+" "+(this.params.value!=null?this.params.value:"");const i=this.getInnerCompDetails(this.params);this.comp.setInnerRenderer(i,t)}getInnerCompDetails(e){if(e.fullWidth)return this.userComponentFactory.getFullWidthGroupRowInnerCellRenderer(this.gridOptionsService.get("groupRowRendererParams"),e);const t=this.userComponentFactory.getInnerRendererDetails(e,e),i=u=>u&&u.componentClass==this.compClass;if(t&&!i(t))return t;const s=this.displayedGroupNode.rowGroupColumn,n=s?s.getColDef():void 0;if(!n)return;const l=this.userComponentFactory.getCellRendererDetails(n,e);if(l&&!i(l))return l;if(i(l)&&n.cellRendererParams&&n.cellRendererParams.innerRenderer)return this.userComponentFactory.getInnerRendererDetails(n.cellRendererParams,e)}addChildCount(){this.params.suppressCount||(this.addManagedListener(this.displayedGroupNode,st.EVENT_ALL_CHILDREN_COUNT_CHANGED,this.updateChildCount.bind(this)),this.updateChildCount())}updateChildCount(){const e=this.displayedGroupNode.allChildrenCount,s=this.isShowRowGroupForThisRow()&&e!=null&&e>=0?`(${e})`:"";this.comp.setChildCount(s)}isShowRowGroupForThisRow(){if(this.gridOptionsService.get("treeData"))return!0;const e=this.displayedGroupNode.rowGroupColumn;if(!e)return!1;const t=this.params.column;return t==null||t.isRowGroupDisplayed(e.getId())}addExpandAndContract(){var e;const t=this.params,i=Wt("groupExpanded",this.gridOptionsService,null),s=Wt("groupContracted",this.gridOptionsService,null);i&&this.eExpanded.appendChild(i),s&&this.eContracted.appendChild(s);const n=t.eGridCell;!(((e=this.params.column)==null?void 0:e.isCellEditable(t.node))&&this.gridOptionsService.get("enableGroupEdit"))&&this.isExpandable()&&!t.suppressDoubleClickExpand&&this.addManagedListener(n,"dblclick",this.onCellDblClicked.bind(this)),this.addManagedListener(this.eExpanded,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eContracted,"click",this.onExpandClicked.bind(this)),this.addManagedListener(n,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(t.node,st.EVENT_EXPANDED_CHANGED,this.showExpandAndContractIcons.bind(this)),this.showExpandAndContractIcons();const u=this.onRowNodeIsExpandableChanged.bind(this);this.addManagedListener(this.displayedGroupNode,st.EVENT_ALL_CHILDREN_COUNT_CHANGED,u),this.addManagedListener(this.displayedGroupNode,st.EVENT_MASTER_CHANGED,u),this.addManagedListener(this.displayedGroupNode,st.EVENT_GROUP_CHANGED,u),this.addManagedListener(this.displayedGroupNode,st.EVENT_HAS_CHILDREN_CHANGED,u)}onExpandClicked(e){us(e)||(gs(e),this.onExpandOrContract(e))}onExpandOrContract(e){const t=this.displayedGroupNode,i=!t.expanded;!i&&t.sticky&&this.scrollToStickyNode(t),t.setExpanded(i,e)}scrollToStickyNode(e){this.ctrlsService.getGridBodyCtrl().getScrollFeature().setVerticalScrollPosition(e.rowTop-e.stickyRowTop)}isExpandable(){if(this.showingValueForOpenedParent)return!0;const e=this.displayedGroupNode,t=this.columnModel.isPivotMode()&&e.leafGroup;if(!(e.isExpandable()&&!e.footer&&!t))return!1;const s=this.params.column;return s!=null&&typeof s.getColDef().showRowGroup=="string"?this.isShowRowGroupForThisRow():!0}showExpandAndContractIcons(){const{params:e,displayedGroupNode:t,columnModel:i}=this,{node:s}=e,n=this.isExpandable();if(n){const S=this.showingValueForOpenedParent?!0:s.expanded;this.comp.setExpandedDisplayed(S),this.comp.setContractedDisplayed(!S)}else this.comp.setExpandedDisplayed(!1),this.comp.setContractedDisplayed(!1);const l=i.isPivotMode(),u=l&&t.leafGroup,g=n&&!u,C=s.footer&&s.level===-1;this.comp.addOrRemoveCssClass("ag-cell-expandable",g),this.comp.addOrRemoveCssClass("ag-row-group",g),l?this.comp.addOrRemoveCssClass("ag-pivot-leaf-group",u):C||this.comp.addOrRemoveCssClass("ag-row-group-leaf-indent",!g)}onRowNodeIsExpandableChanged(){this.showExpandAndContractIcons(),this.setIndent(),this.refreshAriaExpanded()}setupIndent(){const e=this.params.node;this.params.suppressPadding||(this.addManagedListener(e,st.EVENT_UI_LEVEL_CHANGED,this.setIndent.bind(this)),this.setIndent())}setIndent(){if(this.gridOptionsService.get("groupHideOpenParents"))return;const e=this.params,t=e.node,i=!!e.colDef,s=this.gridOptionsService.get("treeData"),l=!i||s||e.colDef.showRowGroup===!0?t.uiLevel:0;this.indentClass&&this.comp.addOrRemoveCssClass(this.indentClass,!1),this.indentClass="ag-row-group-indent-"+l,this.comp.addOrRemoveCssClass(this.indentClass,!0)}addFullWidthRowDraggerIfNeeded(){if(!this.params.fullWidth||!this.params.rowDrag)return;const e=new Oo(()=>this.params.value,this.params.node);this.createManagedBean(e,this.context),this.eGui.insertAdjacentElement("afterbegin",e.getGui())}isUserWantsSelected(){const e=this.params.checkbox;return typeof e=="function"||e===!0}addCheckboxIfNeeded(){const e=this.displayedGroupNode,t=this.isUserWantsSelected()&&!e.footer&&!e.rowPinned&&!e.detail;if(t){const i=new bl;this.getContext().createBean(i),i.init({rowNode:this.params.node,column:this.params.column,overrides:{isVisible:this.params.checkbox,callbackParams:this.params,removeHidden:!0}}),this.eCheckbox.appendChild(i.getGui()),this.addDestroyFunc(()=>this.getContext().destroyBean(i))}this.comp.setCheckboxVisible(t)}onKeyDown(e){!(e.key===Q.ENTER)||this.params.suppressEnterExpand||this.params.column&&this.params.column.isCellEditable(this.params.node)||this.onExpandOrContract(e)}onCellDblClicked(e){if(us(e))return;Va(this.eExpanded,e)||Va(this.eContracted,e)||this.onExpandOrContract(e)}};E([N("expressionService")],kr.prototype,"expressionService",2);E([N("valueFormatterService")],kr.prototype,"valueFormatterService",2);E([N("columnModel")],kr.prototype,"columnModel",2);E([N("userComponentFactory")],kr.prototype,"userComponentFactory",2);E([N("ctrlsService")],kr.prototype,"ctrlsService",2);var $o=class Cg extends Ze{constructor(){super(Cg.TEMPLATE)}init(t){const i={setInnerRenderer:(u,g)=>this.setRenderDetails(u,g),setChildCount:u=>this.eChildCount.textContent=u,addOrRemoveCssClass:(u,g)=>this.addOrRemoveCssClass(u,g),setContractedDisplayed:u=>lt(this.eContracted,u),setExpandedDisplayed:u=>lt(this.eExpanded,u),setCheckboxVisible:u=>this.eCheckbox.classList.toggle("ag-invisible",!u)},s=this.createManagedBean(new kr),n=!t.colDef,l=this.getGui();s.init(i,l,this.eCheckbox,this.eExpanded,this.eContracted,this.constructor,t),n&&jt(l,s.getCellAriaRole())}setRenderDetails(t,i){if(t){const s=t.newAgStackInstance();if(!s)return;s.then(n=>{if(!n)return;const l=()=>this.context.destroyBean(n);this.isAlive()?(this.eValue.appendChild(n.getGui()),this.addDestroyFunc(l)):l()})}else this.eValue.innerText=i}destroy(){this.getContext().destroyBean(this.innerCellRenderer),super.destroy()}refresh(){return!1}};$o.TEMPLATE=`<span class="ag-cell-wrapper">
            <span class="ag-group-expanded" ref="eExpanded"></span>
            <span class="ag-group-contracted" ref="eContracted"></span>
            <span class="ag-group-checkbox ag-invisible" ref="eCheckbox"></span>
            <span class="ag-group-value" ref="eValue"></span>
            <span class="ag-group-child-count" ref="eChildCount"></span>
        </span>`;E([xe("eExpanded")],$o.prototype,"eExpanded",2);E([xe("eContracted")],$o.prototype,"eContracted",2);E([xe("eCheckbox")],$o.prototype,"eCheckbox",2);E([xe("eValue")],$o.prototype,"eValue",2);E([xe("eChildCount")],$o.prototype,"eChildCount",2);var _c=$o,wl=class yg extends Ze{constructor(){super(yg.TEMPLATE)}init(t){t.node.failedLoad?this.setupFailed():this.setupLoading()}setupFailed(){const t=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=t("loadingError","ERR")}setupLoading(){const t=Wt("groupLoading",this.gridOptionsService,null);t&&this.eLoadingIcon.appendChild(t);const i=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=i("loadingOoo","Loading")}refresh(t){return!1}destroy(){super.destroy()}};wl.TEMPLATE=`<div class="ag-loading">
            <span class="ag-loading-icon" ref="eLoadingIcon"></span>
            <span class="ag-loading-text" ref="eLoadingText"></span>
        </div>`;E([xe("eLoadingIcon")],wl.prototype,"eLoadingIcon",2);E([xe("eLoadingText")],wl.prototype,"eLoadingText",2);var vy=wl,bg=class wg extends Ze{constructor(){super()}destroy(){super.destroy()}init(t){const i=this.gridOptionsService.get("overlayLoadingTemplate");if(this.setTemplate(i??wg.DEFAULT_LOADING_OVERLAY_TEMPLATE),!i){const s=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=s("loadingOoo","Loading...")})}}};bg.DEFAULT_LOADING_OVERLAY_TEMPLATE='<span aria-live="polite" aria-atomic="true" class="ag-overlay-loading-center"></span>';var Cy=bg,xg=class Sg extends Ze{constructor(){super()}destroy(){super.destroy()}init(t){const i=this.gridOptionsService.get("overlayNoRowsTemplate");if(this.setTemplate(i??Sg.DEFAULT_NO_ROWS_TEMPLATE),!i){const s=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=s("noRowsToShow","No Rows To Show")})}}};xg.DEFAULT_NO_ROWS_TEMPLATE='<span class="ag-overlay-no-rows-center"></span>';var yy=xg,by=class extends Xo{constructor(){super('<div class="ag-tooltip"></div>')}init(e){const{value:t}=e;this.getGui().textContent=ai(t,!0)}},wy=class{getTemplate(){return'<ag-input-number-field class="ag-cell-editor" ref="eInput"></ag-input-number-field>'}init(e,t){this.eInput=e,this.params=t,t.max!=null&&e.setMax(t.max),t.min!=null&&e.setMin(t.min),t.precision!=null&&e.setPrecision(t.precision),t.step!=null&&e.setStep(t.step);const i=e.getInputElement();t.preventStepping?e.addManagedListener(i,"keydown",this.preventStepping):t.showStepperButtons&&i.classList.add("ag-number-field-input-stepper")}preventStepping(e){(e.key===Q.UP||e.key===Q.DOWN)&&e.preventDefault()}getValue(){const e=this.eInput.getValue();if(!ce(e)&&!ce(this.params.value))return this.params.value;let t=this.params.parseValue(e);if(t==null)return t;if(typeof t=="string"){if(t==="")return null;t=Number(t)}return isNaN(t)?null:t}getStartValue(){return this.params.value}},xy=class extends ta{constructor(){super(new wy)}},Sy=class{getTemplate(){return'<ag-input-date-field class="ag-cell-editor" ref="eInput"></ag-input-date-field>'}init(e,t){this.eInput=e,this.params=t,t.min!=null&&e.setMin(t.min),t.max!=null&&e.setMax(t.max),t.step!=null&&e.setStep(t.step)}getValue(){const e=this.eInput.getDate();return!ce(e)&&!ce(this.params.value)?this.params.value:e??null}getStartValue(){const{value:e}=this.params;if(e instanceof Date)return Zi(e,!1)}},Ey=class extends ta{constructor(){super(new Sy)}},Ay=class{constructor(e){this.getDataTypeService=e}getTemplate(){return'<ag-input-date-field class="ag-cell-editor" ref="eInput"></ag-input-date-field>'}init(e,t){this.eInput=e,this.params=t,t.min!=null&&e.setMin(t.min),t.max!=null&&e.setMax(t.max),t.step!=null&&e.setStep(t.step)}getValue(){const e=this.formatDate(this.eInput.getDate());return!ce(e)&&!ce(this.params.value)?this.params.value:this.params.parseValue(e??"")}getStartValue(){var e,t;return Zi((t=this.parseDate((e=this.params.value)!=null?e:void 0))!=null?t:null,!1)}parseDate(e){return this.getDataTypeService().getDateParserFunction(this.params.column)(e)}formatDate(e){return this.getDataTypeService().getDateFormatterFunction(this.params.column)(e)}},Eg=class extends ta{constructor(){super(new Ay(()=>this.dataTypeService))}};E([N("dataTypeService")],Eg.prototype,"dataTypeService",2);var Xh=class Ag extends Ze{constructor(){super(Ag.TEMPLATE)}init(t){this.params=t,this.updateCheckbox(t);const i=this.eCheckbox.getInputElement();i.setAttribute("tabindex","-1"),ph(i,"polite"),this.addManagedListener(i,"click",n=>{if(gs(n),this.eCheckbox.isDisabled())return;const l=this.eCheckbox.getValue();this.onCheckboxChanged(l)}),this.addManagedListener(i,"dblclick",n=>{gs(n)});const s=this.gridOptionsService.getDocument();this.addManagedListener(this.params.eGridCell,"keydown",n=>{if(n.key===Q.SPACE&&!this.eCheckbox.isDisabled()){this.params.eGridCell===s.activeElement&&this.eCheckbox.toggle();const l=this.eCheckbox.getValue();this.onCheckboxChanged(l),n.preventDefault()}})}refresh(t){return this.params=t,this.updateCheckbox(t),!0}updateCheckbox(t){var i,s,n;let l,u=!0;if(t.node.group&&t.column){const D=t.column.getColId();D.startsWith(wr)?l=t.value==null||t.value===""?void 0:t.value==="true":t.node.aggData&&t.node.aggData[D]!==void 0?l=(i=t.value)!=null?i:void 0:u=!1}else l=(s=t.value)!=null?s:void 0;if(!u){this.eCheckbox.setDisplayed(!1);return}this.eCheckbox.setValue(l);const g=t.disabled!=null?t.disabled:!((n=t.column)!=null&&n.isCellEditable(t.node));this.eCheckbox.setDisabled(g);const C=this.localeService.getLocaleTextFunc(),S=hl(C,l),A=g?S:`${C("ariaToggleCellValue","Press SPACE to toggle cell value")} (${S})`;this.eCheckbox.setInputAriaLabel(A)}onCheckboxChanged(t){const{column:i,node:s,rowIndex:n,value:l}=this.params,u={type:L.EVENT_CELL_EDITING_STARTED,column:i,colDef:i?.getColDef(),data:s.data,node:s,rowIndex:n,rowPinned:s.rowPinned,value:l};this.eventService.dispatchEvent(u);const g=this.params.node.setDataValue(this.params.column,t,"edit"),C={type:L.EVENT_CELL_EDITING_STOPPED,column:i,colDef:i?.getColDef(),data:s.data,node:s,rowIndex:n,rowPinned:s.rowPinned,value:l,oldValue:l,newValue:t,valueChanged:g};this.eventService.dispatchEvent(C)}};Xh.TEMPLATE=`
        <div class="ag-cell-wrapper ag-checkbox-cell" role="presentation">
            <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>
        </div>`;E([xe("eCheckbox")],Xh.prototype,"eCheckbox",2);var Ry=Xh,Rg=class extends Xo{constructor(){super(`
            <div class="ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit">
                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>
            </div>`)}init(e){var t;this.params=e;const i=(t=e.value)!=null?t:void 0;this.eCheckbox.setValue(i),this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(i),this.addManagedListener(this.eCheckbox,L.EVENT_FIELD_VALUE_CHANGED,n=>this.setAriaLabel(n.selected))}getValue(){return this.eCheckbox.getValue()}focusIn(){this.eCheckbox.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(e){const t=this.localeService.getLocaleTextFunc(),i=hl(t,e),s=t("ariaToggleCellValue","Press SPACE to toggle cell value");this.eCheckbox.setInputAriaLabel(`${s} (${i})`)}};E([xe("eCheckbox")],Rg.prototype,"eCheckbox",2);var Dy=class extends Ze{constructor(){super(),this.setTemplate("<div></div>")}init(e){var t;this.params=e,this.cssClassPrefix=(t=this.params.cssClassPrefix)!=null?t:"ag-menu-option",this.addIcon(),this.addName(),this.addShortcut(),this.addSubMenu()}configureDefaults(){return!0}addIcon(){if(this.params.isCompact)return;const e=Ni(`<span ref="eIcon" class="${this.getClassName("part")} ${this.getClassName("icon")}" role="presentation"></span>`);this.params.checked?e.appendChild(Wt("check",this.gridOptionsService)):this.params.icon&&(jn(this.params.icon)?e.appendChild(this.params.icon):typeof this.params.icon=="string"?e.innerHTML=this.params.icon:console.warn("AG Grid: menu item icon must be DOM node or string")),this.getGui().appendChild(e)}addName(){const e=Ni(`<span ref="eName" class="${this.getClassName("part")} ${this.getClassName("text")}">${this.params.name||""}</span>`);this.getGui().appendChild(e)}addShortcut(){if(this.params.isCompact)return;const e=Ni(`<span ref="eShortcut" class="${this.getClassName("part")} ${this.getClassName("shortcut")}">${this.params.shortcut||""}</span>`);this.getGui().appendChild(e)}addSubMenu(){const e=Ni(`<span ref="ePopupPointer" class="${this.getClassName("part")} ${this.getClassName("popup-pointer")}"></span>`),t=this.getGui();if(this.params.subMenu){const i=this.gridOptionsService.get("enableRtl")?"smallLeft":"smallRight";Hs(t,!1),e.appendChild(Wt(i,this.gridOptionsService))}t.appendChild(e)}getClassName(e){return`${this.cssClassPrefix}-${e}`}destroy(){super.destroy()}},Rn=class extends ge{constructor(){super(...arguments),this.agGridDefaults={agDateInput:tg,agColumnHeader:Od,agColumnGroupHeader:uy,agSortIndicator:zh,agTextColumnFloatingFilter:cy,agNumberColumnFloatingFilter:hy,agDateColumnFloatingFilter:yl,agReadOnlyFloatingFilter:Gh,agAnimateShowChangeCellRenderer:ug,agAnimateSlideCellRenderer:pg,agGroupCellRenderer:_c,agGroupRowRenderer:_c,agLoadingCellRenderer:vy,agCheckboxCellRenderer:Ry,agCellEditor:Gc,agTextCellEditor:Gc,agNumberCellEditor:xy,agDateCellEditor:Ey,agDateStringCellEditor:Eg,agSelectCellEditor:Yh,agLargeTextCellEditor:py,agCheckboxCellEditor:Rg,agTextColumnFilter:Wh,agNumberColumnFilter:rg,agDateColumnFilter:Jp,agLoadingOverlay:Cy,agNoRowsOverlay:yy,agTooltipComponent:by,agMenuItem:Dy},this.enterpriseAgDefaultCompsModule={agSetColumnFilter:"@ag-grid-enterprise/set-filter",agSetColumnFloatingFilter:"@ag-grid-enterprise/set-filter",agMultiColumnFilter:"@ag-grid-enterprise/multi-filter",agMultiColumnFloatingFilter:"@ag-grid-enterprise/multi-filter",agGroupColumnFilter:"@ag-grid-enterprise/row-grouping",agGroupColumnFloatingFilter:"@ag-grid-enterprise/row-grouping",agRichSelect:"@ag-grid-enterprise/rich-select",agRichSelectCellEditor:"@ag-grid-enterprise/rich-select",agDetailCellRenderer:"@ag-grid-enterprise/master-detail",agSparklineCellRenderer:"@ag-grid-enterprise/sparklines"},this.jsComps={}}init(){this.gridOptions.components!=null&&bi(this.gridOptions.components,(e,t)=>this.registerJsComponent(e,t))}registerDefaultComponent(e,t){if(this.agGridDefaults[e]){console.error("Trying to overwrite a default component. You should call registerComponent");return}this.agGridDefaults[e]=t}registerJsComponent(e,t){this.jsComps[e]=t}retrieve(e,t){const i=(g,C)=>({componentFromFramework:C,component:g}),s=this.getFrameworkOverrides().frameworkComponent(t,this.gridOptions.components);if(s!=null)return i(s,!0);const n=this.jsComps[t];if(n){const g=this.getFrameworkOverrides().isFrameworkComponent(n);return i(n,g)}const l=this.agGridDefaults[t];if(l)return i(l,!1);const u=this.enterpriseAgDefaultCompsModule[t];return u?Rt.__assertRegistered(u,`AG Grid '${e}' component: ${t}`,this.context.getGridId()):Ro(()=>{this.warnAboutMissingComponent(e,t)},"MissingComp"+t),null}warnAboutMissingComponent(e,t){const i=[...Object.keys(this.agGridDefaults).filter(n=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(n)),...Object.keys(this.jsComps)],s=Kn(t,i,!0,.8).values;console.warn(`AG Grid: Could not find '${t}' component. It was configured as "${e}: '${t}'" but it wasn't found in the list of registered components.`),s.length>0&&console.warn(`         Did you mean: [${s.slice(0,3)}]?`),console.warn(`If using a custom component check it has been registered as described in: ${this.getFrameworkOverrides().getDocLink("components/")}`)}};E([N("gridOptions")],Rn.prototype,"gridOptions",2);E([Ce],Rn.prototype,"init",1);Rn=E([Fe("userComponentRegistry")],Rn);var Ty={propertyName:"dateComponent",cellRenderer:!1},Py={propertyName:"headerComponent",cellRenderer:!1},Fy={propertyName:"headerGroupComponent",cellRenderer:!1},Vc={propertyName:"cellRenderer",cellRenderer:!0},Ly={propertyName:"cellEditor",cellRenderer:!1},Hc={propertyName:"innerRenderer",cellRenderer:!0},My={propertyName:"loadingOverlayComponent",cellRenderer:!1},Iy={propertyName:"noRowsOverlayComponent",cellRenderer:!1},Oy={propertyName:"tooltipComponent",cellRenderer:!1},kd={propertyName:"filter",cellRenderer:!1},ky={propertyName:"floatingFilterComponent",cellRenderer:!1},Ny={propertyName:"toolPanel",cellRenderer:!1},Gy={propertyName:"statusPanel",cellRenderer:!1},_y={propertyName:"fullWidthCellRenderer",cellRenderer:!0},Vy={propertyName:"loadingCellRenderer",cellRenderer:!0},Hy={propertyName:"groupRowRenderer",cellRenderer:!0},By={propertyName:"detailCellRenderer",cellRenderer:!0},Wy={propertyName:"menuItem",cellRenderer:!1},Dg=class{static getFloatingFilterType(e){return this.filterToFloatingFilterMapping[e]}};Dg.filterToFloatingFilterMapping={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",multi:"agMultiColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",group:"agGroupColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"};var ao=class extends ge{getHeaderCompDetails(e,t){return this.getCompDetails(e,Py,"agColumnHeader",t)}getHeaderGroupCompDetails(e){const t=e.columnGroup.getColGroupDef();return this.getCompDetails(t,Fy,"agColumnGroupHeader",e)}getFullWidthCellRendererDetails(e){return this.getCompDetails(this.gridOptions,_y,null,e,!0)}getFullWidthLoadingCellRendererDetails(e){return this.getCompDetails(this.gridOptions,Vy,"agLoadingCellRenderer",e,!0)}getFullWidthGroupCellRendererDetails(e){return this.getCompDetails(this.gridOptions,Hy,"agGroupRowRenderer",e,!0)}getFullWidthDetailCellRendererDetails(e){return this.getCompDetails(this.gridOptions,By,"agDetailCellRenderer",e,!0)}getInnerRendererDetails(e,t){return this.getCompDetails(e,Hc,null,t)}getFullWidthGroupRowInnerCellRenderer(e,t){return this.getCompDetails(e,Hc,null,t)}getCellRendererDetails(e,t){return this.getCompDetails(e,Vc,null,t)}getCellEditorDetails(e,t){return this.getCompDetails(e,Ly,"agCellEditor",t,!0)}getFilterDetails(e,t,i){return this.getCompDetails(e,kd,i,t,!0)}getDateCompDetails(e){return this.getCompDetails(this.gridOptions,Ty,"agDateInput",e,!0)}getLoadingOverlayCompDetails(e){return this.getCompDetails(this.gridOptions,My,"agLoadingOverlay",e,!0)}getNoRowsOverlayCompDetails(e){return this.getCompDetails(this.gridOptions,Iy,"agNoRowsOverlay",e,!0)}getTooltipCompDetails(e){return this.getCompDetails(e.colDef,Oy,"agTooltipComponent",e,!0)}getSetFilterCellRendererDetails(e,t){return this.getCompDetails(e,Vc,null,t)}getFloatingFilterCompDetails(e,t,i){return this.getCompDetails(e,ky,i,t)}getToolPanelCompDetails(e,t){return this.getCompDetails(e,Ny,null,t,!0)}getStatusPanelCompDetails(e,t){return this.getCompDetails(e,Gy,null,t,!0)}getMenuItemCompDetails(e,t){return this.getCompDetails(e,Wy,"agMenuItem",t,!0)}getCompDetails(e,t,i,s,n=!1){const{propertyName:l,cellRenderer:u}=t;let{compName:g,jsComp:C,fwComp:S,paramsFromSelector:A,popupFromSelector:D,popupPositionFromSelector:M}=this.getCompKeys(e,t,s);const W=q=>{const _=this.userComponentRegistry.retrieve(l,q);_&&(C=_.componentFromFramework?void 0:_.component,S=_.componentFromFramework?_.component:void 0)};if(g!=null&&W(g),C==null&&S==null&&i!=null&&W(i),C&&u&&!this.agComponentUtils.doesImplementIComponent(C)&&(C=this.agComponentUtils.adaptFunction(l,C)),!C&&!S){n&&console.error(`AG Grid: Could not find component ${g}, did you forget to configure this component?`);return}const z=this.mergeParamsWithApplicationProvidedParams(e,t,s,A),U=C==null,X=C||S;return{componentFromFramework:U,componentClass:X,params:z,type:t,popupFromSelector:D,popupPositionFromSelector:M,newAgStackInstance:()=>this.newAgStackInstance(X,U,z,t)}}getCompKeys(e,t,i){const{propertyName:s}=t;let n,l,u,g,C,S;if(e){const A=e,D=A[s+"Selector"],M=D?D(i):null,W=z=>{typeof z=="string"?n=z:z!=null&&z!==!0&&(this.getFrameworkOverrides().isFrameworkComponent(z)?u=z:l=z)};M?(W(M.component),g=M.params,C=M.popup,S=M.popupPosition):W(A[s])}return{compName:n,jsComp:l,fwComp:u,paramsFromSelector:g,popupFromSelector:C,popupPositionFromSelector:S}}newAgStackInstance(e,t,i,s){const n=s.propertyName,l=!t;let u;if(l)u=new e;else{const C=this.componentMetadataProvider.retrieve(n);u=this.frameworkComponentWrapper.wrap(e,C.mandatoryMethodList,C.optionalMethodList,s)}const g=this.initComponent(u,i);return g==null?Bi.resolve(u):g.then(()=>u)}mergeParamsWithApplicationProvidedParams(e,t,i,s=null){const n=this.gridOptionsService.getGridCommonParams();Wi(n,i);const l=e,u=l&&l[t.propertyName+"Params"];if(typeof u=="function"){const g=u(i);Wi(n,g)}else typeof u=="object"&&Wi(n,u);return Wi(n,s),n}initComponent(e,t){if(this.context.createBean(e),e.init!=null)return e.init(t)}getDefaultFloatingFilterType(e,t){if(e==null)return null;let i=null,{compName:s,jsComp:n,fwComp:l}=this.getCompKeys(e,kd);return s?i=Dg.getFloatingFilterType(s):n==null&&l==null&&e.filter===!0&&(i=t()),i}};E([N("gridOptions")],ao.prototype,"gridOptions",2);E([N("agComponentUtils")],ao.prototype,"agComponentUtils",2);E([N("componentMetadataProvider")],ao.prototype,"componentMetadataProvider",2);E([N("userComponentRegistry")],ao.prototype,"userComponentRegistry",2);E([mt("frameworkComponentWrapper")],ao.prototype,"frameworkComponentWrapper",2);ao=E([Fe("userComponentFactory")],ao);var Ua=class{};Ua.ColDefPropertyMap={headerName:void 0,columnGroupShow:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnsMenuParams:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressCellFlash:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressMenu:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0};Ua.ALL_PROPERTIES=Object.keys(Ua.ColDefPropertyMap);var zy=Ua,Tg=class{constructor(e){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=e.scrollContainer,this.scrollHorizontally=e.scrollAxis.indexOf("x")!==-1,this.scrollVertically=e.scrollAxis.indexOf("y")!==-1,this.scrollByTick=e.scrollByTick!=null?e.scrollByTick:20,e.onScrollCallback&&(this.onScrollCallback=e.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=e.getVerticalPosition,this.setVerticalPosition=e.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=e.getHorizontalPosition,this.setHorizontalPosition=e.setHorizontalPosition),this.shouldSkipVerticalScroll=e.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=e.shouldSkipHorizontalScroll||(()=>!1)}check(e,t=!1){const i=t||this.shouldSkipVerticalScroll();if(i&&this.shouldSkipHorizontalScroll())return;const s=this.scrollContainer.getBoundingClientRect(),n=this.scrollByTick;this.tickLeft=e.clientX<s.left+n,this.tickRight=e.clientX>s.right-n,this.tickUp=e.clientY<s.top+n&&!i,this.tickDown=e.clientY>s.bottom-n&&!i,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){this.tickingInterval===null&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;let e;if(e=this.tickCount>20?200:this.tickCount>10?80:40,this.scrollVertically){const t=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(t-e),this.tickDown&&this.setVerticalPosition(t+e)}if(this.scrollHorizontally){const t=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(t-e),this.tickRight&&this.setHorizontalPosition(t+e)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}},Xi=class extends ge{constructor(e){super(),this.isMultiRowDrag=!1,this.eContainer=e}postConstruct(){this.gridOptionsService.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel),this.ctrlsService.whenReady(()=>{const e=this.ctrlsService.getGridBodyCtrl();this.autoScrollService=new Tg({scrollContainer:e.getBodyViewportElement(),scrollAxis:"y",getVerticalPosition:()=>e.getScrollFeature().getVScrollPosition().top,setVerticalPosition:t=>e.getScrollFeature().setVerticalScrollPosition(t),onScrollCallback:()=>{this.onDragging(this.lastDraggingEvent)}})})}getContainer(){return this.eContainer}isInterestedIn(e){return e===2}getIconName(){return this.gridOptionsService.get("rowDragManaged")&&this.shouldPreventRowMove()?Je.ICON_NOT_ALLOWED:Je.ICON_MOVE}shouldPreventRowMove(){return!!(this.columnModel.getRowGroupColumns().length||this.filterManager.isAnyFilterPresent()||this.sortController.isSortActive())}getRowNodes(e){if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];const t=this.gridOptionsService.get("rowDragMultiRow"),i=[...this.selectionService.getSelectedNodes()].sort((n,l)=>n.rowIndex==null||l.rowIndex==null?0:this.getRowIndexNumber(n)-this.getRowIndexNumber(l)),s=e.dragItem.rowNode;return t&&i.indexOf(s)!==-1?(this.isMultiRowDrag=!0,i):(this.isMultiRowDrag=!1,[s])}onDragEnter(e){e.dragItem.rowNodes=this.getRowNodes(e),this.dispatchGridEvent(L.EVENT_ROW_DRAG_ENTER,e),this.getRowNodes(e).forEach(t=>{t.setDragging(!0)}),this.onEnterOrDragging(e)}onDragging(e){this.onEnterOrDragging(e)}isFromThisGrid(e){const{dragSourceDomDataKey:t}=e.dragSource;return t===this.gridOptionsService.getDomDataKey()}isDropZoneWithinThisGrid(e){const i=this.ctrlsService.getGridBodyCtrl().getGui(),{dropZoneTarget:s}=e;return!i.contains(s)}onEnterOrDragging(e){this.dispatchGridEvent(L.EVENT_ROW_DRAG_MOVE,e),this.lastDraggingEvent=e;const t=this.mouseEventService.getNormalisedPosition(e).y;this.gridOptionsService.get("rowDragManaged")&&this.doManagedDrag(e,t),this.autoScrollService.check(e.event)}doManagedDrag(e,t){const i=this.isFromThisGrid(e),s=this.gridOptionsService.get("rowDragManaged"),n=e.dragItem.rowNodes;s&&this.shouldPreventRowMove()||(this.gridOptionsService.get("suppressMoveWhenRowDragging")||!i?this.isDropZoneWithinThisGrid(e)||this.clientSideRowModel.highlightRowAtPixel(n[0],t):this.moveRows(n,t))}getRowIndexNumber(e){return parseInt(yt(e.getRowIndexString().split("-")),10)}moveRowAndClearHighlight(e){const t=this.clientSideRowModel.getLastHighlightedRowNode(),i=t&&t.highlighted===1,s=this.mouseEventService.getNormalisedPosition(e).y,n=e.dragItem.rowNodes;let l=i?1:0;if(this.isFromThisGrid(e))n.forEach(u=>{u.rowTop<s&&(l-=1)}),this.moveRows(n,s,l);else{const u=this.gridOptionsService.getCallback("getRowId");let g=this.clientSideRowModel.getRowIndexAtPixel(s)+1;this.clientSideRowModel.getHighlightPosition(s)===0&&g--,this.clientSideRowModel.updateRowData({add:n.map(C=>C.data).filter(C=>!this.clientSideRowModel.getRowNode(u?u({data:C,level:0}):C.id)),addIndex:g})}this.clearRowHighlight()}clearRowHighlight(){this.clientSideRowModel.highlightRowAtPixel(null)}moveRows(e,t,i=0){this.clientSideRowModel.ensureRowsAtPixel(e,t,i)&&(this.focusService.clearFocusedCell(),this.rangeService&&this.rangeService.removeAllCellRanges())}addRowDropZone(e){if(!e.getContainer()){Ue("addRowDropZone - A container target needs to be provided");return}if(this.dragAndDropService.findExternalZone(e)){console.warn("AG Grid: addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");return}let t={getContainer:e.getContainer};e.fromGrid?t=e:(e.onDragEnter&&(t.onDragEnter=i=>{e.onDragEnter(this.draggingToRowDragEvent(L.EVENT_ROW_DRAG_ENTER,i))}),e.onDragLeave&&(t.onDragLeave=i=>{e.onDragLeave(this.draggingToRowDragEvent(L.EVENT_ROW_DRAG_LEAVE,i))}),e.onDragging&&(t.onDragging=i=>{e.onDragging(this.draggingToRowDragEvent(L.EVENT_ROW_DRAG_MOVE,i))}),e.onDragStop&&(t.onDragStop=i=>{e.onDragStop(this.draggingToRowDragEvent(L.EVENT_ROW_DRAG_END,i))})),this.dragAndDropService.addDropTarget(We({isInterestedIn:i=>i===2,getIconName:()=>Je.ICON_MOVE,external:!0},t))}getRowDropZone(e){const t=this.getContainer.bind(this),i=this.onDragEnter.bind(this),s=this.onDragLeave.bind(this),n=this.onDragging.bind(this),l=this.onDragStop.bind(this);return e?{getContainer:t,onDragEnter:e.onDragEnter?u=>{i(u),e.onDragEnter(this.draggingToRowDragEvent(L.EVENT_ROW_DRAG_ENTER,u))}:i,onDragLeave:e.onDragLeave?u=>{s(u),e.onDragLeave(this.draggingToRowDragEvent(L.EVENT_ROW_DRAG_LEAVE,u))}:s,onDragging:e.onDragging?u=>{n(u),e.onDragging(this.draggingToRowDragEvent(L.EVENT_ROW_DRAG_MOVE,u))}:n,onDragStop:e.onDragStop?u=>{l(u),e.onDragStop(this.draggingToRowDragEvent(L.EVENT_ROW_DRAG_END,u))}:l,fromGrid:!0}:{getContainer:t,onDragEnter:i,onDragLeave:s,onDragging:n,onDragStop:l,fromGrid:!0}}draggingToRowDragEvent(e,t){const i=this.mouseEventService.getNormalisedPosition(t).y,s=i>this.paginationProxy.getCurrentPageHeight();let n=-1,l;s||(n=this.rowModel.getRowIndexAtPixel(i),l=this.rowModel.getRow(n));let u;switch(t.vDirection){case 1:u="down";break;case 0:u="up";break;default:u=null;break}return this.gridOptionsService.addGridCommonParams({type:e,event:t.event,node:t.dragItem.rowNode,nodes:t.dragItem.rowNodes,overIndex:n,overNode:l,y:i,vDirection:u})}dispatchGridEvent(e,t){const i=this.draggingToRowDragEvent(e,t);this.eventService.dispatchEvent(i)}onDragLeave(e){this.dispatchGridEvent(L.EVENT_ROW_DRAG_LEAVE,e),this.stopDragging(e),this.gridOptionsService.get("rowDragManaged")&&this.clearRowHighlight(),this.isFromThisGrid(e)&&(this.isMultiRowDrag=!1)}onDragStop(e){this.dispatchGridEvent(L.EVENT_ROW_DRAG_END,e),this.stopDragging(e),this.gridOptionsService.get("rowDragManaged")&&(this.gridOptionsService.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&!this.isDropZoneWithinThisGrid(e)&&this.moveRowAndClearHighlight(e)}stopDragging(e){this.autoScrollService.ensureCleared(),this.getRowNodes(e).forEach(t=>{t.setDragging(!1)})}};E([N("dragAndDropService")],Xi.prototype,"dragAndDropService",2);E([N("rowModel")],Xi.prototype,"rowModel",2);E([N("paginationProxy")],Xi.prototype,"paginationProxy",2);E([N("columnModel")],Xi.prototype,"columnModel",2);E([N("focusService")],Xi.prototype,"focusService",2);E([N("sortController")],Xi.prototype,"sortController",2);E([N("filterManager")],Xi.prototype,"filterManager",2);E([N("selectionService")],Xi.prototype,"selectionService",2);E([N("mouseEventService")],Xi.prototype,"mouseEventService",2);E([N("ctrlsService")],Xi.prototype,"ctrlsService",2);E([mt("rangeService")],Xi.prototype,"rangeService",2);E([Ce],Xi.prototype,"postConstruct",1);var Dn=class extends ge{constructor(){super(...arguments),this.dragEndFunctions=[],this.dragSources=[]}removeAllListeners(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0}removeListener(e){const t=e.dragSource.eElement,i=e.mouseDownListener;if(t.removeEventListener("mousedown",i),e.touchEnabled){const s=e.touchStartListener;t.removeEventListener("touchstart",s,{passive:!0})}}removeDragSource(e){const t=this.dragSources.find(i=>i.dragSource===e);!t||(this.removeListener(t),Oi(this.dragSources,t))}isDragging(){return this.dragging}addDragSource(e){const t=this.onMouseDown.bind(this,e),{eElement:i,includeTouch:s,stopPropagationForTouch:n}=e;i.addEventListener("mousedown",t);let l=null;const u=this.gridOptionsService.get("suppressTouch");s&&!u&&(l=g=>{Rh(g.target)||(g.cancelable&&(g.preventDefault(),n&&g.stopPropagation()),this.onTouchStart(e,g))},i.addEventListener("touchstart",l,{passive:!1})),this.dragSources.push({dragSource:e,mouseDownListener:t,touchStartListener:l,touchEnabled:!!s})}getStartTarget(){return this.startTarget}onTouchStart(e,t){this.currentDragParams=e,this.dragging=!1;const i=t.touches[0];this.touchLastTime=i,this.touchStart=i;const s=C=>this.onTouchMove(C,e.eElement),n=C=>this.onTouchUp(C,e.eElement),l=C=>{C.cancelable&&C.preventDefault()},u=t.target,g=[{target:this.gridOptionsService.getRootNode(),type:"touchmove",listener:l,options:{passive:!1}},{target:u,type:"touchmove",listener:s,options:{passive:!0}},{target:u,type:"touchend",listener:n,options:{passive:!0}},{target:u,type:"touchcancel",listener:n,options:{passive:!0}}];this.addTemporaryEvents(g),e.dragStartPixels===0&&this.onCommonMove(i,this.touchStart,e.eElement)}onMouseDown(e,t){const i=t;if(e.skipMouseEvent&&e.skipMouseEvent(t)||i._alreadyProcessedByDragService||(i._alreadyProcessedByDragService=!0,t.button!==0))return;this.shouldPreventMouseEvent(t)&&t.preventDefault(),this.currentDragParams=e,this.dragging=!1,this.mouseStartEvent=t,this.startTarget=t.target;const s=C=>this.onMouseMove(C,e.eElement),n=C=>this.onMouseUp(C,e.eElement),l=C=>C.preventDefault(),u=this.gridOptionsService.getRootNode(),g=[{target:u,type:"mousemove",listener:s},{target:u,type:"mouseup",listener:n},{target:u,type:"contextmenu",listener:l}];this.addTemporaryEvents(g),e.dragStartPixels===0&&this.onMouseMove(t,e.eElement)}addTemporaryEvents(e){e.forEach(t=>{const{target:i,type:s,listener:n,options:l}=t;i.addEventListener(s,n,l)}),this.dragEndFunctions.push(()=>{e.forEach(t=>{const{target:i,type:s,listener:n,options:l}=t;i.removeEventListener(s,n,l)})})}isEventNearStartEvent(e,t){const{dragStartPixels:i}=this.currentDragParams,s=ce(i)?i:4;return kh(e,t,s)}getFirstActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}onCommonMove(e,t,i){if(!this.dragging){if(!this.dragging&&this.isEventNearStartEvent(e,t))return;this.dragging=!0;const s={type:L.EVENT_DRAG_STARTED,target:i};this.eventService.dispatchEvent(s),this.currentDragParams.onDragStart(t),this.currentDragParams.onDragging(t)}this.currentDragParams.onDragging(e)}onTouchMove(e,t){const i=this.getFirstActiveTouch(e.touches);!i||this.onCommonMove(i,this.touchStart,t)}onMouseMove(e,t){var i;Ts()&&((i=this.gridOptionsService.getDocument().getSelection())==null||i.removeAllRanges()),this.shouldPreventMouseEvent(e)&&e.preventDefault(),this.onCommonMove(e,this.mouseStartEvent,t)}shouldPreventMouseEvent(e){const t=this.gridOptionsService.get("enableCellTextSelection"),i=e.type==="mousemove";return t&&i&&e.cancelable&&this.mouseEventService.isEventFromThisGrid(e)&&!this.isOverFormFieldElement(e)}isOverFormFieldElement(e){const t=e.target,i=t?.tagName.toLocaleLowerCase();return!!i?.match("^a$|textarea|input|select|button")}onTouchUp(e,t){let i=this.getFirstActiveTouch(e.changedTouches);i||(i=this.touchLastTime),this.onUpCommon(i,t)}onMouseUp(e,t){this.onUpCommon(e,t)}onUpCommon(e,t){if(this.dragging){this.dragging=!1,this.currentDragParams.onDragStop(e);const i={type:L.EVENT_DRAG_STOPPED,target:t};this.eventService.dispatchEvent(i)}this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach(i=>i()),this.dragEndFunctions.length=0}};E([N("mouseEventService")],Dn.prototype,"mouseEventService",2);E([Di],Dn.prototype,"removeAllListeners",1);Dn=E([Fe("dragService")],Dn);var ed="ag-list-item-hovered",Pg=class extends ge{constructor(e,t,i){super(),this.comp=e,this.virtualList=t,this.params=i,this.currentDragValue=null,this.lastHoveredListItem=null}postConstruct(){this.addManagedListener(this.params.eventSource,this.params.listItemDragStartEvent,this.listItemDragStart.bind(this)),this.addManagedListener(this.params.eventSource,this.params.listItemDragEndEvent,this.listItemDragEnd.bind(this)),this.createDropTarget(),this.createAutoScrollService()}listItemDragStart(e){this.currentDragValue=this.params.getCurrentDragValue(e),this.moveBlocked=this.params.isMoveBlocked(this.currentDragValue)}listItemDragEnd(){window.setTimeout(()=>{this.currentDragValue=null,this.moveBlocked=!1},10)}createDropTarget(){const e={isInterestedIn:t=>t===this.params.dragSourceType,getIconName:()=>this.moveBlocked?Je.ICON_PINNED:Je.ICON_MOVE,getContainer:()=>this.comp.getGui(),onDragging:t=>this.onDragging(t),onDragStop:()=>this.onDragStop(),onDragLeave:()=>this.onDragLeave()};this.dragAndDropService.addDropTarget(e)}createAutoScrollService(){const e=this.virtualList.getGui();this.autoScrollService=new Tg({scrollContainer:e,scrollAxis:"y",getVerticalPosition:()=>e.scrollTop,setVerticalPosition:t=>e.scrollTop=t})}onDragging(e){if(!this.currentDragValue||this.moveBlocked)return;const t=this.getListDragItem(e),i=this.virtualList.getComponentAt(t.rowIndex);if(!i)return;const s=i.getGui().parentElement;this.lastHoveredListItem&&this.lastHoveredListItem.rowIndex===t.rowIndex&&this.lastHoveredListItem.position===t.position||(this.autoScrollService.check(e.event),this.clearHoveredItems(),this.lastHoveredListItem=t,Ld(s,ed),Ld(s,`ag-item-highlight-${t.position}`))}getListDragItem(e){const t=this.virtualList.getGui(),i=parseFloat(window.getComputedStyle(t).paddingTop),s=this.virtualList.getRowHeight(),n=this.virtualList.getScrollTop(),l=Math.max(0,(e.y-i+n)/s),u=this.params.getNumRows(this.comp)-1,g=Math.min(u,l)|0;return{rowIndex:g,position:Math.round(l)>l||l>u?"bottom":"top",component:this.virtualList.getComponentAt(g)}}onDragStop(){this.moveBlocked||(this.params.moveItem(this.currentDragValue,this.lastHoveredListItem),this.clearHoveredItems(),this.autoScrollService.ensureCleared())}onDragLeave(){this.clearHoveredItems(),this.autoScrollService.ensureCleared()}clearHoveredItems(){this.virtualList.getGui().querySelectorAll(`.${ed}`).forEach(t=>{[ed,"ag-item-highlight-top","ag-item-highlight-bottom"].forEach(i=>{t.classList.remove(i)})}),this.lastHoveredListItem=null}};E([N("dragAndDropService")],Pg.prototype,"dragAndDropService",2);E([Ce],Pg.prototype,"postConstruct",1);function So(e){const t=e;return t!=null&&t.getFrameworkComponentInstance!=null?t.getFrameworkComponentInstance():e}var nt=class{constructor(){this.detailGridInfoMap={},this.destroyCalled=!1}init(){switch(this.rowModel.getType()){case"clientSide":this.clientSideRowModel=this.rowModel;break;case"infinite":this.infiniteRowModel=this.rowModel;break;case"serverSide":this.serverSideRowModel=this.rowModel;break}this.ctrlsService.whenReady(()=>{this.gridBodyCtrl=this.ctrlsService.getGridBodyCtrl()})}__getAlignedGridService(){return this.alignedGridsService}__getContext(){return this.context}__getModel(){return this.rowModel}getGridId(){return this.context.getGridId()}addDetailGridInfo(e,t){this.detailGridInfoMap[e]=t}removeDetailGridInfo(e){this.detailGridInfoMap[e]=void 0}getDetailGridInfo(e){return this.detailGridInfoMap[e]}forEachDetailGridInfo(e){let t=0;bi(this.detailGridInfoMap,(i,s)=>{ce(s)&&(e(s,t),t++)})}getDataAsCsv(e){if(Rt.__assertRegistered("@ag-grid-community/csv-export","api.getDataAsCsv",this.context.getGridId()))return this.csvCreator.getDataAsCsv(e)}exportDataAsCsv(e){Rt.__assertRegistered("@ag-grid-community/csv-export","api.exportDataAsCSv",this.context.getGridId())&&this.csvCreator.exportDataAsCsv(e)}assertNotExcelMultiSheet(e,t){return Rt.__assertRegistered("@ag-grid-enterprise/excel-export","api."+e,this.context.getGridId())?this.excelCreator.getFactoryMode()===1?(console.warn("AG Grid: The Excel Exporter is currently on Multi Sheet mode. End that operation by calling 'api.getMultipleSheetAsExcel()' or 'api.exportMultipleSheetsAsExcel()'"),!1):!0:!1}getDataAsExcel(e){if(this.assertNotExcelMultiSheet("getDataAsExcel",e))return this.excelCreator.getDataAsExcel(e)}exportDataAsExcel(e){this.assertNotExcelMultiSheet("exportDataAsExcel",e)&&this.excelCreator.exportDataAsExcel(e)}getSheetDataForExcel(e){if(!!Rt.__assertRegistered("@ag-grid-enterprise/excel-export","api.getSheetDataForExcel",this.context.getGridId()))return this.excelCreator.setFactoryMode(1),this.excelCreator.getSheetDataForExcel(e)}getMultipleSheetsAsExcel(e){if(Rt.__assertRegistered("@ag-grid-enterprise/excel-export","api.getMultipleSheetsAsExcel",this.context.getGridId()))return this.excelCreator.getMultipleSheetsAsExcel(e)}exportMultipleSheetsAsExcel(e){Rt.__assertRegistered("@ag-grid-enterprise/excel-export","api.exportMultipleSheetsAsExcel",this.context.getGridId())&&this.excelCreator.exportMultipleSheetsAsExcel(e)}setGridAriaProperty(e,t){if(!e)return;const i=this.ctrlsService.getGridBodyCtrl().getGui(),s=`aria-${e}`;t===null?i.removeAttribute(s):i.setAttribute(s,t)}logMissingRowModel(e,...t){console.error(`AG Grid: api.${e} can only be called when gridOptions.rowModelType is ${t.join(" or ")}`)}logDeprecation(e,t,i,s){Ue(`Since ${e} api.${t} is deprecated. Please use ${i} instead. ${s}`)}getPinnedTopRowCount(){return this.pinnedRowModel.getPinnedTopRowCount()}getPinnedBottomRowCount(){return this.pinnedRowModel.getPinnedBottomRowCount()}getPinnedTopRow(e){return this.pinnedRowModel.getPinnedTopRow(e)}getPinnedBottomRow(e){return this.pinnedRowModel.getPinnedBottomRow(e)}expireValueCache(){this.valueCache.expire()}getVerticalPixelRange(){return this.gridBodyCtrl.getScrollFeature().getVScrollPosition()}getHorizontalPixelRange(){return this.gridBodyCtrl.getScrollFeature().getHScrollPosition()}refreshCells(e={}){this.frameworkOverrides.wrapIncoming(()=>this.rowRenderer.refreshCells(e))}flashCells(e={}){const t=i=>Ue(`Since v31.1 api.flashCells parameter '${i}Delay' is deprecated. Please use '${i}Duration' instead.`);ce(e.fadeDelay)&&t("fade"),ce(e.flashDelay)&&t("flash"),this.frameworkOverrides.wrapIncoming(()=>this.rowRenderer.flashCells(e))}redrawRows(e={}){const t=e?e.rowNodes:void 0;this.frameworkOverrides.wrapIncoming(()=>this.rowRenderer.redrawRows(t))}refreshHeader(){this.frameworkOverrides.wrapIncoming(()=>this.ctrlsService.getHeaderRowContainerCtrls().forEach(e=>e.refresh()))}isAnyFilterPresent(){return this.filterManager.isAnyFilterPresent()}isColumnFilterPresent(){return this.filterManager.isColumnFilterPresent()||this.filterManager.isAggregateFilterPresent()}isQuickFilterPresent(){return this.filterManager.isQuickFilterPresent()}getModel(){return Ue("Since v31.1 getModel() is deprecated. Please use the appropriate grid API methods instead."),this.rowModel}setRowNodeExpanded(e,t,i){this.expansionService.setRowNodeExpanded(e,t,i)}onGroupExpandedOrCollapsed(){if(Xe(this.clientSideRowModel)){this.logMissingRowModel("onGroupExpandedOrCollapsed","clientSide");return}this.expansionService.onGroupExpandedOrCollapsed()}refreshClientSideRowModel(e){if(Xe(this.clientSideRowModel)){this.logMissingRowModel("refreshClientSideRowModel","clientSide");return}this.clientSideRowModel.refreshModel(e)}isAnimationFrameQueueEmpty(){return this.animationFrameService.isQueueEmpty()}flushAllAnimationFrames(){this.animationFrameService.flushAllFrames()}getRowNode(e){return this.rowModel.getRowNode(e)}getSizesForCurrentTheme(){return{rowHeight:this.gos.getRowHeightAsNumber(),headerHeight:this.columnModel.getHeaderHeight()}}expandAll(){this.clientSideRowModel||this.serverSideRowModel?this.expansionService.expandAll(!0):this.logMissingRowModel("expandAll","clientSide","serverSide")}collapseAll(){this.clientSideRowModel||this.serverSideRowModel?this.expansionService.expandAll(!1):this.logMissingRowModel("collapseAll","clientSide","serverSide")}addRenderedRowListener(e,t,i){this.rowRenderer.addRenderedRowListener(e,t,i)}getQuickFilter(){return this.gos.get("quickFilterText")}getAdvancedFilterModel(){return Rt.__assertRegistered("@ag-grid-enterprise/advanced-filter","api.getAdvancedFilterModel",this.context.getGridId())?this.filterManager.getAdvancedFilterModel():null}setAdvancedFilterModel(e){this.filterManager.setAdvancedFilterModel(e)}showAdvancedFilterBuilder(){Rt.__assertRegistered("@ag-grid-enterprise/advanced-filter","api.setAdvancedFilterModel",this.context.getGridId())&&this.filterManager.showAdvancedFilterBuilder("api")}setNodesSelected(e){if(!e.nodes.every(u=>u.rowPinned?(console.warn("AG Grid: cannot select pinned rows"),!1):u.id===void 0?(console.warn("AG Grid: cannot select node until id for node is known"),!1):!0))return;const{nodes:i,source:s,newValue:n}=e,l=i;this.selectionService.setNodesSelected({nodes:l,source:s??"api",newValue:n})}selectAll(e="apiSelectAll"){this.selectionService.selectAllRowNodes({source:e})}deselectAll(e="apiSelectAll"){this.selectionService.deselectAllRowNodes({source:e})}selectAllFiltered(e="apiSelectAllFiltered"){this.selectionService.selectAllRowNodes({source:e,justFiltered:!0})}deselectAllFiltered(e="apiSelectAllFiltered"){this.selectionService.deselectAllRowNodes({source:e,justFiltered:!0})}getServerSideSelectionState(){return Xe(this.serverSideRowModel)?(this.logMissingRowModel("getServerSideSelectionState","serverSide"),null):this.selectionService.getSelectionState()}setServerSideSelectionState(e){if(Xe(this.serverSideRowModel)){this.logMissingRowModel("setServerSideSelectionState","serverSide");return}this.selectionService.setSelectionState(e,"api")}selectAllOnCurrentPage(e="apiSelectAllCurrentPage"){this.selectionService.selectAllRowNodes({source:e,justCurrentPage:!0})}deselectAllOnCurrentPage(e="apiSelectAllCurrentPage"){this.selectionService.deselectAllRowNodes({source:e,justCurrentPage:!0})}showLoadingOverlay(){this.overlayService.showLoadingOverlay()}showNoRowsOverlay(){this.overlayService.showNoRowsOverlay()}hideOverlay(){this.overlayService.hideOverlay()}getSelectedNodes(){return this.selectionService.getSelectedNodes()}getSelectedRows(){return this.selectionService.getSelectedRows()}getBestCostNodeSelection(){if(Xe(this.clientSideRowModel)){this.logMissingRowModel("getBestCostNodeSelection","clientSide");return}return this.selectionService.getBestCostNodeSelection()}getRenderedNodes(){return this.rowRenderer.getRenderedNodes()}ensureColumnVisible(e,t="auto"){this.frameworkOverrides.wrapIncoming(()=>this.gridBodyCtrl.getScrollFeature().ensureColumnVisible(e,t),"ensureVisible")}ensureIndexVisible(e,t){this.frameworkOverrides.wrapIncoming(()=>this.gridBodyCtrl.getScrollFeature().ensureIndexVisible(e,t),"ensureVisible")}ensureNodeVisible(e,t=null){this.frameworkOverrides.wrapIncoming(()=>this.gridBodyCtrl.getScrollFeature().ensureNodeVisible(e,t),"ensureVisible")}forEachLeafNode(e){if(Xe(this.clientSideRowModel)){this.logMissingRowModel("forEachLeafNode","clientSide");return}this.clientSideRowModel.forEachLeafNode(e)}forEachNode(e,t){this.rowModel.forEachNode(e,t)}forEachNodeAfterFilter(e){if(Xe(this.clientSideRowModel)){this.logMissingRowModel("forEachNodeAfterFilter","clientSide");return}this.clientSideRowModel.forEachNodeAfterFilter(e)}forEachNodeAfterFilterAndSort(e){if(Xe(this.clientSideRowModel)){this.logMissingRowModel("forEachNodeAfterFilterAndSort","clientSide");return}this.clientSideRowModel.forEachNodeAfterFilterAndSort(e)}getFilterInstance(e,t){return Ue("'getFilterInstance' is deprecated. To get/set individual filter models, use 'getColumnFilterModel' or 'setColumnFilterModel' instead. To get hold of the filter instance, use 'getColumnFilterInstance' which returns the instance asynchronously."),this.filterManager.getFilterInstance(e,t)}getColumnFilterInstance(e){return this.filterManager.getColumnFilterInstance(e)}destroyFilter(e){const t=this.columnModel.getPrimaryColumn(e);if(t)return this.filterManager.destroyFilter(t,"api")}getStatusPanel(e){if(!Rt.__assertRegistered("@ag-grid-enterprise/status-bar","api.getStatusPanel",this.context.getGridId()))return;const t=this.statusBarService.getStatusPanel(e);return So(t)}getColumnDef(e){const t=this.columnModel.getPrimaryColumn(e);return t?t.getColDef():null}getColumnDefs(){return this.columnModel.getColumnDefs()}onFilterChanged(e="api"){this.filterManager.onFilterChanged({source:e})}onSortChanged(){this.sortController.onSortChanged("api")}setFilterModel(e){this.frameworkOverrides.wrapIncoming(()=>this.filterManager.setFilterModel(e))}getFilterModel(){return this.filterManager.getFilterModel()}getColumnFilterModel(e){return this.filterManager.getColumnFilterModel(e)}setColumnFilterModel(e,t){return this.filterManager.setColumnFilterModel(e,t)}getFocusedCell(){return this.focusService.getFocusedCell()}clearFocusedCell(){return this.focusService.clearFocusedCell()}setFocusedCell(e,t,i){this.focusService.setFocusedCell({rowIndex:e,column:t,rowPinned:i,forceBrowserFocus:!0})}addRowDropZone(e){this.gridBodyCtrl.getRowDragFeature().addRowDropZone(e)}removeRowDropZone(e){const t=this.dragAndDropService.findExternalZone(e);t&&this.dragAndDropService.removeDropTarget(t)}getRowDropZoneParams(e){return this.gridBodyCtrl.getRowDragFeature().getRowDropZone(e)}assertSideBarLoaded(e){return Rt.__assertRegistered("@ag-grid-enterprise/side-bar","api."+e,this.context.getGridId())}isSideBarVisible(){return this.assertSideBarLoaded("isSideBarVisible")&&this.sideBarService.getSideBarComp().isDisplayed()}setSideBarVisible(e){this.assertSideBarLoaded("setSideBarVisible")&&this.sideBarService.getSideBarComp().setDisplayed(e)}setSideBarPosition(e){this.assertSideBarLoaded("setSideBarPosition")&&this.sideBarService.getSideBarComp().setSideBarPosition(e)}openToolPanel(e){this.assertSideBarLoaded("openToolPanel")&&this.sideBarService.getSideBarComp().openToolPanel(e,"api")}closeToolPanel(){this.assertSideBarLoaded("closeToolPanel")&&this.sideBarService.getSideBarComp().close("api")}getOpenedToolPanel(){return this.assertSideBarLoaded("getOpenedToolPanel")?this.sideBarService.getSideBarComp().openedItem():null}refreshToolPanel(){this.assertSideBarLoaded("refreshToolPanel")&&this.sideBarService.getSideBarComp().refresh()}isToolPanelShowing(){return this.assertSideBarLoaded("isToolPanelShowing")&&this.sideBarService.getSideBarComp().isToolPanelShowing()}getToolPanelInstance(e){if(this.assertSideBarLoaded("getToolPanelInstance")){const t=this.sideBarService.getSideBarComp().getToolPanelInstance(e);return So(t)}}getSideBar(){if(this.assertSideBarLoaded("getSideBar"))return this.sideBarService.getSideBarComp().getDef()}resetRowHeights(){if(ce(this.clientSideRowModel)){if(this.columnModel.isAutoRowHeightActive()){console.warn("AG Grid: calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.");return}this.clientSideRowModel.resetRowHeights()}}setRowCount(e,t){if(this.serverSideRowModel){if(this.columnModel.isRowGroupEmpty()){this.serverSideRowModel.setRowCount(e,t);return}console.error("AG Grid: setRowCount cannot be used while using row grouping.");return}if(this.infiniteRowModel){this.infiniteRowModel.setRowCount(e,t);return}this.logMissingRowModel("setRowCount","infinite","serverSide")}onRowHeightChanged(){this.clientSideRowModel?this.clientSideRowModel.onRowHeightChanged():this.serverSideRowModel&&this.serverSideRowModel.onRowHeightChanged()}getValue(e,t){let i=this.columnModel.getPrimaryColumn(e);return Xe(i)&&(i=this.columnModel.getGridColumn(e)),Xe(i)?null:this.valueService.getValue(i,t)}addEventListener(e,t){this.apiEventService.addEventListener(e,t)}addGlobalListener(e){this.apiEventService.addGlobalListener(e)}removeEventListener(e,t){this.apiEventService.removeEventListener(e,t)}removeGlobalListener(e){this.apiEventService.removeGlobalListener(e)}dispatchEvent(e){this.eventService.dispatchEvent(e)}destroy(){const e=`See ${this.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}`;if(this.destroyCalled)return;const t={type:L.EVENT_GRID_PRE_DESTROYED,state:this.getState()};this.dispatchEvent(t),this.destroyCalled=!0;const i=this.ctrlsService.getGridCtrl();i&&i.destroyGridUi(),this.context.destroy(),Du(this,["isDestroyed"],e)}isDestroyed(){return this.destroyCalled}resetQuickFilter(){this.filterManager.resetQuickFilterCache()}getCellRanges(){return this.rangeService?this.rangeService.getCellRanges():(Rt.__assertRegistered("@ag-grid-enterprise/range-selection","api.getCellRanges",this.context.getGridId()),null)}addCellRange(e){if(this.rangeService){this.rangeService.addCellRange(e);return}Rt.__assertRegistered("@ag-grid-enterprise/range-selection","api.addCellRange",this.context.getGridId())}clearRangeSelection(){this.rangeService&&this.rangeService.removeAllCellRanges(),Rt.__assertRegistered("@ag-grid-enterprise/range-selection","gridApi.clearRangeSelection",this.context.getGridId())}undoCellEditing(){this.undoRedoService.undo("api")}redoCellEditing(){this.undoRedoService.redo("api")}getCurrentUndoSize(){return this.undoRedoService.getCurrentUndoStackSize()}getCurrentRedoSize(){return this.undoRedoService.getCurrentRedoStackSize()}assertChart(e,t){if(Rt.__assertRegistered("@ag-grid-enterprise/charts","api."+e,this.context.getGridId()))return this.frameworkOverrides.wrapIncoming(()=>t())}getChartModels(){return this.assertChart("getChartModels",()=>this.chartService.getChartModels())}getChartRef(e){return this.assertChart("getChartRef",()=>this.chartService.getChartRef(e))}getChartImageDataURL(e){return this.assertChart("getChartImageDataURL",()=>this.chartService.getChartImageDataURL(e))}downloadChart(e){return this.assertChart("downloadChart",()=>this.chartService.downloadChart(e))}openChartToolPanel(e){return this.assertChart("openChartToolPanel",()=>this.chartService.openChartToolPanel(e))}closeChartToolPanel(e){return this.assertChart("closeChartToolPanel",()=>this.chartService.closeChartToolPanel(e.chartId))}createRangeChart(e){return this.assertChart("createRangeChart",()=>this.chartService.createRangeChart(e))}createPivotChart(e){return this.assertChart("createPivotChart",()=>this.chartService.createPivotChart(e))}createCrossFilterChart(e){return this.assertChart("createCrossFilterChart",()=>this.chartService.createCrossFilterChart(e))}updateChart(e){return this.assertChart("updateChart",()=>this.chartService.updateChart(e))}restoreChart(e,t){return this.assertChart("restoreChart",()=>this.chartService.restoreChart(e,t))}assertClipboard(e,t){Rt.__assertRegistered("@ag-grid-enterprise/clipboard","api"+e,this.context.getGridId())&&t()}copyToClipboard(e){this.assertClipboard("copyToClipboard",()=>this.clipboardService.copyToClipboard(e))}cutToClipboard(e){this.assertClipboard("cutToClipboard",()=>this.clipboardService.cutToClipboard(e))}copySelectedRowsToClipboard(e){this.assertClipboard("copySelectedRowsToClipboard",()=>this.clipboardService.copySelectedRowsToClipboard(e))}copySelectedRangeToClipboard(e){this.assertClipboard("copySelectedRangeToClipboard",()=>this.clipboardService.copySelectedRangeToClipboard(e))}copySelectedRangeDown(){this.assertClipboard("copySelectedRangeDown",()=>this.clipboardService.copyRangeDown())}pasteFromClipboard(){this.assertClipboard("pasteFromClipboard",()=>this.clipboardService.pasteFromClipboard())}showColumnMenuAfterButtonClick(e,t){Ue("'showColumnMenuAfterButtonClick' is deprecated. Use 'IHeaderParams.showColumnMenu' within a header component, or 'api.showColumnMenu' elsewhere.");const i=this.columnModel.getGridColumn(e);this.menuService.showColumnMenu({column:i,buttonElement:t,positionBy:"button"})}showColumnMenuAfterMouseClick(e,t){Ue("'showColumnMenuAfterMouseClick' is deprecated. Use 'IHeaderParams.showColumnMenuAfterMouseClick' within a header component, or 'api.showColumnMenu' elsewhere.");let i=this.columnModel.getGridColumn(e);if(i||(i=this.columnModel.getPrimaryColumn(e)),!i){console.error(`AG Grid: column '${e}' not found`);return}this.menuService.showColumnMenu({column:i,mouseEvent:t,positionBy:"mouse"})}showColumnChooser(e){this.menuService.showColumnChooser({chooserParams:e})}showColumnFilter(e){const t=this.columnModel.getGridColumn(e);if(!t){console.error(`AG Grid: column '${e}' not found`);return}this.menuService.showFilterMenu({column:t,containerType:"columnFilter",positionBy:"auto"})}showColumnMenu(e){const t=this.columnModel.getGridColumn(e);if(!t){console.error(`AG Grid: column '${e}' not found`);return}this.menuService.showColumnMenu({column:t,positionBy:"auto"})}hidePopupMenu(){this.menuService.hidePopupMenu()}hideColumnChooser(){this.menuService.hideColumnChooser()}tabToNextCell(e){return this.navigationService.tabToNextCell(!1,e)}tabToPreviousCell(e){return this.navigationService.tabToNextCell(!0,e)}getCellRendererInstances(e={}){return this.rowRenderer.getCellRendererInstances(e).map(So)}getCellEditorInstances(e={}){return this.rowRenderer.getCellEditorInstances(e).map(So)}getEditingCells(){return this.rowRenderer.getEditingCells()}stopEditing(e=!1){this.rowRenderer.stopEditing(e)}startEditingCell(e){const t=this.columnModel.getGridColumn(e.colKey);if(!t){console.warn(`AG Grid: no column found for ${e.colKey}`);return}const i={rowIndex:e.rowIndex,rowPinned:e.rowPinned||null,column:t};e.rowPinned==null&&this.ensureIndexVisible(e.rowIndex),this.ensureColumnVisible(e.colKey);const n=this.navigationService.getCellByPosition(i);!n||(this.focusService.isCellFocused(i)||this.focusService.setFocusedCell(i),n.startRowOrCellEdit(e.key))}addAggFunc(e,t){this.logDeprecation("v31.1","addAggFunc(key, func)","addAggFuncs({ key: func })"),this.aggFuncService&&this.aggFuncService.addAggFuncs({key:t})}addAggFuncs(e){this.aggFuncService&&this.aggFuncService.addAggFuncs(e)}clearAggFuncs(){this.aggFuncService&&this.aggFuncService.clear()}applyServerSideTransaction(e){if(!this.serverSideTransactionManager){this.logMissingRowModel("applyServerSideTransaction","serverSide");return}return this.serverSideTransactionManager.applyTransaction(e)}applyServerSideTransactionAsync(e,t){if(!this.serverSideTransactionManager){this.logMissingRowModel("applyServerSideTransactionAsync","serverSide");return}return this.serverSideTransactionManager.applyTransactionAsync(e,t)}applyServerSideRowData(e){var t,i;const s=(t=e.startRow)!=null?t:0,n=(i=e.route)!=null?i:[];if(s<0){console.warn(`AG Grid: invalid value ${e.startRow} for startRow, the value should be >= 0`);return}this.serverSideRowModel?this.serverSideRowModel.applyRowData(e.successParams,s,n):this.logMissingRowModel("setServerSideDatasource","serverSide")}retryServerSideLoads(){if(!this.serverSideRowModel){this.logMissingRowModel("retryServerSideLoads","serverSide");return}this.serverSideRowModel.retryLoads()}flushServerSideAsyncTransactions(){if(!this.serverSideTransactionManager){this.logMissingRowModel("flushServerSideAsyncTransactions","serverSide");return}return this.serverSideTransactionManager.flushAsyncTransactions()}applyTransaction(e){if(!this.clientSideRowModel){this.logMissingRowModel("applyTransaction","clientSide");return}return this.frameworkOverrides.wrapIncoming(()=>this.clientSideRowModel.updateRowData(e))}applyTransactionAsync(e,t){if(!this.clientSideRowModel){this.logMissingRowModel("applyTransactionAsync","clientSide");return}this.frameworkOverrides.wrapIncoming(()=>this.clientSideRowModel.batchUpdateRowData(e,t))}flushAsyncTransactions(){if(!this.clientSideRowModel){this.logMissingRowModel("flushAsyncTransactions","clientSide");return}this.frameworkOverrides.wrapIncoming(()=>this.clientSideRowModel.flushAsyncTransactions())}refreshInfiniteCache(){this.infiniteRowModel?this.infiniteRowModel.refreshCache():this.logMissingRowModel("refreshInfiniteCache","infinite")}purgeInfiniteCache(){this.infiniteRowModel?this.infiniteRowModel.purgeCache():this.logMissingRowModel("purgeInfiniteCache","infinite")}refreshServerSide(e){if(!this.serverSideRowModel){this.logMissingRowModel("refreshServerSide","serverSide");return}this.serverSideRowModel.refreshStore(e)}getServerSideGroupLevelState(){return this.serverSideRowModel?this.serverSideRowModel.getStoreState():(this.logMissingRowModel("getServerSideGroupLevelState","serverSide"),[])}getInfiniteRowCount(){if(this.infiniteRowModel)return this.infiniteRowModel.getRowCount();this.logMissingRowModel("getInfiniteRowCount","infinite")}isLastRowIndexKnown(){if(this.infiniteRowModel)return this.infiniteRowModel.isLastRowIndexKnown();this.logMissingRowModel("isLastRowIndexKnown","infinite")}getCacheBlockState(){return this.rowNodeBlockLoader.getBlockState()}getFirstDisplayedRow(){return this.logDeprecation("v31.1","getFirstDisplayedRow","getFirstDisplayedRowIndex"),this.getFirstDisplayedRowIndex()}getFirstDisplayedRowIndex(){return this.rowRenderer.getFirstVirtualRenderedRow()}getLastDisplayedRow(){return this.logDeprecation("v31.1","getLastDisplayedRow","getLastDisplayedRowIndex"),this.getLastDisplayedRowIndex()}getLastDisplayedRowIndex(){return this.rowRenderer.getLastVirtualRenderedRow()}getDisplayedRowAtIndex(e){return this.rowModel.getRow(e)}getDisplayedRowCount(){return this.rowModel.getRowCount()}paginationIsLastPageFound(){return this.paginationProxy.isLastPageFound()}paginationGetPageSize(){return this.paginationProxy.getPageSize()}paginationGetCurrentPage(){return this.paginationProxy.getCurrentPage()}paginationGetTotalPages(){return this.paginationProxy.getTotalPages()}paginationGetRowCount(){return this.paginationProxy.getMasterRowCount()}paginationGoToNextPage(){this.paginationProxy.goToNextPage()}paginationGoToPreviousPage(){this.paginationProxy.goToPreviousPage()}paginationGoToFirstPage(){this.paginationProxy.goToFirstPage()}paginationGoToLastPage(){this.paginationProxy.goToLastPage()}paginationGoToPage(e){this.paginationProxy.goToPage(e)}sizeColumnsToFit(e){typeof e=="number"?this.columnModel.sizeColumnsToFit(e,"api"):this.gridBodyCtrl.sizeColumnsToFit(e)}setColumnGroupOpened(e,t){this.columnModel.setColumnGroupOpened(e,t,"api")}getColumnGroup(e,t){return this.columnModel.getColumnGroup(e,t)}getProvidedColumnGroup(e){return this.columnModel.getProvidedColumnGroup(e)}getDisplayNameForColumn(e,t){return this.columnModel.getDisplayNameForColumn(e,t)||""}getDisplayNameForColumnGroup(e,t){return this.columnModel.getDisplayNameForColumnGroup(e,t)||""}getColumn(e){return this.columnModel.getPrimaryColumn(e)}getColumns(){return this.columnModel.getAllPrimaryColumns()}applyColumnState(e){return this.columnModel.applyColumnState(e,"api")}getColumnState(){return this.columnModel.getColumnState()}resetColumnState(){this.columnModel.resetColumnState("api")}getColumnGroupState(){return this.columnModel.getColumnGroupState()}setColumnGroupState(e){this.columnModel.setColumnGroupState(e,"api")}resetColumnGroupState(){this.columnModel.resetColumnGroupState("api")}isPinning(){return this.columnModel.isPinningLeft()||this.columnModel.isPinningRight()}isPinningLeft(){return this.columnModel.isPinningLeft()}isPinningRight(){return this.columnModel.isPinningRight()}getDisplayedColAfter(e){return this.columnModel.getDisplayedColAfter(e)}getDisplayedColBefore(e){return this.columnModel.getDisplayedColBefore(e)}setColumnVisible(e,t){this.logDeprecation("v31.1","setColumnVisible(key,visible)","setColumnsVisible([key],visible)"),this.columnModel.setColumnsVisible([e],t,"api")}setColumnsVisible(e,t){this.columnModel.setColumnsVisible(e,t,"api")}setColumnPinned(e,t){this.logDeprecation("v31.1","setColumnPinned(key,pinned)","setColumnsPinned([key],pinned)"),this.columnModel.setColumnsPinned([e],t,"api")}setColumnsPinned(e,t){this.columnModel.setColumnsPinned(e,t,"api")}getAllGridColumns(){return this.columnModel.getAllGridColumns()}getDisplayedLeftColumns(){return this.columnModel.getDisplayedLeftColumns()}getDisplayedCenterColumns(){return this.columnModel.getDisplayedCenterColumns()}getDisplayedRightColumns(){return this.columnModel.getDisplayedRightColumns()}getAllDisplayedColumns(){return this.columnModel.getAllDisplayedColumns()}getAllDisplayedVirtualColumns(){return this.columnModel.getViewportColumns()}moveColumn(e,t){this.logDeprecation("v31.1","moveColumn(key, toIndex)","moveColumns([key], toIndex)"),this.columnModel.moveColumns([e],t,"api")}moveColumnByIndex(e,t){this.columnModel.moveColumnByIndex(e,t,"api")}moveColumns(e,t){this.columnModel.moveColumns(e,t,"api")}moveRowGroupColumn(e,t){this.columnModel.moveRowGroupColumn(e,t,"api")}setColumnAggFunc(e,t){this.columnModel.setColumnAggFunc(e,t,"api")}setColumnWidth(e,t,i=!0,s="api"){this.logDeprecation("v31.1","setColumnWidth(col, width)","setColumnWidths([{key: col, newWidth: width}])"),this.columnModel.setColumnWidths([{key:e,newWidth:t}],!1,i,s)}setColumnWidths(e,t=!0,i="api"){this.columnModel.setColumnWidths(e,!1,t,i)}isPivotMode(){return this.columnModel.isPivotMode()}getPivotResultColumn(e,t){return this.columnModel.getSecondaryPivotColumn(e,t)}setValueColumns(e){this.columnModel.setValueColumns(e,"api")}getValueColumns(){return this.columnModel.getValueColumns()}removeValueColumn(e){this.logDeprecation("v31.1","removeValueColumn(colKey)","removeValueColumns([colKey])"),this.columnModel.removeValueColumns([e],"api")}removeValueColumns(e){this.columnModel.removeValueColumns(e,"api")}addValueColumn(e){this.logDeprecation("v31.1","addValueColumn(colKey)","addValueColumns([colKey])"),this.columnModel.addValueColumns([e],"api")}addValueColumns(e){this.columnModel.addValueColumns(e,"api")}setRowGroupColumns(e){this.columnModel.setRowGroupColumns(e,"api")}removeRowGroupColumn(e){this.logDeprecation("v31.1","removeRowGroupColumn(colKey)","removeRowGroupColumns([colKey])"),this.columnModel.removeRowGroupColumns([e],"api")}removeRowGroupColumns(e){this.columnModel.removeRowGroupColumns(e,"api")}addRowGroupColumn(e){this.logDeprecation("v31.1","addRowGroupColumn(colKey)","addRowGroupColumns([colKey])"),this.columnModel.addRowGroupColumns([e],"api")}addRowGroupColumns(e){this.columnModel.addRowGroupColumns(e,"api")}getRowGroupColumns(){return this.columnModel.getRowGroupColumns()}setPivotColumns(e){this.columnModel.setPivotColumns(e,"api")}removePivotColumn(e){this.logDeprecation("v31.1","removePivotColumn(colKey)","removePivotColumns([colKey])"),this.columnModel.removePivotColumns([e],"api")}removePivotColumns(e){this.columnModel.removePivotColumns(e,"api")}addPivotColumn(e){this.logDeprecation("v31.1","addPivotColumn(colKey)","addPivotColumns([colKey])"),this.columnModel.addPivotColumns([e],"api")}addPivotColumns(e){this.columnModel.addPivotColumns(e,"api")}getPivotColumns(){return this.columnModel.getPivotColumns()}getLeftDisplayedColumnGroups(){return this.columnModel.getDisplayedTreeLeft()}getCenterDisplayedColumnGroups(){return this.columnModel.getDisplayedTreeCentre()}getRightDisplayedColumnGroups(){return this.columnModel.getDisplayedTreeRight()}getAllDisplayedColumnGroups(){return this.columnModel.getAllDisplayedTrees()}autoSizeColumn(e,t){return this.logDeprecation("v31.1","autoSizeColumn(key, skipHeader)","autoSizeColumns([key], skipHeader)"),this.columnModel.autoSizeColumns({columns:[e],skipHeader:t,source:"api"})}autoSizeColumns(e,t){this.columnModel.autoSizeColumns({columns:e,skipHeader:t,source:"api"})}autoSizeAllColumns(e){this.columnModel.autoSizeAllColumns("api",e)}setPivotResultColumns(e){this.columnModel.setSecondaryColumns(e,"api")}getPivotResultColumns(){return this.columnModel.getSecondaryColumns()}getState(){return this.stateService.getState()}getGridOption(e){return this.gos.get(e)}setGridOption(e,t){this.updateGridOptions({[e]:t})}updateGridOptions(e){this.gos.updateGridOptions({options:e})}__internalUpdateGridOptions(e){this.gos.updateGridOptions({options:e,source:"gridOptionsUpdated"})}deprecatedUpdateGridOption(e,t){Ue(`set${e.charAt(0).toUpperCase()}${e.slice(1,e.length)} is deprecated. Please use 'api.setGridOption('${e}', newValue)' or 'api.updateGridOptions({ ${e}: newValue })' instead.`),this.setGridOption(e,t)}setPivotMode(e){this.deprecatedUpdateGridOption("pivotMode",e)}setPinnedTopRowData(e){this.deprecatedUpdateGridOption("pinnedTopRowData",e)}setPinnedBottomRowData(e){this.deprecatedUpdateGridOption("pinnedBottomRowData",e)}setPopupParent(e){this.deprecatedUpdateGridOption("popupParent",e)}setSuppressModelUpdateAfterUpdateTransaction(e){this.deprecatedUpdateGridOption("suppressModelUpdateAfterUpdateTransaction",e)}setDataTypeDefinitions(e){this.deprecatedUpdateGridOption("dataTypeDefinitions",e)}setPagination(e){this.deprecatedUpdateGridOption("pagination",e)}paginationSetPageSize(e){this.deprecatedUpdateGridOption("paginationPageSize",e)}setSideBar(e){this.deprecatedUpdateGridOption("sideBar",e)}setSuppressClipboardPaste(e){this.deprecatedUpdateGridOption("suppressClipboardPaste",e)}setGroupRemoveSingleChildren(e){this.deprecatedUpdateGridOption("groupRemoveSingleChildren",e)}setGroupRemoveLowestSingleChildren(e){this.deprecatedUpdateGridOption("groupRemoveLowestSingleChildren",e)}setGroupDisplayType(e){this.deprecatedUpdateGridOption("groupDisplayType",e)}setGroupIncludeFooter(e){this.deprecatedUpdateGridOption("groupIncludeFooter",e)}setGroupIncludeTotalFooter(e){this.deprecatedUpdateGridOption("groupIncludeTotalFooter",e)}setRowClass(e){this.deprecatedUpdateGridOption("rowClass",e)}setDeltaSort(e){this.deprecatedUpdateGridOption("deltaSort",e)}setSuppressRowDrag(e){this.deprecatedUpdateGridOption("suppressRowDrag",e)}setSuppressMoveWhenRowDragging(e){this.deprecatedUpdateGridOption("suppressMoveWhenRowDragging",e)}setSuppressRowClickSelection(e){this.deprecatedUpdateGridOption("suppressRowClickSelection",e)}setEnableAdvancedFilter(e){this.deprecatedUpdateGridOption("enableAdvancedFilter",e)}setIncludeHiddenColumnsInAdvancedFilter(e){this.deprecatedUpdateGridOption("includeHiddenColumnsInAdvancedFilter",e)}setAdvancedFilterParent(e){this.deprecatedUpdateGridOption("advancedFilterParent",e)}setAdvancedFilterBuilderParams(e){this.deprecatedUpdateGridOption("advancedFilterBuilderParams",e)}setQuickFilter(e){Ue("setQuickFilter is deprecated. Please use 'api.setGridOption('quickFilterText', newValue)' or 'api.updateGridOptions({ quickFilterText: newValue })' instead."),this.gos.updateGridOptions({options:{quickFilterText:e}})}setExcludeHiddenColumnsFromQuickFilter(e){this.deprecatedUpdateGridOption("includeHiddenColumnsInQuickFilter",!e)}setIncludeHiddenColumnsInQuickFilter(e){this.deprecatedUpdateGridOption("includeHiddenColumnsInQuickFilter",e)}setQuickFilterParser(e){this.deprecatedUpdateGridOption("quickFilterParser",e)}setQuickFilterMatcher(e){this.deprecatedUpdateGridOption("quickFilterMatcher",e)}setAlwaysShowHorizontalScroll(e){this.deprecatedUpdateGridOption("alwaysShowHorizontalScroll",e)}setAlwaysShowVerticalScroll(e){this.deprecatedUpdateGridOption("alwaysShowVerticalScroll",e)}setFunctionsReadOnly(e){this.deprecatedUpdateGridOption("functionsReadOnly",e)}setColumnDefs(e,t="api"){Ue("setColumnDefs is deprecated. Please use 'api.setGridOption('columnDefs', newValue)' or 'api.updateGridOptions({ columnDefs: newValue })' instead."),this.gos.updateGridOptions({options:{columnDefs:e},source:t})}setAutoGroupColumnDef(e,t="api"){Ue("setAutoGroupColumnDef is deprecated. Please use 'api.setGridOption('autoGroupColumnDef', newValue)' or 'api.updateGridOptions({ autoGroupColumnDef: newValue })' instead."),this.gos.updateGridOptions({options:{autoGroupColumnDef:e},source:t})}setDefaultColDef(e,t="api"){Ue("setDefaultColDef is deprecated. Please use 'api.setGridOption('defaultColDef', newValue)' or 'api.updateGridOptions({ defaultColDef: newValue })' instead."),this.gos.updateGridOptions({options:{defaultColDef:e},source:t})}setColumnTypes(e,t="api"){Ue("setColumnTypes is deprecated. Please use 'api.setGridOption('columnTypes', newValue)' or 'api.updateGridOptions({ columnTypes: newValue })' instead."),this.gos.updateGridOptions({options:{columnTypes:e},source:t})}setTreeData(e){this.deprecatedUpdateGridOption("treeData",e)}setServerSideDatasource(e){this.deprecatedUpdateGridOption("serverSideDatasource",e)}setCacheBlockSize(e){this.deprecatedUpdateGridOption("cacheBlockSize",e)}setDatasource(e){this.deprecatedUpdateGridOption("datasource",e)}setViewportDatasource(e){this.deprecatedUpdateGridOption("viewportDatasource",e)}setRowData(e){this.deprecatedUpdateGridOption("rowData",e)}setEnableCellTextSelection(e){this.deprecatedUpdateGridOption("enableCellTextSelection",e)}setHeaderHeight(e){this.deprecatedUpdateGridOption("headerHeight",e)}setDomLayout(e){this.deprecatedUpdateGridOption("domLayout",e)}setFillHandleDirection(e){this.deprecatedUpdateGridOption("fillHandleDirection",e)}setGroupHeaderHeight(e){this.deprecatedUpdateGridOption("groupHeaderHeight",e)}setFloatingFiltersHeight(e){this.deprecatedUpdateGridOption("floatingFiltersHeight",e)}setPivotHeaderHeight(e){this.deprecatedUpdateGridOption("pivotHeaderHeight",e)}setPivotGroupHeaderHeight(e){this.deprecatedUpdateGridOption("pivotGroupHeaderHeight",e)}setAnimateRows(e){this.deprecatedUpdateGridOption("animateRows",e)}setIsExternalFilterPresent(e){this.deprecatedUpdateGridOption("isExternalFilterPresent",e)}setDoesExternalFilterPass(e){this.deprecatedUpdateGridOption("doesExternalFilterPass",e)}setNavigateToNextCell(e){this.deprecatedUpdateGridOption("navigateToNextCell",e)}setTabToNextCell(e){this.deprecatedUpdateGridOption("tabToNextCell",e)}setTabToNextHeader(e){this.deprecatedUpdateGridOption("tabToNextHeader",e)}setNavigateToNextHeader(e){this.deprecatedUpdateGridOption("navigateToNextHeader",e)}setRowGroupPanelShow(e){this.deprecatedUpdateGridOption("rowGroupPanelShow",e)}setGetGroupRowAgg(e){this.deprecatedUpdateGridOption("getGroupRowAgg",e)}setGetBusinessKeyForNode(e){this.deprecatedUpdateGridOption("getBusinessKeyForNode",e)}setGetChildCount(e){this.deprecatedUpdateGridOption("getChildCount",e)}setProcessRowPostCreate(e){this.deprecatedUpdateGridOption("processRowPostCreate",e)}setGetRowId(e){Ue("getRowId is a static property and can no longer be updated.")}setGetRowClass(e){this.deprecatedUpdateGridOption("getRowClass",e)}setIsFullWidthRow(e){this.deprecatedUpdateGridOption("isFullWidthRow",e)}setIsRowSelectable(e){this.deprecatedUpdateGridOption("isRowSelectable",e)}setIsRowMaster(e){this.deprecatedUpdateGridOption("isRowMaster",e)}setPostSortRows(e){this.deprecatedUpdateGridOption("postSortRows",e)}setGetDocument(e){this.deprecatedUpdateGridOption("getDocument",e)}setGetContextMenuItems(e){this.deprecatedUpdateGridOption("getContextMenuItems",e)}setGetMainMenuItems(e){this.deprecatedUpdateGridOption("getMainMenuItems",e)}setProcessCellForClipboard(e){this.deprecatedUpdateGridOption("processCellForClipboard",e)}setSendToClipboard(e){this.deprecatedUpdateGridOption("sendToClipboard",e)}setProcessCellFromClipboard(e){this.deprecatedUpdateGridOption("processCellFromClipboard",e)}setProcessPivotResultColDef(e){this.deprecatedUpdateGridOption("processPivotResultColDef",e)}setProcessPivotResultColGroupDef(e){this.deprecatedUpdateGridOption("processPivotResultColGroupDef",e)}setPostProcessPopup(e){this.deprecatedUpdateGridOption("postProcessPopup",e)}setInitialGroupOrderComparator(e){this.deprecatedUpdateGridOption("initialGroupOrderComparator",e)}setGetChartToolbarItems(e){this.deprecatedUpdateGridOption("getChartToolbarItems",e)}setPaginationNumberFormatter(e){this.deprecatedUpdateGridOption("paginationNumberFormatter",e)}setGetServerSideGroupLevelParams(e){this.deprecatedUpdateGridOption("getServerSideGroupLevelParams",e)}setIsServerSideGroupOpenByDefault(e){this.deprecatedUpdateGridOption("isServerSideGroupOpenByDefault",e)}setIsApplyServerSideTransaction(e){this.deprecatedUpdateGridOption("isApplyServerSideTransaction",e)}setIsServerSideGroup(e){this.deprecatedUpdateGridOption("isServerSideGroup",e)}setGetServerSideGroupKey(e){this.deprecatedUpdateGridOption("getServerSideGroupKey",e)}setGetRowStyle(e){this.deprecatedUpdateGridOption("getRowStyle",e)}setGetRowHeight(e){this.deprecatedUpdateGridOption("getRowHeight",e)}};E([mt("csvCreator")],nt.prototype,"csvCreator",2);E([mt("excelCreator")],nt.prototype,"excelCreator",2);E([N("rowRenderer")],nt.prototype,"rowRenderer",2);E([N("navigationService")],nt.prototype,"navigationService",2);E([N("filterManager")],nt.prototype,"filterManager",2);E([N("columnModel")],nt.prototype,"columnModel",2);E([N("selectionService")],nt.prototype,"selectionService",2);E([N("gridOptionsService")],nt.prototype,"gos",2);E([N("valueService")],nt.prototype,"valueService",2);E([N("alignedGridsService")],nt.prototype,"alignedGridsService",2);E([N("eventService")],nt.prototype,"eventService",2);E([N("pinnedRowModel")],nt.prototype,"pinnedRowModel",2);E([N("context")],nt.prototype,"context",2);E([N("rowModel")],nt.prototype,"rowModel",2);E([N("sortController")],nt.prototype,"sortController",2);E([N("paginationProxy")],nt.prototype,"paginationProxy",2);E([N("focusService")],nt.prototype,"focusService",2);E([N("dragAndDropService")],nt.prototype,"dragAndDropService",2);E([mt("rangeService")],nt.prototype,"rangeService",2);E([mt("clipboardService")],nt.prototype,"clipboardService",2);E([mt("aggFuncService")],nt.prototype,"aggFuncService",2);E([N("menuService")],nt.prototype,"menuService",2);E([N("valueCache")],nt.prototype,"valueCache",2);E([N("animationFrameService")],nt.prototype,"animationFrameService",2);E([mt("statusBarService")],nt.prototype,"statusBarService",2);E([mt("chartService")],nt.prototype,"chartService",2);E([mt("undoRedoService")],nt.prototype,"undoRedoService",2);E([mt("rowNodeBlockLoader")],nt.prototype,"rowNodeBlockLoader",2);E([mt("ssrmTransactionManager")],nt.prototype,"serverSideTransactionManager",2);E([N("ctrlsService")],nt.prototype,"ctrlsService",2);E([N("overlayService")],nt.prototype,"overlayService",2);E([mt("sideBarService")],nt.prototype,"sideBarService",2);E([N("stateService")],nt.prototype,"stateService",2);E([N("expansionService")],nt.prototype,"expansionService",2);E([N("apiEventService")],nt.prototype,"apiEventService",2);E([N("frameworkOverrides")],nt.prototype,"frameworkOverrides",2);E([Ce],nt.prototype,"init",1);nt=E([Fe("gridApi")],nt);var Gi=class extends ge{constructor(){super(...arguments),this.quickFilter=null,this.quickFilterParts=null}postConstruct(){this.addManagedListener(this.eventService,L.EVENT_COLUMN_PIVOT_MODE_CHANGED,()=>this.resetQuickFilterCache()),this.addManagedListener(this.eventService,L.EVENT_NEW_COLUMNS_LOADED,()=>this.resetQuickFilterCache()),this.addManagedListener(this.eventService,L.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.resetQuickFilterCache()),this.addManagedListener(this.eventService,L.EVENT_COLUMN_VISIBLE,()=>{this.gridOptionsService.get("includeHiddenColumnsInQuickFilter")||this.resetQuickFilterCache()}),this.addManagedPropertyListener("quickFilterText",e=>this.setQuickFilter(e.currentValue)),this.addManagedPropertyListener("includeHiddenColumnsInQuickFilter",()=>this.onIncludeHiddenColumnsInQuickFilterChanged()),this.quickFilter=this.parseQuickFilter(this.gridOptionsService.get("quickFilterText")),this.parser=this.gridOptionsService.get("quickFilterParser"),this.matcher=this.gridOptionsService.get("quickFilterMatcher"),this.setQuickFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],()=>this.setQuickFilterParserAndMatcher())}isQuickFilterPresent(){return this.quickFilter!==null}doesRowPassQuickFilter(e){const t=this.gridOptionsService.get("cacheQuickFilter");return this.matcher?this.doesRowPassQuickFilterMatcher(t,e):this.quickFilterParts.every(i=>t?this.doesRowPassQuickFilterCache(e,i):this.doesRowPassQuickFilterNoCache(e,i))}resetQuickFilterCache(){this.rowModel.forEachNode(e=>e.quickFilterAggregateText=null)}setQuickFilterParts(){const{quickFilter:e,parser:t}=this;e?this.quickFilterParts=t?t(e):e.split(" "):this.quickFilterParts=null}parseQuickFilter(e){return ce(e)?this.gridOptionsService.isRowModelType("clientSide")?e.toUpperCase():(console.warn("AG Grid - Quick filtering only works with the Client-Side Row Model"),null):null}setQuickFilter(e){if(e!=null&&typeof e!="string"){console.warn(`AG Grid - Grid option quickFilterText only supports string inputs, received: ${typeof e}`);return}const t=this.parseQuickFilter(e);this.quickFilter!==t&&(this.quickFilter=t,this.setQuickFilterParts(),this.dispatchEvent({type:Gi.EVENT_QUICK_FILTER_CHANGED}))}setQuickFilterParserAndMatcher(){const e=this.gridOptionsService.get("quickFilterParser"),t=this.gridOptionsService.get("quickFilterMatcher"),i=e!==this.parser||t!==this.matcher;this.parser=e,this.matcher=t,i&&(this.setQuickFilterParts(),this.dispatchEvent({type:Gi.EVENT_QUICK_FILTER_CHANGED}))}onIncludeHiddenColumnsInQuickFilterChanged(){this.columnModel.refreshQuickFilterColumns(),this.resetQuickFilterCache(),this.isQuickFilterPresent()&&this.dispatchEvent({type:Gi.EVENT_QUICK_FILTER_CHANGED})}doesRowPassQuickFilterNoCache(e,t){return this.columnModel.getAllColumnsForQuickFilter().some(s=>{const n=this.getQuickFilterTextForColumn(s,e);return ce(n)&&n.indexOf(t)>=0})}doesRowPassQuickFilterCache(e,t){return this.checkGenerateQuickFilterAggregateText(e),e.quickFilterAggregateText.indexOf(t)>=0}doesRowPassQuickFilterMatcher(e,t){let i;e?(this.checkGenerateQuickFilterAggregateText(t),i=t.quickFilterAggregateText):i=this.getQuickFilterAggregateText(t);const{quickFilterParts:s,matcher:n}=this;return n(s,i)}checkGenerateQuickFilterAggregateText(e){e.quickFilterAggregateText||(e.quickFilterAggregateText=this.getQuickFilterAggregateText(e))}getQuickFilterTextForColumn(e,t){let i=this.valueService.getValue(e,t,!0);const s=e.getColDef();if(s.getQuickFilterText){const n=this.gridOptionsService.addGridCommonParams({value:i,node:t,data:t.data,column:e,colDef:s});i=s.getQuickFilterText(n)}return ce(i)?i.toString().toUpperCase():null}getQuickFilterAggregateText(e){const t=[];return this.columnModel.getAllColumnsForQuickFilter().forEach(s=>{const n=this.getQuickFilterTextForColumn(s,e);ce(n)&&t.push(n)}),t.join(Gi.QUICK_FILTER_SEPARATOR)}};Gi.EVENT_QUICK_FILTER_CHANGED="quickFilterChanged";Gi.QUICK_FILTER_SEPARATOR=`
`;E([N("valueService")],Gi.prototype,"valueService",2);E([N("columnModel")],Gi.prototype,"columnModel",2);E([N("rowModel")],Gi.prototype,"rowModel",2);E([Ce],Gi.prototype,"postConstruct",1);Gi=E([Fe("quickFilterService")],Gi);var es=class extends ge{constructor(){super(...arguments),this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue=[],this.advancedFilterModelUpdateQueue=[]}init(){var e,t,i;this.addManagedListener(this.eventService,L.EVENT_GRID_COLUMNS_CHANGED,()=>this.onColumnsChanged()),this.addManagedListener(this.eventService,L.EVENT_COLUMN_VALUE_CHANGED,()=>this.refreshFiltersForAggregations()),this.addManagedListener(this.eventService,L.EVENT_COLUMN_PIVOT_CHANGED,()=>this.refreshFiltersForAggregations()),this.addManagedListener(this.eventService,L.EVENT_COLUMN_PIVOT_MODE_CHANGED,()=>this.refreshFiltersForAggregations()),this.addManagedListener(this.eventService,L.EVENT_NEW_COLUMNS_LOADED,()=>this.updateAdvancedFilterColumns()),this.addManagedListener(this.eventService,L.EVENT_COLUMN_VISIBLE,()=>this.updateAdvancedFilterColumns()),this.addManagedListener(this.eventService,L.EVENT_ROW_DATA_UPDATED,()=>this.onNewRowsLoaded("rowDataUpdated")),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],()=>{this.onFilterChanged({source:"api"})}),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",()=>{this.updateAggFiltering(),this.onFilterChanged()}),this.addManagedPropertyListener("advancedFilterModel",s=>this.setAdvancedFilterModel(s.currentValue)),this.addManagedListener(this.eventService,L.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,({enabled:s})=>this.onAdvancedFilterEnabledChanged(s)),this.addManagedListener(this.eventService,L.EVENT_DATA_TYPES_INFERRED,()=>this.processFilterModelUpdateQueue()),this.addManagedListener(this.quickFilterService,Gi.EVENT_QUICK_FILTER_CHANGED,()=>this.onFilterChanged({source:"quickFilter"})),this.initialFilterModel=We({},(i=(t=(e=this.gridOptionsService.get("initialState"))==null?void 0:e.filter)==null?void 0:t.filterModel)!=null?i:{})}isExternalFilterPresentCallback(){const e=this.gridOptionsService.getCallback("isExternalFilterPresent");return typeof e=="function"?e({}):!1}doesExternalFilterPass(e){const t=this.gridOptionsService.get("doesExternalFilterPass");return typeof t=="function"?t(e):!1}setFilterModel(e,t="api"){if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}if(this.dataTypeService.isPendingInference()){this.filterModelUpdateQueue.push({model:e,source:t});return}const i=[],s=this.getFilterModel();if(e){const n=Nh(Object.keys(e));this.allColumnFilters.forEach((l,u)=>{const g=e[u];i.push(this.setModelOnFilterWrapper(l.filterPromise,g)),n.delete(u)}),n.forEach(l=>{const u=this.columnModel.getPrimaryColumn(l)||this.columnModel.getGridColumn(l);if(!u){console.warn("AG Grid: setFilterModel() - no column found for colId: "+l);return}if(!u.isFilterAllowed()){console.warn("AG Grid: setFilterModel() - unable to fully apply model, filtering disabled for colId: "+l);return}const g=this.getOrCreateFilterWrapper(u,"NO_UI");if(!g){console.warn("AG-Grid: setFilterModel() - unable to fully apply model, unable to create filter for colId: "+l);return}i.push(this.setModelOnFilterWrapper(g.filterPromise,e[l]))})}else this.allColumnFilters.forEach(n=>{i.push(this.setModelOnFilterWrapper(n.filterPromise,null))});Bi.all(i).then(()=>{const n=this.getFilterModel(),l=[];this.allColumnFilters.forEach((u,g)=>{const C=s?s[g]:null,S=n?n[g]:null;ot.jsonEquals(C,S)||l.push(u.column)}),l.length>0&&this.onFilterChanged({columns:l,source:t})})}setModelOnFilterWrapper(e,t){return new Bi(i=>{e.then(s=>{typeof s.setModel!="function"&&(console.warn("AG Grid: filter missing setModel method, which is needed for setFilterModel"),i()),(s.setModel(t)||Bi.resolve()).then(()=>i())})})}getFilterModel(){const e={};return this.allColumnFilters.forEach((t,i)=>{const s=this.getModelFromFilterWrapper(t);ce(s)&&(e[i]=s)}),e}getModelFromFilterWrapper(e){var t;const s=e.filterPromise.resolveNow(null,n=>n);return s==null?(t=this.initialFilterModel[e.column.getColId()])!=null?t:null:typeof s.getModel!="function"?(console.warn("AG Grid: filter API missing getModel method, which is needed for getFilterModel"),null):s.getModel()}isColumnFilterPresent(){return this.activeColumnFilters.length>0}isAggregateFilterPresent(){return!!this.activeAggregateFilters.length}isExternalFilterPresent(){return this.externalFilterPresent}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}isAdvancedFilterPresent(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isFilterPresent()}onAdvancedFilterEnabledChanged(e){var t;e?this.allColumnFilters.size&&(this.allColumnFilters.forEach(i=>this.disposeFilterWrapper(i,"advancedFilterEnabled")),this.onFilterChanged({source:"advancedFilter"})):(t=this.advancedFilterService)!=null&&t.isFilterPresent()&&(this.advancedFilterService.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvancedFilterEnabled(){var e;return!!((e=this.advancedFilterService)!=null&&e.isEnabled())}isAdvancedFilterHeaderActive(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isHeaderActive()}doAggregateFiltersPass(e,t){return this.doColumnFiltersPass(e,t,!0)}updateActiveFilters(){this.activeColumnFilters.length=0,this.activeAggregateFilters.length=0;const e=s=>s?s.isFilterActive?s.isFilterActive():(console.warn("AG Grid: Filter is missing isFilterActive() method"),!1):!1,t=!!this.gridOptionsService.getGroupAggFiltering(),i=s=>{if(!s.isPrimary())return!0;const l=!this.columnModel.isPivotActive();return!s.isValueActive()||!l?!1:this.columnModel.isPivotMode()?!0:t};this.allColumnFilters.forEach(s=>{if(s.filterPromise.resolveNow(!1,e)){const n=s.filterPromise.resolveNow(null,l=>l);i(s.column)?this.activeAggregateFilters.push(n):this.activeColumnFilters.push(n)}})}updateFilterFlagInColumns(e,t){this.allColumnFilters.forEach(i=>{const s=i.filterPromise.resolveNow(!1,n=>n.isFilterActive());i.column.setFilterActive(s,e,t)})}isAnyFilterPresent(){return this.isQuickFilterPresent()||this.isColumnFilterPresent()||this.isAggregateFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}doColumnFiltersPass(e,t,i){const{data:s,aggData:n}=e,l=i?this.activeAggregateFilters:this.activeColumnFilters,u=i?n:s;for(let g=0;g<l.length;g++){const C=l[g];if(!(C==null||C===t)){if(typeof C.doesFilterPass!="function")throw new Error("Filter is missing method doesFilterPass");if(!C.doesFilterPass({node:e,data:u}))return!1}}return!0}resetQuickFilterCache(){this.quickFilterService.resetQuickFilterCache()}refreshFiltersForAggregations(){this.gridOptionsService.getGroupAggFiltering()&&this.onFilterChanged()}callOnFilterChangedOutsideRenderCycle(e){const t=()=>this.onFilterChanged(e);this.rowRenderer.isRefreshInProgress()?setTimeout(t,0):t()}onFilterChanged(e={}){const{source:t,filterInstance:i,additionalEventAttributes:s,columns:n}=e;this.updateDependantFilters(),this.updateActiveFilters(),this.updateFilterFlagInColumns("filterChanged",s),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.allColumnFilters.forEach(u=>{!u.filterPromise||u.filterPromise.then(g=>{g&&g!==i&&g.onAnyFilterChanged&&g.onAnyFilterChanged()})});const l={source:t,type:L.EVENT_FILTER_CHANGED,columns:n||[]};s&&Wi(l,s),this.processingFilterChange=!0,this.eventService.dispatchEvent(l),this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){var e;return!((e=this.gridOptionsService.get("allowShowChangeAfterFilter"))!=null?e:!1)&&this.processingFilterChange}isQuickFilterPresent(){return this.quickFilterService.isQuickFilterPresent()}updateAggFiltering(){this.aggFiltering=!!this.gridOptionsService.getGroupAggFiltering()}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&(this.aggFiltering||this.columnModel.isPivotMode())}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!(this.aggFiltering||this.columnModel.isPivotMode())}doesRowPassOtherFilters(e,t){return this.doesRowPassFilter({rowNode:t,filterInstanceToSkip:e})}doesRowPassAggregateFilters(e){return!(this.isAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode)||this.isAggregateFilterPresent()&&!this.doAggregateFiltersPass(e.rowNode,e.filterInstanceToSkip))}doesRowPassFilter(e){return!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode)||this.isExternalFilterPresent()&&!this.doesExternalFilterPass(e.rowNode)||this.isColumnFilterPresent()&&!this.doColumnFiltersPass(e.rowNode,e.filterInstanceToSkip)||this.isAdvancedFilterPresent()&&!this.advancedFilterService.doesFilterPass(e.rowNode))}onNewRowsLoaded(e){this.allColumnFilters.forEach(t=>{t.filterPromise.then(i=>{i.onNewRowsLoaded&&i.onNewRowsLoaded()})}),this.updateFilterFlagInColumns(e,{afterDataChange:!0}),this.updateActiveFilters()}createValueGetter(e){return({node:t})=>this.valueService.getValue(e,t,!0)}createGetValue(e){return(t,i)=>{const s=i?this.columnModel.getGridColumn(i):e;return s?this.valueService.getValue(s,t,!0):void 0}}getFilterComponent(e,t,i=!0){var s;if(i)return((s=this.getOrCreateFilterWrapper(e,t))==null?void 0:s.filterPromise)||null;const n=this.cachedFilter(e);return n?n.filterPromise:null}isFilterActive(e){const t=this.cachedFilter(e);return!!t&&t.filterPromise.resolveNow(!1,i=>i.isFilterActive())}getOrCreateFilterWrapper(e,t){if(!e.isFilterAllowed())return null;let i=this.cachedFilter(e);return i?t!=="NO_UI"&&this.putIntoGui(i,t):(i=this.createFilterWrapper(e,t),this.setColumnFilterWrapper(e,i)),i}cachedFilter(e){return this.allColumnFilters.get(e.getColId())}getDefaultFilter(e){let t;if(Rt.__isRegistered("@ag-grid-enterprise/set-filter",this.context.getGridId()))t="agSetColumnFilter";else{const i=this.dataTypeService.getBaseDataType(e);i==="number"?t="agNumberColumnFilter":i==="date"||i==="dateString"?t="agDateColumnFilter":t="agTextColumnFilter"}return t}getDefaultFloatingFilter(e){let t;if(Rt.__isRegistered("@ag-grid-enterprise/set-filter",this.context.getGridId()))t="agSetColumnFloatingFilter";else{const i=this.dataTypeService.getBaseDataType(e);i==="number"?t="agNumberColumnFloatingFilter":i==="date"||i==="dateString"?t="agDateColumnFloatingFilter":t="agTextColumnFloatingFilter"}return t}createFilterInstance(e){const t=this.getDefaultFilter(e),i=e.getColDef();let s;const n=Vt(We({},this.createFilterParams(e,i)),{filterModifiedCallback:()=>this.filterModifiedCallbackFactory(s,e)(),filterChangedCallback:u=>this.filterChangedCallbackFactory(s,e)(u),doesRowPassOtherFilter:u=>this.doesRowPassOtherFilters(s,u)}),l=this.userComponentFactory.getFilterDetails(i,n,t);return l?{filterPromise:()=>{const u=l.newAgStackInstance();return u&&u.then(g=>s=g),u},compDetails:l}:{filterPromise:null,compDetails:null}}createFilterParams(e,t){return this.gridOptionsService.addGridCommonParams({column:e,colDef:ah(t),rowModel:this.rowModel,filterChangedCallback:()=>{},filterModifiedCallback:()=>{},valueGetter:this.createValueGetter(e),getValue:this.createGetValue(e),doesRowPassOtherFilter:()=>!0})}createFilterWrapper(e,t){var i;const s={column:e,filterPromise:null,compiledElement:null,guiPromise:Bi.resolve(null),compDetails:null},{filterPromise:n,compDetails:l}=this.createFilterInstance(e);return s.filterPromise=(i=n?.())!=null?i:null,s.compDetails=l,n&&this.putIntoGui(s,t),s}putIntoGui(e,t){const i=document.createElement("div");i.className="ag-filter",e.guiPromise=new Bi(s=>{e.filterPromise.then(n=>{let l=n.getGui();ce(l)||console.warn(`AG Grid: getGui method from filter returned ${l}, it should be a DOM element or an HTML template string.`),typeof l=="string"&&(l=Ni(l)),i.appendChild(l),s(i);const u={type:L.EVENT_FILTER_OPENED,column:e.column,source:t,eGui:i};this.eventService.dispatchEvent(u)})})}onColumnsChanged(){const e=[];this.allColumnFilters.forEach((t,i)=>{let s;t.column.isPrimary()?s=this.columnModel.getPrimaryColumn(i):s=this.columnModel.getGridColumn(i),!s&&(e.push(t.column),this.disposeFilterWrapper(t,"columnChanged"),this.disposeColumnListener(i))}),e.length>0?this.onFilterChanged({columns:e,source:"api"}):this.updateDependantFilters()}updateDependantFilters(){const e=this.columnModel.getGroupAutoColumns();e?.forEach(t=>{t.getColDef().filter==="agGroupColumnFilter"&&this.getOrCreateFilterWrapper(t,"NO_UI")})}isFilterAllowed(e){var t,i;if(this.isAdvancedFilterEnabled()||!e.isFilterAllowed())return!1;const n=this.allColumnFilters.get(e.getColId());return(i=(t=n?.filterPromise)==null?void 0:t.resolveNow(!0,l=>typeof l?.isFilterAllowed=="function"?l?.isFilterAllowed():!0))!=null?i:!0}getFloatingFilterCompDetails(e,t){const i=C=>{const S=this.getFilterComponent(e,"NO_UI");S?.then(A=>{C(So(A))})},s=e.getColDef(),n=Vt(We({},this.createFilterParams(e,s)),{filterChangedCallback:()=>i(C=>this.filterChangedCallbackFactory(C,e)())}),l=this.userComponentFactory.mergeParamsWithApplicationProvidedParams(s,kd,n);let u=this.userComponentFactory.getDefaultFloatingFilterType(s,()=>this.getDefaultFloatingFilter(e));u==null&&(u="agReadOnlyFloatingFilter");const g={column:e,filterParams:l,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(e),parentFilterInstance:i,showParentFilter:t,suppressFilterButton:!1};return this.userComponentFactory.getFloatingFilterCompDetails(s,g,u)}getCurrentFloatingFilterParentModel(e){const t=this.getFilterComponent(e,"NO_UI",!1);return t?t.resolveNow(null,i=>i&&i.getModel()):null}destroyFilter(e,t="api"){const i=e.getColId(),s=this.allColumnFilters.get(i);this.disposeColumnListener(i),delete this.initialFilterModel[i],s&&(this.disposeFilterWrapper(s,t),this.onFilterChanged({columns:[e],source:"api"}))}disposeColumnListener(e){const t=this.allColumnListeners.get(e);t&&(this.allColumnListeners.delete(e),t())}disposeFilterWrapper(e,t){e.filterPromise.then(i=>{this.getContext().destroyBean(i),e.column.setFilterActive(!1,"filterDestroyed"),this.allColumnFilters.delete(e.column.getColId());const s={type:L.EVENT_FILTER_DESTROYED,source:t,column:e.column};this.eventService.dispatchEvent(s)})}filterModifiedCallbackFactory(e,t){return()=>{const i={type:L.EVENT_FILTER_MODIFIED,column:t,filterInstance:e};this.eventService.dispatchEvent(i)}}filterChangedCallbackFactory(e,t){return i=>{var s;const n=(s=i?.source)!=null?s:"api",l={filter:e,additionalEventAttributes:i,columns:[t],source:n};this.callOnFilterChangedOutsideRenderCycle(l)}}checkDestroyFilter(e){const t=this.allColumnFilters.get(e);if(!t)return;const i=t.column,{compDetails:s}=i.isFilterAllowed()?this.createFilterInstance(i):{compDetails:null};if(this.areFilterCompsDifferent(t.compDetails,s)){this.destroyFilter(i,"paramsUpdated");return}const n=i.getColDef().filterParams;if(!t.filterPromise){this.destroyFilter(i,"paramsUpdated");return}t.filterPromise.then(l=>{(l?.refresh?l.refresh(We(Vt(We({},this.createFilterParams(i,i.getColDef())),{filterModifiedCallback:this.filterModifiedCallbackFactory(l,i),filterChangedCallback:this.filterChangedCallbackFactory(l,i),doesRowPassOtherFilter:g=>this.doesRowPassOtherFilters(l,g)}),n)):!0)===!1&&this.destroyFilter(i,"paramsUpdated")})}setColumnFilterWrapper(e,t){const i=e.getColId();this.allColumnFilters.set(i,t),this.allColumnListeners.set(i,this.addManagedListener(e,Lt.EVENT_COL_DEF_CHANGED,()=>this.checkDestroyFilter(i)))}areFilterCompsDifferent(e,t){if(!t||!e)return!0;const{componentClass:i}=e,{componentClass:s}=t;return!(i===s||i?.render&&s?.render&&i.render===s.render)}getAdvancedFilterModel(){return this.isAdvancedFilterEnabled()?this.advancedFilterService.getModel():null}setAdvancedFilterModel(e){if(!!this.isAdvancedFilterEnabled()){if(this.dataTypeService.isPendingInference()){this.advancedFilterModelUpdateQueue.push(e);return}this.advancedFilterService.setModel(e??null),this.onFilterChanged({source:"advancedFilter"})}}showAdvancedFilterBuilder(e){!this.isAdvancedFilterEnabled()||this.advancedFilterService.getCtrl().toggleFilterBuilder(e,!0)}updateAdvancedFilterColumns(){!this.isAdvancedFilterEnabled()||this.advancedFilterService.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){return this.isAdvancedFilterEnabled()?!1:this.columnModel.getAllGridColumns().some(t=>t.getColDef().floatingFilter)}getFilterInstance(e,t){if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}const i=this.getFilterInstanceImpl(e,n=>{if(!t)return;const l=So(n);t(l)});return So(i)}getColumnFilterInstance(e){return new Promise(t=>{this.getFilterInstance(e,i=>{t(i)})})}getFilterInstanceImpl(e,t){const i=this.columnModel.getPrimaryColumn(e);if(!i)return;const s=this.getFilterComponent(i,"NO_UI"),n=s&&s.resolveNow(null,l=>l);return n?setTimeout(t,0,n):s&&s.then(l=>{t(l)}),n}warnAdvancedFilters(){Ue("Column Filter API methods have been disabled as Advanced Filters are enabled.")}setupAdvancedFilterHeaderComp(e){var t;(t=this.advancedFilterService)==null||t.getCtrl().setupHeaderComp(e)}getHeaderRowCount(){return this.isAdvancedFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvancedFilterHeaderActive()?this.advancedFilterService.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){this.filterModelUpdateQueue.forEach(({model:e,source:t})=>this.setFilterModel(e,t)),this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue.forEach(({key:e,model:t,resolve:i})=>{this.setColumnFilterModel(e,t).then(()=>i())}),this.columnFilterModelUpdateQueue=[],this.advancedFilterModelUpdateQueue.forEach(e=>this.setAdvancedFilterModel(e)),this.advancedFilterModelUpdateQueue=[]}getColumnFilterModel(e){const t=this.getFilterWrapper(e);return t?this.getModelFromFilterWrapper(t):null}setColumnFilterModel(e,t){if(this.isAdvancedFilterEnabled())return this.warnAdvancedFilters(),Promise.resolve();if(this.dataTypeService.isPendingInference()){let l=()=>{};const u=new Promise(g=>{l=g});return this.columnFilterModelUpdateQueue.push({key:e,model:t,resolve:l}),u}const i=this.columnModel.getPrimaryColumn(e),s=i?this.getOrCreateFilterWrapper(i,"NO_UI"):null;return s?(l=>new Promise(u=>{l.then(g=>u(g))}))(this.setModelOnFilterWrapper(s.filterPromise,t)):Promise.resolve()}getFilterWrapper(e){var t;const i=this.columnModel.getPrimaryColumn(e);return i&&(t=this.cachedFilter(i))!=null?t:null}destroy(){super.destroy(),this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"gridDestroyed")),this.allColumnListeners.clear()}};E([N("valueService")],es.prototype,"valueService",2);E([N("columnModel")],es.prototype,"columnModel",2);E([N("rowModel")],es.prototype,"rowModel",2);E([N("userComponentFactory")],es.prototype,"userComponentFactory",2);E([N("rowRenderer")],es.prototype,"rowRenderer",2);E([N("dataTypeService")],es.prototype,"dataTypeService",2);E([N("quickFilterService")],es.prototype,"quickFilterService",2);E([mt("advancedFilterService")],es.prototype,"advancedFilterService",2);E([Ce],es.prototype,"init",1);es=E([Fe("filterManager")],es);var $h=class extends Ze{constructor(e,t){super(e),this.ctrl=t}getCtrl(){return this.ctrl}},jo=class Fg extends $h{constructor(t){super(Fg.TEMPLATE,t)}postConstruct(){const t=this.getGui(),i={addOrRemoveCssClass:(s,n)=>this.addOrRemoveCssClass(s,n),addOrRemoveBodyCssClass:(s,n)=>this.eFloatingFilterBody.classList.toggle(s,n),setButtonWrapperDisplayed:s=>lt(this.eButtonWrapper,s),setCompDetails:s=>this.setCompDetails(s),getFloatingFilterComp:()=>this.compPromise,setWidth:s=>t.style.width=s,setMenuIcon:s=>this.eButtonShowMainFilter.appendChild(s)};this.ctrl.setComp(i,t,this.eButtonShowMainFilter,this.eFloatingFilterBody)}setCompDetails(t){if(!t){this.destroyFloatingFilterComp(),this.compPromise=null;return}this.compPromise=t.newAgStackInstance(),this.compPromise.then(i=>this.afterCompCreated(i))}destroyFloatingFilterComp(){this.floatingFilterComp&&(this.eFloatingFilterBody.removeChild(this.floatingFilterComp.getGui()),this.floatingFilterComp=this.destroyBean(this.floatingFilterComp))}afterCompCreated(t){if(!!t){if(!this.isAlive()){this.destroyBean(t);return}this.destroyFloatingFilterComp(),this.floatingFilterComp=t,this.eFloatingFilterBody.appendChild(t.getGui()),t.afterGuiAttached&&t.afterGuiAttached()}}};jo.TEMPLATE=`<div class="ag-header-cell ag-floating-filter" role="gridcell">
            <div ref="eFloatingFilterBody" role="presentation"></div>
            <div class="ag-floating-filter-button ag-hidden" ref="eButtonWrapper" role="presentation">
                <button type="button" class="ag-button ag-floating-filter-button-button" ref="eButtonShowMainFilter" tabindex="-1"></button>
            </div>
        </div>`;E([xe("eFloatingFilterBody")],jo.prototype,"eFloatingFilterBody",2);E([xe("eButtonWrapper")],jo.prototype,"eButtonWrapper",2);E([xe("eButtonShowMainFilter")],jo.prototype,"eButtonShowMainFilter",2);E([Ce],jo.prototype,"postConstruct",1);E([Di],jo.prototype,"destroyFloatingFilterComp",1);var Uy=jo,xl=class extends ge{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){const e=this.getDomLayout(),t={autoHeight:e==="autoHeight",normal:e==="normal",print:e==="print"},i=t.autoHeight?"ag-layout-auto-height":t.print?"ag-layout-print":"ag-layout-normal";this.view.updateLayoutClasses(i,t)}getDomLayout(){var e;const t=(e=this.gridOptionsService.get("domLayout"))!=null?e:"normal";return["normal","print","autoHeight"].indexOf(t)===-1?(Ue(`${t} is not valid for DOM Layout, valid values are 'normal', 'autoHeight', 'print'.`),"normal"):t}};E([Ce],xl.prototype,"postConstruct",1);var Ks=class extends ge{constructor(e){super(),this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.eBodyViewport=e,this.resetLastHScrollDebounced=Ai(()=>this.lastScrollSource[1]=null,500),this.resetLastVScrollDebounced=Ai(()=>this.lastScrollSource[0]=null,500)}postConstruct(){this.enableRtl=this.gridOptionsService.get("enableRtl"),this.addManagedListener(this.eventService,L.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this)),this.ctrlsService.whenReady(e=>{this.centerRowContainerCtrl=e.centerRowContainerCtrl,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}addScrollListener(){const e=this.ctrlsService.getFakeHScrollComp(),t=this.ctrlsService.getFakeVScrollComp();this.addManagedListener(this.centerRowContainerCtrl.getViewportElement(),"scroll",this.onHScroll.bind(this)),e.onScrollCallback(this.onFakeHScroll.bind(this));const i=this.gridOptionsService.get("debounceVerticalScrollbar"),s=i?Ai(this.onVScroll.bind(this),100):this.onVScroll.bind(this),n=i?Ai(this.onFakeVScroll.bind(this),100):this.onFakeVScroll.bind(this);this.addManagedListener(this.eBodyViewport,"scroll",s),t.onScrollCallback(n)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){if(this.centerRowContainerCtrl==null)return;e===void 0&&(e=this.centerRowContainerCtrl.getCenterViewportScrollLeft());const i=this.enableRtl?e:-e,s=this.ctrlsService.getTopCenterRowContainerCtrl(),n=this.ctrlsService.getStickyTopCenterRowContainerCtrl(),l=this.ctrlsService.getBottomCenterRowContainerCtrl(),u=this.ctrlsService.getFakeHScrollComp();this.ctrlsService.getHeaderRowContainerCtrl().setHorizontalScroll(-i),l.setContainerTranslateX(i),s.setContainerTranslateX(i),n.setContainerTranslateX(i);const C=this.centerRowContainerCtrl.getViewportElement(),S=this.lastScrollSource[1]===0;e=Math.abs(e),S?u.setScrollPosition(e):En(C,e,this.enableRtl)}isControllingScroll(e,t){return this.lastScrollSource[t]==null?(this.lastScrollSource[t]=e,!0):this.lastScrollSource[t]===e}onFakeHScroll(){!this.isControllingScroll(1,1)||this.onHScrollCommon(1)}onHScroll(){!this.isControllingScroll(0,1)||this.onHScrollCommon(0)}onHScrollCommon(e){const t=this.centerRowContainerCtrl.getViewportElement(),{scrollLeft:i}=t;if(this.shouldBlockScrollUpdate(1,i,!0))return;let s;e===0?s=Sn(t,this.enableRtl):s=this.ctrlsService.getFakeHScrollComp().getScrollPosition(),this.doHorizontalScroll(Math.round(s)),this.resetLastHScrollDebounced()}onFakeVScroll(){!this.isControllingScroll(1,0)||this.onVScrollCommon(1)}onVScroll(){!this.isControllingScroll(0,0)||this.onVScrollCommon(0)}onVScrollCommon(e){let t;e===0?t=this.eBodyViewport.scrollTop:t=this.ctrlsService.getFakeVScrollComp().getScrollPosition(),!this.shouldBlockScrollUpdate(0,t,!0)&&(this.animationFrameService.setScrollTop(t),this.nextScrollTop=t,e===0?this.ctrlsService.getFakeVScrollComp().setScrollPosition(t):this.eBodyViewport.scrollTop=t,this.gridOptionsService.get("suppressAnimationFrame")?this.scrollGridIfNeeded():this.animationFrameService.schedule(),this.resetLastVScrollDebounced())}doHorizontalScroll(e){const t=this.ctrlsService.getFakeHScrollComp().getScrollPosition();this.scrollLeft===e&&e===t||(this.scrollLeft=e,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowContainerCtrl.onHorizontalViewportChanged(!0))}fireScrollEvent(e){const t={type:L.EVENT_BODY_SCROLL,direction:e===1?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=void 0,this.scrollTimer=window.setTimeout(()=>{const i=Vt(We({},t),{type:L.EVENT_BODY_SCROLL_END});this.eventService.dispatchEvent(i)},100)}shouldBlockScrollUpdate(e,t,i=!1){return i&&!Xs()?!1:e===0?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t)}shouldBlockVerticalScroll(e){const t=$n(this.eBodyViewport),{scrollHeight:i}=this.eBodyViewport;return e<0||e+t>i}shouldBlockHorizontalScroll(e){const t=this.centerRowContainerCtrl.getCenterWidth(),{scrollWidth:i}=this.centerRowContainerCtrl.getViewportElement();if(this.enableRtl&&xn()){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>i}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){this.scrollLeft!==this.centerRowContainerCtrl.getCenterViewportScrollLeft()&&this.onHScrollCommon(0)}scrollGridIfNeeded(){const e=this.scrollTop!=this.nextScrollTop;return e&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),e}setHorizontalScrollPosition(e,t=!1){const s=this.centerRowContainerCtrl.getViewportElement().scrollWidth-this.centerRowContainerCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate(1,e)&&(this.enableRtl&&xn()?e=e>0?0:s:e=Math.min(Math.max(e,0),s)),En(this.centerRowContainerCtrl.getViewportElement(),Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.eBodyViewport.scrollTop=e}getVScrollPosition(){return this.lastScrollTop=this.eBodyViewport.scrollTop,this.lastOffsetHeight=this.eBodyViewport.offsetHeight,{top:this.lastScrollTop,bottom:this.lastScrollTop+this.lastOffsetHeight}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowContainerCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.centerRowContainerCtrl.isHorizontalScrollShowing()}scrollHorizontally(e){const t=this.centerRowContainerCtrl.getViewportElement().scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowContainerCtrl.getViewportElement().scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e,t=null){const i=this.rowModel.getRowCount();let s=-1;for(let n=0;n<i;n++){const l=this.rowModel.getRow(n);if(typeof e=="function"){if(l&&e(l)){s=n;break}}else if(e===l||e===l.data){s=n;break}}s>=0&&this.ensureIndexVisible(s,t)}ensureIndexVisible(e,t){if(this.gridOptionsService.isDomLayout("print"))return;const i=this.paginationProxy.getRowCount();if(typeof e!="number"||e<0||e>=i){console.warn("AG Grid: Invalid row index for ensureIndexVisible: "+e);return}const n=this.gridOptionsService.get("pagination")&&!this.gridOptionsService.get("suppressPaginationPanel");this.getFrameworkOverrides().wrapIncoming(()=>{n||this.paginationProxy.goToPageWithIndex(e);const u=this.ctrlsService.getGridBodyCtrl().getStickyTopHeight(),g=this.paginationProxy.getRow(e);let C;do{const S=g.rowTop,A=g.rowHeight,D=this.paginationProxy.getPixelOffset(),M=g.rowTop-D,W=M+g.rowHeight,z=this.getVScrollPosition(),U=this.heightScaler.getDivStretchOffset(),X=z.top+U,q=z.bottom+U,_=q-X,J=this.heightScaler.getScrollPositionForPixel(M),se=this.heightScaler.getScrollPositionForPixel(W-_),$=Math.min((J+se)/2,M),Y=X+u>M,oe=q<W;let Oe=null;t==="top"?Oe=J:t==="bottom"?Oe=se:t==="middle"?Oe=$:Y?Oe=J-u:oe&&(Oe=se),Oe!==null&&(this.setVerticalScrollPosition(Oe),this.rowRenderer.redraw({afterScroll:!0})),C=S!==g.rowTop||A!==g.rowHeight}while(C);this.animationFrameService.flushAllFrames()})}ensureColumnVisible(e,t="auto"){const i=this.columnModel.getGridColumn(e);if(!i||i.isPinned()||!this.columnModel.isColumnDisplayed(i))return;const s=this.getPositionedHorizontalScroll(i,t);this.getFrameworkOverrides().wrapIncoming(()=>{s!==null&&this.centerRowContainerCtrl.setCenterViewportScrollLeft(s),this.centerRowContainerCtrl.onHorizontalViewportChanged(),this.animationFrameService.flushAllFrames()})}setScrollPosition(e,t){this.getFrameworkOverrides().wrapIncoming(()=>{this.centerRowContainerCtrl.setCenterViewportScrollLeft(t),this.setVerticalScrollPosition(e),this.rowRenderer.redraw({afterScroll:!0}),this.animationFrameService.flushAllFrames()})}getPositionedHorizontalScroll(e,t){const{columnBeforeStart:i,columnAfterEnd:s}=this.isColumnOutsideViewport(e),n=this.centerRowContainerCtrl.getCenterWidth()<e.getActualWidth(),l=this.centerRowContainerCtrl.getCenterWidth(),u=this.enableRtl;let g=(u?i:s)||n,C=u?s:i;t!=="auto"&&(g=t==="start",C=t==="end");const S=t==="middle";if(g||C||S){const{colLeft:A,colMiddle:D,colRight:M}=this.getColumnBounds(e);return S?D-l/2:g?u?M:A:u?A-l:M-l}return null}isColumnOutsideViewport(e){const{start:t,end:i}=this.getViewportBounds(),{colLeft:s,colRight:n}=this.getColumnBounds(e),l=this.enableRtl,u=l?t>n:i<n,g=l?i<s:t>s;return{columnBeforeStart:u,columnAfterEnd:g}}getColumnBounds(e){const t=this.enableRtl,i=this.columnModel.getBodyContainerWidth(),s=e.getActualWidth(),n=e.getLeft(),l=t?-1:1,u=t?i-n:n,g=u+s*l,C=u+s/2*l;return{colLeft:u,colMiddle:C,colRight:g}}getViewportBounds(){const e=this.centerRowContainerCtrl.getCenterWidth(),t=this.centerRowContainerCtrl.getCenterViewportScrollLeft(),i=t,s=e+t;return{start:i,end:s,width:e}}};E([N("ctrlsService")],Ks.prototype,"ctrlsService",2);E([N("animationFrameService")],Ks.prototype,"animationFrameService",2);E([N("paginationProxy")],Ks.prototype,"paginationProxy",2);E([N("rowModel")],Ks.prototype,"rowModel",2);E([N("rowContainerHeightService")],Ks.prototype,"heightScaler",2);E([N("rowRenderer")],Ks.prototype,"rowRenderer",2);E([N("columnModel")],Ks.prototype,"columnModel",2);E([Ce],Ks.prototype,"postConstruct",1);var Lg="ag-force-vertical-scroll",Yy="ag-selectable",Xy="ag-column-moving",Pi=class extends ge{constructor(){super(...arguments),this.stickyTopHeight=0}getScrollFeature(){return this.bodyScrollFeature}getBodyViewportElement(){return this.eBodyViewport}setComp(e,t,i,s,n,l){this.comp=e,this.eGridBody=t,this.eBodyViewport=i,this.eTop=s,this.eBottom=n,this.eStickyTop=l,this.setCellTextSelection(this.gridOptionsService.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",u=>this.setCellTextSelection(u.currentValue)),this.createManagedBean(new xl(this.comp)),this.bodyScrollFeature=this.createManagedBean(new Ks(this.eBodyViewport)),this.addRowDragListener(),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([s,i,n,l]),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.filterManager.setupAdvancedFilterHeaderComp(s),this.ctrlsService.registerGridBodyCtrl(this)}getComp(){return this.comp}addEventListeners(){this.addManagedListener(this.eventService,L.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eventService,L.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.addManagedListener(this.eventService,L.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,L.EVENT_HEADER_HEIGHT_CHANGED,this.onHeaderHeightChanged.bind(this))}addFocusListeners(e){e.forEach(t=>{this.addManagedListener(t,"focusin",i=>{const{target:s}=i,n=Do(s,"ag-root",t);t.classList.toggle("ag-has-focus",!n)}),this.addManagedListener(t,"focusout",i=>{const{target:s,relatedTarget:n}=i,l=t.contains(n),u=Do(n,"ag-root",t);Do(s,"ag-root",t)||(!l||u)&&t.classList.remove("ag-has-focus")})})}setColumnMovingCss(e){this.comp.setColumnMovingCss(Xy,e)}setCellTextSelection(e=!1){this.comp.setCellSelectableCss(Yy,e)}onScrollVisibilityChanged(){const e=this.scrollVisibleService.isVerticalScrollShowing();this.setVerticalScrollPaddingVisible(e),this.setStickyTopWidth(e);const t=e&&this.gridOptionsService.getScrollbarWidth()||0,i=Sh()?16:0,s=`calc(100% + ${t+i}px)`;this.animationFrameService.requestAnimationFrame(()=>this.comp.setBodyViewportWidth(s))}onGridColumnsChanged(){const e=this.columnModel.getAllGridColumns();this.comp.setColumnCount(e.length)}disableBrowserDragging(){this.addManagedListener(this.eGridBody,"dragstart",e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1})}addStopEditingWhenGridLosesFocus(){if(!this.gridOptionsService.get("stopEditingWhenCellsLoseFocus"))return;const e=i=>{const s=i.relatedTarget;if(Ba(s)===null){this.rowRenderer.stopEditing();return}let n=t.some(l=>l.contains(s))&&this.mouseEventService.isElementInThisGrid(s);if(!n){const l=this.popupService;n=l.getActivePopups().some(u=>u.contains(s))||l.isElementWithinCustomPopup(s)}n||this.rowRenderer.stopEditing()},t=[this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop];t.forEach(i=>this.addManagedListener(i,"focusout",e))}updateRowCount(){const e=this.headerNavigationService.getHeaderRowCount()+this.filterManager.getHeaderRowCount(),t=this.rowModel.isLastRowIndexKnown()?this.rowModel.getRowCount():-1,i=t===-1?-1:e+t;this.comp.setRowCount(i)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){const t=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(t)}isVerticalScrollShowing(){const e=this.gridOptionsService.get("alwaysShowVerticalScroll"),t=e?Lg:null,i=this.gridOptionsService.isDomLayout("normal");return this.comp.setAlwaysVerticalScrollClass(t,e),e||i&&Tp(this.eBodyViewport)}setupRowAnimationCssClass(){const e=()=>{const t=this.gridOptionsService.isAnimateRows()&&!this.rowContainerHeightService.isStretching(),i=t?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(i,t)};e(),this.addManagedListener(this.eventService,L.EVENT_HEIGHT_SCALE_CHANGED,e),this.addManagedPropertyListener("animateRows",e)}getGridBodyElement(){return this.eGridBody}addBodyViewportListener(){const e=this.onBodyViewportContextMenu.bind(this);this.addManagedListener(this.eBodyViewport,"contextmenu",e),this.mockContextMenuForIPad(e),this.addManagedListener(this.eBodyViewport,"wheel",this.onBodyViewportWheel.bind(this)),this.addManagedListener(this.eStickyTop,"wheel",this.onStickyTopWheel.bind(this)),this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){const e=this.eBodyViewport.querySelector(".ag-full-width-container"),t=this.eBodyViewport.querySelector(".ag-center-cols-viewport");e&&t&&this.addManagedListener(e,"wheel",i=>this.onFullWidthContainerWheel(i,t))}onFullWidthContainerWheel(e,t){!e.deltaX||Math.abs(e.deltaY)>Math.abs(e.deltaX)||!this.mouseEventService.isEventFromThisGrid(e)||(e.preventDefault(),t.scrollBy({left:e.deltaX}))}onBodyViewportContextMenu(e,t,i){if(!e&&!i)return;this.gridOptionsService.get("preventDefaultOnContextMenu")&&(e||i).preventDefault();const{target:s}=e||t;(s===this.eBodyViewport||s===this.ctrlsService.getCenterRowContainerCtrl().getViewportElement())&&this.menuService.showContextMenu({mouseEvent:e,touchEvent:i,value:null,anchorToElement:this.eGridBody})}mockContextMenuForIPad(e){if(!Xs())return;const t=new pi(this.eBodyViewport),i=s=>{e(void 0,s.touchStart,s.touchEvent)};this.addManagedListener(t,pi.EVENT_LONG_TAP,i),this.addDestroyFunc(()=>t.destroy())}onBodyViewportWheel(e){!this.gridOptionsService.get("suppressScrollWhenPopupsAreOpen")||this.popupService.hasAnchoredPopup()&&e.preventDefault()}onStickyTopWheel(e){e.preventDefault(),e.offsetY&&this.scrollVertically(e.deltaY)}getGui(){return this.eGridBody}scrollVertically(e){const t=this.eBodyViewport.scrollTop;return this.bodyScrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t}addRowDragListener(){this.rowDragFeature=this.createManagedBean(new Xi(this.eBodyViewport)),this.dragAndDropService.addDropTarget(this.rowDragFeature)}getRowDragFeature(){return this.rowDragFeature}onPinnedRowDataChanged(){this.setFloatingHeights()}setFloatingHeights(){const{pinnedRowModel:e}=this;let t=e.getPinnedTopTotalHeight(),i=e.getPinnedBottomTotalHeight();this.comp.setTopHeight(t),this.comp.setBottomHeight(i),this.comp.setTopDisplay(t?"inherit":"none"),this.comp.setBottomDisplay(i?"inherit":"none"),this.setStickyTopOffsetTop()}setStickyTopHeight(e=0){this.comp.setStickyTopHeight(`${e}px`),this.stickyTopHeight=e}getStickyTopHeight(){return this.stickyTopHeight}setStickyTopWidth(e){if(!e)this.comp.setStickyTopWidth("100%");else{const t=this.gridOptionsService.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${t}px)`)}}onHeaderHeightChanged(){this.setStickyTopOffsetTop()}setStickyTopOffsetTop(){const t=this.ctrlsService.getGridHeaderCtrl().getHeaderHeight()+this.filterManager.getHeaderHeight(),i=this.pinnedRowModel.getPinnedTopTotalHeight();let s=0;t>0&&(s+=t+1),i>0&&(s+=i+1),this.comp.setStickyTopTop(`${s}px`)}sizeColumnsToFit(e,t){const s=this.isVerticalScrollShowing()?this.gridOptionsService.getScrollbarWidth():0,l=zo(this.eGridBody)-s;if(l>0){this.columnModel.sizeColumnsToFit(l,"sizeColumnsToFit",!1,e);return}t===void 0?window.setTimeout(()=>{this.sizeColumnsToFit(e,100)},0):t===100?window.setTimeout(()=>{this.sizeColumnsToFit(e,500)},100):t===500?window.setTimeout(()=>{this.sizeColumnsToFit(e,-1)},500):console.warn("AG Grid: tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")}addScrollEventListener(e){this.eBodyViewport.addEventListener("scroll",e,{passive:!0})}removeScrollEventListener(e){this.eBodyViewport.removeEventListener("scroll",e)}};E([N("animationFrameService")],Pi.prototype,"animationFrameService",2);E([N("rowContainerHeightService")],Pi.prototype,"rowContainerHeightService",2);E([N("ctrlsService")],Pi.prototype,"ctrlsService",2);E([N("columnModel")],Pi.prototype,"columnModel",2);E([N("scrollVisibleService")],Pi.prototype,"scrollVisibleService",2);E([N("menuService")],Pi.prototype,"menuService",2);E([N("headerNavigationService")],Pi.prototype,"headerNavigationService",2);E([N("dragAndDropService")],Pi.prototype,"dragAndDropService",2);E([N("pinnedRowModel")],Pi.prototype,"pinnedRowModel",2);E([N("rowRenderer")],Pi.prototype,"rowRenderer",2);E([N("popupService")],Pi.prototype,"popupService",2);E([N("mouseEventService")],Pi.prototype,"mouseEventService",2);E([N("rowModel")],Pi.prototype,"rowModel",2);E([N("filterManager")],Pi.prototype,"filterManager",2);var rn="ag-cell-range-selected",$y="ag-cell-range-chart",jy="ag-cell-range-single-cell",Ky="ag-cell-range-chart-category",qy="ag-cell-range-handle",Qy="ag-cell-range-top",Zy="ag-cell-range-right",Jy="ag-cell-range-bottom",eb="ag-cell-range-left",tb=class{constructor(e,t){this.beans=e,this.cellCtrl=t}setComp(e,t){this.cellComp=e,this.eGui=t,this.onRangeSelectionChanged()}onRangeSelectionChanged(){!this.cellComp||(this.rangeCount=this.beans.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()),this.hasChartRange=this.getHasChartRange(),this.cellComp.addOrRemoveCssClass(rn,this.rangeCount!==0),this.cellComp.addOrRemoveCssClass(`${rn}-1`,this.rangeCount===1),this.cellComp.addOrRemoveCssClass(`${rn}-2`,this.rangeCount===2),this.cellComp.addOrRemoveCssClass(`${rn}-3`,this.rangeCount===3),this.cellComp.addOrRemoveCssClass(`${rn}-4`,this.rangeCount>=4),this.cellComp.addOrRemoveCssClass($y,this.hasChartRange),xr(this.eGui,this.rangeCount>0?!0:void 0),this.cellComp.addOrRemoveCssClass(jy,this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle())}updateRangeBorders(){const e=this.getRangeBorders(),t=this.isSingleCell(),i=!t&&e.top,s=!t&&e.right,n=!t&&e.bottom,l=!t&&e.left;this.cellComp.addOrRemoveCssClass(Qy,i),this.cellComp.addOrRemoveCssClass(Zy,s),this.cellComp.addOrRemoveCssClass(Jy,n),this.cellComp.addOrRemoveCssClass(eb,l)}isSingleCell(){const{rangeService:e}=this.beans;return this.rangeCount===1&&e&&!e.isMoreThanOneCell()}getHasChartRange(){const{rangeService:e}=this.beans;if(!this.rangeCount||!e)return!1;const t=e.getCellRanges();return t.length>0&&t.every(i=>zi([1,0],i.type))}updateRangeBordersIfRangeCount(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())}getRangeBorders(){const e=this.beans.gridOptionsService.get("enableRtl");let t=!1,i=!1,s=!1,n=!1;const l=this.cellCtrl.getCellPosition().column,{rangeService:u,columnModel:g}=this.beans;let C,S;e?(C=g.getDisplayedColAfter(l),S=g.getDisplayedColBefore(l)):(C=g.getDisplayedColBefore(l),S=g.getDisplayedColAfter(l));const A=u.getCellRanges().filter(D=>u.isCellInSpecificRange(this.cellCtrl.getCellPosition(),D));C||(n=!0),S||(i=!0);for(let D=0;D<A.length&&!(t&&i&&s&&n);D++){const M=A[D],W=u.getRangeStartRow(M),z=u.getRangeEndRow(M);!t&&this.beans.rowPositionUtils.sameRow(W,this.cellCtrl.getCellPosition())&&(t=!0),!s&&this.beans.rowPositionUtils.sameRow(z,this.cellCtrl.getCellPosition())&&(s=!0),!n&&C&&M.columns.indexOf(C)<0&&(n=!0),!i&&S&&M.columns.indexOf(S)<0&&(i=!0)}return{top:t,right:i,bottom:s,left:n}}refreshHandle(){if(!this.beans.rangeService||this.beans.context.isDestroyed())return;const e=this.shouldHaveSelectionHandle();this.selectionHandle&&!e&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),e&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass(qy,!!this.selectionHandle)}shouldHaveSelectionHandle(){const{gridOptionsService:e,rangeService:t}=this.beans,i=t.getCellRanges(),s=i.length;if(this.rangeCount<1||s<1)return!1;const n=yt(i),l=this.cellCtrl.getCellPosition(),u=e.get("enableFillHandle")&&!this.cellCtrl.isSuppressFillHandle(),g=e.get("enableRangeHandle");let C=s===1&&!this.cellCtrl.isEditing()&&(u||g);if(this.hasChartRange){const A=i[0].type===1&&t.isCellInSpecificRange(l,i[0]);this.cellComp.addOrRemoveCssClass(Ky,A),C=n.type===0}return C&&n.endRow!=null&&t.isContiguousRange(n)&&t.isBottomRightCell(n,l)}addSelectionHandle(){const{gridOptionsService:e,rangeService:t}=this.beans,i=yt(t.getCellRanges()).type,n=e.get("enableFillHandle")&&Xe(i)?0:1;this.selectionHandle&&this.selectionHandle.getType()!==n&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),this.selectionHandle||(this.selectionHandle=this.beans.selectionHandleFactory.createSelectionHandle(n)),this.selectionHandle.refresh(this.cellCtrl)}destroy(){this.beans.context.destroyBean(this.selectionHandle)}},ib=class extends ge{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListener(this.beans.eventService,L.EVENT_NEW_COLUMNS_LOADED,()=>this.onNewColumnsLoaded())}setComp(e){this.eGui=e,this.setupColSpan(),this.setupRowSpan(),this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()}onNewColumnsLoaded(){const e=this.column.getRowSpan(this.rowNode);this.rowSpan!==e&&(this.rowSpan=e,this.applyRowSpan(!0))}onDisplayColumnsChanged(){const e=this.getColSpanningList();bs(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListener(this.beans.eventService,L.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayColumnsChanged.bind(this)),this.addManagedListener(this.beans.eventService,L.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onWidthChanged.bind(this)))}onWidthChanged(){if(!this.eGui)return;const e=this.getCellWidth();this.eGui.style.width=`${e}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((e,t)=>e+t.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){const e=this.column.getColSpan(this.rowNode),t=[];if(e===1)t.push(this.column);else{let i=this.column;const s=this.column.getPinned();for(let n=0;i&&n<e&&(t.push(i),i=this.beans.columnModel.getDisplayedColAfter(i),!(!i||Xe(i)||s!==i.getPinned()));n++);}return t}onLeftChanged(){if(!this.eGui)return;const e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eGui.style.left=e+"px"}getCellLeft(){let e;return this.beans.gridOptionsService.get("enableRtl")&&this.colsSpanning?e=yt(this.colsSpanning):e=this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.isPrintLayout()||this.column.getPinned()==="left")return e;const t=this.beans.columnModel.getDisplayedColumnsLeftWidth();if(this.column.getPinned()==="right"){const i=this.beans.columnModel.getBodyContainerWidth();return t+i+(e||0)}return t+(e||0)}applyRowSpan(e){if(this.rowSpan===1&&!e)return;const i=this.beans.gridOptionsService.getRowHeightAsNumber()*this.rowSpan;this.eGui.style.height=`${i}px`,this.eGui.style.zIndex="1"}destroy(){super.destroy()}},sb=class extends ge{constructor(e,t){super(),this.staticClasses=[],this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setComp(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){const e=this.column.getColDef(),{cellClassRules:t}=e,i=this.beans.gridOptionsService.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef:e,column:this.column,rowIndex:this.rowNode.rowIndex});this.beans.stylingService.processClassRules(t===this.cellClassRules?void 0:this.cellClassRules,t,i,s=>this.cellComp.addOrRemoveCssClass(s,!0),s=>this.cellComp.addOrRemoveCssClass(s,!1)),this.cellClassRules=t}applyUserStyles(){const e=this.column.getColDef();if(!e.cellStyle)return;let t;if(typeof e.cellStyle=="function"){const i=this.beans.gridOptionsService.addGridCommonParams({column:this.column,value:this.cellCtrl.getValue(),colDef:e,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex}),s=e.cellStyle;t=s(i)}else t=e.cellStyle;t&&this.cellComp.setUserStyles(t)}applyClassesFromColDef(){const e=this.column.getColDef(),t=this.beans.gridOptionsService.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,column:this.column,colDef:e,rowIndex:this.rowNode.rowIndex});this.staticClasses.length&&this.staticClasses.forEach(i=>this.cellComp.addOrRemoveCssClass(i,!1)),this.staticClasses=this.beans.stylingService.getStaticCellClasses(e,t),this.staticClasses.length&&this.staticClasses.forEach(i=>this.cellComp.addOrRemoveCssClass(i,!0))}destroy(){super.destroy()}},Qe=class{postConstruct(){this.gridOptionsService.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel),this.gridOptionsService.isRowModelType("serverSide")&&(this.serverSideRowModel=this.rowModel)}};E([N("resizeObserverService")],Qe.prototype,"resizeObserverService",2);E([N("paginationProxy")],Qe.prototype,"paginationProxy",2);E([N("context")],Qe.prototype,"context",2);E([N("columnApi")],Qe.prototype,"columnApi",2);E([N("gridApi")],Qe.prototype,"gridApi",2);E([N("gridOptionsService")],Qe.prototype,"gridOptionsService",2);E([N("expressionService")],Qe.prototype,"expressionService",2);E([N("environment")],Qe.prototype,"environment",2);E([N("rowRenderer")],Qe.prototype,"rowRenderer",2);E([N("templateService")],Qe.prototype,"templateService",2);E([N("valueService")],Qe.prototype,"valueService",2);E([N("eventService")],Qe.prototype,"eventService",2);E([N("columnModel")],Qe.prototype,"columnModel",2);E([N("headerNavigationService")],Qe.prototype,"headerNavigationService",2);E([N("navigationService")],Qe.prototype,"navigationService",2);E([N("columnAnimationService")],Qe.prototype,"columnAnimationService",2);E([mt("rangeService")],Qe.prototype,"rangeService",2);E([N("focusService")],Qe.prototype,"focusService",2);E([N("popupService")],Qe.prototype,"popupService",2);E([N("valueFormatterService")],Qe.prototype,"valueFormatterService",2);E([N("stylingService")],Qe.prototype,"stylingService",2);E([N("columnHoverService")],Qe.prototype,"columnHoverService",2);E([N("userComponentFactory")],Qe.prototype,"userComponentFactory",2);E([N("userComponentRegistry")],Qe.prototype,"userComponentRegistry",2);E([N("animationFrameService")],Qe.prototype,"animationFrameService",2);E([N("dragService")],Qe.prototype,"dragService",2);E([N("dragAndDropService")],Qe.prototype,"dragAndDropService",2);E([N("sortController")],Qe.prototype,"sortController",2);E([N("filterManager")],Qe.prototype,"filterManager",2);E([N("rowContainerHeightService")],Qe.prototype,"rowContainerHeightService",2);E([N("frameworkOverrides")],Qe.prototype,"frameworkOverrides",2);E([N("cellPositionUtils")],Qe.prototype,"cellPositionUtils",2);E([N("rowPositionUtils")],Qe.prototype,"rowPositionUtils",2);E([N("selectionService")],Qe.prototype,"selectionService",2);E([mt("selectionHandleFactory")],Qe.prototype,"selectionHandleFactory",2);E([N("rowCssClassCalculator")],Qe.prototype,"rowCssClassCalculator",2);E([N("rowModel")],Qe.prototype,"rowModel",2);E([N("ctrlsService")],Qe.prototype,"ctrlsService",2);E([N("ctrlsFactory")],Qe.prototype,"ctrlsFactory",2);E([N("agStackComponentsRegistry")],Qe.prototype,"agStackComponentsRegistry",2);E([N("valueCache")],Qe.prototype,"valueCache",2);E([N("rowNodeEventThrottle")],Qe.prototype,"rowNodeEventThrottle",2);E([N("localeService")],Qe.prototype,"localeService",2);E([N("valueParserService")],Qe.prototype,"valueParserService",2);E([N("syncService")],Qe.prototype,"syncService",2);E([N("ariaAnnouncementService")],Qe.prototype,"ariaAnnouncementService",2);E([Ce],Qe.prototype,"postConstruct",1);Qe=E([Fe("beans")],Qe);var ob=class extends Qe{constructor(e,t,i){super(),this.cellCtrl=e,this.beans=t,this.column=i}onMouseEvent(e,t){if(!us(t))switch(e){case"click":this.onCellClicked(t);break;case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t);break}}onCellClicked(e){if(this.isDoubleClickOnIPad()){this.onCellDoubleClicked(e),e.preventDefault();return}const{eventService:t,rangeService:i,gridOptionsService:s}=this.beans,n=e.ctrlKey||e.metaKey;i&&n&&i.getCellRangeCount(this.cellCtrl.getCellPosition())>1&&i.intersectLastRange(!0);const l=this.cellCtrl.createEvent(e,L.EVENT_CELL_CLICKED);t.dispatchEvent(l);const u=this.column.getColDef();u.onCellClicked&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{u.onCellClicked(l)})},0),(s.get("singleClickEdit")||u.singleClickEdit)&&!s.get("suppressClickEdit")&&!(e.shiftKey&&i?.getCellRanges().length!=0)&&this.cellCtrl.startRowOrCellEdit()}isDoubleClickOnIPad(){if(!Xs()||ch("dblclick"))return!1;const e=new Date().getTime(),t=e-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=e,t}onCellDoubleClicked(e){const t=this.column.getColDef(),i=this.cellCtrl.createEvent(e,L.EVENT_CELL_DOUBLE_CLICKED);this.beans.eventService.dispatchEvent(i),typeof t.onCellDoubleClicked=="function"&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{t.onCellDoubleClicked(i)})},0),!this.beans.gridOptionsService.get("singleClickEdit")&&!this.beans.gridOptionsService.get("suppressClickEdit")&&this.cellCtrl.startRowOrCellEdit(null,e)}onMouseDown(e){const{ctrlKey:t,metaKey:i,shiftKey:s}=e,n=e.target,{cellCtrl:l,beans:u}=this,{eventService:g,rangeService:C,focusService:S}=u;if(this.isRightClickInExistingRange(e))return;const A=C&&C.getCellRanges().length!=0;if(!s||!A){const D=Ts()&&!l.isEditing()&&!Rh(n);l.focusCell(D)}if(s&&A&&!S.isCellFocused(l.getCellPosition())){e.preventDefault();const D=S.getFocusedCell();if(D){const{column:M,rowIndex:W,rowPinned:z}=D,U=u.rowRenderer.getRowByPosition({rowIndex:W,rowPinned:z}),X=U?.getCellCtrl(M);X?.isEditing()&&X.stopEditing(),S.setFocusedCell({column:M,rowIndex:W,rowPinned:z,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}}if(!this.containsWidget(n)){if(C){const D=this.cellCtrl.getCellPosition();if(s)C.extendLatestRangeToCell(D);else{const M=t||i;C.setRangeToCell(D,M)}}g.dispatchEvent(this.cellCtrl.createEvent(e,L.EVENT_CELL_MOUSE_DOWN))}}isRightClickInExistingRange(e){const{rangeService:t}=this.beans;if(t){const i=t.isCellInAnyRange(this.cellCtrl.getCellPosition()),s=e.button===2||e.ctrlKey&&this.beans.gridOptionsService.get("allowContextMenuWithControlKey");if(i&&s)return!0}return!1}containsWidget(e){return Do(e,"ag-selection-checkbox",3)}onMouseOut(e){if(this.mouseStayingInsideCell(e))return;const t=this.cellCtrl.createEvent(e,L.EVENT_CELL_MOUSE_OUT);this.beans.eventService.dispatchEvent(t),this.beans.columnHoverService.clearMouseOver()}onMouseOver(e){if(this.mouseStayingInsideCell(e))return;const t=this.cellCtrl.createEvent(e,L.EVENT_CELL_MOUSE_OVER);this.beans.eventService.dispatchEvent(t),this.beans.columnHoverService.setMouseOver([this.column])}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;const t=this.cellCtrl.getGui(),i=t.contains(e.target),s=t.contains(e.relatedTarget);return i&&s}destroy(){}},rb=class extends ge{constructor(e,t,i,s,n){super(),this.cellCtrl=e,this.beans=t,this.rowNode=s,this.rowCtrl=n}setComp(e){this.eGui=e}onKeyDown(e){const t=e.key;switch(t){case Q.ENTER:this.onEnterKeyDown(e);break;case Q.F2:this.onF2KeyDown(e);break;case Q.ESCAPE:this.onEscapeKeyDown(e);break;case Q.TAB:this.onTabKeyDown(e);break;case Q.BACKSPACE:case Q.DELETE:this.onBackspaceOrDeleteKeyDown(t,e);break;case Q.DOWN:case Q.UP:case Q.RIGHT:case Q.LEFT:this.onNavigationKeyDown(e,t);break}}onNavigationKeyDown(e,t){this.cellCtrl.isEditing()||(e.shiftKey&&this.cellCtrl.isRangeSelectionEnabled()?this.onShiftRangeSelect(e):this.beans.navigationService.navigateToNextCell(e,t,this.cellCtrl.getCellPosition(),!0),e.preventDefault())}onShiftRangeSelect(e){if(!this.beans.rangeService)return;const t=this.beans.rangeService.extendLatestRangeInDirection(e);t&&this.beans.navigationService.ensureCellVisible(t)}onTabKeyDown(e){this.beans.navigationService.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,t){const{cellCtrl:i,beans:s,rowNode:n}=this,{gridOptionsService:l,rangeService:u,eventService:g}=s;i.isEditing()||(g.dispatchEvent({type:L.EVENT_KEY_SHORTCUT_CHANGED_CELL_START}),_p(e,l.get("enableCellEditingOnBackspace"))?u&&l.get("enableRangeSelection")?u.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"}):i.isCellEditable()&&n.setDataValue(i.getColumn(),null,"cellClear"):i.startRowOrCellEdit(e,t),g.dispatchEvent({type:L.EVENT_KEY_SHORTCUT_CHANGED_CELL_END}))}onEnterKeyDown(e){if(this.cellCtrl.isEditing()||this.rowCtrl.isEditing())this.cellCtrl.stopEditingAndFocus(!1,e.shiftKey);else if(this.beans.gridOptionsService.get("enterNavigatesVertically")){const t=e.shiftKey?Q.UP:Q.DOWN;this.beans.navigationService.navigateToNextCell(null,t,this.cellCtrl.getCellPosition(),!1)}else this.cellCtrl.startRowOrCellEdit(Q.ENTER,e),this.cellCtrl.isEditing()&&e.preventDefault()}onF2KeyDown(e){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(Q.F2,e)}onEscapeKeyDown(e){this.cellCtrl.isEditing()&&(this.cellCtrl.stopRowOrCellEdit(!0),this.cellCtrl.focusCell(!0))}processCharacter(e){if(e.target!==this.eGui||this.cellCtrl.isEditing())return;const s=e.key;s===" "?this.onSpaceKeyDown(e):(this.cellCtrl.startRowOrCellEdit(s,e),e.preventDefault())}onSpaceKeyDown(e){const{gridOptionsService:t}=this.beans;if(!this.cellCtrl.isEditing()&&t.isRowSelection()){const i=this.rowNode.isSelected(),s=!i;if(s||!t.get("suppressRowDeselection")){const n=this.beans.gridOptionsService.get("groupSelectsFiltered"),l=this.rowNode.setSelectedParams({newValue:s,rangeSelect:e.shiftKey,groupSelectsFiltered:n,event:e,source:"spaceKey"});i===void 0&&l===0&&this.rowNode.setSelectedParams({newValue:!1,rangeSelect:e.shiftKey,groupSelectsFiltered:n,event:e,source:"spaceKey"})}}e.preventDefault()}destroy(){super.destroy()}},Mg=class extends Ze{constructor(e,t,i){super('<div class="ag-drag-handle ag-row-drag" draggable="true"></div>'),this.rowNode=e,this.column=t,this.eCell=i}postConstruct(){this.getGui().appendChild(Wt("rowDrag",this.gridOptionsService,null)),this.addGuiEventListener("mousedown",t=>{t.stopPropagation()}),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(e){const t=this.column.getColDef().dndSourceOnRowDrag;e.dataTransfer.setDragImage(this.eCell,0,0);const i=()=>{try{const s=JSON.stringify(this.rowNode.data);e.dataTransfer.setData("application/json",s),e.dataTransfer.setData("text/plain",s)}catch{}};if(t){const s=this.gridOptionsService.addGridCommonParams({rowNode:this.rowNode,dragEvent:e});t(s)}else i()}checkVisibility(){const e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)}};E([Ce],Mg.prototype,"postConstruct",1);var nb="ag-column-first",ab="ag-column-last",Sl=class{static getHeaderClassesFromColDef(e,t,i,s){return Xe(e)?[]:this.getColumnClassesFromCollDef(e.headerClass,e,t,i,s)}static getToolPanelClassesFromColDef(e,t,i,s){return Xe(e)?[]:this.getColumnClassesFromCollDef(e.toolPanelClass,e,t,i,s)}static refreshFirstAndLastStyles(e,t,i){e.addOrRemoveCssClass(nb,i.isColumnAtEdge(t,"first")),e.addOrRemoveCssClass(ab,i.isColumnAtEdge(t,"last"))}static getClassParams(e,t,i,s){return t.addGridCommonParams({colDef:e,column:i,columnGroup:s})}static getColumnClassesFromCollDef(e,t,i,s,n){if(Xe(e))return[];let l;if(typeof e=="function"){const u=this.getClassParams(t,i,s,n);l=e(u)}else l=e;return typeof l=="string"?[l]:Array.isArray(l)?[...l]:[]}},lb="ag-cell",db="ag-cell-auto-height",hb="ag-cell-normal-height",cb="ag-cell-focus",ub="ag-cell-first-right-pinned",pb="ag-cell-last-left-pinned",gb="ag-cell-not-inline-editing",fb="ag-column-hover",mb="ag-cell-wrap-text",vb=0,Ig=class Nd extends ge{constructor(t,i,s,n){super(),this.cellRangeFeature=null,this.cellPositionFeature=null,this.cellCustomStyleFeature=null,this.tooltipFeature=null,this.cellMouseListenerFeature=null,this.cellKeyboardListenerFeature=null,this.suppressRefreshCell=!1,this.onCellCompAttachedFuncs=[],this.column=t,this.rowNode=i,this.beans=s,this.rowCtrl=n,this.instanceId=t.getId()+"-"+vb++,this.colIdSanitised=ai(this.column.getId()),s.gridOptionsService.get("suppressCellFocus")||(this.tabIndex=-1),this.createCellPosition(),this.addFeatures(),this.updateAndFormatValue(!1)}shouldRestoreFocus(){return this.beans.focusService.shouldRestoreFocus(this.cellPosition)}addFeatures(){this.cellPositionFeature=new ib(this,this.beans),this.addDestroyFunc(()=>{var i;(i=this.cellPositionFeature)==null||i.destroy(),this.cellPositionFeature=null}),this.cellCustomStyleFeature=new sb(this,this.beans),this.addDestroyFunc(()=>{var i;(i=this.cellCustomStyleFeature)==null||i.destroy(),this.cellCustomStyleFeature=null}),this.cellMouseListenerFeature=new ob(this,this.beans,this.column),this.addDestroyFunc(()=>{var i;(i=this.cellMouseListenerFeature)==null||i.destroy(),this.cellMouseListenerFeature=null}),this.cellKeyboardListenerFeature=new rb(this,this.beans,this.column,this.rowNode,this.rowCtrl),this.addDestroyFunc(()=>{var i;(i=this.cellKeyboardListenerFeature)==null||i.destroy(),this.cellKeyboardListenerFeature=null}),this.column.isTooltipEnabled()&&(this.enableTooltipFeature(),this.addDestroyFunc(()=>{this.disableTooltipFeature()})),this.beans.rangeService&&this.beans.gridOptionsService.get("enableRangeSelection")&&(this.cellRangeFeature=new tb(this.beans,this),this.addDestroyFunc(()=>{var i;(i=this.cellRangeFeature)==null||i.destroy(),this.cellRangeFeature=null}))}enableTooltipFeature(t,i){const s=()=>{const u=this.column.getColDef(),g=this.rowNode.data;if(u.tooltipField&&ce(g))return mr(g,u.tooltipField,this.column.isTooltipFieldContainsDots());const C=u.tooltipValueGetter;return C?C(this.beans.gridOptionsService.addGridCommonParams({location:"cell",colDef:this.column.getColDef(),column:this.column,rowIndex:this.cellPosition.rowIndex,node:this.rowNode,data:this.rowNode.data,value:this.value,valueFormatted:this.valueFormatted})):null},n=this.beans.gridOptionsService.get("tooltipShowMode")==="whenTruncated";!i&&n&&!this.isCellRenderer()&&(i=()=>{const u=this.getGui(),g=u.children.length===0?u:u.querySelector(".ag-cell-value");return g?g.scrollWidth>g.clientWidth:!0});const l={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getRowIndex:()=>this.cellPosition.rowIndex,getRowNode:()=>this.rowNode,getGui:()=>this.getGui(),getLocation:()=>"cell",getTooltipValue:t!=null?()=>t:s,getValueFormatted:()=>this.valueFormatted,shouldDisplayTooltip:i};this.tooltipFeature=new $s(l,this.beans)}disableTooltipFeature(){!this.tooltipFeature||(this.tooltipFeature.destroy(),this.tooltipFeature=null)}setComp(t,i,s,n,l){var u,g,C,S;this.cellComp=t,this.eGui=i,this.printLayout=n,this.addDomData(),this.onCellFocused(this.focusEventToRestore),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(s),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),(u=this.cellPositionFeature)==null||u.setComp(i),(g=this.cellCustomStyleFeature)==null||g.setComp(t),(C=this.tooltipFeature)==null||C.refreshToolTip(),(S=this.cellKeyboardListenerFeature)==null||S.setComp(this.eGui),this.cellRangeFeature&&this.cellRangeFeature.setComp(t,i),l&&this.isCellEditable()?this.startEditing():this.showValue(),this.onCellCompAttachedFuncs.length&&(this.onCellCompAttachedFuncs.forEach(A=>A()),this.onCellCompAttachedFuncs=[])}setupAutoHeight(t){if(this.isAutoHeight=this.column.isAutoHeight(),!this.isAutoHeight||!t)return;const i=t.parentElement,s=this.beans.gridOptionsService.getRowHeightForNode(this.rowNode).height,n=g=>{if(this.editing||!this.isAlive())return;const{paddingTop:C,paddingBottom:S,borderBottomWidth:A,borderTopWidth:D}=po(i),M=C+S+A+D,z=t.offsetHeight+M;if(g<5){const X=this.beans.gridOptionsService.getDocument(),q=!X||!X.contains(t),_=z==0;if(q||_){window.setTimeout(()=>n(g+1),0);return}}const U=Math.max(z,s);this.rowNode.setRowAutoHeight(U,this.column)},l=()=>n(0);l();const u=this.beans.resizeObserverService.observeResize(t,l);this.addDestroyFunc(()=>{u(),this.rowNode.setRowAutoHeight(void 0,this.column)})}getCellAriaRole(){var t;return(t=this.column.getColDef().cellAriaRole)!=null?t:"gridcell"}getInstanceId(){return this.instanceId}getIncludeSelection(){return this.includeSelection}getIncludeRowDrag(){return this.includeRowDrag}getIncludeDndSource(){return this.includeDndSource}getColumnIdSanitised(){return this.colIdSanitised}getTabIndex(){return this.tabIndex}isCellRenderer(){const t=this.column.getColDef();return t.cellRenderer!=null||t.cellRendererSelector!=null}getValueToDisplay(){return this.valueFormatted!=null?this.valueFormatted:this.value}showValue(t=!1){const i=this.getValueToDisplay();let s;if(this.isCellRenderer()){const n=this.createCellRendererParams();s=this.beans.userComponentFactory.getCellRendererDetails(this.column.getColDef(),n)}this.cellComp.setRenderDetails(s,i,t),this.refreshHandle()}setupControlComps(){const t=this.column.getColDef();this.includeSelection=this.isIncludeControl(t.checkboxSelection),this.includeRowDrag=this.isIncludeControl(t.rowDrag),this.includeDndSource=this.isIncludeControl(t.dndSource),this.cellComp.setIncludeSelection(this.includeSelection),this.cellComp.setIncludeDndSource(this.includeDndSource),this.cellComp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gridOptionsService.get("enableCellTextSelection")||this.column.isAutoHeight()}isIncludeControl(t){return this.rowNode.rowPinned!=null?!1:typeof t=="function"||t===!0}refreshShouldDestroy(){const t=this.column.getColDef(),i=this.includeSelection!=this.isIncludeControl(t.checkboxSelection),s=this.includeRowDrag!=this.isIncludeControl(t.rowDrag),n=this.includeDndSource!=this.isIncludeControl(t.dndSource);return i||s||n}startEditing(t=null,i=!1,s=null){if(!this.isCellEditable()||this.editing)return;if(!this.cellComp){this.onCellCompAttachedFuncs.push(()=>{this.startEditing(t,i,s)});return}const n=this.createCellEditorParams(t,i),l=this.column.getColDef(),u=this.beans.userComponentFactory.getCellEditorDetails(l,n);this.editCompDetails=u;const g=u?.popupFromSelector!=null?u.popupFromSelector:!!l.cellEditorPopup,C=u?.popupPositionFromSelector!=null?u.popupPositionFromSelector:l.cellEditorPopupPosition;this.setEditing(!0),this.cellComp.setEditDetails(u,g,C,this.beans.gridOptionsService.get("reactiveCustomComponents"));const S=this.createEvent(s,L.EVENT_CELL_EDITING_STARTED);this.beans.eventService.dispatchEvent(S)}setEditing(t){this.editing!==t&&(this.editing=t,this.refreshHandle())}stopRowOrCellEdit(t=!1){this.beans.gridOptionsService.get("editType")==="fullRow"?this.rowCtrl.stopEditing(t):this.stopEditing(t)}onPopupEditorClosed(){!this.isEditing()||this.stopEditingAndFocus()}takeValueFromCellEditor(t){const i={newValueExists:!1};if(t)return i;const s=this.cellComp.getCellEditor();return!s||s.isCancelAfterEnd&&s.isCancelAfterEnd()?i:{newValue:s.getValue(),newValueExists:!0}}saveNewValue(t,i){if(i===t)return!1;this.suppressRefreshCell=!0;const s=this.rowNode.setDataValue(this.column,i,"edit");return this.suppressRefreshCell=!1,s}stopEditing(t=!1){if(!this.editing)return!1;const{newValue:i,newValueExists:s}=this.takeValueFromCellEditor(t),n=this.rowNode.getValueFromValueService(this.column);let l=!1;return s&&(l=this.saveNewValue(n,i)),this.setEditing(!1),this.cellComp.setEditDetails(),this.editCompDetails=void 0,this.updateAndFormatValue(!1),this.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.dispatchEditingStoppedEvent(n,i,!t&&!!l),l}dispatchEditingStoppedEvent(t,i,s){const n=Vt(We({},this.createEvent(null,L.EVENT_CELL_EDITING_STOPPED)),{oldValue:t,newValue:i,valueChanged:s});this.beans.eventService.dispatchEvent(n)}createCellEditorParams(t,i){return this.beans.gridOptionsService.addGridCommonParams({value:this.rowNode.getValueFromValueService(this.column),eventKey:t,column:this.column,colDef:this.column.getColDef(),rowIndex:this.getCellPosition().rowIndex,node:this.rowNode,data:this.rowNode.data,cellStartedEdit:i,onKeyDown:this.onKeyDown.bind(this),stopEditing:this.stopEditingAndFocus.bind(this),eGridCell:this.getGui(),parseValue:this.parseValue.bind(this),formatValue:this.formatValue.bind(this)})}createCellRendererParams(){return this.beans.gridOptionsService.addGridCommonParams({value:this.value,valueFormatted:this.valueFormatted,getValue:()=>this.rowNode.getValueFromValueService(this.column),setValue:i=>this.beans.valueService.setValue(this.rowNode,this.column,i),formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,pinned:this.column.getPinned(),colDef:this.column.getColDef(),column:this.column,rowIndex:this.getCellPosition().rowIndex,refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.cellComp.getParentOfValue(),registerRowDragger:(i,s,n,l)=>this.registerRowDragger(i,s,l),setTooltip:(i,s)=>{this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(i,s),this.refreshToolTip()}})}parseValue(t){return this.beans.valueParserService.parseValue(this.column,this.rowNode,t,this.getValue())}setFocusOutOnEditor(){if(!this.editing)return;const t=this.cellComp.getCellEditor();t&&t.focusOut&&t.focusOut()}setFocusInOnEditor(){if(!this.editing)return;const t=this.cellComp.getCellEditor();t&&t.focusIn?t.focusIn():this.focusCell(!0)}onCellChanged(t){t.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(t){var i;this.refreshShouldDestroy()?(i=this.rowCtrl)==null||i.refreshCell(this):this.refreshCell(t)}refreshCell(t){var i,s,n;if(this.suppressRefreshCell||this.editing)return;const l=this.column.getColDef(),u=t!=null&&!!t.newData,g=t!=null&&!!t.suppressFlash||!!l.suppressCellFlash,C=l.field==null&&l.valueGetter==null&&l.showRowGroup==null,S=t&&t.forceRefresh||C||u,A=!!this.cellComp,D=this.updateAndFormatValue(A),M=S||D;if(!!A){if(M){this.showValue(u);const W=this.beans.filterManager.isSuppressFlashingCellsBecauseFiltering();!g&&!W&&(this.beans.gridOptionsService.get("enableCellChangeFlash")||l.enableCellChangeFlash)&&this.flashCell(),(i=this.cellCustomStyleFeature)==null||i.applyUserStyles(),(s=this.cellCustomStyleFeature)==null||s.applyClassesFromColDef()}this.refreshToolTip(),(n=this.cellCustomStyleFeature)==null||n.applyCellClassRules()}}stopEditingAndFocus(t=!1,i=!1){this.stopRowOrCellEdit(),this.focusCell(!0),t||this.navigateAfterEdit(i)}navigateAfterEdit(t){if(this.beans.gridOptionsService.get("enterNavigatesVerticallyAfterEdit")){const s=t?Q.UP:Q.DOWN;this.beans.navigationService.navigateToNextCell(null,s,this.getCellPosition(),!1)}}flashCell(t){var i,s;const n=(i=t?.flashDuration)!=null?i:t?.flashDelay,l=(s=t?.fadeDuration)!=null?s:t?.fadeDelay;this.animateCell("data-changed",n,l)}animateCell(t,i,s){if(!this.cellComp)return;const n=`ag-cell-${t}`,l=`ag-cell-${t}-animation`,{gridOptionsService:u}=this.beans;i||(i=u.get("cellFlashDuration")),ce(s)||(s=u.get("cellFadeDuration")),this.cellComp.addOrRemoveCssClass(n,!0),this.cellComp.addOrRemoveCssClass(l,!1),this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{!this.isAlive()||(this.cellComp.addOrRemoveCssClass(n,!1),this.cellComp.addOrRemoveCssClass(l,!0),this.eGui.style.transition=`background-color ${s}ms`,window.setTimeout(()=>{!this.isAlive()||(this.cellComp.addOrRemoveCssClass(l,!1),this.eGui.style.transition="")},s))},i)})}onFlashCells(t){if(!this.cellComp)return;const i=this.beans.cellPositionUtils.createId(this.getCellPosition());t.cells[i]&&this.animateCell("highlight")}isCellEditable(){return this.column.isCellEditable(this.rowNode)}isSuppressFillHandle(){return this.column.isSuppressFillHandle()}formatValue(t){var i;return(i=this.callValueFormatter(t))!=null?i:t}callValueFormatter(t){return this.beans.valueFormatterService.formatValue(this.column,this.rowNode,t)}updateAndFormatValue(t){const i=this.value,s=this.valueFormatted;return this.value=this.rowNode.getValueFromValueService(this.column),this.valueFormatted=this.callValueFormatter(this.value),t?!this.valuesAreEqual(i,this.value)||this.valueFormatted!=s:!0}valuesAreEqual(t,i){const s=this.column.getColDef();return s.equals?s.equals(t,i):t===i}getComp(){return this.cellComp}getValue(){return this.value}getValueFormatted(){return this.valueFormatted}addDomData(){const t=this.getGui();this.beans.gridOptionsService.setDomData(t,Nd.DOM_DATA_KEY_CELL_CTRL,this),this.addDestroyFunc(()=>this.beans.gridOptionsService.setDomData(t,Nd.DOM_DATA_KEY_CELL_CTRL,null))}createEvent(t,i){return this.beans.gridOptionsService.addGridCommonParams({type:i,node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),rowPinned:this.rowNode.rowPinned,event:t,rowIndex:this.rowNode.rowIndex})}processCharacter(t){var i;(i=this.cellKeyboardListenerFeature)==null||i.processCharacter(t)}onKeyDown(t){var i;(i=this.cellKeyboardListenerFeature)==null||i.onKeyDown(t)}onMouseEvent(t,i){var s;(s=this.cellMouseListenerFeature)==null||s.onMouseEvent(t,i)}getGui(){return this.eGui}refreshToolTip(){var t;(t=this.tooltipFeature)==null||t.refreshToolTip()}getColSpanningList(){return this.cellPositionFeature.getColSpanningList()}onLeftChanged(){var t;!this.cellComp||(t=this.cellPositionFeature)==null||t.onLeftChanged()}onDisplayedColumnsChanged(){!this.eGui||(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){const{cellComp:t,column:i,beans:s}=this;Sl.refreshFirstAndLastStyles(t,i,s.columnModel)}refreshAriaColIndex(){const t=this.beans.columnModel.getAriaColumnIndex(this.column);vh(this.getGui(),t)}isSuppressNavigable(){return this.column.isSuppressNavigable(this.rowNode)}onWidthChanged(){var t;return(t=this.cellPositionFeature)==null?void 0:t.onWidthChanged()}getColumn(){return this.column}getRowNode(){return this.rowNode}getBeans(){return this.beans}isPrintLayout(){return this.printLayout}appendChild(t){this.eGui.appendChild(t)}refreshHandle(){this.cellRangeFeature&&this.cellRangeFeature.refreshHandle()}getCellPosition(){return this.cellPosition}isEditing(){return this.editing}startRowOrCellEdit(t,i=null){if(!this.cellComp){this.onCellCompAttachedFuncs.push(()=>{this.startRowOrCellEdit(t,i)});return}this.beans.gridOptionsService.get("editType")==="fullRow"?this.rowCtrl.startRowEditing(t,this):this.startEditing(t,!0,i)}getRowCtrl(){return this.rowCtrl}getRowPosition(){return{rowIndex:this.cellPosition.rowIndex,rowPinned:this.cellPosition.rowPinned}}updateRangeBordersIfRangeCount(){!this.cellComp||this.cellRangeFeature&&this.cellRangeFeature.updateRangeBordersIfRangeCount()}onRangeSelectionChanged(){!this.cellComp||this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()}isRangeSelectionEnabled(){return this.cellRangeFeature!=null}focusCell(t=!1){this.beans.focusService.setFocusedCell({rowIndex:this.getCellPosition().rowIndex,column:this.column,rowPinned:this.rowNode.rowPinned,forceBrowserFocus:t})}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()}onFirstRightPinnedChanged(){if(!this.cellComp)return;const t=this.column.isFirstRightPinned();this.cellComp.addOrRemoveCssClass(ub,t)}onLastLeftPinnedChanged(){if(!this.cellComp)return;const t=this.column.isLastLeftPinned();this.cellComp.addOrRemoveCssClass(pb,t)}onCellFocused(t){if(this.beans.gridOptionsService.get("suppressCellFocus"))return;const i=this.beans.focusService.isCellFocused(this.cellPosition);if(!this.cellComp){i&&t?.forceBrowserFocus&&(this.focusEventToRestore=t);return}this.focusEventToRestore=void 0,this.cellComp.addOrRemoveCssClass(cb,i),i&&t&&t.forceBrowserFocus&&this.cellComp.getFocusableElement().focus({preventScroll:!!t.preventScrollOnBrowserFocus});const s=this.beans.gridOptionsService.get("editType")==="fullRow";!i&&!s&&this.editing&&this.stopRowOrCellEdit(),i&&this.rowCtrl.announceDescription()}createCellPosition(){this.cellPosition={rowIndex:this.rowNode.rowIndex,rowPinned:xs(this.rowNode.rowPinned),column:this.column}}applyStaticCssClasses(){this.cellComp.addOrRemoveCssClass(lb,!0),this.cellComp.addOrRemoveCssClass(gb,!0);const t=this.column.isAutoHeight()==!0;this.cellComp.addOrRemoveCssClass(db,t),this.cellComp.addOrRemoveCssClass(hb,!t)}onColumnHover(){if(!this.cellComp||!this.beans.gridOptionsService.get("columnHoverHighlight"))return;const t=this.beans.columnHoverService.isHovered(this.column);this.cellComp.addOrRemoveCssClass(fb,t)}onColDefChanged(){var t;if(!this.cellComp)return;if(this.column.isAutoHeight()!==this.isAutoHeight&&((t=this.rowCtrl)==null||t.refreshCell(this)),this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),!this.editing)this.refreshOrDestroyCell({forceRefresh:!0,suppressFlash:!0});else{const n=this.getCellEditor();if(n?.refresh){const{eventKey:l,cellStartedEdit:u}=this.editCompDetails.params,g=this.createCellEditorParams(l,u),C=this.column.getColDef(),S=this.beans.userComponentFactory.getCellEditorDetails(C,g);n.refresh(S.params)}}}setWrapText(){const t=this.column.getColDef().wrapText==!0;this.cellComp.addOrRemoveCssClass(mb,t)}dispatchCellContextMenuEvent(t){const i=this.column.getColDef(),s=this.createEvent(t,L.EVENT_CELL_CONTEXT_MENU);this.beans.eventService.dispatchEvent(s),i.onCellContextMenu&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{i.onCellContextMenu(s)})},0)}getCellRenderer(){return this.cellComp?this.cellComp.getCellRenderer():null}getCellEditor(){return this.cellComp?this.cellComp.getCellEditor():null}destroy(){this.onCellCompAttachedFuncs=[],super.destroy()}createSelectionCheckbox(){const t=new bl;return this.beans.context.createBean(t),t.init({rowNode:this.rowNode,column:this.column}),t}createDndSource(){const t=new Mg(this.rowNode,this.column,this.eGui);return this.beans.context.createBean(t),t}registerRowDragger(t,i,s){if(this.customRowDragComp){this.customRowDragComp.setDragElement(t,i);return}const n=this.createRowDragComp(t,i,s);n&&(this.customRowDragComp=n,this.addDestroyFunc(()=>{this.beans.context.destroyBean(n),this.customRowDragComp=null}))}createRowDragComp(t,i,s){const n=this.beans.gridOptionsService.get("pagination"),l=this.beans.gridOptionsService.get("rowDragManaged"),u=this.beans.gridOptionsService.isRowModelType("clientSide");if(l){if(!u){Ue("managed row dragging is only allowed in the Client Side Row Model");return}if(n){Ue("managed row dragging is not possible when doing pagination");return}}const g=new Oo(()=>this.value,this.rowNode,this.column,t,i,s);return this.beans.context.createBean(g),g}};Ig.DOM_DATA_KEY_CELL_CTRL="cellCtrl";var Po=Ig,Cb=0,Og=class Gd extends ge{constructor(t,i,s,n,l){super(),this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKeySanitised=null,this.beans=i,this.gridOptionsService=i.gridOptionsService,this.rowNode=t,this.paginationPage=i.paginationProxy.getCurrentPage(),this.useAnimationFrameForCreate=n,this.printLayout=l,this.suppressRowTransform=this.gridOptionsService.get("suppressRowTransform"),this.instanceId=t.id+"-"+Cb++,this.rowId=ai(t.id),this.initRowBusinessKey(),this.rowFocused=i.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=i.rowCssClassCalculator.calculateRowLevel(this.rowNode),this.setRowType(),this.setAnimateFlags(s),this.rowStyles=this.processStylesFromGridOptions(),this.isFullWidth()&&!this.gridOptionsService.get("suppressCellFocus")&&(this.tabIndex=-1),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gridOptionsService.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if(typeof this.businessKeyForNodeFunc!="function")return;const t=this.businessKeyForNodeFunc(this.rowNode);this.businessKeySanitised=ai(t)}getRowId(){return this.rowId}getRowStyles(){return this.rowStyles}getTabIndex(){return this.tabIndex}isSticky(){return this.rowNode.sticky}getBeans(){return this.beans}getInstanceId(){return this.instanceId}setComp(t,i,s){const n={rowComp:t,element:i,containerType:s};this.allRowGuis.push(n),s==="left"?this.leftGui=n:s==="right"?this.rightGui=n:s==="fullWidth"?this.fullWidthGui=n:this.centerGui=n,this.initialiseRowComp(n),this.rowType!=="FullWidthLoading"&&!this.rowNode.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent()}unsetComp(t){switch(this.allRowGuis=this.allRowGuis.filter(i=>i.containerType!==t),t){case"left":this.leftGui=void 0;break;case"right":this.rightGui=void 0;break;case"fullWidth":this.fullWidthGui=void 0;break;case"center":this.centerGui=void 0;break}}isCacheable(){return this.rowType==="FullWidthDetail"&&this.gridOptionsService.get("keepDetailRows")}setCached(t){const i=t?"none":"";this.allRowGuis.forEach(s=>s.element.style.display=i)}initialiseRowComp(t){const i=this.gridOptionsService;this.listenOnDomOrder(t),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights(),this.onRowHeightChanged(t),this.updateRowIndexes(t),this.setFocusedClasses(t),this.setStylesFromGridOptions(!1,t),i.isRowSelection()&&this.rowNode.selectable&&this.onRowSelected(t),this.updateColumnLists(!this.useAnimationFrameForCreate);const s=t.rowComp;this.getInitialRowClasses(t.containerType).forEach(l=>s.addOrRemoveCssClass(l,!0)),this.executeSlideAndFadeAnimations(t),this.rowNode.group&&Hs(t.element,this.rowNode.expanded==!0),this.setRowCompRowId(s),this.setRowCompRowBusinessKey(s),i.setDomData(t.element,Gd.DOM_DATA_KEY_ROW_CTRL,this),this.addDestroyFunc(()=>i.setDomData(t.element,Gd.DOM_DATA_KEY_ROW_CTRL,null)),this.useAnimationFrameForCreate?this.beans.animationFrameService.createTask(this.addHoverFunctionality.bind(this,t.element),this.rowNode.rowIndex,"createTasksP2"):this.addHoverFunctionality(t.element),this.isFullWidth()&&this.setupFullWidth(t),i.get("rowDragEntireRow")&&this.addRowDraggerToRow(t),this.useAnimationFrameForCreate&&this.beans.animationFrameService.addDestroyTask(()=>{!this.isAlive()||t.rowComp.addOrRemoveCssClass("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(t){this.businessKeySanitised!=null&&t.setRowBusinessKey(this.businessKeySanitised)}getBusinessKey(){return this.businessKeySanitised}setRowCompRowId(t){this.rowId=ai(this.rowNode.id),this.rowId!=null&&t.setRowId(this.rowId)}executeSlideAndFadeAnimations(t){const{containerType:i}=t;this.slideInAnimation[i]&&(wd(()=>{this.onTopChanged()}),this.slideInAnimation[i]=!1),this.fadeInAnimation[i]&&(wd(()=>{t.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)}),this.fadeInAnimation[i]=!1)}addRowDraggerToRow(t){if(this.gridOptionsService.get("enableRangeSelection")){Ue("Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `enableRangeSelection: true`");return}const i=this.beans.localeService.getLocaleTextFunc(),s=new Oo(()=>`1 ${i("rowDragRow","row")}`,this.rowNode,void 0,t.element,void 0,!0),n=this.createBean(s,this.beans.context);this.rowDragComps.push(n)}setupFullWidth(t){const i=this.getPinnedForContainer(t.containerType);if(this.rowType=="FullWidthDetail"&&!Rt.__assertRegistered("@ag-grid-enterprise/master-detail","cell renderer 'agDetailCellRenderer' (for master detail)",this.beans.context.getGridId()))return;const s=this.createFullWidthCompDetails(t.element,i);t.rowComp.showFullWidth(s)}isPrintLayout(){return this.printLayout}getFullWidthCellRenderers(){var t,i;return this.gridOptionsService.get("embedFullWidthRows")?this.allRowGuis.map(s=>{var n;return(n=s?.rowComp)==null?void 0:n.getFullWidthCellRenderer()}):[(i=(t=this.fullWidthGui)==null?void 0:t.rowComp)==null?void 0:i.getFullWidthCellRenderer()]}getCellElement(t){const i=this.getCellCtrl(t);return i?i.getGui():null}executeProcessRowPostCreateFunc(){const t=this.gridOptionsService.getCallback("processRowPostCreate");if(!t||!this.areAllContainersReady())return;const i={eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};t(i)}areAllContainersReady(){const t=!!this.leftGui||!this.beans.columnModel.isPinningLeft(),i=!!this.centerGui,s=!!this.rightGui||!this.beans.columnModel.isPinningRight();return t&&i&&s}setRowType(){const t=this.rowNode.stub,i=this.rowNode.isFullWidthCell(),s=this.gridOptionsService.get("masterDetail")&&this.rowNode.detail,n=this.beans.columnModel.isPivotMode(),u=!!this.rowNode.group&&!this.rowNode.footer&&this.gridOptionsService.isGroupUseEntireRow(n);t?this.rowType="FullWidthLoading":s?this.rowType="FullWidthDetail":i?this.rowType="FullWidth":u?this.rowType="FullWidthGroup":this.rowType="Normal"}updateColumnLists(t=!1,i=!1){if(this.isFullWidth())return;if(t||this.gridOptionsService.get("suppressAnimationFrame")||this.printLayout){this.updateColumnListsImpl(i);return}this.updateColumnListsPending||(this.beans.animationFrameService.createTask(()=>{!this.active||this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0)}createCellCtrls(t,i,s=null){const n={list:[],map:{}},l=(u,g)=>{n.list.push(g),n.map[u]=g};return i.forEach(u=>{const g=u.getInstanceId();let C=t.map[g];C||(C=new Po(u,this.rowNode,this.beans,this)),l(g,C)}),t.list.forEach(u=>{if(n.map[u.getColumn().getInstanceId()]!=null)return;if(!this.isCellEligibleToBeRemoved(u,s)){l(u.getColumn().getInstanceId(),u);return}u.destroy()}),n}updateColumnListsImpl(t){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(t)}setCellCtrls(t){this.allRowGuis.forEach(i=>{const s=this.getCellCtrlsForContainer(i.containerType);i.rowComp.setCellCtrls(s,t)})}getCellCtrlsForContainer(t){switch(t){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list;default:const i=t;throw new Error(`Unhandled case: ${i}`)}}createAllCellCtrls(){const t=this.beans.columnModel;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,t.getAllDisplayedColumns()),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{const i=t.getViewportCenterColumnsForRow(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,i);const s=t.getDisplayedLeftColumnsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,s,"left");const n=t.getDisplayedRightColumnsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,n,"right")}}isCellEligibleToBeRemoved(t,i){if(t.getColumn().getPinned()!=i)return!0;const u=t.isEditing(),g=this.beans.focusService.isCellFocused(t.getCellPosition());if(u||g){const S=t.getColumn();return!(this.beans.columnModel.getAllDisplayedColumns().indexOf(S)>=0)}return!0}getDomOrder(){return this.gridOptionsService.get("ensureDomOrder")||this.gridOptionsService.isDomLayout("print")}listenOnDomOrder(t){const i=()=>{t.rowComp.setDomOrder(this.getDomOrder())};this.addManagedPropertyListener("domLayout",i),this.addManagedPropertyListener("ensureDomOrder",i)}setAnimateFlags(t){if(this.isSticky()||!t)return;const i=ce(this.rowNode.oldRowTop),s=this.beans.columnModel.isPinningLeft(),n=this.beans.columnModel.isPinningRight();if(i){if(this.isFullWidth()&&!this.gridOptionsService.get("embedFullWidthRows")){this.slideInAnimation.fullWidth=!0;return}this.slideInAnimation.center=!0,this.slideInAnimation.left=s,this.slideInAnimation.right=n}else{if(this.isFullWidth()&&!this.gridOptionsService.get("embedFullWidthRows")){this.fadeInAnimation.fullWidth=!0;return}this.fadeInAnimation.center=!0,this.fadeInAnimation.left=s,this.fadeInAnimation.right=n}}isEditing(){return this.editingRow}isFullWidth(){return this.rowType!=="Normal"}getRowType(){return this.rowType}refreshFullWidth(){const t=(g,C)=>g?g.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(g.element,C).params):!0,i=t(this.fullWidthGui,null),s=t(this.centerGui,null),n=t(this.leftGui,"left"),l=t(this.rightGui,"right");return i&&s&&n&&l}addListeners(){this.addManagedListener(this.rowNode,st.EVENT_HEIGHT_CHANGED,()=>this.onRowHeightChanged()),this.addManagedListener(this.rowNode,st.EVENT_ROW_SELECTED,()=>this.onRowSelected()),this.addManagedListener(this.rowNode,st.EVENT_ROW_INDEX_CHANGED,this.onRowIndexChanged.bind(this)),this.addManagedListener(this.rowNode,st.EVENT_TOP_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(this.rowNode,st.EVENT_EXPANDED_CHANGED,this.updateExpandedCss.bind(this)),this.addManagedListener(this.rowNode,st.EVENT_HAS_CHILDREN_CHANGED,this.updateExpandedCss.bind(this)),this.rowNode.detail&&this.addManagedListener(this.rowNode.parent,st.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addManagedListener(this.rowNode,st.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addManagedListener(this.rowNode,st.EVENT_CELL_CHANGED,this.postProcessCss.bind(this)),this.addManagedListener(this.rowNode,st.EVENT_HIGHLIGHT_CHANGED,this.onRowNodeHighlightChanged.bind(this)),this.addManagedListener(this.rowNode,st.EVENT_DRAGGING_CHANGED,this.postProcessRowDragging.bind(this)),this.addManagedListener(this.rowNode,st.EVENT_UI_LEVEL_CHANGED,this.onUiLevelChanged.bind(this));const t=this.beans.eventService;this.addManagedListener(t,L.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,this.onPaginationPixelOffsetChanged.bind(this)),this.addManagedListener(t,L.EVENT_HEIGHT_SCALE_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(t,L.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(t,L.EVENT_VIRTUAL_COLUMNS_CHANGED,this.onVirtualColumnsChanged.bind(this)),this.addManagedListener(t,L.EVENT_CELL_FOCUSED,this.onCellFocusChanged.bind(this)),this.addManagedListener(t,L.EVENT_CELL_FOCUS_CLEARED,this.onCellFocusChanged.bind(this)),this.addManagedListener(t,L.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),this.addManagedListener(t,L.EVENT_MODEL_UPDATED,this.refreshFirstAndLastRowStyles.bind(this)),this.addManagedListener(t,L.EVENT_COLUMN_MOVED,this.updateColumnLists.bind(this)),this.addDestroyFunc(()=>{this.destroyBeans(this.rowDragComps,this.beans.context),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature,this.beans.context))}),this.addManagedPropertyListeners(["rowDragEntireRow"],()=>{if(this.gridOptionsService.get("rowDragEntireRow")){this.allRowGuis.forEach(s=>{this.addRowDraggerToRow(s)});return}this.destroyBeans(this.rowDragComps,this.beans.context),this.rowDragComps=[]}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListener(this.rowNode,st.EVENT_ROW_INDEX_CHANGED,()=>{this.getAllCellCtrls().forEach(t=>t.onRowIndexChanged())}),this.addManagedListener(this.rowNode,st.EVENT_CELL_CHANGED,t=>{this.getAllCellCtrls().forEach(i=>i.onCellChanged(t))})}onRowNodeDataChanged(t){if(this.isFullWidth()!==!!this.rowNode.isFullWidthCell()){this.beans.rowRenderer.redrawRow(this.rowNode);return}if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode);return}this.getAllCellCtrls().forEach(s=>s.refreshCell({suppressFlash:!t.update,newData:!t.update})),this.allRowGuis.forEach(s=>{this.setRowCompRowId(s.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(s.rowComp)}),this.onRowSelected(),this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){const t=this.rowNode.highlighted;this.allRowGuis.forEach(i=>{const s=t===0,n=t===1;i.rowComp.addOrRemoveCssClass("ag-row-highlight-above",s),i.rowComp.addOrRemoveCssClass("ag-row-highlight-below",n)})}postProcessRowDragging(){const t=this.rowNode.dragging;this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass("ag-row-dragging",t))}updateExpandedCss(){const t=this.rowNode.isExpandable(),i=this.rowNode.expanded==!0;this.allRowGuis.forEach(s=>{s.rowComp.addOrRemoveCssClass("ag-row-group",t),s.rowComp.addOrRemoveCssClass("ag-row-group-expanded",t&&i),s.rowComp.addOrRemoveCssClass("ag-row-group-contracted",t&&!i),Hs(s.element,t&&i)})}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:xs(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}onKeyboardNavigate(t){const i=this.allRowGuis.find(C=>C.element.contains(t.target));if(!((i?i.element:null)===t.target))return;const l=this.rowNode,u=this.beans.focusService.getFocusedCell(),g={rowIndex:l.rowIndex,rowPinned:l.rowPinned,column:u&&u.column};this.beans.navigationService.navigateToNextCell(t,t.key,g,!0),t.preventDefault()}onTabKeyDown(t){if(t.defaultPrevented||us(t))return;const i=this.allRowGuis.find(u=>u.element.contains(t.target)),s=i?i.element:null,n=s===t.target;let l=null;n||(l=this.beans.focusService.findNextFocusableElement(s,!1,t.shiftKey)),(this.isFullWidth()&&n||!l)&&this.beans.navigationService.onTabKeyDown(this,t)}onFullWidthRowFocused(t){var i;const s=this.rowNode,n=t?this.isFullWidth()&&t.rowIndex===s.rowIndex&&t.rowPinned==s.rowPinned:!1,l=this.fullWidthGui?this.fullWidthGui.element:(i=this.centerGui)==null?void 0:i.element;!l||(l.classList.toggle("ag-full-width-focus",n),n&&l.focus({preventScroll:!0}))}refreshCell(t){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,t),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,t),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,t),this.updateColumnLists()}removeCellCtrl(t,i){const s={list:[],map:{}};return t.list.forEach(n=>{n!==i&&(s.list.push(n),s.map[n.getInstanceId()]=n)}),s}onMouseEvent(t,i){switch(t){case"dblclick":this.onRowDblClick(i);break;case"click":this.onRowClick(i);break;case"touchstart":case"mousedown":this.onRowMouseDown(i);break}}createRowEvent(t,i){return this.gridOptionsService.addGridCommonParams({type:t,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,event:i})}createRowEventWithSource(t,i){const s=this.createRowEvent(t,i);return s.source=this,s}onRowDblClick(t){if(us(t))return;const i=this.createRowEventWithSource(L.EVENT_ROW_DOUBLE_CLICKED,t);this.beans.eventService.dispatchEvent(i)}onRowMouseDown(t){if(this.lastMouseDownOnDragger=Do(t.target,"ag-row-drag",3),!this.isFullWidth())return;const i=this.rowNode,s=this.beans.columnModel;this.beans.rangeService&&this.beans.rangeService.removeAllCellRanges(),this.beans.focusService.setFocusedCell({rowIndex:i.rowIndex,column:s.getAllDisplayedColumns()[0],rowPinned:i.rowPinned,forceBrowserFocus:!0})}onRowClick(t){if(us(t)||this.lastMouseDownOnDragger)return;const s=this.createRowEventWithSource(L.EVENT_ROW_CLICKED,t);this.beans.eventService.dispatchEvent(s);const n=t.ctrlKey||t.metaKey,l=t.shiftKey;if(this.gridOptionsService.get("groupSelectsChildren")&&this.rowNode.group||this.isRowSelectionBlocked()||this.gridOptionsService.get("suppressRowClickSelection"))return;const g=this.gridOptionsService.get("rowMultiSelectWithClick"),C=!this.gridOptionsService.get("suppressRowDeselection"),S="rowClicked";if(this.rowNode.isSelected())g?this.rowNode.setSelectedParams({newValue:!1,event:t,source:S}):n?C&&this.rowNode.setSelectedParams({newValue:!1,event:t,source:S}):this.rowNode.setSelectedParams({newValue:!0,clearSelection:!l,rangeSelect:l,event:t,source:S});else{const A=g?!1:!n;this.rowNode.setSelectedParams({newValue:!0,clearSelection:A,rangeSelect:l,event:t,source:S})}}isRowSelectionBlocked(){return!this.rowNode.selectable||!!this.rowNode.rowPinned||!this.gridOptionsService.isRowSelection()}setupDetailRowAutoHeight(t){if(this.rowType!=="FullWidthDetail"||!this.gridOptionsService.get("detailRowAutoHeight"))return;const i=()=>{const n=t.clientHeight;if(n!=null&&n>0){const l=()=>{this.rowNode.setRowHeight(n),this.beans.clientSideRowModel?this.beans.clientSideRowModel.onRowHeightChanged():this.beans.serverSideRowModel&&this.beans.serverSideRowModel.onRowHeightChanged()};window.setTimeout(l,0)}},s=this.beans.resizeObserverService.observeResize(t,i);this.addDestroyFunc(s),i()}createFullWidthCompDetails(t,i){const s=this.gridOptionsService.addGridCommonParams({fullWidth:!0,data:this.rowNode.data,node:this.rowNode,value:this.rowNode.key,valueFormatted:this.rowNode.key,rowIndex:this.rowNode.rowIndex,eGridCell:t,eParentOfValue:t,pinned:i,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(n,l,u,g)=>this.addFullWidthRowDragging(n,l,u,g),setTooltip:(n,l)=>this.refreshRowTooltip(n,l)});switch(this.rowType){case"FullWidthDetail":return this.beans.userComponentFactory.getFullWidthDetailCellRendererDetails(s);case"FullWidthGroup":return this.beans.userComponentFactory.getFullWidthGroupCellRendererDetails(s);case"FullWidthLoading":return this.beans.userComponentFactory.getFullWidthLoadingCellRendererDetails(s);default:return this.beans.userComponentFactory.getFullWidthCellRendererDetails(s)}}refreshRowTooltip(t,i){if(!this.fullWidthGui)return;const s={getGui:()=>this.fullWidthGui.element,getTooltipValue:()=>t,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:i};this.tooltipFeature&&this.destroyBean(this.tooltipFeature,this.beans.context),this.tooltipFeature=this.createBean(new $s(s,this.beans))}addFullWidthRowDragging(t,i,s="",n){if(!this.isFullWidth())return;const l=new Oo(()=>s,this.rowNode,void 0,t,i,n);this.createBean(l,this.beans.context),this.addDestroyFunc(()=>{this.destroyBean(l,this.beans.context)})}onUiLevelChanged(){const t=this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);if(this.rowLevel!=t){const i="ag-row-level-"+t,s="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(n=>{n.rowComp.addOrRemoveCssClass(i,!0),n.rowComp.addOrRemoveCssClass(s,!1)})}this.rowLevel=t}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageLastRow()}refreshFirstAndLastRowStyles(){const t=this.isFirstRowOnPage(),i=this.isLastRowOnPage();this.firstRowOnPage!==t&&(this.firstRowOnPage=t,this.allRowGuis.forEach(s=>s.rowComp.addOrRemoveCssClass("ag-row-first",t))),this.lastRowOnPage!==i&&(this.lastRowOnPage=i,this.allRowGuis.forEach(s=>s.rowComp.addOrRemoveCssClass("ag-row-last",i)))}stopEditing(t=!1){if(this.stoppingRowEdit)return;const i=this.getAllCellCtrls(),s=this.editingRow;this.stoppingRowEdit=!0;let n=!1;for(const l of i){const u=l.stopEditing(t);s&&!t&&!n&&u&&(n=!0)}if(n){const l=this.createRowEvent(L.EVENT_ROW_VALUE_CHANGED);this.beans.eventService.dispatchEvent(l)}s&&this.setEditingRow(!1),this.stoppingRowEdit=!1}setInlineEditingCss(t){this.allRowGuis.forEach(i=>{i.rowComp.addOrRemoveCssClass("ag-row-inline-editing",t),i.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!t)})}setEditingRow(t){this.editingRow=t,this.allRowGuis.forEach(s=>s.rowComp.addOrRemoveCssClass("ag-row-editing",t));const i=t?this.createRowEvent(L.EVENT_ROW_EDITING_STARTED):this.createRowEvent(L.EVENT_ROW_EDITING_STOPPED);this.beans.eventService.dispatchEvent(i)}startRowEditing(t=null,i=null,s=null){if(this.editingRow)return;this.getAllCellCtrls().reduce((l,u)=>{const g=u===i;return g?u.startEditing(t,g,s):u.startEditing(null,g,s),l?!0:u.isEditing()},!1)&&this.setEditingRow(!0)}getAllCellCtrls(){return this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){const t=this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode);!t||!t.length||t.forEach(i=>{this.allRowGuis.forEach(s=>s.rowComp.addOrRemoveCssClass(i,!0))})}postProcessRowClassRules(){this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode,t=>{this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass(t,!0))},t=>{this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass(t,!1))})}setStylesFromGridOptions(t,i){t&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(i,s=>s.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(t){return t==="left"?"left":t==="right"?"right":null}getInitialRowClasses(t){const i=this.getPinnedForContainer(t),s={rowNode:this.rowNode,rowFocused:this.rowFocused,fadeRowIn:this.fadeInAnimation[t],rowIsEven:this.rowNode.rowIndex%2===0,rowLevel:this.rowLevel,fullWidthRow:this.isFullWidth(),firstRowOnPage:this.isFirstRowOnPage(),lastRowOnPage:this.isLastRowOnPage(),printLayout:this.printLayout,expandable:this.rowNode.isExpandable(),pinned:i};return this.beans.rowCssClassCalculator.getInitialRowClasses(s)}processStylesFromGridOptions(){const t=this.gridOptionsService.get("rowStyle");if(t&&typeof t=="function"){console.warn("AG Grid: rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead");return}const i=this.gridOptionsService.getCallback("getRowStyle");let s;if(i){const n={data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex};s=i(n)}return s||t?Object.assign({},t,s):this.emptyStyle}onRowSelected(t){const i=this.beans.gridOptionsService.getDocument(),s=!!this.rowNode.isSelected();this.forEachGui(t,n=>{n.rowComp.addOrRemoveCssClass("ag-row-selected",s),xr(n.element,s),n.element.contains(i.activeElement)&&(n===this.centerGui||n===this.fullWidthGui)&&this.announceDescription()})}announceDescription(){if(this.isRowSelectionBlocked())return;const t=this.rowNode.isSelected();if(t&&this.beans.gridOptionsService.get("suppressRowDeselection"))return;const s=this.beans.localeService.getLocaleTextFunc()(t?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${t?"deselect":"select"} this row.`);this.beans.ariaAnnouncementService.announceValue(s)}isUseAnimationFrameForCreate(){return this.useAnimationFrameForCreate}addHoverFunctionality(t){!this.active||(this.addManagedListener(t,"mouseenter",()=>this.rowNode.onMouseEnter()),this.addManagedListener(t,"mouseleave",()=>this.rowNode.onMouseLeave()),this.addManagedListener(this.rowNode,st.EVENT_MOUSE_ENTER,()=>{!this.beans.dragService.isDragging()&&!this.gridOptionsService.get("suppressRowHoverHighlight")&&(t.classList.add("ag-row-hover"),this.rowNode.setHovered(!0))}),this.addManagedListener(this.rowNode,st.EVENT_MOUSE_LEAVE,()=>{t.classList.remove("ag-row-hover"),this.rowNode.setHovered(!1)}))}roundRowTopToBounds(t){const i=this.beans.ctrlsService.getGridBodyCtrl().getScrollFeature().getApproximateVScollPosition(),s=this.applyPaginationOffset(i.top,!0)-100,n=this.applyPaginationOffset(i.bottom,!0)+100;return Math.min(Math.max(s,t),n)}getFrameworkOverrides(){return this.beans.frameworkOverrides}forEachGui(t,i){t?i(t):this.allRowGuis.forEach(i)}onRowHeightChanged(t){if(this.rowNode.rowHeight==null)return;const i=this.rowNode.rowHeight,s=this.beans.environment.getDefaultRowHeight(),l=this.gridOptionsService.isGetRowHeightFunction()?this.gridOptionsService.getRowHeightForNode(this.rowNode).height:void 0,u=l?`${Math.min(s,l)-2}px`:void 0;this.forEachGui(t,g=>{g.element.style.height=`${i}px`,u&&g.element.style.setProperty("--ag-line-height",u)})}addEventListener(t,i){super.addEventListener(t,i)}removeEventListener(t,i){super.removeEventListener(t,i)}destroyFirstPass(t=!1){if(this.active=!1,!t&&this.gridOptionsService.isAnimateRows()&&!this.isSticky())if(this.rowNode.rowTop!=null){const n=this.roundRowTopToBounds(this.rowNode.rowTop);this.setRowTop(n)}else this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0));this.rowNode.setHovered(!1);const i=this.createRowEvent(L.EVENT_VIRTUAL_ROW_REMOVED);this.dispatchEvent(i),this.beans.eventService.dispatchEvent(i),super.destroy()}destroySecondPass(){this.allRowGuis.length=0,this.stopEditing();const t=i=>(i.list.forEach(s=>s.destroy()),{list:[],map:{}});this.centerCellCtrls=t(this.centerCellCtrls),this.leftCellCtrls=t(this.leftCellCtrls),this.rightCellCtrls=t(this.rightCellCtrls)}setFocusedClasses(t){this.forEachGui(t,i=>{i.rowComp.addOrRemoveCssClass("ag-row-focus",this.rowFocused),i.rowComp.addOrRemoveCssClass("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){const t=this.beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);t!==this.rowFocused&&(this.rowFocused=t,this.setFocusedClasses()),!t&&this.editingRow&&this.stopEditing(!1)}onPaginationChanged(){const t=this.beans.paginationProxy.getCurrentPage();this.paginationPage!==t&&(this.paginationPage=t,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(t,i=!1){if(this.rowNode.isRowPinned()||this.rowNode.sticky)return t;const s=this.beans.paginationProxy.getPixelOffset();return t+s*(i?1:-1)}setRowTop(t){if(!this.printLayout&&ce(t)){const i=this.applyPaginationOffset(t),l=`${this.rowNode.isRowPinned()||this.rowNode.sticky?i:this.beans.rowContainerHeightService.getRealPixelPosition(i)}px`;this.setRowTopStyle(l)}}getInitialRowTop(t){return this.suppressRowTransform?this.getInitialRowTopShared(t):void 0}getInitialTransform(t){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(t)})`}getInitialRowTopShared(t){if(this.printLayout)return"";let i;if(this.isSticky())i=this.rowNode.stickyRowTop;else{const s=this.slideInAnimation[t]?this.roundRowTopToBounds(this.rowNode.oldRowTop):this.rowNode.rowTop,n=this.applyPaginationOffset(s);i=this.rowNode.isRowPinned()?n:this.beans.rowContainerHeightService.getRealPixelPosition(n)}return i+"px"}setRowTopStyle(t){this.allRowGuis.forEach(i=>this.suppressRowTransform?i.rowComp.setTop(t):i.rowComp.setTransform(`translateY(${t})`))}getRowNode(){return this.rowNode}getCellCtrl(t){let i=null;return this.getAllCellCtrls().forEach(s=>{s.getColumn()==t&&(i=s)}),i!=null||this.getAllCellCtrls().forEach(s=>{s.getColSpanningList().indexOf(t)>=0&&(i=s)}),i}onRowIndexChanged(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}getRowIndex(){return this.rowNode.getRowIndexString()}updateRowIndexes(t){const i=this.rowNode.getRowIndexString(),s=this.beans.headerNavigationService.getHeaderRowCount()+this.beans.filterManager.getHeaderRowCount(),n=this.rowNode.rowIndex%2===0,l=s+this.rowNode.rowIndex+1;this.forEachGui(t,u=>{u.rowComp.setRowIndex(i),u.rowComp.addOrRemoveCssClass("ag-row-even",n),u.rowComp.addOrRemoveCssClass("ag-row-odd",!n),mh(u.element,l)})}};Og.DOM_DATA_KEY_ROW_CTRL="renderedRow";var Fo=Og,_i=class extends ge{constructor(e){super(),this.element=e}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.mockContextMenuForIPad()}addKeyboardListeners(){const e="keydown",t=this.processKeyboardEvent.bind(this,e);this.addManagedListener(this.element,e,t)}addMouseListeners(){const e=ch("touchstart")?"touchstart":"mousedown";["dblclick","contextmenu","mouseover","mouseout","click",e].forEach(i=>{const s=this.processMouseEvent.bind(this,i);this.addManagedListener(this.element,i,s)})}processMouseEvent(e,t){if(!this.mouseEventService.isEventFromThisGrid(t)||us(t))return;const i=this.getRowForEvent(t),s=this.mouseEventService.getRenderedCellForEvent(t);e==="contextmenu"?this.handleContextMenuMouseEvent(t,void 0,i,s):(s&&s.onMouseEvent(e,t),i&&i.onMouseEvent(e,t))}mockContextMenuForIPad(){if(!Xs())return;const e=new pi(this.element),t=i=>{const s=this.getRowForEvent(i.touchEvent),n=this.mouseEventService.getRenderedCellForEvent(i.touchEvent);this.handleContextMenuMouseEvent(void 0,i.touchEvent,s,n)};this.addManagedListener(e,pi.EVENT_LONG_TAP,t),this.addDestroyFunc(()=>e.destroy())}getRowForEvent(e){let t=e.target;for(;t;){const i=this.gridOptionsService.getDomData(t,Fo.DOM_DATA_KEY_ROW_CTRL);if(i)return i;t=t.parentElement}return null}handleContextMenuMouseEvent(e,t,i,s){const n=i?i.getRowNode():null,l=s?s.getColumn():null;let u=null;if(l){const S=e||t;s.dispatchCellContextMenuEvent(S??null),u=this.valueService.getValue(l,n)}const g=this.ctrlsService.getGridBodyCtrl(),C=s?s.getGui():g.getGridBodyElement();this.menuService.showContextMenu({mouseEvent:e,touchEvent:t,rowNode:n,column:l,value:u,anchorToElement:C})}getControlsForEventTarget(e){return{cellCtrl:_a(this.gridOptionsService,e,Po.DOM_DATA_KEY_CELL_CTRL),rowCtrl:_a(this.gridOptionsService,e,Fo.DOM_DATA_KEY_ROW_CTRL)}}processKeyboardEvent(e,t){const{cellCtrl:i,rowCtrl:s}=this.getControlsForEventTarget(t.target);t.defaultPrevented||(i?this.processCellKeyboardEvent(i,e,t):s&&s.isFullWidth()&&this.processFullWidthRowKeyboardEvent(s,e,t))}processCellKeyboardEvent(e,t,i){const s=e.getRowNode(),n=e.getColumn(),l=e.isEditing();if(!Wa(this.gridOptionsService,i,s,n,l)&&t==="keydown"&&(!l&&this.navigationService.handlePageScrollingKey(i)||e.onKeyDown(i),this.doGridOperations(i,e.isEditing()),pl(i)&&e.processCharacter(i)),t==="keydown"){const g=e.createEvent(i,L.EVENT_CELL_KEY_DOWN);this.eventService.dispatchEvent(g)}}processFullWidthRowKeyboardEvent(e,t,i){const s=e.getRowNode(),n=this.focusService.getFocusedCell(),l=n&&n.column;if(!Wa(this.gridOptionsService,i,s,l,!1)){const g=i.key;if(t==="keydown")switch(g){case Q.PAGE_HOME:case Q.PAGE_END:case Q.PAGE_UP:case Q.PAGE_DOWN:this.navigationService.handlePageScrollingKey(i,!0);break;case Q.UP:case Q.DOWN:e.onKeyboardNavigate(i);break;case Q.TAB:e.onTabKeyDown(i);break}}if(t==="keydown"){const g=e.createRowEvent(L.EVENT_CELL_KEY_DOWN,i);this.eventService.dispatchEvent(g)}}doGridOperations(e,t){if(!e.ctrlKey&&!e.metaKey||t||!this.mouseEventService.isEventFromThisGrid(e))return;const i=Gp(e);if(i===Q.A)return this.onCtrlAndA(e);if(i===Q.C)return this.onCtrlAndC(e);if(i===Q.D)return this.onCtrlAndD(e);if(i===Q.V)return this.onCtrlAndV(e);if(i===Q.X)return this.onCtrlAndX(e);if(i===Q.Y)return this.onCtrlAndY();if(i===Q.Z)return this.onCtrlAndZ(e)}onCtrlAndA(e){const{pinnedRowModel:t,paginationProxy:i,rangeService:s}=this;if(s&&i.isRowsToRender()){const[n,l]=[t.isEmpty("top"),t.isEmpty("bottom")],u=n?null:"top";let g,C;l?(g=null,C=this.paginationProxy.getRowCount()-1):(g="bottom",C=t.getPinnedBottomRowData().length-1);const S=this.columnModel.getAllDisplayedColumns();if(Hi(S))return;s.setCellRange({rowStartIndex:0,rowStartPinned:u,rowEndIndex:C,rowEndPinned:g,columnStart:S[0],columnEnd:yt(S)})}e.preventDefault()}onCtrlAndC(e){if(!this.clipboardService||this.gridOptionsService.get("enableCellTextSelection"))return;const{cellCtrl:t,rowCtrl:i}=this.getControlsForEventTarget(e.target);t?.isEditing()||i?.isEditing()||(e.preventDefault(),this.clipboardService.copyToClipboard())}onCtrlAndX(e){if(!this.clipboardService||this.gridOptionsService.get("enableCellTextSelection")||this.gridOptionsService.get("suppressCutToClipboard"))return;const{cellCtrl:t,rowCtrl:i}=this.getControlsForEventTarget(e.target);t?.isEditing()||i?.isEditing()||(e.preventDefault(),this.clipboardService.cutToClipboard(void 0,"ui"))}onCtrlAndV(e){const{cellCtrl:t,rowCtrl:i}=this.getControlsForEventTarget(e.target);t?.isEditing()||i?.isEditing()||this.clipboardService&&!this.gridOptionsService.get("suppressClipboardPaste")&&this.clipboardService.pasteFromClipboard()}onCtrlAndD(e){this.clipboardService&&!this.gridOptionsService.get("suppressClipboardPaste")&&this.clipboardService.copyRangeDown(),e.preventDefault()}onCtrlAndZ(e){!this.gridOptionsService.get("undoRedoCellEditing")||(e.preventDefault(),e.shiftKey?this.undoRedoService.redo("ui"):this.undoRedoService.undo("ui"))}onCtrlAndY(){this.undoRedoService.redo("ui")}};E([N("mouseEventService")],_i.prototype,"mouseEventService",2);E([N("valueService")],_i.prototype,"valueService",2);E([N("menuService")],_i.prototype,"menuService",2);E([N("ctrlsService")],_i.prototype,"ctrlsService",2);E([N("navigationService")],_i.prototype,"navigationService",2);E([N("focusService")],_i.prototype,"focusService",2);E([N("undoRedoService")],_i.prototype,"undoRedoService",2);E([N("columnModel")],_i.prototype,"columnModel",2);E([N("paginationProxy")],_i.prototype,"paginationProxy",2);E([N("pinnedRowModel")],_i.prototype,"pinnedRowModel",2);E([mt("rangeService")],_i.prototype,"rangeService",2);E([mt("clipboardService")],_i.prototype,"clipboardService",2);E([Ce],_i.prototype,"postConstruct",1);var Nr=class extends ge{constructor(e){super(),this.centerContainerCtrl=e}postConstruct(){this.ctrlsService.whenReady(()=>{this.gridBodyCtrl=this.ctrlsService.getGridBodyCtrl(),this.listenForResize()}),this.addManagedListener(this.eventService,L.EVENT_SCROLLBAR_WIDTH_CHANGED,this.onScrollbarWidthChanged.bind(this)),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){const e=()=>this.onCenterViewportResized();this.centerContainerCtrl.registerViewportResizeListener(e),this.gridBodyCtrl.registerBodyViewportResizeListener(e)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.centerContainerCtrl.isViewportInTheDOMTree()){this.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();const e=this.centerContainerCtrl.getCenterWidth();e!==this.centerWidth&&(this.centerWidth=e,this.columnModel.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}keepPinnedColumnsNarrowerThanViewport(){const e=this.gridBodyCtrl.getBodyViewportElement(),t=zo(e);if(t<=50)return;let i=this.getPinnedColumnsOverflowingViewport(t-50);const s=this.gridOptionsService.getCallback("processUnpinnedColumns");!i.length||(s&&(i=s({columns:i,viewportWidth:t})),this.columnModel.setColumnsPinned(i,null,"viewportSizeFeature"))}getPinnedColumnsOverflowingViewport(e){const t=this.pinnedWidthService.getPinnedRightWidth(),i=this.pinnedWidthService.getPinnedLeftWidth(),s=t+i;if(s<e)return[];const n=[...this.columnModel.getDisplayedLeftColumns()],l=[...this.columnModel.getDisplayedRightColumns()];let u=0,g=0,C=0;const S=[];let A=s-C-e;for(;(g<n.length||u<l.length)&&A>0;){if(u<l.length){const D=l[u++];A-=D.getActualWidth(),S.push(D)}if(g<n.length&&A>0){const D=n[g++];A-=D.getActualWidth(),S.push(D)}}return S}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.getScrollFeature().checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){const e=this.gridBodyCtrl.getBodyViewportElement(),t=$n(e);if(this.bodyHeight!==t){this.bodyHeight=t;const i={type:L.EVENT_BODY_HEIGHT_CHANGED};this.eventService.dispatchEvent(i)}}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){const e={horizontalScrollShowing:this.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleService.setScrollsVisible(e)}isHorizontalScrollShowing(){return this.centerContainerCtrl.isHorizontalScrollShowing()}onHorizontalViewportChanged(){const e=this.centerContainerCtrl.getCenterWidth(),t=this.centerContainerCtrl.getViewportScrollLeft();this.columnModel.setViewportPosition(e,t)}};E([N("ctrlsService")],Nr.prototype,"ctrlsService",2);E([N("pinnedWidthService")],Nr.prototype,"pinnedWidthService",2);E([N("columnModel")],Nr.prototype,"columnModel",2);E([N("scrollVisibleService")],Nr.prototype,"scrollVisibleService",2);E([Ce],Nr.prototype,"postConstruct",1);var jh=class extends ge{constructor(e){super(),this.element=e}postConstruct(){this.addManagedListener(this.eventService,L.EVENT_LEFT_PINNED_WIDTH_CHANGED,this.onPinnedLeftWidthChanged.bind(this))}onPinnedLeftWidthChanged(){const e=this.pinnedWidthService.getPinnedLeftWidth(),t=e>0;lt(this.element,t),Ji(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedLeftWidth()}};E([N("pinnedWidthService")],jh.prototype,"pinnedWidthService",2);E([Ce],jh.prototype,"postConstruct",1);var Kh=class extends ge{constructor(e){super(),this.element=e}postConstruct(){this.addManagedListener(this.eventService,L.EVENT_RIGHT_PINNED_WIDTH_CHANGED,this.onPinnedRightWidthChanged.bind(this))}onPinnedRightWidthChanged(){const e=this.pinnedWidthService.getPinnedRightWidth(),t=e>0;lt(this.element,t),Ji(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedRightWidth()}};E([N("pinnedWidthService")],Kh.prototype,"pinnedWidthService",2);E([Ce],Kh.prototype,"postConstruct",1);var El=class extends ge{constructor(e,t){super(),this.eContainer=e,this.eViewport=t}postConstruct(){this.addManagedListener(this.eventService,L.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,this.onHeightChanged.bind(this))}onHeightChanged(){const e=this.maxDivHeightScaler.getUiContainerHeight(),t=e!=null?`${e}px`:"";this.eContainer.style.height=t,this.eViewport&&(this.eViewport.style.height=t)}};E([N("rowContainerHeightService")],El.prototype,"maxDivHeightScaler",2);E([Ce],El.prototype,"postConstruct",1);var Al=class extends ge{constructor(e){super(),this.eContainer=e}postConstruct(){if(Xe(this.rangeService))return;this.params={eElement:this.eContainer,onDragStart:this.rangeService.onDragStart.bind(this.rangeService),onDragStop:this.rangeService.onDragStop.bind(this.rangeService),onDragging:this.rangeService.onDragging.bind(this.rangeService)},this.addManagedPropertyListener("enableRangeSelection",t=>{if(t.currentValue){this.enableFeature();return}this.disableFeature()}),this.addDestroyFunc(()=>this.disableFeature()),this.gridOptionsService.get("enableRangeSelection")&&this.enableFeature()}enableFeature(){this.dragService.addDragSource(this.params)}disableFeature(){this.dragService.removeDragSource(this.params)}};E([mt("rangeService")],Al.prototype,"rangeService",2);E([N("dragService")],Al.prototype,"dragService",2);E([Ce],Al.prototype,"postConstruct",1);var Gr=class extends ge{constructor(e,t=!1){super(),this.callback=e,this.addSpacer=t}postConstruct(){const e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedListener(this.eventService,L.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED,e),this.addManagedListener(this.eventService,L.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,L.EVENT_LEFT_PINNED_WIDTH_CHANGED,e),this.addSpacer&&(this.addManagedListener(this.eventService,L.EVENT_RIGHT_PINNED_WIDTH_CHANGED,e),this.addManagedListener(this.eventService,L.EVENT_SCROLL_VISIBILITY_CHANGED,e),this.addManagedListener(this.eventService,L.EVENT_SCROLLBAR_WIDTH_CHANGED,e)),this.setWidth()}setWidth(){const{columnModel:e}=this,t=this.gridOptionsService.isDomLayout("print"),i=e.getBodyContainerWidth(),s=e.getDisplayedColumnsLeftWidth(),n=e.getDisplayedColumnsRightWidth();let l;t?l=i+s+n:(l=i,this.addSpacer&&(this.gridOptionsService.get("enableRtl")?s:n)===0&&this.scrollVisibleService.isVerticalScrollShowing()&&(l+=this.gridOptionsService.getScrollbarWidth())),this.callback(l)}};E([N("columnModel")],Gr.prototype,"columnModel",2);E([N("scrollVisibleService")],Gr.prototype,"scrollVisibleService",2);E([Ce],Gr.prototype,"postConstruct",1);function yb(e){switch(e){case"center":case"topCenter":case"stickyTopCenter":case"bottomCenter":return"center";case"left":case"topLeft":case"stickyTopLeft":case"bottomLeft":return"left";case"right":case"topRight":case"stickyTopRight":case"bottomRight":return"right";case"fullWidth":case"topFullWidth":case"stickyTopFullWidth":case"bottomFullWidth":return"fullWidth";default:throw Error("Invalid Row Container Type")}}var bb=io([["center","ag-center-cols-container"],["left","ag-pinned-left-cols-container"],["right","ag-pinned-right-cols-container"],["fullWidth","ag-full-width-container"],["topCenter","ag-floating-top-container"],["topLeft","ag-pinned-left-floating-top"],["topRight","ag-pinned-right-floating-top"],["topFullWidth","ag-floating-top-full-width-container"],["stickyTopCenter","ag-sticky-top-container"],["stickyTopLeft","ag-pinned-left-sticky-top"],["stickyTopRight","ag-pinned-right-sticky-top"],["stickyTopFullWidth","ag-sticky-top-full-width-container"],["bottomCenter","ag-floating-bottom-container"],["bottomLeft","ag-pinned-left-floating-bottom"],["bottomRight","ag-pinned-right-floating-bottom"],["bottomFullWidth","ag-floating-bottom-full-width-container"]]),wb=io([["center","ag-center-cols-viewport"],["topCenter","ag-floating-top-viewport"],["stickyTopCenter","ag-sticky-top-viewport"],["bottomCenter","ag-floating-bottom-viewport"]]),Ko=class kg extends ge{constructor(t){super(),this.visible=!0,this.EMPTY_CTRLS=[],this.name=t,this.isFullWithContainer=this.name==="topFullWidth"||this.name==="stickyTopFullWidth"||this.name==="bottomFullWidth"||this.name==="fullWidth"}static getRowContainerCssClasses(t){const i=bb.get(t),s=wb.get(t);return{container:i,viewport:s}}static getPinned(t){switch(t){case"bottomLeft":case"topLeft":case"stickyTopLeft":case"left":return"left";case"bottomRight":case"topRight":case"stickyTopRight":case"right":return"right";default:return null}}postConstruct(){this.enableRtl=this.gridOptionsService.get("enableRtl"),this.forContainers(["center"],()=>this.viewportSizeFeature=this.createManagedBean(new Nr(this)))}registerWithCtrlsService(){switch(this.name){case"center":this.ctrlsService.registerCenterRowContainerCtrl(this);break;case"left":this.ctrlsService.registerLeftRowContainerCtrl(this);break;case"right":this.ctrlsService.registerRightRowContainerCtrl(this);break;case"topCenter":this.ctrlsService.registerTopCenterRowContainerCtrl(this);break;case"topLeft":this.ctrlsService.registerTopLeftRowContainerCon(this);break;case"topRight":this.ctrlsService.registerTopRightRowContainerCtrl(this);break;case"stickyTopCenter":this.ctrlsService.registerStickyTopCenterRowContainerCtrl(this);break;case"stickyTopLeft":this.ctrlsService.registerStickyTopLeftRowContainerCon(this);break;case"stickyTopRight":this.ctrlsService.registerStickyTopRightRowContainerCtrl(this);break;case"bottomCenter":this.ctrlsService.registerBottomCenterRowContainerCtrl(this);break;case"bottomLeft":this.ctrlsService.registerBottomLeftRowContainerCtrl(this);break;case"bottomRight":this.ctrlsService.registerBottomRightRowContainerCtrl(this);break}}forContainers(t,i){t.indexOf(this.name)>=0&&i()}getContainerElement(){return this.eContainer}getViewportSizeFeature(){return this.viewportSizeFeature}setComp(t,i,s){this.comp=t,this.eContainer=i,this.eViewport=s,this.createManagedBean(new _i(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder(),this.stopHScrollOnPinnedRows();const n=["topCenter","topLeft","topRight"],l=["stickyTopCenter","stickyTopLeft","stickyTopRight"],u=["bottomCenter","bottomLeft","bottomRight"],g=["center","left","right"],C=[...n,...u,...g,...l],S=["center","left","right","fullWidth"],A=["center","topCenter","stickyTopCenter","bottomCenter"],D=["left","bottomLeft","topLeft","stickyTopLeft"],M=["right","bottomRight","topRight","stickyTopRight"];this.forContainers(D,()=>{this.pinnedWidthFeature=this.createManagedBean(new jh(this.eContainer)),this.addManagedListener(this.eventService,L.EVENT_LEFT_PINNED_WIDTH_CHANGED,()=>this.onPinnedWidthChanged())}),this.forContainers(M,()=>{this.pinnedWidthFeature=this.createManagedBean(new Kh(this.eContainer)),this.addManagedListener(this.eventService,L.EVENT_RIGHT_PINNED_WIDTH_CHANGED,()=>this.onPinnedWidthChanged())}),this.forContainers(S,()=>this.createManagedBean(new El(this.eContainer,this.name==="center"?s:void 0))),this.forContainers(C,()=>this.createManagedBean(new Al(this.eContainer))),this.forContainers(A,()=>this.createManagedBean(new Gr(W=>this.comp.setContainerWidth(`${W}px`)))),this.addListeners(),this.registerWithCtrlsService()}addListeners(){this.addManagedListener(this.eventService,L.EVENT_DISPLAYED_COLUMNS_CHANGED,()=>this.onDisplayedColumnsChanged()),this.addManagedListener(this.eventService,L.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,()=>this.onDisplayedColumnsWidthChanged()),this.addManagedListener(this.eventService,L.EVENT_DISPLAYED_ROWS_CHANGED,t=>this.onDisplayedRowsChanged(t.afterScroll)),this.onDisplayedColumnsChanged(),this.onDisplayedColumnsWidthChanged(),this.onDisplayedRowsChanged()}listenOnDomOrder(){if(["stickyTopCenter","stickyTopLeft","stickyTopRight","stickyTopFullWidth"].indexOf(this.name)>=0){this.comp.setDomOrder(!0);return}const s=()=>{const n=this.gridOptionsService.get("ensureDomOrder"),l=this.gridOptionsService.isDomLayout("print");this.comp.setDomOrder(n||l)};this.addManagedPropertyListener("domLayout",s),s()}stopHScrollOnPinnedRows(){this.forContainers(["topCenter","stickyTopCenter","bottomCenter"],()=>{const t=()=>this.eViewport.scrollLeft=0;this.addManagedListener(this.eViewport,"scroll",t)})}onDisplayedColumnsChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}onDisplayedColumnsWidthChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){const t=i=>{this.dragService.isDragging()&&i.cancelable&&i.preventDefault()};this.eContainer.addEventListener("touchmove",t,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",t))}onHorizontalViewportChanged(t=!1){const i=this.getCenterWidth(),s=this.getCenterViewportScrollLeft();this.columnModel.setViewportPosition(i,s,t)}getCenterWidth(){return zo(this.eViewport)}getCenterViewportScrollLeft(){return Sn(this.eViewport,this.enableRtl)}registerViewportResizeListener(t){const i=this.resizeObserverService.observeResize(this.eViewport,t);this.addDestroyFunc(()=>i())}isViewportInTheDOMTree(){return Ph(this.eViewport)}getViewportScrollLeft(){return Sn(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gridOptionsService.get("alwaysShowHorizontalScroll")||Dp(this.eViewport)}getViewportElement(){return this.eViewport}setContainerTranslateX(t){this.eContainer.style.transform=`translateX(${t}px)`}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(t){En(this.eViewport,t,this.enableRtl)}isContainerVisible(){return!kg.getPinned(this.name)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){const t=this.isContainerVisible();this.visible!=t&&(this.visible=t,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(t=!1){if(!this.visible){this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});return}const i=this.gridOptionsService.isDomLayout("print"),n=this.gridOptionsService.get("embedFullWidthRows")||i,l=this.getRowCtrls().filter(u=>{const g=u.isFullWidth();return this.isFullWithContainer?!n&&g:n||!g});this.comp.setRowCtrls({rowCtrls:l,useFlushSync:t})}getRowCtrls(){switch(this.name){case"topCenter":case"topLeft":case"topRight":case"topFullWidth":return this.rowRenderer.getTopRowCtrls();case"stickyTopCenter":case"stickyTopLeft":case"stickyTopRight":case"stickyTopFullWidth":return this.rowRenderer.getStickyTopRowCtrls();case"bottomCenter":case"bottomLeft":case"bottomRight":case"bottomFullWidth":return this.rowRenderer.getBottomRowCtrls();default:return this.rowRenderer.getCentreRowCtrls()}}};E([N("dragService")],Ko.prototype,"dragService",2);E([N("ctrlsService")],Ko.prototype,"ctrlsService",2);E([N("columnModel")],Ko.prototype,"columnModel",2);E([N("resizeObserverService")],Ko.prototype,"resizeObserverService",2);E([N("rowRenderer")],Ko.prototype,"rowRenderer",2);E([Ce],Ko.prototype,"postConstruct",1);var Ng=Ko,xb=`<div class="ag-root ag-unselectable" role="treegrid">
        <ag-header-root ref="gridHeader"></ag-header-root>
        <div class="ag-floating-top" ref="eTop" role="presentation">
            <ag-row-container ref="topLeftContainer" name="topLeft"></ag-row-container>
            <ag-row-container ref="topCenterContainer" name="topCenter"></ag-row-container>
            <ag-row-container ref="topRightContainer" name="topRight"></ag-row-container>
            <ag-row-container ref="topFullWidthContainer" name="topFullWidth"></ag-row-container>
        </div>
        <div class="ag-body" ref="eBody" role="presentation">
            <div class="ag-body-viewport" ref="eBodyViewport" role="presentation">
                <ag-row-container ref="leftContainer" name="left"></ag-row-container>
                <ag-row-container ref="centerContainer" name="center"></ag-row-container>
                <ag-row-container ref="rightContainer" name="right"></ag-row-container>
                <ag-row-container ref="fullWidthContainer" name="fullWidth"></ag-row-container>
            </div>
            <ag-fake-vertical-scroll></ag-fake-vertical-scroll>
        </div>
        <div class="ag-sticky-top" ref="eStickyTop" role="presentation">
            <ag-row-container ref="stickyTopLeftContainer" name="stickyTopLeft"></ag-row-container>
            <ag-row-container ref="stickyTopCenterContainer" name="stickyTopCenter"></ag-row-container>
            <ag-row-container ref="stickyTopRightContainer" name="stickyTopRight"></ag-row-container>
            <ag-row-container ref="stickyTopFullWidthContainer" name="stickyTopFullWidth"></ag-row-container>
        </div>
        <div class="ag-floating-bottom" ref="eBottom" role="presentation">
            <ag-row-container ref="bottomLeftContainer" name="bottomLeft"></ag-row-container>
            <ag-row-container ref="bottomCenterContainer" name="bottomCenter"></ag-row-container>
            <ag-row-container ref="bottomRightContainer" name="bottomRight"></ag-row-container>
            <ag-row-container ref="bottomFullWidthContainer" name="bottomFullWidth"></ag-row-container>
        </div>
        <ag-fake-horizontal-scroll></ag-fake-horizontal-scroll>
        <ag-overlay-wrapper></ag-overlay-wrapper>
    </div>`,Os=class extends Ze{constructor(){super(xb)}init(){const e=(i,s)=>{const n=`${i}px`;s.style.minHeight=n,s.style.height=n},t={setRowAnimationCssOnBodyViewport:(i,s)=>this.setRowAnimationCssOnBodyViewport(i,s),setColumnCount:i=>hp(this.getGui(),i),setRowCount:i=>dp(this.getGui(),i),setTopHeight:i=>e(i,this.eTop),setBottomHeight:i=>e(i,this.eBottom),setTopDisplay:i=>this.eTop.style.display=i,setBottomDisplay:i=>this.eBottom.style.display=i,setStickyTopHeight:i=>this.eStickyTop.style.height=i,setStickyTopTop:i=>this.eStickyTop.style.top=i,setStickyTopWidth:i=>this.eStickyTop.style.width=i,setColumnMovingCss:(i,s)=>this.addOrRemoveCssClass(i,s),updateLayoutClasses:(i,s)=>{[this.eBodyViewport.classList,this.eBody.classList].forEach(l=>{l.toggle("ag-layout-auto-height",s.autoHeight),l.toggle("ag-layout-normal",s.normal),l.toggle("ag-layout-print",s.print)}),this.addOrRemoveCssClass("ag-layout-auto-height",s.autoHeight),this.addOrRemoveCssClass("ag-layout-normal",s.normal),this.addOrRemoveCssClass("ag-layout-print",s.print)},setAlwaysVerticalScrollClass:(i,s)=>this.eBodyViewport.classList.toggle(Lg,s),registerBodyViewportResizeListener:i=>{const s=this.resizeObserverService.observeResize(this.eBodyViewport,i);this.addDestroyFunc(()=>s())},setPinnedTopBottomOverflowY:i=>this.eTop.style.overflowY=this.eBottom.style.overflowY=i,setCellSelectableCss:(i,s)=>{[this.eTop,this.eBodyViewport,this.eBottom].forEach(n=>n.classList.toggle(i,s))},setBodyViewportWidth:i=>this.eBodyViewport.style.width=i};this.ctrl=this.createManagedBean(new Pi),this.ctrl.setComp(t,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom,this.eStickyTop),(this.rangeService&&this.gridOptionsService.get("enableRangeSelection")||this.gridOptionsService.get("rowSelection")==="multiple")&&lp(this.getGui(),!0)}setRowAnimationCssOnBodyViewport(e,t){const i=this.eBodyViewport.classList;i.toggle("ag-row-animation",t),i.toggle("ag-row-no-animation",!t)}getFloatingTopBottom(){return[this.eTop,this.eBottom]}};E([N("resizeObserverService")],Os.prototype,"resizeObserverService",2);E([mt("rangeService")],Os.prototype,"rangeService",2);E([xe("eBodyViewport")],Os.prototype,"eBodyViewport",2);E([xe("eStickyTop")],Os.prototype,"eStickyTop",2);E([xe("eTop")],Os.prototype,"eTop",2);E([xe("eBottom")],Os.prototype,"eBottom",2);E([xe("gridHeader")],Os.prototype,"headerRootComp",2);E([xe("eBody")],Os.prototype,"eBody",2);E([Ce],Os.prototype,"init",1);var Ar=class extends ge{postConstruct(){this.addManagedListener(this.eventService,L.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,L.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this))}onDisplayedColumnsChanged(){this.update()}onDisplayedColumnsWidthChanged(){this.update()}update(){this.columnAnimationService.isActive()?this.columnAnimationService.executeLaterVMTurn(()=>{this.columnAnimationService.executeLaterVMTurn(()=>this.updateImpl())}):this.updateImpl()}updateImpl(){const e=this.ctrlsService.getCenterRowContainerCtrl();if(!e||this.columnAnimationService.isActive())return;const t={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.isVerticalScrollShowing()};this.setScrollsVisible(t)}setScrollsVisible(e){if(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing){this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing;const i={type:L.EVENT_SCROLL_VISIBILITY_CHANGED};this.eventService.dispatchEvent(i)}}isHorizontalScrollShowing(){return this.horizontalScrollShowing}isVerticalScrollShowing(){return this.verticalScrollShowing}};E([N("ctrlsService")],Ar.prototype,"ctrlsService",2);E([N("columnAnimationService")],Ar.prototype,"columnAnimationService",2);E([Ce],Ar.prototype,"postConstruct",1);Ar=E([Fe("scrollVisibleService")],Ar);var Vs=class extends ge{constructor(){super(...arguments),this.gridInstanceId=Vs.gridInstanceSequence.next()}stampTopLevelGridCompWithGridInstance(e){e[Vs.GRID_DOM_KEY]=this.gridInstanceId}getRenderedCellForEvent(e){return _a(this.gridOptionsService,e.target,Po.DOM_DATA_KEY_CELL_CTRL)}isEventFromThisGrid(e){return this.isElementInThisGrid(e.target)}isElementInThisGrid(e){let t=e;for(;t;){const i=t[Vs.GRID_DOM_KEY];if(ce(i))return i===this.gridInstanceId;t=t.parentElement}return!1}getCellPositionForEvent(e){const t=this.getRenderedCellForEvent(e);return t?t.getCellPosition():null}getNormalisedPosition(e){const t=this.gridOptionsService.isDomLayout("normal"),i=e;let s,n;if(i.clientX!=null||i.clientY!=null?(s=i.clientX,n=i.clientY):(s=i.x,n=i.y),t){const l=this.ctrlsService.getGridBodyCtrl(),u=l.getScrollFeature().getVScrollPosition();s+=l.getScrollFeature().getHScrollPosition().left,n+=u.top}return{x:s,y:n}}};Vs.gridInstanceSequence=new Er;Vs.GRID_DOM_KEY="__ag_grid_instance";E([N("ctrlsService")],Vs.prototype,"ctrlsService",2);Vs=E([Fe("mouseEventService")],Vs);var wi=class extends ge{constructor(){super(),this.onPageDown=xd(this.onPageDown,100),this.onPageUp=xd(this.onPageUp,100)}postConstruct(){this.ctrlsService.whenReady(e=>{this.gridBodyCon=e.gridBodyCtrl})}handlePageScrollingKey(e,t=!1){const i=e.key,s=e.altKey,n=e.ctrlKey||e.metaKey,l=!!this.rangeService&&e.shiftKey,u=this.mouseEventService.getCellPositionForEvent(e);let g=!1;switch(i){case Q.PAGE_HOME:case Q.PAGE_END:!n&&!s&&(this.onHomeOrEndKey(i),g=!0);break;case Q.LEFT:case Q.RIGHT:case Q.UP:case Q.DOWN:if(!u)return!1;n&&!s&&!l&&(this.onCtrlUpDownLeftRight(i,u),g=!0);break;case Q.PAGE_DOWN:case Q.PAGE_UP:!n&&!s&&(g=this.handlePageUpDown(i,u,t));break}return g&&e.preventDefault(),g}handlePageUpDown(e,t,i){return i&&(t=this.focusService.getFocusedCell()),t?(e===Q.PAGE_UP?this.onPageUp(t):this.onPageDown(t),!0):!1}navigateTo(e){const{scrollIndex:t,scrollType:i,scrollColumn:s,focusIndex:n,focusColumn:l}=e;if(ce(s)&&!s.isPinned()&&this.gridBodyCon.getScrollFeature().ensureColumnVisible(s),ce(t)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(t,i),e.isAsync||this.gridBodyCon.getScrollFeature().ensureIndexVisible(n),this.focusService.setFocusedCell({rowIndex:n,column:l,rowPinned:null,forceBrowserFocus:!0}),this.rangeService){const u={rowIndex:n,rowPinned:null,column:l};this.rangeService.setRangeToCell(u)}}onPageDown(e){const i=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),s=this.getViewportHeight(),n=this.paginationProxy.getPixelOffset(),l=i.top+s,u=this.paginationProxy.getRowIndexAtPixel(l+n);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,u):this.navigateToNextPage(e,u)}onPageUp(e){const i=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),s=this.paginationProxy.getPixelOffset(),n=i.top,l=this.paginationProxy.getRowIndexAtPixel(n+s);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,l,!0):this.navigateToNextPage(e,l,!0)}navigateToNextPage(e,t,i=!1){const s=this.getViewportHeight(),n=this.paginationProxy.getPageFirstRow(),l=this.paginationProxy.getPageLastRow(),u=this.paginationProxy.getPixelOffset(),g=this.paginationProxy.getRow(e.rowIndex),C=i?g?.rowHeight-s-u:s-u,S=g?.rowTop+C;let A=this.paginationProxy.getRowIndexAtPixel(S+u);if(A===e.rowIndex){const M=i?-1:1;t=A=e.rowIndex+M}let D;i?(D="bottom",A<n&&(A=n),t<n&&(t=n)):(D="top",A>l&&(A=l),t>l&&(t=l)),this.isRowTallerThanView(A)&&(t=A,D="top"),this.navigateTo({scrollIndex:t,scrollType:D,scrollColumn:null,focusIndex:A,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,t,i=!1){this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout(()=>{const s=this.getNextFocusIndexForAutoHeight(e,i);this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:s,focusColumn:e.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(e,t=!1){var i;const s=t?-1:1,n=this.getViewportHeight(),l=this.paginationProxy.getPageLastRow();let u=0,g=e.rowIndex;for(;g>=0&&g<=l;){const C=this.paginationProxy.getRow(g);if(C){const S=(i=C.rowHeight)!=null?i:0;if(u+S>n)break;u+=S}g+=s}return Math.max(0,Math.min(g,l))}getViewportHeight(){const t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),i=this.gridOptionsService.getScrollbarWidth();let s=t.bottom-t.top;return this.ctrlsService.getCenterRowContainerCtrl().isHorizontalScrollShowing()&&(s-=i),s}isRowTallerThanView(e){const t=this.paginationProxy.getRow(e);if(!t)return!1;const i=t.rowHeight;return typeof i!="number"?!1:i>this.getViewportHeight()}onCtrlUpDownLeftRight(e,t){const i=this.cellNavigationService.getNextCellToFocus(e,t,!0),{rowIndex:s,column:n}=i;this.navigateTo({scrollIndex:s,scrollType:null,scrollColumn:n,focusIndex:s,focusColumn:n})}onHomeOrEndKey(e){const t=e===Q.PAGE_HOME,i=this.columnModel.getAllDisplayedColumns(),s=t?i[0]:yt(i),n=t?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow();this.navigateTo({scrollIndex:n,scrollType:null,scrollColumn:s,focusIndex:n,focusColumn:s})}onTabKeyDown(e,t){const i=t.shiftKey;if(this.tabToNextCellCommon(e,i,t)){t.preventDefault();return}if(i){const{rowIndex:n,rowPinned:l}=e.getRowPosition();(l?n===0:n===this.paginationProxy.getPageFirstRow())&&(this.gridOptionsService.get("headerHeight")===0||this.gridOptionsService.get("suppressHeaderFocus")?this.focusService.focusNextGridCoreContainer(!0,!0):(t.preventDefault(),this.focusService.focusPreviousFromFirstCell(t)))}else e instanceof Po&&e.focusCell(!0),this.focusService.focusNextGridCoreContainer(i)&&t.preventDefault()}tabToNextCell(e,t){const i=this.focusService.getFocusedCell();if(!i)return!1;let s=this.getCellByPosition(i);return!s&&(s=this.rowRenderer.getRowByPosition(i),!s||!s.isFullWidth())?!1:this.tabToNextCellCommon(s,e,t)}tabToNextCellCommon(e,t,i){let s=e.isEditing();if(!s&&e instanceof Po){const u=e.getRowCtrl();u&&(s=u.isEditing())}let n;return s?this.gridOptionsService.get("editType")==="fullRow"?n=this.moveToNextEditingRow(e,t,i):n=this.moveToNextEditingCell(e,t,i):n=this.moveToNextCellNotEditing(e,t),n||!!this.focusService.getFocusedHeader()}moveToNextEditingCell(e,t,i=null){const s=e.getCellPosition();e.getGui().focus(),e.stopEditing();const n=this.findNextCellToFocusOn(s,t,!0);return n==null?!1:(n.startEditing(null,!0,i),n.focusCell(!1),!0)}moveToNextEditingRow(e,t,i=null){const s=e.getCellPosition(),n=this.findNextCellToFocusOn(s,t,!0);if(n==null)return!1;const l=n.getCellPosition(),u=this.isCellEditable(s),g=this.isCellEditable(l),C=l&&s.rowIndex===l.rowIndex&&s.rowPinned===l.rowPinned;return u&&e.setFocusOutOnEditor(),C||(e.getRowCtrl().stopEditing(),n.getRowCtrl().startRowEditing(void 0,void 0,i)),g?(n.setFocusInOnEditor(),n.focusCell()):n.focusCell(!0),!0}moveToNextCellNotEditing(e,t){const i=this.columnModel.getAllDisplayedColumns();let s;e instanceof Fo?s=Vt(We({},e.getRowPosition()),{column:t?i[0]:yt(i)}):s=e.getCellPosition();const n=this.findNextCellToFocusOn(s,t,!1);if(n instanceof Po)n.focusCell(!0);else if(n)return this.tryToFocusFullWidthRow(n.getRowPosition(),t);return ce(n)}findNextCellToFocusOn(e,t,i){let s=e;for(;;){e!==s&&(e=s),t||(s=this.getLastCellOfColSpan(s)),s=this.cellNavigationService.getNextTabbedCell(s,t);const n=this.gridOptionsService.getCallback("tabToNextCell");if(ce(n)){const C=n({backwards:t,editing:i,previousCellPosition:e,nextCellPosition:s||null});ce(C)?(C.floating&&(Ue("tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?"),C.rowPinned=C.floating),s={rowIndex:C.rowIndex,column:C.column,rowPinned:C.rowPinned}):s=null}if(!s)return null;if(s.rowIndex<0){const g=this.headerNavigationService.getHeaderRowCount();return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:g+s.rowIndex,column:s.column},fromCell:!0}),null}const l=this.gridOptionsService.get("editType")==="fullRow";if(i&&!l&&!this.isCellEditable(s))continue;this.ensureCellVisible(s);const u=this.getCellByPosition(s);if(!u){const g=this.rowRenderer.getRowByPosition(s);if(!g||!g.isFullWidth()||i)continue;return g}if(!u.isSuppressNavigable())return this.rangeService&&this.rangeService.setRangeToCell(s),u}}isCellEditable(e){const t=this.lookupRowNodeForCell(e);return t?e.column.isCellEditable(t):!1}getCellByPosition(e){const t=this.rowRenderer.getRowByPosition(e);return t?t.getCellCtrl(e.column):null}lookupRowNodeForCell(e){return e.rowPinned==="top"?this.pinnedRowModel.getPinnedTopRow(e.rowIndex):e.rowPinned==="bottom"?this.pinnedRowModel.getPinnedBottomRow(e.rowIndex):this.paginationProxy.getRow(e.rowIndex)}navigateToNextCell(e,t,i,s){let n=i,l=!1;for(;n&&(n===i||!this.isValidNavigateCell(n));)this.gridOptionsService.get("enableRtl")?t===Q.LEFT&&(n=this.getLastCellOfColSpan(n)):t===Q.RIGHT&&(n=this.getLastCellOfColSpan(n)),n=this.cellNavigationService.getNextCellToFocus(t,n),l=Xe(n);if(l&&e&&e.key===Q.UP&&(n={rowIndex:-1,rowPinned:null,column:i.column}),s){const g=this.gridOptionsService.getCallback("navigateToNextCell");if(ce(g)){const S=g({key:t,previousCellPosition:i,nextCellPosition:n||null,event:e});ce(S)?(S.floating&&(Ue("tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?"),S.rowPinned=S.floating),n={rowPinned:S.rowPinned,rowIndex:S.rowIndex,column:S.column}):n=null}}if(!n)return;if(n.rowIndex<0){const g=this.headerNavigationService.getHeaderRowCount();this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:g+n.rowIndex,column:i.column},event:e||void 0,fromCell:!0});return}const u=this.getNormalisedPosition(n);u?this.focusPosition(u):this.tryToFocusFullWidthRow(n)}getNormalisedPosition(e){this.ensureCellVisible(e);const t=this.getCellByPosition(e);return t?(e=t.getCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e,t=!1){const i=this.columnModel.getAllDisplayedColumns(),s=this.rowRenderer.getRowByPosition(e);if(!s||!s.isFullWidth())return!1;const n=this.focusService.getFocusedCell(),l={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?yt(i):i[0])};this.focusPosition(l);const u=n!=null?this.rowPositionUtils.before(l,n):!1,g={type:L.EVENT_FULL_WIDTH_ROW_FOCUSED,rowIndex:l.rowIndex,rowPinned:l.rowPinned,column:l.column,isFullWidthCell:!0,floating:l.rowPinned,fromBelow:u};return this.eventService.dispatchEvent(g),!0}focusPosition(e){this.focusService.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),this.rangeService&&this.rangeService.setRangeToCell(e)}isValidNavigateCell(e){return!!this.rowPositionUtils.getRowNode(e)}getLastCellOfColSpan(e){const t=this.getCellByPosition(e);if(!t)return e;const i=t.getColSpanningList();return i.length===1?e:{rowIndex:e.rowIndex,column:yt(i),rowPinned:e.rowPinned}}ensureCellVisible(e){const t=this.gridOptionsService.isGroupRowsSticky(),i=this.rowModel.getRow(e.rowIndex);!(t&&i?.sticky)&&Xe(e.rowPinned)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(e.rowIndex),e.column.isPinned()||this.gridBodyCon.getScrollFeature().ensureColumnVisible(e.column)}};E([N("mouseEventService")],wi.prototype,"mouseEventService",2);E([N("paginationProxy")],wi.prototype,"paginationProxy",2);E([N("focusService")],wi.prototype,"focusService",2);E([mt("rangeService")],wi.prototype,"rangeService",2);E([N("columnModel")],wi.prototype,"columnModel",2);E([N("rowModel")],wi.prototype,"rowModel",2);E([N("ctrlsService")],wi.prototype,"ctrlsService",2);E([N("rowRenderer")],wi.prototype,"rowRenderer",2);E([N("headerNavigationService")],wi.prototype,"headerNavigationService",2);E([N("rowPositionUtils")],wi.prototype,"rowPositionUtils",2);E([N("cellNavigationService")],wi.prototype,"cellNavigationService",2);E([N("pinnedRowModel")],wi.prototype,"pinnedRowModel",2);E([Ce],wi.prototype,"postConstruct",1);wi=E([Fe("navigationService")],wi);var qh=class Gg extends Xo{constructor(t){super('<div class="ag-popup-editor" tabindex="-1"/>'),this.params=t}postConstruct(){this.gridOptionsService.setDomData(this.getGui(),Gg.DOM_KEY_POPUP_EDITOR_WRAPPER,!0),this.addKeyDownListener()}addKeyDownListener(){const t=this.getGui(),i=this.params,s=n=>{Wa(this.gridOptionsService,n,i.node,i.column,!0)||i.onKeyDown(n)};this.addManagedListener(t,"keydown",s)}};qh.DOM_KEY_POPUP_EDITOR_WRAPPER="popupEditorWrapper";E([Ce],qh.prototype,"postConstruct",1);var Sb=qh,Eb=class extends Ze{constructor(e,t,i,s,n){super(),this.rendererVersion=0,this.editorVersion=0,this.beans=e,this.column=t.getColumn(),this.rowNode=t.getRowNode(),this.rowCtrl=t.getRowCtrl(),this.eRow=s,this.cellCtrl=t;const l=document.createElement("div");l.setAttribute("comp-id",`${this.getCompId()}`),this.setTemplateFromElement(l);const u=this.getGui();this.forceWrapper=t.isForceWrapper(),this.refreshWrapper(!1);const g=(A,D)=>{D!=null&&D!=""?u.setAttribute(A,D):u.removeAttribute(A)};jt(u,t.getCellAriaRole()),g("col-id",t.getColumnIdSanitised());const C=t.getTabIndex();C!==void 0&&g("tabindex",C.toString());const S={addOrRemoveCssClass:(A,D)=>this.addOrRemoveCssClass(A,D),setUserStyles:A=>Mh(u,A),getFocusableElement:()=>this.getFocusableElement(),setIncludeSelection:A=>this.includeSelection=A,setIncludeRowDrag:A=>this.includeRowDrag=A,setIncludeDndSource:A=>this.includeDndSource=A,setRenderDetails:(A,D,M)=>this.setRenderDetails(A,D,M),setEditDetails:(A,D,M)=>this.setEditDetails(A,D,M),getCellEditor:()=>this.cellEditor||null,getCellRenderer:()=>this.cellRenderer||null,getParentOfValue:()=>this.getParentOfValue()};t.setComp(S,this.getGui(),this.eCellWrapper,i,n)}getParentOfValue(){return this.eCellValue?this.eCellValue:this.eCellWrapper?this.eCellWrapper:this.getGui()}setRenderDetails(e,t,i){if(this.cellEditor&&!this.cellEditorPopupWrapper)return;this.firstRender=this.firstRender==null;const n=this.refreshWrapper(!1);this.refreshEditStyles(!1),e?!(i||n)&&this.refreshCellRenderer(e)||(this.destroyRenderer(),this.createCellRendererInstance(e)):(this.destroyRenderer(),this.insertValueWithoutCellRenderer(t))}setEditDetails(e,t,i){e?this.createCellEditorInstance(e,t,i):this.destroyEditor()}removeControls(){this.checkboxSelectionComp=this.beans.context.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=this.beans.context.destroyBean(this.dndSourceComp),this.rowDraggingComp=this.beans.context.destroyBean(this.rowDraggingComp)}refreshWrapper(e){const t=this.includeRowDrag||this.includeDndSource||this.includeSelection,i=t||this.forceWrapper,s=i&&this.eCellWrapper==null;if(s){const S=document.createElement("div");S.setAttribute("role","presentation"),S.setAttribute("class","ag-cell-wrapper"),this.eCellWrapper=S,this.getGui().appendChild(this.eCellWrapper)}const n=!i&&this.eCellWrapper!=null;n&&(hs(this.eCellWrapper),this.eCellWrapper=void 0),this.addOrRemoveCssClass("ag-cell-value",!i);const l=!e&&i,u=l&&this.eCellValue==null;if(u){const S=document.createElement("span");S.setAttribute("role","presentation"),S.setAttribute("class","ag-cell-value"),this.eCellValue=S,this.eCellWrapper.appendChild(this.eCellValue)}const g=!l&&this.eCellValue!=null;g&&(hs(this.eCellValue),this.eCellValue=void 0);const C=s||n||u||g;return C&&this.removeControls(),e||t&&this.addControls(),C}addControls(){this.includeRowDrag&&this.rowDraggingComp==null&&(this.rowDraggingComp=this.cellCtrl.createRowDragComp(),this.rowDraggingComp&&this.eCellWrapper.insertBefore(this.rowDraggingComp.getGui(),this.eCellValue)),this.includeDndSource&&this.dndSourceComp==null&&(this.dndSourceComp=this.cellCtrl.createDndSource(),this.eCellWrapper.insertBefore(this.dndSourceComp.getGui(),this.eCellValue)),this.includeSelection&&this.checkboxSelectionComp==null&&(this.checkboxSelectionComp=this.cellCtrl.createSelectionCheckbox(),this.eCellWrapper.insertBefore(this.checkboxSelectionComp.getGui(),this.eCellValue))}createCellEditorInstance(e,t,i){const s=this.editorVersion,n=e.newAgStackInstance();if(!n)return;const{params:l}=e;n.then(g=>this.afterCellEditorCreated(s,g,l,t,i)),Xe(this.cellEditor)&&l.cellStartedEdit&&this.cellCtrl.focusCell(!0)}insertValueWithoutCellRenderer(e){const t=this.getParentOfValue();Jt(t);const i=e!=null?ai(e,!0):null;i!=null&&(t.textContent=i)}destroyEditorAndRenderer(){this.destroyRenderer(),this.destroyEditor()}destroyRenderer(){const{context:e}=this.beans;this.cellRenderer=e.destroyBean(this.cellRenderer),hs(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++}destroyEditor(){const{context:e}=this.beans;this.hideEditorPopup&&this.hideEditorPopup(),this.hideEditorPopup=void 0,this.cellEditor=e.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=e.destroyBean(this.cellEditorPopupWrapper),hs(this.cellEditorGui),this.cellEditorGui=null,this.editorVersion++}refreshCellRenderer(e){if(this.cellRenderer==null||this.cellRenderer.refresh==null||this.cellRendererClass!==e.componentClass)return!1;const t=this.cellRenderer.refresh(e.params);return t===!0||t===void 0}createCellRendererInstance(e){const i=!this.beans.gridOptionsService.get("suppressAnimationFrame"),s=this.rendererVersion,{componentClass:n}=e,l=()=>{if(this.rendererVersion!==s||!this.isAlive())return;const g=e.newAgStackInstance(),C=this.afterCellRendererCreated.bind(this,s,n);g&&g.then(C)};i&&this.firstRender?this.beans.animationFrameService.createTask(l,this.rowNode.rowIndex,"createTasksP2"):l()}getCtrl(){return this.cellCtrl}getRowCtrl(){return this.rowCtrl}getCellRenderer(){return this.cellRenderer}getCellEditor(){return this.cellEditor}afterCellRendererCreated(e,t,i){if(!this.isAlive()||e!==this.rendererVersion){this.beans.context.destroyBean(i);return}if(this.cellRenderer=i,this.cellRendererClass=t,this.cellRendererGui=this.cellRenderer.getGui(),this.cellRendererGui!=null){const n=this.getParentOfValue();Jt(n),n.appendChild(this.cellRendererGui)}}afterCellEditorCreated(e,t,i,s,n){if(e!==this.editorVersion){this.beans.context.destroyBean(t);return}if(t.isCancelBeforeStart&&t.isCancelBeforeStart()){this.beans.context.destroyBean(t),this.cellCtrl.stopEditing(!0);return}if(!t.getGui){console.warn(`AG Grid: cellEditor for column ${this.column.getId()} is missing getGui() method`),this.beans.context.destroyBean(t);return}this.cellEditor=t,this.cellEditorGui=t.getGui();const g=s||t.isPopup!==void 0&&t.isPopup();g?this.addPopupCellEditor(i,n):this.addInCellEditor(),this.refreshEditStyles(!0,g),t.afterGuiAttached&&t.afterGuiAttached()}refreshEditStyles(e,t){var i;this.addOrRemoveCssClass("ag-cell-inline-editing",e&&!t),this.addOrRemoveCssClass("ag-cell-popup-editing",e&&!!t),this.addOrRemoveCssClass("ag-cell-not-inline-editing",!e||!!t),(i=this.rowCtrl)==null||i.setInlineEditingCss(e)}addInCellEditor(){const e=this.getGui(),t=this.beans.gridOptionsService.getDocument();e.contains(t.activeElement)&&e.focus(),this.destroyRenderer(),this.refreshWrapper(!0),this.clearParentOfValue(),this.cellEditorGui&&this.getParentOfValue().appendChild(this.cellEditorGui)}addPopupCellEditor(e,t){this.beans.gridOptionsService.get("editType")==="fullRow"&&console.warn("AG Grid: popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.");const i=this.cellEditor;this.cellEditorPopupWrapper=this.beans.context.createBean(new Sb(e));const s=this.cellEditorPopupWrapper.getGui();this.cellEditorGui&&s.appendChild(this.cellEditorGui);const n=this.beans.popupService,l=this.beans.gridOptionsService.get("stopEditingWhenCellsLoseFocus"),u=t??(i.getPopupPosition?i.getPopupPosition():"over"),g=this.beans.gridOptionsService.get("enableRtl"),C={ePopup:s,column:this.column,rowNode:this.rowNode,type:"popupCellEditor",eventSource:this.getGui(),position:u,alignSide:g?"right":"left",keepWithinBounds:!0},S=n.positionPopupByComponent.bind(n,C),A=this.beans.localeService.getLocaleTextFunc(),D=n.addPopup({modal:l,eChild:s,closeOnEsc:!0,closedCallback:()=>{this.cellCtrl.onPopupEditorClosed()},anchorToElement:this.getGui(),positionCallback:S,ariaLabel:A("ariaLabelCellEditor","Cell Editor")});D&&(this.hideEditorPopup=D.hideFunc)}detach(){this.eRow.removeChild(this.getGui())}destroy(){this.cellCtrl.stopEditing(),this.destroyEditorAndRenderer(),this.removeControls(),super.destroy()}clearParentOfValue(){const e=this.getGui(),t=this.beans.gridOptionsService.getDocument();e.contains(t.activeElement)&&xh()&&e.focus({preventScroll:!0}),Jt(this.getParentOfValue())}},Ab=class extends Ze{constructor(e,t,i){super(),this.cellComps={},this.beans=t,this.rowCtrl=e;const s=document.createElement("div");s.setAttribute("comp-id",`${this.getCompId()}`),s.setAttribute("style",this.getInitialStyle(i)),this.setTemplateFromElement(s);const n=this.getGui(),l=n.style;this.domOrder=this.rowCtrl.getDomOrder(),jt(n,"row");const u=this.rowCtrl.getTabIndex();u!=null&&n.setAttribute("tabindex",u.toString());const g={setDomOrder:C=>this.domOrder=C,setCellCtrls:C=>this.setCellCtrls(C),showFullWidth:C=>this.showFullWidth(C),getFullWidthCellRenderer:()=>this.getFullWidthCellRenderer(),addOrRemoveCssClass:(C,S)=>this.addOrRemoveCssClass(C,S),setUserStyles:C=>Mh(n,C),setTop:C=>l.top=C,setTransform:C=>l.transform=C,setRowIndex:C=>n.setAttribute("row-index",C),setRowId:C=>n.setAttribute("row-id",C),setRowBusinessKey:C=>n.setAttribute("row-business-key",C),refreshFullWidth:C=>this.refreshFullWidth(C)};e.setComp(g,this.getGui(),i),this.addDestroyFunc(()=>{e.unsetComp(i)})}getInitialStyle(e){const t=this.rowCtrl.getInitialTransform(e);return t?`transform: ${t}`:`top: ${this.rowCtrl.getInitialRowTop(e)}`}showFullWidth(e){const t=s=>{if(this.isAlive()){const n=s.getGui();this.getGui().appendChild(n),this.rowCtrl.setupDetailRowAutoHeight(n),this.setFullWidthRowComp(s)}else this.beans.context.destroyBean(s)},i=e.newAgStackInstance();!i||i.then(t)}setCellCtrls(e){const t=Object.assign({},this.cellComps);e.forEach(s=>{const n=s.getInstanceId();this.cellComps[n]==null?this.newCellComp(s):t[n]=null});const i=no(t).filter(s=>s!=null);this.destroyCells(i),this.ensureDomOrder(e)}ensureDomOrder(e){if(!this.domOrder)return;const t=[];e.forEach(i=>{const s=this.cellComps[i.getInstanceId()];s&&t.push(s.getGui())}),Lh(this.getGui(),t)}newCellComp(e){const t=new Eb(this.beans,e,this.rowCtrl.isPrintLayout(),this.getGui(),this.rowCtrl.isEditing());this.cellComps[e.getInstanceId()]=t,this.getGui().appendChild(t.getGui())}destroy(){super.destroy(),this.destroyAllCells()}destroyAllCells(){const e=no(this.cellComps).filter(t=>t!=null);this.destroyCells(e)}setFullWidthRowComp(e){this.fullWidthCellRenderer&&console.error("AG Grid - should not be setting fullWidthRowComponent twice"),this.fullWidthCellRenderer=e,this.addDestroyFunc(()=>{this.fullWidthCellRenderer=this.beans.context.destroyBean(this.fullWidthCellRenderer)})}getFullWidthCellRenderer(){return this.fullWidthCellRenderer}destroyCells(e){e.forEach(t=>{if(!t)return;const i=t.getCtrl().getInstanceId();this.cellComps[i]===t&&(t.detach(),t.destroy(),this.cellComps[i]=null)})}refreshFullWidth(e){const{fullWidthCellRenderer:t}=this;if(!t||!t.refresh)return!1;const i=e();return t.refresh(i)}};function Rb(){const e=Ze.elementGettingCreated.getAttribute("name"),t=Ng.getRowContainerCssClasses(e);let i;return e==="center"||e==="topCenter"||e==="stickyTopCenter"||e==="bottomCenter"?i=`<div class="${t.viewport}" ref="eViewport" role="presentation">
                <div class="${t.container}" ref="eContainer"></div>
            </div>`:i=`<div class="${t.container}" ref="eContainer"></div>`,i}var _r=class extends Ze{constructor(){super(Rb()),this.rowComps={},this.name=Ze.elementGettingCreated.getAttribute("name"),this.type=yb(this.name)}postConstruct(){const e={setViewportHeight:i=>this.eViewport.style.height=i,setRowCtrls:({rowCtrls:i})=>this.setRowCtrls(i),setDomOrder:i=>{this.domOrder=i},setContainerWidth:i=>this.eContainer.style.width=i};this.createManagedBean(new Ng(this.name)).setComp(e,this.eContainer,this.eViewport)}preDestroy(){this.setRowCtrls([])}setRowCtrls(e){const t=We({},this.rowComps);this.rowComps={},this.lastPlacedElement=null;const i=s=>{const n=s.getInstanceId(),l=t[n];if(l)this.rowComps[n]=l,delete t[n],this.ensureDomOrder(l.getGui());else{if(!s.getRowNode().displayed)return;const u=new Ab(s,this.beans,this.type);this.rowComps[n]=u,this.appendRow(u.getGui())}};e.forEach(i),no(t).forEach(s=>{this.eContainer.removeChild(s.getGui()),s.destroy()}),jt(this.eContainer,"rowgroup")}appendRow(e){this.domOrder?Rp(this.eContainer,e,this.lastPlacedElement):this.eContainer.appendChild(e),this.lastPlacedElement=e}ensureDomOrder(e){this.domOrder&&(Fh(this.eContainer,e,this.lastPlacedElement),this.lastPlacedElement=e)}};E([N("beans")],_r.prototype,"beans",2);E([xe("eViewport")],_r.prototype,"eViewport",2);E([xe("eContainer")],_r.prototype,"eContainer",2);E([Ce],_r.prototype,"postConstruct",1);E([Di],_r.prototype,"preDestroy",1);var Qh=class{constructor(e){this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=e}onDragEnter(e){if(this.clearColumnsList(),this.gridOptionsService.get("functionsReadOnly"))return;const t=e.dragItem.columns;!t||t.forEach(i=>{!i.isPrimary()||i.isAnyFunctionActive()||(i.isAllowValue()?this.columnsToAggregate.push(i):i.isAllowRowGroup()?this.columnsToGroup.push(i):i.isAllowPivot()&&this.columnsToPivot.push(i))})}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?Je.ICON_PINNED:Je.ICON_MOVE:null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){this.columnsToAggregate.length>0&&this.columnModel.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.columnModel.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.columnModel.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")}};E([N("columnModel")],Qh.prototype,"columnModel",2);E([N("gridOptionsService")],Qh.prototype,"gridOptionsService",2);var Lo=class{static attemptMoveColumns(e){const{isFromHeader:t,hDirection:i,xPosition:s,fromEnter:n,fakeEvent:l,pinned:u,gridOptionsService:g,columnModel:C}=e,S=i===0,A=i===1;let{allMovingColumns:D}=e;if(t){let se=[];D.forEach($=>{var Y;let oe=null,Oe=$.getParent();for(;Oe!=null&&Oe.getDisplayedLeafColumns().length===1;)oe=Oe,Oe=Oe.getParent();oe!=null?(!!((Y=oe.getColGroupDef())!=null&&Y.marryChildren)?oe.getProvidedColumnGroup().getLeafColumns():oe.getLeafColumns()).forEach(Pe=>{se.includes(Pe)||se.push(Pe)}):se.includes($)||se.push($)}),D=se}const M=D.slice();C.sortColumnsLikeGridColumns(M);const W=this.calculateValidMoves({movingCols:M,draggingRight:A,xPosition:s,pinned:u,gridOptionsService:g,columnModel:C}),z=this.calculateOldIndex(M,C);if(W.length===0)return;const U=W[0];let X=z!==null&&!n;if(t&&(X=z!==null),X&&!l&&(S&&U>=z||A&&U<=z))return;const q=C.getAllDisplayedColumns();let _=[],J=null;for(let se=0;se<W.length;se++){const $=W[se],Y=C.getProposedColumnOrder(M,$);if(!C.doesOrderPassRules(Y))continue;const oe=Y.filter(re=>q.includes(re));if(J===null)J=oe;else if(!bs(oe,J))break;const Oe=this.groupFragCount(Y);_.push({move:$,fragCount:Oe})}if(_.length!==0)return _.sort((se,$)=>se.fragCount-$.fragCount),this.moveColumns(D,_[0].move,"uiColumnMoved",!1,C)}static moveColumns(e,t,i,s,n){return n.moveColumns(e,t,i,s),s?null:{columns:e,toIndex:t}}static calculateOldIndex(e,t){const i=t.getAllGridColumns(),s=Vu(e.map(C=>i.indexOf(C))),n=s[0];return yt(s)-n!==s.length-1?null:n}static groupFragCount(e){function t(s){let n=[],l=s.getOriginalParent();for(;l!=null;)n.push(l),l=l.getOriginalParent();return n}let i=0;for(let s=0;s<e.length-1;s++){let n=t(e[s]),l=t(e[s+1]);[n,l]=n.length>l.length?[n,l]:[l,n],n.forEach(u=>{l.indexOf(u)===-1&&i++})}return i}static calculateValidMoves(e){const{movingCols:t,draggingRight:i,xPosition:s,pinned:n,gridOptionsService:l,columnModel:u}=e;if(l.get("suppressMovableColumns")||t.some(_=>_.getColDef().suppressMovable))return[];const C=u.getDisplayedColumns(n),S=u.getAllGridColumns(),A=C.filter(_=>zi(t,_)),D=C.filter(_=>!zi(t,_)),M=S.filter(_=>!zi(t,_));let W=0,z=s;if(i){let _=0;A.forEach(J=>_+=J.getActualWidth()),z-=_}if(z>0){for(let _=0;_<D.length&&(z-=D[_].getActualWidth(),!(z<0));_++)W++;i&&W++}let U;if(W>0){const _=D[W-1];U=M.indexOf(_)+1}else U=M.indexOf(D[0]),U===-1&&(U=0);const X=[U],q=(_,J)=>_-J;if(i){let _=U+1;const J=S.length-1;for(;_<=J;)X.push(_),_++;X.sort(q)}else{let _=U;const J=S.length-1;let se=S[_];for(;_<=J&&C.indexOf(se)<0;)_++,X.push(_),se=S[_];_=U-1;const $=0;for(;_>=$;)X.push(_),_--;X.sort(q).reverse()}return X}static normaliseX(e,t,i,s,n){const l=n.getHeaderRowContainerCtrl(t).getViewport();return i&&(e-=l.getBoundingClientRect().left),s.get("enableRtl")&&(e=l.clientWidth-e),t==null&&(e+=n.getCenterRowContainerCtrl().getCenterViewportScrollLeft()),e}},Vr=class{constructor(e,t){this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.pinned=e,this.eContainer=t,this.centerContainer=!ce(e)}init(){this.ctrlsService.whenReady(()=>{this.gridBodyCon=this.ctrlsService.getGridBodyCtrl()})}getIconName(){return this.pinned?Je.ICON_PINNED:Je.ICON_MOVE}onDragEnter(e){const t=e.dragItem.columns;if(e.dragSource.type===0)this.setColumnsVisible(t,!0,"uiColumnDragged");else{const s=e.dragItem.visibleState,n=(t||[]).filter(l=>s[l.getId()]);this.setColumnsVisible(n,!0,"uiColumnDragged")}this.setColumnsPinned(t,this.pinned,"uiColumnDragged"),this.onDragging(e,!0,!0)}onDragLeave(){this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,t,i){if(e){const s=e.filter(n=>!n.getColDef().lockVisible);this.columnModel.setColumnsVisible(s,t,i)}}setColumnsPinned(e,t,i){if(e){const s=e.filter(n=>!n.getColDef().lockPinned);this.columnModel.setColumnsPinned(s,t,i)}}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}checkCenterForScrolling(e){if(this.centerContainer){const t=this.ctrlsService.getCenterRowContainerCtrl().getCenterViewportScrollLeft(),i=t+this.ctrlsService.getCenterRowContainerCtrl().getCenterWidth();this.gridOptionsService.get("enableRtl")?(this.needToMoveRight=e<t+50,this.needToMoveLeft=e>i-50):(this.needToMoveLeft=e<t+50,this.needToMoveRight=e>i-50),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}}onDragging(e=this.lastDraggingEvent,t=!1,i=!1,s=!1){var n;if(s){if(this.lastMovedInfo){const{columns:A,toIndex:D}=this.lastMovedInfo;Lo.moveColumns(A,D,"uiColumnMoved",!0,this.columnModel)}return}if(this.lastDraggingEvent=e,Xe(e.hDirection))return;const l=Lo.normaliseX(e.x,this.pinned,!1,this.gridOptionsService,this.ctrlsService);t||this.checkCenterForScrolling(l);const u=this.normaliseDirection(e.hDirection),g=e.dragSource.type,C=((n=e.dragSource.getDragItem().columns)==null?void 0:n.filter(A=>A.getColDef().lockPinned?A.getPinned()==this.pinned:!0))||[],S=Lo.attemptMoveColumns({allMovingColumns:C,isFromHeader:g===1,hDirection:u,xPosition:l,pinned:this.pinned,fromEnter:t,fakeEvent:i,gridOptionsService:this.gridOptionsService,columnModel:this.columnModel});S&&(this.lastMovedInfo=S)}normaliseDirection(e){if(this.gridOptionsService.get("enableRtl"))switch(e){case 0:return 1;case 1:return 0;default:console.error(`AG Grid: Unknown direction ${e}`)}else return e}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),100),this.needToMoveLeft?this.dragAndDropService.setGhostIcon(Je.ICON_LEFT,!0):this.dragAndDropService.setGhostIcon(Je.ICON_RIGHT,!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.dragAndDropService.setGhostIcon(Je.ICON_MOVE))}moveInterval(){let e;this.intervalCount++,e=10+this.intervalCount*5,e>100&&(e=100);let t=null;const i=this.gridBodyCon.getScrollFeature();if(this.needToMoveLeft?t=i.scrollHorizontally(-e):this.needToMoveRight&&(t=i.scrollHorizontally(e)),t!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;const n=this.lastDraggingEvent.dragItem.columns.filter(l=>!l.getColDef().lockPinned);if(n.length>0&&(this.dragAndDropService.setGhostIcon(Je.ICON_PINNED),this.failedMoveAttempts>7)){const l=this.needToMoveLeft?"left":"right";this.setColumnsPinned(n,l,"uiColumnDragged"),this.dragAndDropService.nudge()}}}};E([N("columnModel")],Vr.prototype,"columnModel",2);E([N("dragAndDropService")],Vr.prototype,"dragAndDropService",2);E([N("gridOptionsService")],Vr.prototype,"gridOptionsService",2);E([N("ctrlsService")],Vr.prototype,"ctrlsService",2);E([Ce],Vr.prototype,"init",1);var Hr=class extends ge{constructor(e,t){super(),this.pinned=e,this.eContainer=t}postConstruct(){this.ctrlsService.whenReady(e=>{switch(this.pinned){case"left":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.leftRowContainerCtrl.getContainerElement()],[e.bottomLeftRowContainerCtrl.getContainerElement()],[e.topLeftRowContainerCtrl.getContainerElement()]];break;case"right":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.rightRowContainerCtrl.getContainerElement()],[e.bottomRightRowContainerCtrl.getContainerElement()],[e.topRightRowContainerCtrl.getContainerElement()]];break;default:this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.centerRowContainerCtrl.getViewportElement()],[e.bottomCenterRowContainerCtrl.getViewportElement()],[e.topCenterRowContainerCtrl.getViewportElement()]];break}})}isInterestedIn(e){return e===1||e===0&&this.gridOptionsService.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}init(){this.moveColumnFeature=this.createManagedBean(new Vr(this.pinned,this.eContainer)),this.bodyDropPivotTarget=this.createManagedBean(new Qh(this.pinned)),this.dragAndDropService.addDropTarget(this)}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.columnModel.isPivotMode()&&e.dragSource.type===0}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}};E([N("dragAndDropService")],Hr.prototype,"dragAndDropService",2);E([N("columnModel")],Hr.prototype,"columnModel",2);E([N("ctrlsService")],Hr.prototype,"ctrlsService",2);E([Ce],Hr.prototype,"postConstruct",1);E([Ce],Hr.prototype,"init",1);var Br=class _g extends $h{constructor(t){super(_g.TEMPLATE,t),this.headerCompVersion=0,this.column=t.getColumnGroupChild(),this.pinned=t.getPinned()}postConstruct(){const t=this.getGui();((l,u)=>{u!=null&&u!=""?t.setAttribute(l,u):t.removeAttribute(l)})("col-id",this.column.getColId());const s={setWidth:l=>t.style.width=l,addOrRemoveCssClass:(l,u)=>this.addOrRemoveCssClass(l,u),setAriaSort:l=>l?up(t,l):pp(t),setUserCompDetails:l=>this.setUserCompDetails(l),getUserCompInstance:()=>this.headerComp};this.ctrl.setComp(s,this.getGui(),this.eResize,this.eHeaderCompWrapper);const n=this.ctrl.getSelectAllGui();this.eResize.insertAdjacentElement("afterend",n)}destroyHeaderComp(){this.headerComp&&(this.eHeaderCompWrapper.removeChild(this.headerCompGui),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)}setUserCompDetails(t){this.headerCompVersion++;const i=this.headerCompVersion;t.newAgStackInstance().then(s=>this.afterCompCreated(i,s))}afterCompCreated(t,i){if(t!=this.headerCompVersion||!this.isAlive()){this.destroyBean(i);return}this.destroyHeaderComp(),this.headerComp=i,this.headerCompGui=i.getGui(),this.eHeaderCompWrapper.appendChild(this.headerCompGui),this.ctrl.setDragSource(this.getGui())}};Br.TEMPLATE=`<div class="ag-header-cell" role="columnheader">
            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
            <div ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>
        </div>`;E([xe("eResize")],Br.prototype,"eResize",2);E([xe("eHeaderCompWrapper")],Br.prototype,"eHeaderCompWrapper",2);E([Ce],Br.prototype,"postConstruct",1);E([Di],Br.prototype,"destroyHeaderComp",1);var Db=Br,Rl=class Vg extends $h{constructor(t){super(Vg.TEMPLATE,t)}postConstruct(){const t=this.getGui(),i=(n,l)=>l!=null?t.setAttribute(n,l):t.removeAttribute(n);t.setAttribute("col-id",this.ctrl.getColId());const s={addOrRemoveCssClass:(n,l)=>this.addOrRemoveCssClass(n,l),setResizableDisplayed:n=>lt(this.eResize,n),setWidth:n=>t.style.width=n,setAriaExpanded:n=>i("aria-expanded",n),setUserCompDetails:n=>this.setUserCompDetails(n),getUserCompInstance:()=>this.headerGroupComp};this.ctrl.setComp(s,t,this.eResize)}setUserCompDetails(t){t.newAgStackInstance().then(i=>this.afterHeaderCompCreated(i))}afterHeaderCompCreated(t){const i=()=>this.destroyBean(t);if(!this.isAlive()){i();return}const s=this.getGui(),n=t.getGui();s.appendChild(n),this.addDestroyFunc(i),this.headerGroupComp=t,this.ctrl.setDragSource(s)}};Rl.TEMPLATE=`<div class="ag-header-group-cell" role="columnheader">
            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
        </div>`;E([xe("eResize")],Rl.prototype,"eResize",2);E([Ce],Rl.prototype,"postConstruct",1);var Tb=Rl,Zh=class extends Ze{constructor(e){super(),this.headerComps={},this.ctrl=e,this.setTemplate(`<div class="${this.ctrl.getHeaderRowClass()}" role="row"></div>`)}init(){mh(this.getGui(),this.ctrl.getAriaRowIndex());const e={setHeight:t=>this.getGui().style.height=t,setTop:t=>this.getGui().style.top=t,setHeaderCtrls:(t,i)=>this.setHeaderCtrls(t,i),setWidth:t=>this.getGui().style.width=t};this.ctrl.setComp(e)}destroyHeaderCtrls(){this.setHeaderCtrls([],!1)}setHeaderCtrls(e,t){if(!this.isAlive())return;const i=this.headerComps;if(this.headerComps={},e.forEach(s=>{const n=s.getInstanceId();let l=i[n];delete i[n],l==null&&(l=this.createHeaderComp(s),this.getGui().appendChild(l.getGui())),this.headerComps[n]=l}),bi(i,(s,n)=>{this.getGui().removeChild(n.getGui()),this.destroyBean(n)}),t){const s=no(this.headerComps);s.sort((l,u)=>{const g=l.getCtrl().getColumnGroupChild().getLeft(),C=u.getCtrl().getColumnGroupChild().getLeft();return g-C});const n=s.map(l=>l.getGui());Lh(this.getGui(),n)}}createHeaderComp(e){let t;switch(this.ctrl.getType()){case"group":t=new Tb(e);break;case"filter":t=new Uy(e);break;default:t=new Db(e);break}return this.createBean(t),t.setParentComponent(this),t}};E([Ce],Zh.prototype,"init",1);E([Di],Zh.prototype,"destroyHeaderCtrls",1);var Pb=0,qs=class Hg extends ge{constructor(t,i,s){super(),this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.columnGroupChild=t,this.parentRowCtrl=s,this.beans=i,this.instanceId=t.getUniqueId()+"-"+Pb++}postConstruct(){this.addManagedPropertyListeners(["suppressHeaderFocus"],()=>this.refreshTabIndex())}shouldStopEventPropagation(t){const{headerRowIndex:i,column:s}=this.focusService.getFocusedHeader();return Np(this.gridOptionsService,t,i,s)}getWrapperHasFocus(){return this.gridOptionsService.getDocument().activeElement===this.eGui}setGui(t){this.eGui=t,this.addDomData(),this.addManagedListener(this.beans.eventService,L.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}onDisplayedColumnsChanged(){!this.comp||!this.column||(this.refreshFirstAndLastStyles(),this.refreshAriaColIndex())}refreshFirstAndLastStyles(){const{comp:t,column:i,beans:s}=this;Sl.refreshFirstAndLastStyles(t,i,s.columnModel)}refreshAriaColIndex(){const{beans:t,column:i}=this,s=t.columnModel.getAriaColumnIndex(i);vh(this.eGui,s)}addResizeAndMoveKeyboardListeners(){!this.resizeFeature||(this.addManagedListener(this.eGui,"keydown",this.onGuiKeyDown.bind(this)),this.addManagedListener(this.eGui,"keyup",this.onGuiKeyUp.bind(this)))}refreshTabIndex(){this.gridOptionsService.get("suppressHeaderFocus")?this.eGui.removeAttribute("tabindex"):this.eGui.setAttribute("tabindex","-1")}onGuiKeyDown(t){var i;const n=this.gridOptionsService.getDocument().activeElement,l=t.key===Q.LEFT||t.key===Q.RIGHT;if(this.isResizing&&(t.preventDefault(),t.stopImmediatePropagation()),n!==this.eGui||!t.shiftKey&&!t.altKey||((this.isResizing||l)&&(t.preventDefault(),t.stopImmediatePropagation()),!l))return;const u=t.key===Q.LEFT!==this.gridOptionsService.get("enableRtl"),g=gg[u?"Left":"Right"];if(t.altKey){this.isResizing=!0,this.resizeMultiplier+=1;const C=this.getViewportAdjustedResizeDiff(t);this.resizeHeader(C,t.shiftKey),(i=this.resizeFeature)==null||i.toggleColumnResizing(!0)}else this.moveHeader(g)}getViewportAdjustedResizeDiff(t){let i=this.getResizeDiff(t);if(this.column.getPinned()){const n=this.pinnedWidthService.getPinnedLeftWidth(),l=this.pinnedWidthService.getPinnedRightWidth(),u=zo(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(n+l+i>u)if(u>n+l)i=u-n-l;else return 0}return i}getResizeDiff(t){let i=t.key===Q.LEFT!==this.gridOptionsService.get("enableRtl");const s=this.column.getPinned(),n=this.gridOptionsService.get("enableRtl");return s&&n!==(s==="right")&&(i=!i),(i?-1:1)*this.resizeMultiplier}onGuiKeyUp(){!this.isResizing||(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=setTimeout(()=>{var t;(t=this.resizeFeature)==null||t.toggleColumnResizing(!1)},150))}handleKeyDown(t){const i=this.getWrapperHasFocus();switch(t.key){case Q.PAGE_DOWN:case Q.PAGE_UP:case Q.PAGE_HOME:case Q.PAGE_END:i&&t.preventDefault()}}addDomData(){const t=Hg.DOM_DATA_KEY_HEADER_CTRL;this.gridOptionsService.setDomData(this.eGui,t,this),this.addDestroyFunc(()=>this.gridOptionsService.setDomData(this.eGui,t,null))}getGui(){return this.eGui}focus(t){return this.eGui?(this.lastFocusEvent=t||null,this.eGui.focus(),!0):!1}getRowIndex(){return this.parentRowCtrl.getRowIndex()}getParentRowCtrl(){return this.parentRowCtrl}getPinned(){return this.parentRowCtrl.getPinned()}getInstanceId(){return this.instanceId}getColumnGroupChild(){return this.columnGroupChild}removeDragSource(){this.dragSource&&(this.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(t,i,s){const n=t??i;this.gridOptionsService.get("preventDefaultOnContextMenu")&&n.preventDefault();const l=s instanceof Lt?s:void 0;this.menuService.isHeaderContextMenuEnabled(l)&&this.menuService.showHeaderContextMenu(l,t,i),this.dispatchColumnMouseEvent(L.EVENT_COLUMN_HEADER_CONTEXT_MENU,s)}dispatchColumnMouseEvent(t,i){const s={type:t,column:i};this.eventService.dispatchEvent(s)}destroy(){super.destroy(),this.removeDragSource(),this.comp=null,this.column=null,this.resizeFeature=null,this.lastFocusEvent=null,this.columnGroupChild=null,this.parentRowCtrl=null,this.eGui=null}};qs.DOM_DATA_KEY_HEADER_CTRL="headerCtrl";E([N("pinnedWidthService")],qs.prototype,"pinnedWidthService",2);E([N("focusService")],qs.prototype,"focusService",2);E([N("userComponentFactory")],qs.prototype,"userComponentFactory",2);E([N("ctrlsService")],qs.prototype,"ctrlsService",2);E([N("dragAndDropService")],qs.prototype,"dragAndDropService",2);E([N("menuService")],qs.prototype,"menuService",2);E([Ce],qs.prototype,"postConstruct",1);var Dl=qs,Tl=class extends ge{constructor(e,t,i,s){super(),this.columnOrGroup=e,this.eCell=t,this.ariaEl=this.eCell.querySelector("[role=columnheader]")||this.eCell,this.colsSpanning=s,this.beans=i}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){return this.beans.gridOptionsService.get("enableRtl")&&this.colsSpanning?yt(this.colsSpanning):this.columnOrGroup}postConstruct(){this.addManagedListener(this.columnOrGroup,Lt.EVENT_LEFT_CHANGED,this.onLeftChanged.bind(this)),this.setLeftFirstTime(),this.addManagedListener(this.eventService,L.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onLeftChanged.bind(this)),this.addManagedPropertyListener("domLayout",this.onLeftChanged.bind(this))}setLeftFirstTime(){const e=this.beans.gridOptionsService.get("suppressColumnMoveAnimation"),t=ce(this.columnOrGroup.getOldLeft());this.beans.columnAnimationService.isActive()&&t&&!e?this.animateInLeft():this.onLeftChanged()}animateInLeft(){const e=this.getColumnOrGroup(),t=e.getLeft(),i=e.getOldLeft(),s=this.modifyLeftForPrintLayout(e,i),n=this.modifyLeftForPrintLayout(e,t);this.setLeft(s),this.actualLeft=n,this.beans.columnAnimationService.executeNextVMTurn(()=>{this.actualLeft===n&&this.setLeft(n)})}onLeftChanged(){const e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,t){if(!this.beans.gridOptionsService.isDomLayout("print")||e.getPinned()==="left")return t;const s=this.beans.columnModel.getDisplayedColumnsLeftWidth();if(e.getPinned()==="right"){const n=this.beans.columnModel.getBodyContainerWidth();return s+n+t}return s+t}setLeft(e){if(ce(e)&&(this.eCell.style.left=`${e}px`),this.columnOrGroup instanceof Lt)this.columnOrGroup;else{const i=this.columnOrGroup.getLeafColumns();if(!i.length)return;i.length>1&&cp(this.ariaEl,i.length),i[0]}}};E([Ce],Tl.prototype,"postConstruct",1);var ia=class extends ge{constructor(e,t){super(),this.columns=e,this.element=t}postConstruct(){this.gridOptionsService.get("columnHoverHighlight")&&this.addMouseHoverListeners()}addMouseHoverListeners(){this.addManagedListener(this.element,"mouseout",this.onMouseOut.bind(this)),this.addManagedListener(this.element,"mouseover",this.onMouseOver.bind(this))}onMouseOut(){this.columnHoverService.clearMouseOver()}onMouseOver(){this.columnHoverService.setMouseOver(this.columns)}};E([N("columnHoverService")],ia.prototype,"columnHoverService",2);E([Ce],ia.prototype,"postConstruct",1);var Fb=class extends Dl{constructor(e,t,i){super(e,t,i),this.iconCreated=!1,this.column=e}setComp(e,t,i,s){this.comp=e,this.eButtonShowMainFilter=i,this.eFloatingFilterBody=s,this.setGui(t),this.setupActive(),this.setupWidth(),this.setupLeft(),this.setupHover(),this.setupFocus(),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(),this.setupUi(),this.addManagedListener(this.eButtonShowMainFilter,"click",this.showParentFilter.bind(this)),this.setupFilterChangedListener(),this.addManagedListener(this.column,Lt.EVENT_COL_DEF_CHANGED,this.onColDefChanged.bind(this))}resizeHeader(){}moveHeader(){}setupActive(){const e=this.column.getColDef(),t=!!e.filter,i=!!e.floatingFilter;this.active=t&&i}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;const e=Wt("filter",this.gridOptionsService,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}setupFocus(){this.createManagedBean(new go(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){const e=this.localeService.getLocaleTextFunc();fs(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(e){if(this.gridOptionsService.getDocument().activeElement===this.eGui)return;const n=this.focusService.findNextFocusableElement(this.eGui,null,e.shiftKey);if(n){this.beans.headerNavigationService.scrollToColumn(this.column),e.preventDefault(),n.focus();return}const l=this.findNextColumnWithFloatingFilter(e.shiftKey);!l||this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:this.getParentRowCtrl().getRowIndex(),column:l},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(e){const t=this.beans.columnModel;let i=this.column;do if(i=e?t.getDisplayedColBefore(i):t.getDisplayedColAfter(i),!i)break;while(!i.getColDef().filter||!i.getColDef().floatingFilter);return i}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();switch(e.key){case Q.UP:case Q.DOWN:t||e.preventDefault();case Q.LEFT:case Q.RIGHT:if(t)return;e.stopPropagation();case Q.ENTER:t&&this.focusService.focusInto(this.eGui)&&e.preventDefault();break;case Q.ESCAPE:t||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;const i=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),s=!!e.relatedTarget&&Do(e.relatedTarget,"ag-floating-filter");if(i&&s&&e.target===this.eGui){const l=this.lastFocusEvent,u=!!(l&&l.key===Q.TAB);if(l&&u){const g=l.shiftKey;this.focusService.focusInto(this.eGui,g)}}const n=this.getRowIndex();this.beans.focusService.setFocusedHeader(n,this.column)}setupHover(){this.createManagedBean(new ia([this.column],this.eGui));const e=()=>{if(!this.gridOptionsService.get("columnHoverHighlight"))return;const t=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",t)};this.addManagedListener(this.eventService,L.EVENT_COLUMN_HOVER_CHANGED,e),e()}setupLeft(){const e=new Tl(this.column,this.eGui,this.beans);this.createManagedBean(e)}setupFilterButton(){this.suppressFilterButton=!this.menuService.isFloatingFilterButtonEnabled(this.column),this.highlightFilterButtonWhenActive=!this.menuService.isLegacyMenuEnabled()}setupUserComp(){if(!this.active)return;const e=this.beans.filterManager.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setCompDetails(e)}showParentFilter(){const e=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.menuService.showFilterMenu({column:this.column,buttonElement:e,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(){if(!this.active)return;const{filterManager:e}=this.beans,t=i=>{const s=this.comp.getFloatingFilterComp();!s||s.then(n=>{if(n){const l=e.getCurrentFloatingFilterParentModel(this.column);n.onParentModelChanged(l,i)}})};this.destroySyncListener=this.addManagedListener(this.column,Lt.EVENT_FILTER_CHANGED,t),e.isFilterActive(this.column)&&t(null)}setupWidth(){const e=()=>{const t=`${this.column.getActualWidth()}px`;this.comp.setWidth(t)};this.addManagedListener(this.column,Lt.EVENT_WIDTH_CHANGED,e),e()}setupFilterChangedListener(){this.active&&(this.destroyFilterChangedListener=this.addManagedListener(this.column,Lt.EVENT_FILTER_CHANGED,this.updateFilterButton.bind(this)),this.updateFilterButton())}updateFilterButton(){if(!this.suppressFilterButton&&this.comp){const e=this.beans.filterManager.isFilterAllowed(this.column);this.comp.setButtonWrapperDisplayed(e),this.highlightFilterButtonWhenActive&&e&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(){var e,t;const i=this.active;this.setupActive();const s=!i&&this.active;i&&!this.active&&((e=this.destroySyncListener)==null||e.call(this),(t=this.destroyFilterChangedListener)==null||t.call(this));const n=this.active?this.beans.filterManager.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,l=this.comp.getFloatingFilterComp();!l||!n?this.updateCompDetails(n,s):l.then(u=>{var g;!u||this.beans.filterManager.areFilterCompsDifferent((g=this.userCompDetails)!=null?g:null,n)?this.updateCompDetails(n,s):this.updateFloatingFilterParams(n)})}updateCompDetails(e,t){!this.isAlive()||(this.setCompDetails(e),this.setupFilterButton(),this.setupUi(),t&&(this.setupSyncWithFilter(),this.setupFilterChangedListener()))}updateFloatingFilterParams(e){var t;if(!e)return;const i=e.params;(t=this.comp.getFloatingFilterComp())==null||t.then(s=>{let n=!1;s?.refresh&&typeof s.refresh=="function"&&s.refresh(i)!==null&&(n=!0),!n&&s?.onParamsUpdated&&typeof s.onParamsUpdated=="function"&&s.onParamsUpdated(i)!==null&&Ue("Custom floating filter method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")})}destroy(){super.destroy(),this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.destroySyncListener=null,this.destroyFilterChangedListener=null}},Wr=class extends ge{constructor(e,t,i,s,n){super(),this.pinned=e,this.column=t,this.eResize=i,this.comp=s,this.ctrl=n}postConstruct(){const e=[];let t,i;const s=()=>{if(lt(this.eResize,t),!t)return;const u=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(e.push(u),i){const g=this.gridOptionsService.get("skipHeaderOnAutoSize"),C=()=>{this.columnModel.autoSizeColumn(this.column,"uiColumnResized",g)};this.eResize.addEventListener("dblclick",C);const S=new pi(this.eResize);S.addEventListener(pi.EVENT_DOUBLE_TAP,C),e.push(()=>{this.eResize.removeEventListener("dblclick",C),S.removeEventListener(pi.EVENT_DOUBLE_TAP,C),S.destroy()})}},n=()=>{e.forEach(u=>u()),e.length=0},l=()=>{const u=this.column.isResizable(),g=!this.gridOptionsService.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(u!==t||g!==i)&&(t=u,i=g,n(),s())};l(),this.addDestroyFunc(n),this.ctrl.addRefreshFunction(l)}onResizing(e,t){const{column:i,lastResizeAmount:s,resizeStartWidth:n}=this,l=this.normaliseResizeAmount(t),u=n+l,g=[{key:i,newWidth:u}];if(this.column.getPinned()){const C=this.pinnedWidthService.getPinnedLeftWidth(),S=this.pinnedWidthService.getPinnedRightWidth(),A=zo(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(C+S+(l-s)>A)return}this.lastResizeAmount=l,this.columnModel.setColumnWidths(g,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.toggleColumnResizing(!1)}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=e,this.toggleColumnResizing(!0)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}normaliseResizeAmount(e){let t=e;const i=this.pinned!=="left",s=this.pinned==="right";return this.gridOptionsService.get("enableRtl")?i&&(t*=-1):s&&(t*=-1),t}};E([N("horizontalResizeService")],Wr.prototype,"horizontalResizeService",2);E([N("pinnedWidthService")],Wr.prototype,"pinnedWidthService",2);E([N("ctrlsService")],Wr.prototype,"ctrlsService",2);E([N("columnModel")],Wr.prototype,"columnModel",2);E([Ce],Wr.prototype,"postConstruct",1);var Jh=class extends ge{constructor(e){super(),this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1,this.column=e}onSpaceKeyDown(e){const t=this.cbSelectAll,i=this.gridOptionsService.getDocument();t.isDisplayed()&&!t.getGui().contains(i.activeElement)&&(e.preventDefault(),t.setValue(!t.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(e){this.headerCellCtrl=e,this.cbSelectAll=this.createManagedBean(new Cl),this.cbSelectAll.addCssClass("ag-header-select-all"),jt(this.cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedListener(this.eventService,L.EVENT_NEW_COLUMNS_LOADED,this.onNewColumnsLoaded.bind(this)),this.addManagedListener(this.eventService,L.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,L.EVENT_SELECTION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,L.EVENT_PAGINATION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,L.EVENT_MODEL_UPDATED,this.onModelChanged.bind(this)),this.addManagedListener(this.cbSelectAll,L.EVENT_FIELD_VALUE_CHANGED,this.onCbSelectAll.bind(this)),Xn(this.cbSelectAll.getGui(),!0),this.cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onNewColumnsLoaded(){this.showOrHideSelectAll()}onDisplayedColumnsChanged(){!this.isAlive()||this.showOrHideSelectAll()}showOrHideSelectAll(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setDisplayed(this.cbSelectAllVisible,{skipAriaHidden:!0}),this.cbSelectAllVisible&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel()}onModelChanged(){!this.cbSelectAllVisible||this.updateStateOfCheckbox()}onSelectionChanged(){!this.cbSelectAllVisible||this.updateStateOfCheckbox()}updateStateOfCheckbox(){if(this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;const e=this.selectionService.getSelectAllState(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setValue(e);const t=this.selectionService.hasNodesToSelect(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setDisabled(!t),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(){const e=this.localeService.getLocaleTextFunc(),i=this.cbSelectAll.getValue()?e("ariaChecked","checked"):e("ariaUnchecked","unchecked"),s=e("ariaRowSelectAll","Press Space to toggle all rows selection");this.cbSelectAllVisible?this.headerCellCtrl.setAriaDescriptionProperty("selectAll",`${s} (${i})`):this.headerCellCtrl.setAriaDescriptionProperty("selectAll",null),this.cbSelectAll.setInputAriaLabel(`${s} (${i})`),this.headerCellCtrl.announceAriaDescription()}checkSelectionType(e){return this.gridOptionsService.get("rowSelection")==="multiple"?!0:(console.warn(`AG Grid: ${e} is only available if using 'multiple' rowSelection.`),!1)}checkRightRowModelType(e){const t=this.rowModel.getType();return t==="clientSide"||t==="serverSide"?!0:(console.warn(`AG Grid: ${e} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${t}.`),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox||!this.cbSelectAllVisible)return;const e=this.cbSelectAll.getValue(),t=this.isFilteredOnly(),i=this.isCurrentPageOnly();let s="uiSelectAll";i?s="uiSelectAllCurrentPage":t&&(s="uiSelectAllFiltered");const n={source:s,justFiltered:t,justCurrentPage:i};e?this.selectionService.selectAllRowNodes(n):this.selectionService.deselectAllRowNodes(n)}isCheckboxSelection(){let e=this.column.getColDef().headerCheckboxSelection;if(typeof e=="function"){const t=e,i=this.gridOptionsService.addGridCommonParams({column:this.column,colDef:this.column.getColDef()});e=t(i)}return e?this.checkRightRowModelType("headerCheckboxSelection")&&this.checkSelectionType("headerCheckboxSelection"):!1}isFilteredOnly(){return!!this.column.getColDef().headerCheckboxSelectionFilteredOnly}isCurrentPageOnly(){return!!this.column.getColDef().headerCheckboxSelectionCurrentPageOnly}};E([N("rowModel")],Jh.prototype,"rowModel",2);E([N("selectionService")],Jh.prototype,"selectionService",2);var Lb=class extends Dl{constructor(e,t,i){super(e,t,i),this.refreshFunctions=[],this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map,this.column=e}setComp(e,t,i,s){this.comp=e,this.setGui(t),this.updateState(),this.setupWidth(),this.setupMovingCss(),this.setupMenuClass(),this.setupSortableClass(),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight(s),this.addColumnHoverListener(),this.setupFilterClass(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(),this.setupSelectAll(),this.setupUserComp(),this.refreshAria(),this.resizeFeature=this.createManagedBean(new Wr(this.getPinned(),this.column,i,e,this)),this.createManagedBean(new ia([this.column],t)),this.createManagedBean(new Tl(this.column,t,this.beans)),this.createManagedBean(new go(t,{shouldStopEventPropagation:n=>this.shouldStopEventPropagation(n),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(),this.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader"],this.refresh.bind(this)),this.addManagedListener(this.column,Lt.EVENT_COL_DEF_CHANGED,this.refresh.bind(this)),this.addManagedListener(this.eventService,L.EVENT_COLUMN_VALUE_CHANGED,this.onColumnValueChanged.bind(this)),this.addManagedListener(this.eventService,L.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onColumnRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,L.EVENT_COLUMN_PIVOT_CHANGED,this.onColumnPivotChanged.bind(this)),this.addManagedListener(this.eventService,L.EVENT_HEADER_HEIGHT_CHANGED,this.onHeaderHeightChanged.bind(this))}resizeHeader(e,t){var i,s;if(!this.column.isResizable())return;const n=this.column.getActualWidth(),l=(i=this.column.getMinWidth())!=null?i:0,u=(s=this.column.getMaxWidth())!=null?s:Number.MAX_SAFE_INTEGER,g=Math.min(Math.max(n+e,l),u);this.beans.columnModel.setColumnWidths([{key:this.column,newWidth:g}],t,!0,"uiColumnResized")}moveHeader(e){const{eGui:t,column:i,gridOptionsService:s,ctrlsService:n}=this,l=this.getPinned(),u=t.getBoundingClientRect().left,g=i.getActualWidth(),C=s.get("enableRtl"),S=e===0!==C,A=Lo.normaliseX(S?u-20:u+g+20,l,!0,s,n);Lo.attemptMoveColumns({allMovingColumns:[i],isFromHeader:!0,hDirection:e,xPosition:A,pinned:l,fromEnter:!1,fakeEvent:!1,gridOptionsService:s,columnModel:this.beans.columnModel}),n.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(i,"auto")}setupUserComp(){const e=this.lookupUserCompDetails();this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(){const e=this.createParams(),t=this.column.getColDef();return this.userComponentFactory.getHeaderCompDetails(t,e)}createParams(){return this.gridOptionsService.addGridCommonParams({column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&this.menuService.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!this.openFilterEnabled||this.menuService.isLegacyMenuEnabled(),showColumnMenu:t=>{this.menuService.showColumnMenu({column:this.column,buttonElement:t,positionBy:"button"})},showColumnMenuAfterMouseClick:t=>{this.menuService.showColumnMenu({column:this.column,mouseEvent:t,positionBy:"mouse"})},showFilter:t=>{this.menuService.showFilterMenu({column:this.column,buttonElement:t,containerType:"columnFilter",positionBy:"button"})},progressSort:t=>{this.beans.sortController.progressSort(this.column,!!t,"uiColumnSorted")},setSort:(t,i)=>{this.beans.sortController.setSortForColumn(this.column,t,!!i,"uiColumnSorted")},eGridHeader:this.getGui(),setTooltip:(t,i)=>{this.setupTooltip(t,i)}})}setupSelectAll(){this.selectAllFeature=this.createManagedBean(new Jh(this.column)),this.selectAllFeature.setComp(this)}getSelectAllGui(){return this.selectAllFeature.getCheckboxGui()}handleKeyDown(e){super.handleKeyDown(e),e.key===Q.SPACE&&this.selectAllFeature.onSpaceKeyDown(e),e.key===Q.ENTER&&this.onEnterKeyDown(e),e.key===Q.DOWN&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){if(e.ctrlKey||e.metaKey)this.showMenuOnKeyPress(e,!0);else if(this.sortable){const t=e.shiftKey;this.beans.sortController.progressSort(this.column,t,"uiColumnSorted")}}showMenuOnKeyPress(e,t){const i=this.comp.getUserCompInstance();!i||!(i instanceof Od)||i.onMenuKeyboardShortcut(t)&&e.preventDefault()}onFocusIn(e){if(!this.getGui().contains(e.relatedTarget)){const t=this.getRowIndex();this.focusService.setFocusedHeader(t,this.column),this.announceAriaDescription()}this.focusService.isKeyboardMode()&&this.setActiveHeader(!0)}onFocusOut(e){this.getGui().contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(e,t){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));const i=this.gridOptionsService.get("tooltipShowMode")==="whenTruncated",s=this.eGui,n=this.column.getColDef();!t&&i&&!n.headerComponent&&(t=()=>{const g=s.querySelector(".ag-header-cell-text");return g?g.scrollWidth>g.clientWidth:!0});const l={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getGui:()=>s,getLocation:()=>"header",getTooltipValue:()=>e??this.column.getColDef().headerTooltip,shouldDisplayTooltip:t},u=this.createManagedBean(new $s(l));this.refreshFunctions.push(()=>u.refreshToolTip())}setupClassesFromColDef(){const e=()=>{const t=this.column.getColDef(),i=Sl.getHeaderClassesFromColDef(t,this.gridOptionsService,this.column,null),s=this.userHeaderClasses;this.userHeaderClasses=new Set(i),i.forEach(n=>{s.has(n)?s.delete(n):this.comp.addOrRemoveCssClass(n,!0)}),s.forEach(n=>this.comp.addOrRemoveCssClass(n,!1))};this.refreshFunctions.push(e),e()}setDragSource(e){if(this.dragSourceElement=e,this.removeDragSource(),!e||!this.draggable)return;const{column:t,beans:i,displayName:s,dragAndDropService:n,gridOptionsService:l}=this,{columnModel:u}=i;let g=!this.gridOptionsService.get("suppressDragLeaveHidesColumns");const C=this.dragSource={type:1,eElement:e,getDefaultIconName:()=>g?Je.ICON_HIDE:Je.ICON_NOT_ALLOWED,getDragItem:()=>this.createDragItem(t),dragItemName:s,onDragStarted:()=>{g=!l.get("suppressDragLeaveHidesColumns"),t.setMoving(!0,"uiColumnMoved")},onDragStopped:()=>t.setMoving(!1,"uiColumnMoved"),onGridEnter:S=>{var A;if(g){const D=((A=S?.columns)==null?void 0:A.filter(M=>!M.getColDef().lockVisible))||[];u.setColumnsVisible(D,!0,"uiColumnMoved")}},onGridExit:S=>{var A;if(g){const D=((A=S?.columns)==null?void 0:A.filter(M=>!M.getColDef().lockVisible))||[];u.setColumnsVisible(D,!1,"uiColumnMoved")}}};n.addDragSource(C,!0)}createDragItem(e){const t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t}}updateState(){this.menuEnabled=this.menuService.isColumnMenuInHeaderEnabled(this.column),this.openFilterEnabled=this.menuService.isFilterMenuInHeaderEnabled(this.column),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}addRefreshFunction(e){this.refreshFunctions.push(e)}refresh(){this.updateState(),this.refreshHeaderComp(),this.refreshAria(),this.refreshFunctions.forEach(e=>e())}refreshHeaderComp(){const e=this.lookupUserCompDetails();(this.comp.getUserCompInstance()!=null&&this.userCompDetails.componentClass==e.componentClass?this.attemptHeaderCompRefresh(e.params):!1)?this.setDragSource(this.dragSourceElement):this.setCompDetails(e)}attemptHeaderCompRefresh(e){const t=this.comp.getUserCompInstance();return!t||!t.refresh?!1:t.refresh(e)}calculateDisplayName(){return this.beans.columnModel.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(){this.displayName!==this.calculateDisplayName()&&this.refresh()}workOutDraggable(){const e=this.column.getColDef();return!!(!this.gridOptionsService.get("suppressMovableColumns")&&!e.suppressMovable&&!e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}onColumnRowGroupChanged(){this.checkDisplayName()}onColumnPivotChanged(){this.checkDisplayName()}onColumnValueChanged(){this.checkDisplayName()}setupWidth(){const e=()=>{const t=this.column.getActualWidth();this.comp.setWidth(`${t}px`)};this.addManagedListener(this.column,Lt.EVENT_WIDTH_CHANGED,e),e()}setupMovingCss(){const e=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving())};this.addManagedListener(this.column,Lt.EVENT_MOVING_CHANGED,e),e()}setupMenuClass(){const e=()=>{this.comp.addOrRemoveCssClass("ag-column-menu-visible",this.column.isMenuVisible())};this.addManagedListener(this.column,Lt.EVENT_MENU_VISIBLE_CHANGED,e),e()}setupSortableClass(){const e=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!this.sortable)};e(),this.addRefreshFunction(e),this.addManagedListener(this.eventService,Lt.EVENT_SORT_CHANGED,this.refreshAriaSort.bind(this))}setupFilterClass(){const e=()=>{const t=this.column.isFilterActive();this.comp.addOrRemoveCssClass("ag-header-cell-filtered",t),this.refreshAria()};this.addManagedListener(this.column,Lt.EVENT_FILTER_ACTIVE_CHANGED,e),e()}setupWrapTextClass(){const e=()=>{const t=!!this.column.getColDef().wrapHeaderText;this.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",t)};e(),this.addRefreshFunction(e)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){const{eGui:e,column:t,comp:i,beans:s}=this;if(!t.isSpanHeaderHeight()){e.style.removeProperty("top"),e.style.removeProperty("height"),i.addOrRemoveCssClass("ag-header-span-height",!1),i.addOrRemoveCssClass("ag-header-span-total",!1);return}const{numberOfParents:n,isSpanningTotal:l}=this.column.getColumnGroupPaddingInfo();i.addOrRemoveCssClass("ag-header-span-height",n>0);const{columnModel:u}=s,g=u.getColumnHeaderRowHeight();if(n===0){i.addOrRemoveCssClass("ag-header-span-total",!1),e.style.setProperty("top","0px"),e.style.setProperty("height",`${g}px`);return}i.addOrRemoveCssClass("ag-header-span-total",l);const S=u.isPivotMode()?u.getPivotGroupHeaderHeight():u.getGroupHeaderHeight(),A=n*S;e.style.setProperty("top",`${-A}px`),e.style.setProperty("height",`${g+A}px`)}setupAutoHeight(e){const{columnModel:t,resizeObserverService:i}=this.beans,s=S=>{if(!this.isAlive())return;const{paddingTop:A,paddingBottom:D,borderBottomWidth:M,borderTopWidth:W}=po(this.getGui()),z=A+D+M+W,X=e.offsetHeight+z;if(S<5){const q=this.beans.gridOptionsService.getDocument(),_=!q||!q.contains(e),J=X==0;if(_||J){window.setTimeout(()=>s(S+1),0);return}}t.setColumnHeaderHeight(this.column,X)};let n=!1,l;const u=()=>{const S=this.column.isAutoHeaderHeight();S&&!n&&g(),!S&&n&&C()},g=()=>{n=!0,s(0),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),l=i.observeResize(e,()=>s(0))},C=()=>{n=!1,l&&l(),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),l=void 0};u(),this.addDestroyFunc(()=>C()),this.addManagedListener(this.column,Lt.EVENT_WIDTH_CHANGED,()=>n&&s(0)),this.addManagedListener(this.eventService,Lt.EVENT_SORT_CHANGED,()=>{n&&window.setTimeout(()=>s(0))}),this.addRefreshFunction(u)}refreshAriaSort(){if(this.sortable){const e=this.localeService.getLocaleTextFunc(),t=this.beans.sortController.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(tp(t)),this.setAriaDescriptionProperty("sort",e("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){const e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",e("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!this.menuService.isLegacyMenuEnabled()){const e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",e("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){const e=this.localeService.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",e("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(e,t){t!=null?this.ariaDescriptionProperties.set(e,t):this.ariaDescriptionProperties.delete(e)}announceAriaDescription(){const e=this.beans.gridOptionsService.getDocument();if(!this.eGui.contains(e.activeElement))return;const t=Array.from(this.ariaDescriptionProperties.keys()).sort((i,s)=>i==="filter"?-1:s.charCodeAt(0)-i.charCodeAt(0)).map(i=>this.ariaDescriptionProperties.get(i)).join(". ");this.beans.ariaAnnouncementService.announceValue(t)}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(){const e=()=>{if(!this.gridOptionsService.get("columnHoverHighlight"))return;const t=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",t)};this.addManagedListener(this.eventService,L.EVENT_COLUMN_HOVER_CHANGED,e),e()}getColId(){return this.column.getColId()}addActiveHeaderMouseListeners(){const e=s=>this.handleMouseOverChange(s.type==="mouseenter"),t=()=>this.dispatchColumnMouseEvent(L.EVENT_COLUMN_HEADER_CLICKED,this.column),i=s=>this.handleContextMenuMouseEvent(s,void 0,this.column);this.addManagedListener(this.getGui(),"mouseenter",e),this.addManagedListener(this.getGui(),"mouseleave",e),this.addManagedListener(this.getGui(),"click",t),this.addManagedListener(this.getGui(),"contextmenu",i)}handleMouseOverChange(e){this.setActiveHeader(e);const i={type:e?L.EVENT_COLUMN_HEADER_MOUSE_OVER:L.EVENT_COLUMN_HEADER_MOUSE_LEAVE,column:this.column};this.eventService.dispatchEvent(i)}setActiveHeader(e){this.comp.addOrRemoveCssClass("ag-header-active",e)}getAnchorElementForMenu(e){const t=this.comp.getUserCompInstance();return t instanceof Od?t.getAnchorElementForMenu(e):this.getGui()}destroy(){super.destroy(),this.refreshFunctions=null,this.selectAllFeature=null,this.dragSourceElement=null,this.userCompDetails=null,this.userHeaderClasses=null,this.ariaDescriptionProperties=null}},sa=class extends ge{constructor(e,t,i,s){super(),this.eResize=t,this.comp=e,this.pinned=i,this.columnGroup=s}postConstruct(){if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}const e=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(this.addDestroyFunc(e),!this.gridOptionsService.get("suppressAutoSize")){const t=this.gridOptionsService.get("skipHeaderOnAutoSize");this.eResize.addEventListener("dblclick",()=>{const i=[];this.columnGroup.getDisplayedLeafColumns().forEach(n=>{n.getColDef().suppressAutoSize||i.push(n.getColId())}),i.length>0&&this.columnModel.autoSizeColumns({columns:i,skipHeader:t,stopAtGroup:this.columnGroup,source:"uiColumnResized"}),this.resizeLeafColumnsToFit("uiColumnResized")})}}onResizeStart(e){const t=this.getInitialValues(e);this.storeLocalValues(t),this.toggleColumnResizing(!0)}onResizing(e,t,i="uiColumnResized"){const s=this.normaliseDragChange(t),n=this.resizeStartWidth+s;this.resizeColumnsFromLocalValues(n,i,e)}getInitialValues(e){const t=this.getColumnsToResize(),i=this.getInitialSizeOfColumns(t),s=this.getSizeRatiosOfColumns(t,i),n={columnsToResize:t,resizeStartWidth:i,resizeRatios:s};let l=null;if(e&&(l=this.columnModel.getDisplayedGroupAfter(this.columnGroup)),l){const u=l.getDisplayedLeafColumns(),g=n.groupAfterColumns=u.filter(S=>S.isResizable()),C=n.groupAfterStartWidth=this.getInitialSizeOfColumns(g);n.groupAfterRatios=this.getSizeRatiosOfColumns(g,C)}else n.groupAfterColumns=void 0,n.groupAfterStartWidth=void 0,n.groupAfterRatios=void 0;return n}storeLocalValues(e){const{columnsToResize:t,resizeStartWidth:i,resizeRatios:s,groupAfterColumns:n,groupAfterStartWidth:l,groupAfterRatios:u}=e;this.resizeCols=t,this.resizeStartWidth=i,this.resizeRatios=s,this.resizeTakeFromCols=n,this.resizeTakeFromStartWidth=l,this.resizeTakeFromRatios=u}clearLocalValues(){this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}resizeLeafColumnsToFit(e){const t=this.autoWidthCalculator.getPreferredWidthForColumnGroup(this.columnGroup),i=this.getInitialValues();t>i.resizeStartWidth&&this.resizeColumns(i,t,e,!0)}resizeColumnsFromLocalValues(e,t,i=!0){var s,n,l;if(!this.resizeCols||!this.resizeRatios)return;const u={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:(s=this.resizeTakeFromCols)!=null?s:void 0,groupAfterStartWidth:(n=this.resizeTakeFromStartWidth)!=null?n:void 0,groupAfterRatios:(l=this.resizeTakeFromRatios)!=null?l:void 0};this.resizeColumns(u,e,t,i)}resizeColumns(e,t,i,s=!0){const{columnsToResize:n,resizeStartWidth:l,resizeRatios:u,groupAfterColumns:g,groupAfterStartWidth:C,groupAfterRatios:S}=e,A=[];if(A.push({columns:n,ratios:u,width:t}),g){const D=t-l;A.push({columns:g,ratios:S,width:C-D})}this.columnModel.resizeColumnSets({resizeSets:A,finished:s,source:i}),s&&this.toggleColumnResizing(!1)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(t=>t.isResizable())}getInitialSizeOfColumns(e){return e.reduce((t,i)=>t+i.getActualWidth(),0)}getSizeRatiosOfColumns(e,t){return e.map(i=>i.getActualWidth()/t)}normaliseDragChange(e){let t=e;return this.gridOptionsService.get("enableRtl")?this.pinned!=="left"&&(t*=-1):this.pinned==="right"&&(t*=-1),t}destroy(){super.destroy(),this.clearLocalValues()}};E([N("horizontalResizeService")],sa.prototype,"horizontalResizeService",2);E([N("autoWidthCalculator")],sa.prototype,"autoWidthCalculator",2);E([N("columnModel")],sa.prototype,"columnModel",2);E([Ce],sa.prototype,"postConstruct",1);var Bg=class extends ge{constructor(e,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListener(this.columnGroup,ri.EVENT_DISPLAYED_CHILDREN_CHANGED,this.onDisplayedChildrenChanged.bind(this)),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();const e=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(t=>{t.addEventListener("widthChanged",e),t.addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push(()=>{t.removeEventListener("widthChanged",e),t.removeEventListener("visibleChanged",e)})})}removeListenersOnChildrenColumns(){this.removeChildListenersFuncs.forEach(e=>e()),this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){const e=this.columnGroup.getActualWidth();this.comp.setWidth(`${e}px`),this.comp.addOrRemoveCssClass("ag-hidden",e===0)}};E([Ce],Bg.prototype,"postConstruct",1);var Mb=class extends Dl{constructor(e,t,i){super(e,t,i),this.onSuppressColMoveChange=()=>{if(!this.isAlive()||this.isSuppressMoving())this.removeDragSource();else if(!this.dragSource){const s=this.getGui();this.setDragSource(s)}},this.column=e}setComp(e,t,i){this.comp=e,this.setGui(t),this.displayName=this.beans.columnModel.getDisplayNameForColumnGroup(this.column,"header"),this.addClasses(),this.setupMovingCss(),this.setupExpandable(),this.setupTooltip(),this.addDestroyFunc(()=>{this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature))}),this.setupUserComp(),this.addHeaderMouseListeners();const s=this.getParentRowCtrl().getPinned(),n=this.column.getProvidedColumnGroup().getLeafColumns();this.createManagedBean(new ia(n,t)),this.createManagedBean(new Tl(this.column,t,this.beans)),this.createManagedBean(new Bg(e,this.column)),this.resizeFeature=this.createManagedBean(new sa(e,i,s,this.column)),this.createManagedBean(new go(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addManagedPropertyListener(L.EVENT_SUPPRESS_COLUMN_MOVE_CHANGED,this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners()}resizeHeader(e,t){if(!this.resizeFeature)return;const i=this.resizeFeature.getInitialValues(t);this.resizeFeature.resizeColumns(i,i.resizeStartWidth+e,"uiColumnResized",!0)}moveHeader(e){const{beans:t,eGui:i,column:s,gridOptionsService:n,ctrlsService:l}=this,u=n.get("enableRtl"),g=e===0,C=this.getPinned(),S=i.getBoundingClientRect(),A=S.left,D=S.width,M=Lo.normaliseX(g!==u?A-20:A+D+20,C,!0,n,l),W=s.getGroupId(),z=this.focusService.getFocusedHeader();Lo.attemptMoveColumns({allMovingColumns:this.column.getLeafColumns(),isFromHeader:!0,hDirection:e,xPosition:M,pinned:C,fromEnter:!1,fakeEvent:!1,gridOptionsService:n,columnModel:t.columnModel});const U=s.getDisplayedLeafColumns(),X=g?U[0]:yt(U);this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(X,"auto"),!this.isAlive()&&z&&this.restoreFocus(W,s,z)}restoreFocus(e,t,i){const s=t.getLeafColumns();if(!s.length)return;const n=s[0].getParent();if(!n)return;const l=this.findGroupWidthId(n,e);l&&this.focusService.focusHeaderPosition({headerPosition:Vt(We({},i),{column:l})})}findGroupWidthId(e,t){for(;e;){if(e.getGroupId()===t)return e;e=e.getParent()}return null}resizeLeafColumnsToFit(e){!this.resizeFeature||this.resizeFeature.resizeLeafColumnsToFit(e)}setupUserComp(){const e=this.gridOptionsService.addGridCommonParams({displayName:this.displayName,columnGroup:this.column,setExpanded:i=>{this.beans.columnModel.setColumnGroupOpened(this.column.getProvidedColumnGroup(),i,"gridInitializing")},setTooltip:(i,s)=>{this.setupTooltip(i,s)}}),t=this.userComponentFactory.getHeaderGroupCompDetails(e);this.comp.setUserCompDetails(t)}addHeaderMouseListeners(){const e=s=>this.handleMouseOverChange(s.type==="mouseenter"),t=()=>this.dispatchColumnMouseEvent(L.EVENT_COLUMN_HEADER_CLICKED,this.column.getProvidedColumnGroup()),i=s=>this.handleContextMenuMouseEvent(s,void 0,this.column.getProvidedColumnGroup());this.addManagedListener(this.getGui(),"mouseenter",e),this.addManagedListener(this.getGui(),"mouseleave",e),this.addManagedListener(this.getGui(),"click",t),this.addManagedListener(this.getGui(),"contextmenu",i)}handleMouseOverChange(e){const i={type:e?L.EVENT_COLUMN_HEADER_MOUSE_OVER:L.EVENT_COLUMN_HEADER_MOUSE_LEAVE,column:this.column.getProvidedColumnGroup()};this.eventService.dispatchEvent(i)}setupTooltip(e,t){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));const i=this.column.getColGroupDef(),s=this.gridOptionsService.get("tooltipShowMode")==="whenTruncated",n=this.eGui;!t&&s&&!i?.headerGroupComponent&&(t=()=>{const u=n.querySelector(".ag-header-group-text");return u?u.scrollWidth>u.clientWidth:!0});const l={getColumn:()=>this.column,getGui:()=>n,getLocation:()=>"headerGroup",getTooltipValue:()=>e??(i&&i.headerTooltip),shouldDisplayTooltip:t};i&&(l.getColDef=()=>i),this.createBean(new $s(l))}setupExpandable(){const e=this.column.getProvidedColumnGroup();this.refreshExpanded(),this.addManagedListener(e,Qt.EVENT_EXPANDABLE_CHANGED,this.refreshExpanded.bind(this)),this.addManagedListener(e,Qt.EVENT_EXPANDED_CHANGED,this.refreshExpanded.bind(this))}refreshExpanded(){const e=this.column;this.expandable=e.isExpandable();const t=e.isExpanded();this.expandable?this.comp.setAriaExpanded(t?"true":"false"):this.comp.setAriaExpanded(void 0)}getColId(){return this.column.getUniqueId()}addClasses(){const e=this.column.getColGroupDef(),t=Sl.getHeaderClassesFromColDef(e,this.gridOptionsService,null,this.column);this.column.isPadding()?(t.push("ag-header-group-cell-no-group"),this.column.getLeafColumns().every(s=>s.isSpanHeaderHeight())&&t.push("ag-header-span-height")):t.push("ag-header-group-cell-with-group"),t.forEach(i=>this.comp.addOrRemoveCssClass(i,!0))}setupMovingCss(){const t=this.column.getProvidedColumnGroup().getLeafColumns(),i=()=>this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving());t.forEach(s=>{this.addManagedListener(s,Lt.EVENT_MOVING_CHANGED,i)}),i()}onFocusIn(e){if(!this.eGui.contains(e.relatedTarget)){const t=this.getRowIndex();this.beans.focusService.setFocusedHeader(t,this.column)}}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();if(!(!this.expandable||!t)&&e.key===Q.ENTER){const i=this.column,s=!i.isExpanded();this.beans.columnModel.setColumnGroupOpened(i.getProvidedColumnGroup(),s,"uiColumnExpanded")}}setDragSource(e){if(!this.isAlive()||this.isSuppressMoving()||(this.removeDragSource(),!e))return;const{beans:t,column:i,displayName:s,gridOptionsService:n,dragAndDropService:l}=this,{columnModel:u}=t,g=i.getProvidedColumnGroup().getLeafColumns();let C=!n.get("suppressDragLeaveHidesColumns");const S=this.dragSource={type:1,eElement:e,getDefaultIconName:()=>C?Je.ICON_HIDE:Je.ICON_NOT_ALLOWED,dragItemName:s,getDragItem:()=>this.getDragItemForGroup(i),onDragStarted:()=>{C=!n.get("suppressDragLeaveHidesColumns"),g.forEach(A=>A.setMoving(!0,"uiColumnDragged"))},onDragStopped:()=>g.forEach(A=>A.setMoving(!1,"uiColumnDragged")),onGridEnter:A=>{var D;if(C){const M=((D=A?.columns)==null?void 0:D.filter(W=>!W.getColDef().lockVisible))||[];u.setColumnsVisible(M,!0,"uiColumnMoved")}},onGridExit:A=>{var D;if(C){const M=((D=A?.columns)==null?void 0:D.filter(W=>!W.getColDef().lockVisible))||[];u.setColumnsVisible(M,!1,"uiColumnMoved")}}};l.addDragSource(S,!0)}getDragItemForGroup(e){const t=e.getProvidedColumnGroup().getLeafColumns(),i={};t.forEach(n=>i[n.getId()]=n.isVisible());const s=[];return this.beans.columnModel.getAllDisplayedColumns().forEach(n=>{t.indexOf(n)>=0&&(s.push(n),Oi(t,n))}),t.forEach(n=>s.push(n)),{columns:s,visibleState:i}}isSuppressMoving(){let e=!1;return this.column.getLeafColumns().forEach(i=>{(i.getColDef().suppressMovable||i.getColDef().lockPosition)&&(e=!0)}),e||this.gridOptionsService.get("suppressMovableColumns")}},Ib=0,gn=class extends ge{constructor(e,t,i){super(),this.instanceId=Ib++,this.rowIndex=e,this.pinned=t,this.type=i;const s=i=="group"?"ag-header-row-column-group":i=="filter"?"ag-header-row-column-filter":"ag-header-row-column";this.headerRowClass=`ag-header-row ${s}`}postConstruct(){this.isPrintLayout=this.gridOptionsService.isDomLayout("print"),this.isEnsureDomOrder=this.gridOptionsService.get("ensureDomOrder")}getInstanceId(){return this.instanceId}setComp(e,t=!0){this.comp=e,t&&(this.onRowHeightChanged(),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners()}getHeaderRowClass(){return this.headerRowClass}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(){this.addManagedListener(this.eventService,L.EVENT_COLUMN_RESIZED,this.onColumnResized.bind(this)),this.addManagedListener(this.eventService,L.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,L.EVENT_VIRTUAL_COLUMNS_CHANGED,e=>this.onVirtualColumnsChanged(e.afterScroll)),this.addManagedListener(this.eventService,L.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.eventService,L.EVENT_GRID_STYLES_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.eventService,L.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("domLayout",this.onDisplayedColumnsChanged.bind(this)),this.addManagedPropertyListener("ensureDomOrder",e=>this.isEnsureDomOrder=e.currentValue),this.addManagedPropertyListener("headerHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("pivotHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("groupHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("pivotGroupHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("floatingFiltersHeight",this.onRowHeightChanged.bind(this))}getHeaderCellCtrl(e){if(!!this.headerCellCtrls)return Ao(this.headerCellCtrls).find(t=>t.getColumnGroupChild()===e)}onDisplayedColumnsChanged(){this.isPrintLayout=this.gridOptionsService.isDomLayout("print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}getType(){return this.type}onColumnResized(){this.setWidth()}setWidth(){const e=this.getWidthForRow();this.comp.setWidth(`${e}px`)}getWidthForRow(){const{columnModel:e}=this.beans;return this.isPrintLayout?this.pinned!=null?0:e.getContainerWidth("right")+e.getContainerWidth("left")+e.getContainerWidth(null):e.getContainerWidth(this.pinned)}onRowHeightChanged(){var{topOffset:e,rowHeight:t}=this.getTopAndHeight();this.comp.setTop(e+"px"),this.comp.setHeight(t+"px")}getTopAndHeight(){const{columnModel:e,filterManager:t}=this.beans;let i=e.getHeaderRowCount();const s=[];let n=0;t.hasFloatingFilters()&&(i++,n=1);const l=e.getColumnGroupHeaderRowHeight(),u=e.getColumnHeaderRowHeight(),g=1+n,C=i-g;for(let D=0;D<C;D++)s.push(l);s.push(u);for(let D=0;D<n;D++)s.push(e.getFloatingFiltersHeight());let S=0;for(let D=0;D<this.rowIndex;D++)S+=s[D];const A=s[this.rowIndex];return{topOffset:S,rowHeight:A}}getPinned(){return this.pinned}getRowIndex(){return this.rowIndex}onVirtualColumnsChanged(e=!1){const t=this.getHeaderCtrls(),i=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(t,i,e)}getHeaderCtrls(){const e=this.headerCellCtrls;this.headerCellCtrls=new Map;const t=this.getColumnsInViewport();for(const n of t)this.recycleAndCreateHeaderCtrls(n,e);const i=n=>{const{focusService:l,columnModel:u}=this.beans;return l.isHeaderWrapperFocused(n)?u.isDisplayed(n.getColumnGroupChild()):!1};if(e)for(const[n,l]of e)i(l)?this.headerCellCtrls.set(n,l):this.destroyBean(l);return Array.from(this.headerCellCtrls.values())}recycleAndCreateHeaderCtrls(e,t){if(!this.headerCellCtrls||e.isEmptyGroup())return;const i=e.getUniqueId();let s;if(t&&(s=t.get(i),t.delete(i)),s&&s.getColumnGroupChild()!=e&&(this.destroyBean(s),s=void 0),s==null)switch(this.type){case"filter":s=this.createBean(new Fb(e,this.beans,this));break;case"group":s=this.createBean(new Mb(e,this.beans,this));break;default:s=this.createBean(new Lb(e,this.beans,this));break}this.headerCellCtrls.set(i,s)}getColumnsInViewport(){return this.isPrintLayout?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()}getColumnsInViewportPrintLayout(){if(this.pinned!=null)return[];let e=[];const t=this.getActualDepth(),{columnModel:i}=this.beans;return["left",null,"right"].forEach(s=>{const n=i.getVirtualHeaderGroupRow(s,t);e=e.concat(n)}),e}getActualDepth(){return this.type=="filter"?this.rowIndex-1:this.rowIndex}getColumnsInViewportNormalLayout(){return this.beans.columnModel.getVirtualHeaderGroupRow(this.pinned,this.getActualDepth())}focusHeader(e,t){if(!this.headerCellCtrls)return!1;const s=Array.from(this.headerCellCtrls.values()).find(n=>n.getColumnGroupChild()==e);return s?s.focus(t):!1}destroy(){this.headerCellCtrls&&this.headerCellCtrls.forEach(e=>{this.destroyBean(e)}),this.headerCellCtrls=void 0,super.destroy()}};E([N("beans")],gn.prototype,"beans",2);E([Ce],gn.prototype,"postConstruct",1);var qo=class extends ge{constructor(e){super(),this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[],this.pinned=e}setComp(e,t){this.comp=e,this.eViewport=t,this.setupCenterWidth(),this.setupPinnedWidth(),this.setupDragAndDrop(this.eViewport),this.addManagedListener(this.eventService,L.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eventService,L.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,L.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.ctrlsService.registerHeaderContainer(this,this.pinned),this.columnModel.isReady()&&this.refresh()}setupDragAndDrop(e){const t=new Hr(this.pinned,e);this.createManagedBean(t)}refresh(e=!1){const t=new Er,i=this.focusService.getFocusHeaderToUseAfterRefresh(),s=()=>{const g=this.columnModel.getHeaderRowCount()-1;this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls);for(let C=0;C<g;C++){const S=this.createBean(new gn(t.next(),this.pinned,"group"));this.groupsRowCtrls.push(S)}},n=()=>{const g=t.next(),C=!this.hidden&&(this.columnsRowCtrl==null||!e||this.columnsRowCtrl.getRowIndex()!==g);(C||this.hidden)&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),C&&(this.columnsRowCtrl=this.createBean(new gn(g,this.pinned,"column")))},l=()=>{this.includeFloatingFilter=this.filterManager.hasFloatingFilters()&&!this.hidden;const g=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter){g();return}const C=t.next();if(this.filtersRowCtrl){const S=this.filtersRowCtrl.getRowIndex()!==C;(!e||S)&&g()}this.filtersRowCtrl||(this.filtersRowCtrl=this.createBean(new gn(C,this.pinned,"filter")))};s(),n(),l();const u=this.getAllCtrls();this.comp.setCtrls(u),this.restoreFocusOnHeader(i)}restoreFocusOnHeader(e){e==null||e.column.getPinned()!=this.pinned||this.focusService.focusHeaderPosition({headerPosition:e})}getAllCtrls(){const e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}onGridColumnsChanged(){this.refresh(!0)}onDisplayedColumnsChanged(){const e=this.filterManager.hasFloatingFilters()&&!this.hidden;this.includeFloatingFilter!==e&&this.refresh(!0)}setupCenterWidth(){this.pinned==null&&this.createManagedBean(new Gr(e=>this.comp.setCenterWidth(`${e}px`),!0))}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}setupPinnedWidth(){if(this.pinned==null)return;const e=this.pinned==="left",t=this.pinned==="right";this.hidden=!0;const i=()=>{const s=e?this.pinnedWidthService.getPinnedLeftWidth():this.pinnedWidthService.getPinnedRightWidth();if(s==null)return;const n=s==0,l=this.hidden!==n,u=this.gridOptionsService.get("enableRtl"),g=this.gridOptionsService.getScrollbarWidth(),S=this.scrollVisibleService.isVerticalScrollShowing()&&(u&&e||!u&&t)?s+g:s;this.comp.setPinnedContainerWidth(`${S}px`),this.comp.setDisplayed(!n),l&&(this.hidden=n,this.refresh())};this.addManagedListener(this.eventService,L.EVENT_LEFT_PINNED_WIDTH_CHANGED,i),this.addManagedListener(this.eventService,L.EVENT_RIGHT_PINNED_WIDTH_CHANGED,i),this.addManagedListener(this.eventService,L.EVENT_SCROLL_VISIBILITY_CHANGED,i),this.addManagedListener(this.eventService,L.EVENT_SCROLLBAR_WIDTH_CHANGED,i)}getHeaderCtrlForColumn(e){if(e instanceof Lt)return this.columnsRowCtrl?this.columnsRowCtrl.getHeaderCellCtrl(e):void 0;if(this.groupsRowCtrls.length!==0)for(let t=0;t<this.groupsRowCtrls.length;t++){const i=this.groupsRowCtrls[t].getHeaderCellCtrl(e);if(i)return i}}getHtmlElementForColumnHeader(e){const t=this.getHeaderCtrlForColumn(e);return t?t.getGui():null}getRowType(e){const i=this.getAllCtrls()[e];return i?i.getType():void 0}focusHeader(e,t,i){const n=this.getAllCtrls()[e];return n?n.focusHeader(t,i):!1}getViewport(){return this.eViewport}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}destroy(){this.filtersRowCtrl&&(this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)),this.columnsRowCtrl&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),this.groupsRowCtrls&&this.groupsRowCtrls.length&&(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls)),super.destroy()}};E([N("ctrlsService")],qo.prototype,"ctrlsService",2);E([N("scrollVisibleService")],qo.prototype,"scrollVisibleService",2);E([N("pinnedWidthService")],qo.prototype,"pinnedWidthService",2);E([N("columnModel")],qo.prototype,"columnModel",2);E([N("focusService")],qo.prototype,"focusService",2);E([N("filterManager")],qo.prototype,"filterManager",2);var Qo=class Ta extends Ze{constructor(t){super(),this.headerRowComps={},this.rowCompsList=[],this.pinned=t}init(){this.selectAndSetTemplate();const t={setDisplayed:s=>this.setDisplayed(s),setCtrls:s=>this.setCtrls(s),setCenterWidth:s=>this.eCenterContainer.style.width=s,setViewportScrollLeft:s=>this.getGui().scrollLeft=s,setPinnedContainerWidth:s=>{const n=this.getGui();n.style.width=s,n.style.maxWidth=s,n.style.minWidth=s}};this.createManagedBean(new qo(this.pinned)).setComp(t,this.getGui())}selectAndSetTemplate(){const t=this.pinned=="left",i=this.pinned=="right",s=t?Ta.PINNED_LEFT_TEMPLATE:i?Ta.PINNED_RIGHT_TEMPLATE:Ta.CENTER_TEMPLATE;this.setTemplate(s),this.eRowContainer=this.eCenterContainer?this.eCenterContainer:this.getGui()}destroyRowComps(){this.setCtrls([])}destroyRowComp(t){this.destroyBean(t),this.eRowContainer.removeChild(t.getGui())}setCtrls(t){const i=this.headerRowComps;this.headerRowComps={},this.rowCompsList=[];let s;const n=l=>{const u=l.getGui();u.parentElement!=this.eRowContainer&&this.eRowContainer.appendChild(u),s&&Fh(this.eRowContainer,u,s),s=u};t.forEach(l=>{const u=l.getInstanceId(),g=i[u];delete i[u];const C=g||this.createBean(new Zh(l));this.headerRowComps[u]=C,this.rowCompsList.push(C),n(C)}),no(i).forEach(l=>this.destroyRowComp(l))}};Qo.PINNED_LEFT_TEMPLATE='<div class="ag-pinned-left-header" role="rowgroup"></div>';Qo.PINNED_RIGHT_TEMPLATE='<div class="ag-pinned-right-header" role="rowgroup"></div>';Qo.CENTER_TEMPLATE=`<div class="ag-header-viewport" role="presentation">
            <div class="ag-header-container" ref="eCenterContainer" role="rowgroup"></div>
        </div>`;E([xe("eCenterContainer")],Qo.prototype,"eCenterContainer",2);E([Ce],Qo.prototype,"init",1);E([Di],Qo.prototype,"destroyRowComps",1);var td=Qo,ko=class extends ge{constructor(){super(...arguments),this.currentHeaderRowWithoutSpan=-1}postConstruct(){this.ctrlsService.whenReady(t=>{this.gridBodyCon=t.gridBodyCtrl});const e=this.gridOptionsService.getDocument();this.addManagedListener(e,"mousedown",()=>this.setCurrentHeaderRowWithoutSpan(-1))}getHeaderRowCount(){const e=this.ctrlsService.getHeaderRowContainerCtrl();return e?e.getRowCount():0}navigateVertically(e,t,i){if(t||(t=this.focusService.getFocusedHeader()),!t)return!1;const{headerRowIndex:s,column:n}=t,l=this.getHeaderRowCount(),u=e===0;let{headerRowIndex:g,column:C,headerRowIndexWithoutSpan:S}=u?this.headerPositionUtils.getColumnVisibleParent(n,s):this.headerPositionUtils.getColumnVisibleChild(n,s),A=!1;return g<0&&(g=0,C=n,A=!0),g>=l?(g=-1,this.setCurrentHeaderRowWithoutSpan(-1)):S!==void 0&&(this.currentHeaderRowWithoutSpan=S),!A&&!C?!1:this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:g,column:C},allowUserOverride:!0,event:i})}setCurrentHeaderRowWithoutSpan(e){this.currentHeaderRowWithoutSpan=e}navigateHorizontally(e,t=!1,i){const s=this.focusService.getFocusedHeader(),n=e===2,l=this.gridOptionsService.get("enableRtl");let u,g;return this.currentHeaderRowWithoutSpan!==-1?s.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=s.headerRowIndex,n!==l?(g="Before",u=this.headerPositionUtils.findHeader(s,g)):(g="After",u=this.headerPositionUtils.findHeader(s,g)),u||!t?this.focusService.focusHeaderPosition({headerPosition:u,direction:g,fromTab:t,allowUserOverride:!0,event:i}):this.focusNextHeaderRow(s,g,i)}focusNextHeaderRow(e,t,i){const s=e.headerRowIndex;let n=null,l;if(t==="Before"?s>0&&(l=s-1,this.currentHeaderRowWithoutSpan-=1,n=this.headerPositionUtils.findColAtEdgeForHeaderRow(l,"end")):(l=s+1,this.currentHeaderRowWithoutSpan<this.getHeaderRowCount()?this.currentHeaderRowWithoutSpan+=1:this.setCurrentHeaderRowWithoutSpan(-1),n=this.headerPositionUtils.findColAtEdgeForHeaderRow(l,"start")),!n)return!1;const{column:u,headerRowIndex:g}=this.headerPositionUtils.getHeaderIndexToFocus(n.column,n?.headerRowIndex);return this.focusService.focusHeaderPosition({headerPosition:{column:u,headerRowIndex:g},direction:t,fromTab:!0,allowUserOverride:!0,event:i})}scrollToColumn(e,t="After"){if(e.getPinned())return;let i;if(e instanceof ri){const s=e.getDisplayedLeafColumns();i=t==="Before"?yt(s):s[0]}else i=e;this.gridBodyCon.getScrollFeature().ensureColumnVisible(i)}};E([N("focusService")],ko.prototype,"focusService",2);E([N("headerPositionUtils")],ko.prototype,"headerPositionUtils",2);E([N("ctrlsService")],ko.prototype,"ctrlsService",2);E([Ce],ko.prototype,"postConstruct",1);ko=E([Fe("headerNavigationService")],ko);var Zo=class extends ge{setComp(e,t,i){this.comp=e,this.eGui=t,this.createManagedBean(new go(i,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedListener(this.eventService,L.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this)),this.addManagedListener(this.eventService,L.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.onPivotModeChanged(),this.setupHeaderHeight();const s=this.onHeaderContextMenu.bind(this);this.addManagedListener(this.eGui,"contextmenu",s),this.mockContextMenuForIPad(s),this.ctrlsService.registerGridHeaderCtrl(this)}setupHeaderHeight(){const e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListener("headerHeight",e),this.addManagedPropertyListener("pivotHeaderHeight",e),this.addManagedPropertyListener("groupHeaderHeight",e),this.addManagedPropertyListener("pivotGroupHeaderHeight",e),this.addManagedPropertyListener("floatingFiltersHeight",e),this.addManagedListener(this.eventService,L.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,L.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,e),this.addManagedListener(this.eventService,L.EVENT_GRID_STYLES_CHANGED,e),this.addManagedListener(this.eventService,L.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,e)}getHeaderHeight(){return this.headerHeight}setHeaderHeight(){const{columnModel:e}=this;let t=0,i=e.getHeaderRowCount(),s;this.filterManager.hasFloatingFilters()&&(i++,t=1);const l=this.columnModel.getColumnGroupHeaderRowHeight(),u=this.columnModel.getColumnHeaderRowHeight(),g=1+t,C=i-g;if(s=t*e.getFloatingFiltersHeight(),s+=C*l,s+=u,this.headerHeight===s)return;this.headerHeight=s;const S=`${s+1}px`;this.comp.setHeightAndMinHeight(S),this.eventService.dispatchEvent({type:L.EVENT_HEADER_HEIGHT_CHANGED})}onPivotModeChanged(){const e=this.columnModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",e),this.comp.addOrRemoveCssClass("ag-pivot-off",!e)}onDisplayedColumnsChanged(){const t=this.columnModel.getAllDisplayedColumns().some(i=>i.isSpanHeaderHeight());this.comp.addOrRemoveCssClass("ag-header-allow-overflow",t)}onTabKeyDown(e){const t=this.gridOptionsService.get("enableRtl"),i=e.shiftKey!==t?2:3;(this.headerNavigationService.navigateHorizontally(i,!0,e)||this.focusService.focusNextGridCoreContainer(e.shiftKey))&&e.preventDefault()}handleKeyDown(e){let t=null;switch(e.key){case Q.LEFT:t=2;case Q.RIGHT:ce(t)||(t=3),this.headerNavigationService.navigateHorizontally(t,!1,e);break;case Q.UP:t=0;case Q.DOWN:ce(t)||(t=1),this.headerNavigationService.navigateVertically(t,null,e)&&e.preventDefault();break;default:return}}onFocusOut(e){const t=this.gridOptionsService.getDocument(),{relatedTarget:i}=e;!i&&this.eGui.contains(t.activeElement)||this.eGui.contains(i)||this.focusService.clearFocusedHeader()}onHeaderContextMenu(e,t,i){if(!e&&!i||!this.menuService.isHeaderContextMenuEnabled())return;const{target:s}=e??t;(s===this.eGui||s===this.ctrlsService.getHeaderRowContainerCtrl().getViewport())&&this.menuService.showHeaderContextMenu(void 0,e,i)}mockContextMenuForIPad(e){if(!Xs())return;const t=new pi(this.eGui),i=s=>{e(void 0,s.touchStart,s.touchEvent)};this.addManagedListener(t,pi.EVENT_LONG_TAP,i),this.addDestroyFunc(()=>t.destroy())}};E([N("headerNavigationService")],Zo.prototype,"headerNavigationService",2);E([N("focusService")],Zo.prototype,"focusService",2);E([N("columnModel")],Zo.prototype,"columnModel",2);E([N("ctrlsService")],Zo.prototype,"ctrlsService",2);E([N("filterManager")],Zo.prototype,"filterManager",2);E([N("menuService")],Zo.prototype,"menuService",2);var ec=class Wg extends Ze{constructor(){super(Wg.TEMPLATE)}postConstruct(){const t={addOrRemoveCssClass:(n,l)=>this.addOrRemoveCssClass(n,l),setHeightAndMinHeight:n=>{this.getGui().style.height=n,this.getGui().style.minHeight=n}};this.createManagedBean(new Zo).setComp(t,this.getGui(),this.getFocusableElement());const s=n=>{this.createManagedBean(n),this.appendChild(n)};s(new td("left")),s(new td(null)),s(new td("right"))}};ec.TEMPLATE='<div class="ag-header" role="presentation"/>';E([Ce],ec.prototype,"postConstruct",1);var Ob=ec,Tn=class extends ge{addResizeBar(e){const t={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0};return this.dragService.addDragSource(t),()=>this.dragService.removeDragSource(t)}onDragStart(e,t){this.dragStartX=t.clientX,this.setResizeIcons();const i=t instanceof MouseEvent&&t.shiftKey===!0;e.onResizeStart(i)}setResizeIcons(){const e=this.ctrlsService.getGridCtrl();e.setResizeCursor(!0),e.disableUserSelect(!0)}onDragStop(e,t){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){const e=this.ctrlsService.getGridCtrl();e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}};E([N("dragService")],Tn.prototype,"dragService",2);E([N("ctrlsService")],Tn.prototype,"ctrlsService",2);Tn=E([Fe("horizontalResizeService")],Tn);var lo=class extends ge{hideActiveMenu(){this.hidePopup&&this.hidePopup()}showMenuAfterMouseEvent(e,t,i){this.showPopup(e,s=>{this.popupService.positionPopupUnderMouseEvent({column:e,type:i,mouseEvent:t,ePopup:s})},i,t.target,this.menuService.isLegacyMenuEnabled())}showMenuAfterButtonClick(e,t,i){let s=-1,n="left";const l=this.menuService.isLegacyMenuEnabled();!l&&this.gridOptionsService.get("enableRtl")&&(s=1,n="right");let u=l?void 0:4*s,g=l?void 0:4;this.showPopup(e,C=>{this.popupService.positionPopupByComponent({type:i,eventSource:t,ePopup:C,nudgeX:u,nudgeY:g,alignSide:n,keepWithinBounds:!0,position:"under",column:e})},i,t,l)}showPopup(e,t,i,s,n){const l=e?this.filterManager.getOrCreateFilterWrapper(e,"COLUMN_MENU"):void 0;if(!l||!e)throw new Error("AG Grid - unable to show popup filter, filter instantiation failed");const u=document.createElement("div");jt(u,"presentation"),u.classList.add("ag-menu"),n||u.classList.add("ag-filter-menu"),this.tabListener=this.addManagedListener(u,"keydown",z=>this.trapFocusWithin(z,u)),l.guiPromise.then(z=>u.appendChild(z));let g;const C=()=>{var z;return(z=l.filterPromise)==null?void 0:z.then(U=>{var X;return(X=U?.afterGuiDetached)==null?void 0:X.call(U)})},S=this.menuService.isColumnMenuAnchoringEnabled()?s??this.ctrlsService.getGridBodyCtrl().getGui():void 0,A=z=>{e.setMenuVisible(!1,"contextMenu");const U=z instanceof KeyboardEvent;if(this.tabListener&&(this.tabListener=this.tabListener()),U&&s&&Ui(s)){const X=this.focusService.findTabbableParent(s);X&&X.focus()}C(),this.dispatchVisibleChangedEvent(!1,i,e)},D=this.localeService.getLocaleTextFunc(),M=n&&i!=="columnFilter"?D("ariaLabelColumnMenu","Column Menu"):D("ariaLabelColumnFilter","Column Filter"),W=this.popupService.addPopup({modal:!0,eChild:u,closeOnEsc:!0,closedCallback:A,positionCallback:()=>t(u),anchorToElement:S,ariaLabel:M});W&&(this.hidePopup=g=W.hideFunc),l.filterPromise.then(z=>{t(u),z.afterGuiAttached&&z.afterGuiAttached({container:i,hidePopup:g})}),e.setMenuVisible(!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,i,e)}trapFocusWithin(e,t){e.key!==Q.TAB||e.defaultPrevented||this.focusService.findNextFocusableElement(t,!1,e.shiftKey)||(e.preventDefault(),this.focusService.focusInto(t,e.shiftKey))}dispatchVisibleChangedEvent(e,t,i){const s={type:L.EVENT_COLUMN_MENU_VISIBLE_CHANGED,visible:e,switchingTab:!1,key:t,column:i??null};this.eventService.dispatchEvent(s)}isMenuEnabled(e){var t;return e.isFilterAllowed()&&((t=e.getColDef().menuTabs)!=null?t:["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}};E([N("filterManager")],lo.prototype,"filterManager",2);E([N("popupService")],lo.prototype,"popupService",2);E([N("focusService")],lo.prototype,"focusService",2);E([N("ctrlsService")],lo.prototype,"ctrlsService",2);E([N("menuService")],lo.prototype,"menuService",2);lo=E([Fe("filterMenuFactory")],lo);var tc=class extends ge{constructor(e){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1;const{comp:t,eTopGuard:i,eBottomGuard:s,focusTrapActive:n,forceFocusOutWhenTabGuardsAreEmpty:l,focusInnerElement:u,onFocusIn:g,onFocusOut:C,shouldStopEventPropagation:S,onTabKeyDown:A,handleKeyDown:D,eFocusableElement:M}=e;this.comp=t,this.eTopGuard=i,this.eBottomGuard=s,this.providedFocusInnerElement=u,this.eFocusableElement=M,this.focusTrapActive=!!n,this.forceFocusOutWhenTabGuardsAreEmpty=!!l,this.providedFocusIn=g,this.providedFocusOut=C,this.providedShouldStopEventPropagation=S,this.providedOnTabKeyDown=A,this.providedHandleKeyDown=D}postConstruct(){this.createManagedBean(new go(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(e=>this.addManagedListener(e,"focus",this.onFocus.bind(this)))}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1}activateTabGuards(){if(this.forcingFocusOut)return;const e=this.gridOptionsService.get("tabIndex");this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}if(this.forceFocusOutWhenTabGuardsAreEmpty&&this.focusService.findFocusableElements(this.eFocusableElement,".ag-tab-guard").length===0){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}const t=e.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t)}findNextElementOutsideAndFocus(e){const t=this.gridOptionsService.getDocument(),i=this.focusService.findFocusableElements(t.body,null,!0),s=i.indexOf(e?this.eTopGuard:this.eBottomGuard);if(s===-1)return;let n,l;e?(n=0,l=s):(n=s+1,l=i.length);const u=i.slice(n,l),g=this.gridOptionsService.get("tabIndex");u.sort((C,S)=>{const A=parseInt(C.getAttribute("tabindex")||"0"),D=parseInt(S.getAttribute("tabindex")||"0");return D===g?1:A===g?-1:A===0?1:D===0?-1:A-D}),u[e?u.length-1:0].focus()}onFocusIn(e){this.focusTrapActive||(this.providedFocusIn&&this.providedFocusIn(e),this.deactivateTabGuards())}onFocusOut(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(e);return}if(this.focusTrapActive||e.defaultPrevented)return;const t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();const i=this.getNextFocusableElement(e.shiftKey);t&&setTimeout(()=>this.activateTabGuards(),0),i&&(i.focus(),e.preventDefault())}focusInnerElement(e=!1){const t=this.focusService.findFocusableElements(this.eFocusableElement);this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(t.length-1,1)),t.length&&t[e?t.length-1:0].focus({preventScroll:!0})}getNextFocusableElement(e){return this.focusService.findNextFocusableElement(this.eFocusableElement,!1,e)}forceFocusOutOfContainer(e=!1){if(this.forcingFocusOut)return;const t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,t.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(e){return e===this.eTopGuard||e===this.eBottomGuard}};E([N("focusService")],tc.prototype,"focusService",2);E([Ce],tc.prototype,"postConstruct",1);var oa=class extends Ze{initialiseTabGuard(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.getFocusableElement();const t=[this.eTopGuard,this.eBottomGuard],i={setTabIndex:s=>{t.forEach(n=>s!=null?n.setAttribute("tabindex",s):n.removeAttribute("tabindex"))}};this.addTabGuards(this.eTopGuard,this.eBottomGuard),this.tabGuardCtrl=this.createManagedBean(new tc({comp:i,focusTrapActive:!!e.focusTrapActive,eTopGuard:this.eTopGuard,eBottomGuard:this.eBottomGuard,eFocusableElement:this.eFocusableElement,onFocusIn:e.onFocusIn,onFocusOut:e.onFocusOut,focusInnerElement:e.focusInnerElement,handleKeyDown:e.handleKeyDown,onTabKeyDown:e.onTabKeyDown,shouldStopEventPropagation:e.shouldStopEventPropagation,forceFocusOutWhenTabGuardsAreEmpty:e.forceFocusOutWhenTabGuardsAreEmpty}))}createTabGuard(e){const t=document.createElement("div"),i=e==="top"?"ag-tab-guard-top":"ag-tab-guard-bottom";return t.classList.add("ag-tab-guard",i),jt(t,"presentation"),t}addTabGuards(e,t){this.eFocusableElement.insertAdjacentElement("afterbegin",e),this.eFocusableElement.insertAdjacentElement("beforeend",t)}removeAllChildrenExceptTabGuards(){const e=[this.eTopGuard,this.eBottomGuard];Jt(this.getFocusableElement()),this.addTabGuards(...e)}forceFocusOutOfContainer(e=!1){this.tabGuardCtrl.forceFocusOutOfContainer(e)}appendChild(e,t){jn(e)||(e=e.getGui());const{eBottomGuard:i}=this;i?i.insertAdjacentElement("beforebegin",e):super.appendChild(e,t)}},Pl=class zg extends oa{constructor(t){super(zg.getTemplate(t.cssClass)),this.items=[],this.tabbedItemScrollMap=new Map,this.params=t}postConstruct(){this.setupHeader(),this.params.items&&this.params.items.forEach(t=>this.addItem(t)),this.initialiseTabGuard({onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),focusInnerElement:this.focusInnerElement.bind(this),focusTrapActive:!0}),this.addDestroyFunc(()=>{var t,i,s;return(s=(i=(t=this.activeItem)==null?void 0:t.tabbedItem)==null?void 0:i.afterDetachedCallback)==null?void 0:s.call(i)})}static getTemplate(t){return`<div class="ag-tabs ${t}">
            <div ref="eHeader"></div>
            <div ref="eBody" role="presentation" class="ag-tabs-body ${t?`${t}-body`:""}"></div>
        </div>`}setupHeader(){const{enableCloseButton:t,cssClass:i}=this.params,s=(n,l)=>{n.classList.add(`ag-tabs-${l}`),i&&n.classList.add(`${i}-${l}`)};t?(this.setupCloseButton(s),this.eTabHeader=this.gridOptionsService.getDocument().createElement("div"),s(this.eHeader,"header-wrapper"),jt(this.eHeader,"presentation"),this.eHeader.appendChild(this.eTabHeader)):this.eTabHeader=this.eHeader,jt(this.eTabHeader,"tablist"),s(this.eTabHeader,"header")}setupCloseButton(t){const i=this.gridOptionsService.getDocument(),s=i.createElement("button");t(s,"close-button");const n=Wt("close",this.gridOptionsService,void 0,!0);fs(s,this.params.closeButtonAriaLabel),s.appendChild(n),this.addManagedListener(s,"click",()=>{var u,g;return(g=(u=this.params).onCloseClicked)==null?void 0:g.call(u)});const l=i.createElement("div");t(l,"close-button-wrapper"),jt(l,"presentation"),l.appendChild(s),this.eHeader.appendChild(l),this.eCloseButton=s}handleKeyDown(t){const i=this.gridOptionsService.getDocument();switch(t.key){case Q.RIGHT:case Q.LEFT:if(!this.eTabHeader.contains(i.activeElement))return;const s=t.key===Q.RIGHT,n=this.gridOptionsService.get("enableRtl"),l=this.items.indexOf(this.activeItem),u=s!==n?Math.min(l+1,this.items.length-1):Math.max(l-1,0);if(l===u)return;t.preventDefault();const g=this.items[u];this.showItemWrapper(g),g.eHeaderButton.focus();break;case Q.UP:case Q.DOWN:t.stopPropagation();break}}onTabKeyDown(t){var i,s,n,l;if(t.defaultPrevented)return;const{focusService:u,eHeader:g,eBody:C,activeItem:S,params:A}=this,{suppressTrapFocus:D,enableCloseButton:M}=A,z=this.gridOptionsService.getDocument().activeElement,U=t.target,X=t.shiftKey;if(g.contains(z)){t.preventDefault(),M&&X&&!((i=this.eCloseButton)!=null&&i.contains(z))?(s=this.eCloseButton)==null||s.focus():D&&X?(n=this.focusService.findFocusableElementBeforeTabGuard(this.gridOptionsService.getDocument().body,U))==null||n.focus():this.focusBody(t.shiftKey);return}let q=null;if(u.isTargetUnderManagedComponent(C,U)&&(X&&(q=this.focusService.findFocusableElementBeforeTabGuard(C,U)),!q&&!D&&(q=S.eHeaderButton)),!q&&C.contains(z)&&(q=u.findNextFocusableElement(C,!1,X),!q)){t.preventDefault(),D&&!X?this.forceFocusOutOfContainer(X):M&&!X?(l=this.eCloseButton)==null||l.focus():this.focusHeader();return}q&&(t.preventDefault(),q.focus())}focusInnerElement(t){t?this.focusHeader():this.focusBody(!0)}focusHeader(t){this.activeItem.eHeaderButton.focus({preventScroll:t})}focusBody(t){this.focusService.focusInto(this.eBody,t)}setAfterAttachedParams(t){this.afterAttachedParams=t}showFirstItem(){this.items.length>0&&this.showItemWrapper(this.items[0])}addItem(t){const i=document.createElement("span");jt(i,"tab"),i.setAttribute("tabindex","-1"),i.appendChild(t.title),i.classList.add("ag-tab"),this.eTabHeader.appendChild(i),fs(i,t.titleLabel);const s={tabbedItem:t,eHeaderButton:i};this.items.push(s),i.addEventListener("click",this.showItemWrapper.bind(this,s))}showItem(t){const i=this.items.find(s=>s.tabbedItem===t);i&&this.showItemWrapper(i)}showItemWrapper(t){var i,s,n,l,u,g;const{tabbedItem:C,eHeaderButton:S}=t;if((s=(i=this.params).onItemClicked)==null||s.call(i,{item:C}),this.activeItem===t){(l=(n=this.params).onActiveItemClicked)==null||l.call(n);return}this.lastScrollListener&&(this.lastScrollListener=this.lastScrollListener()),Jt(this.eBody),C.bodyPromise.then(A=>{this.eBody.appendChild(A);const D=!this.focusService.isKeyboardMode();if(this.params.suppressFocusBodyOnOpen||this.focusService.focusInto(this.eBody,!1,D),C.afterAttachedCallback&&C.afterAttachedCallback(this.afterAttachedParams),this.params.keepScrollPosition){const M=C.getScrollableContainer&&C.getScrollableContainer()||A;this.lastScrollListener=this.addManagedListener(M,"scroll",()=>{this.tabbedItemScrollMap.set(C.name,M.scrollTop)});const W=this.tabbedItemScrollMap.get(C.name);W!==void 0&&setTimeout(()=>{M.scrollTop=W},0)}}),this.activeItem&&(this.activeItem.eHeaderButton.classList.remove("ag-tab-selected"),(g=(u=this.activeItem.tabbedItem).afterDetachedCallback)==null||g.call(u)),S.classList.add("ag-tab-selected"),this.activeItem=t}};E([N("focusService")],Pl.prototype,"focusService",2);E([xe("eHeader")],Pl.prototype,"eHeader",2);E([xe("eBody")],Pl.prototype,"eBody",2);E([Ce],Pl.prototype,"postConstruct",1);var kb=50,_d=class extends ge{constructor(){super(...arguments),this.polyfillFunctions=[]}observeResize(e,t){const i=this.gridOptionsService.getWindow(),s=()=>{const g=new i.ResizeObserver(t);return g.observe(e),()=>g.disconnect()},n=()=>{var g,C;let S=(g=e?.clientWidth)!=null?g:0,A=(C=e?.clientHeight)!=null?C:0,D=!0;const M=()=>{var W,z;if(D){const U=(W=e?.clientWidth)!=null?W:0,X=(z=e?.clientHeight)!=null?z:0;(U!==S||X!==A)&&(S=U,A=X,t()),this.doNextPolyfillTurn(M)}};return M(),()=>D=!1},l=this.gridOptionsService.get("suppressBrowserResizeObserver");return!!i.ResizeObserver&&!l?s():this.getFrameworkOverrides().wrapIncoming(()=>n(),"resize-observer")}doNextPolyfillTurn(e){this.polyfillFunctions.push(e),this.schedulePolyfill()}schedulePolyfill(){if(this.polyfillScheduled)return;const e=()=>{const t=this.polyfillFunctions;this.polyfillScheduled=!1,this.polyfillFunctions=[],t.forEach(i=>i())};this.polyfillScheduled=!0,window.setTimeout(e,kb)}};_d=E([Fe("resizeObserverService")],_d);var Rr=class extends ge{constructor(){super(...arguments),this.createTasksP1={list:[],sorted:!1},this.createTasksP2={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastPage=0,this.lastScrollTop=0,this.taskCount=0,this.cancelledTasks=new Set}setScrollTop(e){const t=this.gridOptionsService.get("pagination");if(this.scrollGoingDown=e>=this.lastScrollTop,t&&e===0){const i=this.paginationProxy.getCurrentPage();i!==this.lastPage&&(this.lastPage=i,this.scrollGoingDown=!0)}this.lastScrollTop=e}init(){this.useAnimationFrame=!this.gridOptionsService.get("suppressAnimationFrame")}isOn(){return this.useAnimationFrame}verifyAnimationFrameOn(e){this.useAnimationFrame===!1&&console.warn(`AG Grid: AnimationFrameService.${e} called but animation frames are off`)}createTask(e,t,i){this.verifyAnimationFrameOn(i);const s={task:e,index:t,createOrder:++this.taskCount};this.addTaskToList(this[i],s),this.schedule()}cancelTask(e){this.cancelledTasks.add(e)}addTaskToList(e,t){e.list.push(t),e.sorted=!1}sortTaskList(e){if(e.sorted)return;const t=this.scrollGoingDown?1:-1;e.list.sort((i,s)=>i.index!==s.index?t*(s.index-i.index):s.createOrder-i.createOrder),e.sorted=!0}addDestroyTask(e){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(e),this.schedule()}executeFrame(e){this.verifyAnimationFrameOn("executeFrame");const t=this.createTasksP1,i=t.list,s=this.createTasksP2,n=s.list,l=this.destroyTasks,u=new Date().getTime();let g=new Date().getTime()-u;const C=e<=0,S=this.ctrlsService.getGridBodyCtrl();for(;C||g<e;){if(!S.getScrollFeature().scrollGridIfNeeded()){let D;if(i.length)this.sortTaskList(t),D=i.pop().task;else if(n.length)this.sortTaskList(s),D=n.pop().task;else if(l.length)D=l.pop();else{this.cancelledTasks.clear();break}this.cancelledTasks.has(D)||D()}g=new Date().getTime()-u}i.length||n.length||l.length?this.requestFrame():this.stopTicking()}stopTicking(){this.ticking=!1}flushAllFrames(){!this.useAnimationFrame||this.executeFrame(-1)}schedule(){!this.useAnimationFrame||this.ticking||(this.ticking=!0,this.requestFrame())}requestFrame(){const e=this.executeFrame.bind(this,60);this.requestAnimationFrame(e)}requestAnimationFrame(e){const t=this.gridOptionsService.getWindow();t.requestAnimationFrame?t.requestAnimationFrame(e):t.webkitRequestAnimationFrame?t.webkitRequestAnimationFrame(e):t.setTimeout(e,0)}isQueueEmpty(){return!this.ticking}debounce(e){let t=!1;return()=>{if(!this.isOn()){window.setTimeout(e,0);return}t||(t=!0,this.addDestroyTask(()=>{t=!1,e()}))}}};E([N("ctrlsService")],Rr.prototype,"ctrlsService",2);E([N("paginationProxy")],Rr.prototype,"paginationProxy",2);E([Ce],Rr.prototype,"init",1);Rr=E([Fe("animationFrameService")],Rr);var Pn=class extends ge{postConstruct(){this.isClientSideRowModel=this.rowModel.getType()==="clientSide"}expandRows(e){if(!this.isClientSideRowModel)return;const t=new Set(e);this.rowModel.forEachNode(i=>{i.id&&t.has(i.id)&&(i.expanded=!0)}),this.onGroupExpandedOrCollapsed()}getExpandedRows(){const e=[];return this.rowModel.forEachNode(({expanded:t,id:i})=>{t&&i&&e.push(i)}),e}expandAll(e){!this.isClientSideRowModel||this.rowModel.expandOrCollapseAll(e)}setRowNodeExpanded(e,t,i){e&&(i&&e.parent&&e.parent.level!==-1&&this.setRowNodeExpanded(e.parent,t,i),e.setExpanded(t))}onGroupExpandedOrCollapsed(){!this.isClientSideRowModel||this.rowModel.refreshModel({step:"map"})}};E([N("rowModel")],Pn.prototype,"rowModel",2);E([Ce],Pn.prototype,"postConstruct",1);Pn=E([Fe("expansionService")],Pn);var ms=class extends ge{postConstruct(){var e;this.activeMenuFactory=(e=this.enterpriseMenuFactory)!=null?e:this.filterMenuFactory}showColumnMenu(e){this.showColumnMenuCommon(this.activeMenuFactory,e,"columnMenu")}showFilterMenu(e){const t=this.enterpriseMenuFactory&&this.isLegacyMenuEnabled()?this.enterpriseMenuFactory:this.filterMenuFactory;this.showColumnMenuCommon(t,e,e.containerType,!0)}showHeaderContextMenu(e,t,i){this.activeMenuFactory.showMenuAfterContextMenuEvent(e,t,i)}showContextMenu(e){var t,i,s;const{column:n,anchorToElement:l,rowNode:u,value:g}=e;(s=this.contextMenuFactory)==null||s.onContextMenu((t=e.mouseEvent)!=null?t:null,(i=e.touchEvent)!=null?i:null,u??null,n??null,g,l)}showColumnChooser(e){var t;(t=this.columnChooserFactory)==null||t.showColumnChooser(e)}hidePopupMenu(){var e;(e=this.contextMenuFactory)==null||e.hideActiveMenu(),this.activeMenuFactory.hideActiveMenu()}hideColumnChooser(){var e;(e=this.columnChooserFactory)==null||e.hideActiveColumnChooser()}isColumnMenuInHeaderEnabled(e){const{suppressMenu:t,suppressHeaderMenuButton:i}=e.getColDef();return!(i??t)&&this.activeMenuFactory.isMenuEnabled(e)&&(this.isLegacyMenuEnabled()||!!this.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(e){return!e.getColDef().suppressHeaderFilterButton&&this.filterManager.isFilterAllowed(e)}isHeaderContextMenuEnabled(e){return!e?.getColDef().suppressHeaderContextMenu&&this.getColumnMenuType()==="new"}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){const e=!this.isSuppressMenuHide();return!(Xs()&&e)}isHeaderFilterButtonEnabled(e){return this.isFilterMenuInHeaderEnabled(e)&&!this.isLegacyMenuEnabled()&&!this.isFloatingFilterButtonDisplayed(e)}isFilterMenuItemEnabled(e){return this.filterManager.isFilterAllowed(e)&&!this.isLegacyMenuEnabled()&&!this.isFilterMenuInHeaderEnabled(e)&&!this.isFloatingFilterButtonDisplayed(e)}isColumnMenuAnchoringEnabled(){return!this.isLegacyMenuEnabled()}areAdditionalColumnMenuItemsEnabled(){return this.getColumnMenuType()==="new"}isLegacyMenuEnabled(){return this.getColumnMenuType()==="legacy"}isFloatingFilterButtonEnabled(e){var t;const i=e.getColDef(),s=(t=i.floatingFilterComponentParams)==null?void 0:t.suppressFilterButton;return s!=null&&Ue("As of v31.1, 'colDef.floatingFilterComponentParams.suppressFilterButton' is deprecated. Use 'colDef.suppressFloatingFilterButton' instead."),i.suppressFloatingFilterButton==null?!s:!i.suppressFloatingFilterButton}getColumnMenuType(){var e;return(e=this.gridOptionsService.get("columnMenu"))!=null?e:"legacy"}isFloatingFilterButtonDisplayed(e){return!!e.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(e)}isSuppressMenuHide(){const e=this.gridOptionsService.get("suppressMenuHide");return this.isLegacyMenuEnabled()||this.gridOptionsService.exists("suppressMenuHide")?e:!0}showColumnMenuCommon(e,t,i,s){const{column:n,positionBy:l}=t;if(l==="button"){const{buttonElement:u}=t;e.showMenuAfterButtonClick(n,u,i,s)}else if(l==="mouse"){const{mouseEvent:u}=t;e.showMenuAfterMouseEvent(n,u,i,s)}else n&&(this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(n,"auto"),this.animationFrameService.requestAnimationFrame(()=>{const u=this.ctrlsService.getHeaderRowContainerCtrl(n.getPinned()).getHeaderCtrlForColumn(n);e.showMenuAfterButtonClick(n,u.getAnchorElementForMenu(s),i,!0)}))}};E([mt("enterpriseMenuFactory")],ms.prototype,"enterpriseMenuFactory",2);E([N("filterMenuFactory")],ms.prototype,"filterMenuFactory",2);E([mt("contextMenuFactory")],ms.prototype,"contextMenuFactory",2);E([N("ctrlsService")],ms.prototype,"ctrlsService",2);E([N("animationFrameService")],ms.prototype,"animationFrameService",2);E([mt("columnChooserFactory")],ms.prototype,"columnChooserFactory",2);E([N("filterManager")],ms.prototype,"filterManager",2);E([Ce],ms.prototype,"postConstruct",1);ms=E([Fe("menuService")],ms);var No=class extends ge{postConstruct(){this.ctrlsService.whenReady(e=>{this.centerRowContainerCtrl=e.centerRowContainerCtrl})}getPreferredWidthForColumn(e,t){const i=this.getHeaderCellForColumn(e);if(!i)return-1;const s=this.rowRenderer.getAllCellsForColumn(e);return t||s.push(i),this.addElementsToContainerAndGetWidth(s)}getPreferredWidthForColumnGroup(e){const t=this.getHeaderCellForColumn(e);return t?this.addElementsToContainerAndGetWidth([t]):-1}addElementsToContainerAndGetWidth(e){const t=document.createElement("form");t.style.position="fixed";const i=this.centerRowContainerCtrl.getContainerElement();e.forEach(l=>this.cloneItemIntoDummy(l,t)),i.appendChild(t);const s=t.offsetWidth;i.removeChild(t);const n=this.getAutoSizePadding();return s+n}getAutoSizePadding(){return this.gridOptionsService.get("autoSizePadding")}getHeaderCellForColumn(e){let t=null;return this.ctrlsService.getHeaderRowContainerCtrls().forEach(i=>{const s=i.getHtmlElementForColumnHeader(e);s!=null&&(t=s)}),t}cloneItemIntoDummy(e,t){const i=e.cloneNode(!0);i.style.width="",i.style.position="static",i.style.left="";const s=document.createElement("div"),n=s.classList;["ag-header-cell","ag-header-group-cell"].some(g=>i.classList.contains(g))?(n.add("ag-header","ag-header-row"),s.style.position="static"):n.add("ag-row");let u=e.parentElement;for(;u;){if(["ag-header-row","ag-row"].some(C=>u.classList.contains(C))){for(let C=0;C<u.classList.length;C++){const S=u.classList[C];S!="ag-row-position-absolute"&&n.add(S)}break}u=u.parentElement}s.appendChild(i),t.appendChild(s)}};E([N("rowRenderer")],No.prototype,"rowRenderer",2);E([N("ctrlsService")],No.prototype,"ctrlsService",2);E([N("rowCssClassCalculator")],No.prototype,"rowCssClassCalculator",2);E([Ce],No.prototype,"postConstruct",1);No=E([Fe("autoWidthCalculator")],No);var ra=class extends ge{constructor(e,t){super(),this.createRowCon=e,this.destroyRowCtrls=t,this.stickyRowCtrls=[],this.containerHeight=0}postConstruct(){this.isClientSide=this.rowModel.getType()==="clientSide",this.ctrlsService.whenReady(e=>{this.gridBodyCtrl=e.gridBodyCtrl})}getStickyRowCtrls(){return this.stickyRowCtrls}checkStickyRows(){let e=0;if(!this.gridOptionsService.isGroupRowsSticky())return this.refreshNodesAndContainerHeight([],e);const t=[],i=this.rowRenderer.getFirstVisibleVerticalPixel(),s=l=>{var u,g,C;t.push(l);let S;if(this.isClientSide){let D=l;for(;D.isExpandable()&&D.expanded;)if(D.master)D=D.detailNode;else if(D.childrenAfterSort){if(D.childrenAfterSort.length===0)break;D=yt(D.childrenAfterSort)}S=D.rowTop+D.rowHeight}else if(l.master)S=l.detailNode.rowTop+l.detailNode.rowHeight;else{const D=(u=l.childStore)==null?void 0:u.getStoreBounds();S=((g=D?.heightPx)!=null?g:0)+((C=D?.topPx)!=null?C:0)}const A=i+e+l.rowHeight;S<A?l.stickyRowTop=e+(S-A):l.stickyRowTop=e,e=0,t.forEach(D=>{const M=D.stickyRowTop+D.rowHeight;e<M&&(e=M)})};let n=0;for(;;){const l=i+e,u=this.rowModel.getRowIndexAtPixel(l),g=this.rowModel.getRow(u);if(g==null||g.level<0||n++===100)break;const C=[];let S=g.parent;for(;S.level>=0;)C.push(S),S=S.parent;const A=C.reverse().find(D=>t.indexOf(D)<0&&D.displayed);if(A){s(A);continue}if(g.isExpandable()&&g.expanded&&g.rowTop<l){s(g);continue}break}return this.refreshNodesAndContainerHeight(t,e)}refreshStickyNode(e){const t=[];for(let i=0;i<this.stickyRowCtrls.length;i++){const s=this.stickyRowCtrls[i].getRowNode();s!==e&&t.push(s)}this.refreshNodesAndContainerHeight(t,this.containerHeight)&&this.checkStickyRows()}refreshNodesAndContainerHeight(e,t){let i=!1;const s=this.stickyRowCtrls.filter(g=>e.indexOf(g.getRowNode())===-1),n=e.filter(g=>this.stickyRowCtrls.findIndex(C=>C.getRowNode()===g)===-1);(s.length||n.length)&&(i=!0);const l={};s.forEach(g=>{l[g.getRowNode().id]=g,this.stickyRowCtrls=this.stickyRowCtrls.filter(C=>C!==g)});for(const g of Object.values(l))g.getRowNode().sticky=!1;this.destroyRowCtrls(l,!1);const u=n.map(g=>(g.sticky=!0,this.createRowCon(g,!1,!1)));return this.stickyRowCtrls.push(...u),this.stickyRowCtrls.forEach(g=>g.setRowTop(g.getRowNode().stickyRowTop)),this.stickyRowCtrls.sort((g,C)=>C.getRowNode().rowIndex-g.getRowNode().rowIndex),this.containerHeight!==t&&(this.containerHeight=t,this.gridBodyCtrl.setStickyTopHeight(t),i=!0),i}};E([N("rowModel")],ra.prototype,"rowModel",2);E([N("rowRenderer")],ra.prototype,"rowRenderer",2);E([N("ctrlsService")],ra.prototype,"ctrlsService",2);E([Ce],ra.prototype,"postConstruct",1);var Yi=class extends ge{constructor(){super(...arguments),this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{const e=()=>{this.getAllCellCtrls().forEach(l=>l.onRangeSelectionChanged())},t=()=>{this.getAllCellCtrls().forEach(l=>l.updateRangeBordersIfRangeCount())},i=()=>{this.eventService.addEventListener(L.EVENT_RANGE_SELECTION_CHANGED,e),this.eventService.addEventListener(L.EVENT_COLUMN_MOVED,t),this.eventService.addEventListener(L.EVENT_COLUMN_PINNED,t),this.eventService.addEventListener(L.EVENT_COLUMN_VISIBLE,t)},s=()=>{this.eventService.removeEventListener(L.EVENT_RANGE_SELECTION_CHANGED,e),this.eventService.removeEventListener(L.EVENT_COLUMN_MOVED,t),this.eventService.removeEventListener(L.EVENT_COLUMN_PINNED,t),this.eventService.removeEventListener(L.EVENT_COLUMN_VISIBLE,t)};this.addDestroyFunc(()=>s()),this.addManagedPropertyListener("enableRangeSelection",l=>{l.currentValue?i():s()}),this.gridOptionsService.get("enableRangeSelection")&&i()}}postConstruct(){this.ctrlsService.whenReady(()=>{this.gridBodyCtrl=this.ctrlsService.getGridBodyCtrl(),this.initialise()})}initialise(){if(this.addManagedListener(this.eventService,L.EVENT_PAGINATION_CHANGED,this.onPageLoaded.bind(this)),this.addManagedListener(this.eventService,L.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,L.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,L.EVENT_BODY_SCROLL,this.onBodyScroll.bind(this)),this.addManagedListener(this.eventService,L.EVENT_BODY_HEIGHT_CHANGED,this.redraw.bind(this)),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListeners(["suppressCellFocus","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection"],()=>this.redrawRows()),this.gridOptionsService.isGroupRowsSticky()){const e=this.rowModel.getType();(e==="clientSide"||e==="serverSide")&&(this.stickyRowFeature=this.createManagedBean(new ra(this.createRowCon.bind(this),this.destroyRowCtrls.bind(this))))}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=this.gridOptionsService.isDomLayout("print"),this.embedFullWidthRows=this.printLayout||this.gridOptionsService.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gridOptionsService.get("keepDetailRows")){const e=this.getKeepDetailRowsCount(),t=e??3;this.cachedRowCtrls=new Nb(t)}}getKeepDetailRowsCount(){return this.gridOptionsService.get("keepDetailRowsCount")}getStickyTopRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyRowCtrls():[]}updateAllRowCtrls(){const e=no(this.rowCtrlsByRowIndex),t=no(this.zombieRowCtrls),i=this.cachedRowCtrls?this.cachedRowCtrls.getEntries():[];t.length>0||i.length>0?this.allRowCtrls=[...e,...t,...i]:this.allRowCtrls=e}onCellFocusChanged(e){this.getAllCellCtrls().forEach(t=>t.onCellFocused(e)),this.getFullWidthRowCtrls().forEach(t=>t.onFullWidthRowFocused(e))}registerCellEventListeners(){this.addManagedListener(this.eventService,L.EVENT_CELL_FOCUSED,e=>{this.onCellFocusChanged(e)}),this.addManagedListener(this.eventService,L.EVENT_CELL_FOCUS_CLEARED,()=>{this.onCellFocusChanged()}),this.addManagedListener(this.eventService,L.EVENT_FLASH_CELLS,e=>{this.getAllCellCtrls().forEach(t=>t.onFlashCells(e))}),this.addManagedListener(this.eventService,L.EVENT_COLUMN_HOVER_CHANGED,()=>{this.getAllCellCtrls().forEach(e=>e.onColumnHover())}),this.addManagedListener(this.eventService,L.EVENT_DISPLAYED_COLUMNS_CHANGED,()=>{this.getAllCellCtrls().forEach(e=>e.onDisplayedColumnsChanged())}),this.addManagedListener(this.eventService,L.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,()=>{this.printLayout&&this.getAllCellCtrls().forEach(e=>e.onLeftChanged())}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedListener(this.eventService,L.EVENT_GRID_COLUMNS_CHANGED,this.refreshListenersToColumnsForCellComps.bind(this)),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){this.destroyFuncsForColumnListeners.forEach(e=>e()),this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners(),this.columnModel.getAllGridColumns().forEach(t=>{const i=C=>{this.getAllCellCtrls().forEach(S=>{S.getColumn()===t&&C(S)})},s=()=>{i(C=>C.onLeftChanged())},n=()=>{i(C=>C.onWidthChanged())},l=()=>{i(C=>C.onFirstRightPinnedChanged())},u=()=>{i(C=>C.onLastLeftPinnedChanged())},g=()=>{i(C=>C.onColDefChanged())};t.addEventListener("leftChanged",s),t.addEventListener("widthChanged",n),t.addEventListener("firstRightPinnedChanged",l),t.addEventListener("lastLeftPinnedChanged",u),t.addEventListener("colDefChanged",g),this.destroyFuncsForColumnListeners.push(()=>{t.removeEventListener("leftChanged",s),t.removeEventListener("widthChanged",n),t.removeEventListener("firstRightPinnedChanged",l),t.removeEventListener("lastLeftPinnedChanged",u),t.removeEventListener("colDefChanged",g)})})}onDomLayoutChanged(){const e=this.gridOptionsService.isDomLayout("print"),t=e||this.gridOptionsService.get("embedFullWidthRows"),i=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,i&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;const e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){const t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)}getAllCellsForColumn(e){const t=[];return this.getAllRowCtrls().forEach(i=>{const s=i.getCellElement(e);s&&t.push(s)}),t}refreshFloatingRowComps(){this.refreshFloatingRows(this.topRowCtrls,this.pinnedRowModel.getPinnedTopRowData()),this.refreshFloatingRows(this.bottomRowCtrls,this.pinnedRowModel.getPinnedBottomRowData())}getTopRowCtrls(){return this.topRowCtrls}getCentreRowCtrls(){return this.allRowCtrls}getBottomRowCtrls(){return this.bottomRowCtrls}refreshFloatingRows(e,t){e.forEach(i=>{i.destroyFirstPass(),i.destroySecondPass()}),e.length=0,t&&t.forEach(i=>{const s=new Fo(i,this.beans,!1,!1,this.printLayout);e.push(s)})}onPinnedRowDataChanged(){const e={recycleRows:!0};this.redrawAfterModelUpdate(e)}redrawRow(e,t=!1){var i;if(e.sticky)this.stickyRowFeature.refreshStickyNode(e);else if((i=this.cachedRowCtrls)!=null&&i.has(e)){this.cachedRowCtrls.removeRow(e);return}else{const s=n=>{const l=n[e.rowIndex];!l||l.getRowNode()===e&&(l.destroyFirstPass(),l.destroySecondPass(),n[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":s(this.topRowCtrls);break;case"bottom":s(this.bottomRowCtrls);break;default:s(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}t||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){if(e!=null){e?.forEach(i=>this.redrawRow(i,!0)),this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()}getCellToRestoreFocusToAfterRefresh(e){const t=e?.suppressKeepFocus?null:this.focusService.getFocusCellToUseAfterRefresh();if(t==null)return null;const s=this.gridOptionsService.getDocument().activeElement,n=this.gridOptionsService.getDomData(s,Po.DOM_DATA_KEY_CELL_CTRL),l=this.gridOptionsService.getDomData(s,Fo.DOM_DATA_KEY_ROW_CTRL);return n||l?t:null}redrawAfterModelUpdate(e={}){this.getLockOnRefresh();const t=this.getCellToRestoreFocusToAfterRefresh(e);this.updateContainerHeights(),this.scrollToTopIfNewData(e);const i=!e.domLayoutChanged&&!!e.recycleRows,s=e.animate&&this.gridOptionsService.isAnimateRows(),n=i?this.getRowsToRecycle():null;i||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender(),this.stickyRowFeature&&this.stickyRowFeature.checkStickyRows(),this.recycleRows(n,s),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),t!=null&&this.restoreFocusedCell(t),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){const t=e.newData||e.newPage,i=this.gridOptionsService.get("suppressScrollOnNewData");t&&!i&&this.gridBodyCtrl.getScrollFeature().scrollToTop()}updateContainerHeights(){if(this.printLayout){this.rowContainerHeightService.setModelHeight(null);return}let e=this.paginationProxy.getCurrentPageHeight();e===0&&(e=1),this.rowContainerHeightService.setModelHeight(e)}getLockOnRefresh(){if(this.refreshInProgress)throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). To see what part of your code that caused the refresh check this stacktrace.");this.refreshInProgress=!0}releaseLockOnRefresh(){this.refreshInProgress=!1}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){e&&(this.focusService.setRestoreFocusedCell(e),this.onCellFocusChanged(this.beans.gridOptionsService.addGridCommonParams({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"mock"})))}stopEditing(e=!1){this.getAllRowCtrls().forEach(t=>{t.stopEditing(e)})}getAllCellCtrls(){const e=[],t=this.getAllRowCtrls(),i=t.length;for(let s=0;s<i;s++){const n=t[s].getAllCellCtrls(),l=n.length;for(let u=0;u<l;u++)e.push(n[u])}return e}getAllRowCtrls(){const e=this.stickyRowFeature&&this.stickyRowFeature.getStickyRowCtrls()||[],t=[...this.topRowCtrls,...this.bottomRowCtrls,...e];for(const i of Object.keys(this.rowCtrlsByRowIndex))t.push(this.rowCtrlsByRowIndex[i]);return t}addRenderedRowListener(e,t,i){const s=this.rowCtrlsByRowIndex[t];s&&s.addEventListener(e,i)}flashCells(e={}){this.getCellCtrls(e.rowNodes,e.columns).forEach(t=>t.flashCell(e))}refreshCells(e={}){const t={forceRefresh:e.force,newData:!1,suppressFlash:e.suppressFlash};this.getCellCtrls(e.rowNodes,e.columns).forEach(i=>i.refreshOrDestroyCell(t)),e.rowNodes&&(this.getRowCtrls(e.rowNodes).forEach(i=>{if(!i.isFullWidth())return;i.refreshFullWidth()||this.redrawRow(i.getRowNode(),!0)}),this.dispatchDisplayedRowsChanged(!1))}getCellRendererInstances(e){var t;const i=this.getCellCtrls(e.rowNodes,e.columns).map(l=>l.getCellRenderer()).filter(l=>l!=null);if((t=e.columns)!=null&&t.length)return i;const s=[],n=this.mapRowNodes(e.rowNodes);return this.getAllRowCtrls().forEach(l=>{if(n&&!this.isRowInMap(l.getRowNode(),n)||!l.isFullWidth())return;const u=l.getFullWidthCellRenderers();for(let g=0;g<u.length;g++){const C=u[g];C!=null&&s.push(C)}}),[...s,...i]}getCellEditorInstances(e){const t=[];return this.getCellCtrls(e.rowNodes,e.columns).forEach(i=>{const s=i.getCellEditor();s&&t.push(s)}),t}getEditingCells(){const e=[];return this.getAllCellCtrls().forEach(t=>{if(t.isEditing()){const i=t.getCellPosition();e.push(i)}}),e}mapRowNodes(e){if(!e)return;const t={top:{},bottom:{},normal:{}};return e.forEach(i=>{const s=i.id;i.rowPinned==="top"?t.top[s]=i:i.rowPinned==="bottom"?t.bottom[s]=i:t.normal[s]=i}),t}isRowInMap(e,t){const i=e.id,s=e.rowPinned;return s==="bottom"?t.bottom[i]!=null:s==="top"?t.top[i]!=null:t.normal[i]!=null}getRowCtrls(e){const t=this.mapRowNodes(e),i=this.getAllRowCtrls();return!e||!t?i:i.filter(s=>{const n=s.getRowNode();return this.isRowInMap(n,t)})}getCellCtrls(e,t){let i;ce(t)&&(i={},t.forEach(n=>{const l=this.columnModel.getGridColumn(n);ce(l)&&(i[l.getId()]=!0)}));const s=[];return this.getRowCtrls(e).forEach(n=>{n.getAllCellCtrls().forEach(l=>{const u=l.getColumn().getId();i&&!i[u]||s.push(l)})}),s}destroy(){this.removeAllRowComps(),super.destroy()}removeAllRowComps(){const e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}getRowsToRecycle(){const e=[];bi(this.rowCtrlsByRowIndex,(i,s)=>{s.getRowNode().id==null&&e.push(i)}),this.removeRowCtrls(e);const t={};return bi(this.rowCtrlsByRowIndex,(i,s)=>{const n=s.getRowNode();t[n.id]=s}),this.rowCtrlsByRowIndex={},t}removeRowCtrls(e,t=!1){e.forEach(i=>{const s=this.rowCtrlsByRowIndex[i];s&&(s.destroyFirstPass(t),s.destroySecondPass()),delete this.rowCtrlsByRowIndex[i]})}onBodyScroll(e){e.direction==="vertical"&&this.redraw({afterScroll:!0})}redraw(e={}){const{afterScroll:t}=e;let i;this.stickyRowFeature&&xh()&&(i=this.getCellToRestoreFocusToAfterRefresh()||void 0);const s=this.firstRenderedRow,n=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let l=!1;this.stickyRowFeature&&(l=this.stickyRowFeature.checkStickyRows());const u=this.firstRenderedRow!==s||this.lastRenderedRow!==n;if(!(t&&!l&&!u)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,t),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(t&&!l),i!=null)){const g=this.getCellToRestoreFocusToAfterRefresh();i!=null&&g==null&&(this.animationFrameService.flushAllFrames(),this.restoreFocusedCell(i))}}removeRowCompsNotToDraw(e,t){const i={};e.forEach(l=>i[l]=!0);const n=Object.keys(this.rowCtrlsByRowIndex).filter(l=>!i[l]);this.removeRowCtrls(n,t)}calculateIndexesToDraw(e){let t=xp(this.firstRenderedRow,this.lastRenderedRow);const i=(n,l)=>{const u=l.getRowNode().rowIndex;u!=null&&(u<this.firstRenderedRow||u>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(l)&&t.push(u)};bi(this.rowCtrlsByRowIndex,i),bi(e,i),t.sort((n,l)=>n-l);const s=[];for(let n=0;n<t.length;n++){const l=t[n],u=this.paginationProxy.getRow(l);u&&!u.sticky&&s.push(l)}return s}recycleRows(e,t=!1,i=!1){const s=this.calculateIndexesToDraw(e);(this.printLayout||i)&&(t=!1),this.removeRowCompsNotToDraw(s,!t),s.forEach(n=>{this.createOrUpdateRowCtrl(n,e,t,i)}),e&&(i&&!this.gridOptionsService.get("suppressAnimationFrame")&&!this.printLayout?this.beans.animationFrameService.addDestroyTask(()=>{this.destroyRowCtrls(e,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(e,t)),this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(e=!1){const t={type:L.EVENT_DISPLAYED_ROWS_CHANGED,afterScroll:e};this.eventService.dispatchEvent(t)}onDisplayedColumnsChanged(){const e=this.columnModel.isPinningLeft(),t=this.columnModel.isPinningRight();(this.pinningLeft!==e||t!==this.pinningRight)&&(this.pinningLeft=e,this.pinningRight=t,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){const e=[];this.getFullWidthRowCtrls().forEach(t=>{const i=t.getRowNode().rowIndex;e.push(i.toString())}),this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){const t=this.mapRowNodes(e);return this.getAllRowCtrls().filter(i=>{if(!i.isFullWidth())return!1;const s=i.getRowNode();return!(t!=null&&!this.isRowInMap(s,t))})}createOrUpdateRowCtrl(e,t,i,s){let n,l=this.rowCtrlsByRowIndex[e];if(l||(n=this.paginationProxy.getRow(e),ce(n)&&ce(t)&&t[n.id]&&n.alreadyRendered&&(l=t[n.id],t[n.id]=null)),!l)if(n||(n=this.paginationProxy.getRow(e)),ce(n))l=this.createRowCon(n,i,s);else return;return n&&(n.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=l,l}destroyRowCtrls(e,t){const i=[];bi(e,(s,n)=>{if(!!n){if(this.cachedRowCtrls&&n.isCacheable()){this.cachedRowCtrls.addRow(n);return}n.destroyFirstPass(!t),t?(this.zombieRowCtrls[n.getInstanceId()]=n,i.push(()=>{n.destroySecondPass(),delete this.zombieRowCtrls[n.getInstanceId()]})):n.destroySecondPass()}}),t&&(i.push(()=>{this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}),Pu(i))}getRowBuffer(){return this.gridOptionsService.get("rowBuffer")}getRowBufferInPixels(){const e=this.getRowBuffer(),t=this.gridOptionsService.getRowHeightAsNumber();return e*t}workOutFirstAndLastRowsToRender(){this.rowContainerHeightService.updateOffset();let e,t;if(!this.paginationProxy.isRowsToRender())e=0,t=-1;else if(this.printLayout)this.environment.refreshRowHeightVariable(),e=this.paginationProxy.getPageFirstRow(),t=this.paginationProxy.getPageLastRow();else{const g=this.getRowBufferInPixels(),C=this.ctrlsService.getGridBodyCtrl(),S=this.gridOptionsService.get("suppressRowVirtualisation");let A=!1,D,M;do{const q=this.paginationProxy.getPixelOffset(),{pageFirstPixel:_,pageLastPixel:J}=this.paginationProxy.getCurrentPagePixelRange(),se=this.rowContainerHeightService.getDivStretchOffset(),$=C.getScrollFeature().getVScrollPosition(),Y=$.top,oe=$.bottom;S?(D=_+se,M=J+se):(D=Math.max(Y+q-g,_)+se,M=Math.min(oe+q+g,J)+se),this.firstVisibleVPixel=Math.max(Y+q,_)+se,A=this.ensureAllRowsInRangeHaveHeightsCalculated(D,M)}while(A);let W=this.paginationProxy.getRowIndexAtPixel(D),z=this.paginationProxy.getRowIndexAtPixel(M);const U=this.paginationProxy.getPageFirstRow(),X=this.paginationProxy.getPageLastRow();W<U&&(W=U),z>X&&(z=X),e=W,t=z}const i=this.gridOptionsService.isDomLayout("normal"),s=this.gridOptionsService.get("suppressMaxRenderedRowRestriction"),n=Math.max(this.getRowBuffer(),500);i&&!s&&t-e>n&&(t=e+n);const l=e!==this.firstRenderedRow,u=t!==this.lastRenderedRow;if(l||u){this.firstRenderedRow=e,this.lastRenderedRow=t;const g={type:L.EVENT_VIEWPORT_CHANGED,firstRow:e,lastRow:t};this.eventService.dispatchEvent(g)}}dispatchFirstDataRenderedEvent(){if(this.dataFirstRenderedFired)return;this.dataFirstRenderedFired=!0;const e={type:L.EVENT_FIRST_DATA_RENDERED,firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow};window.requestAnimationFrame(()=>{this.beans.eventService.dispatchEvent(e)})}ensureAllRowsInRangeHaveHeightsCalculated(e,t){const i=this.paginationProxy.ensureRowHeightsValid(e,t,-1,-1);return i&&this.updateContainerHeights(),i}getFirstVisibleVerticalPixel(){return this.firstVisibleVPixel}getFirstVirtualRenderedRow(){return this.firstRenderedRow}getLastVirtualRenderedRow(){return this.lastRenderedRow}doNotUnVirtualiseRow(e){const s=e.getRowNode(),n=this.focusService.isRowNodeFocused(s),l=e.isEditing(),u=s.detail;return n||l||u?!!this.paginationProxy.isRowPresent(s):!1}createRowCon(e,t,i){const s=this.cachedRowCtrls?this.cachedRowCtrls.getRow(e):null;if(s)return s;const n=this.gridOptionsService.get("suppressAnimationFrame"),l=i&&!n&&!this.printLayout;return new Fo(e,this.beans,t,l,this.printLayout)}getRenderedNodes(){const e=this.rowCtrlsByRowIndex;return Object.keys(e).map(t=>e[t].getRowNode())}getRowByPosition(e){let t;const{rowIndex:i}=e;switch(e.rowPinned){case"top":t=this.topRowCtrls[i];break;case"bottom":t=this.bottomRowCtrls[i];break;default:t=this.rowCtrlsByRowIndex[i],t||(t=this.getStickyTopRowCtrls().find(s=>s.getRowNode().rowIndex===i)||null);break}return t}getRowNode(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[e.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[e.rowIndex];default:return this.rowModel.getRow(e.rowIndex)}}isRangeInRenderedViewport(e,t){if(e==null||t==null)return!1;const s=e>this.lastRenderedRow;return!(t<this.firstRenderedRow)&&!s}};E([N("animationFrameService")],Yi.prototype,"animationFrameService",2);E([N("paginationProxy")],Yi.prototype,"paginationProxy",2);E([N("columnModel")],Yi.prototype,"columnModel",2);E([N("pinnedRowModel")],Yi.prototype,"pinnedRowModel",2);E([N("rowModel")],Yi.prototype,"rowModel",2);E([N("focusService")],Yi.prototype,"focusService",2);E([N("beans")],Yi.prototype,"beans",2);E([N("rowContainerHeightService")],Yi.prototype,"rowContainerHeightService",2);E([N("ctrlsService")],Yi.prototype,"ctrlsService",2);E([Ce],Yi.prototype,"postConstruct",1);Yi=E([Fe("rowRenderer")],Yi);var Nb=class{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.getRowNode().id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){const t=this.entriesList[0];t.destroyFirstPass(),t.destroySecondPass(),this.removeFromCache(t)}}getRow(e){if(e==null||e.id==null)return null;const t=this.entriesMap[e.id];return t?(this.removeFromCache(t),t.setCached(!1),t.getRowNode()!=e?null:t):null}has(e){return this.entriesMap[e.id]!=null}removeRow(e){const t=e.id,i=this.entriesMap[t];delete this.entriesMap[t],Oi(this.entriesList,i)}removeFromCache(e){const t=e.getRowNode().id;delete this.entriesMap[t],Oi(this.entriesList,e)}getEntries(){return this.entriesList}},Ya=class extends ge{formatValue(e,t,i,s,n=!0){let l=null,u;const g=e.getColDef();if(s?u=s:n&&(u=g.valueFormatter),u){const C=this.gridOptionsService.addGridCommonParams({value:i,node:t,data:t?t.data:null,colDef:g,column:e});typeof u=="function"?l=u(C):l=this.expressionService.evaluate(u,C)}else if(g.refData)return g.refData[i]||"";return l==null&&Array.isArray(i)&&(l=i.join(", ")),l}};E([N("expressionService")],Ya.prototype,"expressionService",2);Ya=E([Fe("valueFormatterService")],Ya);var Fn=class extends ge{init(){this.setPinnedTopRowData(),this.setPinnedBottomRowData(),this.addManagedPropertyListener("pinnedTopRowData",()=>this.setPinnedTopRowData()),this.addManagedPropertyListener("pinnedBottomRowData",()=>this.setPinnedBottomRowData())}isEmpty(e){const t=e==="top"?this.pinnedTopRows:this.pinnedBottomRows;return Hi(t)}isRowsToRender(e){return!this.isEmpty(e)}getRowAtPixel(e,t){const i=t==="top"?this.pinnedTopRows:this.pinnedBottomRows;if(Hi(i))return 0;for(let s=0;s<i.length;s++){const n=i[s];if(n.rowTop+n.rowHeight-1>=e)return s}return i.length-1}setPinnedTopRowData(){const e=this.gridOptionsService.get("pinnedTopRowData");this.pinnedTopRows=this.createNodesFromData(e,!0);const t={type:L.EVENT_PINNED_ROW_DATA_CHANGED};this.eventService.dispatchEvent(t)}setPinnedBottomRowData(){const e=this.gridOptionsService.get("pinnedBottomRowData");this.pinnedBottomRows=this.createNodesFromData(e,!1);const t={type:L.EVENT_PINNED_ROW_DATA_CHANGED};this.eventService.dispatchEvent(t)}createNodesFromData(e,t){const i=[];if(e){let s=0;e.forEach((n,l)=>{const u=new st(this.beans);u.data=n;const g=t?st.ID_PREFIX_TOP_PINNED:st.ID_PREFIX_BOTTOM_PINNED;u.id=g+l,u.rowPinned=t?"top":"bottom",u.setRowTop(s),u.setRowHeight(this.gridOptionsService.getRowHeightForNode(u).height),u.setRowIndex(l),s+=u.rowHeight,i.push(u)})}return i}getPinnedTopRowData(){return this.pinnedTopRows}getPinnedBottomRowData(){return this.pinnedBottomRows}getPinnedTopTotalHeight(){return this.getTotalHeight(this.pinnedTopRows)}getPinnedTopRowCount(){return this.pinnedTopRows?this.pinnedTopRows.length:0}getPinnedBottomRowCount(){return this.pinnedBottomRows?this.pinnedBottomRows.length:0}getPinnedTopRow(e){return this.pinnedTopRows[e]}getPinnedBottomRow(e){return this.pinnedBottomRows[e]}forEachPinnedTopRow(e){Hi(this.pinnedTopRows)||this.pinnedTopRows.forEach(e)}forEachPinnedBottomRow(e){Hi(this.pinnedBottomRows)||this.pinnedBottomRows.forEach(e)}getPinnedBottomTotalHeight(){return this.getTotalHeight(this.pinnedBottomRows)}getTotalHeight(e){if(!e||e.length===0)return 0;const t=yt(e);return t.rowTop+t.rowHeight}};E([N("beans")],Fn.prototype,"beans",2);E([Ce],Fn.prototype,"init",1);Fn=E([Fe("pinnedRowModel")],Fn);var Fl=class{constructor(e,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}setInactive(){this.active=!1}isActive(){return this.active}depthFirstSearchChangedPath(e,t){if(e.children)for(let i=0;i<e.children.length;i++)this.depthFirstSearchChangedPath(e.children[i],t);t(e.rowNode)}depthFirstSearchEverything(e,t,i){if(e.childrenAfterGroup)for(let s=0;s<e.childrenAfterGroup.length;s++){const n=e.childrenAfterGroup[s];n.childrenAfterGroup?this.depthFirstSearchEverything(e.childrenAfterGroup[s],t,i):i&&t(n)}t(e)}forEachChangedNodeDepthFirst(e,t=!1,i=!1){this.active&&!i?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,t)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let t=e,i=0;for(;!this.mapToItems[t.id];){const s={rowNode:t,children:null};this.mapToItems[t.id]=s,i++,t=t.parent}return i}populateColumnsMap(e,t){if(!this.keepingColumns||!t)return;let i=e;for(;i;)this.nodeIdsToColumns[i.id]||(this.nodeIdsToColumns[i.id]={}),t.forEach(s=>this.nodeIdsToColumns[i.id][s.getId()]=!0),i=i.parent}linkPathItems(e,t){let i=e;for(let s=0;s<t;s++){const n=this.mapToItems[i.id],l=this.mapToItems[i.parent.id];l.children||(l.children=[]),l.children.push(n),i=i.parent}}addParentNode(e,t){if(!e||e.isRowPinned())return;const i=this.createPathItems(e);this.linkPathItems(e,i),this.populateColumnsMap(e,t)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,t){if(!this.keepingColumns)return t;const i=this.nodeIdsToColumns[e.id];return t.filter(n=>i[n.getId()])}getNotValueColumnsForNode(e,t){if(!this.keepingColumns)return null;const i=this.nodeIdsToColumns[e.id];return t.filter(n=>!i[n.getId()])}},zr=class wo extends ge{constructor(t){super(),this.state=wo.STATE_WAITING_TO_LOAD,this.version=0,this.id=t}getId(){return this.id}load(){this.state=wo.STATE_LOADING,this.loadFromDatasource()}getVersion(){return this.version}setStateWaitingToLoad(){this.version++,this.state=wo.STATE_WAITING_TO_LOAD}getState(){return this.state}pageLoadFailed(t){this.isRequestMostRecentAndLive(t)&&(this.state=wo.STATE_FAILED,this.processServerFail()),this.dispatchLoadCompleted(!1)}success(t,i){this.successCommon(t,i)}pageLoaded(t,i,s){this.successCommon(t,{rowData:i,rowCount:s})}isRequestMostRecentAndLive(t){const i=t===this.version,s=this.isAlive();return i&&s}successCommon(t,i){this.dispatchLoadCompleted(),this.isRequestMostRecentAndLive(t)&&(this.state=wo.STATE_LOADED,this.processServerResult(i))}dispatchLoadCompleted(t=!0){const i={type:wo.EVENT_LOAD_COMPLETE,success:t,block:this};this.dispatchEvent(i)}};zr.EVENT_LOAD_COMPLETE="loadComplete";zr.STATE_WAITING_TO_LOAD="needsLoading";zr.STATE_LOADING="loading";zr.STATE_LOADED="loaded";zr.STATE_FAILED="failed";var Vd=zr,Ps=class extends ge{constructor(){super(...arguments),this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}postConstruct(){this.maxConcurrentRequests=this.getMaxConcurrentDatasourceRequests();const e=this.gridOptionsService.get("blockLoadDebounceMillis");e&&e>0&&(this.checkBlockToLoadDebounce=ot.debounce(this.performCheckBlocksToLoad.bind(this),e))}setBeans(e){this.logger=e.create("RowNodeBlockLoader")}getMaxConcurrentDatasourceRequests(){const e=this.gridOptionsService.get("maxConcurrentDatasourceRequests");if(e==null)return 2;if(!(e<=0))return e}addBlock(e){this.blocks.push(e),e.addEventListener(Vd.EVENT_LOAD_COMPLETE,this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(e){ot.removeFromArray(this.blocks,e)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad(),this.dispatchEvent({type:Ps.BLOCK_LOADED_EVENT}),this.activeBlockLoadsCount==0&&this.dispatchEvent({type:Ps.BLOCK_LOADER_FINISHED_EVENT})}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),this.maxConcurrentRequests!=null&&this.activeBlockLoadsCount>=this.maxConcurrentRequests){this.logger.log("checkBlockToLoad: max loads exceeded");return}const e=this.getAvailableLoadingCount(),t=this.blocks.filter(i=>i.getState()===Vd.STATE_WAITING_TO_LOAD).slice(0,e);this.registerLoads(t.length),t.forEach(i=>i.load()),this.printCacheStatus()}getBlockState(){if(this.gridOptionsService.isRowModelType("serverSide"))return this.rowModel.getBlockStates();const e={};return this.blocks.forEach(t=>{const{id:i,state:s}=t.getBlockStateJson();e[i]=s}),e}printCacheStatus(){this.logger.isLogging()&&this.logger.log(`printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}isLoading(){return this.activeBlockLoadsCount>0}registerLoads(e){this.activeBlockLoadsCount+=e}getAvailableLoadingCount(){return this.maxConcurrentRequests!==void 0?this.maxConcurrentRequests-this.activeBlockLoadsCount:void 0}};Ps.BLOCK_LOADED_EVENT="blockLoaded";Ps.BLOCK_LOADER_FINISHED_EVENT="blockLoaderFinished";E([N("rowModel")],Ps.prototype,"rowModel",2);E([Ce],Ps.prototype,"postConstruct",1);E([ds(0,Qi("loggerFactory"))],Ps.prototype,"setBeans",1);Ps=E([Fe("rowNodeBlockLoader")],Ps);var Ln=class extends ge{constructor(){super(...arguments),this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.pixelOffset=0,this.masterRowCount=0}postConstruct(){this.active=this.gridOptionsService.get("pagination"),this.pageSizeFromGridOptions=this.gridOptionsService.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedListener(this.eventService,L.EVENT_MODEL_UPDATED,this.onModelUpdated.bind(this)),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this)),this.onModelUpdated()}ensureRowHeightsValid(e,t,i,s){const n=this.rowModel.ensureRowHeightsValid(e,t,this.getPageFirstRow(),this.getPageLastRow());return n&&this.calculatePages(),n}isPaginateChildRows(){return this.gridOptionsService.get("groupRemoveSingleChildren")||this.gridOptionsService.get("groupRemoveLowestSingleChildren")?!0:this.gridOptionsService.get("paginateChildRows")}onModelUpdated(e){this.calculatePages();const t={type:L.EVENT_PAGINATION_CHANGED,animate:e?e.animate:!1,newData:e?e.newData:!1,newPage:e?e.newPage:!1,newPageSize:e?e.newPageSize:!1,keepRenderedRows:e?e.keepRenderedRows:!1};this.eventService.dispatchEvent(t)}onPaginationGridOptionChanged(){this.active=this.gridOptionsService.get("pagination"),this.calculatePages();const e={type:L.EVENT_PAGINATION_CHANGED,animate:!1,newData:!1,newPage:!1,newPageSize:!1,keepRenderedRows:!0};this.eventService.dispatchEvent(e)}onPageSizeGridOptionChanged(){this.setPageSize(this.gridOptionsService.get("paginationPageSize"),"gridOptions")}goToPage(e){if(!this.active||this.currentPage===e||typeof this.currentPage!="number")return;this.currentPage=e;const t={type:L.EVENT_MODEL_UPDATED,animate:!1,keepRenderedRows:!1,newData:!1,newPage:!0,newPageSize:!1};this.onModelUpdated(t)}getPixelOffset(){return this.pixelOffset}getRow(e){return this.rowModel.getRow(e)}getRowNode(e){return this.rowModel.getRowNode(e)}getRowIndexAtPixel(e){return this.rowModel.getRowIndexAtPixel(e)}getCurrentPageHeight(){return Xe(this.topRowBounds)||Xe(this.bottomRowBounds)?0:Math.max(this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop,0)}getCurrentPagePixelRange(){const e=this.topRowBounds?this.topRowBounds.rowTop:0,t=this.bottomRowBounds?this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight:0;return{pageFirstPixel:e,pageLastPixel:t}}isRowPresent(e){return this.rowModel.isRowPresent(e)?e.rowIndex>=this.topDisplayedRowIndex&&e.rowIndex<=this.bottomDisplayedRowIndex:!1}isEmpty(){return this.rowModel.isEmpty()}isRowsToRender(){return this.rowModel.isRowsToRender()}forEachNode(e){return this.rowModel.forEachNode(e)}forEachNodeOnPage(e){const t=this.getPageFirstRow(),i=this.getPageLastRow();for(let s=t;s<=i;s++){const n=this.getRow(s);n&&e(n)}}getType(){return this.rowModel.getType()}getRowBounds(e){const t=this.rowModel.getRowBounds(e);return t.rowIndex=e,t}getPageFirstRow(){return this.topRowBounds?this.topRowBounds.rowIndex:-1}getPageLastRow(){return this.bottomRowBounds?this.bottomRowBounds.rowIndex:-1}getRowCount(){return this.rowModel.getRowCount()}getPageForIndex(e){return Math.floor(e/this.pageSize)}goToPageWithIndex(e){if(!this.active)return;const t=this.getPageForIndex(e);this.goToPage(t)}isRowInPage(e){return this.active?this.getPageForIndex(e.rowIndex)===this.currentPage:!0}isLastPageFound(){return this.rowModel.isLastRowIndexKnown()}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){const e=this.rowModel.getRowCount(),t=Math.floor(e/this.pageSize);this.goToPage(t)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(e){this.currentPage=e}get pageSize(){return ce(this.pageSizeAutoCalculated)?this.pageSizeAutoCalculated:ce(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:ce(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:ce(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}unsetAutoCalculatedPageSize(){if(this.pageSizeAutoCalculated===void 0)return;const e=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0,this.pageSize!==e&&this.onModelUpdated({type:L.EVENT_MODEL_UPDATED,animate:!1,keepRenderedRows:!1,newData:!1,newPage:!1,newPageSize:!0})}setPageSize(e,t){const i=this.pageSize;switch(t){case"autoCalculated":this.pageSizeAutoCalculated=e;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=e,this.currentPage!==0&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=e;break;case"gridOptions":this.pageSizeFromGridOptions=e,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,this.currentPage!==0&&this.goToFirstPage();break}if(i!==this.pageSize){const s={type:L.EVENT_MODEL_UPDATED,animate:!1,keepRenderedRows:!1,newData:!1,newPage:!1,newPageSize:!0};this.onModelUpdated(s)}}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.topRowBounds=this.rowModel.getRowBounds(this.topDisplayedRowIndex),this.topRowBounds&&(this.topRowBounds.rowIndex=this.topDisplayedRowIndex),this.bottomRowBounds=this.rowModel.getRowBounds(this.bottomDisplayedRowIndex),this.bottomRowBounds&&(this.bottomRowBounds.rowIndex=this.bottomDisplayedRowIndex),this.setPixelOffset(ce(this.topRowBounds)?this.topRowBounds.rowTop:0)}setPixelOffset(e){this.pixelOffset!==e&&(this.pixelOffset=e,this.eventService.dispatchEvent({type:L.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!isFinite(this.currentPage)||isNaN(this.currentPage)||this.currentPage<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){if(this.masterRowCount=this.rowModel.getTopLevelRowCount(),this.masterRowCount<=0){this.setZeroRows();return}const e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid();const t=this.pageSize*this.currentPage;let i=this.pageSize*(this.currentPage+1)-1;if(i>e&&(i=e),this.topDisplayedRowIndex=this.rowModel.getTopLevelRowDisplayedIndex(t),i===e)this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1;else{const s=this.rowModel.getTopLevelRowDisplayedIndex(i+1);this.bottomDisplayedRowIndex=s-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){if(this.masterRowCount=this.rowModel.getRowCount(),this.masterRowCount===0){this.setZeroRows();return}const e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=this.pageSize*this.currentPage,this.bottomDisplayedRowIndex=this.pageSize*(this.currentPage+1)-1,this.bottomDisplayedRowIndex>e&&(this.bottomDisplayedRowIndex=e)}calculatedPagesNotActive(){this.setPageSize(this.masterRowCount,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1}};E([N("rowModel")],Ln.prototype,"rowModel",2);E([Ce],Ln.prototype,"postConstruct",1);Ln=E([Fe("paginationProxy")],Ln);var Xa=class extends ge{processAllCellClasses(e,t,i,s){this.processClassRules(void 0,e.cellClassRules,t,i,s),this.processStaticCellClasses(e,t,i)}processClassRules(e,t,i,s,n){if(t==null&&e==null)return;const l={},u={},g=(C,S)=>{C.split(" ").forEach(A=>{A.trim()!=""&&S(A)})};if(t){const C=Object.keys(t);for(let S=0;S<C.length;S++){const A=C[S],D=t[A];let M;typeof D=="string"?M=this.expressionService.evaluate(D,i):typeof D=="function"&&(M=D(i)),g(A,W=>{M?l[W]=!0:u[W]=!0})}}e&&n&&Object.keys(e).forEach(C=>g(C,S=>{l[S]||(u[S]=!0)})),n&&Object.keys(u).forEach(n),Object.keys(l).forEach(s)}getStaticCellClasses(e,t){const{cellClass:i}=e;if(!i)return[];let s;return typeof i=="function"?s=i(t):s=i,typeof s=="string"&&(s=[s]),s||[]}processStaticCellClasses(e,t,i){this.getStaticCellClasses(e,t).forEach(n=>{i(n)})}};E([N("expressionService")],Xa.prototype,"expressionService",2);Xa=E([Fe("stylingService")],Xa);var Ug=class extends Cl{constructor(e){super(e,"ag-toggle-button")}setValue(e,t){return super.setValue(e,t),this.addOrRemoveCssClass("ag-selected",this.getValue()),this}},Gb=class extends cs{constructor(e){super(e,"ag-text-area",null,"textarea")}setValue(e,t){const i=super.setValue(e,t);return this.eInput.value=e,i}setCols(e){return this.eInput.cols=e,this}setRows(e){return this.eInput.rows=e,this}},_b=class extends Yo{constructor(e){super(e,"ag-date-field","date")}postConstruct(){super.postConstruct(),this.addManagedListener(this.eInput,"wheel",this.onWheel.bind(this));const e=Ts();this.addManagedListener(this.eInput,"mousedown",()=>{this.isDisabled()||e||this.eInput.focus()}),this.eInput.step="any"}onWheel(e){document.activeElement===this.eInput&&e.preventDefault()}setMin(e){var t;const i=e instanceof Date?(t=Zi(e??null,!1))!=null?t:void 0:e;return this.min===i?this:(this.min=i,Ss(this.eInput,"min",i),this)}setMax(e){var t;const i=e instanceof Date?(t=Zi(e??null,!1))!=null?t:void 0:e;return this.max===i?this:(this.max=i,Ss(this.eInput,"max",i),this)}setStep(e){return this.step===e?this:(this.step=e,Ss(this.eInput,"step",e),this)}getDate(){var e;if(!!this.eInput.validity.valid)return(e=ki(this.getValue()))!=null?e:void 0}setDate(e,t){this.setValue(Zi(e??null,!1),t)}},Vb=class extends cs{constructor(e){super(e,"ag-range-field","range")}postConstruct(){super.postConstruct();const{min:e,max:t,step:i}=this.config;e!=null&&this.setMinValue(e),t!=null&&this.setMaxValue(t),this.setStep(i||1)}addInputListeners(){this.addManagedListener(this.eInput,"input",e=>{const t=e.target.value;this.setValue(t)})}setMinValue(e){return this.min=e,this.eInput.setAttribute("min",e.toString()),this}setMaxValue(e){return this.max=e,this.eInput.setAttribute("max",e.toString()),this}setStep(e){return this.eInput.setAttribute("step",e.toString()),this}setValue(e,t){this.min!=null&&(e=Math.max(parseFloat(e),this.min).toString()),this.max!=null&&(e=Math.min(parseFloat(e),this.max).toString());const i=super.setValue(e,t);return this.eInput.value=e,i}},ic=class extends Ze{constructor(e,t){super('<div class="ag-rich-select-row" role="presentation"></div>'),this.params=e,this.wrapperEl=t}postConstruct(){this.addManagedListener(this.getGui(),"click",this.onClick.bind(this))}setState(e){let t="";this.params.valueFormatter&&(t=this.params.valueFormatter(e)),this.populateWithRenderer(e,t)||this.populateWithoutRenderer(e,t),this.value=e}highlightString(e){const{parsedValue:t}=this;if(this.params.cellRenderer||!ce(t))return;let i=ce(e);if(i){const s=t?.toLocaleLowerCase().indexOf(e.toLocaleLowerCase());if(s>=0){const n=s+e.length,l=ai(t.slice(0,s),!0),u=ai(t.slice(s,n),!0),g=ai(t.slice(n));this.renderValueWithoutRenderer(`${l}<span class="ag-rich-select-row-text-highlight">${u}</span>${g}`)}else i=!1}i||this.renderValueWithoutRenderer(t)}updateHighlighted(e){var t;const i=this.getGui(),s=`ag-rich-select-row-${this.getCompId()}`;if((t=i.parentElement)==null||t.setAttribute("id",s),e){const n=this.getParentComponent().getAriaElement();fh(n,s),this.wrapperEl.setAttribute("data-active-option",s)}xr(i.parentElement,e),this.addOrRemoveCssClass("ag-rich-select-row-selected",e)}populateWithoutRenderer(e,t){const i=this.gridOptionsService.getDocument(),s=this.getGui(),n=i.createElement("span");n.style.overflow="hidden",n.style.textOverflow="ellipsis";const l=ai(ce(t)?t:e,!0);this.parsedValue=ce(l)?l:null,s.appendChild(n),this.renderValueWithoutRenderer(l),this.setTooltip({newTooltipText:this.parsedValue,shouldDisplayTooltip:()=>n.scrollWidth>n.clientWidth})}renderValueWithoutRenderer(e){const t=this.getGui().querySelector("span");!t||(t.innerHTML=ce(e)?e:"&nbsp;")}populateWithRenderer(e,t){let i,s;return this.params.cellRenderer&&(s=this.userComponentFactory.getCellRendererDetails(this.params,{value:e,valueFormatted:t,setTooltip:(n,l)=>{this.setTooltip({newTooltipText:n,shouldDisplayTooltip:l})}})),s&&(i=s.newAgStackInstance()),i&&Oh(i,this.getGui()),i?(i.then(n=>{this.addDestroyFunc(()=>{this.getContext().destroyBean(n)})}),!0):!1}onClick(){const e=this.getParentComponent(),t={type:L.EVENT_FIELD_PICKER_VALUE_SELECTED,fromEnterKey:!1,value:this.value};e?.dispatchEvent(t)}};E([N("userComponentFactory")],ic.prototype,"userComponentFactory",2);E([Ce],ic.prototype,"postConstruct",1);var na=class Yg extends oa{constructor(t){super(Yg.getTemplate(t?.cssIdentifier||"default")),this.renderedRows=new Map,this.rowHeight=20,this.isHeightFromTheme=!0;const{cssIdentifier:i="default",ariaRole:s="listbox",listName:n}=t||{};this.cssIdentifier=i,this.ariaRole=s,this.listName=n}postConstruct(){this.addScrollListener(),this.rowHeight=this.getItemHeight(),this.addResizeObserver(),this.initialiseTabGuard({onFocusIn:t=>this.onFocusIn(t),onFocusOut:t=>this.onFocusOut(t),focusInnerElement:t=>this.focusInnerElement(t),onTabKeyDown:t=>this.onTabKeyDown(t),handleKeyDown:t=>this.handleKeyDown(t)}),this.setAriaProperties(),this.addManagedListener(this.eventService,L.EVENT_GRID_STYLES_CHANGED,this.onGridStylesChanged.bind(this))}onGridStylesChanged(){this.rowHeight=this.getItemHeight(),this.refresh()}setAriaProperties(){const i=this.localeService.getLocaleTextFunc()("ariaDefaultListName",this.listName||"List"),s=this.eContainer;jt(s,this.ariaRole),fs(s,i)}addResizeObserver(){const t=()=>this.animationFrameService.requestAnimationFrame(()=>this.drawVirtualRows()),i=this.resizeObserverService.observeResize(this.getGui(),t);this.addDestroyFunc(i)}focusInnerElement(t){this.focusRow(t?this.model.getRowCount()-1:0)}onFocusIn(t){const i=t.target;i.classList.contains("ag-virtual-list-item")&&(this.lastFocusedRowIndex=ip(i)-1)}onFocusOut(t){this.getFocusableElement().contains(t.relatedTarget)||(this.lastFocusedRowIndex=null)}handleKeyDown(t){switch(t.key){case Q.UP:case Q.DOWN:this.navigate(t.key===Q.UP)&&t.preventDefault();break}}onTabKeyDown(t){this.navigate(t.shiftKey)?t.preventDefault():(gs(t),this.forceFocusOutOfContainer(t.shiftKey))}navigate(t){if(this.lastFocusedRowIndex==null)return!1;const i=this.lastFocusedRowIndex+(t?-1:1);return i<0||i>=this.model.getRowCount()?!1:(this.focusRow(i),!0)}getLastFocusedRow(){return this.lastFocusedRowIndex}focusRow(t){this.ensureIndexVisible(t),window.setTimeout(()=>{if(!this.isAlive())return;const i=this.renderedRows.get(t);i&&i.eDiv.focus()},10)}getComponentAt(t){const i=this.renderedRows.get(t);return i&&i.rowComponent}forEachRenderedRow(t){this.renderedRows.forEach((i,s)=>t(i.rowComponent,s))}static getTemplate(t){return`<div class="ag-virtual-list-viewport ag-${t}-virtual-list-viewport" role="presentation">
                <div class="ag-virtual-list-container ag-${t}-virtual-list-container" ref="eContainer"></div>
            </div>`}getItemHeight(){return this.isHeightFromTheme?this.environment.getListItemHeight():this.rowHeight}ensureIndexVisible(t,i=!0){const s=this.model.getRowCount();if(typeof t!="number"||t<0||t>=s)return console.warn("AG Grid: invalid row index for ensureIndexVisible: "+t),!1;const n=t*this.rowHeight,l=n+this.rowHeight,u=this.getGui(),g=u.scrollTop,C=u.offsetHeight,S=g+C,A=i?0:this.rowHeight,D=g>n+A,M=S<l-A;if(D)return u.scrollTop=n,!0;if(M){const W=l-C;return u.scrollTop=W,!0}return!1}setComponentCreator(t){this.componentCreator=t}setComponentUpdater(t){this.componentUpdater=t}getRowHeight(){return this.rowHeight}getScrollTop(){return this.getGui().scrollTop}setRowHeight(t){this.isHeightFromTheme=!1,this.rowHeight=t,this.refresh()}refresh(t){if(this.model==null||!this.isAlive())return;const i=this.model.getRowCount();this.eContainer.style.height=`${i*this.rowHeight}px`,lh(()=>this.eContainer.clientHeight>=i*this.rowHeight,()=>{!this.isAlive()||(this.canSoftRefresh(t)?this.drawVirtualRows(!0):(this.clearVirtualRows(),this.drawVirtualRows()))})}canSoftRefresh(t){return!!(t&&this.renderedRows.size&&typeof this.model.areRowsEqual=="function"&&this.componentUpdater)}clearVirtualRows(){this.renderedRows.forEach((t,i)=>this.removeRow(i))}drawVirtualRows(t){if(!this.isAlive()||!this.model)return;const i=this.getGui(),s=i.scrollTop,n=s+i.offsetHeight,l=Math.floor(s/this.rowHeight),u=Math.floor(n/this.rowHeight);this.ensureRowsRendered(l,u,t)}ensureRowsRendered(t,i,s){this.renderedRows.forEach((n,l)=>{(l<t||l>i)&&l!==this.lastFocusedRowIndex&&this.removeRow(l)}),s&&this.refreshRows();for(let n=t;n<=i;n++)this.renderedRows.has(n)||n<this.model.getRowCount()&&this.insertRow(n)}insertRow(t){const i=this.model.getRow(t),s=document.createElement("div");s.classList.add("ag-virtual-list-item",`ag-${this.cssIdentifier}-virtual-list-item`),jt(s,this.ariaRole==="tree"?"treeitem":"option"),ll(s,this.model.getRowCount()),dl(s,t+1),s.setAttribute("tabindex","-1"),s.style.height=`${this.rowHeight}px`,s.style.top=`${this.rowHeight*t}px`;const n=this.componentCreator(i,s);n.addGuiEventListener("focusin",()=>this.lastFocusedRowIndex=t),s.appendChild(n.getGui()),this.renderedRows.has(t-1)?this.renderedRows.get(t-1).eDiv.insertAdjacentElement("afterend",s):this.renderedRows.has(t+1)?this.renderedRows.get(t+1).eDiv.insertAdjacentElement("beforebegin",s):this.eContainer.appendChild(s),this.renderedRows.set(t,{rowComponent:n,eDiv:s,value:i})}removeRow(t){const i=this.renderedRows.get(t);this.eContainer.removeChild(i.eDiv),this.destroyBean(i.rowComponent),this.renderedRows.delete(t)}refreshRows(){const t=this.model.getRowCount();this.renderedRows.forEach((i,s)=>{var n,l;if(s>=t)this.removeRow(s);else{const u=this.model.getRow(s);(l=(n=this.model).areRowsEqual)!=null&&l.call(n,i.value,u)?this.componentUpdater(u,i.rowComponent):this.removeRow(s)}})}addScrollListener(){this.addGuiEventListener("scroll",()=>this.drawVirtualRows(),{passive:!0})}setModel(t){this.model=t}getAriaElement(){return this.eContainer}destroy(){!this.isAlive()||(this.clearVirtualRows(),super.destroy())}};E([N("resizeObserverService")],na.prototype,"resizeObserverService",2);E([N("animationFrameService")],na.prototype,"animationFrameService",2);E([xe("eContainer")],na.prototype,"eContainer",2);E([Ce],na.prototype,"postConstruct",1);var Xg=na,Hb=`
    <div class="ag-picker-field" role="presentation">
        <div ref="eLabel"></div>
            <div ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-rich-select-value ag-picker-collapsed">
            <div ref="eDisplayField" class="ag-picker-field-display"></div>
            <ag-input-text-field ref="eInput" class="ag-rich-select-field-input"></ag-input-text-field>
            <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
        </div>
    </div>`,sc=class extends Uo{constructor(e){var t,i;super(Vt(We({pickerAriaLabelKey:"ariaLabelRichSelectField",pickerAriaLabelValue:"Rich Select Field",pickerType:"ag-list",className:"ag-rich-select",pickerIcon:"smallDown",ariaRole:"combobox",template:(t=e?.template)!=null?t:Hb,modalPicker:!1},e),{maxPickerHeight:(i=e?.maxPickerHeight)!=null?i:"calc(var(--ag-row-height) * 6.5)"})),this.searchString="",this.highlightedItem=-1,this.lastRowHovered=-1,this.searchStringCreator=null;const{cellRowHeight:s,value:n,valueList:l,searchStringCreator:u}=e||{};s!=null&&(this.cellRowHeight=s),n!==void 0&&(this.value=n),l!=null&&(this.values=l),u&&(this.searchStringCreator=u)}postConstruct(){super.postConstruct(),this.createLoadingElement(),this.createListComponent();const{allowTyping:e,placeholder:t}=this.config;e?(this.eInput.setAutoComplete(!1).setInputPlaceholder(t),this.eDisplayField.classList.add("ag-hidden")):this.eInput.setDisplayed(!1),this.eWrapper.tabIndex=this.gridOptionsService.get("tabIndex");const{searchDebounceDelay:i=300}=this.config;this.clearSearchString=Ai(this.clearSearchString,i),this.renderSelectedValue(),e&&(this.eInput.onValueChange(s=>this.searchTextFromString(s)),this.addManagedListener(this.eWrapper,"focus",this.onWrapperFocus.bind(this))),this.addManagedListener(this.eWrapper,"focusout",this.onWrapperFocusOut.bind(this))}createLoadingElement(){const e=this.gridOptionsService.getDocument(),t=this.localeService.getLocaleTextFunc(),i=e.createElement("div");i.classList.add("ag-loading-text"),i.innerText=t("loadingOoo","Loading..."),this.eLoading=i}createListComponent(){this.listComponent=this.createBean(new Xg({cssIdentifier:"rich-select"})),this.listComponent.setComponentCreator(this.createRowComponent.bind(this));const e=(g,C)=>{};this.listComponent.setComponentUpdater(e),this.listComponent.setParentComponent(this),this.addManagedListener(this.listComponent,L.EVENT_FIELD_PICKER_VALUE_SELECTED,g=>{this.onListValueSelected(g.value,g.fromEnterKey)});const{cellRowHeight:t}=this;t&&this.listComponent.setRowHeight(t);const i=this.listComponent.getGui(),s=this.listComponent.getAriaElement();this.addManagedListener(i,"mousemove",this.onPickerMouseMove.bind(this)),this.addManagedListener(i,"mousedown",g=>g.preventDefault()),i.classList.add("ag-rich-select-list");const n=`ag-rich-select-list-${this.listComponent.getCompId()}`;s.setAttribute("id",n);const u=this.localeService.getLocaleTextFunc()(this.config.pickerAriaLabelKey,this.config.pickerAriaLabelValue);fs(s,u),Ch(this.eWrapper,s)}renderSelectedValue(){const{value:e,eDisplayField:t,config:i}=this,{allowTyping:s,initialInputValue:n}=this.config,l=this.config.valueFormatter?this.config.valueFormatter(e):e;if(s){this.eInput.setValue(n??l);return}let u;i.cellRenderer&&(u=this.userComponentFactory.getCellRendererDetails(this.config,{value:e,valueFormatted:l}));let g;if(u&&(g=u.newAgStackInstance()),g)Jt(t),Oh(g,t),g.then(C=>{this.addDestroyFunc(()=>this.getContext().destroyBean(C))});else{if(ce(this.value))t.innerText=l,t.classList.remove("ag-display-as-placeholder");else{const{placeholder:C}=i;ce(C)?(t.innerHTML=`${ai(C)}`,t.classList.add("ag-display-as-placeholder")):Jt(t)}this.setTooltip({newTooltipText:l??null,shouldDisplayTooltip:()=>this.eDisplayField.scrollWidth>this.eDisplayField.clientWidth})}}getCurrentValueIndex(){const{currentList:e,value:t}=this;if(t==null||!e)return-1;for(let i=0;i<e.length;i++)if(e[i]===t)return i;return-1}highlightFilterMatch(){var e;(e=this.listComponent)==null||e.forEachRenderedRow((t,i)=>{t.highlightString(this.searchString)})}highlightSelectedValue(e){var t;e==null&&(e=this.getCurrentValueIndex()),this.highlightedItem=e,(t=this.listComponent)==null||t.forEachRenderedRow((i,s)=>{const n=e===-1?!1:this.highlightedItem===s;i.updateHighlighted(n)})}setRowHeight(e){e!==this.cellRowHeight&&(this.cellRowHeight=e),this.listComponent&&this.listComponent.setRowHeight(e)}createPickerComponent(){const{values:e}=this;return e&&this.setValueList({valueList:e}),this.listComponent}setSearchStringCreator(e){this.searchStringCreator=e}setValueList(e){const{valueList:t,refresh:i}=e;!this.listComponent||this.currentList!==t&&(this.currentList=t,this.listComponent.setModel({getRowCount:()=>t.length,getRow:s=>t[s],areRowsEqual:(s,n)=>s===n}),i&&(this.values?this.listComponent.refresh(!0):(this.values=t,this.isPickerDisplayed&&this.showCurrentValueInPicker())))}showPicker(){super.showPicker(),this.showCurrentValueInPicker(),this.displayOrHidePicker()}showCurrentValueInPicker(){var e,t;if(!this.listComponent)return;if(!this.currentList){this.isPickerDisplayed&&this.eLoading&&this.listComponent.appendChild(this.eLoading);return}(e=this.eLoading)!=null&&e.offsetParent&&((t=this.eLoading.parentElement)==null||t.removeChild(this.eLoading));const i=this.getCurrentValueIndex();i!==-1?(this.listComponent.refresh(),this.listComponent.ensureIndexVisible(i),this.listComponent.refresh(!0),this.highlightSelectedValue(i)):this.listComponent.refresh()}beforeHidePicker(){this.highlightedItem=-1,super.beforeHidePicker()}onWrapperFocus(){if(!this.eInput)return;const e=this.eInput.getFocusableElement();e.focus(),e.select()}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}buildSearchStringFromKeyboardEvent(e){let{key:t}=e;if(t===Q.BACKSPACE)this.searchString=this.searchString.slice(0,-1),t="";else if(!pl(e))return;e.preventDefault(),this.searchTextFromCharacter(t)}searchTextFromCharacter(e){this.searchString+=e,this.runSearch(),this.clearSearchString()}searchTextFromString(e){e==null&&(e=""),this.searchString=e,this.runSearch()}buildSearchStrings(e){const{valueFormatter:t=s=>s}=this.config;let i;return typeof e[0]=="number"||typeof e[0]=="string"?i=e.map(s=>t(s)):typeof e[0]=="object"&&this.searchStringCreator&&(i=this.searchStringCreator(e)),i}getSuggestionsAndFilteredValues(e,t){let i=[],s=[];if(!e.length)return{suggestions:i,filteredValues:s};const{searchType:n="fuzzy",filterList:l}=this.config;if(n==="fuzzy"){const u=Kn(this.searchString,t,!0);i=u.values;const g=u.indices;if(l&&g.length)for(let C=0;C<g.length;C++)s.push(this.values[g[C]])}else i=t.filter((u,g)=>{const C=u.toLocaleLowerCase(),S=this.searchString.toLocaleLowerCase(),A=n==="match"?C.startsWith(S):C.indexOf(S)!==-1;return l&&A&&s.push(this.values[g]),A});return{suggestions:i,filteredValues:s}}filterListModel(e){const{filterList:t}=this.config;!t||(this.setValueList({valueList:e,refresh:!0}),this.alignPickerToComponent())}runSearch(){var e,t;const{values:i}=this,s=this.buildSearchStrings(i);if(!s){this.highlightSelectedValue(-1);return}const{suggestions:n,filteredValues:l}=this.getSuggestionsAndFilteredValues(this.searchString,s),{filterList:u,highlightMatch:g,searchType:C="fuzzy"}=this.config,S=l.length,A=!!(u&&this.searchString!=="");if(this.filterListModel(A?l:i),n.length){const D=A?0:s.indexOf(n[0]);this.selectListItem(D)}else if(this.highlightSelectedValue(-1),!A||S)(e=this.listComponent)==null||e.ensureIndexVisible(0);else if(A){this.getAriaElement().removeAttribute("data-active-option");const D=(t=this.listComponent)==null?void 0:t.getAriaElement();D&&fh(D,null)}g&&C!=="fuzzy"&&this.highlightFilterMatch(),this.displayOrHidePicker()}displayOrHidePicker(){var e;const t=(e=this.listComponent)==null?void 0:e.getGui(),i=this.currentList?this.currentList.length===0:!1;t?.classList.toggle("ag-hidden",i)}clearSearchString(){this.searchString=""}selectListItem(e,t){if(!this.isPickerDisplayed||!this.currentList||!this.listComponent||e<0||e>=this.currentList.length)return;this.listComponent.ensureIndexVisible(e,!t)&&!t&&this.listComponent.refresh(!0),this.highlightSelectedValue(e)}setValue(e,t,i){const s=this.currentList?this.currentList.indexOf(e):-1;return s===-1?this:(this.value=e,i||this.selectListItem(s),this.renderSelectedValue(),super.setValue(e,t))}createRowComponent(e){const t=new ic(this.config,this.eWrapper);t.setParentComponent(this.listComponent),this.getContext().createBean(t),t.setState(e);const{highlightMatch:i,searchType:s="fuzzy"}=this.config;return i&&s!=="fuzzy"&&t.highlightString(this.searchString),t}getRowForMouseEvent(e){const{listComponent:t}=this;if(!t)return-1;const s=(t?.getGui()).getBoundingClientRect(),n=t.getScrollTop(),l=e.clientY-s.top+n;return Math.floor(l/t.getRowHeight())}onPickerMouseMove(e){if(!this.listComponent)return;const t=this.getRowForMouseEvent(e);t!==-1&&t!=this.lastRowHovered&&(this.lastRowHovered=t,this.selectListItem(t,!0))}onNavigationKeyDown(e,t){e.preventDefault();const i=t===Q.DOWN;if(!this.isPickerDisplayed&&i){this.showPicker();return}const s=this.highlightedItem,l=s===-1?0:s+(i?1:-1);this.selectListItem(l)}onEnterKeyDown(e){!this.isPickerDisplayed||(e.preventDefault(),this.currentList&&this.onListValueSelected(this.currentList[this.highlightedItem],!0))}onTabKeyDown(){!this.isPickerDisplayed||!this.currentList||this.setValue(this.currentList[this.highlightedItem],!1,!0)}onListValueSelected(e,t){this.setValue(e,!1,!0),this.dispatchPickerEvent(e,t),this.hidePicker()}dispatchPickerEvent(e,t){const i={type:L.EVENT_FIELD_PICKER_VALUE_SELECTED,fromEnterKey:t,value:e};this.dispatchEvent(i)}getFocusableElement(){const{allowTyping:e}=this.config;return e?this.eInput.getFocusableElement():super.getFocusableElement()}onKeyDown(e){const t=e.key,{allowTyping:i}=this.config;switch(t){case Q.LEFT:case Q.RIGHT:case Q.PAGE_HOME:case Q.PAGE_END:i||e.preventDefault();break;case Q.PAGE_UP:case Q.PAGE_DOWN:e.preventDefault();break;case Q.DOWN:case Q.UP:this.onNavigationKeyDown(e,t);break;case Q.ESCAPE:this.isPickerDisplayed&&(Ui(this.listComponent.getGui())&&(e.preventDefault(),gs(e)),this.hidePicker());break;case Q.ENTER:this.onEnterKeyDown(e);break;case Q.TAB:this.onTabKeyDown();break;default:i||this.buildSearchStringFromKeyboardEvent(e)}}destroy(){this.listComponent&&(this.destroyBean(this.listComponent),this.listComponent=void 0),this.eLoading=void 0,super.destroy()}};E([N("userComponentFactory")],sc.prototype,"userComponentFactory",2);E([xe("eInput")],sc.prototype,"eInput",2);var Ur=class $g extends _h{constructor(t){super(t,$g.TEMPLATE),this.labelAlignment="top"}init(){this.eSlider.addCssClass("ag-slider-field");const{minValue:t,maxValue:i,textFieldWidth:s,step:n,value:l,onValueChange:u}=this.config;t!=null&&this.setMinValue(t),i!=null&&this.setMaxValue(i),s!=null&&this.setTextFieldWidth(s),n!=null&&this.setStep(n),l!=null&&this.setValue(l),u!=null&&this.onValueChange(u)}onValueChange(t){const i=L.EVENT_FIELD_VALUE_CHANGED;return this.addManagedListener(this.eText,i,()=>{const s=parseFloat(this.eText.getValue());this.eSlider.setValue(s.toString(),!0),t(s||0)}),this.addManagedListener(this.eSlider,i,()=>{const s=this.eSlider.getValue();this.eText.setValue(s,!0),t(parseFloat(s))}),this}setSliderWidth(t){return this.eSlider.setWidth(t),this}setTextFieldWidth(t){return this.eText.setWidth(t),this}setMinValue(t){return this.eSlider.setMinValue(t),this.eText.setMin(t),this}setMaxValue(t){return this.eSlider.setMaxValue(t),this.eText.setMax(t),this}getValue(){return this.eText.getValue()}setValue(t,i){return this.getValue()===t?this:(this.eText.setValue(t,!0),this.eSlider.setValue(t,!0),i||this.dispatchEvent({type:L.EVENT_FIELD_VALUE_CHANGED}),this)}setStep(t){return this.eSlider.setStep(t),this.eText.setStep(t),this}};Ur.TEMPLATE=`<div class="ag-slider">
            <label ref="eLabel"></label>
            <div class="ag-wrapper ag-slider-wrapper">
                <ag-input-range ref="eSlider"></ag-input-range>
                <ag-input-number-field ref="eText"></ag-input-number-field>
            </div>
        </div>`;E([xe("eLabel")],Ur.prototype,"eLabel",2);E([xe("eSlider")],Ur.prototype,"eSlider",2);E([xe("eText")],Ur.prototype,"eText",2);E([Ce],Ur.prototype,"init",1);var Bb=Ur,fo=class lr extends Ze{constructor(t={}){super(lr.getTemplate(t)),this.params=t,this.suppressEnabledCheckbox=!0,this.suppressToggleExpandOnEnableChange=!1;const{enabled:i,items:s,suppressEnabledCheckbox:n,expanded:l,suppressToggleExpandOnEnableChange:u,useToggle:g}=t;this.cssIdentifier=t.cssIdentifier||"default",this.enabled=i??!0,this.items=s||[],this.useToggle=g??!1,this.alignItems=t.alignItems||"center",this.expanded=l??!0,n!=null&&(this.suppressEnabledCheckbox=n),u!=null&&(this.suppressToggleExpandOnEnableChange=u)}static getTemplate(t){const i=t.cssIdentifier||"default",s=t.direction||"vertical";return`
            <div class="ag-group ag-${i}-group" role="presentation">
                <div ref="eToolbar" class="ag-group-toolbar ag-${i}-group-toolbar">
                    <ag-checkbox ref="cbGroupEnabled"></ag-checkbox>
                </div>
                <div ref="eContainer" class="ag-group-container ag-group-container-${s} ag-${i}-group-container"></div>
            </div>
        `}postConstruct(){if(this.setupTitleBar(),this.items.length){const n=this.items;this.items=[],this.addItems(n)}const t=this.localeService.getLocaleTextFunc();this.cbGroupEnabled.setLabel(t("enabled","Enabled")),this.enabled&&this.setEnabled(this.enabled,void 0,!0),this.setAlignItems(this.alignItems);const{onEnableChange:i,suppressOpenCloseIcons:s}=this.params;this.hideEnabledCheckbox(this.suppressEnabledCheckbox),this.hideOpenCloseIcons(s??!1),this.refreshChildDisplay(),lt(this.eContainer,this.expanded),this.cbGroupEnabled.onValueChange(n=>{this.setEnabled(n,!0,this.suppressToggleExpandOnEnableChange),this.dispatchEnableChangeEvent(n)}),i!=null&&this.onEnableChange(i)}refreshChildDisplay(){var t;lt(this.eToolbar,this.expanded&&!this.suppressEnabledCheckbox),(t=this.eTitleBar)==null||t.refreshOnExpand(this.expanded)}isExpanded(){return this.expanded}setAlignItems(t){this.alignItems!==t&&this.removeCssClass(`ag-group-item-alignment-${this.alignItems}`),this.alignItems=t;const i=`ag-group-item-alignment-${this.alignItems}`;return this.addCssClass(i),this}toggleGroupExpand(t){var i;let s=!1;if(((i=this.eTitleBar)==null?void 0:i.isSuppressCollapse())&&!this.useToggle)t=!0,s=!0;else if(t=t??!this.expanded,this.expanded===t)return this;return this.expanded=t,this.refreshChildDisplay(),lt(this.eContainer,t),s||this.dispatchEvent({type:t?lr.EVENT_EXPANDED:lr.EVENT_COLLAPSED}),this}addItems(t){t.forEach(i=>this.addItem(i))}prependItem(t){this.insertItem(t,!0)}addItem(t){this.insertItem(t,!1)}insertItem(t,i){const s=this.eContainer,n=t instanceof Ze?t.getGui():t;n.classList.add("ag-group-item",`ag-${this.cssIdentifier}-group-item`),i?(s.insertAdjacentElement("afterbegin",n),this.items.unshift(n)):(s.appendChild(n),this.items.push(n))}hideItem(t,i){const s=this.items[i];lt(s,!t)}getItemIndex(t){const i=t instanceof Ze?t.getGui():t;return this.items.indexOf(i)}setTitle(t){var i;return(i=this.eTitleBar)==null||i.setTitle(t),this}addCssClassToTitleBar(t){var i;(i=this.eTitleBar)==null||i.addCssClass(t)}dispatchEnableChangeEvent(t){const i={type:lr.EVENT_ENABLE_CHANGE,enabled:t};this.dispatchEvent(i)}setEnabled(t,i,s){var n;return this.enabled=t,this.refreshDisabledStyles(),s||this.toggleGroupExpand(t),i||(this.cbGroupEnabled.setValue(t),(n=this.eToggle)==null||n.setValue(t)),this}isEnabled(){return this.enabled}onEnableChange(t){return this.addManagedListener(this,lr.EVENT_ENABLE_CHANGE,i=>t(i.enabled)),this}hideEnabledCheckbox(t){return this.suppressEnabledCheckbox=t,this.refreshChildDisplay(),this.refreshDisabledStyles(),this}hideOpenCloseIcons(t){var i;return(i=this.eTitleBar)==null||i.hideOpenCloseIcons(t),this}refreshDisabledStyles(){var t;const i=!this.enabled;this.eContainer.classList.toggle("ag-disabled",i),(t=this.eTitleBar)==null||t.refreshDisabledStyles(this.suppressEnabledCheckbox&&i),this.eContainer.classList.toggle("ag-disabled-group-container",i)}setupTitleBar(){const t=this.useToggle?this.createToggleTitleBar():this.createDefaultTitleBar();this.eToolbar.insertAdjacentElement("beforebegin",t.getGui())}createDefaultTitleBar(){const t=this.createManagedBean(new Bc(this.params));return this.eTitleBar=t,t.refreshOnExpand(this.expanded),this.addManagedListener(t,Bc.EVENT_EXPAND_CHANGED,i=>this.toggleGroupExpand(i.expanded)),t}createToggleTitleBar(){var t;const i=this.createManagedBean(new Ug({value:this.enabled,label:this.params.title,labelAlignment:"left",labelWidth:"flex",onValueChange:s=>{this.setEnabled(s,!0),this.dispatchEnableChangeEvent(s)}}));return i.addCssClass("ag-group-title-bar"),i.addCssClass(`ag-${(t=this.params.cssIdentifier)!=null?t:"default"}-group-title-bar ag-unselectable`),this.eToggle=i,this.toggleGroupExpand(this.enabled),i}};fo.EVENT_EXPANDED="expanded";fo.EVENT_COLLAPSED="collapsed";fo.EVENT_ENABLE_CHANGE="enableChange";E([xe("eToolbar")],fo.prototype,"eToolbar",2);E([xe("cbGroupEnabled")],fo.prototype,"cbGroupEnabled",2);E([xe("eContainer")],fo.prototype,"eContainer",2);E([Ce],fo.prototype,"postConstruct",1);var Wb=fo,Yr=class Hd extends Ze{constructor(t={}){super(Hd.getTemplate(t)),this.suppressOpenCloseIcons=!1;const{title:i,suppressOpenCloseIcons:s}=t;this.title=i,s!=null&&(this.suppressOpenCloseIcons=s)}static getTemplate(t){var i;const s=(i=t.cssIdentifier)!=null?i:"default";return`
            <div class="ag-group-title-bar ag-${s}-group-title-bar ag-unselectable" role="button">
                <span class="ag-group-title-bar-icon ag-${s}-group-title-bar-icon" ref="eGroupOpenedIcon" role="presentation"></span>
                <span class="ag-group-title-bar-icon ag-${s}-group-title-bar-icon" ref="eGroupClosedIcon" role="presentation"></span>
                <span ref="eTitle" class="ag-group-title ag-${s}-group-title"></span>
            </div>
        `}postConstruct(){this.setTitle(this.title),this.hideOpenCloseIcons(this.suppressOpenCloseIcons),this.setupExpandContract()}setupExpandContract(){this.eGroupClosedIcon.appendChild(Ki("columnSelectClosed",this.gridOptionsService,null)),this.eGroupOpenedIcon.appendChild(Ki("columnSelectOpen",this.gridOptionsService,null)),this.addManagedListener(this.getGui(),"click",()=>this.dispatchExpandChanged()),this.addManagedListener(this.getGui(),"keydown",t=>{switch(t.key){case Q.ENTER:case Q.SPACE:t.preventDefault(),this.dispatchExpandChanged();break;case Q.RIGHT:case Q.LEFT:t.preventDefault(),this.dispatchExpandChanged(t.key===Q.RIGHT);break}})}refreshOnExpand(t){this.refreshAriaStatus(t),this.refreshOpenCloseIcons(t)}refreshAriaStatus(t){this.suppressOpenCloseIcons||Hs(this.getGui(),t)}refreshOpenCloseIcons(t){const i=!this.suppressOpenCloseIcons;lt(this.eGroupOpenedIcon,i&&t),lt(this.eGroupClosedIcon,i&&!t)}isSuppressCollapse(){return this.suppressOpenCloseIcons}dispatchExpandChanged(t){const i={type:Hd.EVENT_EXPAND_CHANGED,expanded:t};this.dispatchEvent(i)}setTitle(t){return this.eTitle.innerText=t||"",lt(this.getGui(),t!=null),this}hideOpenCloseIcons(t){return this.suppressOpenCloseIcons=t,t&&this.dispatchExpandChanged(!0),this}refreshDisabledStyles(t){const i=this.getGui();t?(i.classList.add("ag-disabled-group-title-bar"),i.removeAttribute("tabindex")):(i.classList.remove("ag-disabled-group-title-bar"),typeof this.title=="string"?i.setAttribute("tabindex","0"):i.removeAttribute("tabindex"))}};Yr.EVENT_EXPAND_CHANGED="expandedChanged";E([xe("eGroupOpenedIcon")],Yr.prototype,"eGroupOpenedIcon",2);E([xe("eGroupClosedIcon")],Yr.prototype,"eGroupClosedIcon",2);E([xe("eTitle")],Yr.prototype,"eTitle",2);E([Ce],Yr.prototype,"postConstruct",1);var Bc=Yr,oc=class extends oa{constructor(e=0,t){super('<div class="ag-menu-list" role="tree"></div>'),this.level=e,this.menuItems=[],this.params=t??{column:null,node:null,value:null}}postConstruct(){this.initialiseTabGuard({onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.handleFocusIn(e),onFocusOut:e=>this.handleFocusOut(e)})}onTabKeyDown(e){const t=this.getParentComponent(),i=t&&t.getGui();i&&i.classList.contains("ag-focus-managed")||e.preventDefault(),e.shiftKey&&this.closeIfIsChild(e)}handleKeyDown(e){switch(e.key){case Q.UP:case Q.RIGHT:case Q.DOWN:case Q.LEFT:e.preventDefault(),this.handleNavKey(e.key);break;case Q.ESCAPE:this.closeIfIsChild()&&gs(e);break}}handleFocusIn(e){var t,i;const s=e.relatedTarget;!this.tabGuardCtrl.isTabGuard(s)&&(this.getGui().contains(s)||((i=(t=this.activeMenuItem)==null?void 0:t.getSubMenuGui())==null?void 0:i.contains(s)))||(this.activeMenuItem?this.activeMenuItem.activate():this.activateFirstItem())}handleFocusOut(e){var t;const i=e.relatedTarget;!this.activeMenuItem||this.getGui().contains(i)||((t=this.activeMenuItem.getSubMenuGui())==null?void 0:t.contains(i))||this.activeMenuItem.isSubMenuOpening()||this.activeMenuItem.deactivate()}clearActiveItem(){this.activeMenuItem&&(this.activeMenuItem.deactivate(),this.activeMenuItem=null)}addMenuItems(e){e!=null&&Bi.all(e.map(t=>t==="separator"?Bi.resolve({eGui:this.createSeparator()}):typeof t=="string"?(console.warn(`AG Grid: unrecognised menu item ${t}`),Bi.resolve({eGui:null})):this.addItem(t))).then(t=>{t.forEach(i=>{i?.eGui&&(this.appendChild(i.eGui),i.comp&&this.menuItems.push(i.comp))})})}addItem(e){const t=this.createManagedBean(new xa);return t.init({menuItemDef:e,isAnotherSubMenuOpen:()=>this.menuItems.some(i=>i.isSubMenuOpen()),level:this.level,contextParams:this.params}).then(()=>(t.setParentComponent(this),this.addManagedListener(t,xa.EVENT_CLOSE_MENU,i=>{this.dispatchEvent(i)}),this.addManagedListener(t,xa.EVENT_MENU_ITEM_ACTIVATED,i=>{this.activeMenuItem&&this.activeMenuItem!==i.menuItem&&this.activeMenuItem.deactivate(),this.activeMenuItem=i.menuItem}),{comp:t,eGui:t.getGui()}))}activateFirstItem(){const e=this.menuItems.filter(t=>!t.isDisabled())[0];!e||e.activate()}createSeparator(){return Ni(`
            <div class="ag-menu-separator" aria-hidden="true">
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
            </div>`)}handleNavKey(e){switch(e){case Q.UP:case Q.DOWN:const i=this.findNextItem(e===Q.UP);i&&i!==this.activeMenuItem&&i.activate();return}const t=this.gridOptionsService.get("enableRtl")?Q.RIGHT:Q.LEFT;e===t?this.closeIfIsChild():this.openChild()}closeIfIsChild(e){const t=this.getParentComponent();return t&&t instanceof xa?(e&&e.preventDefault(),t.closeSubMenu(),t.getGui().focus(),!0):!1}openChild(){this.activeMenuItem&&this.activeMenuItem.openSubMenu(!0)}findNextItem(e){const t=this.menuItems.filter(n=>!n.isDisabled());if(!t.length)return;if(!this.activeMenuItem)return e?yt(t):t[0];e&&t.reverse();let i,s=!1;for(let n=0;n<t.length;n++){const l=t[n];if(!s){l===this.activeMenuItem&&(s=!0);continue}i=l;break}return s&&!i?t[0]:i||this.activeMenuItem}destroy(){this.clearActiveItem(),super.destroy()}};E([N("focusService")],oc.prototype,"focusService",2);E([Ce],oc.prototype,"postConstruct",1);var jg=class extends oa{constructor(e){super(),this.wrappedComponent=e,this.setTemplateFromElement(e.getGui())}postConstruct(){this.initialiseTabGuard({onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e)})}handleKeyDown(e){e.key===Q.ESCAPE&&this.closePanel()}onTabKeyDown(e){e.defaultPrevented||(this.closePanel(),e.preventDefault())}closePanel(){const e=this.parentComponent;e.closeSubMenu(),setTimeout(()=>e.getGui().focus(),0)}};E([Ce],jg.prototype,"postConstruct",1);var Jo=class dr extends ge{constructor(){super(...arguments),this.isActive=!1,this.subMenuIsOpen=!1,this.subMenuIsOpening=!1,this.suppressRootStyles=!0,this.suppressAria=!0,this.suppressFocus=!0}init(t){var i,s;const{menuItemDef:n,isAnotherSubMenuOpen:l,level:u,childComponent:g,contextParams:C}=t;return this.params=t.menuItemDef,this.level=u,this.isAnotherSubMenuOpen=l,this.childComponent=g,this.contextParams=C,this.cssClassPrefix=(s=(i=this.params.menuItemParams)==null?void 0:i.cssClassPrefix)!=null?s:"ag-menu-option",this.userComponentFactory.getMenuItemCompDetails(this.params,Vt(We({},n),{level:u,isAnotherSubMenuOpen:l,openSubMenu:A=>this.openSubMenu(A),closeSubMenu:()=>this.closeSubMenu(),closeMenu:A=>this.closeMenu(A),updateTooltip:(A,D)=>this.refreshTooltip(A,D),onItemActivated:()=>this.onItemActivated()})).newAgStackInstance().then(A=>{var D;this.menuItemComp=A;const M=(D=A.configureDefaults)==null?void 0:D.call(A);M&&this.configureDefaults(M===!0?void 0:M)})}addListeners(t,i){i?.suppressClick||this.addManagedListener(t,"click",s=>this.onItemSelected(s)),i?.suppressKeyboardSelect||this.addManagedListener(t,"keydown",s=>{(s.key===Q.ENTER||s.key===Q.SPACE)&&(s.preventDefault(),this.onItemSelected(s))}),i?.suppressMouseDown||this.addManagedListener(t,"mousedown",s=>{s.stopPropagation(),s.preventDefault()}),i?.suppressMouseOver||(this.addManagedListener(t,"mouseenter",()=>this.onMouseEnter()),this.addManagedListener(t,"mouseleave",()=>this.onMouseLeave()))}isDisabled(){return!!this.params.disabled}openSubMenu(t=!1){var i,s;if(this.closeSubMenu(),!this.params.subMenu)return;this.subMenuIsOpening=!0;const n=Ni('<div class="ag-menu" role="presentation"></div>');this.eSubMenuGui=n;let l,u=()=>{this.subMenuIsOpening=!1};if(this.childComponent){const A=this.createBean(new jg(this.childComponent));A.setParentComponent(this);const D=A.getGui(),M="mouseenter",W=()=>this.cancelDeactivate();D.addEventListener(M,W),l=()=>D.removeEventListener(M,W),n.appendChild(D),this.childComponent.afterGuiAttached&&(u=()=>{this.childComponent.afterGuiAttached(),this.subMenuIsOpening=!1})}else if(this.params.subMenu){const A=this.createBean(new oc(this.level+1,this.contextParams));A.setParentComponent(this),A.addMenuItems(this.params.subMenu),n.appendChild(A.getGui()),this.addManagedListener(A,dr.EVENT_CLOSE_MENU,D=>this.dispatchEvent(D)),A.addGuiEventListener("mouseenter",()=>this.cancelDeactivate()),l=()=>this.destroyBean(A),t&&(u=()=>{A.activateFirstItem(),this.subMenuIsOpening=!1})}const g=this.popupService.positionPopupForMenu.bind(this.popupService,{eventSource:this.eGui,ePopup:n}),C=this.localeService.getLocaleTextFunc(),S=this.popupService.addPopup({modal:!0,eChild:n,positionCallback:g,anchorToElement:this.eGui,ariaLabel:C("ariaLabelSubMenu","SubMenu"),afterGuiAttached:u});this.subMenuIsOpen=!0,this.setAriaExpanded(!0),this.hideSubMenu=()=>{var A,D;S&&S.hideFunc(),this.subMenuIsOpen=!1,this.setAriaExpanded(!1),l(),(D=(A=this.menuItemComp).setExpanded)==null||D.call(A,!1),this.eSubMenuGui=void 0},(s=(i=this.menuItemComp).setExpanded)==null||s.call(i,!0)}setAriaExpanded(t){this.suppressAria||Hs(this.eGui,t)}closeSubMenu(){!this.hideSubMenu||(this.hideSubMenu(),this.hideSubMenu=null,this.setAriaExpanded(!1))}isSubMenuOpen(){return this.subMenuIsOpen}isSubMenuOpening(){return this.subMenuIsOpening}activate(t){var i,s;this.cancelActivate(),!this.params.disabled&&(this.isActive=!0,this.suppressRootStyles||this.eGui.classList.add(`${this.cssClassPrefix}-active`),(s=(i=this.menuItemComp).setActive)==null||s.call(i,!0),this.suppressFocus||this.eGui.focus({preventScroll:!0}),t&&this.params.subMenu&&window.setTimeout(()=>{this.isAlive()&&this.isActive&&this.openSubMenu()},300),this.onItemActivated())}deactivate(){var t,i;this.cancelDeactivate(),this.suppressRootStyles||this.eGui.classList.remove(`${this.cssClassPrefix}-active`),(i=(t=this.menuItemComp).setActive)==null||i.call(t,!1),this.isActive=!1,this.subMenuIsOpen&&this.hideSubMenu()}getGui(){return this.menuItemComp.getGui()}getParentComponent(){return this.parentComponent}setParentComponent(t){this.parentComponent=t}getSubMenuGui(){return this.eSubMenuGui}onItemSelected(t){var i,s;(s=(i=this.menuItemComp).select)==null||s.call(i),this.params.action?this.getFrameworkOverrides().wrapOutgoing(()=>this.params.action(this.gridOptionsService.addGridCommonParams(We({},this.contextParams)))):this.openSubMenu(t&&t.type==="keydown"),!(this.params.subMenu&&!this.params.action||this.params.suppressCloseOnSelect)&&this.closeMenu(t)}closeMenu(t){const i={type:dr.EVENT_CLOSE_MENU,event:t};this.dispatchEvent(i)}onItemActivated(){const t={type:dr.EVENT_MENU_ITEM_ACTIVATED,menuItem:this};this.dispatchEvent(t)}cancelActivate(){this.activateTimeoutId&&(window.clearTimeout(this.activateTimeoutId),this.activateTimeoutId=0)}cancelDeactivate(){this.deactivateTimeoutId&&(window.clearTimeout(this.deactivateTimeoutId),this.deactivateTimeoutId=0)}onMouseEnter(){this.cancelDeactivate(),this.isAnotherSubMenuOpen()?this.activateTimeoutId=window.setTimeout(()=>this.activate(!0),dr.ACTIVATION_DELAY):this.activate(!0)}onMouseLeave(){this.cancelActivate(),this.isSubMenuOpen()?this.deactivateTimeoutId=window.setTimeout(()=>this.deactivate(),dr.ACTIVATION_DELAY):this.deactivate()}configureDefaults(t){var i,s,n;if(this.tooltip=this.params.tooltip,!this.menuItemComp){setTimeout(()=>this.configureDefaults(t));return}let l=this.menuItemComp.getGui();const u=(s=(i=this.menuItemComp).getRootElement)==null?void 0:s.call(i);u&&(t?.suppressRootStyles||l.classList.add("ag-menu-option-custom"),l=u),this.eGui=l,this.suppressRootStyles=!!t?.suppressRootStyles,this.suppressRootStyles||(l.classList.add(this.cssClassPrefix),(n=this.params.cssClasses)==null||n.forEach(g=>l.classList.add(g)),this.params.disabled&&l.classList.add(`${this.cssClassPrefix}-disabled`)),t?.suppressTooltip||this.refreshTooltip(),this.suppressAria=!!t?.suppressAria,this.suppressAria||(jt(l,"treeitem"),np(l,this.level+1),this.params.disabled&&gh(l,!0)),t?.suppressTabIndex||l.setAttribute("tabindex","-1"),this.params.disabled||this.addListeners(l,t),this.suppressFocus=!!t?.suppressFocus}refreshTooltip(t,i){this.tooltip=t,this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),!(!t||!this.menuItemComp)&&(this.tooltipFeature=this.createBean(new $s({getGui:()=>this.getGui(),getTooltipValue:()=>this.tooltip,getLocation:()=>"menu",shouldDisplayTooltip:i})))}destroy(){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),super.destroy()}};Jo.EVENT_CLOSE_MENU="closeMenu";Jo.EVENT_MENU_ITEM_ACTIVATED="menuItemActivated";Jo.ACTIVATION_DELAY=80;E([N("popupService")],Jo.prototype,"popupService",2);E([N("userComponentFactory")],Jo.prototype,"userComponentFactory",2);E([N("beans")],Jo.prototype,"beans",2);var xa=Jo,er=class Bd extends Ze{constructor(t){super(Bd.getTemplate(t)),this.config=t,this.closable=!0}static getTemplate(t){const i=t.cssIdentifier||"default";return`<div class="ag-panel ag-${i}-panel" tabindex="-1">
            <div ref="eTitleBar" class="ag-panel-title-bar ag-${i}-panel-title-bar ag-unselectable">
                <span ref="eTitle" class="ag-panel-title-bar-title ag-${i}-panel-title-bar-title"></span>
                <div ref="eTitleBarButtons" class="ag-panel-title-bar-buttons ag-${i}-panel-title-bar-buttons"></div>
            </div>
            <div ref="eContentWrapper" class="ag-panel-content-wrapper ag-${i}-panel-content-wrapper"></div>
        </div>`}postConstruct(){const{component:t,closable:i,hideTitleBar:s,title:n,minWidth:l=250,width:u,minHeight:g=250,height:C,centered:S,popup:A,x:D,y:M}=this.config;this.positionableFeature=new Or(this.getGui(),{minWidth:l,width:u,minHeight:g,height:C,centered:S,x:D,y:M,popup:A,calculateTopBuffer:()=>this.positionableFeature.getHeight()-this.getBodyHeight()}),this.createManagedBean(this.positionableFeature);const W=this.getGui();t&&this.setBodyComponent(t),s?lt(this.eTitleBar,!1):(n&&this.setTitle(n),this.setClosable(i??this.closable)),this.addManagedListener(this.eTitleBar,"mousedown",z=>{const U=this.gridOptionsService.getDocument();if(W.contains(z.relatedTarget)||W.contains(U.activeElement)||this.eTitleBarButtons.contains(z.target)){z.preventDefault();return}const X=this.eContentWrapper.querySelector("button, [href], input, select, textarea, [tabindex]");X&&X.focus()}),!(A&&this.positionableFeature.isPositioned())&&(this.renderComponent&&this.renderComponent(),this.positionableFeature.initialisePosition(),this.eContentWrapper.style.height="0")}renderComponent(){const t=this.getGui();t.focus(),this.close=()=>{t.parentElement.removeChild(t),this.destroy()}}getHeight(){return this.positionableFeature.getHeight()}setHeight(t){this.positionableFeature.setHeight(t)}getWidth(){return this.positionableFeature.getWidth()}setWidth(t){this.positionableFeature.setWidth(t)}setClosable(t){if(t!==this.closable&&(this.closable=t),t){const i=this.closeButtonComp=new Ze(Bd.CLOSE_BTN_TEMPLATE);this.getContext().createBean(i);const s=i.getGui(),n=Wt("close",this.gridOptionsService);n.classList.add("ag-panel-title-bar-button-icon"),s.appendChild(n),this.addTitleBarButton(i),i.addManagedListener(s,"click",this.onBtClose.bind(this))}else if(this.closeButtonComp){const i=this.closeButtonComp.getGui();i.parentElement.removeChild(i),this.closeButtonComp=this.destroyBean(this.closeButtonComp)}}setBodyComponent(t){t.setParentComponent(this),this.eContentWrapper.appendChild(t.getGui())}addTitleBarButton(t,i){const s=this.eTitleBarButtons,n=s.children,l=n.length;i==null&&(i=l),i=Math.max(0,Math.min(i,l)),t.addCssClass("ag-panel-title-bar-button");const u=t.getGui();i===0?s.insertAdjacentElement("afterbegin",u):i===l?s.insertAdjacentElement("beforeend",u):n[i-1].insertAdjacentElement("afterend",u),t.setParentComponent(this)}getBodyHeight(){return $n(this.eContentWrapper)}getBodyWidth(){return zo(this.eContentWrapper)}setTitle(t){this.eTitle.innerText=t}onBtClose(){this.close()}destroy(){this.closeButtonComp&&(this.closeButtonComp=this.destroyBean(this.closeButtonComp));const t=this.getGui();t&&Ui(t)&&this.close(),super.destroy()}};er.CLOSE_BTN_TEMPLATE='<div class="ag-button"></div>';E([xe("eContentWrapper")],er.prototype,"eContentWrapper",2);E([xe("eTitleBar")],er.prototype,"eTitleBar",2);E([xe("eTitleBarButtons")],er.prototype,"eTitleBarButtons",2);E([xe("eTitle")],er.prototype,"eTitle",2);E([Ce],er.prototype,"postConstruct",1);var zb=er,Ub=class extends zb{constructor(e){super(Vt(We({},e),{popup:!0})),this.isMaximizable=!1,this.isMaximized=!1,this.maximizeListeners=[],this.resizeListenerDestroy=null,this.lastPosition={x:0,y:0,width:0,height:0}}postConstruct(){const e=this.getGui(),{movable:t,resizable:i,maximizable:s}=this.config;this.addCssClass("ag-dialog"),super.postConstruct(),this.addManagedListener(e,"focusin",n=>{this.popupService.bringPopupToFront(e)}),t&&this.setMovable(t),s&&this.setMaximizable(s),i&&this.setResizable(i)}renderComponent(){const e=this.getGui(),{alwaysOnTop:t,modal:i,title:s,afterGuiAttached:n}=this.config,l=this.localeService.getLocaleTextFunc(),u=this.popupService.addPopup({modal:i,eChild:e,closeOnEsc:!0,closedCallback:this.onClosed.bind(this),alwaysOnTop:t,ariaLabel:s||l("ariaLabelDialog","Dialog"),afterGuiAttached:n});u&&(this.close=u.hideFunc)}onClosed(e){var t,i;this.destroy(),(i=(t=this.config).closedCallback)==null||i.call(t,e)}toggleMaximize(){const e=this.positionableFeature.getPosition();if(this.isMaximized){const{x:t,y:i,width:s,height:n}=this.lastPosition;this.setWidth(s),this.setHeight(n),this.positionableFeature.offsetElement(t,i)}else this.lastPosition.width=this.getWidth(),this.lastPosition.height=this.getHeight(),this.lastPosition.x=e.x,this.lastPosition.y=e.y,this.positionableFeature.offsetElement(0,0),this.setHeight("100%"),this.setWidth("100%");this.isMaximized=!this.isMaximized,this.refreshMaximizeIcon()}refreshMaximizeIcon(){lt(this.maximizeIcon,!this.isMaximized),lt(this.minimizeIcon,this.isMaximized)}clearMaximizebleListeners(){this.maximizeListeners.length&&(this.maximizeListeners.forEach(e=>e()),this.maximizeListeners.length=0),this.resizeListenerDestroy&&(this.resizeListenerDestroy(),this.resizeListenerDestroy=null)}destroy(){this.maximizeButtonComp=this.destroyBean(this.maximizeButtonComp),this.clearMaximizebleListeners(),super.destroy()}setResizable(e){this.positionableFeature.setResizable(e)}setMovable(e){this.positionableFeature.setMovable(e,this.eTitleBar)}setMaximizable(e){if(!e){this.clearMaximizebleListeners(),this.maximizeButtonComp&&(this.destroyBean(this.maximizeButtonComp),this.maximizeButtonComp=this.maximizeIcon=this.minimizeIcon=void 0);return}const t=this.eTitleBar;if(!t||e===this.isMaximizable)return;const i=this.buildMaximizeAndMinimizeElements();this.refreshMaximizeIcon(),i.addManagedListener(i.getGui(),"click",this.toggleMaximize.bind(this)),this.addTitleBarButton(i,0),this.maximizeListeners.push(this.addManagedListener(t,"dblclick",this.toggleMaximize.bind(this))),this.resizeListenerDestroy=this.addManagedListener(this,"resize",()=>{this.isMaximized=!1,this.refreshMaximizeIcon()})}buildMaximizeAndMinimizeElements(){const e=this.maximizeButtonComp=this.createBean(new Ze('<div class="ag-dialog-button"></span>')),t=e.getGui();return this.maximizeIcon=Wt("maximize",this.gridOptionsService),t.appendChild(this.maximizeIcon),this.maximizeIcon.classList.add("ag-panel-title-bar-button-icon"),this.minimizeIcon=Wt("minimize",this.gridOptionsService),t.appendChild(this.minimizeIcon),this.minimizeIcon.classList.add("ag-panel-title-bar-button-icon"),e}};E([N("popupService")],Ub.prototype,"popupService",2);var Yb=0,Bs=class extends ge{constructor(){super(...arguments),this.popupList=[]}postConstruct(){this.ctrlsService.whenReady(e=>{this.gridCtrl=e.gridCtrl}),this.addManagedListener(this.eventService,L.EVENT_GRID_STYLES_CHANGED,this.handleThemeChange.bind(this))}getPopupParent(){const e=this.gridOptionsService.get("popupParent");return e||this.gridCtrl.getGui()}positionPopupForMenu(e){const{eventSource:t,ePopup:i}=e,s=this.getPopupIndex(i);if(s!==-1){const W=this.popupList[s];W.alignedToElement=t}const n=t.getBoundingClientRect(),l=this.getParentRect(),u=this.keepXYWithinBounds(i,n.top-l.top,0),g=i.clientWidth>0?i.clientWidth:200;i.style.minWidth=`${g}px`;const S=l.right-l.left-g;let A;this.gridOptionsService.get("enableRtl")?(A=M(),A<0&&(A=D(),this.setAlignedStyles(i,"left")),A>S&&(A=0,this.setAlignedStyles(i,"right"))):(A=D(),A>S&&(A=M(),this.setAlignedStyles(i,"right")),A<0&&(A=0,this.setAlignedStyles(i,"left"))),i.style.left=`${A}px`,i.style.top=`${u}px`;function D(){return n.right-l.left-2}function M(){return n.left-l.left-g}}positionPopupUnderMouseEvent(e){const{ePopup:t,nudgeX:i,nudgeY:s,skipObserver:n}=e;this.positionPopup({ePopup:t,nudgeX:i,nudgeY:s,keepWithinBounds:!0,skipObserver:n,updatePosition:()=>this.calculatePointerAlign(e.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(e.type,e.ePopup,null,e.mouseEvent,e.column,e.rowNode)})}calculatePointerAlign(e){const t=this.getParentRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}positionPopupByComponent(e){const{ePopup:t,nudgeX:i,nudgeY:s,keepWithinBounds:n,eventSource:l,alignSide:u="left",position:g="over",column:C,rowNode:S,type:A}=e,D=l.getBoundingClientRect(),M=this.getParentRect(),W=this.getPopupIndex(t);if(W!==-1){const U=this.popupList[W];U.alignedToElement=l}const z=()=>{let U=D.left-M.left;u==="right"&&(U-=t.offsetWidth-D.width);let X;return g==="over"?(X=D.top-M.top,this.setAlignedStyles(t,"over")):(this.setAlignedStyles(t,"under"),this.shouldRenderUnderOrAbove(t,D,M,e.nudgeY||0)==="under"?X=D.top-M.top+D.height:X=D.top-t.offsetHeight-(s||0)*2-M.top),{x:U,y:X}};this.positionPopup({ePopup:t,nudgeX:i,nudgeY:s,keepWithinBounds:n,updatePosition:z,postProcessCallback:()=>this.callPostProcessPopup(A,t,l,null,C,S)})}shouldRenderUnderOrAbove(e,t,i,s){const n=i.bottom-t.bottom,l=t.top-i.top,u=e.offsetHeight+s;return n>u?"under":l>u||l>n?"above":"under"}setAlignedStyles(e,t){const i=this.getPopupIndex(e);if(i===-1)return;const s=this.popupList[i],{alignedToElement:n}=s;!n||(["right","left","over","above","under"].forEach(u=>{n.classList.remove(`ag-has-popup-positioned-${u}`),e.classList.remove(`ag-popup-positioned-${u}`)}),!t)||(n.classList.add(`ag-has-popup-positioned-${t}`),e.classList.add(`ag-popup-positioned-${t}`))}callPostProcessPopup(e,t,i,s,n,l){const u=this.gridOptionsService.getCallback("postProcessPopup");u&&u({column:n,rowNode:l,ePopup:t,type:e,eventSource:i,mouseEvent:s})}positionPopup(e){const{ePopup:t,keepWithinBounds:i,nudgeX:s,nudgeY:n,skipObserver:l,updatePosition:u}=e,g={width:0,height:0},C=(S=!1)=>{let{x:A,y:D}=u();S&&t.clientWidth===g.width&&t.clientHeight===g.height||(g.width=t.clientWidth,g.height=t.clientHeight,s&&(A+=s),n&&(D+=n),i&&(A=this.keepXYWithinBounds(t,A,1),D=this.keepXYWithinBounds(t,D,0)),t.style.left=`${A}px`,t.style.top=`${D}px`,e.postProcessCallback&&e.postProcessCallback())};if(C(),!l){const S=this.resizeObserverService.observeResize(t,()=>C(!0));setTimeout(()=>S(),Bs.WAIT_FOR_POPUP_CONTENT_RESIZE)}}getActivePopups(){return this.popupList.map(e=>e.element)}getPopupList(){return this.popupList}getParentRect(){const e=this.gridOptionsService.getDocument();let t=this.getPopupParent();return t===e.body?t=e.documentElement:getComputedStyle(t).position==="static"&&(t=t.offsetParent),Th(t)}keepXYWithinBounds(e,t,i){const s=i===0,n=s?"clientHeight":"clientWidth",l=s?"top":"left",u=s?"offsetHeight":"offsetWidth",g=s?"scrollTop":"scrollLeft",C=this.gridOptionsService.getDocument(),S=C.documentElement,A=this.getPopupParent(),D=A.getBoundingClientRect(),M=C.documentElement.getBoundingClientRect(),W=A===C.body,z=e[u];let X=W?(s?Dh:wn)(S)+S[g]:A[n];W&&(X-=Math.abs(M[l]-D[l]));const q=X-z;return Math.min(Math.max(t,0),Math.abs(q))}addPopup(e){const t=this.gridOptionsService.getDocument(),{eChild:i,ariaLabel:s,alwaysOnTop:n,positionCallback:l,anchorToElement:u}=e;if(!t)return console.warn("AG Grid: could not find the document, document is empty"),{hideFunc:()=>{}};const g=this.getPopupIndex(i);if(g!==-1)return{hideFunc:this.popupList[g].hideFunc};this.initialisePopupPosition(i);const C=this.createPopupWrapper(i,s,!!n),S=this.addEventListenersToPopup(Vt(We({},e),{wrapperEl:C}));return l&&l(),this.addPopupToPopupList(i,C,S,u),{hideFunc:S}}initialisePopupPosition(e){const i=this.getPopupParent().getBoundingClientRect();ce(e.style.top)||(e.style.top=`${i.top*-1}px`),ce(e.style.left)||(e.style.left=`${i.left*-1}px`)}createPopupWrapper(e,t,i){const s=this.getPopupParent(),n=document.createElement("div"),{allThemes:l}=this.environment.getTheme();return l.length&&n.classList.add(...l),n.classList.add("ag-popup"),e.classList.add(this.gridOptionsService.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),e.hasAttribute("role")||jt(e,"dialog"),fs(e,t),n.appendChild(e),s.appendChild(n),i?this.setAlwaysOnTop(e,!0):this.bringPopupToFront(e),n}handleThemeChange(){const{allThemes:e}=this.environment.getTheme();for(const t of this.popupList){for(const i of Array.from(t.wrapper.classList))i.startsWith("ag-theme-")&&t.wrapper.classList.remove(i);e.length&&t.wrapper.classList.add(...e)}}addEventListenersToPopup(e){const t=this.gridOptionsService.getDocument(),i=this.getPopupParent(),{wrapperEl:s,eChild:n,click:l,closedCallback:u,afterGuiAttached:g,closeOnEsc:C,modal:S}=e;let A=!1;const D=U=>{if(!s.contains(t.activeElement))return;U.key===Q.ESCAPE&&!us(U)&&z({keyboardEvent:U})},M=U=>z({mouseEvent:U}),W=U=>z({touchEvent:U}),z=(U={})=>{const{mouseEvent:X,touchEvent:q,keyboardEvent:_}=U;this.isEventFromCurrentPopup({mouseEvent:X,touchEvent:q},n)||A||(A=!0,i.removeChild(s),t.removeEventListener("keydown",D),t.removeEventListener("mousedown",M),t.removeEventListener("touchstart",W),t.removeEventListener("contextmenu",M),this.eventService.removeEventListener(L.EVENT_DRAG_STARTED,M),u&&u(X||q||_),this.removePopupFromPopupList(n))};return g&&g({hidePopup:z}),window.setTimeout(()=>{C&&t.addEventListener("keydown",D),S&&(t.addEventListener("mousedown",M),this.eventService.addEventListener(L.EVENT_DRAG_STARTED,M),t.addEventListener("touchstart",W),t.addEventListener("contextmenu",M))},0),z}addPopupToPopupList(e,t,i,s){this.popupList.push({element:e,wrapper:t,hideFunc:i,instanceId:Yb++,isAnchored:!!s}),s&&this.setPopupPositionRelatedToElement(e,s)}getPopupIndex(e){return this.popupList.findIndex(t=>t.element===e)}setPopupPositionRelatedToElement(e,t){const i=this.getPopupIndex(e);if(i===-1)return;const s=this.popupList[i];if(s.stopAnchoringPromise&&s.stopAnchoringPromise.then(l=>l&&l()),s.stopAnchoringPromise=void 0,s.isAnchored=!1,!t)return;const n=this.keepPopupPositionedRelativeTo({element:t,ePopup:e,hidePopup:s.hideFunc});return s.stopAnchoringPromise=n,s.isAnchored=!0,n}removePopupFromPopupList(e){this.setAlignedStyles(e,null),this.setPopupPositionRelatedToElement(e,null),this.popupList=this.popupList.filter(t=>t.element!==e)}keepPopupPositionedRelativeTo(e){const t=this.getPopupParent(),i=t.getBoundingClientRect(),{element:s,ePopup:n}=e,l=s.getBoundingClientRect(),u=i.top-l.top,g=i.left-l.left;let C=u,S=g;const A=n.style.top,D=parseInt(A.substring(0,A.length-1),10),M=n.style.left,W=parseInt(M.substring(0,M.length-1),10);return new Bi(z=>{this.getFrameworkOverrides().setInterval(()=>{const U=t.getBoundingClientRect(),X=s.getBoundingClientRect();if(X.top==0&&X.left==0&&X.height==0&&X.width==0){e.hidePopup();return}const _=U.top-X.top;if(_!=C){const se=this.keepXYWithinBounds(n,D+u-_,0);n.style.top=`${se}px`}C=_;const J=U.left-X.left;if(J!=S){const se=this.keepXYWithinBounds(n,W+g-J,1);n.style.left=`${se}px`}S=J},200).then(U=>{z(()=>{U!=null&&window.clearInterval(U)})})})}hasAnchoredPopup(){return this.popupList.some(e=>e.isAnchored)}isEventFromCurrentPopup(e,t){const{mouseEvent:i,touchEvent:s}=e,n=i||s;if(!n)return!1;const l=this.getPopupIndex(t);if(l===-1)return!1;for(let u=l;u<this.popupList.length;u++){const g=this.popupList[u];if(Va(g.element,n))return!0}return this.isElementWithinCustomPopup(n.target)}isElementWithinCustomPopup(e){const t=this.gridOptionsService.getDocument();for(;e&&e!==t.body;){if(e.classList.contains("ag-custom-component-popup")||e.parentElement===null)return!0;e=e.parentElement}return!1}getWrapper(e){for(;!e.classList.contains("ag-popup")&&e.parentElement;)e=e.parentElement;return e.classList.contains("ag-popup")?e:null}setAlwaysOnTop(e,t){const i=this.getWrapper(e);!i||(i.classList.toggle("ag-always-on-top",!!t),t&&this.bringPopupToFront(i))}bringPopupToFront(e){const t=this.getPopupParent(),i=Array.prototype.slice.call(t.querySelectorAll(".ag-popup")),s=i.length,n=Array.prototype.slice.call(t.querySelectorAll(".ag-popup.ag-always-on-top")),l=n.length,u=this.getWrapper(e);if(!u||s<=1||!t.contains(e))return;const g=i.indexOf(u),C=u.querySelectorAll("div"),S=[];for(C.forEach(A=>{A.scrollTop!==0&&S.push([A,A.scrollTop])}),l?u.classList.contains("ag-always-on-top")?g!==s-1&&yt(n).insertAdjacentElement("afterend",u):g!==s-l-1&&n[0].insertAdjacentElement("beforebegin",u):g!==s-1&&yt(i).insertAdjacentElement("afterend",u);S.length;){const A=S.pop();A[0].scrollTop=A[1]}}};Bs.WAIT_FOR_POPUP_CONTENT_RESIZE=200;E([N("focusService")],Bs.prototype,"focusService",2);E([N("ctrlsService")],Bs.prototype,"ctrlsService",2);E([N("resizeObserverService")],Bs.prototype,"resizeObserverService",2);E([Ce],Bs.prototype,"postConstruct",1);Bs=E([Fe("popupService")],Bs);var Xb=class extends Ze{constructor(){super(`
        <div class="ag-autocomplete-row" role="presentation">
            <div class="ag-autocomplete-row-label"></div>
        </div>`),this.hasHighlighting=!1}setState(e,t){this.value=e,this.render(),this.updateSelected(t)}updateSelected(e){this.addOrRemoveCssClass("ag-autocomplete-row-selected",e)}setSearchString(e){var t;let i=!1;if(ce(e)){const s=(t=this.value)==null?void 0:t.toLocaleLowerCase().indexOf(e.toLocaleLowerCase());if(s>=0){i=!0,this.hasHighlighting=!0;const n=s+e.length,l=ai(this.value.slice(0,s)),u=ai(this.value.slice(s,n)),g=ai(this.value.slice(n));this.getGui().lastElementChild.innerHTML=`${l}<b>${u}</b>${g}`}}!i&&this.hasHighlighting&&(this.hasHighlighting=!1,this.render())}render(){var e;this.getGui().lastElementChild.innerHTML=(e=ai(this.value))!=null?e:"&nbsp;"}},Ll=class Kg extends Xo{constructor(t){super(Kg.TEMPLATE),this.params=t,this.searchString=""}destroy(){super.destroy()}init(){this.autocompleteEntries=this.params.autocompleteEntries,this.virtualList=this.createManagedBean(new Xg({cssIdentifier:"autocomplete"})),this.virtualList.setComponentCreator(this.createRowComponent.bind(this)),this.eList.appendChild(this.virtualList.getGui()),this.virtualList.setModel({getRowCount:()=>this.autocompleteEntries.length,getRow:i=>this.autocompleteEntries[i]});const t=this.virtualList.getGui();this.addManagedListener(t,"click",()=>this.params.onConfirmed()),this.addManagedListener(t,"mousemove",this.onMouseMove.bind(this)),this.addManagedListener(t,"mousedown",i=>i.preventDefault()),this.setSelectedValue(0)}onNavigationKeyDown(t,i){t.preventDefault();const s=this.autocompleteEntries.indexOf(this.selectedValue),n=i===Q.UP?s-1:s+1;this.checkSetSelectedValue(n)}setSearch(t){this.searchString=t,ce(t)?this.runSearch():(this.autocompleteEntries=this.params.autocompleteEntries,this.virtualList.refresh(),this.checkSetSelectedValue(0)),this.updateSearchInList()}runContainsSearch(t,i){let s,n=!1;const l=t.toLocaleLowerCase(),u=i.filter(g=>{const S=g.toLocaleLowerCase().indexOf(l),A=S===0,D=S>=0;return D&&(!s||!n&&A||n===A&&g.length<s.length)&&(s=g,n=A),D});return!s&&u.length&&(s=u[0]),{topMatch:s,allMatches:u}}runSearch(){var t,i;const{autocompleteEntries:s}=this.params,n=s.map(S=>{var A;return(A=S.displayValue)!=null?A:S.key});let l,u;if(this.params.useFuzzySearch)l=Kn(this.searchString,n,!0).values,u=l.length?l[0]:void 0;else{const S=this.runContainsSearch(this.searchString,n);l=S.allMatches,u=S.topMatch}let g=s.filter(({key:S,displayValue:A})=>l.includes(A??S));if(!g.length&&this.selectedValue&&((i=(t=this.params)==null?void 0:t.forceLastSelection)==null?void 0:i.call(t,this.selectedValue,this.searchString))&&(g=[this.selectedValue]),this.autocompleteEntries=g,this.virtualList.refresh(),!u)return;const C=l.indexOf(u);this.checkSetSelectedValue(C)}updateSearchInList(){this.virtualList.forEachRenderedRow(t=>t.setSearchString(this.searchString))}checkSetSelectedValue(t){t>=0&&t<this.autocompleteEntries.length&&this.setSelectedValue(t)}setSelectedValue(t){const i=this.autocompleteEntries[t];this.selectedValue!==i&&(this.selectedValue=i,this.virtualList.ensureIndexVisible(t),this.virtualList.forEachRenderedRow((s,n)=>{s.updateSelected(t===n)}))}createRowComponent(t){var i;const s=new Xb;return this.getContext().createBean(s),s.setState((i=t.displayValue)!=null?i:t.key,t===this.selectedValue),s}onMouseMove(t){const i=this.virtualList.getGui().getBoundingClientRect(),s=this.virtualList.getScrollTop(),n=t.clientY-i.top+s,l=Math.floor(n/this.virtualList.getRowHeight());this.checkSetSelectedValue(l)}afterGuiAttached(){this.virtualList.refresh()}getSelectedValue(){var t;return this.autocompleteEntries.length&&(t=this.selectedValue)!=null?t:null}};Ll.TEMPLATE=`<div class="ag-autocomplete-list-popup">
            <div ref="eList" class="ag-autocomplete-list"></div>
        <div>`;E([xe("eList")],Ll.prototype,"eList",2);E([Ce],Ll.prototype,"init",1);var $b=Ll,mo=class hn extends Ze{constructor(){super(`
            <div class="ag-autocomplete" role="presentation">
                <ag-input-text-field ref="eAutocompleteInput"></ag-input-text-field>
            </div>`),this.isListOpen=!1,this.lastPosition=0,this.valid=!0}postConstruct(){this.eAutocompleteInput.onValueChange(t=>this.onValueChanged(t)),this.eAutocompleteInput.getInputElement().setAttribute("autocomplete","off"),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.addGuiEventListener("click",this.updatePositionAndList.bind(this)),this.addDestroyFunc(()=>{this.destroyBean(this.autocompleteList)}),this.addGuiEventListener("focusout",()=>this.onFocusOut())}onValueChanged(t){const i=xs(t);this.updateValue(i),this.updateAutocompleteList(i)}updateValue(t){this.updateLastPosition(),this.dispatchEvent({type:hn.EVENT_VALUE_CHANGED,value:t}),this.validate(t)}updateAutocompleteList(t){var i,s,n,l;const u=(s=(i=this.listGenerator)==null?void 0:i.call(this,t,this.lastPosition))!=null?s:{enabled:!1};if((!u.type||u.type!==((n=this.autocompleteListParams)==null?void 0:n.type))&&this.isListOpen&&this.closeList(),this.autocompleteListParams=u,(l=this.autocompleteListParams)!=null&&l.enabled){this.isListOpen||this.openList();const{searchString:g}=this.autocompleteListParams;this.autocompleteList.setSearch(g??"")}else this.isListOpen&&this.closeList()}onKeyDown(t){const i=t.key;switch(this.updateLastPosition(),i){case Q.ENTER:this.onEnterKeyDown(t);break;case Q.TAB:this.onTabKeyDown(t);break;case Q.DOWN:case Q.UP:this.onUpDownKeyDown(t,i);break;case Q.LEFT:case Q.RIGHT:case Q.PAGE_HOME:case Q.PAGE_END:setTimeout(()=>{this.updatePositionAndList()});break;case Q.ESCAPE:this.onEscapeKeyDown(t);break;case Q.SPACE:t.ctrlKey&&!this.isListOpen&&(t.preventDefault(),this.forceOpenList());break}}confirmSelection(){var t;const i=(t=this.autocompleteList)==null?void 0:t.getSelectedValue();i&&(this.closeList(),this.dispatchEvent({type:hn.EVENT_OPTION_SELECTED,value:this.getValue(),position:this.lastPosition,updateEntry:i,autocompleteType:this.autocompleteListParams.type}))}onTabKeyDown(t){this.isListOpen&&(t.preventDefault(),t.stopPropagation(),this.confirmSelection())}onEnterKeyDown(t){t.preventDefault(),this.isListOpen?this.confirmSelection():this.onCompleted()}onUpDownKeyDown(t,i){var s;t.preventDefault(),this.isListOpen?(s=this.autocompleteList)==null||s.onNavigationKeyDown(t,i):this.forceOpenList()}onEscapeKeyDown(t){this.isListOpen&&(t.preventDefault(),t.stopPropagation(),this.closeList(),this.setCaret(this.lastPosition,!0))}onFocusOut(){this.isListOpen&&this.closeList()}updatePositionAndList(){var t;this.updateLastPosition(),this.updateAutocompleteList((t=this.eAutocompleteInput.getValue())!=null?t:null)}setCaret(t,i){const s=this.gridOptionsService.getDocument();i&&s.activeElement===s.body&&this.eAutocompleteInput.getFocusableElement().focus();const n=this.eAutocompleteInput.getInputElement();n.setSelectionRange(t,t),t===n.value.length&&(n.scrollLeft=n.scrollWidth)}forceOpenList(){this.onValueChanged(this.eAutocompleteInput.getValue())}updateLastPosition(){var t;this.lastPosition=(t=this.eAutocompleteInput.getInputElement().selectionStart)!=null?t:0}validate(t){var i;!this.validator||(this.validationMessage=this.validator(t),this.eAutocompleteInput.getInputElement().setCustomValidity((i=this.validationMessage)!=null?i:""),this.valid=!this.validationMessage,this.dispatchEvent({type:hn.EVENT_VALID_CHANGED,isValid:this.valid,validationMessage:this.validationMessage}))}openList(){this.isListOpen=!0,this.autocompleteList=this.createBean(new $b({autocompleteEntries:this.autocompleteListParams.entries,onConfirmed:()=>this.confirmSelection(),forceLastSelection:this.forceLastSelection}));const t=this.autocompleteList.getGui(),i={ePopup:t,type:"autocomplete",eventSource:this.getGui(),position:"under",alignSide:this.gridOptionsService.get("enableRtl")?"right":"left",keepWithinBounds:!0},s=this.popupService.addPopup({eChild:t,anchorToElement:this.getGui(),positionCallback:()=>this.popupService.positionPopupByComponent(i),ariaLabel:this.listAriaLabel});this.hidePopup=s.hideFunc,this.autocompleteList.afterGuiAttached()}closeList(){this.isListOpen=!1,this.hidePopup(),this.destroyBean(this.autocompleteList),this.autocompleteList=null}onCompleted(){this.isListOpen&&this.closeList(),this.dispatchEvent({type:hn.EVENT_VALUE_CONFIRMED,value:this.getValue(),isValid:this.isValid()})}getValue(){return xs(this.eAutocompleteInput.getValue())}setInputPlaceholder(t){return this.eAutocompleteInput.setInputPlaceholder(t),this}setInputAriaLabel(t){return this.eAutocompleteInput.setInputAriaLabel(t),this}setListAriaLabel(t){return this.listAriaLabel=t,this}setListGenerator(t){return this.listGenerator=t,this}setValidator(t){return this.validator=t,this}isValid(){return this.valid}setValue(t){const{value:i,position:s,silent:n,updateListOnlyIfOpen:l,restoreFocus:u}=t;this.eAutocompleteInput.setValue(i,!0),this.setCaret(s??this.lastPosition,u),n||this.updateValue(i),(!l||this.isListOpen)&&this.updateAutocompleteList(i)}setForceLastSelection(t){return this.forceLastSelection=t,this}setInputDisabled(t){return this.eAutocompleteInput.setDisabled(t),this}};mo.EVENT_VALUE_CHANGED="eventValueChanged";mo.EVENT_VALUE_CONFIRMED="eventValueConfirmed";mo.EVENT_OPTION_SELECTED="eventOptionSelected";mo.EVENT_VALID_CHANGED="eventValidChanged";E([N("popupService")],mo.prototype,"popupService",2);E([xe("eAutocompleteInput")],mo.prototype,"eAutocompleteInput",2);E([Ce],mo.prototype,"postConstruct",1);var jb=mo,vo=class Pa extends Ze{constructor(t,i,s,n){super(),this.dragSourceDropTarget=t,this.ghost=i,this.horizontal=s,this.template=n}init(){var t;this.setTemplate((t=this.template)!=null?t:Pa.TEMPLATE);const i=this.getGui();this.addElementClasses(i),this.addElementClasses(this.eDragHandle,"drag-handle"),this.addElementClasses(this.eText,"text"),this.addElementClasses(this.eButton,"button"),this.eDragHandle.appendChild(Wt("columnDrag",this.gridOptionsService)),this.eButton.appendChild(Wt("cancel",this.gridOptionsService)),this.setupComponents(),!this.ghost&&this.isDraggable()&&this.addDragSource(),this.setupAria(),this.setupTooltip(),this.activateTabIndex(),this.refreshDraggable()}isDraggable(){return!0}refreshDraggable(){this.eDragHandle.classList.toggle("ag-column-select-column-readonly",!this.isDraggable())}setupAria(){const t=this.localeService.getLocaleTextFunc(),i=[this.getAriaDisplayName()];this.addAdditionalAriaInstructions(i,t),fs(this.getGui(),i.join(". "))}addAdditionalAriaInstructions(t,i){if(this.isRemovable()){const s=i("ariaDropZoneColumnComponentDescription","Press DELETE to remove");t.push(s)}}setupTooltip(){const t=()=>{const i=this.getTooltip();this.setTooltip({newTooltipText:i})};t(),this.addManagedListener(this.eventService,L.EVENT_NEW_COLUMNS_LOADED,t)}getDragSourceId(){}getDefaultIconName(){return Je.ICON_NOT_ALLOWED}addDragSource(){const{dragAndDropService:t,eDragHandle:i}=this,s=this.createGetDragItem(),n=this.getDefaultIconName(),l={type:this.getDragSourceType(),sourceId:this.getDragSourceId(),eElement:i,getDefaultIconName:()=>n,getDragItem:s,dragItemName:this.getDisplayName()};t.addDragSource(l,!0),this.addDestroyFunc(()=>t.removeDragSource(l))}setupComponents(){this.setTextValue(),this.setupRemove(),this.ghost&&this.addCssClass("ag-column-drop-cell-ghost")}isRemovable(){return!0}refreshRemove(){lt(this.eButton,this.isRemovable())}setupRemove(){this.refreshRemove();const t={type:Pa.EVENT_COLUMN_REMOVE};this.addGuiEventListener("keydown",s=>this.onKeyDown(s)),this.addManagedListener(this.eButton,"click",s=>{this.dispatchEvent(t),s.stopPropagation()});const i=new pi(this.eButton);this.addManagedListener(i,pi.EVENT_TAP,()=>{this.dispatchEvent(t)}),this.addDestroyFunc(i.destroy.bind(i))}onKeyDown(t){t.key===Q.DELETE&&this.isRemovable()&&(t.preventDefault(),this.dispatchEvent({type:Pa.EVENT_COLUMN_REMOVE}))}getDisplayValue(){return this.getDisplayName()}setTextValue(){const t=this.getDisplayValue(),i=ai(t);this.eText.innerHTML=i}addElementClasses(t,i){i=i?`-${i}`:"";const s=this.horizontal?"horizontal":"vertical";t.classList.add(`ag-column-drop-cell${i}`,`ag-column-drop-${s}-cell${i}`)}destroy(){super.destroy(),this.dragSourceDropTarget=null}};vo.EVENT_COLUMN_REMOVE="columnRemove";vo.TEMPLATE=`<span role="option">
          <span ref="eDragHandle" class="ag-drag-handle ag-column-drop-cell-drag-handle" role="presentation"></span>
          <span ref="eText" class="ag-column-drop-cell-text" aria-hidden="true"></span>
          <span ref="eButton" class="ag-column-drop-cell-button" role="presentation"></span>
        </span>`;E([N("dragAndDropService")],vo.prototype,"dragAndDropService",2);E([xe("eText")],vo.prototype,"eText",2);E([xe("eDragHandle")],vo.prototype,"eDragHandle",2);E([xe("eButton")],vo.prototype,"eButton",2);E([Ce],vo.prototype,"init",1);var Kb=vo,aa=class Cs extends Ze{constructor(t){super('<div class="ag-unselectable" role="presentation"></div>'),this.horizontal=t,this.state=Cs.STATE_NOT_DRAGGING,this.guiDestroyFunctions=[],this.childPillComponents=[],this.resizeEnabled=!1,this.addElementClasses(this.getGui()),this.ePillDropList=document.createElement("div"),this.addElementClasses(this.ePillDropList,"list"),jt(this.ePillDropList,"listbox")}isHorizontal(){return this.horizontal}toggleResizable(t){this.positionableFeature.setResizable(t?{bottom:!0}:!1),this.resizeEnabled=t}isSourceEventFromTarget(t){const{dropZoneTarget:i,dragSource:s}=t;return i.contains(s.eElement)}destroy(){this.destroyGui(),super.destroy()}destroyGui(){this.guiDestroyFunctions.forEach(t=>t()),this.guiDestroyFunctions.length=0,this.childPillComponents.length=0,Jt(this.getGui()),Jt(this.ePillDropList)}init(t){this.params=t??{},this.createManagedBean(new go(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.setupDropTarget(),this.positionableFeature=new Or(this.getGui(),{minHeight:100}),this.createManagedBean(this.positionableFeature),this.refreshGui(),fs(this.ePillDropList,this.getAriaLabel())}handleKeyDown(t){const i=!this.horizontal;let s=t.key===Q.DOWN,n=t.key===Q.UP;if(!i){const u=this.gridOptionsService.get("enableRtl");s=!u&&t.key===Q.RIGHT||u&&t.key===Q.LEFT,n=!u&&t.key===Q.LEFT||u&&t.key===Q.RIGHT}if(!s&&!n)return;const l=this.focusService.findNextFocusableElement(this.getFocusableElement(),!1,n);l&&(t.preventDefault(),l.focus())}addElementClasses(t,i){i=i?`-${i}`:"";const s=this.horizontal?"horizontal":"vertical";t.classList.add(`ag-column-drop${i}`,`ag-column-drop-${s}${i}`)}setupDropTarget(){this.dropTarget={getContainer:this.getGui.bind(this),getIconName:this.getIconName.bind(this),onDragging:this.onDragging.bind(this),onDragEnter:this.onDragEnter.bind(this),onDragLeave:this.onDragLeave.bind(this),onDragStop:this.onDragStop.bind(this),isInterestedIn:this.isInterestedIn.bind(this)},this.dragAndDropService.addDropTarget(this.dropTarget)}minimumAllowedNewInsertIndex(){return 0}checkInsertIndex(t){const i=this.getNewInsertIndex(t);if(i<0)return!1;const s=this.minimumAllowedNewInsertIndex(),n=Math.max(s,i),l=n!==this.insertIndex;return l&&(this.insertIndex=n),l}getNewInsertIndex(t){const i=t.event,s=this.horizontal?i.clientX:i.clientY,n=this.childPillComponents.map(u=>u.getGui().getBoundingClientRect()),l=n.findIndex(u=>this.horizontal?u.right>s&&u.left<s:u.top<s&&u.bottom>s);if(l===-1){const u=this.gridOptionsService.get("enableRtl");return n.every(S=>s>(this.horizontal?S.right:S.bottom))?u&&this.horizontal?0:this.childPillComponents.length:n.every(S=>s<(this.horizontal?S.left:S.top))?u&&this.horizontal?this.childPillComponents.length:0:this.insertIndex}return this.insertIndex<=l?l+1:l}checkDragStartedBySelf(t){this.state===Cs.STATE_NOT_DRAGGING&&(this.state=Cs.STATE_REARRANGE_ITEMS,this.potentialDndItems=this.getItems(t.dragSource.getDragItem()),this.refreshGui(),this.checkInsertIndex(t),this.refreshGui())}onDragging(t){this.checkDragStartedBySelf(t),this.checkInsertIndex(t)&&this.refreshGui()}handleDragEnterEnd(t){}onDragEnter(t){const i=this.getItems(t.dragSource.getDragItem());this.state=Cs.STATE_NEW_ITEMS_IN;const s=i.filter(l=>this.isItemDroppable(l,t)),n=s.every(l=>this.childPillComponents.map(u=>u.getItem()).indexOf(l)!==-1);if(s.length!==0){if(this.potentialDndItems=s,n){this.state=Cs.STATE_NOT_DRAGGING;return}this.handleDragEnterEnd(t),this.checkInsertIndex(t),this.refreshGui()}}isPotentialDndItems(){return _u(this.potentialDndItems)}handleDragLeaveEnd(t){}onDragLeave(t){if(this.state===Cs.STATE_REARRANGE_ITEMS){const i=this.getItems(t.dragSource.getDragItem());this.removeItems(i)}this.isPotentialDndItems()&&(this.handleDragLeaveEnd(t),this.potentialDndItems=[],this.refreshGui()),this.state=Cs.STATE_NOT_DRAGGING}refreshOnDragStop(){return!0}onDragStop(){if(this.isPotentialDndItems()){let t=!1;this.state===Cs.STATE_NEW_ITEMS_IN?(this.addItems(this.potentialDndItems),t=!0):t=this.rearrangeItems(this.potentialDndItems),this.potentialDndItems=[],(this.refreshOnDragStop()||!t)&&this.refreshGui()}this.state=Cs.STATE_NOT_DRAGGING}removeItems(t){const i=this.getExistingItems().filter(s=>!zi(t,s));this.updateItems(i)}addItems(t){if(!t)return;const i=this.getExistingItems().slice(),s=t.filter(n=>i.indexOf(n)<0);Sd(i,s,this.insertIndex),this.updateItems(i)}addItem(t){this.insertIndex=this.getExistingItems().length,this.addItems([t]),this.refreshGui()}rearrangeItems(t){const i=this.getNonGhostItems().slice();return Sd(i,t,this.insertIndex),bs(i,this.getExistingItems())?!1:(this.updateItems(i),!0)}refreshGui(){const t=this.ePillDropList.scrollTop,i=this.resizeEnabled,s=this.getFocusedItem();let n=this.focusService.findNextFocusableElement();n||(n=this.focusService.findNextFocusableElement(void 0,!1,!0)),this.toggleResizable(!1),this.destroyGui(),this.addIconAndTitleToGui(),this.addEmptyMessageToGui(),this.addItemsToGui(),this.isHorizontal()||(this.ePillDropList.scrollTop=t),i&&this.toggleResizable(i),this.focusService.isKeyboardMode()&&this.restoreFocus(s,n)}getFocusedItem(){const t=this.getGui(),i=this.gridOptionsService.getDocument().activeElement;return t.contains(i)?Array.from(t.querySelectorAll(".ag-column-drop-cell")).indexOf(i):-1}restoreFocus(t,i){const s=this.getGui(),n=Array.from(s.querySelectorAll(".ag-column-drop-cell"));if(t===-1)return;n.length===0&&i.focus();const l=Math.min(n.length-1,t),u=n[l];u&&u.focus()}focusList(t){const i=t?this.childPillComponents.length-1:0;this.restoreFocus(i,this.getFocusableElement())}getNonGhostItems(){const t=this.getExistingItems();return this.isPotentialDndItems()?t.filter(i=>!zi(this.potentialDndItems,i)):t}addItemsToGui(){const i=this.getNonGhostItems().map(s=>this.createItemComponent(s,!1));if(this.isPotentialDndItems()){const s=this.potentialDndItems.map(n=>this.createItemComponent(n,!0));this.insertIndex>=i.length?i.push(...s):i.splice(this.insertIndex,0,...s)}this.appendChild(this.ePillDropList),i.forEach((s,n)=>{n>0&&this.addArrow(this.ePillDropList),this.ePillDropList.appendChild(s.getGui())}),this.addAriaLabelsToComponents()}addAriaLabelsToComponents(){this.childPillComponents.forEach((t,i)=>{const s=t.getGui();dl(s,i+1),ll(s,this.childPillComponents.length)})}createItemComponent(t,i){const s=this.createPillComponent(t,this.dropTarget,i,this.horizontal);return s.addEventListener(Kb.EVENT_COLUMN_REMOVE,this.removeItems.bind(this,[t])),this.context.createBean(s),this.guiDestroyFunctions.push(()=>this.destroyBean(s)),i||this.childPillComponents.push(s),s}addIconAndTitleToGui(){const{title:t,icon:i}=this.params;if(!t||!i)return;const s=document.createElement("div");if(Xn(s,!0),this.addElementClasses(s,"title-bar"),this.addElementClasses(i,"icon"),this.addOrRemoveCssClass("ag-column-drop-empty",this.isExistingItemsEmpty()),s.appendChild(i),!this.horizontal){const n=document.createElement("span");this.addElementClasses(n,"title"),n.innerHTML=t,s.appendChild(n)}this.appendChild(s)}isExistingItemsEmpty(){return this.getExistingItems().length===0}addEmptyMessageToGui(){const{emptyMessage:t}=this.params;if(!t||!this.isExistingItemsEmpty()||this.isPotentialDndItems())return;const i=document.createElement("span");i.innerHTML=t,this.addElementClasses(i,"empty-message"),this.ePillDropList.appendChild(i)}addArrow(t){if(this.horizontal){const i=this.gridOptionsService.get("enableRtl"),s=Wt(i?"smallLeft":"smallRight",this.gridOptionsService);this.addElementClasses(s,"cell-separator"),t.appendChild(s)}}};aa.STATE_NOT_DRAGGING="notDragging";aa.STATE_NEW_ITEMS_IN="newItemsIn";aa.STATE_REARRANGE_ITEMS="rearrangeItems";E([N("focusService")],aa.prototype,"focusService",2);E([N("dragAndDropService")],aa.prototype,"dragAndDropService",2);var qb=["touchstart","touchend","touchmove","touchcancel"],qg=class{constructor(e="javascript"){this.frameworkName=e,this.renderingEngine="vanilla",this.wrapIncoming=t=>t(),this.wrapOutgoing=t=>t()}setInterval(e,t){return new Bi(i=>{i(window.setInterval(e,t))})}addEventListener(e,t,i,s){const n=zi(qb,t);e.addEventListener(t,i,{capture:!!s,passive:n})}get shouldWrapOutgoing(){return!1}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}getDocLink(e){return`https://www.ag-grid.com/${this.frameworkName==="solid"?"react":this.frameworkName}-data-grid${e?`/${e}`:""}`}},ho=class extends ge{getNextCellToFocus(e,t,i=!1){return i?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)}getNextCellToFocusWithCtrlPressed(e,t){const i=e===Q.UP,s=e===Q.DOWN,n=e===Q.LEFT;let l,u;if(i||s)u=i?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow(),l=t.column;else{const g=this.columnModel.getAllDisplayedColumns(),C=this.gridOptionsService.get("enableRtl");u=t.rowIndex,l=n!==C?g[0]:yt(g)}return{rowIndex:u,rowPinned:null,column:l}}getNextCellToFocusWithoutCtrlPressed(e,t){let i=t,s=!1;for(;!s;){switch(e){case Q.UP:i=this.getCellAbove(i);break;case Q.DOWN:i=this.getCellBelow(i);break;case Q.RIGHT:this.gridOptionsService.get("enableRtl")?i=this.getCellToLeft(i):i=this.getCellToRight(i);break;case Q.LEFT:this.gridOptionsService.get("enableRtl")?i=this.getCellToRight(i):i=this.getCellToLeft(i);break;default:i=null,console.warn("AG Grid: unknown key for navigation "+e);break}i?s=this.isCellGoodToFocusOn(i):s=!0}return i}isCellGoodToFocusOn(e){const t=e.column;let i;switch(e.rowPinned){case"top":i=this.pinnedRowModel.getPinnedTopRow(e.rowIndex);break;case"bottom":i=this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);break;default:i=this.rowModel.getRow(e.rowIndex);break}return i?!t.isSuppressNavigable(i):!1}getCellToLeft(e){if(!e)return null;const t=this.columnModel.getDisplayedColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;const t=this.columnModel.getDisplayedColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getRowBelow(e){const t=e.rowIndex,i=e.rowPinned;if(this.isLastRowInContainer(e))switch(i){case"bottom":return null;case"top":return this.rowModel.isRowsToRender()?{rowIndex:this.paginationProxy.getPageFirstRow(),rowPinned:null}:this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;default:return this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}const s=this.rowModel.getRow(e.rowIndex),n=this.getNextStickyPosition(s);return n||{rowIndex:t+1,rowPinned:i}}getNextStickyPosition(e,t){if(!this.gridOptionsService.isGroupRowsSticky()||!e||!e.sticky)return;const i=[...this.rowRenderer.getStickyTopRowCtrls()].sort((u,g)=>u.getRowNode().rowIndex-g.getRowNode().rowIndex),s=t?-1:1,n=i.findIndex(u=>u.getRowNode().rowIndex===e.rowIndex),l=i[n+s];if(l)return{rowIndex:l.getRowNode().rowIndex,rowPinned:null}}getCellBelow(e){if(!e)return null;const t=this.getRowBelow(e);return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}isLastRowInContainer(e){const t=e.rowPinned,i=e.rowIndex;return t==="top"?this.pinnedRowModel.getPinnedTopRowData().length-1<=i:t==="bottom"?this.pinnedRowModel.getPinnedBottomRowData().length-1<=i:this.paginationProxy.getPageLastRow()<=i}getRowAbove(e){const t=e.rowIndex,i=e.rowPinned;if(i?t===0:t===this.paginationProxy.getPageFirstRow())return i==="top"?null:i?this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null:this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null;const n=this.rowModel.getRow(e.rowIndex),l=this.getNextStickyPosition(n,!0);return l||{rowIndex:t-1,rowPinned:i}}getCellAbove(e){if(!e)return null;const t=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}getLastBodyCell(){return{rowIndex:this.paginationProxy.getPageLastRow(),rowPinned:null}}getLastFloatingTopRow(){return{rowIndex:this.pinnedRowModel.getPinnedTopRowData().length-1,rowPinned:"top"}}getNextTabbedCell(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){const t=this.columnModel.getAllDisplayedColumns();let i=e.rowIndex,s=e.rowPinned,n=this.columnModel.getDisplayedColAfter(e.column);if(!n){n=t[0];const l=this.getRowBelow(e);if(Xe(l)||!l.rowPinned&&!this.paginationProxy.isRowInPage(l))return null;i=l?l.rowIndex:null,s=l?l.rowPinned:null}return{rowIndex:i,column:n,rowPinned:s}}getNextTabbedCellBackwards(e){const t=this.columnModel.getAllDisplayedColumns();let i=e.rowIndex,s=e.rowPinned,n=this.columnModel.getDisplayedColBefore(e.column);if(!n){n=yt(t);const l=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});if(Xe(l)||!l.rowPinned&&!this.paginationProxy.isRowInPage(l))return null;i=l?l.rowIndex:null,s=l?l.rowPinned:null}return{rowIndex:i,column:n,rowPinned:s}}};E([N("columnModel")],ho.prototype,"columnModel",2);E([N("rowModel")],ho.prototype,"rowModel",2);E([N("rowRenderer")],ho.prototype,"rowRenderer",2);E([N("pinnedRowModel")],ho.prototype,"pinnedRowModel",2);E([N("paginationProxy")],ho.prototype,"paginationProxy",2);ho=E([Fe("cellNavigationService")],ho);var Go=class extends ge{constructor(){super(...arguments),this.consuming=!1}setBeans(e){this.logger=e.create("AlignedGridsService")}getAlignedGridApis(){var e;let t=(e=this.gridOptionsService.get("alignedGrids"))!=null?e:[];const i=typeof t=="function";typeof t=="function"&&(t=t());const s=()=>`See ${this.getFrameworkOverrides().getDocLink("aligned-grids")}`;return t.map(l=>{var u;if(!l){ys("alignedGrids contains an undefined option."),i||ys(`You may want to configure via a callback to avoid setup race conditions:
                     "alignedGrids: () => [linkedGrid]"`),ys(s());return}if(l instanceof nt)return l;const g=l;return"current"in g?(u=g.current)==null?void 0:u.api:(g.api||ys(`alignedGrids - No api found on the linked grid. If you are passing gridOptions to alignedGrids since v31 this is no longer valid. ${s()}`),g.api)}).filter(l=>!!l&&!l.isDestroyed())}init(){this.addManagedListener(this.eventService,L.EVENT_COLUMN_MOVED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,L.EVENT_COLUMN_VISIBLE,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,L.EVENT_COLUMN_PINNED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,L.EVENT_COLUMN_GROUP_OPENED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,L.EVENT_COLUMN_RESIZED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,L.EVENT_BODY_SCROLL,this.fireScrollEvent.bind(this))}fireEvent(e){this.consuming||this.getAlignedGridApis().forEach(t=>{const i=t.__getAlignedGridService();e(i)})}onEvent(e){this.consuming=!0,e(),this.consuming=!1}fireColumnEvent(e){this.fireEvent(t=>{t.onColumnEvent(e)})}fireScrollEvent(e){e.direction==="horizontal"&&this.fireEvent(t=>{t.onScrollEvent(e)})}onScrollEvent(e){this.onEvent(()=>{this.ctrlsService.getGridBodyCtrl().getScrollFeature().setHorizontalScrollPosition(e.left,!0)})}getMasterColumns(e){const t=[];return e.columns?e.columns.forEach(i=>{t.push(i)}):e.column&&t.push(e.column),t}getColumnIds(e){const t=[];return e.columns?e.columns.forEach(i=>{t.push(i.getColId())}):e.column&&t.push(e.column.getColId()),t}onColumnEvent(e){this.onEvent(()=>{switch(e.type){case L.EVENT_COLUMN_MOVED:case L.EVENT_COLUMN_VISIBLE:case L.EVENT_COLUMN_PINNED:case L.EVENT_COLUMN_RESIZED:const t=e;this.processColumnEvent(t);break;case L.EVENT_COLUMN_GROUP_OPENED:const i=e;this.processGroupOpenedEvent(i);break;case L.EVENT_COLUMN_PIVOT_CHANGED:console.warn("AG Grid: pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.");break}})}processGroupOpenedEvent(e){e.columnGroups.forEach(t=>{let i=null;if(t){const s=t.getGroupId();i=this.columnModel.getProvidedColumnGroup(s)}t&&!i||(this.logger.log("onColumnEvent-> processing "+e+" expanded = "+t.isExpanded()),this.columnModel.setColumnGroupOpened(i,t.isExpanded(),"alignedGridChanged"))})}processColumnEvent(e){var t;const i=e.column;let s=null;if(i&&(s=this.columnModel.getPrimaryColumn(i.getColId())),i&&!s)return;const n=this.getMasterColumns(e);switch(e.type){case L.EVENT_COLUMN_MOVED:{const S=e,D=e.api.getColumnState().map(M=>({colId:M.colId}));this.columnModel.applyColumnState({state:D,applyOrder:!0},"alignedGridChanged"),this.logger.log(`onColumnEvent-> processing ${e.type} toIndex = ${S.toIndex}`)}break;case L.EVENT_COLUMN_VISIBLE:{const S=e,D=e.api.getColumnState().map(M=>({colId:M.colId,hide:M.hide}));this.columnModel.applyColumnState({state:D},"alignedGridChanged"),this.logger.log(`onColumnEvent-> processing ${e.type} visible = ${S.visible}`)}break;case L.EVENT_COLUMN_PINNED:{const S=e,D=e.api.getColumnState().map(M=>({colId:M.colId,pinned:M.pinned}));this.columnModel.applyColumnState({state:D},"alignedGridChanged"),this.logger.log(`onColumnEvent-> processing ${e.type} pinned = ${S.pinned}`)}break;case L.EVENT_COLUMN_RESIZED:const g=e,C={};n.forEach(S=>{this.logger.log(`onColumnEvent-> processing ${e.type} actualWidth = ${S.getActualWidth()}`),C[S.getId()]={key:S.getColId(),newWidth:S.getActualWidth()}}),(t=g.flexColumns)==null||t.forEach(S=>{C[S.getId()]&&delete C[S.getId()]}),this.columnModel.setColumnWidths(Object.values(C),!1,g.finished,"alignedGridChanged");break}const u=this.ctrlsService.getGridBodyCtrl().isVerticalScrollShowing();this.getAlignedGridApis().forEach(g=>{g.setGridOption("alwaysShowVerticalScroll",u)})}};E([N("columnModel")],Go.prototype,"columnModel",2);E([N("ctrlsService")],Go.prototype,"ctrlsService",2);E([ds(0,Qi("loggerFactory"))],Go.prototype,"setBeans",1);E([Ce],Go.prototype,"init",1);Go=E([Fe("alignedGridsService")],Go);var _o=class extends ge{constructor(){super(...arguments),this.selectedNodes=new Map,this.lastRowNode=null}init(){this.rowSelection=this.gridOptionsService.get("rowSelection"),this.groupSelectsChildren=this.gridOptionsService.get("groupSelectsChildren"),this.addManagedPropertyListeners(["groupSelectsChildren","rowSelection"],()=>{this.groupSelectsChildren=this.gridOptionsService.get("groupSelectsChildren"),this.rowSelection=this.gridOptionsService.get("rowSelection"),this.deselectAllRowNodes({source:"api"})}),this.addManagedListener(this.eventService,L.EVENT_ROW_SELECTED,this.onRowSelected.bind(this))}destroy(){super.destroy(),this.resetNodes(),this.lastRowNode=null}isMultiselect(){return this.rowSelection==="multiple"}setNodesSelected(e){var t;const{newValue:i,clearSelection:s,suppressFinishActions:n,rangeSelect:l,nodes:u,event:g,source:C="api"}=e;if(u.length===0)return 0;if(u.length>1&&!this.isMultiselect())return console.warn("AG Grid: cannot multi select while rowSelection='single'"),0;const S=this.groupSelectsChildren&&e.groupSelectsFiltered===!0,A=u.map(M=>M.footer?M.sibling:M);if(l){if(u.length>1)return console.warn("AG Grid: cannot range select while selecting multiple rows"),0;let M=null;if(C==="checkboxSelected"&&i===!1&&this.lastRowNode&&(this.lastRowNode.id?M=this.lastRowNode:this.lastRowNode=null),M==null&&(M=this.getLastSelectedNode()),M){const W=A[0];if(W!==M&&this.isMultiselect())return this.selectRange(W,M,i,C)}}this.lastRowNode=i?null:A[0];let D=0;for(let M=0;M<A.length;M++){const W=A[M];S&&W.group||W.selectThisNode(i,g,C)&&D++,this.groupSelectsChildren&&((t=W.childrenAfterGroup)==null?void 0:t.length)&&(D+=this.selectChildren(W,i,S,C))}if(!n&&(i&&(s||!this.isMultiselect())&&(D+=this.clearOtherNodes(A[0],C)),D>0)){this.updateGroupsFromChildrenSelections(C);const W={type:L.EVENT_SELECTION_CHANGED,source:C};this.eventService.dispatchEvent(W)}return D}selectRange(e,t,i=!0,s){const n=this.rowModel.getNodesInRangeForSelection(e,t);let l=0;n.forEach(g=>{if(g.group&&this.groupSelectsChildren)return;g.selectThisNode(i,void 0,s)&&l++}),this.updateGroupsFromChildrenSelections(s);const u={type:L.EVENT_SELECTION_CHANGED,source:s};return this.eventService.dispatchEvent(u),l}selectChildren(e,t,i,s){const n=i?e.childrenAfterAggFilter:e.childrenAfterGroup;return Xe(n)?0:this.setNodesSelected({newValue:t,clearSelection:!1,suppressFinishActions:!0,groupSelectsFiltered:i,source:s,nodes:n})}getLastSelectedNode(){const e=Array.from(this.selectedNodes.keys());if(e.length==0)return null;const t=this.selectedNodes.get(yt(e));return t||null}getSelectedNodes(){const e=[];return this.selectedNodes.forEach(t=>{t&&e.push(t)}),e}getSelectedRows(){const e=[];return this.selectedNodes.forEach(t=>{t&&t.data&&e.push(t.data)}),e}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(e){const t=new Map;this.selectedNodes.forEach((i,s)=>{i&&e(i)&&t.set(s,i)}),this.selectedNodes=t}updateGroupsFromChildrenSelections(e,t){if(!this.groupSelectsChildren||this.rowModel.getType()!=="clientSide")return!1;const s=this.rowModel.getRootNode();t||(t=new Fl(!0,s),t.setInactive());let n=!1;return t.forEachChangedNodeDepthFirst(l=>{if(l!==s){const u=l.calculateSelectedFromChildren();n=l.selectThisNode(u===null?!1:u,void 0,e)||n}}),n}clearOtherNodes(e,t){const i=new Map;let s=0;return this.selectedNodes.forEach(n=>{n&&n.id!==e.id&&(s+=this.selectedNodes.get(n.id).setSelectedParams({newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:t}),this.groupSelectsChildren&&n.parent&&i.set(n.parent.id,n.parent))}),i.forEach(n=>{const l=n.calculateSelectedFromChildren();n.selectThisNode(l===null?!1:l,void 0,t)}),s}onRowSelected(e){const t=e.node;this.groupSelectsChildren&&t.group||(t.isSelected()?this.selectedNodes.set(t.id,t):this.selectedNodes.delete(t.id))}syncInRowNode(e,t){this.syncInOldRowNode(e,t),this.syncInNewRowNode(e)}syncInOldRowNode(e,t){if(ce(t)&&e.id!==t.id&&t){const s=t.id;this.selectedNodes.get(s)==e&&this.selectedNodes.set(t.id,t)}}syncInNewRowNode(e){this.selectedNodes.has(e.id)?(e.setSelectedInitialValue(!0),this.selectedNodes.set(e.id,e)):e.setSelectedInitialValue(!1)}reset(e){const t=this.getSelectionCount();if(this.resetNodes(),t){const i={type:L.EVENT_SELECTION_CHANGED,source:e};this.eventService.dispatchEvent(i)}}resetNodes(){var e;(e=this.selectedNodes)==null||e.clear()}getBestCostNodeSelection(){if(this.rowModel.getType()!=="clientSide")return;const t=this.rowModel.getTopLevelNodes();if(t===null)return;const i=[];function s(n){for(let l=0,u=n.length;l<u;l++){const g=n[l];if(g.isSelected())i.push(g);else{const C=g;C.group&&C.children&&s(C.children)}}}return s(t),i}isEmpty(){let e=0;return this.selectedNodes.forEach(t=>{t&&e++}),e===0}deselectAllRowNodes(e){const t=g=>g.selectThisNode(!1,void 0,s),i=this.rowModel.getType()==="clientSide",{source:s,justFiltered:n,justCurrentPage:l}=e;if(l||n){if(!i){console.error("AG Grid: selecting just filtered only works when gridOptions.rowModelType='clientSide'");return}this.getNodesToSelect(n,l).forEach(t)}else this.selectedNodes.forEach(g=>{g&&t(g)}),this.reset(s);i&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(s);const u={type:L.EVENT_SELECTION_CHANGED,source:s};this.eventService.dispatchEvent(u)}getSelectedCounts(e,t){let i=0,s=0;const n=l=>{this.groupSelectsChildren&&l.group||(l.isSelected()?i++:l.selectable&&s++)};return this.getNodesToSelect(e,t).forEach(n),{selectedCount:i,notSelectedCount:s}}getSelectAllState(e,t){const{selectedCount:i,notSelectedCount:s}=this.getSelectedCounts(e,t);return i===0&&s===0?!1:i>0&&s>0?null:i>0}hasNodesToSelect(e=!1,t=!1){return this.getNodesToSelect(e,t).filter(i=>i.selectable).length>0}getNodesToSelect(e=!1,t=!1){if(this.rowModel.getType()!=="clientSide")throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`);const i=[];if(t)return this.paginationProxy.forEachNodeOnPage(n=>{if(!n.group){i.push(n);return}if(!n.expanded){const l=u=>{var g;i.push(u),(g=u.childrenAfterFilter)!=null&&g.length&&u.childrenAfterFilter.forEach(l)};l(n);return}this.groupSelectsChildren||i.push(n)}),i;const s=this.rowModel;return e?(s.forEachNodeAfterFilter(n=>{i.push(n)}),i):(s.forEachNode(n=>{i.push(n)}),i)}selectAllRowNodes(e){if(this.rowModel.getType()!=="clientSide")throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`);const{source:t,justFiltered:i,justCurrentPage:s}=e,n=u=>u.selectThisNode(!0,void 0,t);this.getNodesToSelect(i,s).forEach(n),this.rowModel.getType()==="clientSide"&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(t);const l={type:L.EVENT_SELECTION_CHANGED,source:t};this.eventService.dispatchEvent(l)}getSelectionState(){const e=[];return this.selectedNodes.forEach(t=>{t?.id&&e.push(t.id)}),e.length?e:null}setSelectionState(e,t){if(!Array.isArray(e))return;const i=new Set(e),s=[];this.rowModel.forEachNode(n=>{i.has(n.id)&&s.push(n)}),this.setNodesSelected({newValue:!0,nodes:s,source:t})}};E([N("rowModel")],_o.prototype,"rowModel",2);E([N("paginationProxy")],_o.prototype,"paginationProxy",2);E([Ce],_o.prototype,"init",1);_o=E([Fe("selectionService")],_o);var Mn=class{constructor(e){this.viaApi=(t,...i)=>(Ue(`Since v31, 'columnApi.${t}' is deprecated and moved to 'api.${t}'.`),this.api[t](...i)),this.api=e}sizeColumnsToFit(e){this.viaApi("sizeColumnsToFit",e)}setColumnGroupOpened(e,t){this.viaApi("setColumnGroupOpened",e,t)}getColumnGroup(e,t){return this.viaApi("getColumnGroup",e,t)}getProvidedColumnGroup(e){return this.viaApi("getProvidedColumnGroup",e)}getDisplayNameForColumn(e,t){return this.viaApi("getDisplayNameForColumn",e,t)}getDisplayNameForColumnGroup(e,t){return this.viaApi("getDisplayNameForColumnGroup",e,t)}getColumn(e){return this.viaApi("getColumn",e)}getColumns(){return this.viaApi("getColumns")}applyColumnState(e){return this.viaApi("applyColumnState",e)}getColumnState(){return this.viaApi("getColumnState")}resetColumnState(){this.viaApi("resetColumnState")}getColumnGroupState(){return this.viaApi("getColumnGroupState")}setColumnGroupState(e){this.viaApi("setColumnGroupState",e)}resetColumnGroupState(){this.viaApi("resetColumnGroupState")}isPinning(){return this.viaApi("isPinning")}isPinningLeft(){return this.viaApi("isPinningLeft")}isPinningRight(){return this.viaApi("isPinningRight")}getDisplayedColAfter(e){return this.viaApi("getDisplayedColAfter",e)}getDisplayedColBefore(e){return this.viaApi("getDisplayedColBefore",e)}setColumnVisible(e,t){this.viaApi("setColumnVisible",e,t)}setColumnsVisible(e,t){this.viaApi("setColumnsVisible",e,t)}setColumnPinned(e,t){this.viaApi("setColumnPinned",e,t)}setColumnsPinned(e,t){this.viaApi("setColumnsPinned",e,t)}getAllGridColumns(){return this.viaApi("getAllGridColumns")}getDisplayedLeftColumns(){return this.viaApi("getDisplayedLeftColumns")}getDisplayedCenterColumns(){return this.viaApi("getDisplayedCenterColumns")}getDisplayedRightColumns(){return this.viaApi("getDisplayedRightColumns")}getAllDisplayedColumns(){return this.viaApi("getAllDisplayedColumns")}getAllDisplayedVirtualColumns(){return this.viaApi("getAllDisplayedVirtualColumns")}moveColumn(e,t){this.viaApi("moveColumn",e,t)}moveColumnByIndex(e,t){this.viaApi("moveColumnByIndex",e,t)}moveColumns(e,t){this.viaApi("moveColumns",e,t)}moveRowGroupColumn(e,t){this.viaApi("moveRowGroupColumn",e,t)}setColumnAggFunc(e,t){this.viaApi("setColumnAggFunc",e,t)}setColumnWidth(e,t,i=!0,s){this.viaApi("setColumnWidth",e,t,i,s)}setColumnWidths(e,t=!0,i){this.viaApi("setColumnWidths",e,t,i)}setPivotMode(e){this.viaApi("setPivotMode",e)}isPivotMode(){return this.viaApi("isPivotMode")}getPivotResultColumn(e,t){return this.viaApi("getPivotResultColumn",e,t)}setValueColumns(e){this.viaApi("setValueColumns",e)}getValueColumns(){return this.viaApi("getValueColumns")}removeValueColumn(e){this.viaApi("removeValueColumn",e)}removeValueColumns(e){this.viaApi("removeValueColumns",e)}addValueColumn(e){this.viaApi("addValueColumn",e)}addValueColumns(e){this.viaApi("addValueColumns",e)}setRowGroupColumns(e){this.viaApi("setRowGroupColumns",e)}removeRowGroupColumn(e){this.viaApi("removeRowGroupColumn",e)}removeRowGroupColumns(e){this.viaApi("removeRowGroupColumns",e)}addRowGroupColumn(e){this.viaApi("addRowGroupColumn",e)}addRowGroupColumns(e){this.viaApi("addRowGroupColumns",e)}getRowGroupColumns(){return this.viaApi("getRowGroupColumns")}setPivotColumns(e){this.viaApi("setPivotColumns",e)}removePivotColumn(e){this.viaApi("removePivotColumn",e)}removePivotColumns(e){this.viaApi("removePivotColumns",e)}addPivotColumn(e){this.viaApi("addPivotColumn",e)}addPivotColumns(e){this.viaApi("addPivotColumns",e)}getPivotColumns(){return this.viaApi("getPivotColumns")}getLeftDisplayedColumnGroups(){return this.viaApi("getLeftDisplayedColumnGroups")}getCenterDisplayedColumnGroups(){return this.viaApi("getCenterDisplayedColumnGroups")}getRightDisplayedColumnGroups(){return this.viaApi("getRightDisplayedColumnGroups")}getAllDisplayedColumnGroups(){return this.viaApi("getAllDisplayedColumnGroups")}autoSizeColumn(e,t){return this.viaApi("autoSizeColumn",e,t)}autoSizeColumns(e,t){this.viaApi("autoSizeColumns",e,t)}autoSizeAllColumns(e){this.viaApi("autoSizeAllColumns",e)}setPivotResultColumns(e){this.viaApi("setPivotResultColumns",e)}getPivotResultColumns(){return this.viaApi("getPivotResultColumns")}};E([N("gridApi")],Mn.prototype,"api",2);Mn=E([Fe("columnApi")],Mn);var co=class extends ge{constructor(){super(...arguments),this.initialised=!1,this.isSsrm=!1}init(){this.isSsrm=this.gridOptionsService.isRowModelType("serverSide"),this.cellExpressions=this.gridOptionsService.get("enableCellExpressions"),this.isTreeData=this.gridOptionsService.get("treeData"),this.initialised=!0;const e=i=>this.callColumnCellValueChangedHandler(i),t=this.gridOptionsService.useAsyncEvents();this.eventService.addEventListener(L.EVENT_CELL_VALUE_CHANGED,e,t),this.addDestroyFunc(()=>this.eventService.removeEventListener(L.EVENT_CELL_VALUE_CHANGED,e,t)),this.addManagedPropertyListener("treeData",i=>this.isTreeData=i.currentValue)}getValue(e,t,i=!1,s=!1){if(this.initialised||this.init(),!t)return;const n=e.getColDef(),l=n.field,u=e.getColId(),g=t.data;let C;const S=t.groupData&&t.groupData[u]!==void 0,A=!s&&t.aggData&&t.aggData[u]!==void 0,D=this.isSsrm&&s&&!!e.getColDef().aggFunc,M=this.isSsrm&&t.footer&&t.field&&(e.getColDef().showRowGroup===!0||e.getColDef().showRowGroup===t.field);if(i&&n.filterValueGetter?C=this.executeFilterValueGetter(n.filterValueGetter,g,e,t):this.isTreeData&&A?C=t.aggData[u]:this.isTreeData&&n.valueGetter?C=this.executeValueGetter(n.valueGetter,g,e,t):this.isTreeData&&l&&g?C=mr(g,l,e.isFieldContainsDots()):S?C=t.groupData[u]:A?C=t.aggData[u]:n.valueGetter?C=this.executeValueGetter(n.valueGetter,g,e,t):M?C=mr(g,t.field,e.isFieldContainsDots()):l&&g&&!D&&(C=mr(g,l,e.isFieldContainsDots())),this.cellExpressions&&typeof C=="string"&&C.indexOf("=")===0){const W=C.substring(1);C=this.executeValueGetter(W,g,e,t)}if(C==null){const W=this.getOpenedGroup(t,e);if(W!=null)return W}return C}getOpenedGroup(e,t){if(!this.gridOptionsService.get("showOpenedGroup")||!t.getColDef().showRowGroup)return;const s=t.getColDef().showRowGroup;let n=e.parent;for(;n!=null;){if(n.rowGroupColumn&&(s===!0||s===n.rowGroupColumn.getColId()))return n.key;n=n.parent}}setValue(e,t,i,s){const n=this.columnModel.getPrimaryColumn(t);if(!e||!n)return!1;Xe(e.data)&&(e.data={});const{field:l,valueSetter:u}=n.getColDef();if(Xe(l)&&Xe(u))return console.warn("AG Grid: you need either field or valueSetter set on colDef for editing to work"),!1;if(!this.dataTypeService.checkType(n,i))return console.warn("AG Grid: Data type of the new value does not match the cell data type of the column"),!1;const g=this.gridOptionsService.addGridCommonParams({node:e,data:e.data,oldValue:this.getValue(n,e),newValue:i,colDef:n.getColDef(),column:n});g.newValue=i;let C;if(ce(u)?typeof u=="function"?C=u(g):C=this.expressionService.evaluate(u,g):C=this.setValueUsingField(e.data,l,i,n.isFieldContainsDots()),C===void 0&&(C=!0),!C)return!1;e.resetQuickFilterAggregateText(),this.valueCache.onDataChanged(),g.newValue=this.getValue(n,e);const S={type:L.EVENT_CELL_VALUE_CHANGED,event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:g.column,api:g.api,columnApi:g.columnApi,colDef:g.colDef,context:g.context,data:e.data,node:e,oldValue:g.oldValue,newValue:g.newValue,value:g.newValue,source:s};return this.eventService.dispatchEvent(S),!0}callColumnCellValueChangedHandler(e){const t=e.colDef.onCellValueChanged;typeof t=="function"&&this.getFrameworkOverrides().wrapOutgoing(()=>{t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,columnApi:e.columnApi,context:e.context})})}setValueUsingField(e,t,i,s){if(!t)return!1;let n=!1;if(!s)n=e[t]===i,n||(e[t]=i);else{const l=t.split(".");let u=e;for(;l.length>0&&u;){const g=l.shift();l.length===0?(n=u[g]===i,n||(u[g]=i)):u=u[g]}}return!n}executeFilterValueGetter(e,t,i,s){const n=this.gridOptionsService.addGridCommonParams({data:t,node:s,column:i,colDef:i.getColDef(),getValue:this.getValueCallback.bind(this,s)});return typeof e=="function"?e(n):this.expressionService.evaluate(e,n)}executeValueGetter(e,t,i,s){const n=i.getColId(),l=this.valueCache.getValue(s,n);if(l!==void 0)return l;const u=this.gridOptionsService.addGridCommonParams({data:t,node:s,column:i,colDef:i.getColDef(),getValue:this.getValueCallback.bind(this,s)});let g;return typeof e=="function"?g=e(u):g=this.expressionService.evaluate(e,u),this.valueCache.setValue(s,n,g),g}getValueCallback(e,t){const i=this.columnModel.getPrimaryColumn(t);return i?this.getValue(i,e):null}getKeyForNode(e,t){const i=this.getValue(e,t),s=e.getColDef().keyCreator;let n=i;if(s){const l=this.gridOptionsService.addGridCommonParams({value:i,colDef:e.getColDef(),column:e,node:t,data:t.data});n=s(l)}return typeof n=="string"||n==null||(n=String(n),n==="[object Object]"&&Ue("a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key")),n}};E([N("expressionService")],co.prototype,"expressionService",2);E([N("columnModel")],co.prototype,"columnModel",2);E([N("valueCache")],co.prototype,"valueCache",2);E([N("dataTypeService")],co.prototype,"dataTypeService",2);E([Ce],co.prototype,"init",1);co=E([Fe("valueService")],co);var $a=class extends ge{constructor(){super(...arguments),this.expressionToFunctionCache={}}setBeans(e){this.logger=e.create("ExpressionService")}evaluate(e,t){if(typeof e=="string")return this.evaluateExpression(e,t);console.error("AG Grid: value should be either a string or a function",e)}evaluateExpression(e,t){try{return this.createExpressionFunction(e)(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.columnApi,t.getValue,t.column,t.columnGroup)}catch(i){return console.log("Processing of the expression failed"),console.log("Expression = "+e),console.log("Params =",t),console.log("Exception = "+i),null}}createExpressionFunction(e){if(this.expressionToFunctionCache[e])return this.expressionToFunctionCache[e];const t=this.createFunctionBody(e),i=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, columnApi, getValue, column, columnGroup",t);return this.expressionToFunctionCache[e]=i,i}createFunctionBody(e){return e.indexOf("return")>=0?e:"return "+e+";"}};E([ds(0,Qi("loggerFactory"))],$a.prototype,"setBeans",1);$a=E([Fe("expressionService")],$a);var Wd=class extends ge{constructor(){super(...arguments),this.templateCache={},this.waitingCallbacks={}}getTemplate(e,t){const i=this.templateCache[e];if(i)return i;let s=this.waitingCallbacks[e];const n=this;if(!s){s=[],this.waitingCallbacks[e]=s;const l=new XMLHttpRequest;l.onload=function(){n.handleHttpResult(this,e)},l.open("GET",e),l.send()}return t&&s.push(t),null}handleHttpResult(e,t){if(e.status!==200||e.response===null){console.warn(`AG Grid: Unable to get template error ${e.status} - ${t}`);return}this.templateCache[t]=e.response||e.responseText;const i=this.waitingCallbacks[t];for(let s=0;s<i.length;s++){const n=i[s];n()}}};Wd=E([Fe("templateService")],Wd);var ja=class extends ge{setBeans(e){this.logging=e.get("debug")}create(e){return new rc(e,this.isLogging.bind(this))}isLogging(){return this.logging}};E([ds(0,Qi("gridOptionsService"))],ja.prototype,"setBeans",1);ja=E([Fe("loggerFactory")],ja);var rc=class{constructor(e,t){this.name=e,this.isLoggingFunc=t}isLogging(){return this.isLoggingFunc()}log(e){this.isLoggingFunc()&&console.log("AG Grid."+this.name+": "+e)}},tr=class extends ge{setComp(e,t,i){this.view=e,this.eGridHostDiv=t,this.eGui=i,this.eGui.setAttribute("grid-id",this.context.getGridId()),this.dragAndDropService.addDropTarget({getContainer:()=>this.eGui,isInterestedIn:n=>n===1||n===0,getIconName:()=>Je.ICON_NOT_ALLOWED}),this.mouseEventService.stampTopLevelGridCompWithGridInstance(t),this.createManagedBean(new xl(this.view)),this.addRtlSupport();const s=this.resizeObserverService.observeResize(this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>s()),this.ctrlsService.registerGridCtrl(this)}isDetailGrid(){var e;const t=this.focusService.findTabbableParent(this.getGui());return((e=t?.getAttribute("row-id"))==null?void 0:e.startsWith("detail"))||!1}showDropZones(){return Rt.__isRegistered("@ag-grid-enterprise/row-grouping",this.context.getGridId())}showSideBar(){return Rt.__isRegistered("@ag-grid-enterprise/side-bar",this.context.getGridId())}showStatusBar(){return Rt.__isRegistered("@ag-grid-enterprise/status-bar",this.context.getGridId())}showWatermark(){return Rt.__isRegistered("@ag-grid-enterprise/core",this.context.getGridId())}onGridSizeChanged(){const e={type:L.EVENT_GRID_SIZE_CHANGED,clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight};this.eventService.dispatchEvent(e)}addRtlSupport(){const e=this.gridOptionsService.get("enableRtl")?"ag-rtl":"ag-ltr";this.view.setRtlClass(e)}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){this.view.setCursor(e?"ew-resize":null)}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){const t=this.gridOptionsService.getDocument(),i=this.view.getFocusableContainers(),n=i.findIndex(l=>l.contains(t.activeElement))+(e?-1:1);return n<=0||n>=i.length?!1:this.focusService.focusInto(i[n])}focusInnerElement(e){const t=this.view.getFocusableContainers(),i=this.columnModel.getAllDisplayedColumns();if(e){if(t.length>1)return this.focusService.focusInto(yt(t),!0);const s=yt(i);if(this.focusService.focusGridView(s,!0))return!0}if(this.gridOptionsService.get("headerHeight")===0||this.gridOptionsService.get("suppressHeaderFocus")){if(this.focusService.focusGridView(i[0]))return!0;for(let s=1;s<t.length;s++)if(this.focusService.focusInto(t[s]))return!0;return!1}return this.focusService.focusFirstHeader()}forceFocusOutOfContainer(e=!1){this.view.forceFocusOutOfContainer(e)}};E([N("focusService")],tr.prototype,"focusService",2);E([N("resizeObserverService")],tr.prototype,"resizeObserverService",2);E([N("columnModel")],tr.prototype,"columnModel",2);E([N("ctrlsService")],tr.prototype,"ctrlsService",2);E([N("mouseEventService")],tr.prototype,"mouseEventService",2);E([N("dragAndDropService")],tr.prototype,"dragAndDropService",2);var Xr=class extends oa{constructor(e){super(),this.eGridDiv=e}postConstruct(){this.logger=this.loggerFactory.create("GridComp");const e={destroyGridUi:()=>this.destroyBean(this),setRtlClass:i=>this.addCssClass(i),forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:i=>{this.getGui().style.userSelect=i??"",this.getGui().style.webkitUserSelect=i??""},setCursor:i=>{this.getGui().style.cursor=i??""}};this.ctrl=this.createManagedBean(new tr);const t=this.createTemplate();this.setTemplate(t),this.ctrl.setComp(e,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:i=>this.ctrl.focusInnerElement(i),forceFocusOutWhenTabGuardsAreEmpty:!0})}insertGridIntoDom(){const e=this.getGui();this.eGridDiv.appendChild(e),this.addDestroyFunc(()=>{this.eGridDiv.removeChild(e),this.logger.log("Grid removed from DOM")})}updateLayoutClasses(e,t){const i=this.eRootWrapperBody.classList;i.toggle("ag-layout-auto-height",t.autoHeight),i.toggle("ag-layout-normal",t.normal),i.toggle("ag-layout-print",t.print),this.addOrRemoveCssClass("ag-layout-auto-height",t.autoHeight),this.addOrRemoveCssClass("ag-layout-normal",t.normal),this.addOrRemoveCssClass("ag-layout-print",t.print)}createTemplate(){const e=this.ctrl.showDropZones()?"<ag-grid-header-drop-zones></ag-grid-header-drop-zones>":"",t=this.ctrl.showSideBar()?'<ag-side-bar ref="sideBar"></ag-side-bar>':"",i=this.ctrl.showStatusBar()?'<ag-status-bar ref="statusBar"></ag-status-bar>':"",s=this.ctrl.showWatermark()?"<ag-watermark></ag-watermark>":"";return`<div class="ag-root-wrapper" role="presentation">
                ${e}
                <div class="ag-root-wrapper-body" ref="rootWrapperBody" role="presentation">
                    <ag-grid-body ref="gridBody"></ag-grid-body>
                    ${t}
                </div>
                ${i}
                <ag-pagination></ag-pagination>
                ${s}
            </div>`}getFocusableElement(){return this.eRootWrapperBody}getFocusableContainers(){const e=[this.gridBodyComp.getGui()];return this.sideBarComp&&e.push(this.sideBarComp.getGui()),e.filter(t=>Ui(t))}};E([N("loggerFactory")],Xr.prototype,"loggerFactory",2);E([xe("gridBody")],Xr.prototype,"gridBodyComp",2);E([xe("sideBar")],Xr.prototype,"sideBarComp",2);E([xe("rootWrapperBody")],Xr.prototype,"eRootWrapperBody",2);E([Ce],Xr.prototype,"postConstruct",1);var Vo=class extends ge{progressSort(e,t,i){const s=this.getNextSortDirection(e);this.setSortForColumn(e,s,t,i)}setSortForColumn(e,t,i,s){t!=="asc"&&t!=="desc"&&(t=null);const n=this.gridOptionsService.isColumnsSortingCoupledToGroup();let l=[e];if(n&&e.getColDef().showRowGroup){const C=this.columnModel.getSourceColumnsForGroupColumn(e),S=C?.filter(A=>A.isSortable());S&&(l=[e,...S])}l.forEach(C=>C.setSort(t,s));const u=(i||this.gridOptionsService.get("alwaysMultiSort"))&&!this.gridOptionsService.get("suppressMultiSort"),g=[];if(!u){const C=this.clearSortBarTheseColumns(l,s);g.push(...C)}this.updateSortIndex(e),g.push(...l),this.dispatchSortChangedEvents(s,g)}updateSortIndex(e){const t=this.gridOptionsService.isColumnsSortingCoupledToGroup(),i=this.columnModel.getGroupDisplayColumnForGroup(e.getId()),s=t&&i||e,n=this.getColumnsWithSortingOrdered();this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach(g=>g.setSortIndex(null));const l=n.filter(g=>t&&g.getColDef().showRowGroup?!1:g!==s);(s.getSort()?[...l,s]:l).forEach((g,C)=>{g.setSortIndex(C)})}onSortChanged(e,t){this.dispatchSortChangedEvents(e,t)}isSortActive(){const t=this.columnModel.getPrimaryAndSecondaryAndAutoColumns().filter(i=>!!i.getSort());return t&&t.length>0}dispatchSortChangedEvents(e,t){const i={type:L.EVENT_SORT_CHANGED,source:e};t&&(i.columns=t),this.eventService.dispatchEvent(i)}clearSortBarTheseColumns(e,t){const i=[];return this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach(s=>{e.includes(s)||(s.getSort()&&i.push(s),s.setSort(void 0,t))}),i}getNextSortDirection(e){let t;if(e.getColDef().sortingOrder?t=e.getColDef().sortingOrder:this.gridOptionsService.get("sortingOrder")?t=this.gridOptionsService.get("sortingOrder"):t=Vo.DEFAULT_SORTING_ORDER,!Array.isArray(t)||t.length<=0)return console.warn(`AG Grid: sortingOrder must be an array with at least one element, currently it's ${t}`),null;const i=t.indexOf(e.getSort()),s=i<0,n=i==t.length-1;let l;return s||n?l=t[0]:l=t[i+1],Vo.DEFAULT_SORTING_ORDER.indexOf(l)<0?(console.warn("AG Grid: invalid sort type "+l),null):l}getIndexedSortMap(){let e=this.columnModel.getPrimaryAndSecondaryAndAutoColumns().filter(l=>!!l.getSort());if(this.columnModel.isPivotMode()){const l=this.gridOptionsService.isColumnsSortingCoupledToGroup();e=e.filter(u=>{const g=!!u.getAggFunc(),C=!u.isPrimary(),S=l?this.columnModel.getGroupDisplayColumnForGroup(u.getId()):u.getColDef().showRowGroup;return g||C||S})}const t=this.columnModel.getRowGroupColumns().filter(l=>!!l.getSort()),i={};e.forEach((l,u)=>i[l.getId()]=u),e.sort((l,u)=>{const g=l.getSortIndex(),C=u.getSortIndex();if(g!=null&&C!=null)return g-C;if(g==null&&C==null){const S=i[l.getId()],A=i[u.getId()];return S>A?1:-1}else return C==null?-1:1});const s=this.gridOptionsService.isColumnsSortingCoupledToGroup()&&!!t.length;s&&(e=[...new Set(e.map(l=>{var u;return(u=this.columnModel.getGroupDisplayColumnForGroup(l.getId()))!=null?u:l}))]);const n=new Map;return e.forEach((l,u)=>n.set(l,u)),s&&t.forEach(l=>{const u=this.columnModel.getGroupDisplayColumnForGroup(l.getId());n.set(l,n.get(u))}),n}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([e,t],[i,s])=>t-s).map(([e])=>e)}getSortModel(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),colId:e.getId()}))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),column:e}))}canColumnDisplayMixedSort(e){const t=this.gridOptionsService.isColumnsSortingCoupledToGroup(),i=!!e.getColDef().showRowGroup;return t&&i}getDisplaySortForColumn(e){const t=this.columnModel.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||!t?.length)return e.getSort();const s=e.getColDef().field!=null||!!e.getColDef().valueGetter?[e,...t]:t,n=s[0].getSort();return s.every(u=>u.getSort()==n)?n:"mixed"}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}};Vo.DEFAULT_SORTING_ORDER=["asc","desc",null];E([N("columnModel")],Vo.prototype,"columnModel",2);Vo=E([Fe("sortController")],Vo);var Ft=class extends ge{static addKeyboardModeEvents(e){this.instanceCount>0||(e.addEventListener("keydown",Ft.toggleKeyboardMode),e.addEventListener("mousedown",Ft.toggleKeyboardMode))}static removeKeyboardModeEvents(e){this.instanceCount>0||(e.addEventListener("keydown",Ft.toggleKeyboardMode),e.addEventListener("mousedown",Ft.toggleKeyboardMode))}static toggleKeyboardMode(e){const t=Ft.keyboardModeActive,i=e.type==="keydown";i&&(e.ctrlKey||e.metaKey||e.altKey)||t!==i&&(Ft.keyboardModeActive=i)}static unregisterGridCompController(e){Ft.removeKeyboardModeEvents(e)}init(){const e=this.clearFocusedCell.bind(this);this.addManagedListener(this.eventService,L.EVENT_COLUMN_PIVOT_MODE_CHANGED,e),this.addManagedListener(this.eventService,L.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverythingChanged.bind(this)),this.addManagedListener(this.eventService,L.EVENT_COLUMN_GROUP_OPENED,e),this.addManagedListener(this.eventService,L.EVENT_COLUMN_ROW_GROUP_CHANGED,e),this.registerKeyboardFocusEvents(),this.ctrlsService.whenReady(t=>{this.gridCtrl=t.gridCtrl})}registerKeyboardFocusEvents(){const e=this.gridOptionsService.getDocument();Ft.addKeyboardModeEvents(e),Ft.instanceCount++,this.addDestroyFunc(()=>{Ft.instanceCount--,Ft.unregisterGridCompController(e)})}onColumnEverythingChanged(){if(!this.focusedCellPosition)return;const e=this.focusedCellPosition.column,t=this.columnModel.getGridColumn(e.getId());e!==t&&this.clearFocusedCell()}isKeyboardMode(){return Ft.keyboardModeActive}getFocusCellToUseAfterRefresh(){const e=this.gridOptionsService.getDocument();return this.gridOptionsService.get("suppressFocusAfterRefresh")||!this.focusedCellPosition||this.isDomDataMissingInHierarchy(e.activeElement,Fo.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCellPosition}getFocusHeaderToUseAfterRefresh(){const e=this.gridOptionsService.getDocument();return this.gridOptionsService.get("suppressFocusAfterRefresh")||!this.focusedHeaderPosition||this.isDomDataMissingInHierarchy(e.activeElement,Dl.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeaderPosition}isDomDataMissingInHierarchy(e,t){let i=e;for(;i;){if(this.gridOptionsService.getDomData(i,t))return!1;i=i.parentNode}return!0}getFocusedCell(){return this.focusedCellPosition}shouldRestoreFocus(e){return this.isCellRestoreFocused(e)?(setTimeout(()=>{this.restoredFocusedCellPosition=null},0),!0):!1}isCellRestoreFocused(e){return this.restoredFocusedCellPosition==null?!1:this.cellPositionUtils.equals(e,this.restoredFocusedCellPosition)}setRestoreFocusedCell(e){this.getFrameworkOverrides().renderingEngine==="react"&&(this.restoredFocusedCellPosition=e)}getFocusEventParams(){const{rowIndex:e,rowPinned:t,column:i}=this.focusedCellPosition,s={rowIndex:e,rowPinned:t,column:i,isFullWidthCell:!1},n=this.rowRenderer.getRowByPosition({rowIndex:e,rowPinned:t});return n&&(s.isFullWidthCell=n.isFullWidth()),s}clearFocusedCell(){if(this.restoredFocusedCellPosition=null,this.focusedCellPosition==null)return;const e=We({type:L.EVENT_CELL_FOCUS_CLEARED},this.getFocusEventParams());this.focusedCellPosition=null,this.eventService.dispatchEvent(e)}setFocusedCell(e){const{column:t,rowIndex:i,rowPinned:s,forceBrowserFocus:n=!1,preventScrollOnBrowserFocus:l=!1}=e,u=this.columnModel.getGridColumn(t);if(!u){this.focusedCellPosition=null;return}this.focusedCellPosition=u?{rowIndex:i,rowPinned:xs(s),column:u}:null;const g=Vt(We({type:L.EVENT_CELL_FOCUSED},this.getFocusEventParams()),{forceBrowserFocus:n,preventScrollOnBrowserFocus:l,floating:null});this.eventService.dispatchEvent(g)}isCellFocused(e){return this.focusedCellPosition==null?!1:this.cellPositionUtils.equals(e,this.focusedCellPosition)}isRowNodeFocused(e){return this.isRowFocused(e.rowIndex,e.rowPinned)}isHeaderWrapperFocused(e){if(this.focusedHeaderPosition==null)return!1;const t=e.getColumnGroupChild(),i=e.getRowIndex(),s=e.getPinned(),{column:n,headerRowIndex:l}=this.focusedHeaderPosition;return t===n&&i===l&&s==n.getPinned()}clearFocusedHeader(){this.focusedHeaderPosition=null}getFocusedHeader(){return this.focusedHeaderPosition}setFocusedHeader(e,t){this.focusedHeaderPosition={headerRowIndex:e,column:t}}focusHeaderPosition(e){if(this.gridOptionsService.get("suppressHeaderFocus"))return!1;const{direction:t,fromTab:i,allowUserOverride:s,event:n,fromCell:l,rowWithoutSpanValue:u}=e;let{headerPosition:g}=e;if(l&&this.filterManager.isAdvancedFilterHeaderActive())return this.focusAdvancedFilter(g);if(s){const A=this.getFocusedHeader(),D=this.headerNavigationService.getHeaderRowCount();if(i){const M=this.gridOptionsService.getCallback("tabToNextHeader");M&&(g=M({backwards:t==="Before",previousHeaderPosition:A,nextHeaderPosition:g,headerRowCount:D}))}else{const M=this.gridOptionsService.getCallback("navigateToNextHeader");if(M&&n){const W={key:n.key,previousHeaderPosition:A,nextHeaderPosition:g,headerRowCount:D,event:n};g=M(W)}}}if(!g)return!1;if(g.headerRowIndex===-1)return this.filterManager.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(g):this.focusGridView(g.column);this.headerNavigationService.scrollToColumn(g.column,t);const S=this.ctrlsService.getHeaderRowContainerCtrl(g.column.getPinned()).focusHeader(g.headerRowIndex,g.column,n);return S&&(u!=null||l)&&this.headerNavigationService.setCurrentHeaderRowWithoutSpan(u??-1),S}focusFirstHeader(){let e=this.columnModel.getAllDisplayedColumns()[0];if(!e)return!1;e.getParent()&&(e=this.columnModel.getColumnGroupAtLevel(e,0));const t=this.headerPositionUtils.getHeaderIndexToFocus(e,0);return this.focusHeaderPosition({headerPosition:t,rowWithoutSpanValue:0})}focusLastHeader(e){const t=this.headerNavigationService.getHeaderRowCount()-1,i=yt(this.columnModel.getAllDisplayedColumns());return this.focusHeaderPosition({headerPosition:{headerRowIndex:t,column:i},rowWithoutSpanValue:-1,event:e})}focusPreviousFromFirstCell(e){return this.filterManager.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(e)}isAnyCellFocused(){return!!this.focusedCellPosition}isRowFocused(e,t){return this.focusedCellPosition==null?!1:this.focusedCellPosition.rowIndex===e&&this.focusedCellPosition.rowPinned===xs(t)}findFocusableElements(e,t,i=!1){const s=Ep;let n=Ah;t&&(n+=", "+t),i&&(n+=', [tabindex="-1"]');const l=Array.prototype.slice.apply(e.querySelectorAll(s)).filter(C=>Ui(C)),u=Array.prototype.slice.apply(e.querySelectorAll(n));return u.length?((C,S)=>C.filter(A=>S.indexOf(A)===-1))(l,u):l}focusInto(e,t=!1,i=!1){const s=this.findFocusableElements(e,null,i),n=t?yt(s):s[0];return n?(n.focus({preventScroll:!0}),!0):!1}findFocusableElementBeforeTabGuard(e,t){if(!t)return null;const i=this.findFocusableElements(e),s=i.indexOf(t);if(s===-1)return null;let n=-1;for(let l=s-1;l>=0;l--)if(i[l].classList.contains("ag-tab-guard-top")){n=l;break}return n<=0?null:i[n-1]}findNextFocusableElement(e=this.eGridDiv,t,i){const s=this.findFocusableElements(e,t?':not([tabindex="-1"])':null),l=this.gridOptionsService.getDocument().activeElement;let u;t?u=s.findIndex(C=>C.contains(l)):u=s.indexOf(l);const g=u+(i?-1:1);return g<0||g>=s.length?null:s[g]}isTargetUnderManagedComponent(e,t){if(!t)return!1;const i=e.querySelectorAll(`.${go.FOCUS_MANAGED_CLASS}`);if(!i.length)return!1;for(let s=0;s<i.length;s++)if(i[s].contains(t))return!0;return!1}findTabbableParent(e,t=5){let i=0;for(;e&&Ba(e)===null&&++i<=t;)e=e.parentElement;return Ba(e)===null?null:e}focusGridView(e,t){if(this.gridOptionsService.get("suppressCellFocus"))return t?this.gridOptionsService.get("suppressHeaderFocus")?this.focusNextGridCoreContainer(!0,!0):this.focusLastHeader():this.focusNextGridCoreContainer(!1);const i=t?this.rowPositionUtils.getLastRow():this.rowPositionUtils.getFirstRow();if(!i)return!1;const{rowIndex:s,rowPinned:n}=i,l=this.getFocusedHeader();if(!e&&l&&(e=l.column),s==null||!e)return!1;if(this.navigationService.ensureCellVisible({rowIndex:s,column:e,rowPinned:n}),this.setFocusedCell({rowIndex:s,column:e,rowPinned:xs(n),forceBrowserFocus:!0}),this.rangeService){const u={rowIndex:s,rowPinned:n,column:e};this.rangeService.setRangeToCell(u)}return!0}focusNextGridCoreContainer(e,t=!1){return!t&&this.gridCtrl.focusNextInnerContainer(e)?!0:((t||!e&&!this.gridCtrl.isDetailGrid())&&this.gridCtrl.forceFocusOutOfContainer(e),!1)}focusAdvancedFilter(e){return this.advancedFilterFocusColumn=e?.column,this.advancedFilterService.getCtrl().focusHeaderComp()}focusNextFromAdvancedFilter(e,t){var i,s;const n=(s=t?void 0:this.advancedFilterFocusColumn)!=null?s:(i=this.columnModel.getAllDisplayedColumns())==null?void 0:i[0];return e?this.focusHeaderPosition({headerPosition:{column:n,headerRowIndex:this.headerNavigationService.getHeaderRowCount()-1}}):this.focusGridView(n)}clearAdvancedFilterColumn(){this.advancedFilterFocusColumn=void 0}};Ft.keyboardModeActive=!1;Ft.instanceCount=0;E([N("eGridDiv")],Ft.prototype,"eGridDiv",2);E([N("columnModel")],Ft.prototype,"columnModel",2);E([N("headerNavigationService")],Ft.prototype,"headerNavigationService",2);E([N("headerPositionUtils")],Ft.prototype,"headerPositionUtils",2);E([N("rowRenderer")],Ft.prototype,"rowRenderer",2);E([N("rowPositionUtils")],Ft.prototype,"rowPositionUtils",2);E([N("cellPositionUtils")],Ft.prototype,"cellPositionUtils",2);E([mt("rangeService")],Ft.prototype,"rangeService",2);E([N("navigationService")],Ft.prototype,"navigationService",2);E([N("ctrlsService")],Ft.prototype,"ctrlsService",2);E([N("filterManager")],Ft.prototype,"filterManager",2);E([mt("advancedFilterService")],Ft.prototype,"advancedFilterService",2);E([Ce],Ft.prototype,"init",1);Ft=E([Fe("focusService")],Ft);var zd=class extends ge{setMouseOver(e){this.selectedColumns=e;const t={type:L.EVENT_COLUMN_HOVER_CHANGED};this.eventService.dispatchEvent(t)}clearMouseOver(){this.selectedColumns=null;const e={type:L.EVENT_COLUMN_HOVER_CHANGED};this.eventService.dispatchEvent(e)}isHovered(e){return!!this.selectedColumns&&this.selectedColumns.indexOf(e)>=0}};zd=E([Fe("columnHoverService")],zd);var In=class extends ge{constructor(){super(...arguments),this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.suppressAnimation=!1,this.animationThreadCount=0}postConstruct(){this.ctrlsService.whenReady(e=>this.gridBodyCtrl=e.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(e){this.suppressAnimation=e}start(){this.active||this.gridOptionsService.get("suppressColumnMoveAnimation")||this.gridOptionsService.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0)}finish(){!this.active||this.flush(()=>{this.active=!1})}executeNextVMTurn(e){this.active?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;const e=this.animationThreadCount;this.gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===e&&this.gridBodyCtrl.setColumnMovingCss(!1)})}flush(e){if(this.executeNextFuncs.length===0&&this.executeLaterFuncs.length===0){e();return}const t=i=>{for(;i.length;){const s=i.pop();s&&s()}};this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>t(this.executeNextFuncs),0),window.setTimeout(()=>{t(this.executeLaterFuncs),e()},200)})}};E([N("ctrlsService")],In.prototype,"ctrlsService",2);E([Ce],In.prototype,"postConstruct",1);In=E([Fe("columnAnimationService")],In);var Dr=class extends ge{postConstruct(){this.ctrlsService.whenReady(e=>{this.centerRowContainerCon=e.centerRowContainerCtrl,this.addManagedListener(this.eventService,L.EVENT_BODY_HEIGHT_CHANGED,this.checkPageSize.bind(this)),this.addManagedListener(this.eventService,L.EVENT_SCROLL_VISIBILITY_CHANGED,this.checkPageSize.bind(this)),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()})}notActive(){return!this.gridOptionsService.get("paginationAutoPageSize")||this.centerRowContainerCon==null}onPaginationAutoSizeChanged(){this.notActive()?this.paginationProxy.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;const e=this.centerRowContainerCon.getViewportSizeFeature().getBodyHeight();if(e>0){const t=()=>{const i=this.gridOptionsService.getRowHeightAsNumber(),s=Math.floor(e/i);this.paginationProxy.setPageSize(s,"autoCalculated")};this.isBodyRendered?Ai(()=>t(),50)():(t(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}};E([N("ctrlsService")],Dr.prototype,"ctrlsService",2);E([N("paginationProxy")],Dr.prototype,"paginationProxy",2);E([Ce],Dr.prototype,"postConstruct",1);Dr=E([Fe("paginationAutoPageSizeService")],Dr);var Ka=class extends ge{constructor(){super(...arguments),this.cacheVersion=0}init(){this.active=this.gridOptionsService.get("valueCache"),this.neverExpires=this.gridOptionsService.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(e,t,i){this.active&&(e.__cacheVersion!==this.cacheVersion&&(e.__cacheVersion=this.cacheVersion,e.__cacheData={}),e.__cacheData[t]=i)}getValue(e,t){if(!(!this.active||e.__cacheVersion!==this.cacheVersion))return e.__cacheData[t]}};E([Ce],Ka.prototype,"init",1);Ka=E([Fe("valueCache")],Ka);var Qb="paste",Tr=class extends ge{init(){this.rowModel.getType()==="clientSide"&&(this.clientSideRowModel=this.rowModel),this.addManagedListener(this.eventService,L.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged.bind(this))}onCellValueChanged(e){e.source!==Qb&&this.doChangeDetection(e.node,e.column)}doChangeDetection(e,t){if(this.gridOptionsService.get("suppressChangeDetection"))return;const i=[e];if(this.clientSideRowModel&&!e.isRowPinned()){const s=this.gridOptionsService.get("aggregateOnlyChangedColumns"),n=new Fl(s,this.clientSideRowModel.getRootNode());n.addParentNode(e.parent,[t]),this.clientSideRowModel.doAggregate(n),n.forEachChangedNodeDepthFirst(l=>{i.push(l)})}this.rowRenderer.refreshCells({rowNodes:i})}};E([N("rowModel")],Tr.prototype,"rowModel",2);E([N("rowRenderer")],Tr.prototype,"rowRenderer",2);E([Ce],Tr.prototype,"init",1);Tr=E([Fe("changeDetectionService")],Tr);var qa=class extends ge{adaptFunction(e,t){const i=this.componentMetadataProvider.retrieve(e);return i&&i.functionAdapter?i.functionAdapter(t):null}adaptCellRendererFunction(e){class t{refresh(s){return!1}getGui(){return this.eGui}init(s){const n=e(s),l=typeof n;if(l==="string"||l==="number"||l==="boolean"){this.eGui=Ni("<span>"+n+"</span>");return}if(n==null){this.eGui=Ni("<span></span>");return}this.eGui=n}}return t}doesImplementIComponent(e){return e?e.prototype&&"getGui"in e.prototype:!1}};E([N("componentMetadataProvider")],qa.prototype,"componentMetadataProvider",2);qa=E([Fe("agComponentUtils")],qa);var On=class extends ge{postConstruct(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","onParamsUpdated","refresh"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},headerComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingCellRenderer:{mandatoryMethodList:[],optionalMethodList:[]},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached","onParamsUpdated","refresh"]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},statusPanel:{mandatoryMethodList:[],optionalMethodList:["refresh"]},toolPanel:{mandatoryMethodList:[],optionalMethodList:["refresh","getState"]},tooltipComponent:{mandatoryMethodList:[],optionalMethodList:[]},menuItem:{mandatoryMethodList:[],optionalMethodList:["setActive","select","setExpanded","configureDefaults"]}}}retrieve(e){return this.componentMetaData[e]}};E([N("agComponentUtils")],On.prototype,"agComponentUtils",2);E([Ce],On.prototype,"postConstruct",1);On=E([Fe("componentMetadataProvider")],On);var Zb=25,Wc=10,id=8,Jb=4,sd=4,od=6,ew=16,zc=14,rd=8,tw={"ag-theme-custom":{headerHeight:25,headerCellMinWidth:24,listItemHeight:Jb*5,rowHeight:25,chartMenuPanelWidth:220},"ag-theme-material":{headerHeight:id*7,headerCellMinWidth:48,listItemHeight:id*4,rowHeight:id*6,chartMenuPanelWidth:240},"ag-theme-balham":{headerHeight:sd*8,headerCellMinWidth:24,listItemHeight:sd*6,rowHeight:sd*7,chartMenuPanelWidth:220},"ag-theme-alpine":{headerHeight:od*8,headerCellMinWidth:36,listItemHeight:od*4,rowHeight:od*7,chartMenuPanelWidth:240},"ag-theme-quartz":{headerHeight:zc+rd*4.25,headerCellMinWidth:36,listItemHeight:ew+rd,rowHeight:zc+rd*3.5,chartMenuPanelWidth:260}},Uc={headerHeight:["ag-header-row"],headerCellMinWidth:["ag-header-cell"],listItemHeight:["ag-virtual-list-item"],rowHeight:["ag-row"],chartMenuPanelWidth:["ag-chart-docked-container"]},kn=class extends ge{constructor(){super(...arguments),this.calculatedSizes={}}postConstruct(){var e;const t=(e=this.getTheme().el)!=null?e:this.eGridDiv;this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.mutationObserver=new MutationObserver(()=>{this.calculatedSizes={},this.fireGridStylesChangedEvent()}),this.mutationObserver.observe(t||this.eGridDiv,{attributes:!0,attributeFilter:["class"]})}fireGridStylesChangedEvent(){const e={type:L.EVENT_GRID_STYLES_CHANGED};this.eventService.dispatchEvent(e)}getSassVariable(e){const{themeFamily:t,el:i}=this.getTheme();if(!t||t.indexOf("ag-theme")!==0)return;this.calculatedSizes||(this.calculatedSizes={}),this.calculatedSizes[t]||(this.calculatedSizes[t]={});const s=this.calculatedSizes[t][e];return s??(this.calculatedSizes[t][e]=this.calculateValueForSassProperty(e,t,i),this.calculatedSizes[t][e])}calculateValueForSassProperty(e,t,i){const s="ag-theme-"+(t.match("material")?"material":t.match("balham")?"balham":t.match("alpine")?"alpine":"custom"),n=tw[s][e],l=this.gridOptionsService.getDocument();if(i||(i=this.eGridDiv),!Uc[e])return n;const u=Uc[e],g=l.createElement("div"),C=Array.from(i.classList);g.classList.add(t,...C),g.style.position="absolute";const S=u.reduce((D,M)=>{const W=l.createElement("div");return W.style.position="static",W.classList.add(M),D.appendChild(W),W},g);let A=0;if(l.body){l.body.appendChild(g);const D=e.toLowerCase().indexOf("height")!==-1?"height":"width";A=parseInt(window.getComputedStyle(S)[D],10),l.body.removeChild(g)}return A||n}isThemeDark(){const{theme:e}=this.getTheme();return!!e&&e.indexOf("dark")>=0}chartMenuPanelWidth(){return this.getSassVariable("chartMenuPanelWidth")}getTheme(){const e=/\bag-(material|(?:theme-([\w\-]*)))\b/g;let t=this.eGridDiv,i=null,s=[];for(;t;)if(i=e.exec(t.className),!i)t=t.parentElement||void 0;else{const l=t.className.match(e);l&&(s=l);break}if(!i)return{allThemes:s};const n=i[0];return{theme:n,el:t,themeFamily:n.replace(/-dark$/,""),allThemes:s}}getFromTheme(e,t){var i;return(i=this.getSassVariable(t))!=null?i:e}getDefaultRowHeight(){return this.getFromTheme(Zb,"rowHeight")}getListItemHeight(){return this.getFromTheme(20,"listItemHeight")}refreshRowHeightVariable(){const e=this.eGridDiv.style.getPropertyValue("--ag-line-height").trim(),t=this.gridOptionsService.get("rowHeight");if(t==null||isNaN(t)||!isFinite(t))return e!==null&&this.eGridDiv.style.setProperty("--ag-line-height",null),-1;const i=`${t}px`;return e!=i?(this.eGridDiv.style.setProperty("--ag-line-height",i),t):e!=""?parseFloat(e):-1}getMinColWidth(){const e=this.getFromTheme(null,"headerCellMinWidth");return ce(e)?Math.max(e,Wc):Wc}destroy(){this.calculatedSizes=null,this.mutationObserver&&this.mutationObserver.disconnect(),super.destroy()}};E([N("eGridDiv")],kn.prototype,"eGridDiv",2);E([Ce],kn.prototype,"postConstruct",1);kn=E([Fe("environment")],kn);var Pr=class extends ge{constructor(){super(...arguments),this.scrollY=0,this.uiBodyHeight=0}agWire(e){this.logger=e.create("RowContainerHeightService")}postConstruct(){this.addManagedListener(this.eventService,L.EVENT_BODY_HEIGHT_CHANGED,this.updateOffset.bind(this)),this.maxDivHeight=fp(),this.logger.log("maxDivHeight = "+this.maxDivHeight)}isStretching(){return this.stretching}getDivStretchOffset(){return this.divStretchOffset}updateOffset(){if(!this.stretching)return;const t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition().top,i=this.getUiBodyHeight();(t!==this.scrollY||i!==this.uiBodyHeight)&&(this.scrollY=t,this.uiBodyHeight=i,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;const e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;this.logger.log(`Div Stretch Offset = ${t} (${this.pixelsToShave} * ${e})`),this.setDivStretchOffset(t)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventService.dispatchEvent({type:L.EVENT_ROW_CONTAINER_HEIGHT_CHANGED}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){const t=typeof e=="number"?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventService.dispatchEvent({type:L.EVENT_HEIGHT_SCALE_CHANGED}))}setModelHeight(e){this.modelHeight=e,this.stretching=e!=null&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getUiContainerHeight(){return this.uiContainerHeight}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){const t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition();return t.bottom-t.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;const t=this.modelHeight-this.getUiBodyHeight(),i=e/t;return this.maxScrollY*i}};E([N("ctrlsService")],Pr.prototype,"ctrlsService",2);E([ds(0,Qi("loggerFactory"))],Pr.prototype,"agWire",1);E([Ce],Pr.prototype,"postConstruct",1);Pr=E([Fe("rowContainerHeightService")],Pr);var Fr=class extends ge{init(){this.addManagedPropertyListener("isRowSelectable",()=>this.updateSelectable())}updateSelectableAfterGrouping(){this.updateSelectable(!0)}updateSelectable(e=!1){const t=!!this.gridOptionsService.get("rowSelection"),i=this.gridOptionsService.get("isRowSelectable");if(!t||!i)return;const s=this.gridOptionsService.get("groupSelectsChildren"),n=this.rowModel.getType()==="clientSide"&&s,l=[],u=g=>{if(e&&!g.group)return;if(n&&g.group){const S=g.childrenAfterGroup.some(A=>A.selectable===!0);g.setRowSelectable(S,!0);return}const C=i?i(g):!0;g.setRowSelectable(C,!0),!C&&g.isSelected()&&l.push(g)};if(n){const g=this.rowModel;new Fl(!1,g.getRootNode()).forEachChangedNodeDepthFirst(u,!0,!0)}else this.rowModel.forEachNode(u);l.length&&this.selectionService.setNodesSelected({nodes:l,newValue:!1,source:"selectableChanged"}),n&&this.selectionService instanceof _o&&this.selectionService.updateGroupsFromChildrenSelections("selectableChanged")}};E([N("rowModel")],Fr.prototype,"rowModel",2);E([N("selectionService")],Fr.prototype,"selectionService",2);E([Ce],Fr.prototype,"init",1);Fr=E([Fe("selectableService")],Fr);var Vi=class extends Ze{constructor(){super(),this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1}postConstruct(){const e=this.gridOptionsService.get("enableRtl");this.setTemplate(this.getTemplate());const{btFirst:t,btPrevious:i,btNext:s,btLast:n,pageSizeComp:l}=this;this.activateTabIndex([t,i,s,n]),t.insertAdjacentElement("afterbegin",Wt(e?"last":"first",this.gridOptionsService)),i.insertAdjacentElement("afterbegin",Wt(e?"next":"previous",this.gridOptionsService)),s.insertAdjacentElement("afterbegin",Wt(e?"previous":"next",this.gridOptionsService)),n.insertAdjacentElement("afterbegin",Wt(e?"first":"last",this.gridOptionsService)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],()=>this.onPageSizeRelatedOptionsChange()),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.onPaginationChanged()}onPaginationChanged(){const t=this.gridOptionsService.get("pagination")&&!this.gridOptionsService.get("suppressPaginationPanel");this.setDisplayed(t),t&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateRowLabels(),this.setCurrentPageLabel(),this.setTotalLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){this.areListenersSetup||(this.addManagedListener(this.eventService,L.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach(e=>{const{el:t,fn:i}=e;this.addManagedListener(t,"click",i),this.addManagedListener(t,"keydown",s=>{(s.key===Q.ENTER||s.key===Q.SPACE)&&(s.preventDefault(),i())})}),this.areListenersSetup=!0)}onBtFirst(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToFirstPage()}setCurrentPageLabel(){const e=this.paginationProxy.getTotalPages()>0,t=this.paginationProxy.getCurrentPage(),i=e?t+1:0;this.lbCurrent.textContent=this.formatNumber(i)}formatNumber(e){const t=this.gridOptionsService.getCallback("paginationNumberFormatter");if(t)return t({value:e});const i=this.localeService.getLocaleTextFunc(),s=i("thousandSeparator",","),n=i("decimalSeparator",".");return Eh(e,s,n)}getTemplate(){const e=this.localeService.getLocaleTextFunc(),t=e("page","Page"),i=e("to","to"),s=e("of","of"),n=e("firstPage","First Page"),l=e("previousPage","Previous Page"),u=e("nextPage","Next Page"),g=e("lastPage","Last Page"),C=this.getCompId();return`<div class="ag-paging-panel ag-unselectable" id="ag-${C}">
                <ag-page-size-selector ref="pageSizeComp"></ag-page-size-selector>
                <span class="ag-paging-row-summary-panel" role="status">
                    <span id="ag-${C}-first-row" ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${C}-to">${i}</span>
                    <span id="ag-${C}-last-row" ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${C}-of">${s}</span>
                    <span id="ag-${C}-row-count" ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>
                </span>
                <span class="ag-paging-page-summary-panel" role="presentation">
                    <div ref="btFirst" class="ag-button ag-paging-button" role="button" aria-label="${n}"></div>
                    <div ref="btPrevious" class="ag-button ag-paging-button" role="button" aria-label="${l}"></div>
                    <span class="ag-paging-description" role="status">
                        <span id="ag-${C}-start-page">${t}</span>
                        <span id="ag-${C}-start-page-number" ref="lbCurrent" class="ag-paging-number"></span>
                        <span id="ag-${C}-of-page">${s}</span>
                        <span id="ag-${C}-of-page-number" ref="lbTotal" class="ag-paging-number"></span>
                    </span>
                    <div ref="btNext" class="ag-button ag-paging-button" role="button" aria-label="${u}"></div>
                    <div ref="btLast" class="ag-button ag-paging-button" role="button" aria-label="${g}"></div>
                </span>
            </div>`}onBtNext(){this.nextButtonDisabled||this.paginationProxy.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.paginationProxy.goToLastPage()}enableOrDisableButtons(){const e=this.paginationProxy.getCurrentPage(),t=this.paginationProxy.isLastPageFound(),i=this.paginationProxy.getTotalPages();this.previousAndFirstButtonsDisabled=e===0,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);const s=this.isZeroPagesToDisplay(),n=e===i-1;this.nextButtonDisabled=n||s,this.lastButtonDisabled=!t||s||e===i-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(e,t){gh(e,t),e.classList.toggle("ag-disabled",t)}updateRowLabels(){const e=this.paginationProxy.getCurrentPage(),t=this.paginationProxy.getPageSize(),i=this.paginationProxy.isLastPageFound(),s=this.paginationProxy.isLastPageFound()?this.paginationProxy.getMasterRowCount():null;let n,l;if(this.isZeroPagesToDisplay()?n=l=0:(n=t*e+1,l=n+t-1,i&&l>s&&(l=s)),this.lbFirstRowOnPage.textContent=this.formatNumber(n),this.rowNodeBlockLoader.isLoading()){const u=this.localeService.getLocaleTextFunc();this.lbLastRowOnPage.innerHTML=u("pageLastRowUnknown","?")}else this.lbLastRowOnPage.textContent=this.formatNumber(l)}isZeroPagesToDisplay(){const e=this.paginationProxy.isLastPageFound(),t=this.paginationProxy.getTotalPages();return e&&t===0}setTotalLabels(){const e=this.paginationProxy.isLastPageFound(),t=this.paginationProxy.getTotalPages(),i=e?this.paginationProxy.getMasterRowCount():null;if(i===1){const s=this.paginationProxy.getRow(0);if(s&&s.group&&!(s.groupData||s.aggData)){this.setTotalLabelsToZero();return}}if(e)this.lbTotal.textContent=this.formatNumber(t),this.lbRecordCount.textContent=this.formatNumber(i);else{const s=this.localeService.getLocaleTextFunc()("more","more");this.lbTotal.innerHTML=s,this.lbRecordCount.innerHTML=s}}setTotalLabelsToZero(){this.lbFirstRowOnPage.textContent=this.formatNumber(0),this.lbCurrent.textContent=this.formatNumber(0),this.lbLastRowOnPage.textContent=this.formatNumber(0),this.lbTotal.textContent=this.formatNumber(0),this.lbRecordCount.textContent=this.formatNumber(0)}};E([N("paginationProxy")],Vi.prototype,"paginationProxy",2);E([N("rowNodeBlockLoader")],Vi.prototype,"rowNodeBlockLoader",2);E([xe("btFirst")],Vi.prototype,"btFirst",2);E([xe("btPrevious")],Vi.prototype,"btPrevious",2);E([xe("btNext")],Vi.prototype,"btNext",2);E([xe("btLast")],Vi.prototype,"btLast",2);E([xe("lbRecordCount")],Vi.prototype,"lbRecordCount",2);E([xe("lbFirstRowOnPage")],Vi.prototype,"lbFirstRowOnPage",2);E([xe("lbLastRowOnPage")],Vi.prototype,"lbLastRowOnPage",2);E([xe("lbCurrent")],Vi.prototype,"lbCurrent",2);E([xe("lbTotal")],Vi.prototype,"lbTotal",2);E([xe("pageSizeComp")],Vi.prototype,"pageSizeComp",2);E([Ce],Vi.prototype,"postConstruct",1);var la=class Qg extends Ze{constructor(){super(Qg.TEMPLATE),this.inProgress=!1,this.destroyRequested=!1}updateLayoutClasses(t,i){const s=this.eOverlayWrapper.classList;s.toggle("ag-layout-auto-height",i.autoHeight),s.toggle("ag-layout-normal",i.normal),s.toggle("ag-layout-print",i.print)}postConstruct(){this.createManagedBean(new xl(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.overlayService.registerOverlayWrapperComp(this)}setWrapperTypeClass(t){const i=this.eOverlayWrapper.classList;this.activeOverlayWrapperCssClass&&i.toggle(this.activeOverlayWrapperCssClass,!1),this.activeOverlayWrapperCssClass=t,i.toggle(t,!0)}showOverlay(t,i,s){this.inProgress||(this.setWrapperTypeClass(i),this.destroyActiveOverlay(),this.inProgress=!0,t&&t.then(n=>{this.inProgress=!1,this.eOverlayWrapper.appendChild(n.getGui()),this.activeOverlay=n,this.updateListenerDestroyFunc=s,this.destroyRequested&&(this.destroyRequested=!1,this.destroyActiveOverlay())}),this.setDisplayed(!0,{skipAriaHidden:!0}))}destroyActiveOverlay(){var t;if(this.inProgress){this.destroyRequested=!0;return}!this.activeOverlay||(this.activeOverlay=this.getContext().destroyBean(this.activeOverlay),(t=this.updateListenerDestroyFunc)==null||t.call(this),Jt(this.eOverlayWrapper))}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}destroy(){this.destroyActiveOverlay(),super.destroy()}};la.TEMPLATE=`
        <div class="ag-overlay" role="presentation">
            <div class="ag-overlay-panel" role="presentation">
                <div class="ag-overlay-wrapper" ref="eOverlayWrapper" role="presentation"></div>
            </div>
        </div>`;E([N("overlayService")],la.prototype,"overlayService",2);E([xe("eOverlayWrapper")],la.prototype,"eOverlayWrapper",2);E([Ce],la.prototype,"postConstruct",1);var iw=la,Lr=class extends ge{getFirstRow(){let e=0,t;return this.pinnedRowModel.getPinnedTopRowCount()?t="top":this.rowModel.getRowCount()?(t=null,e=this.paginationProxy.getPageFirstRow()):this.pinnedRowModel.getPinnedBottomRowCount()&&(t="bottom"),t===void 0?null:{rowIndex:e,rowPinned:t}}getLastRow(){let e,t=null;const i=this.pinnedRowModel.getPinnedBottomRowCount(),s=this.pinnedRowModel.getPinnedTopRowCount();return i?(t="bottom",e=i-1):this.rowModel.getRowCount()?(t=null,e=this.paginationProxy.getPageLastRow()):s&&(t="top",e=s-1),e===void 0?null:{rowIndex:e,rowPinned:t}}getRowNode(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[e.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[e.rowIndex];default:return this.rowModel.getRow(e.rowIndex)}}sameRow(e,t){return!e&&!t?!0:e&&!t||!e&&t?!1:e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned}before(e,t){switch(e.rowPinned){case"top":if(t.rowPinned!=="top")return!0;break;case"bottom":if(t.rowPinned!=="bottom")return!1;break;default:if(ce(t.rowPinned))return t.rowPinned!=="top";break}return e.rowIndex<t.rowIndex}rowMax(e){let t;return e.forEach(i=>{(t===void 0||this.before(t,i))&&(t=i)}),t}rowMin(e){let t;return e.forEach(i=>{(t===void 0||this.before(i,t))&&(t=i)}),t}};E([N("rowModel")],Lr.prototype,"rowModel",2);E([N("pinnedRowModel")],Lr.prototype,"pinnedRowModel",2);E([N("paginationProxy")],Lr.prototype,"paginationProxy",2);Lr=E([Fe("rowPositionUtils")],Lr);var Ud=class extends ge{createId(e){const{rowIndex:t,rowPinned:i,column:s}=e;return this.createIdFromValues({rowIndex:t,column:s,rowPinned:i})}createIdFromValues(e){const{rowIndex:t,rowPinned:i,column:s}=e;return`${t}.${i??"null"}.${s.getId()}`}equals(e,t){const i=e.column===t.column,s=e.rowPinned===t.rowPinned,n=e.rowIndex===t.rowIndex;return i&&s&&n}};Ud=E([Fe("cellPositionUtils")],Ud);var cn=class{constructor(e){this.cellValueChanges=e}},nd=class extends cn{constructor(e,t,i,s){super(e),this.initialRange=t,this.finalRange=i,this.ranges=s}},Zg=class Jg{constructor(t){this.actionStack=[],this.maxStackSize=t||Jg.DEFAULT_STACK_SIZE,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(t){!(t.cellValueChanges&&t.cellValueChanges.length>0)||(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(t))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}};Zg.DEFAULT_STACK_SIZE=10;var Yc=Zg,ts=class extends ge{constructor(){super(...arguments),this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.onCellValueChanged=e=>{const t={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned},i=this.activeCellEdit!==null&&this.cellPositionUtils.equals(this.activeCellEdit,t),s=this.activeRowEdit!==null&&this.rowPositionUtils.sameRow(this.activeRowEdit,t);if(!(i||s||this.isPasting||this.isRangeInAction))return;const{rowPinned:l,rowIndex:u,column:g,oldValue:C,value:S}=e,A={rowPinned:l,rowIndex:u,columnId:g.getColId(),newValue:S,oldValue:C};this.cellValueChanges.push(A)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}init(){if(!this.gridOptionsService.get("undoRedoCellEditing"))return;const e=this.gridOptionsService.get("undoRedoCellEditingLimit");e<=0||(this.undoStack=new Yc(e),this.redoStack=new Yc(e),this.addRowEditingListeners(),this.addCellEditingListeners(),this.addPasteListeners(),this.addFillListeners(),this.addCellKeyListeners(),this.addManagedListener(this.eventService,L.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged),this.addManagedListener(this.eventService,L.EVENT_MODEL_UPDATED,t=>{t.keepUndoRedoStack||this.clearStacks()}),this.addManagedListener(this.eventService,L.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,L.EVENT_NEW_COLUMNS_LOADED,this.clearStacks),this.addManagedListener(this.eventService,L.EVENT_COLUMN_GROUP_OPENED,this.clearStacks),this.addManagedListener(this.eventService,L.EVENT_COLUMN_ROW_GROUP_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,L.EVENT_COLUMN_MOVED,this.clearStacks),this.addManagedListener(this.eventService,L.EVENT_COLUMN_PINNED,this.clearStacks),this.addManagedListener(this.eventService,L.EVENT_COLUMN_VISIBLE,this.clearStacks),this.addManagedListener(this.eventService,L.EVENT_ROW_DRAG_END,this.clearStacks),this.ctrlsService.whenReady(()=>{this.gridBodyCtrl=this.ctrlsService.getGridBodyCtrl()}))}getCurrentUndoStackSize(){return this.undoStack?this.undoStack.getCurrentStackSize():0}getCurrentRedoStackSize(){return this.redoStack?this.redoStack.getCurrentStackSize():0}undo(e){const t={type:L.EVENT_UNDO_STARTED,source:e};this.eventService.dispatchEvent(t);const i=this.undoRedo(this.undoStack,this.redoStack,"initialRange","oldValue","undo"),s={type:L.EVENT_UNDO_ENDED,source:e,operationPerformed:i};this.eventService.dispatchEvent(s)}redo(e){const t={type:L.EVENT_REDO_STARTED,source:e};this.eventService.dispatchEvent(t);const i=this.undoRedo(this.redoStack,this.undoStack,"finalRange","newValue","redo"),s={type:L.EVENT_REDO_ENDED,source:e,operationPerformed:i};this.eventService.dispatchEvent(s)}undoRedo(e,t,i,s,n){if(!e)return!1;const l=e.pop();return!l||!l.cellValueChanges?!1:(this.processAction(l,u=>u[s],n),l instanceof nd?this.processRange(l.ranges||[l[i]]):this.processCell(l.cellValueChanges),t.push(l),!0)}processAction(e,t,i){e.cellValueChanges.forEach(s=>{const{rowIndex:n,rowPinned:l,columnId:u}=s,g={rowIndex:n,rowPinned:l},C=this.getRowNode(g);!C.displayed||C.setDataValue(u,t(s),i)})}processRange(e){let t;this.rangeService.removeAllCellRanges(!0),e.forEach((i,s)=>{if(!i)return;const n=i.startRow,l=i.endRow;s===e.length-1&&(t={rowPinned:n.rowPinned,rowIndex:n.rowIndex,columnId:i.startColumn.getColId()},this.setLastFocusedCell(t));const u={rowStartIndex:n.rowIndex,rowStartPinned:n.rowPinned,rowEndIndex:l.rowIndex,rowEndPinned:l.rowPinned,columnStart:i.startColumn,columns:i.columns};this.rangeService.addCellRange(u)})}processCell(e){const t=e[0],{rowIndex:i,rowPinned:s}=t,n={rowIndex:i,rowPinned:s},l=this.getRowNode(n),u={rowPinned:t.rowPinned,rowIndex:l.rowIndex,columnId:t.columnId};this.setLastFocusedCell(u,!!this.rangeService)}setLastFocusedCell(e,t){const{rowIndex:i,columnId:s,rowPinned:n}=e,l=this.gridBodyCtrl.getScrollFeature(),u=this.columnModel.getGridColumn(s);if(!u)return;l.ensureIndexVisible(i),l.ensureColumnVisible(u);const g={rowIndex:i,column:u,rowPinned:n};this.focusService.setFocusedCell(Vt(We({},g),{forceBrowserFocus:!0})),t&&this.rangeService.setRangeToCell(g)}addRowEditingListeners(){this.addManagedListener(this.eventService,L.EVENT_ROW_EDITING_STARTED,e=>{this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}}),this.addManagedListener(this.eventService,L.EVENT_ROW_EDITING_STOPPED,()=>{const e=new cn(this.cellValueChanges);this.pushActionsToUndoStack(e),this.activeRowEdit=null})}addCellEditingListeners(){this.addManagedListener(this.eventService,L.EVENT_CELL_EDITING_STARTED,e=>{this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}}),this.addManagedListener(this.eventService,L.EVENT_CELL_EDITING_STOPPED,e=>{if(this.activeCellEdit=null,e.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){const i=new cn(this.cellValueChanges);this.pushActionsToUndoStack(i)}})}addPasteListeners(){this.addManagedListener(this.eventService,L.EVENT_PASTE_START,()=>{this.isPasting=!0}),this.addManagedListener(this.eventService,L.EVENT_PASTE_END,()=>{const e=new cn(this.cellValueChanges);this.pushActionsToUndoStack(e),this.isPasting=!1})}addFillListeners(){this.addManagedListener(this.eventService,L.EVENT_FILL_START,()=>{this.isRangeInAction=!0}),this.addManagedListener(this.eventService,L.EVENT_FILL_END,e=>{const t=new nd(this.cellValueChanges,e.initialRange,e.finalRange);this.pushActionsToUndoStack(t),this.isRangeInAction=!1})}addCellKeyListeners(){this.addManagedListener(this.eventService,L.EVENT_KEY_SHORTCUT_CHANGED_CELL_START,()=>{this.isRangeInAction=!0}),this.addManagedListener(this.eventService,L.EVENT_KEY_SHORTCUT_CHANGED_CELL_END,()=>{let e;this.rangeService&&this.gridOptionsService.get("enableRangeSelection")?e=new nd(this.cellValueChanges,void 0,void 0,[...this.rangeService.getCellRanges()]):e=new cn(this.cellValueChanges),this.pushActionsToUndoStack(e),this.isRangeInAction=!1})}pushActionsToUndoStack(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()}getRowNode(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[e.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[e.rowIndex];default:return this.rowModel.getRow(e.rowIndex)}}};E([N("focusService")],ts.prototype,"focusService",2);E([N("ctrlsService")],ts.prototype,"ctrlsService",2);E([N("rowModel")],ts.prototype,"rowModel",2);E([N("pinnedRowModel")],ts.prototype,"pinnedRowModel",2);E([N("cellPositionUtils")],ts.prototype,"cellPositionUtils",2);E([N("rowPositionUtils")],ts.prototype,"rowPositionUtils",2);E([N("columnModel")],ts.prototype,"columnModel",2);E([mt("rangeService")],ts.prototype,"rangeService",2);E([Ce],ts.prototype,"init",1);ts=E([Fe("undoRedoService")],ts);var Nn=class extends ge{findHeader(e,t){let i,s,n;if(e.column instanceof ri?(s=`getDisplayedGroup${t}`,i=this.columnModel[s](e.column)):(n=`getDisplayedCol${t}`,i=this.columnModel[n](e.column)),!i)return;let{headerRowIndex:l}=e;if(this.getHeaderRowType(l)!=="filter"){const C=[i];for(;i.getParent();)i=i.getParent(),C.push(i);i=C[C.length-1-l]}const{column:u,headerRowIndex:g}=this.getHeaderIndexToFocus(i,l);return{column:u,headerRowIndex:g}}getHeaderIndexToFocus(e,t){let i;if(e instanceof ri&&this.isAnyChildSpanningHeaderHeight(e)&&e.isPadding()){const s=e;i=s.getLeafColumns()[0];let n=i;for(;n!==s;)t++,n=n.getParent()}return{column:i||e,headerRowIndex:t}}isAnyChildSpanningHeaderHeight(e){return e?e.getLeafColumns().some(t=>t.isSpanHeaderHeight()):!1}getColumnVisibleParent(e,t){const i=this.getHeaderRowType(t),s=i==="filter",n=i==="column";let l=s?e:e.getParent(),u=t-1,g=u;if(n&&this.isAnyChildSpanningHeaderHeight(e.getParent())){for(;l&&l.isPadding();)l=l.getParent(),u--;g=u,u<0&&(l=e,u=t,g=void 0)}return{column:l,headerRowIndex:u,headerRowIndexWithoutSpan:g}}getColumnVisibleChild(e,t,i="After"){const s=this.getHeaderRowType(t);let n=e,l=t+1,u=l;if(s==="group"){const g=e.getDisplayedLeafColumns(),C=i==="After"?g[0]:yt(g),S=[];let A=C;for(;A.getParent()!==e;)A=A.getParent(),S.push(A);if(n=C,C.isSpanHeaderHeight())for(let D=S.length-1;D>=0;D--){const M=S[D];if(!M.isPadding()){n=M;break}l++}else n=yt(S),n||(n=C)}return{column:n,headerRowIndex:l,headerRowIndexWithoutSpan:u}}getHeaderRowType(e){const t=this.ctrlsService.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)}findColAtEdgeForHeaderRow(e,t){const i=this.columnModel.getAllDisplayedColumns(),s=i[t==="start"?0:i.length-1];if(!s)return;const l=this.ctrlsService.getHeaderRowContainerCtrl(s.getPinned()).getRowType(e);if(l=="group"){const u=this.columnModel.getColumnGroupAtLevel(s,e);return{headerRowIndex:e,column:u}}return{headerRowIndex:l==null?-1:e,column:s}}};E([N("columnModel")],Nn.prototype,"columnModel",2);E([N("ctrlsService")],Nn.prototype,"ctrlsService",2);Nn=E([Fe("headerPositionUtils")],Nn);var Yd=class{buildColumnDefs(e,t,i){const s=[],n={};return e.forEach(l=>{const u=this.createDefFromColumn(l,t,i);let g=!0,C=u,S=l.getOriginalParent(),A=null;for(;S;){let D=null;if(S.isPadding()){S=S.getOriginalParent();continue}const M=n[S.getGroupId()];if(M){M.children.push(C),g=!1;break}if(D=this.createDefFromGroup(S),D&&(D.children=[C],n[D.groupId]=D,C=D,S=S.getOriginalParent()),S!=null&&A===S){g=!1;break}A=S}g&&s.push(C)}),s}createDefFromGroup(e){const t=Na(e.getColGroupDef(),["children"]);return t&&(t.groupId=e.getGroupId()),t}createDefFromColumn(e,t,i){const s=Na(e.getColDef());return s.colId=e.getColId(),s.width=e.getActualWidth(),s.rowGroup=e.isRowGroupActive(),s.rowGroupIndex=e.isRowGroupActive()?t.indexOf(e):null,s.pivot=e.isPivotActive(),s.pivotIndex=e.isPivotActive()?i.indexOf(e):null,s.aggFunc=e.isValueActive()?e.getAggFunc():null,s.hide=e.isVisible()?void 0:!0,s.pinned=e.isPinned()?e.getPinned():null,s.sort=e.getSort()?e.getSort():null,s.sortIndex=e.getSortIndex()!=null?e.getSortIndex():null,s}};Yd=E([Fe("columnDefFactory")],Yd);var Gn=class{getInitialRowClasses(e){const t=[];return ce(e.extraCssClass)&&t.push(e.extraCssClass),t.push("ag-row"),t.push(e.rowFocused?"ag-row-focus":"ag-row-no-focus"),e.fadeRowIn&&t.push("ag-opacity-zero"),t.push(e.rowIsEven?"ag-row-even":"ag-row-odd"),e.rowNode.isRowPinned()&&t.push("ag-row-pinned"),e.rowNode.isSelected()&&t.push("ag-row-selected"),e.rowNode.footer&&t.push("ag-row-footer"),t.push("ag-row-level-"+e.rowLevel),e.rowNode.stub&&t.push("ag-row-loading"),e.fullWidthRow&&t.push("ag-full-width-row"),e.expandable&&(t.push("ag-row-group"),t.push(e.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")),e.rowNode.dragging&&t.push("ag-row-dragging"),Ad(t,this.processClassesFromGridOptions(e.rowNode)),Ad(t,this.preProcessRowClassRules(e.rowNode)),t.push(e.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),e.firstRowOnPage&&t.push("ag-row-first"),e.lastRowOnPage&&t.push("ag-row-last"),e.fullWidthRow&&(e.pinned==="left"&&t.push("ag-cell-last-left-pinned"),e.pinned==="right"&&t.push("ag-cell-first-right-pinned")),t}processClassesFromGridOptions(e){const t=[],i=l=>{typeof l=="string"?t.push(l):Array.isArray(l)&&l.forEach(u=>t.push(u))},s=this.gridOptionsService.get("rowClass");if(s){if(typeof s=="function")return console.warn("AG Grid: rowClass should not be a function, please use getRowClass instead"),[];i(s)}const n=this.gridOptionsService.getCallback("getRowClass");if(n){const l={data:e.data,node:e,rowIndex:e.rowIndex},u=n(l);i(u)}return t}preProcessRowClassRules(e){const t=[];return this.processRowClassRules(e,i=>{t.push(i)},i=>{}),t}processRowClassRules(e,t,i){const s=this.gridOptionsService.addGridCommonParams({data:e.data,node:e,rowIndex:e.rowIndex});this.stylingService.processClassRules(void 0,this.gridOptionsService.get("rowClassRules"),s,t,i)}calculateRowLevel(e){return e.group?e.level:e.parent?e.parent.level+1:0}};E([N("stylingService")],Gn.prototype,"stylingService",2);E([N("gridOptionsService")],Gn.prototype,"gridOptionsService",2);Gn=E([Fe("rowCssClassCalculator")],Gn);var Mr=class extends ge{init(){this.isAccentedSort=this.gridOptionsService.get("accentedSort"),this.primaryColumnsSortGroups=this.gridOptionsService.isColumnsSortingCoupledToGroup(),this.addManagedPropertyListener("accentedSort",e=>this.isAccentedSort=e.currentValue),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.primaryColumnsSortGroups=this.gridOptionsService.isColumnsSortingCoupledToGroup())}doFullSort(e,t){const i=(n,l)=>({currentPos:l,rowNode:n}),s=e.map(i);return s.sort(this.compareRowNodes.bind(this,t)),s.map(n=>n.rowNode)}compareRowNodes(e,t,i){const s=t.rowNode,n=i.rowNode;for(let l=0,u=e.length;l<u;l++){const g=e[l],C=g.sort==="desc",S=this.getValue(s,g.column),A=this.getValue(n,g.column);let D;const M=this.getComparator(g,s);if(M?D=M(S,A,s,n,C):D=ot.defaultComparator(S,A,this.isAccentedSort),!isNaN(D)&&D!==0)return g.sort==="asc"?D:D*-1}return t.currentPos-i.currentPos}getComparator(e,t){const i=e.column,s=i.getColDef().comparator;if(s!=null)return s;if(!i.getColDef().showRowGroup)return;const n=!t.group&&i.getColDef().field;if(!n)return;const l=this.columnModel.getPrimaryColumn(n);if(!!l)return l.getColDef().comparator}getValue(e,t){var i,s;if(!this.primaryColumnsSortGroups)return this.valueService.getValue(t,e,!1,!1);if(e.rowGroupColumn===t){if(this.gridOptionsService.isGroupUseEntireRow(this.columnModel.isPivotActive())){const g=(i=e.allLeafChildren)==null?void 0:i[0];return g?this.valueService.getValue(t,g,!1,!1):void 0}const u=this.columnModel.getGroupDisplayColumnForGroup(t.getId());return u?(s=e.groupData)==null?void 0:s[u.getId()]:void 0}if(!(e.group&&t.getColDef().showRowGroup))return this.valueService.getValue(t,e,!1,!1)}};E([N("valueService")],Mr.prototype,"valueService",2);E([N("columnModel")],Mr.prototype,"columnModel",2);E([Ce],Mr.prototype,"init",1);Mr=E([Fe("rowNodeSorter")],Mr);var fn=class extends ge{constructor(){super(...arguments),this.ready=!1,this.readyCallbacks=[]}checkReady(){if(this.ready=this.gridCtrl!=null&&this.gridBodyCtrl!=null&&this.centerRowContainerCtrl!=null&&this.leftRowContainerCtrl!=null&&this.rightRowContainerCtrl!=null&&this.bottomCenterRowContainerCtrl!=null&&this.bottomLeftRowContainerCtrl!=null&&this.bottomRightRowContainerCtrl!=null&&this.topCenterRowContainerCtrl!=null&&this.topLeftRowContainerCtrl!=null&&this.topRightRowContainerCtrl!=null&&this.stickyTopCenterRowContainerCtrl!=null&&this.stickyTopLeftRowContainerCtrl!=null&&this.stickyTopRightRowContainerCtrl!=null&&this.centerHeaderRowContainerCtrl!=null&&this.leftHeaderRowContainerCtrl!=null&&this.rightHeaderRowContainerCtrl!=null&&this.fakeHScrollComp!=null&&this.fakeVScrollComp!=null&&this.gridHeaderCtrl!=null,this.ready){const e=this.createReadyParams();this.readyCallbacks.forEach(t=>t(e)),this.readyCallbacks.length=0}}whenReady(e){this.ready?e(this.createReadyParams()):this.readyCallbacks.push(e)}createReadyParams(){return{centerRowContainerCtrl:this.centerRowContainerCtrl,leftRowContainerCtrl:this.leftRowContainerCtrl,rightRowContainerCtrl:this.rightRowContainerCtrl,bottomCenterRowContainerCtrl:this.bottomCenterRowContainerCtrl,bottomLeftRowContainerCtrl:this.bottomLeftRowContainerCtrl,bottomRightRowContainerCtrl:this.bottomRightRowContainerCtrl,topCenterRowContainerCtrl:this.topCenterRowContainerCtrl,topLeftRowContainerCtrl:this.topLeftRowContainerCtrl,topRightRowContainerCtrl:this.topRightRowContainerCtrl,stickyTopCenterRowContainerCtrl:this.stickyTopCenterRowContainerCtrl,stickyTopLeftRowContainerCtrl:this.stickyTopLeftRowContainerCtrl,stickyTopRightRowContainerCtrl:this.stickyTopRightRowContainerCtrl,centerHeaderRowContainerCtrl:this.centerHeaderRowContainerCtrl,leftHeaderRowContainerCtrl:this.leftHeaderRowContainerCtrl,rightHeaderRowContainerCtrl:this.rightHeaderRowContainerCtrl,fakeHScrollComp:this.fakeHScrollComp,fakeVScrollComp:this.fakeVScrollComp,gridBodyCtrl:this.gridBodyCtrl,gridCtrl:this.gridCtrl,gridHeaderCtrl:this.gridHeaderCtrl}}registerFakeHScrollComp(e){this.fakeHScrollComp=e,this.checkReady()}registerFakeVScrollComp(e){this.fakeVScrollComp=e,this.checkReady()}registerGridHeaderCtrl(e){this.gridHeaderCtrl=e,this.checkReady()}registerCenterRowContainerCtrl(e){this.centerRowContainerCtrl=e,this.checkReady()}registerLeftRowContainerCtrl(e){this.leftRowContainerCtrl=e,this.checkReady()}registerRightRowContainerCtrl(e){this.rightRowContainerCtrl=e,this.checkReady()}registerTopCenterRowContainerCtrl(e){this.topCenterRowContainerCtrl=e,this.checkReady()}registerTopLeftRowContainerCon(e){this.topLeftRowContainerCtrl=e,this.checkReady()}registerTopRightRowContainerCtrl(e){this.topRightRowContainerCtrl=e,this.checkReady()}registerStickyTopCenterRowContainerCtrl(e){this.stickyTopCenterRowContainerCtrl=e,this.checkReady()}registerStickyTopLeftRowContainerCon(e){this.stickyTopLeftRowContainerCtrl=e,this.checkReady()}registerStickyTopRightRowContainerCtrl(e){this.stickyTopRightRowContainerCtrl=e,this.checkReady()}registerBottomCenterRowContainerCtrl(e){this.bottomCenterRowContainerCtrl=e,this.checkReady()}registerBottomLeftRowContainerCtrl(e){this.bottomLeftRowContainerCtrl=e,this.checkReady()}registerBottomRightRowContainerCtrl(e){this.bottomRightRowContainerCtrl=e,this.checkReady()}registerHeaderContainer(e,t){switch(t){case"left":this.leftHeaderRowContainerCtrl=e;break;case"right":this.rightHeaderRowContainerCtrl=e;break;default:this.centerHeaderRowContainerCtrl=e;break}this.checkReady()}registerGridBodyCtrl(e){this.gridBodyCtrl=e,this.checkReady()}registerGridCtrl(e){this.gridCtrl=e,this.checkReady()}getFakeHScrollComp(){return this.fakeHScrollComp}getFakeVScrollComp(){return this.fakeVScrollComp}getGridHeaderCtrl(){return this.gridHeaderCtrl}getGridCtrl(){return this.gridCtrl}getCenterRowContainerCtrl(){return this.centerRowContainerCtrl}getTopCenterRowContainerCtrl(){return this.topCenterRowContainerCtrl}getBottomCenterRowContainerCtrl(){return this.bottomCenterRowContainerCtrl}getStickyTopCenterRowContainerCtrl(){return this.stickyTopCenterRowContainerCtrl}getGridBodyCtrl(){return this.gridBodyCtrl}getHeaderRowContainerCtrls(){return[this.leftHeaderRowContainerCtrl,this.rightHeaderRowContainerCtrl,this.centerHeaderRowContainerCtrl]}getHeaderRowContainerCtrl(e){switch(e){case"left":return this.leftHeaderRowContainerCtrl;case"right":return this.rightHeaderRowContainerCtrl;default:return this.centerHeaderRowContainerCtrl}}};fn.NAME="ctrlsService";fn=E([Fe(fn.NAME)],fn);var Xd=class extends ge{constructor(){super(...arguments),this.registry={}}register(e){this.registry[e.controllerName]=e.controllerClass}getInstance(e){const t=this.registry[e];if(t!=null)return new t}};Xd=E([Fe("ctrlsFactory")],Xd);var ir=class extends Ze{constructor(e,t){super(e),this.direction=t,this.hideTimeout=null}postConstruct(){this.addManagedListener(this.eventService,L.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",wh()||Xs())}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=Sh(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){const e=["mouseenter","mousedown","touchstart"],t=["mouseleave","touchend"],i=this.getGui();e.forEach(s=>this.addManagedListener(i,s,()=>this.addOrRemoveCssClass("ag-scrollbar-active",!0))),t.forEach(s=>this.addManagedListener(i,s,()=>this.addOrRemoveCssClass("ag-scrollbar-active",!1)))}onScrollVisibilityChanged(){this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),this.animationFrameService.requestAnimationFrame(()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedListener(this.eventService,L.EVENT_BODY_SCROLL,e=>{e.direction===this.direction&&(this.hideTimeout!==null&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=null),this.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))}),this.addManagedListener(this.eventService,L.EVENT_BODY_SCROLL_END,()=>{this.hideTimeout=window.setTimeout(()=>{this.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),this.hideTimeout=null},400)})}attemptSettingScrollPosition(e){const t=this.getViewport();lh(()=>Ui(t),()=>this.setScrollPosition(e),100)}getViewport(){return this.eViewport}getContainer(){return this.eContainer}onScrollCallback(e){this.addManagedListener(this.getViewport(),"scroll",e)}};E([xe("eViewport")],ir.prototype,"eViewport",2);E([xe("eContainer")],ir.prototype,"eContainer",2);E([N("scrollVisibleService")],ir.prototype,"scrollVisibleService",2);E([N("ctrlsService")],ir.prototype,"ctrlsService",2);E([N("animationFrameService")],ir.prototype,"animationFrameService",2);var sr=class ef extends ir{constructor(){super(ef.TEMPLATE,"horizontal")}postConstruct(){super.postConstruct();const t=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedListener(this.eventService,L.EVENT_DISPLAYED_COLUMNS_CHANGED,t),this.addManagedListener(this.eventService,L.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,t),this.addManagedListener(this.eventService,L.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedPropertyListener("domLayout",t),this.ctrlsService.registerFakeHScrollComp(this),this.createManagedBean(new Gr(i=>this.eContainer.style.width=`${i}px`)),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gridOptionsService.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}onPinnedRowDataChanged(){this.refreshCompBottom()}refreshCompBottom(){if(!this.invisibleScrollbar)return;const t=this.pinnedRowModel.getPinnedBottomTotalHeight();this.getGui().style.bottom=`${t}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){const t=this.scrollVisibleService.isVerticalScrollShowing();let i=this.columnModel.getDisplayedColumnsRightWidth();const s=!this.enableRtl&&t,n=this.gridOptionsService.getScrollbarWidth();s&&(i+=n),Ji(this.eRightSpacer,i),this.eRightSpacer.classList.toggle("ag-scroller-corner",i<=n);let l=this.columnModel.getDisplayedColumnsLeftWidth();this.enableRtl&&t&&(l+=n),Ji(this.eLeftSpacer,l),this.eLeftSpacer.classList.toggle("ag-scroller-corner",l<=n)}setScrollVisible(){const t=this.scrollVisibleService.isHorizontalScrollShowing(),i=this.invisibleScrollbar,s=this.gridOptionsService.get("suppressHorizontalScroll"),n=t&&this.gridOptionsService.getScrollbarWidth()||0,u=s?0:n===0&&i?16:n;this.addOrRemoveCssClass("ag-scrollbar-invisible",i),To(this.getGui(),u),To(this.eViewport,u),To(this.eContainer,u),this.setDisplayed(t,{skipAriaHidden:!0})}getScrollPosition(){return Sn(this.getViewport(),this.enableRtl)}setScrollPosition(t){Ui(this.getViewport())||this.attemptSettingScrollPosition(t),En(this.getViewport(),t,this.enableRtl)}};sr.TEMPLATE=`<div class="ag-body-horizontal-scroll" aria-hidden="true">
            <div class="ag-horizontal-left-spacer" ref="eLeftSpacer"></div>
            <div class="ag-body-horizontal-scroll-viewport" ref="eViewport">
                <div class="ag-body-horizontal-scroll-container" ref="eContainer"></div>
            </div>
            <div class="ag-horizontal-right-spacer" ref="eRightSpacer"></div>
        </div>`;E([xe("eLeftSpacer")],sr.prototype,"eLeftSpacer",2);E([xe("eRightSpacer")],sr.prototype,"eRightSpacer",2);E([N("columnModel")],sr.prototype,"columnModel",2);E([N("pinnedRowModel")],sr.prototype,"pinnedRowModel",2);E([Ce],sr.prototype,"postConstruct",1);var sw=sr,_n=class extends ge{postConstruct(){const e=this.checkContainerWidths.bind(this);this.addManagedListener(this.eventService,L.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,L.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,e),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){const e=this.gridOptionsService.isDomLayout("print"),t=e?0:this.columnModel.getDisplayedColumnsLeftWidth(),i=e?0:this.columnModel.getDisplayedColumnsRightWidth();t!=this.leftWidth&&(this.leftWidth=t,this.eventService.dispatchEvent({type:L.EVENT_LEFT_PINNED_WIDTH_CHANGED})),i!=this.rightWidth&&(this.rightWidth=i,this.eventService.dispatchEvent({type:L.EVENT_RIGHT_PINNED_WIDTH_CHANGED}))}getPinnedRightWidth(){return this.rightWidth}getPinnedLeftWidth(){return this.leftWidth}};E([N("columnModel")],_n.prototype,"columnModel",2);E([Ce],_n.prototype,"postConstruct",1);_n=E([Fe("pinnedWidthService")],_n);var Ir=class extends ge{constructor(){super(...arguments),this.events=[]}postConstruct(){this.rowModel.getType()=="clientSide"&&(this.clientSideRowModel=this.rowModel)}dispatchExpanded(e){if(this.clientSideRowModel==null){this.eventService.dispatchEvent(e);return}this.events.push(e);const t=()=>{this.clientSideRowModel&&this.clientSideRowModel.onRowGroupOpened(),this.events.forEach(i=>this.eventService.dispatchEvent(i)),this.events=[]};this.dispatchExpandedDebounced==null&&(this.dispatchExpandedDebounced=this.animationFrameService.debounce(t)),this.dispatchExpandedDebounced()}};E([N("animationFrameService")],Ir.prototype,"animationFrameService",2);E([N("rowModel")],Ir.prototype,"rowModel",2);E([Ce],Ir.prototype,"postConstruct",1);Ir=E([Fe("rowNodeEventThrottle")],Ir);var ow={columnsMenuParams:{version:"31.1",message:"Use `columnChooserParams` instead."},suppressMenu:{version:"31.1",message:"Use `suppressHeaderMenuButton` instead."},suppressCellFlash:{version:"31.2",message:"Use `enableCellChangeFlash={false}` in the ColDef"},dndSource:{version:"31.2",message:"This feature has been replaced by `Row Dragging to an External DropZone`."},dndSourceOnRowDrag:{version:"31.2",message:"This feature has been replaced by `Row Dragging to an External DropZone`."}},to=(e,t)=>{var i;return((i=t.rowModelType)!=null?i:"clientSide")==="clientSide"?{module:"@ag-grid-enterprise/row-grouping"}:null},rw={enableRowGroup:to,rowGroup:to,rowGroupIndex:to,enablePivot:to,enableValue:to,pivot:to,pivotIndex:to,aggFunc:to,cellEditor:e=>e.cellEditor==="agRichSelect"||e.cellEditor==="agRichSelectCellEditor"?{module:"@ag-grid-enterprise/rich-select"}:null,menuTabs:e=>{var t;const i=["columnsMenuTab","generalMenuTab"];return(t=e.menuTabs)!=null&&t.some(s=>i.includes(s))?{module:"@ag-grid-enterprise/menu"}:null},columnsMenuParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},columnChooserParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],dependencies:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelection is only supported with rowSelection=multiple"},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],dependencies:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],dependencies:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"},children:()=>pr},pr={objectName:"colDef",allProperties:zy.ALL_PROPERTIES,docsUrl:"column-properties/",deprecations:ow,validations:rw},nw={enableChartToolPanelsButton:{version:"29"},functionsPassive:{version:"29.2"},onColumnRowGroupChangeRequest:{version:"29.2"},onColumnPivotChangeRequest:{version:"29.2"},onColumnValueChangeRequest:{version:"29.2"},onColumnAggFuncChangeRequest:{version:"29.2"},serverSideFilterAllLevels:{version:"30",message:"All server-side group levels are now filtered by default. This can be toggled using `serverSideOnlyRefreshFilteredGroups`."},suppressAggAtRootLevel:{version:"30",message:"The root level aggregation is now suppressed by default. This can be toggled using  `alwaysAggregateAtRootLevel`."},excludeHiddenColumnsFromQuickFilter:{version:"30",message:"Hidden columns are now excluded from the Quick Filter by default. This can be toggled using `includeHiddenColumnsInQuickFilter`."},enterMovesDown:{version:"30",renamed:"enterNavigatesVertically"},enterMovesDownAfterEdit:{version:"30",renamed:"enterNavigatesVerticallyAfterEdit"},suppressParentsInRowNodes:{version:"30.2",message:"Using suppressParentsInRowNodes is no longer recommended. To serialize nodes it is now recommended to instead remove the parent node reference before serialization."},advancedFilterModel:{version:"31",message:"Use `initialState.filter.advancedFilterModel` instead."},suppressAsyncEvents:{version:"31",message:"Events should be handled asynchronously."},cellFadeDelay:{version:"31.1",renamed:"cellFadeDuration"},cellFlashDelay:{version:"31.1",renamed:"cellFlashDuration"},suppressServerSideInfiniteScroll:{version:"31.1"},serverSideSortOnServer:{version:"31.1"},serverSideFilterOnServer:{version:"31.1"},enableCellChangeFlash:{version:"31.2",message:"Use `enableCellChangeFlash` in the `ColDef` or `defaultColDef` for all columns."}},aw={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!1,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"	",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,suppressChartToolPanelsButton:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressAsyncEvents:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,enableCellChangeFlash:!1,cellFlashDelay:500,cellFlashDuration:500,cellFadeDelay:1e3,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupIncludeTotalFooter:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,suppressServerSideInfiniteScroll:!1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSideSortOnServer:!1,serverSideFilterOnServer:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,suppressGroupMaintainValueType:!1,functionsPassive:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,pivotMaxGeneratedColumns:-1},lw={sideBar:{module:"@ag-grid-enterprise/side-bar"},statusBar:{module:"@ag-grid-enterprise/status-bar"},enableCharts:{module:"@ag-grid-enterprise/charts"},getMainMenuItems:{module:"@ag-grid-enterprise/menu"},getContextMenuItems:{module:"@ag-grid-enterprise/menu"},allowContextMenuWithControlKey:{module:"@ag-grid-enterprise/menu"},enableAdvancedFilter:{module:"@ag-grid-enterprise/advanced-filter"},treeData:{supportedRowModels:["clientSide","serverSide"],module:"@ag-grid-enterprise/row-grouping",dependencies:e=>{var t;const i=(t=e.rowModelType)!=null?t:"clientSide";switch(i){case"clientSide":const s=`treeData requires 'getDataPath' in the ${i} row model.`;return e.getDataPath?null:s;case"serverSide":const n=`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${i} row model.`;return e.isServerSideGroup&&e.getServerSideGroupKey?null:n}return null}},masterDetail:{module:"@ag-grid-enterprise/master-detail"},enableRangeSelection:{module:"@ag-grid-enterprise/range-selection"},enableRangeHandle:{dependencies:{enableRangeSelection:[!0]}},enableFillHandle:{dependencies:{enableRangeSelection:[!0]}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupIncludeFooter:{supportedRowModels:["clientSide","serverSide"],dependencies:e=>{var t;switch((t=e.rowModelType)!=null?t:"clientSide"){case"clientSide":return null;case"serverSide":const s="groupIncludeFooter is not supported alongside suppressServerSideInfiniteScroll";return e.suppressServerSideInfiniteScroll?s:null}return null}},groupIncludeTotalFooter:{supportedRowModels:["clientSide"]},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveLowestSingleChildren:[void 0,!1]}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveSingleChildren:[void 0,!1]}},groupSelectsChildren:{dependencies:{rowSelection:["multiple"]}},suppressParentsInRowNodes:{dependencies:{groupSelectsChildren:[void 0,!1]}},viewportDatasource:{supportedRowModels:["viewport"],module:"@ag-grid-enterprise/viewport-row-model"},serverSideDatasource:{supportedRowModels:["serverSide"],module:"@ag-grid-enterprise/server-side-row-model"},cacheBlockSize:{supportedRowModels:["serverSide","infinite"]},datasource:{supportedRowModels:["infinite"],module:"@ag-grid-community/infinite-row-model"},rowData:{supportedRowModels:["clientSide"],module:"@ag-grid-community/client-side-row-model"},columnDefs:()=>pr,defaultColDef:()=>pr,defaultColGroupDef:()=>pr,autoGroupColumnDef:()=>pr},dw={objectName:"gridOptions",allProperties:[...Ds.ALL_PROPERTIES,...qi.EVENT_CALLBACKS],propertyExceptions:["api","columnApi"],docsUrl:"grid-options/",deprecations:nw,validations:lw},Et=class{constructor(){this.destroyed=!1,this.domDataKey="__AG_"+Math.random().toString(),this.propertyEventService=new ps,this.globalEventHandlerFactory=e=>(t,i)=>{if(this.destroyed)return;const s=Ea.has(t);if(s&&!e||!s&&e)return;const n=qi.getCallbackForEvent(t),l=this.gridOptions[n];typeof l=="function"&&this.frameworkOverrides.wrapOutgoing(()=>{l(i)})}}get context(){return this.gridOptions.context}init(){this.columnApi=new Mn(this.api);const e=!this.get("suppressAsyncEvents");this.eventService.addGlobalListener(this.globalEventHandlerFactory().bind(this),e),this.eventService.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propertyEventService.setFrameworkOverrides(this.frameworkOverrides),this.getScrollbarWidth()}destroy(){this.destroyed=!0,this.columnApi=void 0}get(e){var t;return(t=this.gridOptions[e])!=null?t:aw[e]}getCallback(e){return this.mergeGridCommonParams(this.gridOptions[e])}exists(e){return ce(this.gridOptions[e])}mergeGridCommonParams(e){return e&&(i=>{const s=i;return s.api=this.api,s.columnApi=this.columnApi,s.context=this.context,e(s)})}static toBoolean(e){return typeof e=="boolean"?e:typeof e=="string"?e.toUpperCase()==="TRUE"||e=="":!1}static toNumber(e){if(typeof e=="number")return e;if(typeof e=="string"){const t=parseInt(e);return isNaN(t)?void 0:t}}static toConstrainedNum(e,t){return i=>{const s=Et.toNumber(i);if(!(s==null||s<e||s>t))return s}}static getCoercedValue(e,t){const i=Et.PROPERTY_COERCIONS.get(e);return i?i(t):t}static getCoercedGridOptions(e){const t={};return Object.entries(e).forEach(([i,s])=>{const n=Et.getCoercedValue(i,s);t[i]=n}),t}updateGridOptions({options:e,source:t="api"}){const i={id:Et.changeSetId++,properties:[]},s=[];Object.entries(e).forEach(([n,l])=>{t==="api"&&GC[n]&&Ue(`${n} is an initial property and cannot be updated.`);const u=Et.getCoercedValue(n,l),g=typeof u=="object"&&t==="api",C=this.gridOptions[n];if(g||C!==u){this.gridOptions[n]=u;const S={type:n,currentValue:u,previousValue:C,changeSet:i,source:t};s.push(S)}}),this.validationService.processGridOptions(this.gridOptions),i.properties=s.map(n=>n.type),s.forEach(n=>{this.gridOptions.debug&&console.log(`AG Grid: Updated property ${n.type} from `,n.previousValue," to  ",n.currentValue),this.propertyEventService.dispatchEvent(n)})}addEventListener(e,t){this.propertyEventService.addEventListener(e,t)}removeEventListener(e,t){this.propertyEventService.removeEventListener(e,t)}getScrollbarWidth(){if(this.scrollbarWidth==null){const t=typeof this.gridOptions.scrollbarWidth=="number"&&this.gridOptions.scrollbarWidth>=0?this.gridOptions.scrollbarWidth:Cp();t!=null&&(this.scrollbarWidth=t,this.eventService.dispatchEvent({type:L.EVENT_SCROLLBAR_WIDTH_CHANGED}))}return this.scrollbarWidth}isRowModelType(e){return this.gridOptions.rowModelType===e||e==="clientSide"&&Xe(this.gridOptions.rowModelType)}isDomLayout(e){var t;return((t=this.gridOptions.domLayout)!=null?t:"normal")===e}isRowSelection(){return this.gridOptions.rowSelection==="single"||this.gridOptions.rowSelection==="multiple"}useAsyncEvents(){return!this.get("suppressAsyncEvents")}isGetRowHeightFunction(){return typeof this.gridOptions.getRowHeight=="function"}getRowHeightForNode(e,t=!1,i){if(i==null&&(i=this.environment.getDefaultRowHeight()),this.isGetRowHeightFunction()){if(t)return{height:i,estimated:!0};const n={node:e,data:e.data},l=this.getCallback("getRowHeight")(n);if(this.isNumeric(l))return l===0&&Ue("The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead."),{height:Math.max(1,l),estimated:!1}}return e.detail&&this.get("masterDetail")?this.getMasterDetailRowHeight():{height:this.gridOptions.rowHeight&&this.isNumeric(this.gridOptions.rowHeight)?this.gridOptions.rowHeight:i,estimated:!1}}getMasterDetailRowHeight(){return this.get("detailRowAutoHeight")?{height:1,estimated:!1}:this.isNumeric(this.gridOptions.detailRowHeight)?{height:this.gridOptions.detailRowHeight,estimated:!1}:{height:300,estimated:!1}}getRowHeightAsNumber(){if(!this.gridOptions.rowHeight||Xe(this.gridOptions.rowHeight))return this.environment.getDefaultRowHeight();const e=this.environment.refreshRowHeightVariable();return e!==-1?e:(console.warn("AG Grid row height must be a number if not using standard row model"),this.environment.getDefaultRowHeight())}isNumeric(e){return!isNaN(e)&&typeof e=="number"&&isFinite(e)}getDomDataKey(){return this.domDataKey}getDomData(e,t){const i=e[this.getDomDataKey()];return i?i[t]:void 0}setDomData(e,t,i){const s=this.getDomDataKey();let n=e[s];Xe(n)&&(n={},e[s]=n),n[t]=i}getDocument(){let e=null;return this.gridOptions.getDocument&&ce(this.gridOptions.getDocument)?e=this.gridOptions.getDocument():this.eGridDiv&&(e=this.eGridDiv.ownerDocument),e&&ce(e)?e:document}getWindow(){return this.getDocument().defaultView||window}getRootNode(){return this.eGridDiv.getRootNode()}getAsyncTransactionWaitMillis(){return ce(this.gridOptions.asyncTransactionWaitMillis)?this.gridOptions.asyncTransactionWaitMillis:50}isAnimateRows(){return this.get("ensureDomOrder")?!1:this.get("animateRows")}isGroupRowsSticky(){return!(this.get("suppressGroupRowsSticky")||this.get("paginateChildRows")||this.get("groupHideOpenParents")||this.isDomLayout("print"))}isColumnsSortingCoupledToGroup(){const e=this.gridOptions.autoGroupColumnDef;return!e?.comparator&&!this.get("treeData")}getGroupAggFiltering(){const e=this.gridOptions.groupAggFiltering;if(typeof e=="function")return this.getCallback("groupAggFiltering");if(e===!0)return()=>!0}isGroupIncludeFooterTrueOrCallback(){const e=this.gridOptions.groupIncludeFooter;return e===!0||typeof e=="function"}getGroupIncludeFooter(){const e=this.gridOptions.groupIncludeFooter;return typeof e=="function"?this.getCallback("groupIncludeFooter"):e===!0?()=>!0:()=>!1}isGroupMultiAutoColumn(){return this.gridOptions.groupDisplayType?this.gridOptions.groupDisplayType==="multipleColumns":this.get("groupHideOpenParents")}isGroupUseEntireRow(e){return e?!1:this.gridOptions.groupDisplayType==="groupRows"}getGridCommonParams(){return{api:this.api,columnApi:this.columnApi,context:this.context}}addGridCommonParams(e){const t=e;return t.api=this.api,t.columnApi=this.columnApi,t.context=this.context,t}};Et.PROPERTY_COERCIONS=new Map([...Ds.BOOLEAN_PROPERTIES.map(e=>[e,Et.toBoolean]),...Ds.NUMBER_PROPERTIES.map(e=>[e,Et.toNumber]),["groupAggFiltering",e=>typeof e=="function"?e:Et.toBoolean(e)],["pageSize",Et.toConstrainedNum(1,Number.MAX_VALUE)],["autoSizePadding",Et.toConstrainedNum(0,Number.MAX_VALUE)],["keepDetailRowsCount",Et.toConstrainedNum(1,Number.MAX_VALUE)],["rowBuffer",Et.toConstrainedNum(0,Number.MAX_VALUE)],["infiniteInitialRowCount",Et.toConstrainedNum(1,Number.MAX_VALUE)],["cacheOverflowSize",Et.toConstrainedNum(1,Number.MAX_VALUE)],["cacheBlockSize",Et.toConstrainedNum(1,Number.MAX_VALUE)],["serverSideInitialRowCount",Et.toConstrainedNum(1,Number.MAX_VALUE)],["viewportRowModelPageSize",Et.toConstrainedNum(1,Number.MAX_VALUE)],["viewportRowModelBufferSize",Et.toConstrainedNum(0,Number.MAX_VALUE)]]);Et.changeSetId=0;E([N("gridOptions")],Et.prototype,"gridOptions",2);E([N("eventService")],Et.prototype,"eventService",2);E([N("environment")],Et.prototype,"environment",2);E([N("frameworkOverrides")],Et.prototype,"frameworkOverrides",2);E([N("eGridDiv")],Et.prototype,"eGridDiv",2);E([N("validationService")],Et.prototype,"validationService",2);E([N("gridApi")],Et.prototype,"api",2);E([Ce],Et.prototype,"init",1);E([Di],Et.prototype,"destroy",1);Et=E([Fe("gridOptionsService")],Et);var $d=class extends ge{getLocaleTextFunc(){const e=this.gridOptionsService.getCallback("getLocaleText");if(e)return(i,s,n)=>e({key:i,defaultValue:s,variableValues:n});const t=this.gridOptionsService.get("localeText");return(i,s,n)=>{let l=t&&t[i];if(l&&n&&n.length){let u=0;for(;!(u>=n.length||l.indexOf("${variable}")===-1);)l=l.replace("${variable}",n[u++])}return l??s}}};$d=E([Fe("localeService")],$d);var nc=class tf extends ir{constructor(){super(tf.TEMPLATE,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new El(this.eContainer)),this.ctrlsService.registerFakeVScrollComp(this),this.addManagedListener(this.eventService,L.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,this.onRowContainerHeightChanged.bind(this))}setScrollVisible(){const t=this.scrollVisibleService.isVerticalScrollShowing(),i=this.invisibleScrollbar,s=t&&this.gridOptionsService.getScrollbarWidth()||0,n=s===0&&i?16:s;this.addOrRemoveCssClass("ag-scrollbar-invisible",i),Ji(this.getGui(),n),Ji(this.eViewport,n),Ji(this.eContainer,n),this.setDisplayed(t,{skipAriaHidden:!0})}onRowContainerHeightChanged(){const{ctrlsService:t}=this,s=t.getGridBodyCtrl().getBodyViewportElement(),n=this.getScrollPosition(),l=s.scrollTop;n!=l&&this.setScrollPosition(l,!0)}getScrollPosition(){return this.getViewport().scrollTop}setScrollPosition(t,i){!i&&!Ui(this.getViewport())&&this.attemptSettingScrollPosition(t),this.getViewport().scrollTop=t}};nc.TEMPLATE=`<div class="ag-body-vertical-scroll" aria-hidden="true">
            <div class="ag-body-vertical-scroll-viewport" ref="eViewport">
                <div class="ag-body-vertical-scroll-container" ref="eContainer"></div>
            </div>
        </div>`;E([Ce],nc.prototype,"postConstruct",1);var hw=nc,Xc={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},$c=["january","february","march","april","may","june","july","august","september","october","november","december"],Ws=class extends ge{constructor(){super(...arguments),this.dataTypeDefinitions={},this.isWaitingForRowData=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[]}init(){this.groupHideOpenParents=this.gridOptionsService.get("groupHideOpenParents"),this.addManagedPropertyListener("groupHideOpenParents",()=>{this.groupHideOpenParents=this.gridOptionsService.get("groupHideOpenParents")}),this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",e=>{this.processDataTypeDefinitions(),this.columnModel.recreateColumnDefs(ur(e.source))})}processDataTypeDefinitions(){var e;const t=this.getDefaultDataTypes();this.dataTypeDefinitions={},Object.entries(t).forEach(([s,n])=>{this.dataTypeDefinitions[s]=Vt(We({},n),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(n)})});const i=(e=this.gridOptionsService.get("dataTypeDefinitions"))!=null?e:{};this.dataTypeMatchers={},Object.entries(i).forEach(([s,n])=>{const l=this.processDataTypeDefinition(n,i,[s],t);l&&(this.dataTypeDefinitions[s]=l,n.dataTypeMatcher&&(this.dataTypeMatchers[s]=n.dataTypeMatcher))}),this.checkObjectValueHandlers(t),["dateString","text","number","boolean","date"].forEach(s=>{const n=this.dataTypeMatchers[s];n&&delete this.dataTypeMatchers[s],this.dataTypeMatchers[s]=n??t[s].dataTypeMatcher})}mergeDataTypeDefinitions(e,t){const i=We(We({},e),t);return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(i.columnTypes=[...this.convertColumnTypes(e.columnTypes),...this.convertColumnTypes(t.columnTypes)]),i}processDataTypeDefinition(e,t,i,s){let n;const l=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){let u=s[l];const g=t[l];if(u&&g&&(u=g),!this.validateDataTypeDefinition(e,u,l))return;n=this.mergeDataTypeDefinitions(u,e)}else{if(i.includes(l)){Ue('Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.');return}const u=t[l];if(!this.validateDataTypeDefinition(e,u,l))return;const g=this.processDataTypeDefinition(u,t,[...i,l],s);if(!g)return;n=this.mergeDataTypeDefinitions(g,e)}return Vt(We({},n),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(n)})}validateDataTypeDefinition(e,t,i){return t?t.baseDataType!==e.baseDataType?(Ue('The "baseDataType" property of a data type definition must match that of its parent.'),!1):!0:(Ue(`The data type definition ${i} does not exist.`),!1)}createGroupSafeValueFormatter(e){if(!!e.valueFormatter)return t=>{var i,s;if((i=t.node)!=null&&i.group){const n=t.column.getAggFunc();if(n){if(n==="first"||n==="last")return e.valueFormatter(t);if(e.baseDataType==="number"&&n!=="count"){if(typeof t.value=="number")return e.valueFormatter(t);if(typeof t.value=="object"){if(!t.value)return;if("toNumber"in t.value)return e.valueFormatter(Vt(We({},t),{value:t.value.toNumber()}));if("value"in t.value)return e.valueFormatter(Vt(We({},t),{value:t.value.value}))}}}if(!this.gridOptionsService.get("suppressGroupMaintainValueType"))return}else if(this.groupHideOpenParents&&t.column.isRowGroupActive()){if(typeof t.value!="string"||((s=e.dataTypeMatcher)==null?void 0:s.call(e,t.value)))return e.valueFormatter(t);if(!this.gridOptionsService.get("suppressGroupMaintainValueType"))return}return e.valueFormatter(t)}}updateColDefAndGetDataTypeDefinitionColumnType(e,t,i){let{cellDataType:s}=t;const{field:n}=t;if(s===void 0&&(s=e.cellDataType),(s==null||s===!0)&&(s=this.canInferCellDataType(e,t)?this.inferCellDataType(n,i):!1),!s){e.cellDataType=!1;return}const l=this.dataTypeDefinitions[s];if(!l){Ue(`Missing data type definition - "${s}"`);return}return e.cellDataType=s,l.groupSafeValueFormatter&&(e.valueFormatter=l.groupSafeValueFormatter),l.valueParser&&(e.valueParser=l.valueParser),l.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,l,i),l.columnTypes}updateColDefAndGetColumnType(e,t,i){var s,n;const l=this.updateColDefAndGetDataTypeDefinitionColumnType(e,t,i),u=(n=(s=t.type)!=null?s:l)!=null?n:e.type;return e.type=u,u?this.convertColumnTypes(u):void 0}addColumnListeners(e){if(!this.isWaitingForRowData)return;const t=this.columnStateUpdatesPendingInference[e.getColId()];if(!t)return;const i=s=>{t.add(s.key)};e.addEventListener(Lt.EVENT_STATE_UPDATED,i),this.columnStateUpdateListenerDestroyFuncs.push(()=>e.removeEventListener(Lt.EVENT_STATE_UPDATED,i))}canInferCellDataType(e,t){var i;if(this.rowModel.getType()!=="clientSide")return!1;const s={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(this.doColDefPropsPreventInference(t,s))return!1;const n=t.type===null?e.type:t.type;if(n){const l=(i=this.gridOptionsService.get("columnTypes"))!=null?i:{};if(this.convertColumnTypes(n).some(g=>{const C=l[g.trim()];return C&&this.doColDefPropsPreventInference(C,s)}))return!1}return!this.doColDefPropsPreventInference(e,s)}doColDefPropsPreventInference(e,t){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([i,s])=>this.doesColDefPropPreventInference(e,t,i,s))}doesColDefPropPreventInference(e,t,i,s){if(!t[i])return!1;const n=e[i];return n===null?(t[i]=!1,!1):s===void 0?!!n:n===s}inferCellDataType(e,t){var i;if(!e)return;let s;const n=this.getInitialData();if(n){const u=e.indexOf(".")>=0&&!this.gridOptionsService.get("suppressFieldDotNotation");s=mr(n,e,u)}else this.initWaitForRowData(t);if(s==null)return;const[l]=(i=Object.entries(this.dataTypeMatchers).find(([u,g])=>g(s)))!=null?i:["object"];return l}getInitialData(){const e=this.gridOptionsService.get("rowData");if(e?.length)return e[0];if(this.initialData)return this.initialData;{const t=this.rowModel.getRootNode().allLeafChildren;if(t?.length)return t[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isWaitingForRowData)return;this.isWaitingForRowData=!0;const t=this.isColumnTypeOverrideInDataTypeDefinitions;t&&this.columnModel.queueResizeOperations();const i=this.addManagedListener(this.eventService,L.EVENT_ROW_DATA_UPDATE_STARTED,s=>{const{firstRowData:n}=s;if(!n)return;i?.(),this.isWaitingForRowData=!1,this.processColumnsPendingInference(n,t),this.columnStateUpdatesPendingInference={},t&&this.columnModel.processResizeOperations();const l={type:L.EVENT_DATA_TYPES_INFERRED};this.eventService.dispatchEvent(l)})}isPendingInference(){return this.isWaitingForRowData}processColumnsPendingInference(e,t){this.initialData=e;const i=[];this.columnStateUpdateListenerDestroyFuncs.forEach(l=>l()),this.columnStateUpdateListenerDestroyFuncs=[];const s={},n={};Object.entries(this.columnStateUpdatesPendingInference).forEach(([l,u])=>{const g=this.columnModel.getGridColumn(l);if(!g)return;const C=g.getColDef();if(!this.columnModel.resetColumnDefIntoColumn(g,"cellDataTypeInferred"))return;const S=g.getColDef();if(t&&S.type&&S.type!==C.type){const A=this.getUpdatedColumnState(g,u);A.rowGroup&&A.rowGroupIndex==null&&(s[l]=A),A.pivot&&A.pivotIndex==null&&(n[l]=A),i.push(A)}}),t&&i.push(...this.columnModel.generateColumnStateForRowGroupAndPivotIndexes(s,n)),i.length&&this.columnModel.applyColumnState({state:i},"cellDataTypeInferred"),this.initialData=null}getUpdatedColumnState(e,t){const i=this.columnModel.getColumnStateFromColDef(e);return t.forEach(s=>{delete i[s],s==="rowGroup"?delete i.rowGroupIndex:s==="pivot"&&delete i.pivotIndex}),i}checkObjectValueHandlers(e){const t=this.dataTypeDefinitions.object,i=e.object;this.hasObjectValueParser=t.valueParser!==i.valueParser,this.hasObjectValueFormatter=t.valueFormatter!==i.valueFormatter}convertColumnTypes(e){let t=[];return e instanceof Array?e.some(s=>typeof s!="string")?console.warn("if colDef.type is supplied an array it should be of type 'string[]'"):t=e:typeof e=="string"?t=e.split(","):console.warn("colDef.type should be of type 'string' | 'string[]'"),t}getDateStringTypeDefinition(e){var t;return e?(t=this.getDataTypeDefinition(e))!=null?t:this.dataTypeDefinitions.dateString:this.dataTypeDefinitions.dateString}getDateParserFunction(e){return this.getDateStringTypeDefinition(e).dateParser}getDateFormatterFunction(e){return this.getDateStringTypeDefinition(e).dateFormatter}getDataTypeDefinition(e){const t=e.getColDef();if(!!t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]}getBaseDataType(e){var t;return(t=this.getDataTypeDefinition(e))==null?void 0:t.baseDataType}checkType(e,t){var i;if(t==null)return!0;const s=(i=this.getDataTypeDefinition(e))==null?void 0:i.dataTypeMatcher;return s?s(t):!0}validateColDef(e){e.cellDataType==="object"&&(e.valueFormatter===this.dataTypeDefinitions.object.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&Ue('Cell data type is "object" but no value formatter has been provided. Please either provide an object data type definition with a value formatter, or set "colDef.valueFormatter"'),e.editable&&e.valueParser===this.dataTypeDefinitions.object.valueParser&&!this.hasObjectValueParser&&Ue('Cell data type is "object" but no value parser has been provided. Please either provide an object data type definition with a value parser, or set "colDef.valueParser"'))}setColDefPropertiesForBaseDataType(e,t,i){const s=(g,C,S)=>{let A=g.getColDef().valueFormatter;return A===t.groupSafeValueFormatter&&(A=t.valueFormatter),this.valueFormatterService.formatValue(g,C,S,A)},n=Rt.__isRegistered("@ag-grid-enterprise/set-filter",this.context.getGridId()),l=this.localeService.getLocaleTextFunc(),u=g=>{const{filterParams:C}=e;e.filterParams=typeof C=="object"?We(We({},C),g):g};switch(t.baseDataType){case"number":{e.cellEditor="agNumberCellEditor",n&&u({comparator:(g,C)=>{const S=g==null?0:parseInt(g),A=C==null?0:parseInt(C);return S===A?0:S>A?1:-1}});break}case"boolean":{e.cellEditor="agCheckboxCellEditor",e.cellRenderer="agCheckboxCellRenderer",e.suppressKeyboardEvent=g=>!!g.colDef.editable&&g.event.key===Q.SPACE,u(n?{valueFormatter:g=>ce(g.value)?l(String(g.value),g.value?"True":"False"):l("blanks","(Blanks)")}:{maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(g,C)=>C,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(g,C)=>C===!1,numberOfInputs:0}]});break}case"date":{e.cellEditor="agDateCellEditor",e.keyCreator=g=>s(g.column,g.node,g.value),n&&u({valueFormatter:g=>{const C=s(g.column,g.node,g.value);return ce(C)?C:l("blanks","(Blanks)")},treeList:!0,treeListFormatter:(g,C)=>{if(C===1&&g!=null){const S=$c[Number(g)-1];return l(S,Xc[S])}return g??l("blanks","(Blanks)")}});break}case"dateString":{e.cellEditor="agDateStringCellEditor",e.keyCreator=C=>s(C.column,C.node,C.value);const g=t.dateParser;u(n?{valueFormatter:C=>{const S=s(C.column,C.node,C.value);return ce(S)?S:l("blanks","(Blanks)")},treeList:!0,treeListPathGetter:C=>{const S=g(C??void 0);return S?[String(S.getFullYear()),String(S.getMonth()+1),String(S.getDate())]:null},treeListFormatter:(C,S)=>{if(S===1&&C!=null){const A=$c[Number(C)-1];return l(A,Xc[A])}return C??l("blanks","(Blanks)")}}:{comparator:(C,S)=>{const A=g(S);return S==null||A<C?-1:A>C?1:0}});break}case"object":{e.cellEditorParams={useFormatter:!0},e.comparator=(g,C)=>{const S=this.columnModel.getPrimaryColumn(i),A=S?.getColDef();if(!S||!A)return 0;const D=g==null?"":s(S,null,g),M=C==null?"":s(S,null,C);return D===M?0:D>M?1:-1},e.keyCreator=g=>s(g.column,g.node,g.value),n?u({valueFormatter:g=>{const C=s(g.column,g.node,g.value);return ce(C)?C:l("blanks","(Blanks)")}}):e.filterValueGetter=g=>s(g.column,g.node,this.valueService.getValue(g.column,g.node));break}}}getDefaultDataTypes(){const e=i=>!!i.match("^\\d{4}-\\d{2}-\\d{2}$"),t=this.localeService.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:i=>{var s,n;return((n=(s=i.newValue)==null?void 0:s.trim)==null?void 0:n.call(s))===""?null:Number(i.newValue)},valueFormatter:i=>i.value==null?"":typeof i.value!="number"||isNaN(i.value)?t("invalidNumber","Invalid Number"):String(i.value),dataTypeMatcher:i=>typeof i=="number"},text:{baseDataType:"text",valueParser:i=>i.newValue===""?null:Cn(i.newValue),dataTypeMatcher:i=>typeof i=="string"},boolean:{baseDataType:"boolean",valueParser:i=>{var s,n;return i.newValue==null?i.newValue:((n=(s=i.newValue)==null?void 0:s.trim)==null?void 0:n.call(s))===""?null:String(i.newValue).toLowerCase()==="true"},valueFormatter:i=>i.value==null?"":String(i.value),dataTypeMatcher:i=>typeof i=="boolean"},date:{baseDataType:"date",valueParser:i=>ki(i.newValue==null?null:String(i.newValue)),valueFormatter:i=>{var s;return i.value==null?"":!(i.value instanceof Date)||isNaN(i.value.getTime())?t("invalidDate","Invalid Date"):(s=Zi(i.value,!1))!=null?s:""},dataTypeMatcher:i=>i instanceof Date},dateString:{baseDataType:"dateString",dateParser:i=>{var s;return(s=ki(i))!=null?s:void 0},dateFormatter:i=>{var s;return(s=Zi(i??null,!1))!=null?s:void 0},valueParser:i=>e(String(i.newValue))?i.newValue:null,valueFormatter:i=>e(String(i.value))?i.value:"",dataTypeMatcher:i=>typeof i=="string"&&e(i)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:i=>{var s;return(s=Cn(i.value))!=null?s:""}}}}};E([N("rowModel")],Ws.prototype,"rowModel",2);E([N("columnModel")],Ws.prototype,"columnModel",2);E([N("columnUtils")],Ws.prototype,"columnUtils",2);E([N("valueService")],Ws.prototype,"valueService",2);E([N("valueFormatterService")],Ws.prototype,"valueFormatterService",2);E([Ce],Ws.prototype,"init",1);Ws=E([Fe("dataTypeService")],Ws);var Qa=class extends ge{parseValue(e,t,i,s){const n=e.getColDef(),l=this.gridOptionsService.addGridCommonParams({node:t,data:t?.data,oldValue:s,newValue:i,colDef:n,column:e}),u=n.valueParser;return ce(u)?typeof u=="function"?u(l):this.expressionService.evaluate(u,l):i}};E([N("expressionService")],Qa.prototype,"expressionService",2);Qa=E([Fe("valueParserService")],Qa);var Ho=class extends ge{constructor(){super(...arguments),this.waitingForColumns=!1}postConstruct(){this.addManagedPropertyListener("columnDefs",e=>this.setColumnDefs(e))}start(){this.ctrlsService.whenReady(()=>{const e=this.gridOptionsService.get("columnDefs");e?this.setColumnsAndData(e):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(e){this.columnModel.setColumnDefs(e??[],"gridInitializing"),this.rowModel.start()}gridReady(){this.dispatchGridReadyEvent();const e=Rt.__isRegistered("@ag-grid-enterprise/core",this.context.getGridId());new rc("AG Grid",()=>this.gridOptionsService.get("debug")).log(`initialised successfully, enterprise = ${e}`)}dispatchGridReadyEvent(){const e={type:L.EVENT_GRID_READY};this.eventService.dispatchEvent(e)}setColumnDefs(e){const t=this.gridOptionsService.get("columnDefs");if(!!t){if(this.waitingForColumns){this.waitingForColumns=!1,this.setColumnsAndData(t);return}this.columnModel.setColumnDefs(t,ur(e.source))}}};E([N("ctrlsService")],Ho.prototype,"ctrlsService",2);E([N("columnModel")],Ho.prototype,"columnModel",2);E([N("rowModel")],Ho.prototype,"rowModel",2);E([Ce],Ho.prototype,"postConstruct",1);Ho=E([Fe("syncService")],Ho);var Bo=class extends ge{constructor(){super(...arguments),this.manuallyDisplayed=!1}postConstruct(){this.addManagedListener(this.eventService,L.EVENT_ROW_DATA_UPDATED,()=>this.onRowDataUpdated()),this.addManagedListener(this.eventService,L.EVENT_NEW_COLUMNS_LOADED,()=>this.onNewColumnsLoaded())}registerOverlayWrapperComp(e){this.overlayWrapperComp=e,(!this.gridOptionsService.get("columnDefs")||this.gridOptionsService.isRowModelType("clientSide")&&!this.gridOptionsService.get("rowData"))&&this.showLoadingOverlay()}showLoadingOverlay(){if(this.gridOptionsService.get("suppressLoadingOverlay"))return;const e={},t=this.userComponentFactory.getLoadingOverlayCompDetails(e);this.showOverlay(t,"ag-overlay-loading-wrapper","loadingOverlayComponentParams")}showNoRowsOverlay(){if(this.gridOptionsService.get("suppressNoRowsOverlay"))return;const e={},t=this.userComponentFactory.getNoRowsOverlayCompDetails(e);this.showOverlay(t,"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams")}showOverlay(e,t,i){const s=e.newAgStackInstance(),n=this.addManagedPropertyListener(i,({currentValue:l})=>{s.then(u=>{u.refresh&&u.refresh(this.gridOptionsService.addGridCommonParams(We({},l??{})))})});this.manuallyDisplayed=this.columnModel.isReady()&&!this.paginationProxy.isEmpty(),this.overlayWrapperComp.showOverlay(s,t,n)}hideOverlay(){this.manuallyDisplayed=!1,this.overlayWrapperComp.hideOverlay()}showOrHideOverlay(){const e=this.paginationProxy.isEmpty(),t=this.gridOptionsService.get("suppressNoRowsOverlay");e&&!t?this.showNoRowsOverlay():this.hideOverlay()}onRowDataUpdated(){this.showOrHideOverlay()}onNewColumnsLoaded(){this.columnModel.isReady()&&!this.paginationProxy.isEmpty()&&!this.manuallyDisplayed&&this.hideOverlay()}};E([N("userComponentFactory")],Bo.prototype,"userComponentFactory",2);E([N("paginationProxy")],Bo.prototype,"paginationProxy",2);E([N("columnModel")],Bo.prototype,"columnModel",2);E([Ce],Bo.prototype,"postConstruct",1);Bo=E([Fe("overlayService")],Bo);var Ri=class extends ge{constructor(){super(...arguments),this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=Ai(()=>this.dispatchQueuedStateUpdateEvents(),0),this.onRowGroupOpenedDebounced=Ai(()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),0),this.onRowSelectedDebounced=Ai(()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())},0),this.staleStateKeys=new Set}postConstruct(){var e;this.isClientSideRowModel=this.rowModel.getType()==="clientSide",this.cachedState=(e=this.gridOptionsService.get("initialState"))!=null?e:{},this.ctrlsService.whenReady(()=>this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnGridReady()));const t=this.addManagedListener(this.eventService,L.EVENT_NEW_COLUMNS_LOADED,({source:n})=>{n==="gridInitializing"&&(t?.(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnColumnsInitialised()))}),i=this.addManagedListener(this.eventService,L.EVENT_ROW_COUNT_READY,()=>{i?.(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnRowCountReady())}),s=this.addManagedListener(this.eventService,L.EVENT_FIRST_DATA_RENDERED,()=>{s?.(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnFirstDataRendered())})}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setupStateOnGridReady(){this.updateCachedState("sideBar",this.getSideBarState()),this.addManagedListener(this.eventService,L.EVENT_TOOL_PANEL_VISIBLE_CHANGED,()=>this.updateCachedState("sideBar",this.getSideBarState())),this.addManagedListener(this.eventService,L.EVENT_SIDE_BAR_UPDATED,()=>this.updateCachedState("sideBar",this.getSideBarState()))}setupStateOnColumnsInitialised(){var e;const t=(e=this.gridOptionsService.get("initialState"))!=null?e:{};this.setColumnState(t),this.setColumnGroupState(t),this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState()),this.addManagedListener(this.eventService,L.EVENT_COLUMN_VALUE_CHANGED,()=>this.updateColumnState(["aggregation"])),this.addManagedListener(this.eventService,L.EVENT_COLUMN_MOVED,()=>this.updateColumnState(["columnOrder"])),this.addManagedListener(this.eventService,L.EVENT_COLUMN_PINNED,()=>this.updateColumnState(["columnPinning"])),this.addManagedListener(this.eventService,L.EVENT_COLUMN_RESIZED,()=>this.updateColumnState(["columnSizing"])),this.addManagedListener(this.eventService,L.EVENT_COLUMN_VISIBLE,()=>this.updateColumnState(["columnVisibility"])),this.addManagedListener(this.eventService,L.EVENT_COLUMN_PIVOT_CHANGED,()=>this.updateColumnState(["pivot"])),this.addManagedListener(this.eventService,L.EVENT_COLUMN_PIVOT_MODE_CHANGED,()=>this.updateColumnState(["pivot"])),this.addManagedListener(this.eventService,L.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.updateColumnState(["rowGroup"])),this.addManagedListener(this.eventService,L.EVENT_SORT_CHANGED,()=>this.updateColumnState(["sort"])),this.addManagedListener(this.eventService,L.EVENT_NEW_COLUMNS_LOADED,()=>this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"])),this.addManagedListener(this.eventService,L.EVENT_COLUMN_GROUP_OPENED,()=>this.updateCachedState("columnGroup",this.getColumnGroupState()))}setupStateOnRowCountReady(){var e;const{filter:t,rowGroupExpansion:i,rowSelection:s,pagination:n}=(e=this.gridOptionsService.get("initialState"))!=null?e:{},l=this.gridOptionsService.get("advancedFilterModel");(t||l)&&this.setFilterState(t,l),i&&this.setRowGroupExpansionState(i),s&&this.setRowSelectionState(s),n&&this.setPaginationState(n),this.updateCachedState("filter",this.getFilterState()),this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("rowSelection",this.getRowSelectionState()),this.updateCachedState("pagination",this.getPaginationState()),this.addManagedListener(this.eventService,L.EVENT_FILTER_CHANGED,()=>this.updateCachedState("filter",this.getFilterState())),this.addManagedListener(this.eventService,L.EVENT_ROW_GROUP_OPENED,()=>this.onRowGroupOpenedDebounced()),this.addManagedListener(this.eventService,L.EVENT_EXPAND_COLLAPSE_ALL,()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState())),this.addManagedListener(this.eventService,L.EVENT_SELECTION_CHANGED,()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()}),this.addManagedListener(this.eventService,L.EVENT_PAGINATION_CHANGED,u=>{(u.newPage||u.newPageSize)&&this.updateCachedState("pagination",this.getPaginationState())})}setupStateOnFirstDataRendered(){var e;const{scroll:t,rangeSelection:i,focusedCell:s,columnOrder:n}=(e=this.gridOptionsService.get("initialState"))!=null?e:{};s&&this.setFocusedCellState(s),i&&this.setRangeSelectionState(i),t&&this.setScrollState(t),this.setColumnPivotState(!!n?.orderedColIds),this.updateCachedState("sideBar",this.getSideBarState()),this.updateCachedState("focusedCell",this.getFocusedCellState()),this.updateCachedState("rangeSelection",this.getRangeSelectionState()),this.updateCachedState("scroll",this.getScrollState()),this.addManagedListener(this.eventService,L.EVENT_CELL_FOCUSED,()=>this.updateCachedState("focusedCell",this.getFocusedCellState())),this.addManagedListener(this.eventService,L.EVENT_RANGE_SELECTION_CHANGED,l=>{l.finished&&this.updateCachedState("rangeSelection",this.getRangeSelectionState())}),this.addManagedListener(this.eventService,L.EVENT_BODY_SCROLL_END,()=>this.updateCachedState("scroll",this.getScrollState()))}getColumnState(){const e=this.columnModel.isPivotMode(),t=[],i=[],s=[],n=[],l=[],u=[],g=[],C=[],S=[],A=this.columnModel.getColumnState();for(let D=0;D<A.length;D++){const{colId:M,sort:W,sortIndex:z,rowGroup:U,rowGroupIndex:X,aggFunc:q,pivot:_,pivotIndex:J,pinned:se,hide:$,width:Y,flex:oe}=A[D];S.push(M),W&&(t[z??0]={colId:M,sort:W}),U&&(i[X??0]=M),typeof q=="string"&&s.push({colId:M,aggFunc:q}),_&&(n[J??0]=M),se&&(se==="right"?u:l).push(M),$&&g.push(M),(oe||Y)&&C.push({colId:M,flex:oe??void 0,width:Y})}return{sort:t.length?{sortModel:t}:void 0,rowGroup:i.length?{groupColIds:i}:void 0,aggregation:s.length?{aggregationModel:s}:void 0,pivot:n.length||e?{pivotMode:e,pivotColIds:n}:void 0,columnPinning:l.length||u.length?{leftColIds:l,rightColIds:u}:void 0,columnVisibility:g.length?{hiddenColIds:g}:void 0,columnSizing:C.length?{columnSizingModel:C}:void 0,columnOrder:S.length?{orderedColIds:S}:void 0}}setColumnState(e){const{sort:t,rowGroup:i,aggregation:s,pivot:n,columnPinning:l,columnVisibility:u,columnSizing:g,columnOrder:C}=e,S={},A=z=>{let U=S[z];return U||(U={colId:z},S[z]=U,U)};t&&t.sortModel.forEach(({colId:z,sort:U},X)=>{const q=A(z);q.sort=U,q.sortIndex=X}),i&&i.groupColIds.forEach((z,U)=>{const X=A(z);X.rowGroup=!0,X.rowGroupIndex=U}),s&&s.aggregationModel.forEach(({colId:z,aggFunc:U})=>{A(z).aggFunc=U}),n&&(n.pivotColIds.forEach((z,U)=>{const X=A(z);X.pivot=!0,X.pivotIndex=U}),this.gridOptionsService.updateGridOptions({options:{pivotMode:n.pivotMode},source:"gridInitializing"})),l&&(l.leftColIds.forEach(z=>{A(z).pinned="left"}),l.rightColIds.forEach(z=>{A(z).pinned="right"})),u&&u.hiddenColIds.forEach(z=>{A(z).hide=!0}),g&&g.columnSizingModel.forEach(({colId:z,flex:U,width:X})=>{const q=A(z);q.flex=U??null,q.width=X});const D=C?.orderedColIds,M=!!D?.length,W=M?D.map(z=>A(z)):Object.values(S);if(W.length){this.columnStates=W;const z={sort:null,sortIndex:null,rowGroup:null,rowGroupIndex:null,aggFunc:null,pivot:null,pivotIndex:null,pinned:null,hide:null,flex:null};this.columnModel.applyColumnState({state:W,applyOrder:M,defaultState:z},"gridInitializing")}}setColumnPivotState(e){const t=this.columnStates;this.columnStates=void 0;const i=this.columnGroupStates;if(this.columnGroupStates=void 0,!!this.columnModel.isSecondaryColumnsPresent()){if(t){let s=[];for(const n of t)this.columnModel.getSecondaryColumn(n.colId)&&s.push(n);this.columnModel.applyColumnState({state:s,applyOrder:e},"gridInitializing")}i&&this.columnModel.setColumnGroupState(i,"gridInitializing")}}getColumnGroupState(){const e=this.columnModel.getColumnGroupState(),t=[];return e.forEach(({groupId:i,open:s})=>{s&&t.push(i)}),t.length?{openColumnGroupIds:t}:void 0}setColumnGroupState(e){var t;if(!e.hasOwnProperty("columnGroup"))return;const i=new Set((t=e.columnGroup)==null?void 0:t.openColumnGroupIds),n=this.columnModel.getColumnGroupState().map(({groupId:l})=>{const u=i.has(l);return u&&i.delete(l),{groupId:l,open:u}});i.forEach(l=>{n.push({groupId:l,open:!0})}),n.length&&(this.columnGroupStates=n),this.columnModel.setColumnGroupState(n,"gridInitializing")}getFilterState(){var e;let t=this.filterManager.getFilterModel();t&&Object.keys(t).length===0&&(t=void 0);const i=(e=this.filterManager.getAdvancedFilterModel())!=null?e:void 0;return t||i?{filterModel:t,advancedFilterModel:i}:void 0}setFilterState(e,t){const{filterModel:i,advancedFilterModel:s}=e??{advancedFilterModel:t};i&&this.filterManager.setFilterModel(i,"columnFilter"),s&&this.filterManager.setAdvancedFilterModel(s)}getRangeSelectionState(){var e;const t=(e=this.rangeService)==null?void 0:e.getCellRanges().map(i=>{const{id:s,type:n,startRow:l,endRow:u,columns:g,startColumn:C}=i;return{id:s,type:n,startRow:l,endRow:u,colIds:g.map(S=>S.getColId()),startColId:C.getColId()}});return t?.length?{cellRanges:t}:void 0}setRangeSelectionState(e){var t;if(!this.gridOptionsService.get("enableRangeSelection"))return;const i=e.cellRanges.map(s=>Vt(We({},s),{columns:s.colIds.map(n=>this.columnModel.getGridColumn(n)),startColumn:this.columnModel.getGridColumn(s.startColId)}));(t=this.rangeService)==null||t.setCellRanges(i)}getScrollState(){var e,t,i;if(!this.isClientSideRowModel)return;const s=(e=this.ctrlsService.getGridBodyCtrl())==null?void 0:e.getScrollFeature(),{left:n}=(t=s?.getHScrollPosition())!=null?t:{left:0},{top:l}=(i=s?.getVScrollPosition())!=null?i:{top:0};return l||n?{top:l,left:n}:void 0}setScrollState(e){var t;if(!this.isClientSideRowModel)return;const{top:i,left:s}=e;(t=this.ctrlsService.getGridBodyCtrl())==null||t.getScrollFeature().setScrollPosition(i,s)}getSideBarState(){var e,t;return(t=(e=this.sideBarService)==null?void 0:e.getSideBarComp())==null?void 0:t.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;const e=this.focusService.getFocusedCell();if(e){const{column:t,rowIndex:i,rowPinned:s}=e;return{colId:t.getColId(),rowIndex:i,rowPinned:s}}}setFocusedCellState(e){if(!this.isClientSideRowModel)return;const{colId:t,rowIndex:i,rowPinned:s}=e;this.focusService.setFocusedCell({column:this.columnModel.getGridColumn(t),rowIndex:i,rowPinned:s,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){const e=this.paginationProxy.getCurrentPage(),t=this.gridOptionsService.get("paginationAutoPageSize")?void 0:this.paginationProxy.getPageSize();if(!(!e&&!t))return{page:e,pageSize:t}}setPaginationState(e){e.pageSize&&!this.gridOptionsService.get("paginationAutoPageSize")&&this.paginationProxy.setPageSize(e.pageSize,"initialState"),typeof e.page=="number"&&this.paginationProxy.setPage(e.page)}getRowSelectionState(){var e;const t=this.selectionService.getSelectionState();return!t||!Array.isArray(t)&&(t.selectAll===!1||t.selectAllChildren===!1)&&!((e=t?.toggledNodes)!=null&&e.length)?void 0:t}setRowSelectionState(e){this.selectionService.setSelectionState(e,"gridInitializing")}getRowGroupExpansionState(){const e=this.expansionService.getExpandedRows();return e.length?{expandedRowGroupIds:e}:void 0}setRowGroupExpansionState(e){this.expansionService.expandRows(e.expandedRowGroupIds)}updateColumnState(e){const t=this.getColumnState();let i=!1;Object.entries(t).forEach(([s,n])=>{bd(n,this.cachedState[s])||(i=!0)}),this.cachedState=We(We({},this.cachedState),t),i&&this.dispatchStateUpdateEvent(e)}updateCachedState(e,t){const i=this.cachedState[e];this.setCachedStateValue(e,t),bd(t,i)||this.dispatchStateUpdateEvent([e])}setCachedStateValue(e,t){this.cachedState=Vt(We({},this.cachedState),{[e]:t})}refreshStaleState(){this.staleStateKeys.forEach(e=>{switch(e){case"rowSelection":this.setCachedStateValue(e,this.getRowSelectionState());break}}),this.staleStateKeys.clear()}dispatchStateUpdateEvent(e){this.suppressEvents||(e.forEach(t=>this.queuedUpdateSources.add(t)),this.dispatchStateUpdateEventDebounced())}dispatchQueuedStateUpdateEvents(){const e=Array.from(this.queuedUpdateSources);this.queuedUpdateSources.clear();const t={type:L.EVENT_STATE_UPDATED,sources:e,state:this.cachedState};this.eventService.dispatchEvent(t)}suppressEventsAndDispatchInitEvent(e){this.suppressEvents=!0,this.columnAnimationService.setSuppressAnimation(!0),e(),setTimeout(()=>{this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&(this.columnAnimationService.setSuppressAnimation(!1),this.dispatchStateUpdateEvent(["gridInitializing"]))})}};E([N("filterManager")],Ri.prototype,"filterManager",2);E([mt("rangeService")],Ri.prototype,"rangeService",2);E([N("ctrlsService")],Ri.prototype,"ctrlsService",2);E([mt("sideBarService")],Ri.prototype,"sideBarService",2);E([N("focusService")],Ri.prototype,"focusService",2);E([N("columnModel")],Ri.prototype,"columnModel",2);E([N("paginationProxy")],Ri.prototype,"paginationProxy",2);E([N("rowModel")],Ri.prototype,"rowModel",2);E([N("selectionService")],Ri.prototype,"selectionService",2);E([N("expansionService")],Ri.prototype,"expansionService",2);E([N("columnAnimationService")],Ri.prototype,"columnAnimationService",2);E([Ce],Ri.prototype,"postConstruct",1);Ri=E([Fe("stateService")],Ri);var Vn=class extends ge{init(){this.processGridOptions(this.gridOptions)}processGridOptions(e){this.processOptions(e,dw)}processColumnDefs(e){this.processOptions(e,pr)}processOptions(e,t){const{validations:i,deprecations:s,allProperties:n,propertyExceptions:l,objectName:u,docsUrl:g}=t;n&&this.gridOptions.suppressPropertyNamesCheck!==!0&&this.checkProperties(e,[...l??[],...Object.keys(s)],n,u,g);const C=new Set;Object.keys(e).forEach(A=>{var D;const M=s[A];if(M)if("renamed"in M){const{renamed:J,version:se}=M;C.add(`As of v${se}, ${String(A)} is deprecated. Please use ${String(J)} instead.`),e[J]=e[A]}else{const{message:J,version:se}=M;C.add(`As of v${se}, ${String(A)} is deprecated. ${J??""}`)}const W=e[A];if(W==null||W===!1)return;const z=i[A];let U;if(z)if(typeof z=="function"){const J=z(e,this.gridOptions);if(!J)return;if("objectName"in J){const se=e[A];if(Array.isArray(se)){se.forEach($=>{this.processOptions($,J)});return}this.processOptions(e[A],J);return}U=J}else U=z;else return;const{module:X,dependencies:q,supportedRowModels:_}=U;if(_){const J=(D=this.gridOptions.rowModelType)!=null?D:"clientSide";if(!_.includes(J)){C.add(`${String(A)} is not supported with the '${J}' row model.`);return}}if(X){const J=Array.isArray(X)?X:[X];let se=!0;if(J.forEach($=>{Rt.__assertRegistered($,String(A),this.context.getGridId())||(se=!1,C.add(`${String(A)} is only available when ${$} is loaded.`))}),!se)return}if(q){const J=this.checkForWarning(A,q,e);if(J){C.add(J);return}}}),C.size>0&&C.forEach(A=>{Ue(A)})}checkForWarning(e,t,i){if(typeof t=="function")return t(i,this.gridOptions);const n=Object.entries(t).find(([g,C])=>{const S=i[g];return!C.includes(S)});if(!n)return null;const[l,u]=n;return u.length>1?`'${String(e)}' requires '${l}' to be one of [${u.join(", ")}].`:`'${String(e)}' requires '${l}' to be ${u[0]}.`}checkProperties(e,t,i,s,n){const l=["__ob__","__v_skip","__metadata__"],u=Mp(Object.getOwnPropertyNames(e),[...l,...t,...i],i);if(bi(u,(g,C)=>{Ue(`invalid ${s} property '${g}' did you mean any of these: ${C.slice(0,8).join(", ")}`)}),Object.keys(u).length>0&&n){const g=this.getFrameworkOverrides().getDocLink(n);Ue(`to see all the valid ${s} properties please check: ${g}`)}}};E([N("gridOptions")],Vn.prototype,"gridOptions",2);E([Ce],Vn.prototype,"init",1);Vn=E([Fe("validationService")],Vn);var Za=class extends ge{constructor(){super(...arguments),this.syncEventListeners=new Map,this.asyncEventListeners=new Map,this.syncGlobalEventListeners=new Set,this.globalEventListenerPairs=new Map}postConstruct(){this.frameworkEventWrappingService=new dh(this.getFrameworkOverrides())}addEventListener(e,t){const i=this.frameworkEventWrappingService.wrap(t),s=this.gridOptionsService.useAsyncEvents()&&!Ea.has(e),n=s?this.asyncEventListeners:this.syncEventListeners;n.has(e)||n.set(e,new Set),n.get(e).add(i),this.eventService.addEventListener(e,i,s)}removeEventListener(e,t){var i;const s=this.frameworkEventWrappingService.unwrap(t),n=this.asyncEventListeners.get(e),l=!!n?.delete(s);l||(i=this.syncEventListeners.get(e))==null||i.delete(s),this.eventService.removeEventListener(e,s,l)}addGlobalListener(e){const t=this.frameworkEventWrappingService.wrapGlobal(e);if(this.gridOptionsService.useAsyncEvents()){const s=(l,u)=>{Ea.has(l)&&t(l,u)},n=(l,u)=>{Ea.has(l)||t(l,u)};this.globalEventListenerPairs.set(e,{syncListener:s,asyncListener:n}),this.eventService.addGlobalListener(s,!1),this.eventService.addGlobalListener(n,!0)}else this.syncGlobalEventListeners.add(t),this.eventService.addGlobalListener(t,!1)}removeGlobalListener(e){const t=this.frameworkEventWrappingService.unwrapGlobal(e);if(this.globalEventListenerPairs.has(t)){const{syncListener:s,asyncListener:n}=this.globalEventListenerPairs.get(t);this.eventService.removeGlobalListener(s,!1),this.eventService.removeGlobalListener(n,!0),this.globalEventListenerPairs.delete(e)}else this.syncGlobalEventListeners.delete(t),this.eventService.removeGlobalListener(t,!1)}destroyEventListeners(e,t){e.forEach((i,s)=>{i.forEach(n=>this.eventService.removeEventListener(s,n,t)),i.clear()}),e.clear()}destroyGlobalListeners(e,t){e.forEach(i=>this.eventService.removeGlobalListener(i,t)),e.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncEventListeners,!1),this.destroyEventListeners(this.asyncEventListeners,!0),this.destroyGlobalListeners(this.syncGlobalEventListeners,!1),this.globalEventListenerPairs.forEach(({syncListener:e,asyncListener:t})=>{this.eventService.removeGlobalListener(e,!1),this.eventService.removeGlobalListener(t,!0)}),this.globalEventListenerPairs.clear()}};E([Ce],Za.prototype,"postConstruct",1);Za=E([Fe("apiEventService")],Za);var da=class extends Ze{constructor(){super('<span class="ag-paging-page-size"></span>'),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;const e=this.selectPageSizeComp.getValue();if(!e)return;const t=Number(e);isNaN(t)||t<1||t===this.paginationProxy.getPageSize()||(this.paginationProxy.setPageSize(t,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}init(){this.addManagedPropertyListener("paginationPageSizeSelector",()=>{this.onPageSizeSelectorValuesChange()}),this.addManagedListener(this.eventService,L.EVENT_PAGINATION_CHANGED,e=>this.handlePaginationChanged(e))}handlePaginationChanged(e){if(!this.selectPageSizeComp||!e?.newPageSize)return;const t=this.paginationProxy.getPageSize();this.getPageSizeSelectorValues().includes(t)?this.selectPageSizeComp.setValue(t.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(e){this.selectPageSizeComp&&this.reset(),e&&(this.reloadPageSizesSelector(),this.selectPageSizeComp&&this.appendChild(this.selectPageSizeComp))}reset(){Jt(this.getGui()),this.selectPageSizeComp&&(this.destroyBean(this.selectPageSizeComp),this.selectPageSizeComp=void 0)}onPageSizeSelectorValuesChange(){!this.selectPageSizeComp||this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gridOptionsService.get("pagination")&&!this.gridOptionsService.get("suppressPaginationPanel")&&!this.gridOptionsService.get("paginationAutoPageSize")&&this.gridOptionsService.get("paginationPageSizeSelector")!==!1}reloadPageSizesSelector(){const e=this.getPageSizeSelectorValues(),t=this.paginationProxy.getPageSize(),i=!t||!e.includes(t);i&&(e.unshift(""),Ue(`The paginationPageSize grid option is set to a value that is not in the list of page size options.
                Please make sure that the paginationPageSize grid option is set to one of the values in the 
                paginationPageSizeSelector array, or set the paginationPageSizeSelector to false to hide the page size selector.`)),this.selectPageSizeComp&&(this.destroyBean(this.selectPageSizeComp),this.selectPageSizeComp=void 0);const s=this.localeService.getLocaleTextFunc(),n=s("pageSizeSelectorLabel","Page Size:"),l=e.map(g=>({value:String(g),text:String(g)})),u=s("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new vl).addOptions(l).setValue(String(i?"":t)).setAriaLabel(u).setLabel(n).onValueChange(()=>this.handlePageSizeItemSelected()),this.hasEmptyOption=i}getPageSizeSelectorValues(){const e=[20,50,100],t=this.gridOptionsService.get("paginationPageSizeSelector");return!Array.isArray(t)||!this.validateValues(t)?e:[...t].sort((i,s)=>i-s)}validateValues(e){if(!e.length)return Ue(`The paginationPageSizeSelector grid option is an empty array. This is most likely a mistake.
                If you want to hide the page size selector, please set the paginationPageSizeSelector to false.`),!1;for(let t=0;t<e.length;t++){const i=e[t],s=typeof i=="number",n=i>0;if(!s)return Ue(`The paginationPageSizeSelector grid option contains a non-numeric value.
                    Please make sure that all values in the paginationPageSizeSelector array are numbers.`),!1;if(!n)return Ue(`The paginationPageSizeSelector grid option contains a negative number or zero.
                    Please make sure that all values in the paginationPageSizeSelector array are positive.`),!1}return!0}destroy(){this.toggleSelectDisplay(!1),super.destroy()}};E([N("localeService")],da.prototype,"localeService",2);E([N("gridOptionsService")],da.prototype,"gridOptionsService",2);E([N("paginationProxy")],da.prototype,"paginationProxy",2);E([Ce],da.prototype,"init",1);var Hn=class extends ge{constructor(){super(),this.descriptionContainer=null,this.announceValue=Ai(this.announceValue.bind(this),200)}postConstruct(){const e=this.gridOptionsService.getDocument(),t=this.descriptionContainer=e.createElement("div");t.classList.add("ag-aria-description-container"),ph(t,"polite"),rp(t,"additions text"),op(t,!0),this.eGridDiv.appendChild(t)}announceValue(e){!this.descriptionContainer||(this.descriptionContainer.textContent="",setTimeout(()=>{this.isAlive()&&this.descriptionContainer&&(this.descriptionContainer.textContent=e)},50))}destroy(){super.destroy();const{descriptionContainer:e}=this;e&&(Jt(e),e.parentElement&&e.parentElement.removeChild(e)),this.descriptionContainer=null,this.eGridDiv=null}};E([N("eGridDiv")],Hn.prototype,"eGridDiv",2);E([Ce],Hn.prototype,"postConstruct",1);Hn=E([Fe("ariaAnnouncementService")],Hn);function cw(e,t,i){if(!t)return ys("No gridOptions provided to createGrid"),{};const s=Et.getCoercedGridOptions(t),n=new pw().create(e,s,l=>{const u=new Xr(e);l.createBean(u)},void 0,i);if(!Object.isFrozen(t)&&!i?.frameworkOverrides){const l="https://ag-grid.com/javascript-data-grid/grid-interface/#grid-api";Object.defineProperty(t,"api",{get:()=>{ys(`gridOptions.api is no longer supported. See ${l}.`)},configurable:!0}),Object.defineProperty(t,"columnApi",{get:()=>{ys(`gridOptions.columnApi is no longer supported and all methods moved to the grid api. See ${l}.`)},configurable:!0})}return n}var uw=1,pw=class{create(e,t,i,s,n){var l;const u=!!t.debug,g=(l=t.gridId)!=null?l:String(uw++),C=this.getRegisteredModules(n,g),S=this.createBeansList(t.rowModelType,C,g),A=this.createProvidedBeans(e,t,n);if(!S){ys("Failed to create grid.");return}const D={providedBeanInstances:A,beanClasses:S,debug:u,gridId:g},M=new rc("Context",()=>D.debug),W=new xC(D,M),z=W.getBean("beans");return this.registerModuleUserComponents(z,C),this.registerStackComponents(z,C),this.registerControllers(z,C),i(W),z.syncService.start(),s&&s(W),z.gridApi}registerControllers(e,t){t.forEach(i=>{i.controllers&&i.controllers.forEach(s=>e.ctrlsFactory.register(s))})}registerStackComponents(e,t){const i=this.createAgStackComponentsList(t);e.agStackComponentsRegistry.setupComponents(i)}getRegisteredModules(e,t){const i=e?e.modules:null,s=Rt.__getRegisteredModules(t),n=[],l={},u=(g,C,S)=>{(D=>{l[D.moduleName]||(l[D.moduleName]=!0,n.push(D),Rt.__register(D,g,S))})(C),C.dependantModules&&C.dependantModules.forEach(D=>u(g,D,S))};return i&&i.forEach(g=>u(!0,g,t)),s&&s.forEach(g=>u(!Rt.__isPackageBased(),g,void 0)),n}registerModuleUserComponents(e,t){this.extractModuleEntity(t,s=>s.userComponents?s.userComponents:[]).forEach(s=>{e.userComponentRegistry.registerDefaultComponent(s.componentName,s.componentClass)})}createProvidedBeans(e,t,i){let s=i?i.frameworkOverrides:null;Xe(s)&&(s=new qg);const n={gridOptions:t,eGridDiv:e,globalEventListener:i?i.globalEventListener:null,globalSyncEventListener:i?i.globalSyncEventListener:null,frameworkOverrides:s};return i&&i.providedBeanInstances&&Object.assign(n,i.providedBeanInstances),n}createAgStackComponentsList(e){let t=[{componentName:"AgCheckbox",componentClass:Cl},{componentName:"AgRadioButton",componentClass:qp},{componentName:"AgToggleButton",componentClass:Ug},{componentName:"AgInputTextField",componentClass:Yo},{componentName:"AgInputTextArea",componentClass:Gb},{componentName:"AgInputNumberField",componentClass:Bh},{componentName:"AgInputDateField",componentClass:_b},{componentName:"AgInputRange",componentClass:Vb},{componentName:"AgRichSelect",componentClass:sc},{componentName:"AgSelect",componentClass:vl},{componentName:"AgSlider",componentClass:Bb},{componentName:"AgGridBody",componentClass:Os},{componentName:"AgHeaderRoot",componentClass:Ob},{componentName:"AgSortIndicator",componentClass:zh},{componentName:"AgPagination",componentClass:Vi},{componentName:"AgPageSizeSelector",componentClass:da},{componentName:"AgOverlayWrapper",componentClass:iw},{componentName:"AgGroupComponent",componentClass:Wb},{componentName:"AgRowContainer",componentClass:_r},{componentName:"AgFakeHorizontalScroll",componentClass:sw},{componentName:"AgFakeVerticalScroll",componentClass:hw},{componentName:"AgAutocomplete",componentClass:jb}];const i=this.extractModuleEntity(e,s=>s.agStackComponents?s.agStackComponents:[]);return t=t.concat(i),t}createBeansList(e="clientSide",t,i){const s=t.filter(C=>!C.rowModel||C.rowModel===e),n={clientSide:"@ag-grid-community/client-side-row-model",infinite:"@ag-grid-community/infinite-row-model",serverSide:"@ag-grid-enterprise/server-side-row-model",viewport:"@ag-grid-enterprise/viewport-row-model"};if(!n[e]){ys("Could not find row model for rowModelType = "+e);return}if(!Rt.__assertRegistered(n[e],`rowModelType = '${e}'`,i))return;const l=[Qe,Lr,Ud,Nn,Dr,nt,Rn,qa,On,_d,ao,Pr,Tn,$d,Vn,Fn,Dn,Dd,ps,Et,Bs,_o,es,di,ko,Ln,Yi,$a,br,Wd,Go,wi,Ka,co,ja,Rd,No,lo,Je,Mn,Ft,Vs,kn,ho,Ya,Xa,Ar,Vo,zd,In,Fr,bn,Tr,Rr,ts,Td,Yd,Gn,Ps,Mr,fn,_n,Ir,Xd,Ws,Qa,Gi,Ho,Bo,Ri,Pn,Za,Hn,ms],u=this.extractModuleEntity(s,C=>C.beans?C.beans:[]);l.push(...u);const g=[];return l.forEach(C=>{g.indexOf(C)<0&&g.push(C)}),g}extractModuleEntity(e,t){return[].concat(...e.map(t))}},gw=class{wrap(e,t,i=[],s){const n=this.createWrapper(e,s);return t.forEach(l=>{this.createMethod(n,l,!0)}),i.forEach(l=>{this.createMethod(n,l,!1)}),n}unwrap(e){return e}createMethod(e,t,i){e.addMethod(t,this.createMethodProxy(e,t,i))}createMethodProxy(e,t,i){return function(){return e.hasMethod(t)?e.callMethod(t,arguments):(i&&console.warn("AG Grid: Framework component is missing the method "+t+"()"),null)}}},$r=typeof global>"u"?{}:global;$r.HTMLElement=typeof HTMLElement>"u"?{}:HTMLElement;$r.HTMLButtonElement=typeof HTMLButtonElement>"u"?{}:HTMLButtonElement;$r.HTMLSelectElement=typeof HTMLSelectElement>"u"?{}:HTMLSelectElement;$r.HTMLInputElement=typeof HTMLInputElement>"u"?{}:HTMLInputElement;$r.Node=typeof Node>"u"?{}:Node;$r.MouseEvent=typeof MouseEvent>"u"?{}:MouseEvent;var ac=class un{constructor(t,i,s,n,l,u){this.nextId=0,this.rowCountReady=!1,this.allNodesMap={},this.rootNode=t,this.gridOptionsService=i,this.eventService=s,this.columnModel=n,this.beans=u,this.selectionService=l,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=un.ROOT_NODE_ID,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterAggFilter=[],this.rootNode.childrenAfterFilter=[]}getCopyOfNodesMap(){return ot.cloneObject(this.allNodesMap)}getRowNode(t){return this.allNodesMap[t]}setRowData(t){if(typeof t=="string"){console.warn("AG Grid: rowData must be an array, however you passed in a string. If you are loading JSON, make sure you convert the JSON string to JavaScript objects first");return}this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(t);const i=this.rootNode,s=this.rootNode.sibling;i.childrenAfterFilter=null,i.childrenAfterGroup=null,i.childrenAfterAggFilter=null,i.childrenAfterSort=null,i.childrenMapped=null,i.updateHasChildren(),this.nextId=0,this.allNodesMap={},t?i.allLeafChildren=t.map(n=>this.createNode(n,this.rootNode,un.TOP_LEVEL)):(i.allLeafChildren=[],i.childrenAfterGroup=[]),s&&(s.childrenAfterFilter=i.childrenAfterFilter,s.childrenAfterGroup=i.childrenAfterGroup,s.childrenAfterAggFilter=i.childrenAfterAggFilter,s.childrenAfterSort=i.childrenAfterSort,s.childrenMapped=i.childrenMapped,s.allLeafChildren=i.allLeafChildren)}updateRowData(t,i){this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(t.add);const s={remove:[],update:[],add:[]},n=[];return this.executeRemove(t,s,n),this.executeUpdate(t,s,n),this.executeAdd(t,s),this.updateSelection(n,"rowDataChanged"),i&&ot.sortRowNodesByOrder(this.rootNode.allLeafChildren,i),s}isRowCountReady(){return this.rowCountReady}dispatchRowDataUpdateStartedEvent(t){const i={type:L.EVENT_ROW_DATA_UPDATE_STARTED,firstRowData:t?.length?t[0]:null};this.eventService.dispatchEvent(i)}updateSelection(t,i){const s=t.length>0;if(s&&this.selectionService.setNodesSelected({newValue:!1,nodes:t,suppressFinishActions:!0,source:i}),this.selectionService.updateGroupsFromChildrenSelections(i),s){const n={type:L.EVENT_SELECTION_CHANGED,source:i};this.eventService.dispatchEvent(n)}}executeAdd(t,i){var s;const{add:n,addIndex:l}=t;if(ot.missingOrEmpty(n))return;const u=n.map(g=>this.createNode(g,this.rootNode,un.TOP_LEVEL));if(typeof l=="number"&&l>=0){const{allLeafChildren:g}=this.rootNode,C=g.length;let S=l;if(this.gridOptionsService.get("treeData")&&l>0&&C>0){for(let W=0;W<C;W++)if(((s=g[W])==null?void 0:s.rowIndex)==l-1){S=W+1;break}}const D=g.slice(0,S),M=g.slice(S,g.length);this.rootNode.allLeafChildren=[...D,...u,...M]}else this.rootNode.allLeafChildren=[...this.rootNode.allLeafChildren,...u];this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren),i.add=u}executeRemove(t,i,s){const{remove:n}=t;if(ot.missingOrEmpty(n))return;const l={};n.forEach(u=>{const g=this.lookupRowNode(u);!g||(g.isSelected()&&s.push(g),g.clearRowTopAndRowIndex(),l[g.id]=!0,delete this.allNodesMap[g.id],i.remove.push(g))}),this.rootNode.allLeafChildren=this.rootNode.allLeafChildren.filter(u=>!l[u.id]),this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren)}executeUpdate(t,i,s){const{update:n}=t;ot.missingOrEmpty(n)||n.forEach(l=>{const u=this.lookupRowNode(l);!u||(u.updateData(l),!u.selectable&&u.isSelected()&&s.push(u),this.setMasterForRow(u,l,un.TOP_LEVEL,!1),i.update.push(u))})}lookupRowNode(t){const i=this.gridOptionsService.getCallback("getRowId");let s;if(i){const n=i({data:t,level:0});if(s=this.allNodesMap[n],!s)return console.error(`AG Grid: could not find row id=${n}, data item was not found for this id`),null}else if(s=this.rootNode.allLeafChildren.find(n=>n.data===t),!s)return console.error("AG Grid: could not find data item as object was not found",t),console.error("Consider using getRowId to help the Grid find matching row data"),null;return s||null}createNode(t,i,s){const n=new st(this.beans);n.group=!1,this.setMasterForRow(n,t,s,!0);const l=this.gridOptionsService.get("suppressParentsInRowNodes");return i&&!l&&(n.parent=i),n.level=s,n.setDataAndId(t,this.nextId.toString()),this.allNodesMap[n.id]&&console.warn(`AG Grid: duplicate node id '${n.id}' detected from getRowId callback, this could cause issues in your grid.`),this.allNodesMap[n.id]=n,this.nextId++,n}setMasterForRow(t,i,s,n){if(this.gridOptionsService.get("treeData"))t.setMaster(!1),n&&(t.expanded=!1);else{if(this.gridOptionsService.get("masterDetail")){const g=this.gridOptionsService.get("isRowMaster");g?t.setMaster(g(i)):t.setMaster(!0)}else t.setMaster(!1);if(n){const g=this.columnModel.getRowGroupColumns(),C=g?g.length:0,S=s+C;t.expanded=t.master?this.isExpanded(S):!1}}}isExpanded(t){const i=this.gridOptionsService.get("groupDefaultExpanded");return i===-1?!0:t<i}};ac.TOP_LEVEL=0;ac.ROOT_NODE_ID="ROOT_NODE_ID";var fw=ac,xi=class extends ge{constructor(){super(...arguments),this.onRowHeightChanged_debounced=ot.debounce(this.onRowHeightChanged.bind(this),100),this.rowsToDisplay=[],this.hasStarted=!1,this.shouldSkipSettingDataOnStart=!1,this.isRefreshingModel=!1,this.rowCountReady=!1}init(){const e=this.refreshModel.bind(this,{step:"group"}),t=!this.gridOptionsService.get("suppressAnimationFrame"),i=this.refreshModel.bind(this,{step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:t});this.addManagedListener(this.eventService,L.EVENT_NEW_COLUMNS_LOADED,i),this.addManagedListener(this.eventService,L.EVENT_COLUMN_ROW_GROUP_CHANGED,e),this.addManagedListener(this.eventService,L.EVENT_COLUMN_VALUE_CHANGED,this.onValueChanged.bind(this)),this.addManagedListener(this.eventService,L.EVENT_COLUMN_PIVOT_CHANGED,this.refreshModel.bind(this,{step:"pivot"})),this.addManagedListener(this.eventService,L.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,L.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,L.EVENT_COLUMN_PIVOT_MODE_CHANGED,e),this.addManagedListener(this.eventService,L.EVENT_GRID_STYLES_CHANGED,this.onGridStylesChanges.bind(this)),this.addManagedListener(this.eventService,L.EVENT_GRID_READY,()=>this.onGridReady()),this.addPropertyListeners(),this.rootNode=new st(this.beans),this.nodeManager=new fw(this.rootNode,this.gridOptionsService,this.eventService,this.columnModel,this.selectionService,this.beans)}addPropertyListeners(){const e=new Set(["treeData","masterDetail"]),t=new Set(["suppressParentsInRowNodes","groupDefaultExpanded","groupAllowUnbalanced","initialGroupOrderComparator","groupHideOpenParents","groupDisplayType"]),i=new Set(["excludeChildrenWhenTreeDataFiltering"]),s=new Set(["removePivotHeaderRowWhenSingleValueColumn","pivotRowTotals","pivotColumnGroupTotals","suppressExpandablePivotGroups"]),n=new Set(["getGroupRowAgg","alwaysAggregateAtRootLevel","groupIncludeTotalFooter","suppressAggFilteredOnly"]),l=new Set(["postSortRows","groupDisplayType","accentedSort"]),u=new Set([]),g=new Set(["groupRemoveSingleChildren","groupRemoveLowestSingleChildren","groupIncludeFooter"]),C=[...e,...t,...i,...s,...s,...n,...l,...u,...g];this.addManagedPropertyListeners(C,S=>{var A;const D=(A=S.changeSet)==null?void 0:A.properties;if(!D)return;const M=W=>D.some(z=>W.has(z));if(M(e)){this.setRowData(this.rootNode.allLeafChildren.map(W=>W.data));return}if(M(t)){this.refreshModel({step:"group"});return}if(M(i)){this.refreshModel({step:"filter"});return}if(M(s)){this.refreshModel({step:"pivot"});return}if(M(n)){this.refreshModel({step:"aggregate"});return}if(M(l)){this.refreshModel({step:"sort"});return}if(M(u)){this.refreshModel({step:"filter_aggregates"});return}M(g)&&this.refreshModel({step:"map"})}),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights())}start(){this.hasStarted=!0,this.shouldSkipSettingDataOnStart?this.dispatchUpdateEventsAndRefresh():this.setInitialData()}setInitialData(){const e=this.gridOptionsService.get("rowData");e&&(this.shouldSkipSettingDataOnStart=!0,this.setRowData(e))}ensureRowHeightsValid(e,t,i,s){let n,l=!1;do{n=!1;const u=this.getRowIndexAtPixel(e),g=this.getRowIndexAtPixel(t),C=Math.max(u,i),S=Math.min(g,s);for(let A=C;A<=S;A++){const D=this.getRow(A);if(D.rowHeightEstimated){const M=this.gridOptionsService.getRowHeightForNode(D);D.setRowHeight(M.height),n=!0,l=!0}}n&&this.setRowTopAndRowIndex()}while(n);return l}setRowTopAndRowIndex(){const e=this.environment.getDefaultRowHeight();let t=0;const i=new Set,s=this.gridOptionsService.isDomLayout("normal");for(let n=0;n<this.rowsToDisplay.length;n++){const l=this.rowsToDisplay[n];if(l.id!=null&&i.add(l.id),l.rowHeight==null){const u=this.gridOptionsService.getRowHeightForNode(l,s,e);l.setRowHeight(u.height,u.estimated)}l.setRowTop(t),l.setRowIndex(n),t+=l.rowHeight}return i}clearRowTopAndRowIndex(e,t){const i=e.isActive(),s=l=>{l&&l.id!=null&&!t.has(l.id)&&l.clearRowTopAndRowIndex()},n=l=>{if(s(l),s(l.detailNode),s(l.sibling),l.hasChildren()&&l.childrenAfterGroup){const u=l.level==-1;i&&!u&&!l.expanded||l.childrenAfterGroup.forEach(n)}};n(this.rootNode)}ensureRowsAtPixel(e,t,i=0){const s=this.getRowIndexAtPixel(t),n=this.getRow(s),l=!this.gridOptionsService.get("suppressAnimationFrame");return n===e[0]?!1:(e.forEach(u=>{ot.removeFromArray(this.rootNode.allLeafChildren,u)}),e.forEach((u,g)=>{ot.insertIntoArray(this.rootNode.allLeafChildren,u,Math.max(s+i,0)+g)}),this.refreshModel({step:"group",keepRenderedRows:!0,keepEditingRows:!0,animate:l}),!0)}highlightRowAtPixel(e,t){const i=t!=null?this.getRowIndexAtPixel(t):null,s=i!=null?this.getRow(i):null;if(!s||!e||s===e||t==null){this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null);return}const n=this.getHighlightPosition(t,s);this.lastHighlightedRow&&this.lastHighlightedRow!==s&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null),s.setHighlighted(n),this.lastHighlightedRow=s}getHighlightPosition(e,t){if(!t){const n=this.getRowIndexAtPixel(e);if(t=this.getRow(n||0),!t)return 1}const{rowTop:i,rowHeight:s}=t;return e-i<s/2?0:1}getLastHighlightedRowNode(){return this.lastHighlightedRow}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay?this.rowsToDisplay.length:0}getTopLevelRowCount(){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return 1;const t=this.rootNode.childrenAfterAggFilter;return t?t.length:0}getTopLevelRowDisplayedIndex(e){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return e;let i=this.rootNode.childrenAfterSort[e];if(this.gridOptionsService.get("groupHideOpenParents"))for(;i.expanded&&i.childrenAfterSort&&i.childrenAfterSort.length>0;)i=i.childrenAfterSort[0];return i.rowIndex}getRowBounds(e){if(ot.missing(this.rowsToDisplay))return null;const t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null}onRowGroupOpened(){const e=this.gridOptionsService.isAnimateRows();this.refreshModel({step:"map",keepRenderedRows:!0,animate:e})}onFilterChanged(e){if(e.afterDataChange)return;const t=this.gridOptionsService.isAnimateRows(),s=e.columns.length===0||e.columns.some(n=>n.isPrimary())?"filter":"filter_aggregates";this.refreshModel({step:s,keepRenderedRows:!0,animate:t})}onSortChanged(){const e=this.gridOptionsService.isAnimateRows();this.refreshModel({step:"sort",keepRenderedRows:!0,animate:e,keepEditingRows:!0})}getType(){return"clientSide"}onValueChanged(){this.columnModel.isPivotActive()?this.refreshModel({step:"pivot"}):this.refreshModel({step:"aggregate"})}createChangePath(e){const t=ot.missingOrEmpty(e),i=new Fl(!1,this.rootNode);return(t||this.gridOptionsService.get("treeData"))&&i.setInactive(),i}isSuppressModelUpdateAfterUpdateTransaction(e){if(!this.gridOptionsService.get("suppressModelUpdateAfterUpdateTransaction")||e.rowNodeTransactions==null)return!1;const t=e.rowNodeTransactions.filter(s=>s.add!=null&&s.add.length>0||s.remove!=null&&s.remove.length>0);return t==null||t.length==0}buildRefreshModelParams(e){let t="group";const i={everything:"group",group:"group",filter:"filter",map:"map",aggregate:"aggregate",sort:"sort",pivot:"pivot"};if(ot.exists(e)&&(t=i[e]),ot.missing(t)){console.error(`AG Grid: invalid step ${e}, available steps are ${Object.keys(i).join(", ")}`);return}const s=!this.gridOptionsService.get("suppressAnimationFrame");return{step:t,keepRenderedRows:!0,keepEditingRows:!0,animate:s}}refreshModel(e){if(!this.hasStarted||this.isRefreshingModel||this.columnModel.shouldRowModelIgnoreRefresh())return;let t=typeof e=="object"&&"step"in e?e:this.buildRefreshModelParams(e);if(!t||this.isSuppressModelUpdateAfterUpdateTransaction(t))return;const i=this.createChangePath(t.rowNodeTransactions);switch(this.isRefreshingModel=!0,t.step){case"group":this.doRowGrouping(t.rowNodeTransactions,t.rowNodeOrder,i,!!t.afterColumnsChanged);case"filter":this.doFilter(i);case"pivot":this.doPivot(i);case"aggregate":this.doAggregate(i);case"filter_aggregates":this.doFilterAggregates(i);case"sort":this.doSort(t.rowNodeTransactions,i);case"map":this.doRowsToDisplay()}const s=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(i,s),this.isRefreshingModel=!1;const n={type:L.EVENT_MODEL_UPDATED,animate:t.animate,keepRenderedRows:t.keepRenderedRows,newData:t.newData,newPage:!1,keepUndoRedoStack:t.keepUndoRedoStack};this.eventService.dispatchEvent(n)}isEmpty(){const e=ot.missing(this.rootNode.allLeafChildren)||this.rootNode.allLeafChildren.length===0;return ot.missing(this.rootNode)||e||!this.columnModel.isReady()}isRowsToRender(){return ot.exists(this.rowsToDisplay)&&this.rowsToDisplay.length>0}getNodesInRangeForSelection(e,t){let i=!t,s=!1;const n=[],l=this.gridOptionsService.get("groupSelectsChildren");return this.forEachNodeAfterFilterAndSort(u=>{if(s)return;if(i&&(u===t||u===e)&&(s=!0,u.group&&l)){n.push(...u.allLeafChildren);return}if(!i){if(u!==t&&u!==e)return;i=!0}if(!u.group||!l){n.push(u);return}}),n}setDatasource(e){console.error("AG Grid: should never call setDatasource on clientSideRowController")}getTopLevelNodes(){return this.rootNode?this.rootNode.childrenAfterGroup:null}getRootNode(){return this.rootNode}getRow(e){return this.rowsToDisplay[e]}isRowPresent(e){return this.rowsToDisplay.indexOf(e)>=0}getRowIndexAtPixel(e){if(this.isEmpty()||this.rowsToDisplay.length===0)return-1;let t=0,i=this.rowsToDisplay.length-1;if(e<=0)return 0;if(ot.last(this.rowsToDisplay).rowTop<=e)return this.rowsToDisplay.length-1;let n=-1,l=-1;for(;;){const u=Math.floor((t+i)/2),g=this.rowsToDisplay[u];if(this.isRowInPixel(g,e)||(g.rowTop<e?t=u+1:g.rowTop>e&&(i=u-1),n===t&&l===i))return u;n=t,l=i}}isRowInPixel(e,t){const i=e.rowTop,s=e.rowTop+e.rowHeight;return i<=t&&s>t}forEachLeafNode(e){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach((t,i)=>e(t,i))}forEachNode(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterGroup||[]],callback:e,recursionType:0,index:0,includeFooterNodes:t})}forEachNodeAfterFilter(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterAggFilter||[]],callback:e,recursionType:1,index:0,includeFooterNodes:t})}forEachNodeAfterFilterAndSort(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterSort||[]],callback:e,recursionType:2,index:0,includeFooterNodes:t})}forEachPivotNode(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[this.rootNode],callback:e,recursionType:3,index:0,includeFooterNodes:t})}recursivelyWalkNodesAndCallback(e){var t;const{nodes:i,callback:s,recursionType:n,includeFooterNodes:l}=e;let{index:u}=e;for(let S=0;S<i.length;S++){const A=i[S];if(s(A,u++),A.hasChildren()&&!A.footer){let D=null;switch(n){case 0:D=A.childrenAfterGroup;break;case 1:D=A.childrenAfterAggFilter;break;case 2:D=A.childrenAfterSort;break;case 3:D=A.leafGroup?null:A.childrenAfterSort;break}D&&(u=this.recursivelyWalkNodesAndCallback({nodes:[...D],callback:s,recursionType:n,index:u,includeFooterNodes:l}))}}const g=(t=i[0])==null?void 0:t.parent;if(!l||!g)return u;if(g===this.rootNode){if(!this.gridOptionsService.get("groupIncludeTotalFooter"))return u}else if(!this.gridOptionsService.getGroupIncludeFooter()({node:g}))return u;return g.createFooter(),s(g.sibling,u++),u}doAggregate(e){this.aggregationStage&&this.aggregationStage.execute({rowNode:this.rootNode,changedPath:e})}doFilterAggregates(e){this.filterAggregatesStage?this.filterAggregatesStage.execute({rowNode:this.rootNode,changedPath:e}):this.rootNode.childrenAfterAggFilter=this.rootNode.childrenAfterFilter}expandOrCollapseAll(e){const t=this.gridOptionsService.get("treeData"),i=this.columnModel.isPivotActive(),s=u=>{!u||u.forEach(g=>{const C=()=>{g.expanded=e,s(g.childrenAfterGroup)};if(t){ot.exists(g.childrenAfterGroup)&&C();return}if(i){!g.leafGroup&&C();return}g.group&&C()})};this.rootNode&&s(this.rootNode.childrenAfterGroup),this.refreshModel({step:"map"});const n=e?"expandAll":"collapseAll",l={type:L.EVENT_EXPAND_COLLAPSE_ALL,source:n};this.eventService.dispatchEvent(l)}doSort(e,t){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,changedPath:t})}doRowGrouping(e,t,i,s){if(this.groupStage){if(e?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,rowNodeOrder:t,changedPath:i}):this.groupStage.execute({rowNode:this.rootNode,changedPath:i,afterColumnsChanged:s}),this.gridOptionsService.get("groupSelectsChildren")&&this.selectionService.updateGroupsFromChildrenSelections("rowGroupChanged",i)){const l={type:L.EVENT_SELECTION_CHANGED,source:"rowGroupChanged"};this.eventService.dispatchEvent(l)}}else this.rootNode.childrenAfterGroup=this.rootNode.allLeafChildren,this.rootNode.sibling&&(this.rootNode.sibling.childrenAfterGroup=this.rootNode.childrenAfterGroup),this.rootNode.updateHasChildren();this.nodeManager.isRowCountReady()&&(this.rowCountReady=!0,this.eventService.dispatchEventOnce({type:L.EVENT_ROW_COUNT_READY}))}doFilter(e){this.filterStage.execute({rowNode:this.rootNode,changedPath:e})}doPivot(e){this.pivotStage&&this.pivotStage.execute({rowNode:this.rootNode,changedPath:e})}getCopyOfNodesMap(){return this.nodeManager.getCopyOfNodesMap()}getRowNode(e){if(typeof e=="string"&&e.indexOf(st.ID_PREFIX_ROW_GROUP)==0){let i;return this.forEachNode(s=>{s.id===e&&(i=s)}),i}return this.nodeManager.getRowNode(e)}setRowData(e){this.selectionService.reset("rowDataChanged"),this.nodeManager.setRowData(e),this.hasStarted&&this.dispatchUpdateEventsAndRefresh()}dispatchUpdateEventsAndRefresh(){const e={type:L.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(e),this.refreshModel({step:"group",newData:!0})}batchUpdateRowData(e,t){if(this.applyAsyncTransactionsTimeout==null){this.rowDataTransactionBatch=[];const i=this.gridOptionsService.getAsyncTransactionWaitMillis();this.applyAsyncTransactionsTimeout=window.setTimeout(()=>{this.executeBatchUpdateRowData()},i)}this.rowDataTransactionBatch.push({rowDataTransaction:e,callback:t})}flushAsyncTransactions(){this.applyAsyncTransactionsTimeout!=null&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){this.valueCache.onDataChanged();const e=[],t=[];let i=!1;if(this.rowDataTransactionBatch&&this.rowDataTransactionBatch.forEach(s=>{const n=this.nodeManager.updateRowData(s.rowDataTransaction,void 0);t.push(n),s.callback&&e.push(s.callback.bind(null,n)),typeof s.rowDataTransaction.addIndex=="number"&&(i=!0)}),this.commonUpdateRowData(t,void 0,i),e.length>0&&window.setTimeout(()=>{e.forEach(s=>s())},0),t.length>0){const s={type:L.EVENT_ASYNC_TRANSACTIONS_FLUSHED,results:t};this.eventService.dispatchEvent(s)}this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0}updateRowData(e,t){this.valueCache.onDataChanged();const i=this.nodeManager.updateRowData(e,t),s=typeof e.addIndex=="number";return this.commonUpdateRowData([i],t,s),i}createRowNodeOrder(){if(this.gridOptionsService.get("suppressMaintainUnsortedOrder"))return;const t={};if(this.rootNode&&this.rootNode.allLeafChildren)for(let i=0;i<this.rootNode.allLeafChildren.length;i++){const s=this.rootNode.allLeafChildren[i];t[s.id]=i}return t}commonUpdateRowData(e,t,i){if(!this.hasStarted)return;const s=!this.gridOptionsService.get("suppressAnimationFrame");i&&(t=this.createRowNodeOrder());const n={type:L.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(n),this.refreshModel({step:"group",rowNodeTransactions:e,rowNodeOrder:t,keepRenderedRows:!0,keepEditingRows:!0,animate:s})}doRowsToDisplay(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepEditingRows:!0,keepUndoRedoStack:!0})}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}resetRowHeights(){const e=this.resetRowHeightsForAllRowNodes();this.rootNode.setRowHeight(this.rootNode.rowHeight,!0),this.rootNode.sibling&&this.rootNode.sibling.setRowHeight(this.rootNode.sibling.rowHeight,!0),e&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode(t=>{t.setRowHeight(t.rowHeight,!0);const i=t.detailNode;i&&i.setRowHeight(i.rowHeight,!0),t.sibling&&t.sibling.setRowHeight(t.sibling.rowHeight,!0),e=!0}),e}onGridStylesChanges(){this.columnModel.isAutoRowHeightActive()||this.resetRowHeights()}onGridReady(){this.hasStarted||this.setInitialData()}isRowDataLoaded(){return this.rowCountReady}};E([N("columnModel")],xi.prototype,"columnModel",2);E([N("selectionService")],xi.prototype,"selectionService",2);E([N("filterManager")],xi.prototype,"filterManager",2);E([N("valueCache")],xi.prototype,"valueCache",2);E([N("beans")],xi.prototype,"beans",2);E([N("filterStage")],xi.prototype,"filterStage",2);E([N("sortStage")],xi.prototype,"sortStage",2);E([N("flattenStage")],xi.prototype,"flattenStage",2);E([mt("groupStage")],xi.prototype,"groupStage",2);E([mt("aggregationStage")],xi.prototype,"aggregationStage",2);E([mt("pivotStage")],xi.prototype,"pivotStage",2);E([mt("filterAggregatesStage")],xi.prototype,"filterAggregatesStage",2);E([Ce],xi.prototype,"init",1);xi=E([Fe("rowModel")],xi);var Ja=class extends ge{execute(e){const{changedPath:t}=e;this.filterService.filter(t)}};E([N("filterService")],Ja.prototype,"filterService",2);Ja=E([Fe("filterStage")],Ja);var Bn=class extends ge{execute(e){const t=this.sortController.getSortOptions(),i=ot.exists(t)&&t.length>0,s=i&&ot.exists(e.rowNodeTransactions)&&this.gridOptionsService.get("deltaSort"),n=t.some(l=>this.gridOptionsService.isColumnsSortingCoupledToGroup()?l.column.isPrimary()&&l.column.isRowGroupActive():!!l.column.getColDef().showRowGroup);this.sortService.sort(t,i,s,e.rowNodeTransactions,e.changedPath,n)}};E([N("sortService")],Bn.prototype,"sortService",2);E([N("sortController")],Bn.prototype,"sortController",2);Bn=E([Fe("sortStage")],Bn);var Wn=class extends ge{execute(e){const t=e.rowNode,i=[],s=this.columnModel.isPivotMode(),n=s&&t.leafGroup,l=n?[t]:t.childrenAfterSort,u=this.getFlattenDetails();this.recursivelyAddToRowsToDisplay(u,l,i,s,0);const g=i.length>0;return!n&&g&&u.groupIncludeTotalFooter&&(t.createFooter(),this.addRowNodeToRowsToDisplay(u,t.sibling,i,0)),i}getFlattenDetails(){const e=this.gridOptionsService.get("groupRemoveSingleChildren");return{groupRemoveLowestSingleChildren:!e&&this.gridOptionsService.get("groupRemoveLowestSingleChildren"),groupRemoveSingleChildren:e,isGroupMultiAutoColumn:this.gridOptionsService.isGroupMultiAutoColumn(),hideOpenParents:this.gridOptionsService.get("groupHideOpenParents"),groupIncludeTotalFooter:this.gridOptionsService.get("groupIncludeTotalFooter"),getGroupIncludeFooter:this.gridOptionsService.getGroupIncludeFooter()}}recursivelyAddToRowsToDisplay(e,t,i,s,n){if(!ot.missingOrEmpty(t))for(let l=0;l<t.length;l++){const u=t[l],g=u.hasChildren(),C=s&&!g,S=e.groupRemoveSingleChildren&&g&&u.childrenAfterGroup.length===1,A=e.groupRemoveLowestSingleChildren&&g&&u.leafGroup&&u.childrenAfterGroup.length===1,D=s&&u.leafGroup,M=e.hideOpenParents&&u.expanded&&!u.master&&!D;if(!C&&!M&&!S&&!A&&this.addRowNodeToRowsToDisplay(e,u,i,n),!(s&&u.leafGroup)){if(g){const z=S||A;if(u.expanded||z){const U=z?n:n+1;this.recursivelyAddToRowsToDisplay(e,u.childrenAfterSort,i,s,U),e.getGroupIncludeFooter({node:u})?(u.createFooter(),this.addRowNodeToRowsToDisplay(e,u.sibling,i,U)):u.destroyFooter()}}else if(u.master&&u.expanded){const z=this.createDetailNode(u);this.addRowNodeToRowsToDisplay(e,z,i,n)}}}}addRowNodeToRowsToDisplay(e,t,i,s){i.push(t),t.setUiLevel(e.isGroupMultiAutoColumn?0:s)}createDetailNode(e){if(ot.exists(e.detailNode))return e.detailNode;const t=new st(this.beans);return t.detail=!0,t.selectable=!1,t.parent=e,ot.exists(e.id)&&(t.id="detail_"+e.id),t.data=e.data,t.level=e.level+1,e.detailNode=t,t}};E([N("columnModel")],Wn.prototype,"columnModel",2);E([N("beans")],Wn.prototype,"beans",2);Wn=E([Fe("flattenStage")],Wn);var zn=class extends ge{sort(e,t,i,s,n,l){const u=this.gridOptionsService.get("groupMaintainOrder"),g=this.columnModel.getAllGridColumns().some(M=>M.isRowGroupActive());let C={};i&&s&&(C=this.calculateDirtyNodes(s));const S=this.columnModel.isPivotMode(),A=this.gridOptionsService.getCallback("postSortRows"),D=M=>{var W;this.pullDownGroupDataForHideOpenParents(M.childrenAfterAggFilter,!0);const z=S&&M.leafGroup;if(u&&g&&!M.leafGroup&&!l){const X=(W=this.columnModel.getRowGroupColumns())==null?void 0:W[M.level+1],q=X?.getSort()===null,_=M.childrenAfterAggFilter.slice(0);if(M.childrenAfterSort&&!q){const J={};M.childrenAfterSort.forEach((se,$)=>{J[se.id]=$}),_.sort((se,$)=>{var Y,oe;return((Y=J[se.id])!=null?Y:0)-((oe=J[$.id])!=null?oe:0)})}M.childrenAfterSort=_}else!t||z?M.childrenAfterSort=M.childrenAfterAggFilter.slice(0):i?M.childrenAfterSort=this.doDeltaSort(M,C,n,e):M.childrenAfterSort=this.rowNodeSorter.doFullSort(M.childrenAfterAggFilter,e);if(M.sibling&&(M.sibling.childrenAfterSort=M.childrenAfterSort),this.updateChildIndexes(M),A){const X={nodes:M.childrenAfterSort};A(X)}};n&&n.forEachChangedNodeDepthFirst(D),this.updateGroupDataForHideOpenParents(n)}calculateDirtyNodes(e){const t={},i=s=>{s&&s.forEach(n=>t[n.id]=!0)};return e&&e.forEach(s=>{i(s.add),i(s.update),i(s.remove)}),t}doDeltaSort(e,t,i,s){const n=e.childrenAfterAggFilter,l=e.childrenAfterSort;if(!l)return this.rowNodeSorter.doFullSort(n,s);const u={},g=[];n.forEach(D=>{t[D.id]||!i.canSkip(D)?g.push(D):u[D.id]=!0});const C=l.filter(D=>u[D.id]),S=(D,M)=>({currentPos:M,rowNode:D}),A=g.map(S).sort((D,M)=>this.rowNodeSorter.compareRowNodes(s,D,M));return this.mergeSortedArrays(s,A,C.map(S)).map(({rowNode:D})=>D)}mergeSortedArrays(e,t,i){const s=[];let n=0,l=0;for(;n<t.length&&l<i.length;)this.rowNodeSorter.compareRowNodes(e,t[n],i[l])<0?s.push(t[n++]):s.push(i[l++]);for(;n<t.length;)s.push(t[n++]);for(;l<i.length;)s.push(i[l++]);return s}updateChildIndexes(e){if(ot.missing(e.childrenAfterSort))return;const t=e.childrenAfterSort;for(let i=0;i<t.length;i++){const s=t[i],n=i===0,l=i===e.childrenAfterSort.length-1;s.setFirstChild(n),s.setLastChild(l),s.setChildIndex(i)}}updateGroupDataForHideOpenParents(e){if(!this.gridOptionsService.get("groupHideOpenParents"))return;if(this.gridOptionsService.get("treeData"))return ot.warnOnce("The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them."),!1;const t=i=>{this.pullDownGroupDataForHideOpenParents(i.childrenAfterSort,!1),i.childrenAfterSort.forEach(s=>{s.hasChildren()&&t(s)})};e&&e.executeFromRootNode(i=>t(i))}pullDownGroupDataForHideOpenParents(e,t){!this.gridOptionsService.get("groupHideOpenParents")||ot.missing(e)||e.forEach(i=>{this.columnModel.getGroupDisplayColumns().forEach(n=>{const l=n.getColDef().showRowGroup;if(typeof l!="string"){console.error("AG Grid: groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup");return}const u=l,g=this.columnModel.getPrimaryColumn(u);if(g!==i.rowGroupColumn)if(t)i.setGroupValue(n.getId(),void 0);else{const S=i.getFirstChildOfFirstChild(g);S&&i.setGroupValue(n.getId(),S.key)}})})}};E([N("columnModel")],zn.prototype,"columnModel",2);E([N("rowNodeSorter")],zn.prototype,"rowNodeSorter",2);zn=E([Fe("sortService")],zn);var el=class extends ge{filter(e){const t=this.filterManager.isChildFilterPresent();this.filterNodes(t,e)}filterNodes(e,t){const i=(s,n)=>{s.hasChildren()&&e&&!n?s.childrenAfterFilter=s.childrenAfterGroup.filter(l=>{const u=l.childrenAfterFilter&&l.childrenAfterFilter.length>0,g=l.data&&this.filterManager.doesRowPassFilter({rowNode:l});return u||g}):s.childrenAfterFilter=s.childrenAfterGroup,s.sibling&&(s.sibling.childrenAfterFilter=s.childrenAfterFilter)};if(this.doingTreeDataFiltering()){const s=(l,u)=>{if(l.childrenAfterGroup)for(let g=0;g<l.childrenAfterGroup.length;g++){const C=l.childrenAfterGroup[g],S=u||this.filterManager.doesRowPassFilter({rowNode:C});C.childrenAfterGroup?s(l.childrenAfterGroup[g],S):i(C,S)}i(l,u)},n=l=>s(l,!1);t.executeFromRootNode(n)}else{const s=n=>i(n,!1);t.forEachChangedNodeDepthFirst(s,!0)}}doingTreeDataFiltering(){return this.gridOptionsService.get("treeData")&&!this.gridOptionsService.get("excludeChildrenWhenTreeDataFiltering")}};E([N("filterManager")],el.prototype,"filterManager",2);el=E([Fe("filterService")],el);var Wo=class extends ge{postConstruct(){this.rowModel.getType()==="clientSide"&&(this.clientSideRowModel=this.rowModel,this.addManagedPropertyListener("rowData",()=>this.onRowDataUpdated()))}isActive(){const e=this.gridOptionsService.exists("getRowId");return this.gridOptionsService.get("resetRowDataOnUpdate")?!1:e}setRowData(e){const t=this.createTransactionForRowData(e);if(!t)return;const[i,s]=t;this.clientSideRowModel.updateRowData(i,s)}createTransactionForRowData(e){if(ot.missing(this.clientSideRowModel)){console.error("AG Grid: ImmutableService only works with ClientSideRowModel");return}const t=this.gridOptionsService.getCallback("getRowId");if(t==null){console.error("AG Grid: ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!");return}const i={remove:[],update:[],add:[]},s=this.clientSideRowModel.getCopyOfNodesMap(),l=this.gridOptionsService.get("suppressMaintainUnsortedOrder")?void 0:{};return ot.exists(e)&&e.forEach((u,g)=>{const C=t({data:u,level:0}),S=s[C];l&&(l[C]=g),S?(S.data!==u&&i.update.push(u),s[C]=void 0):i.add.push(u)}),ot.iterateObject(s,(u,g)=>{g&&i.remove.push(g.data)}),[i,l]}onRowDataUpdated(){const e=this.gridOptionsService.get("rowData");!e||(this.isActive()?this.setRowData(e):(this.selectionService.reset("rowDataChanged"),this.clientSideRowModel.setRowData(e)))}};E([N("rowModel")],Wo.prototype,"rowModel",2);E([N("rowRenderer")],Wo.prototype,"rowRenderer",2);E([N("selectionService")],Wo.prototype,"selectionService",2);E([Ce],Wo.prototype,"postConstruct",1);Wo=E([Fe("immutableService")],Wo);var mw="31.2.1",vw={version:mw,moduleName:"@ag-grid-community/client-side-row-model",rowModel:"clientSide",beans:[xi,Ja,Bn,Wn,zn,el,Wo]},Cw=Object.defineProperty,yw=Object.getOwnPropertyDescriptor,Fi=(e,t,i,s)=>{for(var n=s>1?void 0:s?yw(t,i):t,l=e.length-1,u;l>=0;l--)(u=e[l])&&(n=(s?u(t,i,n):u(n))||n);return s&&n&&Cw(t,i,n),n},bw=(e,t)=>(i,s)=>t(i,s,e),Un=class extends Vd{constructor(e,t,i){super(e),this.parentCache=t,this.params=i,this.startRow=e*i.blockSize,this.endRow=this.startRow+i.blockSize}postConstruct(){this.createRowNodes()}getBlockStateJson(){return{id:""+this.getId(),state:{blockNumber:this.getId(),startRow:this.getStartRow(),endRow:this.getEndRow(),pageStatus:this.getState()}}}setDataAndId(e,t,i){ot.exists(t)?e.setDataAndId(t,i.toString()):e.setDataAndId(void 0,void 0)}loadFromDatasource(){const e=this.createLoadParams();if(ot.missing(this.params.datasource.getRows)){console.warn("AG Grid: datasource is missing getRows method");return}window.setTimeout(()=>{this.params.datasource.getRows(e)},0)}processServerFail(){}createLoadParams(){return{startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),sortModel:this.params.sortModel,filterModel:this.params.filterModel,context:this.gridOptionsService.getGridCommonParams().context}}forEachNode(e,t,i){this.rowNodes.forEach((s,n)=>{this.startRow+n<i&&e(s,t.next())})}getLastAccessed(){return this.lastAccessed}getRow(e,t=!1){t||(this.lastAccessed=this.params.lastAccessedSequence.next());const i=e-this.startRow;return this.rowNodes[i]}getStartRow(){return this.startRow}getEndRow(){return this.endRow}createRowNodes(){this.rowNodes=[];for(let e=0;e<this.params.blockSize;e++){const t=this.startRow+e,i=new st(this.beans);i.setRowHeight(this.params.rowHeight),i.uiLevel=0,i.setRowIndex(t),i.setRowTop(this.params.rowHeight*t),this.rowNodes.push(i)}}processServerResult(e){this.rowNodes.forEach((i,s)=>{const n=e.rowData?e.rowData[s]:void 0;!i.id&&i.alreadyRendered&&n&&(this.rowNodes[s]=new st(this.beans),this.rowNodes[s].setRowIndex(i.rowIndex),this.rowNodes[s].setRowTop(i.rowTop),this.rowNodes[s].setRowHeight(i.rowHeight),i.clearRowTopAndRowIndex()),this.setDataAndId(this.rowNodes[s],n,this.startRow+s)});const t=e.rowCount!=null&&e.rowCount>=0?e.rowCount:void 0;this.parentCache.pageLoaded(this,t)}destroyRowNodes(){this.rowNodes.forEach(e=>{e.clearRowTopAndRowIndex()})}};Fi([N("beans")],Un.prototype,"beans",2);Fi([Ce],Un.prototype,"postConstruct",1);Fi([Di],Un.prototype,"destroyRowNodes",1);var jr=class sf extends ge{constructor(t){super(),this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=t.initialRowCount,this.params=t}setBeans(t){this.logger=t.create("InfiniteCache")}getRow(t,i=!1){const s=Math.floor(t/this.params.blockSize);let n=this.blocks[s];if(!n){if(i)return;n=this.createBlock(s)}return n.getRow(t)}createBlock(t){const i=this.createBean(new Un(t,this,this.params));return this.blocks[i.getId()]=i,this.blockCount++,this.purgeBlocksIfNeeded(i),this.params.rowNodeBlockLoader.addBlock(i),i}refreshCache(){if(this.blockCount==0){this.purgeCache();return}this.getBlocksInOrder().forEach(i=>i.setStateWaitingToLoad()),this.params.rowNodeBlockLoader.checkBlockToLoad()}destroyAllBlocks(){this.getBlocksInOrder().forEach(t=>this.destroyBlock(t))}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(t,i){!this.isAlive()||(this.logger.log(`onPageLoaded: page = ${t.getId()}, lastRow = ${i}`),this.checkRowCount(t,i),this.onCacheUpdated())}purgeBlocksIfNeeded(t){const i=this.getBlocksInOrder().filter(g=>g!=t),s=(g,C)=>C.getLastAccessed()-g.getLastAccessed();i.sort(s);const n=this.params.maxBlocksInCache>0,l=n?this.params.maxBlocksInCache-1:null,u=sf.MAX_EMPTY_BLOCKS_TO_KEEP-1;i.forEach((g,C)=>{const S=g.getState()===Un.STATE_WAITING_TO_LOAD&&C>=u,A=n?C>=l:!1;if(S||A){if(this.isBlockCurrentlyDisplayed(g)||this.isBlockFocused(g))return;this.removeBlockFromCache(g)}})}isBlockFocused(t){const i=this.focusService.getFocusCellToUseAfterRefresh();if(!i||i.rowPinned!=null)return!1;const s=t.getStartRow(),n=t.getEndRow();return i.rowIndex>=s&&i.rowIndex<n}isBlockCurrentlyDisplayed(t){const i=t.getStartRow(),s=t.getEndRow()-1;return this.rowRenderer.isRangeInRenderedViewport(i,s)}removeBlockFromCache(t){!t||this.destroyBlock(t)}checkRowCount(t,i){if(typeof i=="number"&&i>=0)this.rowCount=i,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){const n=(t.getId()+1)*this.params.blockSize+this.params.overflowSize;this.rowCount<n&&(this.rowCount=n)}}setRowCount(t,i){this.rowCount=t,ot.exists(i)&&(this.lastRowIndexKnown=i),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(t){const i=new Er;this.getBlocksInOrder().forEach(s=>s.forEachNode(t,i,this.rowCount))}getBlocksInOrder(){const t=(s,n)=>s.getId()-n.getId();return ot.getAllValuesInObject(this.blocks).sort(t)}destroyBlock(t){delete this.blocks[t.getId()],this.destroyBean(t),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(t)}onCacheUpdated(){if(this.isAlive()){this.destroyAllBlocksPastVirtualRowCount();const t={type:L.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(t)}}destroyAllBlocksPastVirtualRowCount(){const t=[];this.getBlocksInOrder().forEach(i=>{i.getId()*this.params.blockSize>=this.rowCount&&t.push(i)}),t.length>0&&t.forEach(i=>this.destroyBlock(i))}purgeCache(){this.getBlocksInOrder().forEach(t=>this.removeBlockFromCache(t)),this.lastRowIndexKnown=!1,this.rowCount===0&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(t,i){const s=[];let n=-1,l=!1;const u=new Er;ot.missing(t)&&(l=!0);let g=!1;return this.getBlocksInOrder().forEach(S=>{if(!g){if(l&&n+1!==S.getId()){g=!0;return}n=S.getId(),S.forEachNode(A=>{const D=A===t||A===i;(l||D)&&s.push(A),D&&(l=!l)},u,this.rowCount)}}),g||l?[]:s}};jr.MAX_EMPTY_BLOCKS_TO_KEEP=2;Fi([N("rowRenderer")],jr.prototype,"rowRenderer",2);Fi([N("focusService")],jr.prototype,"focusService",2);Fi([bw(0,Qi("loggerFactory"))],jr.prototype,"setBeans",1);Fi([Di],jr.prototype,"destroyAllBlocks",1);var ww=jr,Fs=class extends ge{getRowBounds(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}}ensureRowHeightsValid(e,t,i,s){return!1}init(){!this.gridOptionsService.isRowModelType("infinite")||(this.rowHeight=this.gridOptionsService.getRowHeightAsNumber(),this.addEventListeners(),this.addDestroyFunc(()=>this.destroyCache()),this.verifyProps())}verifyProps(){this.gridOptionsService.exists("initialGroupOrderComparator")&&ot.warnOnce("initialGroupOrderComparator cannot be used with Infinite Row Model as sorting is done on the server side")}start(){this.setDatasource(this.gridOptionsService.get("datasource"))}destroyDatasource(){this.datasource&&(this.getContext().destroyBean(this.datasource),this.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedListener(this.eventService,L.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,L.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,L.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverything.bind(this)),this.addManagedListener(this.eventService,L.EVENT_STORE_UPDATED,this.onCacheUpdated.bind(this)),this.addManagedPropertyListener("datasource",()=>this.setDatasource(this.gridOptionsService.get("datasource"))),this.addManagedPropertyListener("cacheBlockSize",()=>this.resetCache()),this.addManagedPropertyListener("rowHeight",()=>{this.rowHeight=this.gridOptionsService.getRowHeightAsNumber(),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()})}onFilterChanged(){this.reset()}onSortChanged(){this.reset()}onColumnEverything(){let e;this.cacheParams?e=this.isSortModelDifferent():e=!0,e&&this.reset()}isSortModelDifferent(){return!ot.jsonEquals(this.cacheParams.sortModel,this.sortController.getSortModel())}getType(){return"infinite"}setDatasource(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getNodesInRangeForSelection(e,t){return this.infiniteCache?this.infiniteCache.getRowNodesInRange(e,t):[]}reset(){if(!this.datasource)return;this.gridOptionsService.getCallback("getRowId")!=null||this.selectionService.reset("rowDataChanged"),this.resetCache()}createModelUpdatedEvent(){return{type:L.EVENT_MODEL_UPDATED,newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1}}resetCache(){this.destroyCache(),this.cacheParams={datasource:this.datasource,filterModel:this.filterManager.getFilterModel(),sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,initialRowCount:this.gridOptionsService.get("infiniteInitialRowCount"),maxBlocksInCache:this.gridOptionsService.get("maxBlocksInCache"),rowHeight:this.gridOptionsService.getRowHeightAsNumber(),overflowSize:this.gridOptionsService.get("cacheOverflowSize"),blockSize:this.gridOptionsService.get("cacheBlockSize"),lastAccessedSequence:new Er},this.infiniteCache=this.createBean(new ww(this.cacheParams)),this.eventService.dispatchEventOnce({type:L.EVENT_ROW_COUNT_READY});const e=this.createModelUpdatedEvent();this.eventService.dispatchEvent(e)}updateRowHeights(){this.forEachNode(t=>{t.setRowHeight(this.rowHeight),t.setRowTop(this.rowHeight*t.rowIndex)});const e=this.createModelUpdatedEvent();this.eventService.dispatchEvent(e)}destroyCache(){this.infiniteCache&&(this.infiniteCache=this.destroyBean(this.infiniteCache))}onCacheUpdated(){const e=this.createModelUpdatedEvent();this.eventService.dispatchEvent(e)}getRow(e){if(!!this.infiniteCache&&!(e>=this.infiniteCache.getRowCount()))return this.infiniteCache.getRow(e)}getRowNode(e){let t;return this.forEachNode(i=>{i.id===e&&(t=i)}),t}forEachNode(e){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(e)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(e){return e}getRowIndexAtPixel(e){if(this.rowHeight!==0){const t=Math.floor(e/this.rowHeight),i=this.getRowCount()-1;return t>i?i:t}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(e){return!!this.getRowNode(e.id)}refreshCache(){this.infiniteCache&&this.infiniteCache.refreshCache()}purgeCache(){this.infiniteCache&&this.infiniteCache.purgeCache()}isLastRowIndexKnown(){return this.infiniteCache?this.infiniteCache.isLastRowIndexKnown():!1}setRowCount(e,t){this.infiniteCache&&this.infiniteCache.setRowCount(e,t)}};Fi([N("filterManager")],Fs.prototype,"filterManager",2);Fi([N("sortController")],Fs.prototype,"sortController",2);Fi([N("selectionService")],Fs.prototype,"selectionService",2);Fi([N("rowRenderer")],Fs.prototype,"rowRenderer",2);Fi([N("rowNodeBlockLoader")],Fs.prototype,"rowNodeBlockLoader",2);Fi([Ce],Fs.prototype,"init",1);Fi([Di],Fs.prototype,"destroyDatasource",1);Fs=Fi([Fe("rowModel")],Fs);var xw="31.2.1",Sw={version:xw,moduleName:"@ag-grid-community/infinite-row-model",rowModel:"infinite",beans:[Fs]},Ew=Object.defineProperty,Aw=Object.getOwnPropertyDescriptor,Ei=(e,t,i,s)=>{for(var n=s>1?void 0:s?Aw(t,i):t,l=e.length-1,u;l>=0;l--)(u=e[l])&&(n=(s?u(t,i,n):u(n))||n);return s&&n&&Ew(t,i,n),n},Rw=class{setBeans(e){this.beans=e}getFileName(e){const t=this.getDefaultFileExtension();return(e==null||!e.length)&&(e=this.getDefaultFileName()),e.indexOf(".")===-1?`${e}.${t}`:e}getData(e){const t=this.createSerializingSession(e);return this.beans.gridSerializer.serialize(t,e)}getDefaultFileName(){return`export.${this.getDefaultFileExtension()}`}},Dw=class{constructor(e){this.groupColumns=[];const{columnModel:t,valueService:i,gridOptionsService:s,valueFormatterService:n,valueParserService:l,processCellCallback:u,processHeaderCallback:g,processGroupHeaderCallback:C,processRowGroupCallback:S}=e;this.columnModel=t,this.valueService=i,this.gridOptionsService=s,this.valueFormatterService=n,this.valueParserService=l,this.processCellCallback=u,this.processHeaderCallback=g,this.processGroupHeaderCallback=C,this.processRowGroupCallback=S}prepare(e){this.groupColumns=e.filter(t=>!!t.getColDef().showRowGroup)}extractHeaderValue(e){const t=this.getHeaderName(this.processHeaderCallback,e);return t??""}extractRowCellValue(e,t,i,s,n){const u=(!this.gridOptionsService.get("groupHideOpenParents")||n.footer)&&this.shouldRenderGroupSummaryCell(n,e,t)?this.createValueForGroupNode(e,n):this.valueService.getValue(e,n);return this.processCell({accumulatedRowIndex:i,rowNode:n,column:e,value:u,processCellCallback:this.processCellCallback,type:s})}shouldRenderGroupSummaryCell(e,t,i){var s;if(!(e&&e.group))return!1;if(this.groupColumns.indexOf(t)!==-1){if(((s=e.groupData)==null?void 0:s[t.getId()])!=null||this.gridOptionsService.isRowModelType("serverSide")&&e.group)return!0;if(e.footer&&e.level===-1){const g=t.getColDef();return g==null||g.showRowGroup===!0||g.showRowGroup===this.columnModel.getRowGroupColumns()[0].getId()}}const u=this.gridOptionsService.isGroupUseEntireRow(this.columnModel.isPivotMode());return i===0&&u}getHeaderName(e,t){return e?e(this.gridOptionsService.addGridCommonParams({column:t})):this.columnModel.getDisplayNameForColumn(t,"csv",!0)}createValueForGroupNode(e,t){if(this.processRowGroupCallback)return this.processRowGroupCallback(this.gridOptionsService.addGridCommonParams({column:e,node:t}));const i=this.gridOptionsService.get("treeData"),s=this.gridOptionsService.get("suppressGroupMaintainValueType"),n=C=>{var S,A;if(i||s)return C.key;const D=(S=C.groupData)==null?void 0:S[e.getId()];return!D||!C.rowGroupColumn||C.rowGroupColumn.getColDef().useValueFormatterForExport===!1?D:(A=this.valueFormatterService.formatValue(C.rowGroupColumn,C,D))!=null?A:D},l=t.footer,u=[n(t)];if(!this.gridOptionsService.isGroupMultiAutoColumn())for(;t.parent;)t=t.parent,u.push(n(t));const g=u.reverse().join(" -> ");return l?`Total ${g}`:g}processCell(e){var t;const{accumulatedRowIndex:i,rowNode:s,column:n,value:l,processCellCallback:u,type:g}=e;return u?{value:(t=u(this.gridOptionsService.addGridCommonParams({accumulatedRowIndex:i,column:n,node:s,value:l,type:g,parseValue:C=>this.valueParserService.parseValue(n,s,C,this.valueService.getValue(n,s)),formatValue:C=>{var S;return(S=this.valueFormatterService.formatValue(n,s,C))!=null?S:C}})))!=null?t:""}:n.getColDef().useValueFormatterForExport!==!1?{value:l??"",valueFormatted:this.valueFormatterService.formatValue(n,s,l)}:{value:l??""}}},Tw=class{static download(e,t){const i=document.defaultView||window;if(!i){console.warn("AG Grid: There is no `window` associated with the current `document`");return}const s=document.createElement("a"),n=i.URL.createObjectURL(t);s.setAttribute("href",n),s.setAttribute("download",e),s.style.display="none",document.body.appendChild(s),s.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:i})),document.body.removeChild(s),i.setTimeout(()=>{i.URL.revokeObjectURL(n)},0)}},jc=`\r
`,Pw=class extends Dw{constructor(e){super(e),this.isFirstLine=!0,this.result="";const{suppressQuotes:t,columnSeparator:i}=e;this.suppressQuotes=t,this.columnSeparator=i}addCustomContent(e){!e||(typeof e=="string"?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,jc),this.result+=e):e.forEach(t=>{this.beginNewLine(),t.forEach((i,s)=>{s!==0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(i.data.value||""),i.mergeAcross&&this.appendEmptyCells(i.mergeAcross)})}))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(e,t,i,s){i!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(t),this.appendEmptyCells(s)}appendEmptyCells(e){for(let t=1;t<=e;t++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(e,t){t!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(e,t,i){var s;t!=0&&(this.result+=this.columnSeparator);const n=this.extractRowCellValue(e,t,t,"csv",i);this.result+=this.putInQuotes((s=n.valueFormatted)!=null?s:n.value)}putInQuotes(e){if(this.suppressQuotes)return e;if(e==null)return'""';let t;typeof e=="string"?t=e:typeof e.toString=="function"?t=e.toString():(console.warn("AG Grid: unknown value type during csv conversion"),t="");const i=t.replace(/"/g,'""');return'"'+i+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+=jc),this.isFirstLine=!1}},Ls=class extends Rw{postConstruct(){this.setBeans({gridSerializer:this.gridSerializer,gridOptionsService:this.gridOptionsService})}getMergedParams(e){const t=this.gridOptionsService.get("defaultCsvExportParams");return Object.assign({},t,e)}export(e){if(this.isExportSuppressed()){console.warn("AG Grid: Export cancelled. Export is not allowed as per your configuration.");return}const t=this.getMergedParams(e),i=this.getData(t),s=new Blob(["\uFEFF",i],{type:"text/plain"}),n=typeof t.fileName=="function"?t.fileName(this.gridOptionsService.getGridCommonParams()):t.fileName;Tw.download(this.getFileName(n),s)}exportDataAsCsv(e){this.export(e)}getDataAsCsv(e,t=!1){const i=t?Object.assign({},e):this.getMergedParams(e);return this.getData(i)}getDefaultFileExtension(){return"csv"}createSerializingSession(e){const{columnModel:t,valueService:i,gridOptionsService:s,valueFormatterService:n,valueParserService:l}=this,{processCellCallback:u,processHeaderCallback:g,processGroupHeaderCallback:C,processRowGroupCallback:S,suppressQuotes:A,columnSeparator:D}=e;return new Pw({columnModel:t,valueService:i,gridOptionsService:s,valueFormatterService:n,valueParserService:l,processCellCallback:u||void 0,processHeaderCallback:g||void 0,processGroupHeaderCallback:C||void 0,processRowGroupCallback:S||void 0,suppressQuotes:A||!1,columnSeparator:D||","})}isExportSuppressed(){return this.gridOptionsService.get("suppressCsvExport")}};Ei([N("columnModel")],Ls.prototype,"columnModel",2);Ei([N("valueService")],Ls.prototype,"valueService",2);Ei([N("gridSerializer")],Ls.prototype,"gridSerializer",2);Ei([N("gridOptionsService")],Ls.prototype,"gridOptionsService",2);Ei([N("valueFormatterService")],Ls.prototype,"valueFormatterService",2);Ei([N("valueParserService")],Ls.prototype,"valueParserService",2);Ei([Ce],Ls.prototype,"postConstruct",1);Ls=Ei([Fe("csvCreator")],Ls);var Ms=class extends ge{serialize(e,t={}){const{allColumns:i,columnKeys:s,skipRowGroups:n}=t,l=this.getColumnsToExport(i,n,s);return ot.compose(this.prepareSession(l),this.prependContent(t),this.exportColumnGroups(t,l),this.exportHeaders(t,l),this.processPinnedTopRows(t,l),this.processRows(t,l),this.processPinnedBottomRows(t,l),this.appendContent(t))(e).parse()}processRow(e,t,i,s){const n=t.shouldRowBeSkipped||(()=>!1),l=this.gridOptionsService.get("groupRemoveSingleChildren"),u=this.gridOptionsService.get("groupRemoveLowestSingleChildren"),C=t.rowPositions!=null||!!t.onlySelected,S=this.gridOptionsService.get("groupHideOpenParents")&&!C,A=this.columnModel.isPivotMode()?s.leafGroup:!s.group,D=!!s.footer;t.skipRowGroups;const M=u&&s.leafGroup,W=s.allChildrenCount===1&&(l||M);if(!A&&!D&&(t.skipRowGroups||W||S)||t.onlySelected&&!s.isSelected()||t.skipPinnedTop&&s.rowPinned==="top"||t.skipPinnedBottom&&s.rowPinned==="bottom"||s.level===-1&&!A&&!D||n(this.gridOptionsService.addGridCommonParams({node:s})))return;const X=e.onNewBodyRow(s);if(i.forEach((q,_)=>{X.onColumn(q,_,s)}),t.getCustomContentBelowRow){const q=t.getCustomContentBelowRow(this.gridOptionsService.addGridCommonParams({node:s}));q&&e.addCustomContent(q)}}appendContent(e){return t=>{const i=e.appendContent;return i&&t.addCustomContent(i),t}}prependContent(e){return t=>{const i=e.prependContent;return i&&t.addCustomContent(i),t}}prepareSession(e){return t=>(t.prepare(e),t)}exportColumnGroups(e,t){return i=>{if(!e.skipColumnGroupHeaders){const s=new ju,n=this.displayedGroupCreator.createDisplayedGroups(t,s,null);this.recursivelyAddHeaderGroups(n,i,e.processGroupHeaderCallback)}return i}}exportHeaders(e,t){return i=>{if(!e.skipColumnHeaders){const s=i.onNewHeaderRow();t.forEach((n,l)=>{s.onColumn(n,l,void 0)})}return i}}processPinnedTopRows(e,t){return i=>{const s=this.processRow.bind(this,i,e,t);return e.rowPositions?e.rowPositions.filter(n=>n.rowPinned==="top").sort((n,l)=>n.rowIndex-l.rowIndex).map(n=>this.pinnedRowModel.getPinnedTopRow(n.rowIndex)).forEach(s):this.pinnedRowModel.forEachPinnedTopRow(s),i}}processRows(e,t){return i=>{const s=this.rowModel,n=s.getType(),l=n==="clientSide",u=n==="serverSide",g=!l&&e.onlySelected,C=this.processRow.bind(this,i,e,t),{exportedRows:S="filteredAndSorted"}=e;if(e.rowPositions)e.rowPositions.filter(A=>A.rowPinned==null).sort((A,D)=>A.rowIndex-D.rowIndex).map(A=>s.getRow(A.rowIndex)).forEach(C);else if(this.columnModel.isPivotMode())l?s.forEachPivotNode(C,!0):u?s.forEachNodeAfterFilterAndSort(C,!0):s.forEachNode(C);else if(e.onlySelectedAllPages||g){const A=this.selectionService.getSelectedNodes();this.replicateSortedOrder(A),A.forEach(C)}else S==="all"?s.forEachNode(C):l||u?s.forEachNodeAfterFilterAndSort(C,!0):s.forEachNode(C);return i}}replicateSortedOrder(e){const t=this.sortController.getSortOptions(),i=(s,n)=>{var l,u,g,C;return s.rowIndex!=null&&n.rowIndex!=null?s.rowIndex-n.rowIndex:s.level===n.level?((l=s.parent)==null?void 0:l.id)===((u=n.parent)==null?void 0:u.id)?this.rowNodeSorter.compareRowNodes(t,{rowNode:s,currentPos:(g=s.rowIndex)!=null?g:-1},{rowNode:n,currentPos:(C=n.rowIndex)!=null?C:-1}):i(s.parent,n.parent):s.level>n.level?i(s.parent,n):i(s,n.parent)};e.sort(i)}processPinnedBottomRows(e,t){return i=>{const s=this.processRow.bind(this,i,e,t);return e.rowPositions?e.rowPositions.filter(n=>n.rowPinned==="bottom").sort((n,l)=>n.rowIndex-l.rowIndex).map(n=>this.pinnedRowModel.getPinnedBottomRow(n.rowIndex)).forEach(s):this.pinnedRowModel.forEachPinnedBottomRow(s),i}}getColumnsToExport(e=!1,t=!1,i){const s=this.columnModel.isPivotMode();if(i&&i.length)return this.columnModel.getGridColumns(i);const n=this.gridOptionsService.get("treeData");let l=[];return e&&!s?l=this.columnModel.getAllGridColumns():l=this.columnModel.getAllDisplayedColumns(),t&&!n&&(l=l.filter(u=>u.getColId()!==wr)),l}recursivelyAddHeaderGroups(e,t,i){const s=[];e.forEach(n=>{const l=n;!l.getChildren||l.getChildren().forEach(u=>s.push(u))}),e.length>0&&e[0]instanceof ri&&this.doAddHeaderHeader(t,e,i),s&&s.length>0&&this.recursivelyAddHeaderGroups(s,t,i)}doAddHeaderHeader(e,t,i){const s=e.onNewHeaderGroupingRow();let n=0;t.forEach(l=>{const u=l;let g;i?g=i(this.gridOptionsService.addGridCommonParams({columnGroup:u})):g=this.columnModel.getDisplayNameForColumnGroup(u,"header");const C=u.getLeafColumns().reduce((S,A,D,M)=>{let W=ot.last(S);return A.getColumnGroupShow()==="open"?(!W||W[1]!=null)&&(W=[D],S.push(W)):W&&W[1]==null&&(W[1]=D-1),D===M.length-1&&W&&W[1]==null&&(W[1]=D),S},[]);s.onColumn(u,g||"",n++,u.getLeafColumns().length-1,C)})}};Ei([N("displayedGroupCreator")],Ms.prototype,"displayedGroupCreator",2);Ei([N("columnModel")],Ms.prototype,"columnModel",2);Ei([N("rowModel")],Ms.prototype,"rowModel",2);Ei([N("pinnedRowModel")],Ms.prototype,"pinnedRowModel",2);Ei([N("selectionService")],Ms.prototype,"selectionService",2);Ei([N("rowNodeSorter")],Ms.prototype,"rowNodeSorter",2);Ei([N("sortController")],Ms.prototype,"sortController",2);Ms=Ei([Fe("gridSerializer")],Ms);var Fw="31.2.1",Lw={version:Fw,moduleName:"@ag-grid-community/csv-export",beans:[Ls,Ms]};Rt.__registerModules([vw,Sw,Lw],!1,void 0);var Mw=Object.defineProperty,Kc=Object.getOwnPropertySymbols,Iw=Object.prototype.hasOwnProperty,Ow=Object.prototype.propertyIsEnumerable,qc=(e,t,i)=>t in e?Mw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Eo=(e,t)=>{for(var i in t||(t={}))Iw.call(t,i)&&qc(e,i,t[i]);if(Kc)for(var i of Kc(t))Ow.call(t,i)&&qc(e,i,t[i]);return e},kw=(e,t,i)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:i})};function Fa(e){const t=e&&e.__v_raw;return t?Fa(t):e}function ad(e){return Object.isExtensible(e)&&kw(e,"__v_skip",!0),e}var Nw=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Gw=e=>`on${e.charAt(0).toUpperCase()}${e.substring(1,e.length)}`,_w=()=>{const e={};qi.PUBLIC_EVENTS.map(n=>Gw(Nw(n))).forEach(n=>e[n]=void 0);const i={props(){const n={};return qi.ALL_PROPERTIES.forEach(l=>{var u;this[l]!==qi.VUE_OMITTED_PROPERTY&&(l in this||l in this.gridOptions)&&(n[l]=(u=this[l])!=null?u:this.gridOptions[l])}),n}},s={modelValue:{handler(n,l){!this.gridCreated||!this.api||n!==l&&(n&&l&&n.length===l.length&&n.every((u,g)=>u===l[g])||qi.processOnChange({rowData:n},this.api))},deep:!0},props:{handler(n,l){if(!this.gridCreated||!this.api)return;const u={};Object.entries(n).forEach(([g,C])=>{l[g]!==C&&(u[g]=C)}),qi.processOnChange(u,this.api)},deep:!0}};return qi.ALL_PROPERTIES.filter(n=>n!="gridOptions").forEach(n=>{e[n]={default:qi.VUE_OMITTED_PROPERTY}}),[e,i,s]},jd=class of{static getComponentDefinition(t,i){let s;return typeof t=="string"?s=this.searchForComponentInstance(i,t):s={extends:is(Eo({},t))},s||console.error(`Could not find component with name of ${t}. Is it in Vue.components?`),s.extends?(s.extends.setup&&(s.setup=s.extends.setup),s.extends.props=this.addParamsToProps(s.extends.props)):s.props=this.addParamsToProps(s.props),s}static addParamsToProps(t){return!t||Array.isArray(t)&&t.indexOf("params")===-1?t=["params",...t||[]]:typeof t=="object"&&!t.params&&(t.params={type:Object}),t}static createAndMountComponent(t,i,s,n){const l=of.getComponentDefinition(t,s);if(!l)return;const{vNode:u,destroy:g,el:C}=this.mount(l,{params:Object.freeze(i)},s,n||{});return{componentInstance:u.component.proxy,element:C,destroy:g}}static mount(t,i,s,n){let l=de(t,i);l.appContext=s.$.appContext,l.appContext.provides=Eo(Eo(Eo({},n),l.appContext.provides?l.appContext.provides:{}),s.$parent.$options.provide?s.$parent.$options.provide:{});let u=document.createElement("div");return fc(l,u),{vNode:l,destroy:()=>{u&&fc(null,u),u=null,l=null},el:u}}static searchForComponentInstance(t,i,s=10,n=!1){let l=null,u=t.$parent,g=0;for(;!l&&u&&u.$options&&++g<s;){const C=u;C.$options&&C.$options.components&&C.$options.components[i]?l=C.$options.components[i]:C[i]&&(l=C[i]),u=u.$parent}if(!l){const C=t.$.appContext.components;C&&C[i]&&(l=C[i])}return!l&&!n?(console.error(`Could not find component with name of ${i}. Is it in Vue.components?`),null):l}},Vw=class La extends gw{constructor(t,i){super(),this.parent=t,La.provides||(La.provides=i)}createWrapper(t){const i=this;class s extends Hw{init(u){super.init(u)}hasMethod(u){const g=n.getFrameworkComponentInstance();return g[u]?!0:g.$.setupState[u]!=null}callMethod(u,g){var C;const S=this.getFrameworkComponentInstance(),A=n.getFrameworkComponentInstance();return A[u]?A[u].apply(S,g):(C=A.$.setupState[u])==null?void 0:C.apply(S,g)}addMethod(u,g){n[u]=g}overrideProcessing(u){return i.parent.autoParamsRefresh&&u==="refresh"}processMethod(u,g){return u==="refresh"&&(this.getFrameworkComponentInstance().params=g[0]),this.hasMethod(u)?this.callMethod(u,g):u==="refresh"}createComponent(u){return i.createComponent(t,u)}}const n=new s;return n}createComponent(t,i){return jd.createAndMountComponent(t,i,this.parent,La.provides)}createMethodProxy(t,i,s){return function(){return t.overrideProcessing(i)?t.processMethod(i,arguments):t.hasMethod(i)?t.callMethod(i,arguments):(s&&console.warn("AG Grid: Framework component is missing the method "+i+"()"),null)}}destroy(){this.parent=null}},Hw=class{getGui(){return this.element}destroy(){this.getFrameworkComponentInstance()&&typeof this.getFrameworkComponentInstance().destroy=="function"&&this.getFrameworkComponentInstance().destroy(),this.unmount()}getFrameworkComponentInstance(){return this.componentInstance}init(e){var t;const{componentInstance:i,element:s,destroy:n}=this.createComponent(e);this.componentInstance=i,this.unmount=n,this.element=(t=s.firstElementChild)!=null?t:s}},Bw=class extends qg{constructor(e){super("vue"),this.parent=e}frameworkComponent(e,t){let i=jd.searchForComponentInstance(this.parent,e,10,!0)?e:null;if(!i&&t&&t[e]){const s=t[e];i=jd.searchForComponentInstance(this.parent,s,10,!0)?s:null}return i}isFrameworkComponent(e){return typeof e=="object"}},Ww=new Set(["rowDataUpdated","cellValueChanged","rowValueChanged"]),zw=new Set([L.EVENT_GRID_PRE_DESTROYED]),Qc="onUpdate:modelValue",Uw="update:modelValue",[Yw,Xw,$w]=_w(),jw=is({render(){return ou("div")},props:Eo({gridOptions:{type:Object,default:()=>({})},autoParamsRefresh:{type:Boolean,default:()=>!1},componentDependencies:{type:Array,default:()=>[]},plugins:[],modules:{type:Array,default:()=>[]},modelValue:{type:Array,default:void 0,required:!1}},Yw),data(){return{api:void 0,gridCreated:!1,isDestroyed:!1,gridReadyFired:!1,emitRowModel:void 0}},computed:Xw,watch:$w,methods:{globalEventListenerFactory(e){return(t,i)=>{if(this.isDestroyed)return;t==="gridReady"&&(this.gridReadyFired=!0);const s=zw.has(t);s&&!e||!s&&e||this.updateModelIfUsed(t)}},processChanges(e,t,i){if(this.gridCreated){if(this.skipChange(e,t,i))return;const s={[e]:e==="rowData"?Object.isFrozen(t)?t:ad(Fa(t)):t};qi.processOnChange(s,this.api)}},checkForBindingConflicts(){const e=this;(e.rowData||this.gridOptions.rowData)&&e.modelValue&&console.warn("AG Grid: Using both rowData and v-model. rowData will be ignored.")},getRowData(){var e;const t=[];return(e=this.api)==null||e.forEachNode(i=>{t.push(i.data)}),t},updateModelIfUsed(e){this.gridReadyFired&&this.$attrs[Qc]&&Ww.has(e)&&this.emitRowModel&&this.emitRowModel()},getRowDataBasedOnBindings(){const e=this,t=e.modelValue;return t||(e.rowData?e.rowData:e.gridOptions.rowData)},getProvides(){let e=ru(),t={};for(;e;)e&&e.provides&&(t=Eo(Eo({},t),e.provides)),e=e.parent;return t},skipChange(e,t,i){if(this.gridReadyFired&&e==="rowData"&&this.$attrs[Qc]){if(t===i)return!0;if(t&&i){const s=t,n=i;if(s.length===n.length){for(let l=0;l<s.length;l++)if(s[l]!==n[l])return!1;return!0}}}return!1},debounce(e,t){let i;return()=>{const s=function(){e()};window.clearTimeout(i),i=window.setTimeout(s,t)}}},mounted(){this.emitRowModel=this.debounce(()=>{this.$emit(Uw,Object.freeze(this.getRowData()))},20);const e=this.getProvides(),t=new Vw(this,e),i=ad(qi.combineAttributesAndGridOptions(Fa(this.gridOptions),this));this.checkForBindingConflicts();const s=this.getRowDataBasedOnBindings();s!==qi.VUE_OMITTED_PROPERTY&&(i.rowData=s&&(Object.isFrozen(s)?s:ad(Fa(s))));const n={globalEventListener:this.globalEventListenerFactory().bind(this),globalSyncEventListener:this.globalEventListenerFactory(!0).bind(this),frameworkOverrides:new Bw(this),providedBeanInstances:{frameworkComponentWrapper:t},modules:this.modules};this.api=cw(this.$el,i,n),this.gridCreated=!0},unmounted(){var e;this.gridCreated&&((e=this.api)==null||e.destroy(),this.isDestroyed=!0)}});/*! Bundled license information:

@vue/shared/dist/shared.esm-bundler.js:
  (**
  * @vue/shared v3.4.21
  * (c) 2018-present Yuxi (Evan) You and Vue contributors
  * @license MIT
  **)

@vue/reactivity/dist/reactivity.esm-bundler.js:
  (**
  * @vue/reactivity v3.4.21
  * (c) 2018-present Yuxi (Evan) You and Vue contributors
  * @license MIT
  **)
*/const Kw={class:"t-table",ref:"print-table-ref"},qw={class:"row space-between table-top-box q-mt-xs border-table"},Qw=Z("b",{class:"q-mt-sm"},"Ocultar Columnas",-1),Zw={key:0,class:"col-xs-12 col-sm-6 flex-center",style:{"flex-wrap":"nowrap"}},Jw={class:"flex-center q-pr-sm",style:{"justify-content":"end"}},ex={key:1,class:"col-xs-12 col-sm-5 row flex-center",style:{"flex-wrap":"nowrap"}},tx={class:"flex-center q-pr-sm",style:{"justify-content":"end"}},ix=Z("br",null,null,-1),sx=Z("br",null,null,-1),ox={__name:"t-table",props:{title:{type:String,default:""},pdf:{type:Boolean,default:!1},columns:{type:Array,default:()=>[]},list:{type:Array,default:()=>[]},options:{type:Object,default:()=>{}},components:{type:Object,default:()=>{}},rowclass:{type:Object,default:()=>{}},data:{type:Array,default:()=>{}},buttons:{type:Array,default:()=>[]},setBottom:{type:Function,default:()=>{}},dateFilter:{default:!1,type:Boolean},time:{default:!1,type:Boolean},dateFilterOne:{default:!1,type:Boolean},selection:{default:"single",type:String},size:{default:"12",type:String},get:{default:"",type:String},filterInitial:{default:"",type:String}},emits:["columndata","viewdata","selected","date-change"],setup(e,{emit:t}){const i=t,s=yf();let n=!1;const l=me=>{if(Ve.value)return n=Ve.value.getAllDisplayedColumns(),n[0]===me.column},{u_filterDateTime:u,u_date:g,u_isJsonString:C,u_currency:S,u_fini:A}=bf(),{u_excel:D,u_pdf2:M,u_config:W,u_module:z,u_loading:U,u_get:X,u_getVal:q,u_pdf_style:_,u_setVal:J,u_getLang:se,u_getCache:$,u_height:Y,u_random:oe}=uo(),{u_printHtml:Oe}=wf(),re={},Ve=pe(),Pe=pe(!1),He=pe(""),tt=pe(""),Ge=pe(""),et=pe(""),Gt=pe("482px"),At=pe(null),vt=pe(null),_t=pe(null),ti=pe(!1),ii=pe(!1),pt=pe(!1),Ke=pe(!1),qt=pe(!1),Kt=pe({}),xt=pe({}),ht=pe({}),Mt=pe({}),si=pe([]),Pt=pe([]),Ee=pe([]),ne=pe([]),te=e,qe=()=>{ii.value=!0},Ne=me=>{let Se;me<=775?Se="482px":Se="calc(100vh -  150px)",Gt.value=Se},Ae=me=>{let Se="",Te=0,St=me.data.count_min?me.data.count_min:0;const Ct=me.data.end_date?me.data.end_date:"";if(St=parseFloat(St),St>0){let O=me.data.count?me.data.count:0;O=parseFloat(O),St>=O&&(Te=1,Se="Stock Min.")}if(typeof Ct=="string"&&Ct!=""){const O=new Date(g.value+"T00:00:00").getTime(),o=new Date(Ct+"T00:00:00").getTime();if(o<=O)Te=3,Se="Caducado";else{let a=(o-O)/1e3/86400;a<=8&&a>0&&(Te=2,Se="Pr\xF3ximo a Caducar")}}return Te>0?"("+Te+") "+Se:""};re.stateInventory=Ae;const ve=me=>{let Se="";if((me.value||0)&&C(me.value)){me.value=JSON.parse(me.value);for(const Te in me.value)Object.hasOwnProperty.call(me.value,Te)&&(Se+=" - "+Te)}return Se};re.creditColumn=ve;const le=me=>(parseFloat(me.value)||0)===1?"Contado":"Cr\xE9dito";re.setMethod=le;const _e=me=>{const Se=parseFloat(me.value)||0;return S(Se)};re.currencyFormat=_e;const fe=me=>{const Se=parseFloat(me.value)||0;return S(Se," ")};re.decimalFormat=fe;const ye=me=>me.value?"SI":"NO";re.YesNoFormat=ye;const zt=me=>{let Se=(me||{}).data||{};switch(Se=Se.dian_state||Se.state||0,Se=parseInt(Se),Se){case 0:return"N/A";case 1:return"Pendiente";case 2:return"Enviada";case 3:return"Aprobada";case 4:return"Rechazada";default:return""}};re.dianState=zt;const Ie=me=>{const Se=me.colDef.field||"",Te=(me.data||[])[Se]||me.value||"",St=xt.value[me.colDef.field]||"",Ct=Mt.value[St];if(Array.isArray(Ct)){let O=Ct.filter(o=>o.value==Te);return O||(O=Ct.filter(o=>o.id==Te)),O=(O[0]||{}).label||(O[0]||{}).name||"",O}};re.join=Ie;const ue=()=>{let me=[];n.forEach(Se=>{me.push(Se.userProvidedColDef)}),i("columndata",me)};re.dataColumns=ue;const Me=()=>{let me=[];n.forEach(St=>{me.push(St.userProvidedColDef)});let Se=[];Ve.value.forEachNode(function(St){Se.push(St.data)}),i("viewdata",{columns:me,data:Se})};re.dataReturn=Me;const bt=()=>{Ve.value.rowClassRules({"rag-transparent":"data.age == 1"})};re.styleRowsAction=bt;const at=(me,Se)=>{console.log("Action",me,Se)};re.action=at;const Re=ls(()=>te.buttons.length*43);re.btnSize=Re;const gt=()=>{let me=qt.value||A(),Se=Ke.value||"";te.time&&(me=u(me),Se=u(Se)),me||(me=""),Se||(Se=""),et.value=me+" - "+Se,i("date-change",[me,Se]),te.get!==""&&va()},$e=(me=!0)=>{let Se=te.title||"";Se.length>0&&(Se=" - "+Se);const Te=q("logo")||"",St=et.value,Ct=q("name");let O=`<div style="padding: 30px;"><table class="print-margin print-table border-table"><thead><tr><th colspan="100%"><div style="display: flex; justify-content: space-between; widht: 100%; align-items: center;"><img src="${Te}" alt="" class="logocs-menu" /> ${Ct} ${Se}<div>${St}</div></div></th></tr><tr>`,o=Ve.value.getAllDisplayedColumns();if(Array.isArray(o))return o.forEach(r=>{let a=r.colDef,d=r.align?' style="text-align:'+a.align+'"':"";O+="<th"+d+"></div>"+a.headerName+"</th>"}),O+="</tr></thead><tbody>",Ve.value.forEachNodeAfterFilterAndSort(r=>{O+="<tr>",o.forEach(a=>{let d=a.colDef,h=r.data[d.field]||"",c=Kt.value[d.field];(c||0)&&c.includes("->")&&(c=c.split("->")[0]),(c||0)&&me&&(h=re[c]({value:h,colDef:d}));let p=d.align?' style="text-align:'+d.align+'"':"";O+="<td"+p+">"+h+"</td>"}),O+="</tr>"}),O+="</tbody><tfoot><tr>",o.forEach(r=>{let a=r.colDef,d=ht.value[a.field]||"",h=Kt.value[a.field];(h||0)&&h.includes("->")&&(h=h.split("->")[0]),(h||0)&&me&&(d=re[h]({value:d,colDef:a}));let c=a.align?' style="text-align:'+a.align+'"':"";O+="<th"+c+">"+d+"</th>"}),O+="</tr></tfoot></table></div>",O},mi=()=>{const me=$e(!0);let Se=document.createElement("DIV");Se.innerHTML=me,D(Se),Se={}},It=()=>{const me=$e(!0);let Se=document.createElement("DIV");Se.innerHTML=me+_,Se.className="q-mb-lg q-pb-lg";const Te=(te.get||0)&&te.get!==""?te.get:s.path;M(Te,Se,"letter","landscape",.5),Se={}},ha=()=>{const me=$e(!0);Oe(me)},Ml=()=>{const me=Ve.value.getDisplayedRowCount();for(var Se=0;Se<me;Se++)Ve.value.getDisplayedRowAtIndex(Se)};re.printAllDisplayedRows=Ml;const ca=(me=!1,Se=!1)=>{vt.value=me||te.columns;let Te=Se||te.rowclass;if(C(Te)&&(Te=JSON.parse(Te)),Te){let St={};for(const Ct in Te)if(Te.hasOwnProperty(Ct)){const O=Te[Ct];St[Ct]=O}At.value.rowClassRules=St}},Il=(me,Se)=>{let Te=me+"";for(;Te.length<Se;)Te="0"+Te;return Te};re.pad=Il;const Kr=()=>{if(W.value.only_admin_totals&&!z("config"))return;Ee.value=[];let me=te.setBottom(ht);if(String(te.setBottom)!=="() => {}"&&(ht.value={},Ve.value.forEachNodeAfterFilter(me),Ve.value.setGridOption("pinnedBottomRowData",[ht.value]),At.value.api&&ne.value)){let Se=Ve.value.getModel(),Te=ne.value.length;Se.getRowCount().toLocaleString()+""+Te.toLocaleString()}},Ol=()=>{Ve.value&&Kr()},kl=me=>{Ve.value=me.api,Kr()},Qs=()=>{},ua=()=>{},qr=()=>{},pa=()=>{},Nl=me=>{},ga=me=>{const Se=me.node,Te=Se.isSelected();Se.setSelected(!Te)},fa=()=>{let me=Ve.value.getSelectedRows();me.length==1&&(me=me[0]),i("selected",me)},Gl=()=>{},_l=()=>{},Vl=()=>{},Hl=()=>{},Bl=()=>{},Qr=me=>{},ma=()=>{},Zr=()=>{setTimeout(()=>{Ve.value.setQuickFilter(Ge.value)},500)},$i=()=>{},ks=()=>{let me=[];Pt.value&&Array.isArray(Pt.value)&&Pt.value.forEach(Te=>{(Te.hide||0)&&Te.hide===!0&&me.push(Te.field)});let Se=(te.get||0)&&te.get!==""?te.get:s.path;Se!==""&&J("t-hidden-"+Se,me)},Zs=()=>{let me=(te.get||0)&&te.get!==""?te.get:s.path;if(me!==""){const Se=q("t-hidden-"+me);Array.isArray(Se)&&Array.isArray(Pt.value)&&Pt.value.forEach((Te,St)=>{(Te.field||0)&&Se.indexOf(Te.field)>-1&&(Pt.value[St].hide=!0)})}},Wl=()=>{const me=JSON.stringify(Pt.value);Pt.value=JSON.parse(me),ks()},Js=me=>{si.value.indexOf(me)>=0||si.value.push(me),!ti.value&&si.value.length>=vt.value.length&&(ti.value=!0)},Jr=()=>{Pt.value=[],ti.value=!1,se.value&&(Array.isArray(vt.value)&&vt.value.length>0&&(Kt.value={},vt.value.forEach((me,Se)=>{Kt.value[me.field]=me.function??null;let Te={};for(const St in me)if(me.hasOwnProperty(St)){const Ct=me[St];Te[St]=Ct}if(Te.headerName=(Te.xlabel?se.value[Te.xlabel]:Te.label)||"",Te.align&&(Te.cellStyle={"text-align":Te.align}),Te.function)if(Te.function.includes("->")){const St=Te.function.split("->"),Ct=St[0],O=St[1]||"";if(Ct=="join"){let o="";O=="client_state"?o="general-lists/ListOptionsSelect/client_state":O=="media"?o="general-lists/ListOptionsSelect/media":O=="inventory"?o="general-inventory":O=="yesno"?Mt.value[O]=[{label:"SI",value:1},{label:"NO",value:0},{label:"SI",value:"1"},{label:"NO",value:"0"}]:O=="state"?Mt.value[O]=[{label:"Activo",value:1},{label:"Inactivo",value:0},{label:"Activo",value:"1"},{label:"Inactivo",value:"0"}]:O.indexOf("getCache.")>-1&&(o=O.split("getCache.").join("")),o!=""?$(o).then(r=>{Mt.value[O]=r.res||!1,Js(Se)}).catch(()=>{Js(Se)}):Js(Se)}else Js(Se);Te.function=Ct,xt.value[Te.field]=O}else Js(Se);else Js(Se);Te.format?Te.valueFormatter=re[Te.function]:Te.cellRenderer||(Te.cellRenderer=re[Te.function]),Te.function=="join"&&(Te.valueGetter=re[Te.function]),(Te.filter||0)&&Te.filter!=""||(Te.filter="agTextColumnFilter",(Te.function==="currencyFormat"||Te.function==="decimalFormat")&&(Te.filter="agNumberColumnFilter")),delete Te.label,delete Te.function,delete Te.align,delete Te.format,Te.sortable=!0,Pt.value.push(Te)})),pt.value=!0),Zs()},va=()=>{(te.get||0)&&te.get!==""?(te.dateFilter?(tt.value="/x/"+qt.value+"/"+Ke.value,et.value=qt.value+" - "+Ke.value):te.dateFilterOne&&(tt.value="/x/"+Ke.value,et.value=Ke.value),U(1),X(te.get+tt.value).then(me=>{me=me||{},ne.value=me.res||[];const Se=me.config||{},Te=Se.columns||[],St=Se.rowclass||[];ca(Te,St),Jr(),Zs()}).finally(()=>{U(0)})):Zs()};return Jd(()=>{He.value=oe(),At.value={defaultColDef:{checkboxSelection:l,resizable:!0},context:{pagination:!0,paginationPageSize:9,componentParent:this,enableSorting:!0,quickFilterText:!0,enableFilter:!0,enableColResize:!0,suppressCsvExport:!0},localeText:{page:"P\xE1gina",more:"Mas",to:"a",of:"de",next:">",last:">>",first:"<<",previous:"<",loadingOoo:"Cargando...",filterOoo:"Filtrar...",applyFilter:"Aplicar filtro...",equals:"Igual",notEqual:"Diferente de",blank:"Vac\xEDo",notBlank:"No vac\xEDo",empty:"Choose One",lessThan:"Menor que",greaterThan:"Mayor que",lessThanOrEqual:"Menor o igual que",greaterThanOrEqual:"Mayor o Igual que",inRange:"Entre",inRangeStart:"desde",inRangeEnd:"hasta",contains:"Contiene",startsWith:"Empieza con",endsWith:"Termina con",notContains:"No Contiene",noRowsToShow:"Sin resultados en \xE9sta consulta"},rowHeight:40,suppressPropertyNamesCheck:!0};for(const me in te.options)if(te.options.hasOwnProperty(me)){const Se=te.options[me];At.value[me]=Se}ca()}),Us(()=>{setTimeout(()=>{Pe.value=!0,Ne(Y);const me=g.value;qt.value=te.time?me+" 00:00:00":me,Ke.value=te.time?me+" 23:59:59":me,et.value=qt.value+" - "+Ke.value,_t.value=te.list,te.data?ne.value=te.data:gt(),te.get!==""?va():Jr()},1)}),ui(se,()=>{Jr(),pt.value=!0}),ui(Y,me=>{Ne(me)}),ui(te,me=>{me.data&&(ne.value=me.data)}),(me,Se)=>{const Te=Dt("t-input"),St=Dt("t-modal");return ee(),be("div",Kw,[Z("div",qw,[Z("div",{class:As(["col-xs-12 flex-center table-options-box",{"col-sm-4":e.size=="12","col-sm-6":e.size=="6"}])},[de(xf,{size:"sm",rounded:"",class:"q-mr-sm q-py-sm hide-cols","content-class":"table-options-box-drop ",color:"primary",icon:"grid_off"},{default:De(()=>[de(Sf,{link:""},{default:De(()=>[de(Ma,{class:"flex-center"},{default:De(()=>[Qw]),_:1}),(ee(!0),be(yi,null,Es(Pt.value,Ct=>(ee(),ke(Ma,{key:Ct.field},{default:De(()=>[de(Te,{"onUpdate:modelValue":O=>{Ct.hide=O,Wl()},type:"checkbox",modelValue:Ct.hide,label:Ct.headerName},null,8,["onUpdate:modelValue","modelValue","label"])]),_:2},1024))),128))]),_:1})]),_:1}),ct(W).only_admin_export&&!ct(z)("config")?we("",!0):(ee(),ke(Ye,{key:0,size:"sm",round:"",class:"q-mr-sm",color:"primary",onClick:ha,icon:"print",label:""})),ct(W).only_admin_export&&!ct(z)("config")?we("",!0):(ee(),ke(Ye,{key:1,size:"sm",round:"",class:"q-mr-sm",color:"primary",onClick:mi,icon:"fa fa-file-excel",label:""})),ct(W).only_admin_export&&!ct(z)("config")?we("",!0):(ee(),ke(Ye,{key:2,size:"sm",round:"",class:"q-mr-sm",color:"primary",onClick:It,icon:"fa fa-file-pdf",label:""})),ct(z)("superadmin")?(ee(),ke(Ye,{key:3,size:"sm",round:"",class:"q-mr-sm",color:"primary",onClick:qe,icon:"fa fa-cog",label:""})):we("",!0),wt(me.$slots,"bar")],2),e.dateFilter?(ee(),be("div",Zw,[qt.value?(ee(),ke(Te,{key:0,style:{width:"45%"},class:"q-px-xs",label:"Fecha Inicial",modelValue:qt.value,"onUpdate:modelValue":Se[0]||(Se[0]=Ct=>qt.value=Ct),type:e.time?"datetime":"date"},null,8,["modelValue","type"])):we("",!0),Ke.value?(ee(),ke(Te,{key:1,style:{width:"45%"},class:"q-px-xs",label:"Fecha Final",modelValue:Ke.value,"onUpdate:modelValue":Se[1]||(Se[1]=Ct=>Ke.value=Ct),type:e.time?"datetime":"date"},null,8,["modelValue","type"])):we("",!0),Z("div",Jw,[de(Ye,{icon:"search",color:"primary",size:"sm",round:"",onClick:gt})])])):we("",!0),e.dateFilterOne?(ee(),be("div",ex,[Ke.value?(ee(),ke(Te,{key:0,xs:" ",col:"",style:{width:"100%"},class:"q-px-xs",label:"Fecha",modelValue:Ke.value,"onUpdate:modelValue":Se[2]||(Se[2]=Ct=>Ke.value=Ct),type:e.time?"datetime":"date"},null,8,["modelValue","type"])):we("",!0),Z("div",tx,[de(Ye,{icon:"search",color:"primary",size:"sm",round:"",onClick:gt})])])):we("",!0),Z("div",{class:As([{"col-sm-3":!e.dateFilter&&!e.dateFilterOne,"col-sm-2":e.dateFilter||e.dateFilterOne},"col-xs-12"])},[de(Te,{onKeyup:Zr,modelValue:Ge.value,"onUpdate:modelValue":Se[3]||(Se[3]=Ct=>Ge.value=Ct),type:"text",class:"",icon:"search",label:"Buscar"},null,8,["modelValue"])],2),ct(z)("superadmin")?(ee(),ke(St,{key:2,modelValue:ii.value,"onUpdate:modelValue":Se[4]||(Se[4]=Ct=>ii.value=Ct),title:"Table Settings"},{default:De(()=>[ut(ze(e.columns),1)]),_:1},8,["modelValue"])):we("",!0)]),ti.value&&Pe.value?(ee(),ke(ct(jw),{key:He.value,components:e.components,columnDefs:Pt.value,class:"ag-theme-balham t-table",rowData:ne.value,pagination:!0,paginationAutoPageSize:!0,gridOptions:At.value,enableColResize:!0,enableSorting:!0,enableFilter:!0,groupHeaders:!0,suppressRowClickSelection:!0,rowSelection:e.selection,onModelUpdated:Ol,onCellClicked:ga,onCellDoubleClicked:ua,onCellContextMenu:qr,onCellValueChanged:Qs,onCellFocused:pa,onRowSelected:Nl,onSelectionChanged:fa,onBeforeFilterChanged:Gl,onAfterFilterChanged:_l,onFilterModified:Vl,onBeforeSortChanged:Hl,onAfterSortChanged:Bl,onVirtualRowRemoved:Qr,onRowClicked:ma,onGridReady:kl,onColumnEverythingChanged:$i,onColumnRowGroupChanged:$i,onColumnValueChanged:$i,onColumnMoved:$i,onColumnVisible:$i,onColumnGroupOpened:$i,onColumnResized:$i,onColumnPinnedCountChanged:$i},null,8,["components","columnDefs","rowData","gridOptions","rowSelection"])):we("",!0),ix,sx],512)}}},rx={key:2,class:"t-edit-list"},nx={class:"form-border"},ax=Z("br",null,null,-1),lx=Z("br",null,null,-1),dx={__name:"t-edit-list",props:{default:{type:String,default:"list"},dateFilter:{type:Boolean,default:!1},dateFilterOne:{type:Boolean,default:!1},border:{type:Boolean,default:!1},setBottom:{type:Function,default:()=>{}},selection:{type:String,default:"single"},title:{type:String,default:""},code:{type:String,default:""},id:{type:String,default:""},get:{type:String,default:""},delete:{type:String,default:""},modelValue:{type:Boolean,default:!1},object:{type:Boolean,default:!1},modal:{type:Boolean,default:!0},mixed:{type:Boolean,default:!1},onlyForm:{type:Boolean,default:!1},cache:{type:Boolean,default:!0},copy:{type:Boolean,default:!1},label:{type:String,default:""},icon:{type:String,default:""},size:{type:String,default:""},color:{type:String,default:""},textColor:{type:String,default:"red"},ajax:{type:String,default:""},buttons:{type:Array,default:()=>[]}},emits:["mode","setSelected","selected","date-change","setData","saved","clean","initData","dataReady","dataError","update:modelValue","focus","keydown","keypress","keyup","keydown","blur","setPay","change","closed","setEngagement"],setup(e,{expose:t,emit:i}){const s=Zd(),n=i,l=pe(),u=pe(!0),g=pe(!1),C=pe(!1),S=pe({}),A=pe("list"),D=pe({}),M=pe([]),W=pe({}),z=pe({}),U=pe({}),X=pe(""),q=pe(!0),_=pe(!1),J=pe({form_save_text:!1,form_save_module:!1,form_save_icon:!1,form_edit:!1,form_edit_text:!1,form_edit_module:!1,form_edit_icon:!1}),{u_module:se,u_getLang:$,u_data:Y,u_scrollTop:oe,u_get:Oe,u_getCache:re,u_clone:Ve,u_updateCache:Pe,u_delete:He}=uo(),tt=ls(()=>Ee.delete),Ge=ne=>{ne=ne||{};let te=ne.res||[];n("dataReady",te);const qe=ne.config||{};if(M.value=qe.columns||[],W.value=qe.rowclass||{},Ee.object){if(Y.value=[],te){if(U.value=te,typeof te=="string"){let Ne={name:te};Ne[Ee.code]=Ee.id,Y.value.push(Ne)}else for(const Ne in te)if(te.hasOwnProperty(Ne)){let Ae=te[Ne];typeof Ae=="string"&&(Ae={name:Ae}),Ae[Ee.code]=Ne,Y.value.push(Ae)}}}else Y.value=te;s.loading.hide()},et=()=>{Ee.cache?re(Ee.get+X.value).then(Ge).catch(()=>{n("dataError")}):Oe(Ee.get+X.value).then(Ge).catch(()=>{n("dataError")})},Gt=()=>{u.value=!1,xo(()=>{u.value=!0})},At=ne=>{if(C.value=ne[Ee.code],S.value=ne,n("setSelected",ne),n("selected",ne),Array.isArray(ne))if(ne.length>0){let te=[];ne.forEach(qe=>{qe[Ee.code]&&te.push(qe[Ee.code])}),C.value=te.join("-")}else _t();else Ee.mixed&&vt(C.value)},vt=ne=>{if(Array.isArray(Y.value)){let te=Y.value.find(qe=>qe[Ee.code]==ne);if(Ee.get.indexOf("query/")>=0){let qe={};qe[Ee.code]=te[Ee.code],qe=JSON.stringify(qe),te=qe}else if(te)te=te[Ee.code];else return;Oe(Ee.get,[te,!0]).then(qe=>{if((qe||0)&&qe.res){if(typeof qe.res=="string"){let Ne={name:qe.res};Ne[Ee.code]=ne,z.value=Ne}else z.value=qe.res;n("setData",z.value),n("initData",z.value),A.value="edit"}else n("setData",{}),n("initData",{})}).catch(()=>{n("setData",{}),n("initData",{})})}},_t=()=>{A.value="list",C.value=!1,n("clean",!0),n("setData",{}),l.value&&l.value.cleanData()},ti=ne=>{J.value=ne},ii=ne=>{if(Ee.dateFilter||Ee.dateFilterOne){let te=ne[0]||"",qe=ne[1]||"";X.value="/x"+(te!=""?"/"+te:"")+(qe!=""?"/"+qe:""),Ee.dateFilterOne&&(X.value="/x"+(qe!=""?"/"+qe:"")),et(),n("date-change",[te,qe])}},pt=(ne,te)=>{n(ne,te),D.value[te[0]]&&D.value[te[0]]!==te[1]&&n("setData",z.value),D.value[te[0]]=te[1]},Ke=(ne=!1)=>{l.value.sendForm(ne),_.value=!0},qt=()=>{xo(()=>{_.value=!1})},Kt=ne=>{C.value=!1,xo(()=>{_.value=!1});let te=ne.method||"",qe=ne.res||"";A.value="list",Oe(Ee.get,[qe]).then(Ne=>{if((Ne||0)&&Ne.res){n("saved",Ne.res);let Ae=Ne.res,ve=Ae[Ee.code]||Ee.code;const le=Ve(Ne.res);if(Ee.object){let _e={};for(const fe in Ae)if(Ae.hasOwnProperty(fe)){ve=fe;let ye=Ae[fe];typeof ye=="string"&&(_e.name=ye),_e[Ee.code]=fe}Ae=_e}if(te=="post")Y.value.unshift(Ae);else{let _e=Y.value.findIndex(ye=>ye[Ee.code]==ve),fe=Y.value;q.value=!1,xo(()=>{for(const ye in fe[_e])fe[_e].hasOwnProperty(ye)&&Ae.hasOwnProperty(ye)&&(fe[_e][ye]=Ae[ye]);q.value=!0,Y.value=fe,_t()})}_t(),Ee.object?(U.value[ve]=le[ve],Pe(Ee.get,U.value)):Pe(Ee.get,Y.value)}}),g.value=!1},xt=ne=>{ne&&Array.isArray(ne)?(ne.forEach(te=>{const qe=Y.value.findIndex(Ae=>Ae[Ee.code]===te.id);let Ne=Y.value[qe];for(const Ae in te)te.hasOwnProperty(Ae)&&(Ne[Ae]=te[Ae]);Y.value[qe]=Ne}),Pe(Ee.id,Y.value),_t()):console.log("Array is spected")},ht=()=>{A.value="new",C.value=!1,xo(()=>{l.value&&l.value.cleanData()})},Mt=ne=>{s.dialog({title:"",message:$.msg_agree_delete_item,ok:$.btn_agree,cancel:$.btn_disagree}).onOk(()=>{He(Ee.delete,[ne]).then(te=>{(te||0)&&te.res&&(A.value="list",ne.split("-").forEach(Ne=>{Y.value=Y.value.filter(Ae=>Ae[Ee.code]!=Ne),Ee.object?(delete U.value[Ne],Pe(Ee.get,U.value)):Pe(Ee.get,Y.value)}))})}).onCancel(()=>{})},si=(ne="")=>{Y.value=Y.value.filter(te=>te[Ee.code]!=ne)},Pt=(ne="",te="")=>{n(te,ne)};Us(()=>{Ee.onlyForm&&vt(),Ee.modal||et(),A.value=Ee.default});const Ee=e;return ui(Ee,ne=>{ne.default&&(A.value=ne.default),ne.modelValue&&(g.value=ne.modelValue)}),ui(g,()=>{n("update:modelValue",g.value),et(),_.value=!1}),ui(A,ne=>{n("mode",ne),oe()}),t({updateList:xt,removeElement:si,refreshForm:Gt,checkList:et,tformRef:l}),(ne,te)=>{const qe=Dt("t-form"),Ne=Dt("t-table"),Ae=Dt("t-progress"),ve=Dt("t-modal"),le=Dt("t-title"),_e=Dt("t-footer");return ee(),be("div",null,[e.modal&&(e.label||e.icon)?(ee(),ke(Ye,{key:0,icon:e.icon,label:e.label,round:!e.label,size:e.size,color:e.color,"text-color":e.textColor,onClick:te[0]||(te[0]=fe=>g.value=!g.value)},null,8,["icon","label","round","size","color","text-color"])):we("",!0),e.modal?(ee(),ke(ve,{key:1,onHide:te[16]||(te[16]=fe=>{C.value=!1,A.value="list",n("closed")}),modelValue:g.value,"onUpdate:modelValue":te[17]||(te[17]=fe=>g.value=fe),title:e.title},{footer:De(()=>[Z("div",null,[C.value&&(A.value=="list"||e.mixed)?(ee(!0),be(yi,{key:0},Es(e.buttons,(fe,ye)=>Nt((ee(),ke(Ye,{key:"btns-"+ye,rounded:"",class:"hide-mobile-btn-text",onClick:zt=>Pt(fe.data?S.value:C.value,fe.action||""),icon:fe.icon||"",color:fe.color||"",dense:"",size:"md",label:ct($)[fe.label||""]||fe.label||""},null,8,["onClick","icon","color","label"])),[[Bt,fe.module?ct(se)(fe.module):!1]])),128)):we("",!0),C.value&&A.value=="edit"||A.value=="new"?(ee(),ke(Ye,{key:1,rounded:"",class:"hide-mobile-btn-text",icon:"arrow_back",color:"primary",onClick:te[12]||(te[12]=fe=>{A.value="list",C.value=!1}),label:ct($).btn_list},null,8,["label"])):we("",!0),A.value=="list"?(ee(),ke(Ye,{key:2,rounded:"",class:"hide-mobile-btn-text",onClick:ht,icon:"add",color:"primary",dense:"",size:"md",label:ct($).btn_new},null,8,["label"])):we("",!0),e.copy&&C.value&&(e.mixed||A.value=="edit")?(ee(),ke(Ye,{key:3,rounded:"",icon:J.value.form_save_icon||"file_copy",color:"primary",onClick:te[13]||(te[13]=fe=>Ke(!0)),label:J.value.form_save_text||ct($).btn_save+" COPIA",disabled:_.value},null,8,["icon","label","disabled"])):we("",!0),C.value&&A.value=="edit"||A.value=="new"?(ee(),ke(Ye,{key:4,rounded:"",icon:J.value.form_save_icon||"save",color:"primary",onClick:Ke,label:J.value.form_save_text||ct($).btn_save,disabled:_.value},null,8,["icon","label","disabled"])):we("",!0),C.value&&A.value=="list"?(ee(),ke(Ye,{key:5,rounded:"",class:"hide-mobile-btn-text",onClick:te[14]||(te[14]=fe=>vt(C.value)),icon:J.value.form_edit_icon||"edit",color:"primary",dense:"",size:"md",label:J.value.form_edit_text||ct($).btn_edit},null,8,["icon","label"])):we("",!0),C.value&&A.value=="list"&&tt.value!=""?(ee(),ke(Ye,{key:6,rounded:"",class:"hide-mobile-btn-text",onClick:te[15]||(te[15]=fe=>Mt(C.value)),icon:"delete",color:"negative",dense:"",size:"md",label:ct($).btn_delete},null,8,["label"])):we("",!0),wt(ne.$slots,"footer")])]),default:De(()=>[wt(ne.$slots,"top-main"),(A.value=="new"||A.value=="edit")&&u.value?(ee(),ke(qe,{key:0,ref_key:"tformRef",ref:l,code:e.id,"key-name":Ee.code,onSaved:te[1]||(te[1]=fe=>Kt(fe)),onInvalid:te[2]||(te[2]=fe=>qt(fe)),"hide-buttons":!0,"hide-border":!0,"hide-title":!0,data:z.value,onFocus:te[3]||(te[3]=fe=>pt("focus",fe)),onBlur:te[4]||(te[4]=fe=>pt("blur",fe)),onKeydown:te[5]||(te[5]=fe=>pt("keydown",fe)),onKeyup:te[6]||(te[6]=fe=>pt("keyup",fe)),"onUpdate:modelValue":te[7]||(te[7]=fe=>pt("change",fe)),onKeypress:te[8]||(te[8]=fe=>pt("keypress",fe)),onClean:te[9]||(te[9]=fe=>z.value={}),onFormConfig:te[10]||(te[10]=fe=>ti(fe))},{top:De(()=>[wt(ne.$slots,"top")]),bottom:De(()=>[wt(ne.$slots,"bottom")]),_:3},8,["code","key-name","data"])):we("",!0),A.value=="new"||A.value=="edit"||e.mixed?wt(ne.$slots,"default",{key:1}):we("",!0),wt(ne.$slots,"middle"),A.value=="list"&&M.value.length>0?(ee(),ke(Ne,{key:2,columns:M.value,rowclass:W.value,data:ct(Y),onSelected:te[11]||(te[11]=fe=>At(fe)),"set-bottom":e.setBottom,selection:e.selection,"date-filter":e.dateFilter,onDateChange:ii},null,8,["columns","rowclass","data","set-bottom","selection","date-filter"])):A.value=="list"&&M.value.length==0?(ee(),ke(Ae,{key:3})):we("",!0)]),_:3},8,["modelValue","title"])):(ee(),be("div",rx,[Z("div",nx,[wt(ne.$slots,"top-main"),(e.mixed||A.value=="new"||A.value=="edit")&&u.value?(ee(),ke(qe,{key:0,ref_key:"tformRef",ref:l,code:e.id,onSaved:te[18]||(te[18]=fe=>Kt(fe)),onInvalid:te[19]||(te[19]=fe=>qt()),"hide-buttons":!0,"hide-border":!0,"hide-title":!1,data:z.value,onFocus:te[20]||(te[20]=fe=>pt("focus",fe)),onBlur:te[21]||(te[21]=fe=>pt("blur",fe)),onKeydown:te[22]||(te[22]=fe=>pt("keydown",fe)),onKeyup:te[23]||(te[23]=fe=>pt("keyup",fe)),"onUpdate:modelValue":te[24]||(te[24]=fe=>pt("update:modelValue",fe)),onKeypress:te[25]||(te[25]=fe=>pt("keypress",fe)),onClean:te[26]||(te[26]=fe=>z.value={}),onFormConfig:te[27]||(te[27]=fe=>ti(fe))},{top:De(()=>[wt(ne.$slots,"top")]),title:De(()=>[wt(ne.$slots,"title")]),bottom:De(()=>[wt(ne.$slots,"bottom")]),_:3},8,["code","data"])):we("",!0),A.value=="new"||A.value=="edit"?wt(ne.$slots,"default",{key:1}):we("",!0),wt(ne.$slots,"middle"),!e.mixed&&A.value=="list"?(ee(),ke(le,{key:2,name:ct($)[e.title]||e.title},{default:De(()=>[wt(ne.$slots,"title"),wt(ne.$slots,"subtitle")]),_:3},8,["name"])):we("",!0),(e.mixed||A.value=="list")&&M.value.length>0&&q.value?(ee(),ke(Ne,{key:3,title:e.mixed?"":e.title,columns:M.value,rowclass:W.value,data:ct(Y),onSelected:te[28]||(te[28]=fe=>At(fe)),"set-bottom":e.setBottom,selection:e.selection,"date-filter":e.dateFilter,"date-filter-one":e.dateFilterOne,onDateChange:ii},null,8,["title","columns","rowclass","data","set-bottom","selection","date-filter","date-filter-one"])):A.value=="list"&&M.value.length==0?(ee(),ke(Ae,{key:4})):we("",!0),ax,lx,de(_e,null,{default:De(()=>[wt(ne.$slots,"footer"),C.value&&(A.value=="list"||e.mixed)?(ee(!0),be(yi,{key:0},Es(e.buttons,(fe,ye)=>Nt((ee(),ke(Ye,{rounded:"",class:"hide-mobile-btn-text q-pa-sm",key:"btns-"+ye,onClick:zt=>Pt(fe.data?S.value:C.value,fe.action||""),icon:fe.icon||"",color:fe.color||"",dense:"",size:"md",label:ct($)[fe.label||""]||fe.label||""},null,8,["onClick","icon","color","label"])),[[Bt,fe.module?ct(se)(fe.module):!0]])),128)):we("",!0),C.value&&(A.value=="list"||e.mixed)?(ee(),ke(Ye,{key:1,rounded:"",class:"hide-mobile-btn-text q-pa-sm",onClick:te[29]||(te[29]=fe=>Mt(C.value)),icon:"delete",color:"negative",dense:"",size:"md",label:ct($).btn_delete},null,8,["label"])):we("",!0),!e.mixed&&(C.value&&A.value=="edit"||A.value=="new")?(ee(),ke(Ye,{key:2,rounded:"",class:"hide-mobile-btn-text q-pa-sm",icon:"arrow_back",color:"primary",onClick:te[30]||(te[30]=fe=>{A.value="list",C.value=!1}),label:ct($).btn_back},null,8,["label"])):we("",!0),!e.mixed&&A.value=="list"?(ee(),ke(Ye,{key:3,rounded:"",class:"hide-mobile-btn-text q-pa-sm",onClick:ht,icon:"add",color:"primary",dense:"",size:"md",label:ct($).btn_new},null,8,["label"])):we("",!0),C.value&&A.value=="list"?(ee(),ke(Ye,{key:4,rounded:"",class:"hide-mobile-btn-text q-pa-sm",onClick:te[31]||(te[31]=fe=>vt(C.value)),icon:J.value.form_edit_icon||"edit",color:"primary",dense:"",size:"md",label:J.value.form_edit_text||ct($).btn_edit},null,8,["icon","label"])):we("",!0),e.copy&&C.value&&(e.mixed||A.value=="edit")?(ee(),ke(Ye,{key:5,rounded:"",class:"hide-mobile-btn-text q-pa-sm",icon:J.value.form_save_icon||"file_copy",color:"primary",onClick:te[32]||(te[32]=fe=>Ke(!0)),label:J.value.form_save_text||ct($).btn_save+" COPIA",disabled:_.value},null,8,["icon","label","disabled"])):we("",!0),e.mixed||C.value&&A.value=="edit"||A.value=="new"?(ee(),ke(Ye,{key:6,rounded:"",class:"hide-mobile-btn-text q-pa-sm",icon:J.value.form_save_icon||"save",color:"primary",onClick:Ke,label:J.value.form_save_text||ct($).btn_save,disabled:_.value},null,8,["icon","label","disabled"])):we("",!0),e.mixed&&z.value.id?(ee(),ke(Ye,{key:7,rounded:"",class:"hide-mobile-btn-text",onClick:_t,icon:"fa fa-undo",color:"primary",dense:"",size:"md",label:"Limpiar"})):we("",!0)]),_:3})])]))])}}},hx={name:"t-tooltip",props:{phone:{type:Boolean,default:!1}}};function cx(e,t,i,s,n,l){return!i.phone||i.phone&&e.$q.platform.is.mobile?(ee(),ke(Ef,{key:0,"content-class":"bg-primary","content-style":"font-size: 14px"},{default:De(()=>[wt(e.$slots,"default")]),_:3})):we("",!0)}var ux=gi(hx,[["render",cx]]);const px=is({setup(){const e=Is(),t=zs();return{mainStore:e,apiStore:t}},data(){return{openModal:!1}},mixins:[Yn],props:{name:{type:String,default:""},title:{type:String,default:""},modal:{type:Boolean,default:!1},icon:{type:String,default:"fas fa-tools"},xsize:{type:String,default:"md"},myclass:{type:String,default:"conf-btn"},color:{type:String,default:"white"}},methods:{openPanel(){this.modal?this.openModal=!this.openModal:this.g_configPanel(this.name,this.title)}}});function gx(e,t,i,s,n,l){const u=Dt("t-modal");return e.g_module("config")?(ee(),ke(Ye,{key:0,class:As(e.myclass),size:e.xsize,color:e.color,"text-color":"primary",label:e.title,onClick:t[1]||(t[1]=g=>e.openPanel()),icon:e.icon},{default:De(()=>[e.modal?(ee(),ke(u,{key:0,title:e.title,modelValue:e.openModal,"onUpdate:modelValue":t[0]||(t[0]=g=>e.openModal=g),icon:"fas fa-tools"},{default:De(()=>[wt(e.$slots,"default")]),_:3},8,["title","modelValue"])):we("",!0)]),_:3},8,["class","size","color","label","icon"])):we("",!0)}var fx=gi(px,[["render",gx]]);function mx(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Kd={exports:{}};/*!
 * ApexCharts v3.45.2
 * (c) 2018-2024 ApexCharts
 * Released under the MIT License.
 */(function(e,t){function i(O,o){var r=Object.keys(O);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(O);o&&(a=a.filter(function(d){return Object.getOwnPropertyDescriptor(O,d).enumerable})),r.push.apply(r,a)}return r}function s(O){for(var o=1;o<arguments.length;o++){var r=arguments[o]!=null?arguments[o]:{};o%2?i(Object(r),!0).forEach(function(a){C(O,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(O,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(a){Object.defineProperty(O,a,Object.getOwnPropertyDescriptor(r,a))})}return O}function n(O){return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},n(O)}function l(O,o){if(!(O instanceof o))throw new TypeError("Cannot call a class as a function")}function u(O,o){for(var r=0;r<o.length;r++){var a=o[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(O,a.key,a)}}function g(O,o,r){return o&&u(O.prototype,o),r&&u(O,r),O}function C(O,o,r){return o in O?Object.defineProperty(O,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):O[o]=r,O}function S(O,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");O.prototype=Object.create(o&&o.prototype,{constructor:{value:O,writable:!0,configurable:!0}}),o&&D(O,o)}function A(O){return A=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},A(O)}function D(O,o){return D=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},D(O,o)}function M(O){if(O===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O}function W(O){var o=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var r,a=A(O);if(o){var d=A(this).constructor;r=Reflect.construct(a,arguments,d)}else r=a.apply(this,arguments);return function(h,c){if(c&&(typeof c=="object"||typeof c=="function"))return c;if(c!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return M(h)}(this,r)}}function z(O,o){return function(r){if(Array.isArray(r))return r}(O)||function(r,a){var d=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(d!=null){var h,c,p=[],f=!0,v=!1;try{for(d=d.call(r);!(f=(h=d.next()).done)&&(p.push(h.value),!a||p.length!==a);f=!0);}catch(y){v=!0,c=y}finally{try{f||d.return==null||d.return()}finally{if(v)throw c}}return p}}(O,o)||X(O,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function U(O){return function(o){if(Array.isArray(o))return q(o)}(O)||function(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}(O)||X(O)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function X(O,o){if(O){if(typeof O=="string")return q(O,o);var r=Object.prototype.toString.call(O).slice(8,-1);return r==="Object"&&O.constructor&&(r=O.constructor.name),r==="Map"||r==="Set"?Array.from(O):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?q(O,o):void 0}}function q(O,o){(o==null||o>O.length)&&(o=O.length);for(var r=0,a=new Array(o);r<o;r++)a[r]=O[r];return a}var _=function(){function O(){l(this,O)}return g(O,[{key:"shadeRGBColor",value:function(o,r){var a=r.split(","),d=o<0?0:255,h=o<0?-1*o:o,c=parseInt(a[0].slice(4),10),p=parseInt(a[1],10),f=parseInt(a[2],10);return"rgb("+(Math.round((d-c)*h)+c)+","+(Math.round((d-p)*h)+p)+","+(Math.round((d-f)*h)+f)+")"}},{key:"shadeHexColor",value:function(o,r){var a=parseInt(r.slice(1),16),d=o<0?0:255,h=o<0?-1*o:o,c=a>>16,p=a>>8&255,f=255&a;return"#"+(16777216+65536*(Math.round((d-c)*h)+c)+256*(Math.round((d-p)*h)+p)+(Math.round((d-f)*h)+f)).toString(16).slice(1)}},{key:"shadeColor",value:function(o,r){return O.isColorHex(r)?this.shadeHexColor(o,r):this.shadeRGBColor(o,r)}}],[{key:"bind",value:function(o,r){return function(){return o.apply(r,arguments)}}},{key:"isObject",value:function(o){return o&&n(o)==="object"&&!Array.isArray(o)&&o!=null}},{key:"is",value:function(o,r){return Object.prototype.toString.call(r)==="[object "+o+"]"}},{key:"listToArray",value:function(o){var r,a=[];for(r=0;r<o.length;r++)a[r]=o[r];return a}},{key:"extend",value:function(o,r){var a=this;typeof Object.assign!="function"&&(Object.assign=function(h){if(h==null)throw new TypeError("Cannot convert undefined or null to object");for(var c=Object(h),p=1;p<arguments.length;p++){var f=arguments[p];if(f!=null)for(var v in f)f.hasOwnProperty(v)&&(c[v]=f[v])}return c});var d=Object.assign({},o);return this.isObject(o)&&this.isObject(r)&&Object.keys(r).forEach(function(h){a.isObject(r[h])&&h in o?d[h]=a.extend(o[h],r[h]):Object.assign(d,C({},h,r[h]))}),d}},{key:"extendArray",value:function(o,r){var a=[];return o.map(function(d){a.push(O.extend(r,d))}),o=a}},{key:"monthMod",value:function(o){return o%12}},{key:"clone",value:function(o){if(O.is("Array",o)){for(var r=[],a=0;a<o.length;a++)r[a]=this.clone(o[a]);return r}if(O.is("Null",o))return null;if(O.is("Date",o))return o;if(n(o)==="object"){var d={};for(var h in o)o.hasOwnProperty(h)&&(d[h]=this.clone(o[h]));return d}return o}},{key:"log10",value:function(o){return Math.log(o)/Math.LN10}},{key:"roundToBase10",value:function(o){return Math.pow(10,Math.floor(Math.log10(o)))}},{key:"roundToBase",value:function(o,r){return Math.pow(r,Math.floor(Math.log(o)/Math.log(r)))}},{key:"parseNumber",value:function(o){return o===null?o:parseFloat(o)}},{key:"stripNumber",value:function(o){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return Number.isInteger(o)?o:parseFloat(o.toPrecision(r))}},{key:"randomId",value:function(){return(Math.random()+1).toString(36).substring(4)}},{key:"noExponents",value:function(o){var r=String(o).split(/[eE]/);if(r.length===1)return r[0];var a="",d=o<0?"-":"",h=r[0].replace(".",""),c=Number(r[1])+1;if(c<0){for(a=d+"0.";c++;)a+="0";return a+h.replace(/^-/,"")}for(c-=h.length;c--;)a+="0";return h+a}},{key:"getDimensions",value:function(o){var r=getComputedStyle(o,null),a=o.clientHeight,d=o.clientWidth;return a-=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom),[d-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),a]}},{key:"getBoundingClientRect",value:function(o){var r=o.getBoundingClientRect();return{top:r.top,right:r.right,bottom:r.bottom,left:r.left,width:o.clientWidth,height:o.clientHeight,x:r.left,y:r.top}}},{key:"getLargestStringFromArr",value:function(o){return o.reduce(function(r,a){return Array.isArray(a)&&(a=a.reduce(function(d,h){return d.length>h.length?d:h})),r.length>a.length?r:a},0)}},{key:"hexToRgba",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"#999999",r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.6;o.substring(0,1)!=="#"&&(o="#999999");var a=o.replace("#","");a=a.match(new RegExp("(.{"+a.length/3+"})","g"));for(var d=0;d<a.length;d++)a[d]=parseInt(a[d].length===1?a[d]+a[d]:a[d],16);return r!==void 0&&a.push(r),"rgba("+a.join(",")+")"}},{key:"getOpacityFromRGBA",value:function(o){return parseFloat(o.replace(/^.*,(.+)\)/,"$1"))}},{key:"rgb2hex",value:function(o){return(o=o.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&o.length===4?"#"+("0"+parseInt(o[1],10).toString(16)).slice(-2)+("0"+parseInt(o[2],10).toString(16)).slice(-2)+("0"+parseInt(o[3],10).toString(16)).slice(-2):""}},{key:"isColorHex",value:function(o){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)|(^#[0-9A-F]{8}$)/i.test(o)}},{key:"getPolygonPos",value:function(o,r){for(var a=[],d=2*Math.PI/r,h=0;h<r;h++){var c={};c.x=o*Math.sin(h*d),c.y=-o*Math.cos(h*d),a.push(c)}return a}},{key:"polarToCartesian",value:function(o,r,a,d){var h=(d-90)*Math.PI/180;return{x:o+a*Math.cos(h),y:r+a*Math.sin(h)}}},{key:"escapeString",value:function(o){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x",a=o.toString().slice();return a=a.replace(/[` ~!@#$%^&*()|+\=?;:'",.<>{}[\]\\/]/gi,r)}},{key:"negToZero",value:function(o){return o<0?0:o}},{key:"moveIndexInArray",value:function(o,r,a){if(a>=o.length)for(var d=a-o.length+1;d--;)o.push(void 0);return o.splice(a,0,o.splice(r,1)[0]),o}},{key:"extractNumber",value:function(o){return parseFloat(o.replace(/[^\d.]*/g,""))}},{key:"findAncestor",value:function(o,r){for(;(o=o.parentElement)&&!o.classList.contains(r););return o}},{key:"setELstyles",value:function(o,r){for(var a in r)r.hasOwnProperty(a)&&(o.style.key=r[a])}},{key:"isNumber",value:function(o){return!isNaN(o)&&parseFloat(Number(o))===o&&!isNaN(parseInt(o,10))}},{key:"isFloat",value:function(o){return Number(o)===o&&o%1!=0}},{key:"isSafari",value:function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}},{key:"isFirefox",value:function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1}},{key:"isIE11",value:function(){if(window.navigator.userAgent.indexOf("MSIE")!==-1||window.navigator.appVersion.indexOf("Trident/")>-1)return!0}},{key:"isIE",value:function(){var o=window.navigator.userAgent,r=o.indexOf("MSIE ");if(r>0)return parseInt(o.substring(r+5,o.indexOf(".",r)),10);if(o.indexOf("Trident/")>0){var a=o.indexOf("rv:");return parseInt(o.substring(a+3,o.indexOf(".",a)),10)}var d=o.indexOf("Edge/");return d>0&&parseInt(o.substring(d+5,o.indexOf(".",d)),10)}}]),O}(),J=function(){function O(o){l(this,O),this.ctx=o,this.w=o.w,this.setEasingFunctions()}return g(O,[{key:"setEasingFunctions",value:function(){var o;if(!this.w.globals.easing){switch(this.w.config.chart.animations.easing){case"linear":o="-";break;case"easein":o="<";break;case"easeout":o=">";break;case"easeinout":default:o="<>";break;case"swing":o=function(r){var a=1.70158;return(r-=1)*r*((a+1)*r+a)+1};break;case"bounce":o=function(r){return r<1/2.75?7.5625*r*r:r<2/2.75?7.5625*(r-=1.5/2.75)*r+.75:r<2.5/2.75?7.5625*(r-=2.25/2.75)*r+.9375:7.5625*(r-=2.625/2.75)*r+.984375};break;case"elastic":o=function(r){return r===!!r?r:Math.pow(2,-10*r)*Math.sin((r-.075)*(2*Math.PI)/.3)+1}}this.w.globals.easing=o}}},{key:"animateLine",value:function(o,r,a,d){o.attr(r).animate(d).attr(a)}},{key:"animateMarker",value:function(o,r,a,d,h,c){r||(r=0),o.attr({r,width:r,height:r}).animate(d,h).attr({r:a,width:a.width,height:a.height}).afterAll(function(){c()})}},{key:"animateCircle",value:function(o,r,a,d,h){o.attr({r:r.r,cx:r.cx,cy:r.cy}).animate(d,h).attr({r:a.r,cx:a.cx,cy:a.cy})}},{key:"animateRect",value:function(o,r,a,d,h){o.attr(r).animate(d).attr(a).afterAll(function(){return h()})}},{key:"animatePathsGradually",value:function(o){var r=o.el,a=o.realIndex,d=o.j,h=o.fill,c=o.pathFrom,p=o.pathTo,f=o.speed,v=o.delay,y=this.w,b=0;y.config.chart.animations.animateGradually.enabled&&(b=y.config.chart.animations.animateGradually.delay),y.config.chart.animations.dynamicAnimation.enabled&&y.globals.dataChanged&&y.config.chart.type!=="bar"&&(b=0),this.morphSVG(r,a,d,y.config.chart.type!=="line"||y.globals.comboCharts?h:"stroke",c,p,f,v*b)}},{key:"showDelayedElements",value:function(){this.w.globals.delayedElements.forEach(function(o){var r=o.el;r.classList.remove("apexcharts-element-hidden"),r.classList.add("apexcharts-hidden-element-shown")})}},{key:"animationCompleted",value:function(o){var r=this.w;r.globals.animationEnded||(r.globals.animationEnded=!0,this.showDelayedElements(),typeof r.config.chart.events.animationEnd=="function"&&r.config.chart.events.animationEnd(this.ctx,{el:o,w:r}))}},{key:"morphSVG",value:function(o,r,a,d,h,c,p,f){var v=this,y=this.w;h||(h=o.attr("pathFrom")),c||(c=o.attr("pathTo"));var b=function(w){return y.config.chart.type==="radar"&&(p=1),"M 0 ".concat(y.globals.gridHeight)};(!h||h.indexOf("undefined")>-1||h.indexOf("NaN")>-1)&&(h=b()),(!c||c.indexOf("undefined")>-1||c.indexOf("NaN")>-1)&&(c=b()),y.globals.shouldAnimate||(p=1),o.plot(h).animate(1,y.globals.easing,f).plot(h).animate(p,y.globals.easing,f).plot(c).afterAll(function(){_.isNumber(a)?a===y.globals.series[y.globals.maxValsInArrayIndex].length-2&&y.globals.shouldAnimate&&v.animationCompleted(o):d!=="none"&&y.globals.shouldAnimate&&(!y.globals.comboCharts&&r===y.globals.series.length-1||y.globals.comboCharts)&&v.animationCompleted(o),v.showDelayedElements()})}}]),O}(),se=function(){function O(o){l(this,O),this.ctx=o,this.w=o.w}return g(O,[{key:"getDefaultFilter",value:function(o,r){var a=this.w;o.unfilter(!0),new window.SVG.Filter().size("120%","180%","-5%","-40%"),a.config.states.normal.filter!=="none"?this.applyFilter(o,r,a.config.states.normal.filter.type,a.config.states.normal.filter.value):a.config.chart.dropShadow.enabled&&this.dropShadow(o,a.config.chart.dropShadow,r)}},{key:"addNormalFilter",value:function(o,r){var a=this.w;a.config.chart.dropShadow.enabled&&!o.node.classList.contains("apexcharts-marker")&&this.dropShadow(o,a.config.chart.dropShadow,r)}},{key:"addLightenFilter",value:function(o,r,a){var d=this,h=this.w,c=a.intensity;o.unfilter(!0),new window.SVG.Filter,o.filter(function(p){var f=h.config.chart.dropShadow;(f.enabled?d.addShadow(p,r,f):p).componentTransfer({rgb:{type:"linear",slope:1.5,intercept:c}})}),o.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(o.filterer.node)}},{key:"addDarkenFilter",value:function(o,r,a){var d=this,h=this.w,c=a.intensity;o.unfilter(!0),new window.SVG.Filter,o.filter(function(p){var f=h.config.chart.dropShadow;(f.enabled?d.addShadow(p,r,f):p).componentTransfer({rgb:{type:"linear",slope:c}})}),o.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(o.filterer.node)}},{key:"applyFilter",value:function(o,r,a){var d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.5;switch(a){case"none":this.addNormalFilter(o,r);break;case"lighten":this.addLightenFilter(o,r,{intensity:d});break;case"darken":this.addDarkenFilter(o,r,{intensity:d})}}},{key:"addShadow",value:function(o,r,a){var d=a.blur,h=a.top,c=a.left,p=a.color,f=a.opacity,v=o.flood(Array.isArray(p)?p[r]:p,f).composite(o.sourceAlpha,"in").offset(c,h).gaussianBlur(d).merge(o.source);return o.blend(o.source,v)}},{key:"dropShadow",value:function(o,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,d=r.top,h=r.left,c=r.blur,p=r.color,f=r.opacity,v=r.noUserSpaceOnUse,y=this.w;return o.unfilter(!0),_.isIE()&&y.config.chart.type==="radialBar"||(p=Array.isArray(p)?p[a]:p,o.filter(function(b){var w=null;w=_.isSafari()||_.isFirefox()||_.isIE()?b.flood(p,f).composite(b.sourceAlpha,"in").offset(h,d).gaussianBlur(c):b.flood(p,f).composite(b.sourceAlpha,"in").offset(h,d).gaussianBlur(c).merge(b.source),b.blend(b.source,w)}),v||o.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(o.filterer.node)),o}},{key:"setSelectionFilter",value:function(o,r,a){var d=this.w;if(d.globals.selectedDataPoints[r]!==void 0&&d.globals.selectedDataPoints[r].indexOf(a)>-1){o.node.setAttribute("selected",!0);var h=d.config.states.active.filter;h!=="none"&&this.applyFilter(o,r,h.type,h.value)}}},{key:"_scaleFilterSize",value:function(o){(function(r){for(var a in r)r.hasOwnProperty(a)&&o.setAttribute(a,r[a])})({width:"200%",height:"200%",x:"-50%",y:"-50%"})}}]),O}(),$=function(){function O(o){l(this,O),this.ctx=o,this.w=o.w}return g(O,[{key:"roundPathCorners",value:function(o,r){function a(B,j,K){var ie=j.x-B.x,he=j.y-B.y,ae=Math.sqrt(ie*ie+he*he);return d(B,j,Math.min(1,K/ae))}function d(B,j,K){return{x:B.x+(j.x-B.x)*K,y:B.y+(j.y-B.y)*K}}function h(B,j){B.length>2&&(B[B.length-2]=j.x,B[B.length-1]=j.y)}function c(B){return{x:parseFloat(B[B.length-2]),y:parseFloat(B[B.length-1])}}o.indexOf("NaN")>-1&&(o="");var p=o.split(/[,\s]/).reduce(function(B,j){var K=j.match("([a-zA-Z])(.+)");return K?(B.push(K[1]),B.push(K[2])):B.push(j),B},[]).reduce(function(B,j){return parseFloat(j)==j&&B.length?B[B.length-1].push(j):B.push([j]),B},[]),f=[];if(p.length>1){var v=c(p[0]),y=null;p[p.length-1][0]=="Z"&&p[0].length>2&&(y=["L",v.x,v.y],p[p.length-1]=y),f.push(p[0]);for(var b=1;b<p.length;b++){var w=f[f.length-1],R=p[b],T=R==y?p[1]:p[b+1];if(T&&w&&w.length>2&&R[0]=="L"&&T.length>2&&T[0]=="L"){var F,I,G=c(w),H=c(R),m=c(T);F=a(H,G,r),I=a(H,m,r),h(R,F),R.origPoint=H,f.push(R);var x=d(F,H,.5),P=d(H,I,.5),k=["C",x.x,x.y,P.x,P.y,I.x,I.y];k.origPoint=H,f.push(k)}else f.push(R)}if(y){var V=c(f[f.length-1]);f.push(["Z"]),h(f[0],V)}}else f=p;return f.reduce(function(B,j){return B+j.join(" ")+" "},"")}},{key:"drawLine",value:function(o,r,a,d){var h=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"#a8a8a8",c=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,p=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,f=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"butt";return this.w.globals.dom.Paper.line().attr({x1:o,y1:r,x2:a,y2:d,stroke:h,"stroke-dasharray":c,"stroke-width":p,"stroke-linecap":f})}},{key:"drawRect",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,h=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,c=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"#fefefe",p=arguments.length>6&&arguments[6]!==void 0?arguments[6]:1,f=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null,v=arguments.length>8&&arguments[8]!==void 0?arguments[8]:null,y=arguments.length>9&&arguments[9]!==void 0?arguments[9]:0,b=this.w.globals.dom.Paper.rect();return b.attr({x:o,y:r,width:a>0?a:0,height:d>0?d:0,rx:h,ry:h,opacity:p,"stroke-width":f!==null?f:0,stroke:v!==null?v:"none","stroke-dasharray":y}),b.node.setAttribute("fill",c),b}},{key:"drawPolygon",value:function(o){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"#e1e1e1",a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"none";return this.w.globals.dom.Paper.polygon(o).attr({fill:d,stroke:r,"stroke-width":a})}},{key:"drawCircle",value:function(o){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;o<0&&(o=0);var a=this.w.globals.dom.Paper.circle(2*o);return r!==null&&a.attr(r),a}},{key:"drawPath",value:function(o){var r=o.d,a=r===void 0?"":r,d=o.stroke,h=d===void 0?"#a8a8a8":d,c=o.strokeWidth,p=c===void 0?1:c,f=o.fill,v=o.fillOpacity,y=v===void 0?1:v,b=o.strokeOpacity,w=b===void 0?1:b,R=o.classes,T=o.strokeLinecap,F=T===void 0?null:T,I=o.strokeDashArray,G=I===void 0?0:I,H=this.w;return F===null&&(F=H.config.stroke.lineCap),(a.indexOf("undefined")>-1||a.indexOf("NaN")>-1)&&(a="M 0 ".concat(H.globals.gridHeight)),H.globals.dom.Paper.path(a).attr({fill:f,"fill-opacity":y,stroke:h,"stroke-opacity":w,"stroke-linecap":F,"stroke-width":p,"stroke-dasharray":G,class:R})}},{key:"group",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=this.w.globals.dom.Paper.group();return o!==null&&r.attr(o),r}},{key:"move",value:function(o,r){var a=["M",o,r].join(" ");return a}},{key:"line",value:function(o,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,d=null;return a===null?d=[" L",o,r].join(" "):a==="H"?d=[" H",o].join(" "):a==="V"&&(d=[" V",r].join(" ")),d}},{key:"curve",value:function(o,r,a,d,h,c){var p=["C",o,r,a,d,h,c].join(" ");return p}},{key:"quadraticCurve",value:function(o,r,a,d){return["Q",o,r,a,d].join(" ")}},{key:"arc",value:function(o,r,a,d,h,c,p){var f="A";arguments.length>7&&arguments[7]!==void 0&&arguments[7]&&(f="a");var v=[f,o,r,a,d,h,c,p].join(" ");return v}},{key:"renderPaths",value:function(o){var r,a=o.j,d=o.realIndex,h=o.pathFrom,c=o.pathTo,p=o.stroke,f=o.strokeWidth,v=o.strokeLinecap,y=o.fill,b=o.animationDelay,w=o.initialSpeed,R=o.dataChangeSpeed,T=o.className,F=o.shouldClipToGrid,I=F===void 0||F,G=o.bindEventsOnPaths,H=G===void 0||G,m=o.drawShadow,x=m===void 0||m,P=this.w,k=new se(this.ctx),V=new J(this.ctx),B=this.w.config.chart.animations.enabled,j=B&&this.w.config.chart.animations.dynamicAnimation.enabled,K=!!(B&&!P.globals.resized||j&&P.globals.dataChanged&&P.globals.shouldAnimate);K?r=h:(r=c,P.globals.animationEnded=!0);var ie=P.config.stroke.dashArray,he=0;he=Array.isArray(ie)?ie[d]:P.config.stroke.dashArray;var ae=this.drawPath({d:r,stroke:p,strokeWidth:f,fill:y,fillOpacity:1,classes:T,strokeLinecap:v,strokeDashArray:he});if(ae.attr("index",d),I&&ae.attr({"clip-path":"url(#gridRectMask".concat(P.globals.cuid,")")}),P.config.states.normal.filter.type!=="none")k.getDefaultFilter(ae,d);else if(P.config.chart.dropShadow.enabled&&x&&(!P.config.chart.dropShadow.enabledOnSeries||P.config.chart.dropShadow.enabledOnSeries&&P.config.chart.dropShadow.enabledOnSeries.indexOf(d)!==-1)){var Le=P.config.chart.dropShadow;k.dropShadow(ae,Le,d)}H&&(ae.node.addEventListener("mouseenter",this.pathMouseEnter.bind(this,ae)),ae.node.addEventListener("mouseleave",this.pathMouseLeave.bind(this,ae)),ae.node.addEventListener("mousedown",this.pathMouseDown.bind(this,ae))),ae.attr({pathTo:c,pathFrom:h});var Be={el:ae,j:a,realIndex:d,pathFrom:h,pathTo:c,fill:y,strokeWidth:f,delay:b};return!B||P.globals.resized||P.globals.dataChanged?!P.globals.resized&&P.globals.dataChanged||V.showDelayedElements():V.animatePathsGradually(s(s({},Be),{},{speed:w})),P.globals.dataChanged&&j&&K&&V.animatePathsGradually(s(s({},Be),{},{speed:R})),ae}},{key:"drawPattern",value:function(o,r,a){var d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"#a8a8a8",h=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;return this.w.globals.dom.Paper.pattern(r,a,function(c){o==="horizontalLines"?c.line(0,0,a,0).stroke({color:d,width:h+1}):o==="verticalLines"?c.line(0,0,0,r).stroke({color:d,width:h+1}):o==="slantedLines"?c.line(0,0,r,a).stroke({color:d,width:h}):o==="squares"?c.rect(r,a).fill("none").stroke({color:d,width:h}):o==="circles"&&c.circle(r).fill("none").stroke({color:d,width:h})})}},{key:"drawGradient",value:function(o,r,a,d,h){var c,p=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,f=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,v=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null,y=arguments.length>8&&arguments[8]!==void 0?arguments[8]:0,b=this.w;r.length<9&&r.indexOf("#")===0&&(r=_.hexToRgba(r,d)),a.length<9&&a.indexOf("#")===0&&(a=_.hexToRgba(a,h));var w=0,R=1,T=1,F=null;f!==null&&(w=f[0]!==void 0?f[0]/100:0,R=f[1]!==void 0?f[1]/100:1,T=f[2]!==void 0?f[2]/100:1,F=f[3]!==void 0?f[3]/100:null);var I=!(b.config.chart.type!=="donut"&&b.config.chart.type!=="pie"&&b.config.chart.type!=="polarArea"&&b.config.chart.type!=="bubble");if(c=v===null||v.length===0?b.globals.dom.Paper.gradient(I?"radial":"linear",function(m){m.at(w,r,d),m.at(R,a,h),m.at(T,a,h),F!==null&&m.at(F,r,d)}):b.globals.dom.Paper.gradient(I?"radial":"linear",function(m){(Array.isArray(v[y])?v[y]:v).forEach(function(x){m.at(x.offset/100,x.color,x.opacity)})}),I){var G=b.globals.gridWidth/2,H=b.globals.gridHeight/2;b.config.chart.type!=="bubble"?c.attr({gradientUnits:"userSpaceOnUse",cx:G,cy:H,r:p}):c.attr({cx:.5,cy:.5,r:.8,fx:.2,fy:.2})}else o==="vertical"?c.from(0,0).to(0,1):o==="diagonal"?c.from(0,0).to(1,1):o==="horizontal"?c.from(0,1).to(1,1):o==="diagonal2"&&c.from(1,0).to(0,1);return c}},{key:"getTextBasedOnMaxWidth",value:function(o){var r=o.text,a=o.maxWidth,d=o.fontSize,h=o.fontFamily,c=this.getTextRects(r,d,h),p=c.width/r.length,f=Math.floor(a/p);return a<c.width?r.slice(0,f-3)+"...":r}},{key:"drawText",value:function(o){var r=this,a=o.x,d=o.y,h=o.text,c=o.textAnchor,p=o.fontSize,f=o.fontFamily,v=o.fontWeight,y=o.foreColor,b=o.opacity,w=o.maxWidth,R=o.cssClass,T=R===void 0?"":R,F=o.isPlainText,I=F===void 0||F,G=o.dominantBaseline,H=G===void 0?"auto":G,m=this.w;h===void 0&&(h="");var x=h;c||(c="start"),y&&y.length||(y=m.config.chart.foreColor),f=f||m.config.chart.fontFamily,v=v||"regular";var P,k={maxWidth:w,fontSize:p=p||"11px",fontFamily:f};return Array.isArray(h)?P=m.globals.dom.Paper.text(function(V){for(var B=0;B<h.length;B++)x=h[B],w&&(x=r.getTextBasedOnMaxWidth(s({text:h[B]},k))),B===0?V.tspan(x):V.tspan(x).newLine()}):(w&&(x=this.getTextBasedOnMaxWidth(s({text:h},k))),P=I?m.globals.dom.Paper.plain(h):m.globals.dom.Paper.text(function(V){return V.tspan(x)})),P.attr({x:a,y:d,"text-anchor":c,"dominant-baseline":H,"font-size":p,"font-family":f,"font-weight":v,fill:y,class:"apexcharts-text "+T}),P.node.style.fontFamily=f,P.node.style.opacity=b,P}},{key:"drawMarker",value:function(o,r,a){o=o||0;var d=a.pSize||0,h=null;if(a.shape==="square"||a.shape==="rect"){var c=a.pRadius===void 0?d/2:a.pRadius;r!==null&&d||(d=0,c=0);var p=1.2*d+c,f=this.drawRect(p,p,p,p,c);f.attr({x:o-p/2,y:r-p/2,cx:o,cy:r,class:a.class?a.class:"",fill:a.pointFillColor,"fill-opacity":a.pointFillOpacity?a.pointFillOpacity:1,stroke:a.pointStrokeColor,"stroke-width":a.pointStrokeWidth?a.pointStrokeWidth:0,"stroke-opacity":a.pointStrokeOpacity?a.pointStrokeOpacity:1}),h=f}else a.shape!=="circle"&&a.shape||(_.isNumber(r)||(d=0,r=0),h=this.drawCircle(d,{cx:o,cy:r,class:a.class?a.class:"",stroke:a.pointStrokeColor,fill:a.pointFillColor,"fill-opacity":a.pointFillOpacity?a.pointFillOpacity:1,"stroke-width":a.pointStrokeWidth?a.pointStrokeWidth:0,"stroke-opacity":a.pointStrokeOpacity?a.pointStrokeOpacity:1}));return h}},{key:"pathMouseEnter",value:function(o,r){var a=this.w,d=new se(this.ctx),h=parseInt(o.node.getAttribute("index"),10),c=parseInt(o.node.getAttribute("j"),10);if(typeof a.config.chart.events.dataPointMouseEnter=="function"&&a.config.chart.events.dataPointMouseEnter(r,this.ctx,{seriesIndex:h,dataPointIndex:c,w:a}),this.ctx.events.fireEvent("dataPointMouseEnter",[r,this.ctx,{seriesIndex:h,dataPointIndex:c,w:a}]),(a.config.states.active.filter.type==="none"||o.node.getAttribute("selected")!=="true")&&a.config.states.hover.filter.type!=="none"&&!a.globals.isTouchDevice){var p=a.config.states.hover.filter;d.applyFilter(o,h,p.type,p.value)}}},{key:"pathMouseLeave",value:function(o,r){var a=this.w,d=new se(this.ctx),h=parseInt(o.node.getAttribute("index"),10),c=parseInt(o.node.getAttribute("j"),10);typeof a.config.chart.events.dataPointMouseLeave=="function"&&a.config.chart.events.dataPointMouseLeave(r,this.ctx,{seriesIndex:h,dataPointIndex:c,w:a}),this.ctx.events.fireEvent("dataPointMouseLeave",[r,this.ctx,{seriesIndex:h,dataPointIndex:c,w:a}]),a.config.states.active.filter.type!=="none"&&o.node.getAttribute("selected")==="true"||a.config.states.hover.filter.type!=="none"&&d.getDefaultFilter(o,h)}},{key:"pathMouseDown",value:function(o,r){var a=this.w,d=new se(this.ctx),h=parseInt(o.node.getAttribute("index"),10),c=parseInt(o.node.getAttribute("j"),10),p="false";if(o.node.getAttribute("selected")==="true"){if(o.node.setAttribute("selected","false"),a.globals.selectedDataPoints[h].indexOf(c)>-1){var f=a.globals.selectedDataPoints[h].indexOf(c);a.globals.selectedDataPoints[h].splice(f,1)}}else{if(!a.config.states.active.allowMultipleDataPointsSelection&&a.globals.selectedDataPoints.length>0){a.globals.selectedDataPoints=[];var v=a.globals.dom.Paper.select(".apexcharts-series path").members,y=a.globals.dom.Paper.select(".apexcharts-series circle, .apexcharts-series rect").members,b=function(T){Array.prototype.forEach.call(T,function(F){F.node.setAttribute("selected","false"),d.getDefaultFilter(F,h)})};b(v),b(y)}o.node.setAttribute("selected","true"),p="true",a.globals.selectedDataPoints[h]===void 0&&(a.globals.selectedDataPoints[h]=[]),a.globals.selectedDataPoints[h].push(c)}if(p==="true"){var w=a.config.states.active.filter;if(w!=="none")d.applyFilter(o,h,w.type,w.value);else if(a.config.states.hover.filter!=="none"&&!a.globals.isTouchDevice){var R=a.config.states.hover.filter;d.applyFilter(o,h,R.type,R.value)}}else a.config.states.active.filter.type!=="none"&&(a.config.states.hover.filter.type==="none"||a.globals.isTouchDevice?d.getDefaultFilter(o,h):(R=a.config.states.hover.filter,d.applyFilter(o,h,R.type,R.value)));typeof a.config.chart.events.dataPointSelection=="function"&&a.config.chart.events.dataPointSelection(r,this.ctx,{selectedDataPoints:a.globals.selectedDataPoints,seriesIndex:h,dataPointIndex:c,w:a}),r&&this.ctx.events.fireEvent("dataPointSelection",[r,this.ctx,{selectedDataPoints:a.globals.selectedDataPoints,seriesIndex:h,dataPointIndex:c,w:a}])}},{key:"rotateAroundCenter",value:function(o){var r={};return o&&typeof o.getBBox=="function"&&(r=o.getBBox()),{x:r.x+r.width/2,y:r.y+r.height/2}}},{key:"getTextRects",value:function(o,r,a,d){var h=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],c=this.w,p=this.drawText({x:-200,y:-200,text:o,textAnchor:"start",fontSize:r,fontFamily:a,foreColor:"#fff",opacity:0});d&&p.attr("transform",d),c.globals.dom.Paper.add(p);var f=p.bbox();return h||(f=p.node.getBoundingClientRect()),p.remove(),{width:f.width,height:f.height}}},{key:"placeTextWithEllipsis",value:function(o,r,a){if(typeof o.getComputedTextLength=="function"&&(o.textContent=r,r.length>0&&o.getComputedTextLength()>=a/1.1)){for(var d=r.length-3;d>0;d-=3)if(o.getSubStringLength(0,d)<=a/1.1)return void(o.textContent=r.substring(0,d)+"...");o.textContent="."}}}],[{key:"setAttrs",value:function(o,r){for(var a in r)r.hasOwnProperty(a)&&o.setAttribute(a,r[a])}}]),O}(),Y=function(){function O(o){l(this,O),this.ctx=o,this.w=o.w}return g(O,[{key:"getStackedSeriesTotals",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=this.w,a=[];if(r.globals.series.length===0)return a;for(var d=0;d<r.globals.series[r.globals.maxValsInArrayIndex].length;d++){for(var h=0,c=0;c<r.globals.series.length;c++)r.globals.series[c][d]!==void 0&&o.indexOf(c)===-1&&(h+=r.globals.series[c][d]);a.push(h)}return a}},{key:"getSeriesTotalByIndex",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return o===null?this.w.config.series.reduce(function(r,a){return r+a},0):this.w.globals.series[o].reduce(function(r,a){return r+a},0)}},{key:"getStackedSeriesTotalsByGroups",value:function(){var o=this,r=this.w,a=[];return r.globals.seriesGroups.forEach(function(d){var h=[];r.config.series.forEach(function(p,f){d.indexOf(p.name)>-1&&h.push(f)});var c=r.globals.series.map(function(p,f){return h.indexOf(f)===-1?f:-1}).filter(function(p){return p!==-1});a.push(o.getStackedSeriesTotals(c))}),a}},{key:"isSeriesNull",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return(o===null?this.w.config.series.filter(function(r){return r!==null}):this.w.config.series[o].data.filter(function(r){return r!==null})).length===0}},{key:"seriesHaveSameValues",value:function(o){return this.w.globals.series[o].every(function(r,a,d){return r===d[0]})}},{key:"getCategoryLabels",value:function(o){var r=this.w,a=o.slice();return r.config.xaxis.convertedCatToNumeric&&(a=o.map(function(d,h){return r.config.xaxis.labels.formatter(d-r.globals.minX+1)})),a}},{key:"getLargestSeries",value:function(){var o=this.w;o.globals.maxValsInArrayIndex=o.globals.series.map(function(r){return r.length}).indexOf(Math.max.apply(Math,o.globals.series.map(function(r){return r.length})))}},{key:"getLargestMarkerSize",value:function(){var o=this.w,r=0;return o.globals.markers.size.forEach(function(a){r=Math.max(r,a)}),o.config.markers.discrete&&o.config.markers.discrete.length&&o.config.markers.discrete.forEach(function(a){r=Math.max(r,a.size)}),r>0&&(r+=o.config.markers.hover.sizeOffset+1),o.globals.markers.largestSize=r,r}},{key:"getSeriesTotals",value:function(){var o=this.w;o.globals.seriesTotals=o.globals.series.map(function(r,a){var d=0;if(Array.isArray(r))for(var h=0;h<r.length;h++)d+=r[h];else d+=r;return d})}},{key:"getSeriesTotalsXRange",value:function(o,r){var a=this.w;return a.globals.series.map(function(d,h){for(var c=0,p=0;p<d.length;p++)a.globals.seriesX[h][p]>o&&a.globals.seriesX[h][p]<r&&(c+=d[p]);return c})}},{key:"getPercentSeries",value:function(){var o=this.w;o.globals.seriesPercent=o.globals.series.map(function(r,a){var d=[];if(Array.isArray(r))for(var h=0;h<r.length;h++){var c=o.globals.stackedSeriesTotals[h],p=0;c&&(p=100*r[h]/c),d.push(p)}else{var f=100*r/o.globals.seriesTotals.reduce(function(v,y){return v+y},0);d.push(f)}return d})}},{key:"getCalculatedRatios",value:function(){var o,r,a,d=this.w.globals,h=[],c=0,p=[],f=.1,v=0;if(d.yRange=[],d.isMultipleYAxis)for(var y=0;y<d.minYArr.length;y++)d.yRange.push(Math.abs(d.minYArr[y]-d.maxYArr[y])),p.push(0);else d.yRange.push(Math.abs(d.minY-d.maxY));d.xRange=Math.abs(d.maxX-d.minX),d.zRange=Math.abs(d.maxZ-d.minZ);for(var b=0;b<d.yRange.length;b++)h.push(d.yRange[b]/d.gridHeight);if(r=d.xRange/d.gridWidth,o=d.yRange/d.gridWidth,a=d.xRange/d.gridHeight,(c=d.zRange/d.gridHeight*16)||(c=1),d.minY!==Number.MIN_VALUE&&Math.abs(d.minY)!==0&&(d.hasNegs=!0),d.isMultipleYAxis){p=[];for(var w=0;w<h.length;w++)p.push(-d.minYArr[w]/h[w])}else p.push(-d.minY/h[0]),d.minY!==Number.MIN_VALUE&&Math.abs(d.minY)!==0&&(f=-d.minY/o,v=d.minX/r);return{yRatio:h,invertedYRatio:o,zRatio:c,xRatio:r,invertedXRatio:a,baseLineInvertedY:f,baseLineY:p,baseLineX:v}}},{key:"getLogSeries",value:function(o){var r=this,a=this.w;return a.globals.seriesLog=o.map(function(d,h){return a.config.yaxis[h]&&a.config.yaxis[h].logarithmic?d.map(function(c){return c===null?null:r.getLogVal(a.config.yaxis[h].logBase,c,h)}):d}),a.globals.invalidLogScale?o:a.globals.seriesLog}},{key:"getBaseLog",value:function(o,r){return Math.log(r)/Math.log(o)}},{key:"getLogVal",value:function(o,r,a){if(r===0)return 0;var d=this.w,h=d.globals.minYArr[a]===0?-1:this.getBaseLog(o,d.globals.minYArr[a]),c=(d.globals.maxYArr[a]===0?0:this.getBaseLog(o,d.globals.maxYArr[a]))-h;return r<1?r/c:(this.getBaseLog(o,r)-h)/c}},{key:"getLogYRatios",value:function(o){var r=this,a=this.w,d=this.w.globals;return d.yLogRatio=o.slice(),d.logYRange=d.yRange.map(function(h,c){if(a.config.yaxis[c]&&r.w.config.yaxis[c].logarithmic){var p,f=-Number.MAX_VALUE,v=Number.MIN_VALUE;return d.seriesLog.forEach(function(y,b){y.forEach(function(w){a.config.yaxis[b]&&a.config.yaxis[b].logarithmic&&(f=Math.max(w,f),v=Math.min(w,v))})}),p=Math.pow(d.yRange[c],Math.abs(v-f)/d.yRange[c]),d.yLogRatio[c]=p/d.gridHeight,p}}),d.invalidLogScale?o.slice():d.yLogRatio}}],[{key:"checkComboSeries",value:function(o){var r=!1,a=0,d=0;return o.length&&o[0].type!==void 0&&o.forEach(function(h){h.type!=="bar"&&h.type!=="column"&&h.type!=="candlestick"&&h.type!=="boxPlot"||a++,h.type!==void 0&&d++}),d>0&&(r=!0),{comboBarCount:a,comboCharts:r}}},{key:"extendArrayProps",value:function(o,r,a){return r.yaxis&&(r=o.extendYAxis(r,a)),r.annotations&&(r.annotations.yaxis&&(r=o.extendYAxisAnnotations(r)),r.annotations.xaxis&&(r=o.extendXAxisAnnotations(r)),r.annotations.points&&(r=o.extendPointAnnotations(r))),r}}]),O}(),oe=function(){function O(o){l(this,O),this.w=o.w,this.annoCtx=o}return g(O,[{key:"setOrientations",value:function(o){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,a=this.w;if(o.label.orientation==="vertical"){var d=r!==null?r:0,h=a.globals.dom.baseEl.querySelector(".apexcharts-xaxis-annotations .apexcharts-xaxis-annotation-label[rel='".concat(d,"']"));if(h!==null){var c=h.getBoundingClientRect();h.setAttribute("x",parseFloat(h.getAttribute("x"))-c.height+4),o.label.position==="top"?h.setAttribute("y",parseFloat(h.getAttribute("y"))+c.width):h.setAttribute("y",parseFloat(h.getAttribute("y"))-c.width);var p=this.annoCtx.graphics.rotateAroundCenter(h),f=p.x,v=p.y;h.setAttribute("transform","rotate(-90 ".concat(f," ").concat(v,")"))}}}},{key:"addBackgroundToAnno",value:function(o,r){var a=this.w;if(!o||r.label.text===void 0||r.label.text!==void 0&&!String(r.label.text).trim())return null;var d=a.globals.dom.baseEl.querySelector(".apexcharts-grid").getBoundingClientRect(),h=o.getBoundingClientRect(),c=r.label.style.padding.left,p=r.label.style.padding.right,f=r.label.style.padding.top,v=r.label.style.padding.bottom;r.label.orientation==="vertical"&&(f=r.label.style.padding.left,v=r.label.style.padding.right,c=r.label.style.padding.top,p=r.label.style.padding.bottom);var y=h.left-d.left-c,b=h.top-d.top-f,w=this.annoCtx.graphics.drawRect(y-a.globals.barPadForNumericAxis,b,h.width+c+p,h.height+f+v,r.label.borderRadius,r.label.style.background,1,r.label.borderWidth,r.label.borderColor,0);return r.id&&w.node.classList.add(r.id),w}},{key:"annotationsBackground",value:function(){var o=this,r=this.w,a=function(d,h,c){var p=r.globals.dom.baseEl.querySelector(".apexcharts-".concat(c,"-annotations .apexcharts-").concat(c,"-annotation-label[rel='").concat(h,"']"));if(p){var f=p.parentNode,v=o.addBackgroundToAnno(p,d);v&&(f.insertBefore(v.node,p),d.label.mouseEnter&&v.node.addEventListener("mouseenter",d.label.mouseEnter.bind(o,d)),d.label.mouseLeave&&v.node.addEventListener("mouseleave",d.label.mouseLeave.bind(o,d)),d.label.click&&v.node.addEventListener("click",d.label.click.bind(o,d)))}};r.config.annotations.xaxis.map(function(d,h){a(d,h,"xaxis")}),r.config.annotations.yaxis.map(function(d,h){a(d,h,"yaxis")}),r.config.annotations.points.map(function(d,h){a(d,h,"point")})}},{key:"getY1Y2",value:function(o,r){var a,d=o==="y1"?r.y:r.y2,h=this.w;if(this.annoCtx.invertAxis){var c=h.globals.labels.indexOf(d);h.config.xaxis.convertedCatToNumeric&&(c=h.globals.categoryLabels.indexOf(d));var p=h.globals.dom.baseEl.querySelector(".apexcharts-yaxis-texts-g text:nth-child("+(c+1)+")");p&&(a=parseFloat(p.getAttribute("y"))),r.seriesIndex!==void 0&&h.globals.barHeight&&(a=a-h.globals.barHeight/2*(h.globals.series.length-1)+h.globals.barHeight*r.seriesIndex)}else{var f;h.config.yaxis[r.yAxisIndex].logarithmic?f=(d=new Y(this.annoCtx.ctx).getLogVal(d,r.yAxisIndex))/h.globals.yLogRatio[r.yAxisIndex]:f=(d-h.globals.minYArr[r.yAxisIndex])/(h.globals.yRange[r.yAxisIndex]/h.globals.gridHeight),a=h.globals.gridHeight-f,!r.marker||r.y!==void 0&&r.y!==null||(a=0),h.config.yaxis[r.yAxisIndex]&&h.config.yaxis[r.yAxisIndex].reversed&&(a=f)}return typeof d=="string"&&d.indexOf("px")>-1&&(a=parseFloat(d)),a}},{key:"getX1X2",value:function(o,r){var a=this.w,d=this.annoCtx.invertAxis?a.globals.minY:a.globals.minX,h=this.annoCtx.invertAxis?a.globals.maxY:a.globals.maxX,c=this.annoCtx.invertAxis?a.globals.yRange[0]:a.globals.xRange,p=(r.x-d)/(c/a.globals.gridWidth);this.annoCtx.inversedReversedAxis&&(p=(h-r.x)/(c/a.globals.gridWidth)),a.config.xaxis.type!=="category"&&!a.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||a.globals.dataFormatXNumeric||(p=this.getStringX(r.x));var f=(r.x2-d)/(c/a.globals.gridWidth);return this.annoCtx.inversedReversedAxis&&(f=(h-r.x2)/(c/a.globals.gridWidth)),a.config.xaxis.type!=="category"&&!a.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||a.globals.dataFormatXNumeric||(f=this.getStringX(r.x2)),r.x!==void 0&&r.x!==null||!r.marker||(p=a.globals.gridWidth),o==="x1"&&typeof r.x=="string"&&r.x.indexOf("px")>-1&&(p=parseFloat(r.x)),o==="x2"&&typeof r.x2=="string"&&r.x2.indexOf("px")>-1&&(f=parseFloat(r.x2)),r.seriesIndex!==void 0&&a.globals.barWidth&&!this.annoCtx.invertAxis&&(p=p-a.globals.barWidth/2*(a.globals.series.length-1)+a.globals.barWidth*r.seriesIndex),o==="x1"?p:f}},{key:"getStringX",value:function(o){var r=this.w,a=o;r.config.xaxis.convertedCatToNumeric&&r.globals.categoryLabels.length&&(o=r.globals.categoryLabels.indexOf(o)+1);var d=r.globals.labels.indexOf(o),h=r.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g text:nth-child("+(d+1)+")");return h&&(a=parseFloat(h.getAttribute("x"))),a}}]),O}(),Oe=function(){function O(o){l(this,O),this.w=o.w,this.annoCtx=o,this.invertAxis=this.annoCtx.invertAxis,this.helpers=new oe(this.annoCtx)}return g(O,[{key:"addXaxisAnnotation",value:function(o,r,a){var d,h=this.w,c=this.helpers.getX1X2("x1",o),p=o.label.text,f=o.strokeDashArray;if(_.isNumber(c)){if(o.x2===null||o.x2===void 0){var v=this.annoCtx.graphics.drawLine(c+o.offsetX,0+o.offsetY,c+o.offsetX,h.globals.gridHeight+o.offsetY,o.borderColor,f,o.borderWidth);r.appendChild(v.node),o.id&&v.node.classList.add(o.id)}else{if((d=this.helpers.getX1X2("x2",o))<c){var y=c;c=d,d=y}var b=this.annoCtx.graphics.drawRect(c+o.offsetX,0+o.offsetY,d-c,h.globals.gridHeight+o.offsetY,0,o.fillColor,o.opacity,1,o.borderColor,f);b.node.classList.add("apexcharts-annotation-rect"),b.attr("clip-path","url(#gridRectMask".concat(h.globals.cuid,")")),r.appendChild(b.node),o.id&&b.node.classList.add(o.id)}var w=this.annoCtx.graphics.getTextRects(p,parseFloat(o.label.style.fontSize)),R=o.label.position==="top"?4:o.label.position==="center"?h.globals.gridHeight/2+(o.label.orientation==="vertical"?w.width/2:0):h.globals.gridHeight,T=this.annoCtx.graphics.drawText({x:c+o.label.offsetX,y:R+o.label.offsetY-(o.label.orientation==="vertical"?o.label.position==="top"?w.width/2-12:-w.width/2:0),text:p,textAnchor:o.label.textAnchor,fontSize:o.label.style.fontSize,fontFamily:o.label.style.fontFamily,fontWeight:o.label.style.fontWeight,foreColor:o.label.style.color,cssClass:"apexcharts-xaxis-annotation-label ".concat(o.label.style.cssClass," ").concat(o.id?o.id:"")});T.attr({rel:a}),r.appendChild(T.node),this.annoCtx.helpers.setOrientations(o,a)}}},{key:"drawXAxisAnnotations",value:function(){var o=this,r=this.w,a=this.annoCtx.graphics.group({class:"apexcharts-xaxis-annotations"});return r.config.annotations.xaxis.map(function(d,h){o.addXaxisAnnotation(d,a.node,h)}),a}}]),O}(),re=function(){function O(o){l(this,O),this.w=o.w,this.annoCtx=o,this.helpers=new oe(this.annoCtx)}return g(O,[{key:"addYaxisAnnotation",value:function(o,r,a){var d,h=this.w,c=o.strokeDashArray,p=this.helpers.getY1Y2("y1",o),f=o.label.text;if(o.y2===null||o.y2===void 0){var v=this.annoCtx.graphics.drawLine(0+o.offsetX,p+o.offsetY,this._getYAxisAnnotationWidth(o),p+o.offsetY,o.borderColor,c,o.borderWidth);r.appendChild(v.node),o.id&&v.node.classList.add(o.id)}else{if((d=this.helpers.getY1Y2("y2",o))>p){var y=p;p=d,d=y}var b=this.annoCtx.graphics.drawRect(0+o.offsetX,d+o.offsetY,this._getYAxisAnnotationWidth(o),p-d,0,o.fillColor,o.opacity,1,o.borderColor,c);b.node.classList.add("apexcharts-annotation-rect"),b.attr("clip-path","url(#gridRectMask".concat(h.globals.cuid,")")),r.appendChild(b.node),o.id&&b.node.classList.add(o.id)}var w=o.label.position==="right"?h.globals.gridWidth:o.label.position==="center"?h.globals.gridWidth/2:0,R=this.annoCtx.graphics.drawText({x:w+o.label.offsetX,y:(d??p)+o.label.offsetY-3,text:f,textAnchor:o.label.textAnchor,fontSize:o.label.style.fontSize,fontFamily:o.label.style.fontFamily,fontWeight:o.label.style.fontWeight,foreColor:o.label.style.color,cssClass:"apexcharts-yaxis-annotation-label ".concat(o.label.style.cssClass," ").concat(o.id?o.id:"")});R.attr({rel:a}),r.appendChild(R.node)}},{key:"_getYAxisAnnotationWidth",value:function(o){var r=this.w;return r.globals.gridWidth,(o.width.indexOf("%")>-1?r.globals.gridWidth*parseInt(o.width,10)/100:parseInt(o.width,10))+o.offsetX}},{key:"drawYAxisAnnotations",value:function(){var o=this,r=this.w,a=this.annoCtx.graphics.group({class:"apexcharts-yaxis-annotations"});return r.config.annotations.yaxis.map(function(d,h){o.addYaxisAnnotation(d,a.node,h)}),a}}]),O}(),Ve=function(){function O(o){l(this,O),this.w=o.w,this.annoCtx=o,this.helpers=new oe(this.annoCtx)}return g(O,[{key:"addPointAnnotation",value:function(o,r,a){this.w;var d=this.helpers.getX1X2("x1",o),h=this.helpers.getY1Y2("y1",o);if(_.isNumber(d)){var c={pSize:o.marker.size,pointStrokeWidth:o.marker.strokeWidth,pointFillColor:o.marker.fillColor,pointStrokeColor:o.marker.strokeColor,shape:o.marker.shape,pRadius:o.marker.radius,class:"apexcharts-point-annotation-marker ".concat(o.marker.cssClass," ").concat(o.id?o.id:"")},p=this.annoCtx.graphics.drawMarker(d+o.marker.offsetX,h+o.marker.offsetY,c);r.appendChild(p.node);var f=o.label.text?o.label.text:"",v=this.annoCtx.graphics.drawText({x:d+o.label.offsetX,y:h+o.label.offsetY-o.marker.size-parseFloat(o.label.style.fontSize)/1.6,text:f,textAnchor:o.label.textAnchor,fontSize:o.label.style.fontSize,fontFamily:o.label.style.fontFamily,fontWeight:o.label.style.fontWeight,foreColor:o.label.style.color,cssClass:"apexcharts-point-annotation-label ".concat(o.label.style.cssClass," ").concat(o.id?o.id:"")});if(v.attr({rel:a}),r.appendChild(v.node),o.customSVG.SVG){var y=this.annoCtx.graphics.group({class:"apexcharts-point-annotations-custom-svg "+o.customSVG.cssClass});y.attr({transform:"translate(".concat(d+o.customSVG.offsetX,", ").concat(h+o.customSVG.offsetY,")")}),y.node.innerHTML=o.customSVG.SVG,r.appendChild(y.node)}if(o.image.path){var b=o.image.width?o.image.width:20,w=o.image.height?o.image.height:20;p=this.annoCtx.addImage({x:d+o.image.offsetX-b/2,y:h+o.image.offsetY-w/2,width:b,height:w,path:o.image.path,appendTo:".apexcharts-point-annotations"})}o.mouseEnter&&p.node.addEventListener("mouseenter",o.mouseEnter.bind(this,o)),o.mouseLeave&&p.node.addEventListener("mouseleave",o.mouseLeave.bind(this,o)),o.click&&p.node.addEventListener("click",o.click.bind(this,o))}}},{key:"drawPointAnnotations",value:function(){var o=this,r=this.w,a=this.annoCtx.graphics.group({class:"apexcharts-point-annotations"});return r.config.annotations.points.map(function(d,h){o.addPointAnnotation(d,a.node,h)}),a}}]),O}(),Pe={name:"en",options:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],toolbar:{exportToSVG:"Download SVG",exportToPNG:"Download PNG",exportToCSV:"Download CSV",menu:"Menu",selection:"Selection",selectionZoom:"Selection Zoom",zoomIn:"Zoom In",zoomOut:"Zoom Out",pan:"Panning",reset:"Reset Zoom"}}},He=function(){function O(){l(this,O),this.yAxis={show:!0,showAlways:!1,showForNullSeries:!0,seriesName:void 0,opposite:!1,reversed:!1,logarithmic:!1,logBase:10,tickAmount:void 0,stepSize:void 0,forceNiceScale:!1,max:void 0,min:void 0,floating:!1,decimalsInFloat:void 0,labels:{show:!0,minWidth:0,maxWidth:160,offsetX:0,offsetY:0,align:void 0,rotate:0,padding:20,style:{colors:[],fontSize:"11px",fontWeight:400,fontFamily:void 0,cssClass:""},formatter:void 0},axisBorder:{show:!1,color:"#e0e0e0",width:1,offsetX:0,offsetY:0},axisTicks:{show:!1,color:"#e0e0e0",width:6,offsetX:0,offsetY:0},title:{text:void 0,rotate:-90,offsetY:0,offsetX:0,style:{color:void 0,fontSize:"11px",fontWeight:900,fontFamily:void 0,cssClass:""}},tooltip:{enabled:!1,offsetX:0},crosshairs:{show:!0,position:"front",stroke:{color:"#b6b6b6",width:1,dashArray:0}}},this.pointAnnotation={id:void 0,x:0,y:null,yAxisIndex:0,seriesIndex:void 0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,marker:{size:4,fillColor:"#fff",strokeWidth:2,strokeColor:"#333",shape:"circle",offsetX:0,offsetY:0,radius:2,cssClass:""},label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}},customSVG:{SVG:void 0,cssClass:void 0,offsetX:0,offsetY:0},image:{path:void 0,width:20,height:20,offsetX:0,offsetY:0}},this.yAxisAnnotation={id:void 0,y:0,y2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,width:"100%",yAxisIndex:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"end",position:"right",offsetX:0,offsetY:-3,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.xAxisAnnotation={id:void 0,x:0,x2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",orientation:"vertical",position:"top",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.text={x:0,y:0,text:"",textAnchor:"start",foreColor:void 0,fontSize:"13px",fontFamily:void 0,fontWeight:400,appendTo:".apexcharts-annotations",backgroundColor:"transparent",borderColor:"#c2c2c2",borderRadius:0,borderWidth:0,paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2}}return g(O,[{key:"init",value:function(){return{annotations:{yaxis:[this.yAxisAnnotation],xaxis:[this.xAxisAnnotation],points:[this.pointAnnotation],texts:[],images:[],shapes:[]},chart:{animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{delay:150,enabled:!0},dynamicAnimation:{enabled:!0,speed:350}},background:"transparent",locales:[Pe],defaultLocale:"en",dropShadow:{enabled:!1,enabledOnSeries:void 0,top:2,left:2,blur:4,color:"#000",opacity:.35},events:{animationEnd:void 0,beforeMount:void 0,mounted:void 0,updated:void 0,click:void 0,mouseMove:void 0,mouseLeave:void 0,xAxisLabelClick:void 0,legendClick:void 0,markerClick:void 0,selection:void 0,dataPointSelection:void 0,dataPointMouseEnter:void 0,dataPointMouseLeave:void 0,beforeZoom:void 0,beforeResetZoom:void 0,zoomed:void 0,scrolled:void 0,brushScrolled:void 0},foreColor:"#373d3f",fontFamily:"Helvetica, Arial, sans-serif",height:"auto",parentHeightOffset:15,redrawOnParentResize:!0,redrawOnWindowResize:!0,id:void 0,group:void 0,nonce:void 0,offsetX:0,offsetY:0,selection:{enabled:!1,type:"x",fill:{color:"#24292e",opacity:.1},stroke:{width:1,color:"#24292e",opacity:.4,dashArray:3},xaxis:{min:void 0,max:void 0},yaxis:{min:void 0,max:void 0}},sparkline:{enabled:!1},brush:{enabled:!1,autoScaleYaxis:!0,target:void 0,targets:void 0},stacked:!1,stackOnlyBar:!0,stackType:"normal",toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0,customIcons:[]},export:{csv:{filename:void 0,columnDelimiter:",",headerCategory:"category",headerValue:"value",dateFormatter:function(o){return new Date(o).toDateString()}},png:{filename:void 0},svg:{filename:void 0}},autoSelected:"zoom"},type:"line",width:"100%",zoom:{enabled:!0,type:"x",autoScaleYaxis:!1,zoomedArea:{fill:{color:"#90CAF9",opacity:.4},stroke:{color:"#0D47A1",opacity:.4,width:1}}}},plotOptions:{area:{fillTo:"origin"},bar:{horizontal:!1,columnWidth:"70%",barHeight:"70%",distributed:!1,borderRadius:0,borderRadiusApplication:"around",borderRadiusWhenStacked:"last",rangeBarOverlap:!0,rangeBarGroupRows:!1,hideZeroBarsWhenGrouped:!1,isDumbbell:!1,dumbbellColors:void 0,isFunnel:!1,isFunnel3d:!0,colors:{ranges:[],backgroundBarColors:[],backgroundBarOpacity:1,backgroundBarRadius:0},dataLabels:{position:"top",maxItems:100,hideOverflowingLabels:!0,orientation:"horizontal",total:{enabled:!1,formatter:void 0,offsetX:0,offsetY:0,style:{color:"#373d3f",fontSize:"12px",fontFamily:void 0,fontWeight:600}}}},bubble:{zScaling:!0,minBubbleRadius:void 0,maxBubbleRadius:void 0},candlestick:{colors:{upward:"#00B746",downward:"#EF403C"},wick:{useFillColor:!0}},boxPlot:{colors:{upper:"#00E396",lower:"#008FFB"}},heatmap:{radius:2,enableShades:!0,shadeIntensity:.5,reverseNegativeShade:!1,distributed:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},treemap:{enableShades:!0,shadeIntensity:.5,distributed:!1,reverseNegativeShade:!1,useFillColorAsStroke:!1,borderRadius:4,dataLabels:{format:"scale"},colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},radialBar:{inverseOrder:!1,startAngle:0,endAngle:360,offsetX:0,offsetY:0,hollow:{margin:5,size:"50%",background:"transparent",image:void 0,imageWidth:150,imageHeight:150,imageOffsetX:0,imageOffsetY:0,imageClipped:!0,position:"front",dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},track:{show:!0,startAngle:void 0,endAngle:void 0,background:"#f2f2f2",strokeWidth:"97%",opacity:1,margin:5,dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:0,formatter:function(o){return o}},value:{show:!0,fontSize:"14px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:16,formatter:function(o){return o+"%"}},total:{show:!1,label:"Total",fontSize:"16px",fontWeight:600,fontFamily:void 0,color:void 0,formatter:function(o){return o.globals.seriesTotals.reduce(function(r,a){return r+a},0)/o.globals.series.length+"%"}}},barLabels:{enabled:!1,margin:5,useSeriesColors:!0,fontFamily:void 0,fontWeight:600,fontSize:"16px",formatter:function(o){return o},onClick:void 0}},pie:{customScale:1,offsetX:0,offsetY:0,startAngle:0,endAngle:360,expandOnClick:!0,dataLabels:{offset:0,minAngleToShowLabel:10},donut:{size:"65%",background:"transparent",labels:{show:!1,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:-10,formatter:function(o){return o}},value:{show:!0,fontSize:"20px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:10,formatter:function(o){return o}},total:{show:!1,showAlways:!1,label:"Total",fontSize:"16px",fontWeight:400,fontFamily:void 0,color:void 0,formatter:function(o){return o.globals.seriesTotals.reduce(function(r,a){return r+a},0)}}}}},polarArea:{rings:{strokeWidth:1,strokeColor:"#e8e8e8"},spokes:{strokeWidth:1,connectorColors:"#e8e8e8"}},radar:{size:void 0,offsetX:0,offsetY:0,polygons:{strokeWidth:1,strokeColors:"#e8e8e8",connectorColors:"#e8e8e8",fill:{colors:void 0}}}},colors:void 0,dataLabels:{enabled:!0,enabledOnSeries:void 0,formatter:function(o){return o!==null?o:""},textAnchor:"middle",distributed:!1,offsetX:0,offsetY:0,style:{fontSize:"12px",fontFamily:void 0,fontWeight:600,colors:void 0},background:{enabled:!0,foreColor:"#fff",borderRadius:2,padding:4,opacity:.9,borderWidth:1,borderColor:"#fff",dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]},image:{src:[],width:void 0,height:void 0},pattern:{style:"squares",width:6,height:6,strokeWidth:2}},forecastDataPoints:{count:0,fillOpacity:.5,strokeWidth:void 0,dashArray:4},grid:{show:!0,borderColor:"#e0e0e0",strokeDashArray:0,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}},row:{colors:void 0,opacity:.5},column:{colors:void 0,opacity:.5},padding:{top:0,right:10,bottom:0,left:12}},labels:[],legend:{show:!0,showForSingleSeries:!1,showForNullSeries:!0,showForZeroSeries:!0,floating:!1,position:"bottom",horizontalAlign:"center",inverseOrder:!1,fontSize:"12px",fontFamily:void 0,fontWeight:400,width:void 0,height:void 0,formatter:void 0,tooltipHoverFormatter:void 0,offsetX:-20,offsetY:4,customLegendItems:[],labels:{colors:void 0,useSeriesColors:!1},markers:{width:12,height:12,strokeWidth:0,fillColors:void 0,strokeColor:"#fff",radius:12,customHTML:void 0,offsetX:0,offsetY:0,onClick:void 0},itemMargin:{horizontal:5,vertical:2},onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}},markers:{discrete:[],size:0,colors:void 0,strokeColors:"#fff",strokeWidth:2,strokeOpacity:.9,strokeDashArray:0,fillOpacity:1,shape:"circle",width:8,height:8,radius:2,offsetX:0,offsetY:0,onClick:void 0,onDblClick:void 0,showNullDataPoints:!0,hover:{size:void 0,sizeOffset:3}},noData:{text:void 0,align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:void 0,fontSize:"14px",fontFamily:void 0}},responsive:[],series:void 0,states:{normal:{filter:{type:"none",value:0}},hover:{filter:{type:"lighten",value:.1}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"darken",value:.5}}},title:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:900,fontFamily:void 0,color:void 0}},subtitle:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:30,floating:!1,style:{fontSize:"12px",fontWeight:400,fontFamily:void 0,color:void 0}},stroke:{show:!0,curve:"smooth",lineCap:"butt",width:2,colors:void 0,dashArray:0,fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]}}},tooltip:{enabled:!0,enabledOnSeries:void 0,shared:!0,hideEmptySeries:!1,followCursor:!1,intersect:!1,inverseOrder:!1,custom:void 0,fillSeriesColor:!1,theme:"light",cssClass:"",style:{fontSize:"12px",fontFamily:void 0},onDatasetHover:{highlightDataSeries:!1},x:{show:!0,format:"dd MMM",formatter:void 0},y:{formatter:void 0,title:{formatter:function(o){return o?o+": ":""}}},z:{formatter:void 0,title:"Size: "},marker:{show:!0,fillColors:void 0},items:{display:"flex"},fixed:{enabled:!1,position:"topRight",offsetX:0,offsetY:0}},xaxis:{type:"category",categories:[],convertedCatToNumeric:!1,offsetX:0,offsetY:0,overwriteCategories:void 0,labels:{show:!0,rotate:-45,rotateAlways:!1,hideOverlappingLabels:!0,trim:!1,minHeight:void 0,maxHeight:120,showDuplicates:!0,style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""},offsetX:0,offsetY:0,format:void 0,formatter:void 0,datetimeUTC:!0,datetimeFormatter:{year:"yyyy",month:"MMM 'yy",day:"dd MMM",hour:"HH:mm",minute:"HH:mm:ss",second:"HH:mm:ss"}},group:{groups:[],style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""}},axisBorder:{show:!0,color:"#e0e0e0",width:"100%",height:1,offsetX:0,offsetY:0},axisTicks:{show:!0,color:"#e0e0e0",height:6,offsetX:0,offsetY:0},stepSize:void 0,tickAmount:void 0,tickPlacement:"on",min:void 0,max:void 0,range:void 0,floating:!1,decimalsInFloat:void 0,position:"bottom",title:{text:void 0,offsetX:0,offsetY:0,style:{color:void 0,fontSize:"12px",fontWeight:900,fontFamily:void 0,cssClass:""}},crosshairs:{show:!0,width:1,position:"back",opacity:.9,stroke:{color:"#b6b6b6",width:1,dashArray:3},fill:{type:"solid",color:"#B1B9C4",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}},dropShadow:{enabled:!1,left:0,top:0,blur:1,opacity:.4}},tooltip:{enabled:!0,offsetY:0,formatter:void 0,style:{fontSize:"12px",fontFamily:void 0}}},yaxis:this.yAxis,theme:{mode:"light",palette:"palette1",monochrome:{enabled:!1,color:"#008FFB",shadeTo:"light",shadeIntensity:.65}}}}}]),O}(),tt=function(){function O(o){l(this,O),this.ctx=o,this.w=o.w,this.graphics=new $(this.ctx),this.w.globals.isBarHorizontal&&(this.invertAxis=!0),this.helpers=new oe(this),this.xAxisAnnotations=new Oe(this),this.yAxisAnnotations=new re(this),this.pointsAnnotations=new Ve(this),this.w.globals.isBarHorizontal&&this.w.config.yaxis[0].reversed&&(this.inversedReversedAxis=!0),this.xDivision=this.w.globals.gridWidth/this.w.globals.dataPoints}return g(O,[{key:"drawAxesAnnotations",value:function(){var o=this.w;if(o.globals.axisCharts){for(var r=this.yAxisAnnotations.drawYAxisAnnotations(),a=this.xAxisAnnotations.drawXAxisAnnotations(),d=this.pointsAnnotations.drawPointAnnotations(),h=o.config.chart.animations.enabled,c=[r,a,d],p=[a.node,r.node,d.node],f=0;f<3;f++)o.globals.dom.elGraphical.add(c[f]),!h||o.globals.resized||o.globals.dataChanged||o.config.chart.type!=="scatter"&&o.config.chart.type!=="bubble"&&o.globals.dataPoints>1&&p[f].classList.add("apexcharts-element-hidden"),o.globals.delayedElements.push({el:p[f],index:0});this.helpers.annotationsBackground()}}},{key:"drawImageAnnos",value:function(){var o=this;this.w.config.annotations.images.map(function(r,a){o.addImage(r,a)})}},{key:"drawTextAnnos",value:function(){var o=this;this.w.config.annotations.texts.map(function(r,a){o.addText(r,a)})}},{key:"addXaxisAnnotation",value:function(o,r,a){this.xAxisAnnotations.addXaxisAnnotation(o,r,a)}},{key:"addYaxisAnnotation",value:function(o,r,a){this.yAxisAnnotations.addYaxisAnnotation(o,r,a)}},{key:"addPointAnnotation",value:function(o,r,a){this.pointsAnnotations.addPointAnnotation(o,r,a)}},{key:"addText",value:function(o,r){var a=o.x,d=o.y,h=o.text,c=o.textAnchor,p=o.foreColor,f=o.fontSize,v=o.fontFamily,y=o.fontWeight,b=o.cssClass,w=o.backgroundColor,R=o.borderWidth,T=o.strokeDashArray,F=o.borderRadius,I=o.borderColor,G=o.appendTo,H=G===void 0?".apexcharts-svg":G,m=o.paddingLeft,x=m===void 0?4:m,P=o.paddingRight,k=P===void 0?4:P,V=o.paddingBottom,B=V===void 0?2:V,j=o.paddingTop,K=j===void 0?2:j,ie=this.w,he=this.graphics.drawText({x:a,y:d,text:h,textAnchor:c||"start",fontSize:f||"12px",fontWeight:y||"regular",fontFamily:v||ie.config.chart.fontFamily,foreColor:p||ie.config.chart.foreColor,cssClass:b}),ae=ie.globals.dom.baseEl.querySelector(H);ae&&ae.appendChild(he.node);var Le=he.bbox();if(h){var Be=this.graphics.drawRect(Le.x-x,Le.y-K,Le.width+x+k,Le.height+B+K,F,w||"transparent",1,R,I,T);ae.insertBefore(Be.node,he.node)}}},{key:"addImage",value:function(o,r){var a=this.w,d=o.path,h=o.x,c=h===void 0?0:h,p=o.y,f=p===void 0?0:p,v=o.width,y=v===void 0?20:v,b=o.height,w=b===void 0?20:b,R=o.appendTo,T=R===void 0?".apexcharts-svg":R,F=a.globals.dom.Paper.image(d);F.size(y,w).move(c,f);var I=a.globals.dom.baseEl.querySelector(T);return I&&I.appendChild(F.node),F}},{key:"addXaxisAnnotationExternal",value:function(o,r,a){return this.addAnnotationExternal({params:o,pushToMemory:r,context:a,type:"xaxis",contextMethod:a.addXaxisAnnotation}),a}},{key:"addYaxisAnnotationExternal",value:function(o,r,a){return this.addAnnotationExternal({params:o,pushToMemory:r,context:a,type:"yaxis",contextMethod:a.addYaxisAnnotation}),a}},{key:"addPointAnnotationExternal",value:function(o,r,a){return this.invertAxis===void 0&&(this.invertAxis=a.w.globals.isBarHorizontal),this.addAnnotationExternal({params:o,pushToMemory:r,context:a,type:"point",contextMethod:a.addPointAnnotation}),a}},{key:"addAnnotationExternal",value:function(o){var r=o.params,a=o.pushToMemory,d=o.context,h=o.type,c=o.contextMethod,p=d,f=p.w,v=f.globals.dom.baseEl.querySelector(".apexcharts-".concat(h,"-annotations")),y=v.childNodes.length+1,b=new He,w=Object.assign({},h==="xaxis"?b.xAxisAnnotation:h==="yaxis"?b.yAxisAnnotation:b.pointAnnotation),R=_.extend(w,r);switch(h){case"xaxis":this.addXaxisAnnotation(R,v,y);break;case"yaxis":this.addYaxisAnnotation(R,v,y);break;case"point":this.addPointAnnotation(R,v,y)}var T=f.globals.dom.baseEl.querySelector(".apexcharts-".concat(h,"-annotations .apexcharts-").concat(h,"-annotation-label[rel='").concat(y,"']")),F=this.helpers.addBackgroundToAnno(T,R);return F&&v.insertBefore(F.node,T),a&&f.globals.memory.methodsToExec.push({context:p,id:R.id?R.id:_.randomId(),method:c,label:"addAnnotation",params:r}),d}},{key:"clearAnnotations",value:function(o){var r=o.w,a=r.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-annotations, .apexcharts-xaxis-annotations, .apexcharts-point-annotations");r.globals.memory.methodsToExec.map(function(d,h){d.label!=="addText"&&d.label!=="addAnnotation"||r.globals.memory.methodsToExec.splice(h,1)}),a=_.listToArray(a),Array.prototype.forEach.call(a,function(d){for(;d.firstChild;)d.removeChild(d.firstChild)})}},{key:"removeAnnotation",value:function(o,r){var a=o.w,d=a.globals.dom.baseEl.querySelectorAll(".".concat(r));d&&(a.globals.memory.methodsToExec.map(function(h,c){h.id===r&&a.globals.memory.methodsToExec.splice(c,1)}),Array.prototype.forEach.call(d,function(h){h.parentElement.removeChild(h)}))}}]),O}(),Ge=function(){function O(o){l(this,O),this.ctx=o,this.w=o.w,this.months31=[1,3,5,7,8,10,12],this.months30=[2,4,6,9,11],this.daysCntOfYear=[0,31,59,90,120,151,181,212,243,273,304,334]}return g(O,[{key:"isValidDate",value:function(o){return typeof o!="number"&&!isNaN(this.parseDate(o))}},{key:"getTimeStamp",value:function(o){return Date.parse(o)?this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(o).toISOString().substr(0,25)).getTime():new Date(o).getTime():o}},{key:"getDate",value:function(o){return this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(o).toUTCString()):new Date(o)}},{key:"parseDate",value:function(o){var r=Date.parse(o);if(!isNaN(r))return this.getTimeStamp(o);var a=Date.parse(o.replace(/-/g,"/").replace(/[a-z]+/gi," "));return a=this.getTimeStamp(a)}},{key:"parseDateWithTimezone",value:function(o){return Date.parse(o.replace(/-/g,"/").replace(/[a-z]+/gi," "))}},{key:"formatDate",value:function(o,r){var a=this.w.globals.locale,d=this.w.config.xaxis.labels.datetimeUTC,h=["\0"].concat(U(a.months)),c=[""].concat(U(a.shortMonths)),p=[""].concat(U(a.days)),f=[""].concat(U(a.shortDays));function v(B,j){var K=B+"";for(j=j||2;K.length<j;)K="0"+K;return K}var y=d?o.getUTCFullYear():o.getFullYear();r=(r=(r=r.replace(/(^|[^\\])yyyy+/g,"$1"+y)).replace(/(^|[^\\])yy/g,"$1"+y.toString().substr(2,2))).replace(/(^|[^\\])y/g,"$1"+y);var b=(d?o.getUTCMonth():o.getMonth())+1;r=(r=(r=(r=r.replace(/(^|[^\\])MMMM+/g,"$1"+h[0])).replace(/(^|[^\\])MMM/g,"$1"+c[0])).replace(/(^|[^\\])MM/g,"$1"+v(b))).replace(/(^|[^\\])M/g,"$1"+b);var w=d?o.getUTCDate():o.getDate();r=(r=(r=(r=r.replace(/(^|[^\\])dddd+/g,"$1"+p[0])).replace(/(^|[^\\])ddd/g,"$1"+f[0])).replace(/(^|[^\\])dd/g,"$1"+v(w))).replace(/(^|[^\\])d/g,"$1"+w);var R=d?o.getUTCHours():o.getHours(),T=R>12?R-12:R===0?12:R;r=(r=(r=(r=r.replace(/(^|[^\\])HH+/g,"$1"+v(R))).replace(/(^|[^\\])H/g,"$1"+R)).replace(/(^|[^\\])hh+/g,"$1"+v(T))).replace(/(^|[^\\])h/g,"$1"+T);var F=d?o.getUTCMinutes():o.getMinutes();r=(r=r.replace(/(^|[^\\])mm+/g,"$1"+v(F))).replace(/(^|[^\\])m/g,"$1"+F);var I=d?o.getUTCSeconds():o.getSeconds();r=(r=r.replace(/(^|[^\\])ss+/g,"$1"+v(I))).replace(/(^|[^\\])s/g,"$1"+I);var G=d?o.getUTCMilliseconds():o.getMilliseconds();r=r.replace(/(^|[^\\])fff+/g,"$1"+v(G,3)),G=Math.round(G/10),r=r.replace(/(^|[^\\])ff/g,"$1"+v(G)),G=Math.round(G/10);var H=R<12?"AM":"PM";r=(r=(r=r.replace(/(^|[^\\])f/g,"$1"+G)).replace(/(^|[^\\])TT+/g,"$1"+H)).replace(/(^|[^\\])T/g,"$1"+H.charAt(0));var m=H.toLowerCase();r=(r=r.replace(/(^|[^\\])tt+/g,"$1"+m)).replace(/(^|[^\\])t/g,"$1"+m.charAt(0));var x=-o.getTimezoneOffset(),P=d||!x?"Z":x>0?"+":"-";if(!d){var k=(x=Math.abs(x))%60;P+=v(Math.floor(x/60))+":"+v(k)}r=r.replace(/(^|[^\\])K/g,"$1"+P);var V=(d?o.getUTCDay():o.getDay())+1;return r=(r=(r=(r=(r=r.replace(new RegExp(p[0],"g"),p[V])).replace(new RegExp(f[0],"g"),f[V])).replace(new RegExp(h[0],"g"),h[b])).replace(new RegExp(c[0],"g"),c[b])).replace(/\\(.)/g,"$1")}},{key:"getTimeUnitsfromTimestamp",value:function(o,r,a){var d=this.w;d.config.xaxis.min!==void 0&&(o=d.config.xaxis.min),d.config.xaxis.max!==void 0&&(r=d.config.xaxis.max);var h=this.getDate(o),c=this.getDate(r),p=this.formatDate(h,"yyyy MM dd HH mm ss fff").split(" "),f=this.formatDate(c,"yyyy MM dd HH mm ss fff").split(" ");return{minMillisecond:parseInt(p[6],10),maxMillisecond:parseInt(f[6],10),minSecond:parseInt(p[5],10),maxSecond:parseInt(f[5],10),minMinute:parseInt(p[4],10),maxMinute:parseInt(f[4],10),minHour:parseInt(p[3],10),maxHour:parseInt(f[3],10),minDate:parseInt(p[2],10),maxDate:parseInt(f[2],10),minMonth:parseInt(p[1],10)-1,maxMonth:parseInt(f[1],10)-1,minYear:parseInt(p[0],10),maxYear:parseInt(f[0],10)}}},{key:"isLeapYear",value:function(o){return o%4==0&&o%100!=0||o%400==0}},{key:"calculcateLastDaysOfMonth",value:function(o,r,a){return this.determineDaysOfMonths(o,r)-a}},{key:"determineDaysOfYear",value:function(o){var r=365;return this.isLeapYear(o)&&(r=366),r}},{key:"determineRemainingDaysOfYear",value:function(o,r,a){var d=this.daysCntOfYear[r]+a;return r>1&&this.isLeapYear()&&d++,d}},{key:"determineDaysOfMonths",value:function(o,r){var a=30;switch(o=_.monthMod(o),!0){case this.months30.indexOf(o)>-1:o===2&&(a=this.isLeapYear(r)?29:28);break;case this.months31.indexOf(o)>-1:default:a=31}return a}}]),O}(),et=function(){function O(o){l(this,O),this.ctx=o,this.w=o.w,this.tooltipKeyFormat="dd MMM"}return g(O,[{key:"xLabelFormat",value:function(o,r,a,d){var h=this.w;if(h.config.xaxis.type==="datetime"&&h.config.xaxis.labels.formatter===void 0&&h.config.tooltip.x.formatter===void 0){var c=new Ge(this.ctx);return c.formatDate(c.getDate(r),h.config.tooltip.x.format)}return o(r,a,d)}},{key:"defaultGeneralFormatter",value:function(o){return Array.isArray(o)?o.map(function(r){return r}):o}},{key:"defaultYFormatter",value:function(o,r,a){var d=this.w;return _.isNumber(o)&&(o=d.globals.yValueDecimal!==0?o.toFixed(r.decimalsInFloat!==void 0?r.decimalsInFloat:d.globals.yValueDecimal):d.globals.maxYArr[a]-d.globals.minYArr[a]<5?o.toFixed(1):o.toFixed(0)),o}},{key:"setLabelFormatters",value:function(){var o=this,r=this.w;return r.globals.xaxisTooltipFormatter=function(a){return o.defaultGeneralFormatter(a)},r.globals.ttKeyFormatter=function(a){return o.defaultGeneralFormatter(a)},r.globals.ttZFormatter=function(a){return a},r.globals.legendFormatter=function(a){return o.defaultGeneralFormatter(a)},r.config.xaxis.labels.formatter!==void 0?r.globals.xLabelFormatter=r.config.xaxis.labels.formatter:r.globals.xLabelFormatter=function(a){if(_.isNumber(a)){if(!r.config.xaxis.convertedCatToNumeric&&r.config.xaxis.type==="numeric"){if(_.isNumber(r.config.xaxis.decimalsInFloat))return a.toFixed(r.config.xaxis.decimalsInFloat);var d=r.globals.maxX-r.globals.minX;return d>0&&d<100?a.toFixed(1):a.toFixed(0)}return r.globals.isBarHorizontal&&r.globals.maxY-r.globals.minYArr<4?a.toFixed(1):a.toFixed(0)}return a},typeof r.config.tooltip.x.formatter=="function"?r.globals.ttKeyFormatter=r.config.tooltip.x.formatter:r.globals.ttKeyFormatter=r.globals.xLabelFormatter,typeof r.config.xaxis.tooltip.formatter=="function"&&(r.globals.xaxisTooltipFormatter=r.config.xaxis.tooltip.formatter),(Array.isArray(r.config.tooltip.y)||r.config.tooltip.y.formatter!==void 0)&&(r.globals.ttVal=r.config.tooltip.y),r.config.tooltip.z.formatter!==void 0&&(r.globals.ttZFormatter=r.config.tooltip.z.formatter),r.config.legend.formatter!==void 0&&(r.globals.legendFormatter=r.config.legend.formatter),r.config.yaxis.forEach(function(a,d){a.labels.formatter!==void 0?r.globals.yLabelFormatters[d]=a.labels.formatter:r.globals.yLabelFormatters[d]=function(h){return r.globals.xyCharts?Array.isArray(h)?h.map(function(c){return o.defaultYFormatter(c,a,d)}):o.defaultYFormatter(h,a,d):h}}),r.globals}},{key:"heatmapLabelFormatters",value:function(){var o=this.w;if(o.config.chart.type==="heatmap"){o.globals.yAxisScale[0].result=o.globals.seriesNames.slice();var r=o.globals.seriesNames.reduce(function(a,d){return a.length>d.length?a:d},0);o.globals.yAxisScale[0].niceMax=r,o.globals.yAxisScale[0].niceMin=r}}}]),O}(),Gt=function(O){var o,r=O.isTimeline,a=O.ctx,d=O.seriesIndex,h=O.dataPointIndex,c=O.y1,p=O.y2,f=O.w,v=f.globals.seriesRangeStart[d][h],y=f.globals.seriesRangeEnd[d][h],b=f.globals.labels[h],w=f.config.series[d].name?f.config.series[d].name:"",R=f.globals.ttKeyFormatter,T=f.config.tooltip.y.title.formatter,F={w:f,seriesIndex:d,dataPointIndex:h,start:v,end:y};typeof T=="function"&&(w=T(w,F)),(o=f.config.series[d].data[h])!==null&&o!==void 0&&o.x&&(b=f.config.series[d].data[h].x),r||f.config.xaxis.type==="datetime"&&(b=new et(a).xLabelFormat(f.globals.ttKeyFormatter,b,b,{i:void 0,dateFormatter:new Ge(a).formatDate,w:f})),typeof R=="function"&&(b=R(b,F)),Number.isFinite(c)&&Number.isFinite(p)&&(v=c,y=p);var I="",G="",H=f.globals.colors[d];if(f.config.tooltip.x.formatter===void 0)if(f.config.xaxis.type==="datetime"){var m=new Ge(a);I=m.formatDate(m.getDate(v),f.config.tooltip.x.format),G=m.formatDate(m.getDate(y),f.config.tooltip.x.format)}else I=v,G=y;else I=f.config.tooltip.x.formatter(v),G=f.config.tooltip.x.formatter(y);return{start:v,end:y,startVal:I,endVal:G,ylabel:b,color:H,seriesName:w}},At=function(O){var o=O.color,r=O.seriesName,a=O.ylabel,d=O.start,h=O.end,c=O.seriesIndex,p=O.dataPointIndex,f=O.ctx.tooltip.tooltipLabels.getFormatters(c);d=f.yLbFormatter(d),h=f.yLbFormatter(h);var v=f.yLbFormatter(O.w.globals.series[c][p]),y=`<span class="value start-value">
  `.concat(d,`
  </span> <span class="separator">-</span> <span class="value end-value">
  `).concat(h,`
  </span>`);return'<div class="apexcharts-tooltip-rangebar"><div> <span class="series-name" style="color: '+o+'">'+(r||"")+'</span></div><div> <span class="category">'+a+": </span> "+(O.w.globals.comboCharts?O.w.config.series[c].type==="rangeArea"||O.w.config.series[c].type==="rangeBar"?y:"<span>".concat(v,"</span>"):y)+" </div></div>"},vt=function(){function O(o){l(this,O),this.opts=o}return g(O,[{key:"hideYAxis",value:function(){this.opts.yaxis[0].show=!1,this.opts.yaxis[0].title.text="",this.opts.yaxis[0].axisBorder.show=!1,this.opts.yaxis[0].axisTicks.show=!1,this.opts.yaxis[0].floating=!0}},{key:"line",value:function(){return{chart:{animations:{easing:"swing"}},dataLabels:{enabled:!1},stroke:{width:5,curve:"straight"},markers:{size:0,hover:{sizeOffset:6}},xaxis:{crosshairs:{width:1}}}}},{key:"sparkline",value:function(o){return this.hideYAxis(),_.extend(o,{grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},legend:{show:!1},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}},chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1}})}},{key:"bar",value:function(){return{chart:{stacked:!1,animations:{easing:"swing"}},plotOptions:{bar:{dataLabels:{position:"center"}}},dataLabels:{style:{colors:["#fff"]},background:{enabled:!1}},stroke:{width:0,lineCap:"round"},fill:{opacity:.85},legend:{markers:{shape:"square",radius:2,size:8}},tooltip:{shared:!1,intersect:!0},xaxis:{tooltip:{enabled:!1},tickPlacement:"between",crosshairs:{width:"barWidth",position:"back",fill:{type:"gradient"},dropShadow:{enabled:!1},stroke:{width:0}}}}}},{key:"funnel",value:function(){return this.hideYAxis(),s(s({},this.bar()),{},{chart:{animations:{easing:"linear",speed:800,animateGradually:{enabled:!1}}},plotOptions:{bar:{horizontal:!0,borderRadiusApplication:"around",borderRadius:0,dataLabels:{position:"center"}}},grid:{show:!1,padding:{left:0,right:0}},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}}})}},{key:"candlestick",value:function(){var o=this;return{stroke:{width:1,colors:["#333"]},fill:{opacity:1},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(r){var a=r.seriesIndex,d=r.dataPointIndex,h=r.w;return o._getBoxTooltip(h,a,d,["Open","High","","Low","Close"],"candlestick")}},states:{active:{filter:{type:"none"}}},xaxis:{crosshairs:{width:1}}}}},{key:"boxPlot",value:function(){var o=this;return{chart:{animations:{dynamicAnimation:{enabled:!1}}},stroke:{width:1,colors:["#24292e"]},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(r){var a=r.seriesIndex,d=r.dataPointIndex,h=r.w;return o._getBoxTooltip(h,a,d,["Minimum","Q1","Median","Q3","Maximum"],"boxPlot")}},markers:{size:5,strokeWidth:1,strokeColors:"#111"},xaxis:{crosshairs:{width:1}}}}},{key:"rangeBar",value:function(){return{chart:{animations:{animateGradually:!1}},stroke:{width:0,lineCap:"square"},plotOptions:{bar:{borderRadius:0,dataLabels:{position:"center"}}},dataLabels:{enabled:!1,formatter:function(o,r){r.ctx;var a=r.seriesIndex,d=r.dataPointIndex,h=r.w,c=function(){var p=h.globals.seriesRangeStart[a][d];return h.globals.seriesRangeEnd[a][d]-p};return h.globals.comboCharts?h.config.series[a].type==="rangeBar"||h.config.series[a].type==="rangeArea"?c():o:c()},background:{enabled:!1},style:{colors:["#fff"]}},markers:{size:10},tooltip:{shared:!1,followCursor:!0,custom:function(o){return o.w.config.plotOptions&&o.w.config.plotOptions.bar&&o.w.config.plotOptions.bar.horizontal?function(r){var a=Gt(s(s({},r),{},{isTimeline:!0})),d=a.color,h=a.seriesName,c=a.ylabel,p=a.startVal,f=a.endVal;return At(s(s({},r),{},{color:d,seriesName:h,ylabel:c,start:p,end:f}))}(o):function(r){var a=Gt(r),d=a.color,h=a.seriesName,c=a.ylabel,p=a.start,f=a.end;return At(s(s({},r),{},{color:d,seriesName:h,ylabel:c,start:p,end:f}))}(o)}},xaxis:{tickPlacement:"between",tooltip:{enabled:!1},crosshairs:{stroke:{width:0}}}}}},{key:"dumbbell",value:function(o){var r,a;return(r=o.plotOptions.bar)!==null&&r!==void 0&&r.barHeight||(o.plotOptions.bar.barHeight=2),(a=o.plotOptions.bar)!==null&&a!==void 0&&a.columnWidth||(o.plotOptions.bar.columnWidth=2),o}},{key:"area",value:function(){return{stroke:{width:4,fill:{type:"solid",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}}},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}},markers:{size:0,hover:{sizeOffset:6}},tooltip:{followCursor:!1}}}},{key:"rangeArea",value:function(){return{stroke:{curve:"straight",width:0},fill:{type:"solid",opacity:.6},markers:{size:0},states:{hover:{filter:{type:"none"}},active:{filter:{type:"none"}}},tooltip:{intersect:!1,shared:!0,followCursor:!0,custom:function(o){return function(r){var a=Gt(r),d=a.color,h=a.seriesName,c=a.ylabel,p=a.start,f=a.end;return At(s(s({},r),{},{color:d,seriesName:h,ylabel:c,start:p,end:f}))}(o)}}}}},{key:"brush",value:function(o){return _.extend(o,{chart:{toolbar:{autoSelected:"selection",show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{width:1},tooltip:{enabled:!1},xaxis:{tooltip:{enabled:!1}}})}},{key:"stacked100",value:function(o){o.dataLabels=o.dataLabels||{},o.dataLabels.formatter=o.dataLabels.formatter||void 0;var r=o.dataLabels.formatter;return o.yaxis.forEach(function(a,d){o.yaxis[d].min=0,o.yaxis[d].max=100}),o.chart.type==="bar"&&(o.dataLabels.formatter=r||function(a){return typeof a=="number"&&a?a.toFixed(0)+"%":a}),o}},{key:"stackedBars",value:function(){var o=this.bar();return s(s({},o),{},{plotOptions:s(s({},o.plotOptions),{},{bar:s(s({},o.plotOptions.bar),{},{borderRadiusApplication:"end",borderRadiusWhenStacked:"last"})})})}},{key:"convertCatToNumeric",value:function(o){return o.xaxis.convertedCatToNumeric=!0,o}},{key:"convertCatToNumericXaxis",value:function(o,r,a){o.xaxis.type="numeric",o.xaxis.labels=o.xaxis.labels||{},o.xaxis.labels.formatter=o.xaxis.labels.formatter||function(c){return _.isNumber(c)?Math.floor(c):c};var d=o.xaxis.labels.formatter,h=o.xaxis.categories&&o.xaxis.categories.length?o.xaxis.categories:o.labels;return a&&a.length&&(h=a.map(function(c){return Array.isArray(c)?c:String(c)})),h&&h.length&&(o.xaxis.labels.formatter=function(c){return _.isNumber(c)?d(h[Math.floor(c)-1]):d(c)}),o.xaxis.categories=[],o.labels=[],o.xaxis.tickAmount=o.xaxis.tickAmount||"dataPoints",o}},{key:"bubble",value:function(){return{dataLabels:{style:{colors:["#fff"]}},tooltip:{shared:!1,intersect:!0},xaxis:{crosshairs:{width:0}},fill:{type:"solid",gradient:{shade:"light",inverse:!0,shadeIntensity:.55,opacityFrom:.4,opacityTo:.8}}}}},{key:"scatter",value:function(){return{dataLabels:{enabled:!1},tooltip:{shared:!1,intersect:!0},markers:{size:6,strokeWidth:1,hover:{sizeOffset:2}}}}},{key:"heatmap",value:function(){return{chart:{stacked:!1},fill:{opacity:1},dataLabels:{style:{colors:["#fff"]}},stroke:{colors:["#fff"]},tooltip:{followCursor:!0,marker:{show:!1},x:{show:!1}},legend:{position:"top",markers:{shape:"square",size:10,offsetY:2}},grid:{padding:{right:20}}}}},{key:"treemap",value:function(){return{chart:{zoom:{enabled:!1}},dataLabels:{style:{fontSize:14,fontWeight:600,colors:["#fff"]}},stroke:{show:!0,width:2,colors:["#fff"]},legend:{show:!1},fill:{gradient:{stops:[0,100]}},tooltip:{followCursor:!0,x:{show:!1}},grid:{padding:{left:0,right:0}},xaxis:{crosshairs:{show:!1},tooltip:{enabled:!1}}}}},{key:"pie",value:function(){return{chart:{toolbar:{show:!1}},plotOptions:{pie:{donut:{labels:{show:!1}}}},dataLabels:{formatter:function(o){return o.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",stops:[0,100]}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"donut",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(o){return o.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",shadeIntensity:.35,stops:[80,100],opacityFrom:1,opacityTo:1}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"polarArea",value:function(){return this.opts.yaxis[0].tickAmount=this.opts.yaxis[0].tickAmount?this.opts.yaxis[0].tickAmount:6,{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(o){return o.toFixed(1)+"%"},enabled:!1},stroke:{show:!0,width:2},fill:{opacity:.7},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"radar",value:function(){return this.opts.yaxis[0].labels.offsetY=this.opts.yaxis[0].labels.offsetY?this.opts.yaxis[0].labels.offsetY:6,{dataLabels:{enabled:!1,style:{fontSize:"11px"}},stroke:{width:2},markers:{size:3,strokeWidth:1,strokeOpacity:1},fill:{opacity:.2},tooltip:{shared:!1,intersect:!0,followCursor:!0},grid:{show:!1},xaxis:{labels:{formatter:function(o){return o},style:{colors:["#a8a8a8"],fontSize:"11px"}},tooltip:{enabled:!1},crosshairs:{show:!1}}}}},{key:"radialBar",value:function(){return{chart:{animations:{dynamicAnimation:{enabled:!0,speed:800}},toolbar:{show:!1}},fill:{gradient:{shade:"dark",shadeIntensity:.4,inverseColors:!1,type:"diagonal2",opacityFrom:1,opacityTo:1,stops:[70,98,100]}},legend:{show:!1,position:"right"},tooltip:{enabled:!1,fillSeriesColor:!0}}}},{key:"_getBoxTooltip",value:function(o,r,a,d,h){var c=o.globals.seriesCandleO[r][a],p=o.globals.seriesCandleH[r][a],f=o.globals.seriesCandleM[r][a],v=o.globals.seriesCandleL[r][a],y=o.globals.seriesCandleC[r][a];return o.config.series[r].type&&o.config.series[r].type!==h?`<div class="apexcharts-custom-tooltip">
          `.concat(o.config.series[r].name?o.config.series[r].name:"series-"+(r+1),": <strong>").concat(o.globals.series[r][a],`</strong>
        </div>`):'<div class="apexcharts-tooltip-box apexcharts-tooltip-'.concat(o.config.chart.type,'">')+"<div>".concat(d[0],': <span class="value">')+c+"</span></div>"+"<div>".concat(d[1],': <span class="value">')+p+"</span></div>"+(f?"<div>".concat(d[2],': <span class="value">')+f+"</span></div>":"")+"<div>".concat(d[3],': <span class="value">')+v+"</span></div>"+"<div>".concat(d[4],': <span class="value">')+y+"</span></div></div>"}}]),O}(),_t=function(){function O(o){l(this,O),this.opts=o}return g(O,[{key:"init",value:function(o){var r=o.responsiveOverride,a=this.opts,d=new He,h=new vt(a);this.chartType=a.chart.type,a=this.extendYAxis(a),a=this.extendAnnotations(a);var c=d.init(),p={};if(a&&n(a)==="object"){var f,v,y,b,w,R,T,F,I={};I=["line","area","bar","candlestick","boxPlot","rangeBar","rangeArea","bubble","scatter","heatmap","treemap","pie","polarArea","donut","radar","radialBar"].indexOf(a.chart.type)!==-1?h[a.chart.type]():h.line(),(f=a.plotOptions)!==null&&f!==void 0&&(v=f.bar)!==null&&v!==void 0&&v.isFunnel&&(I=h.funnel()),a.chart.stacked&&a.chart.type==="bar"&&(I=h.stackedBars()),(y=a.chart.brush)!==null&&y!==void 0&&y.enabled&&(I=h.brush(I)),a.chart.stacked&&a.chart.stackType==="100%"&&(a=h.stacked100(a)),(b=a.plotOptions)!==null&&b!==void 0&&(w=b.bar)!==null&&w!==void 0&&w.isDumbbell&&(a=h.dumbbell(a)),this.checkForDarkTheme(window.Apex),this.checkForDarkTheme(a),a.xaxis=a.xaxis||window.Apex.xaxis||{},r||(a.xaxis.convertedCatToNumeric=!1),((R=(a=this.checkForCatToNumericXAxis(this.chartType,I,a)).chart.sparkline)!==null&&R!==void 0&&R.enabled||(T=window.Apex.chart)!==null&&T!==void 0&&(F=T.sparkline)!==null&&F!==void 0&&F.enabled)&&(I=h.sparkline(I)),p=_.extend(c,I)}var G=_.extend(p,window.Apex);return c=_.extend(G,a),c=this.handleUserInputErrors(c)}},{key:"checkForCatToNumericXAxis",value:function(o,r,a){var d,h,c=new vt(a),p=(o==="bar"||o==="boxPlot")&&((d=a.plotOptions)===null||d===void 0||(h=d.bar)===null||h===void 0?void 0:h.horizontal),f=o==="pie"||o==="polarArea"||o==="donut"||o==="radar"||o==="radialBar"||o==="heatmap",v=a.xaxis.type!=="datetime"&&a.xaxis.type!=="numeric",y=a.xaxis.tickPlacement?a.xaxis.tickPlacement:r.xaxis&&r.xaxis.tickPlacement;return p||f||!v||y==="between"||(a=c.convertCatToNumeric(a)),a}},{key:"extendYAxis",value:function(o,r){var a=new He;(o.yaxis===void 0||!o.yaxis||Array.isArray(o.yaxis)&&o.yaxis.length===0)&&(o.yaxis={}),o.yaxis.constructor!==Array&&window.Apex.yaxis&&window.Apex.yaxis.constructor!==Array&&(o.yaxis=_.extend(o.yaxis,window.Apex.yaxis)),o.yaxis.constructor!==Array?o.yaxis=[_.extend(a.yAxis,o.yaxis)]:o.yaxis=_.extendArray(o.yaxis,a.yAxis);var d=!1;o.yaxis.forEach(function(c){c.logarithmic&&(d=!0)});var h=o.series;return r&&!h&&(h=r.config.series),d&&h.length!==o.yaxis.length&&h.length&&(o.yaxis=h.map(function(c,p){if(c.name||(h[p].name="series-".concat(p+1)),o.yaxis[p])return o.yaxis[p].seriesName=h[p].name,o.yaxis[p];var f=_.extend(a.yAxis,o.yaxis[0]);return f.show=!1,f})),d&&h.length>1&&h.length!==o.yaxis.length&&console.warn("A multi-series logarithmic chart should have equal number of series and y-axes"),o}},{key:"extendAnnotations",value:function(o){return o.annotations===void 0&&(o.annotations={},o.annotations.yaxis=[],o.annotations.xaxis=[],o.annotations.points=[]),o=this.extendYAxisAnnotations(o),o=this.extendXAxisAnnotations(o),o=this.extendPointAnnotations(o)}},{key:"extendYAxisAnnotations",value:function(o){var r=new He;return o.annotations.yaxis=_.extendArray(o.annotations.yaxis!==void 0?o.annotations.yaxis:[],r.yAxisAnnotation),o}},{key:"extendXAxisAnnotations",value:function(o){var r=new He;return o.annotations.xaxis=_.extendArray(o.annotations.xaxis!==void 0?o.annotations.xaxis:[],r.xAxisAnnotation),o}},{key:"extendPointAnnotations",value:function(o){var r=new He;return o.annotations.points=_.extendArray(o.annotations.points!==void 0?o.annotations.points:[],r.pointAnnotation),o}},{key:"checkForDarkTheme",value:function(o){o.theme&&o.theme.mode==="dark"&&(o.tooltip||(o.tooltip={}),o.tooltip.theme!=="light"&&(o.tooltip.theme="dark"),o.chart.foreColor||(o.chart.foreColor="#f6f7f8"),o.chart.background||(o.chart.background="#424242"),o.theme.palette||(o.theme.palette="palette4"))}},{key:"handleUserInputErrors",value:function(o){var r=o;if(r.tooltip.shared&&r.tooltip.intersect)throw new Error("tooltip.shared cannot be enabled when tooltip.intersect is true. Turn off any other option by setting it to false.");if(r.chart.type==="bar"&&r.plotOptions.bar.horizontal){if(r.yaxis.length>1)throw new Error("Multiple Y Axis for bars are not supported. Switch to column chart by setting plotOptions.bar.horizontal=false");r.yaxis[0].reversed&&(r.yaxis[0].opposite=!0),r.xaxis.tooltip.enabled=!1,r.yaxis[0].tooltip.enabled=!1,r.chart.zoom.enabled=!1}return r.chart.type!=="bar"&&r.chart.type!=="rangeBar"||r.tooltip.shared&&r.xaxis.crosshairs.width==="barWidth"&&r.series.length>1&&(r.xaxis.crosshairs.width="tickWidth"),r.chart.type!=="candlestick"&&r.chart.type!=="boxPlot"||r.yaxis[0].reversed&&(console.warn("Reversed y-axis in ".concat(r.chart.type," chart is not supported.")),r.yaxis[0].reversed=!1),r}}]),O}(),ti=function(){function O(){l(this,O)}return g(O,[{key:"initGlobalVars",value:function(o){o.series=[],o.seriesCandleO=[],o.seriesCandleH=[],o.seriesCandleM=[],o.seriesCandleL=[],o.seriesCandleC=[],o.seriesRangeStart=[],o.seriesRangeEnd=[],o.seriesRange=[],o.seriesPercent=[],o.seriesGoals=[],o.seriesX=[],o.seriesZ=[],o.seriesNames=[],o.seriesTotals=[],o.seriesLog=[],o.seriesColors=[],o.stackedSeriesTotals=[],o.seriesXvalues=[],o.seriesYvalues=[],o.labels=[],o.hasXaxisGroups=!1,o.groups=[],o.hasSeriesGroups=!1,o.seriesGroups=[],o.categoryLabels=[],o.timescaleLabels=[],o.noLabelsProvided=!1,o.resizeTimer=null,o.selectionResizeTimer=null,o.delayedElements=[],o.pointsArray=[],o.dataLabelsRects=[],o.isXNumeric=!1,o.skipLastTimelinelabel=!1,o.skipFirstTimelinelabel=!1,o.isDataXYZ=!1,o.isMultiLineX=!1,o.isMultipleYAxis=!1,o.maxY=-Number.MAX_VALUE,o.minY=Number.MIN_VALUE,o.minYArr=[],o.maxYArr=[],o.maxX=-Number.MAX_VALUE,o.minX=Number.MAX_VALUE,o.initialMaxX=-Number.MAX_VALUE,o.initialMinX=Number.MAX_VALUE,o.maxDate=0,o.minDate=Number.MAX_VALUE,o.minZ=Number.MAX_VALUE,o.maxZ=-Number.MAX_VALUE,o.minXDiff=Number.MAX_VALUE,o.yAxisScale=[],o.xAxisScale=null,o.xAxisTicksPositions=[],o.yLabelsCoords=[],o.yTitleCoords=[],o.barPadForNumericAxis=0,o.padHorizontal=0,o.xRange=0,o.yRange=[],o.zRange=0,o.dataPoints=0,o.xTickAmount=0}},{key:"globalVars",value:function(o){return{chartID:null,cuid:null,events:{beforeMount:[],mounted:[],updated:[],clicked:[],selection:[],dataPointSelection:[],zoomed:[],scrolled:[]},colors:[],clientX:null,clientY:null,fill:{colors:[]},stroke:{colors:[]},dataLabels:{style:{colors:[]}},radarPolygons:{fill:{colors:[]}},markers:{colors:[],size:o.markers.size,largestSize:0},animationEnded:!1,isTouchDevice:"ontouchstart"in window||navigator.msMaxTouchPoints,isDirty:!1,isExecCalled:!1,initialConfig:null,initialSeries:[],lastXAxis:[],lastYAxis:[],columnSeries:null,labels:[],timescaleLabels:[],noLabelsProvided:!1,allSeriesCollapsed:!1,collapsedSeries:[],collapsedSeriesIndices:[],ancillaryCollapsedSeries:[],ancillaryCollapsedSeriesIndices:[],risingSeries:[],dataFormatXNumeric:!1,capturedSeriesIndex:-1,capturedDataPointIndex:-1,selectedDataPoints:[],goldenPadding:35,invalidLogScale:!1,ignoreYAxisIndexes:[],yAxisSameScaleIndices:[],maxValsInArrayIndex:0,radialSize:0,selection:void 0,zoomEnabled:o.chart.toolbar.autoSelected==="zoom"&&o.chart.toolbar.tools.zoom&&o.chart.zoom.enabled,panEnabled:o.chart.toolbar.autoSelected==="pan"&&o.chart.toolbar.tools.pan,selectionEnabled:o.chart.toolbar.autoSelected==="selection"&&o.chart.toolbar.tools.selection,yaxis:null,mousedown:!1,lastClientPosition:{},visibleXRange:void 0,yValueDecimal:0,total:0,SVGNS:"http://www.w3.org/2000/svg",svgWidth:0,svgHeight:0,noData:!1,locale:{},dom:{},memory:{methodsToExec:[]},shouldAnimate:!0,skipLastTimelinelabel:!1,skipFirstTimelinelabel:!1,delayedElements:[],axisCharts:!0,isDataXYZ:!1,resized:!1,resizeTimer:null,comboCharts:!1,dataChanged:!1,previousPaths:[],allSeriesHasEqualX:!0,pointsArray:[],dataLabelsRects:[],lastDrawnDataLabelsIndexes:[],hasNullValues:!1,easing:null,zoomed:!1,gridWidth:0,gridHeight:0,rotateXLabels:!1,defaultLabels:!1,xLabelFormatter:void 0,yLabelFormatters:[],xaxisTooltipFormatter:void 0,ttKeyFormatter:void 0,ttVal:void 0,ttZFormatter:void 0,LINE_HEIGHT_RATIO:1.618,xAxisLabelsHeight:0,xAxisGroupLabelsHeight:0,xAxisLabelsWidth:0,yAxisLabelsWidth:0,scaleX:1,scaleY:1,translateX:0,translateY:0,translateYAxisX:[],yAxisWidths:[],translateXAxisY:0,translateXAxisX:0,tooltip:null}}},{key:"init",value:function(o){var r=this.globalVars(o);return this.initGlobalVars(r),r.initialConfig=_.extend({},o),r.initialSeries=_.clone(o.series),r.lastXAxis=_.clone(r.initialConfig.xaxis),r.lastYAxis=_.clone(r.initialConfig.yaxis),r}}]),O}(),ii=function(){function O(o){l(this,O),this.opts=o}return g(O,[{key:"init",value:function(){var o=new _t(this.opts).init({responsiveOverride:!1});return{config:o,globals:new ti().init(o)}}}]),O}(),pt=function(){function O(o){l(this,O),this.ctx=o,this.w=o.w,this.opts=null,this.seriesIndex=0}return g(O,[{key:"clippedImgArea",value:function(o){var r=this.w,a=r.config,d=parseInt(r.globals.gridWidth,10),h=parseInt(r.globals.gridHeight,10),c=d>h?d:h,p=o.image,f=0,v=0;o.width===void 0&&o.height===void 0?a.fill.image.width!==void 0&&a.fill.image.height!==void 0?(f=a.fill.image.width+1,v=a.fill.image.height):(f=c+1,v=c):(f=o.width,v=o.height);var y=document.createElementNS(r.globals.SVGNS,"pattern");$.setAttrs(y,{id:o.patternID,patternUnits:o.patternUnits?o.patternUnits:"userSpaceOnUse",width:f+"px",height:v+"px"});var b=document.createElementNS(r.globals.SVGNS,"image");y.appendChild(b),b.setAttributeNS(window.SVG.xlink,"href",p),$.setAttrs(b,{x:0,y:0,preserveAspectRatio:"none",width:f+"px",height:v+"px"}),b.style.opacity=o.opacity,r.globals.dom.elDefs.node.appendChild(y)}},{key:"getSeriesIndex",value:function(o){var r=this.w,a=r.config.chart.type;return(a==="bar"||a==="rangeBar")&&r.config.plotOptions.bar.distributed||a==="heatmap"||a==="treemap"?this.seriesIndex=o.seriesNumber:this.seriesIndex=o.seriesNumber%r.globals.series.length,this.seriesIndex}},{key:"fillPath",value:function(o){var r=this.w;this.opts=o;var a,d,h,c=this.w.config;this.seriesIndex=this.getSeriesIndex(o);var p=this.getFillColors()[this.seriesIndex];r.globals.seriesColors[this.seriesIndex]!==void 0&&(p=r.globals.seriesColors[this.seriesIndex]),typeof p=="function"&&(p=p({seriesIndex:this.seriesIndex,dataPointIndex:o.dataPointIndex,value:o.value,w:r}));var f=o.fillType?o.fillType:this.getFillType(this.seriesIndex),v=Array.isArray(c.fill.opacity)?c.fill.opacity[this.seriesIndex]:c.fill.opacity;o.color&&(p=o.color),p||(p="#fff",console.warn("undefined color - ApexCharts"));var y=p;if(p.indexOf("rgb")===-1?p.length<9&&(y=_.hexToRgba(p,v)):p.indexOf("rgba")>-1&&(v=_.getOpacityFromRGBA(p)),o.opacity&&(v=o.opacity),f==="pattern"&&(d=this.handlePatternFill({fillConfig:o.fillConfig,patternFill:d,fillColor:p,fillOpacity:v,defaultColor:y})),f==="gradient"&&(h=this.handleGradientFill({fillConfig:o.fillConfig,fillColor:p,fillOpacity:v,i:this.seriesIndex})),f==="image"){var b=c.fill.image.src,w=o.patternID?o.patternID:"";this.clippedImgArea({opacity:v,image:Array.isArray(b)?o.seriesNumber<b.length?b[o.seriesNumber]:b[0]:b,width:o.width?o.width:void 0,height:o.height?o.height:void 0,patternUnits:o.patternUnits,patternID:"pattern".concat(r.globals.cuid).concat(o.seriesNumber+1).concat(w)}),a="url(#pattern".concat(r.globals.cuid).concat(o.seriesNumber+1).concat(w,")")}else a=f==="gradient"?h:f==="pattern"?d:y;return o.solid&&(a=y),a}},{key:"getFillType",value:function(o){var r=this.w;return Array.isArray(r.config.fill.type)?r.config.fill.type[o]:r.config.fill.type}},{key:"getFillColors",value:function(){var o=this.w,r=o.config,a=this.opts,d=[];return o.globals.comboCharts?o.config.series[this.seriesIndex].type==="line"?Array.isArray(o.globals.stroke.colors)?d=o.globals.stroke.colors:d.push(o.globals.stroke.colors):Array.isArray(o.globals.fill.colors)?d=o.globals.fill.colors:d.push(o.globals.fill.colors):r.chart.type==="line"?Array.isArray(o.globals.stroke.colors)?d=o.globals.stroke.colors:d.push(o.globals.stroke.colors):Array.isArray(o.globals.fill.colors)?d=o.globals.fill.colors:d.push(o.globals.fill.colors),a.fillColors!==void 0&&(d=[],Array.isArray(a.fillColors)?d=a.fillColors.slice():d.push(a.fillColors)),d}},{key:"handlePatternFill",value:function(o){var r=o.fillConfig,a=o.patternFill,d=o.fillColor,h=o.fillOpacity,c=o.defaultColor,p=this.w.config.fill;r&&(p=r);var f=this.opts,v=new $(this.ctx),y=Array.isArray(p.pattern.strokeWidth)?p.pattern.strokeWidth[this.seriesIndex]:p.pattern.strokeWidth,b=d;return Array.isArray(p.pattern.style)?a=p.pattern.style[f.seriesNumber]!==void 0?v.drawPattern(p.pattern.style[f.seriesNumber],p.pattern.width,p.pattern.height,b,y,h):c:a=v.drawPattern(p.pattern.style,p.pattern.width,p.pattern.height,b,y,h),a}},{key:"handleGradientFill",value:function(o){var r=o.fillColor,a=o.fillOpacity,d=o.fillConfig,h=o.i,c=this.w.config.fill;d&&(c=s(s({},c),d));var p,f=this.opts,v=new $(this.ctx),y=new _,b=c.gradient.type,w=r,R=c.gradient.opacityFrom===void 0?a:Array.isArray(c.gradient.opacityFrom)?c.gradient.opacityFrom[h]:c.gradient.opacityFrom;w.indexOf("rgba")>-1&&(R=_.getOpacityFromRGBA(w));var T=c.gradient.opacityTo===void 0?a:Array.isArray(c.gradient.opacityTo)?c.gradient.opacityTo[h]:c.gradient.opacityTo;if(c.gradient.gradientToColors===void 0||c.gradient.gradientToColors.length===0)p=c.gradient.shade==="dark"?y.shadeColor(-1*parseFloat(c.gradient.shadeIntensity),r.indexOf("rgb")>-1?_.rgb2hex(r):r):y.shadeColor(parseFloat(c.gradient.shadeIntensity),r.indexOf("rgb")>-1?_.rgb2hex(r):r);else if(c.gradient.gradientToColors[f.seriesNumber]){var F=c.gradient.gradientToColors[f.seriesNumber];p=F,F.indexOf("rgba")>-1&&(T=_.getOpacityFromRGBA(F))}else p=r;if(c.gradient.gradientFrom&&(w=c.gradient.gradientFrom),c.gradient.gradientTo&&(p=c.gradient.gradientTo),c.gradient.inverseColors){var I=w;w=p,p=I}return w.indexOf("rgb")>-1&&(w=_.rgb2hex(w)),p.indexOf("rgb")>-1&&(p=_.rgb2hex(p)),v.drawGradient(b,w,p,R,T,f.size,c.gradient.stops,c.gradient.colorStops,h)}}]),O}(),Ke=function(){function O(o,r){l(this,O),this.ctx=o,this.w=o.w}return g(O,[{key:"setGlobalMarkerSize",value:function(){var o=this.w;if(o.globals.markers.size=Array.isArray(o.config.markers.size)?o.config.markers.size:[o.config.markers.size],o.globals.markers.size.length>0){if(o.globals.markers.size.length<o.globals.series.length+1)for(var r=0;r<=o.globals.series.length;r++)o.globals.markers.size[r]===void 0&&o.globals.markers.size.push(o.globals.markers.size[0])}else o.globals.markers.size=o.config.series.map(function(a){return o.config.markers.size})}},{key:"plotChartMarkers",value:function(o,r,a,d){var h,c=arguments.length>4&&arguments[4]!==void 0&&arguments[4],p=this.w,f=r,v=o,y=null,b=new $(this.ctx),w=p.config.markers.discrete&&p.config.markers.discrete.length;if((p.globals.markers.size[r]>0||c||w)&&(y=b.group({class:c||w?"":"apexcharts-series-markers"})).attr("clip-path","url(#gridRectMarkerMask".concat(p.globals.cuid,")")),Array.isArray(v.x))for(var R=0;R<v.x.length;R++){var T=a;a===1&&R===0&&(T=0),a===1&&R===1&&(T=1);var F="apexcharts-marker";if(p.config.chart.type!=="line"&&p.config.chart.type!=="area"||p.globals.comboCharts||p.config.tooltip.intersect||(F+=" no-pointer-events"),(Array.isArray(p.config.markers.size)?p.globals.markers.size[r]>0:p.config.markers.size>0)||c||w){_.isNumber(v.y[R])?F+=" w".concat(_.randomId()):F="apexcharts-nullpoint";var I=this.getMarkerConfig({cssClass:F,seriesIndex:r,dataPointIndex:T});p.config.series[f].data[T]&&(p.config.series[f].data[T].fillColor&&(I.pointFillColor=p.config.series[f].data[T].fillColor),p.config.series[f].data[T].strokeColor&&(I.pointStrokeColor=p.config.series[f].data[T].strokeColor)),d&&(I.pSize=d),(v.x[R]<0||v.x[R]>p.globals.gridWidth||v.y[R]<-p.globals.markers.largestSize||v.y[R]>p.globals.gridHeight+p.globals.markers.largestSize)&&(I.pSize=0),(h=b.drawMarker(v.x[R],v.y[R],I)).attr("rel",T),h.attr("j",T),h.attr("index",r),h.node.setAttribute("default-marker-size",I.pSize),new se(this.ctx).setSelectionFilter(h,r,T),this.addEvents(h),y&&y.add(h)}else p.globals.pointsArray[r]===void 0&&(p.globals.pointsArray[r]=[]),p.globals.pointsArray[r].push([v.x[R],v.y[R]])}return y}},{key:"getMarkerConfig",value:function(o){var r=o.cssClass,a=o.seriesIndex,d=o.dataPointIndex,h=d===void 0?null:d,c=o.finishRadius,p=c===void 0?null:c,f=this.w,v=this.getMarkerStyle(a),y=f.globals.markers.size[a],b=f.config.markers;return h!==null&&b.discrete.length&&b.discrete.map(function(w){w.seriesIndex===a&&w.dataPointIndex===h&&(v.pointStrokeColor=w.strokeColor,v.pointFillColor=w.fillColor,y=w.size,v.pointShape=w.shape)}),{pSize:p===null?y:p,pRadius:b.radius,width:Array.isArray(b.width)?b.width[a]:b.width,height:Array.isArray(b.height)?b.height[a]:b.height,pointStrokeWidth:Array.isArray(b.strokeWidth)?b.strokeWidth[a]:b.strokeWidth,pointStrokeColor:v.pointStrokeColor,pointFillColor:v.pointFillColor,shape:v.pointShape||(Array.isArray(b.shape)?b.shape[a]:b.shape),class:r,pointStrokeOpacity:Array.isArray(b.strokeOpacity)?b.strokeOpacity[a]:b.strokeOpacity,pointStrokeDashArray:Array.isArray(b.strokeDashArray)?b.strokeDashArray[a]:b.strokeDashArray,pointFillOpacity:Array.isArray(b.fillOpacity)?b.fillOpacity[a]:b.fillOpacity,seriesIndex:a}}},{key:"addEvents",value:function(o){var r=this.w,a=new $(this.ctx);o.node.addEventListener("mouseenter",a.pathMouseEnter.bind(this.ctx,o)),o.node.addEventListener("mouseleave",a.pathMouseLeave.bind(this.ctx,o)),o.node.addEventListener("mousedown",a.pathMouseDown.bind(this.ctx,o)),o.node.addEventListener("click",r.config.markers.onClick),o.node.addEventListener("dblclick",r.config.markers.onDblClick),o.node.addEventListener("touchstart",a.pathMouseDown.bind(this.ctx,o),{passive:!0})}},{key:"getMarkerStyle",value:function(o){var r=this.w,a=r.globals.markers.colors,d=r.config.markers.strokeColor||r.config.markers.strokeColors;return{pointStrokeColor:Array.isArray(d)?d[o]:d,pointFillColor:Array.isArray(a)?a[o]:a}}}]),O}(),qt=function(){function O(o){l(this,O),this.ctx=o,this.w=o.w,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled}return g(O,[{key:"draw",value:function(o,r,a){var d=this.w,h=new $(this.ctx),c=a.realIndex,p=a.pointsPos,f=a.zRatio,v=a.elParent,y=h.group({class:"apexcharts-series-markers apexcharts-series-".concat(d.config.chart.type)});if(y.attr("clip-path","url(#gridRectMarkerMask".concat(d.globals.cuid,")")),Array.isArray(p.x))for(var b=0;b<p.x.length;b++){var w=r+1,R=!0;r===0&&b===0&&(w=0),r===0&&b===1&&(w=1);var T=0,F=d.globals.markers.size[c];if(f!==1/0){var I=d.config.plotOptions.bubble;F=d.globals.seriesZ[c][w],I.zScaling&&(F/=f),I.minBubbleRadius&&F<I.minBubbleRadius&&(F=I.minBubbleRadius),I.maxBubbleRadius&&F>I.maxBubbleRadius&&(F=I.maxBubbleRadius)}d.config.chart.animations.enabled||(T=F);var G=p.x[b],H=p.y[b];if(T=T||0,H!==null&&d.globals.series[c][w]!==void 0||(R=!1),R){var m=this.drawPoint(G,H,T,F,c,w,r);y.add(m)}v.add(y)}}},{key:"drawPoint",value:function(o,r,a,d,h,c,p){var f=this.w,v=h,y=new J(this.ctx),b=new se(this.ctx),w=new pt(this.ctx),R=new Ke(this.ctx),T=new $(this.ctx),F=R.getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:v,dataPointIndex:c,finishRadius:f.config.chart.type==="bubble"||f.globals.comboCharts&&f.config.series[h]&&f.config.series[h].type==="bubble"?d:null});d=F.pSize;var I,G=w.fillPath({seriesNumber:h,dataPointIndex:c,color:F.pointFillColor,patternUnits:"objectBoundingBox",value:f.globals.series[h][p]});if(F.shape==="circle"?I=T.drawCircle(a):F.shape!=="square"&&F.shape!=="rect"||(I=T.drawRect(0,0,F.width-F.pointStrokeWidth/2,F.height-F.pointStrokeWidth/2,F.pRadius)),f.config.series[v].data[c]&&f.config.series[v].data[c].fillColor&&(G=f.config.series[v].data[c].fillColor),I.attr({x:o-F.width/2-F.pointStrokeWidth/2,y:r-F.height/2-F.pointStrokeWidth/2,cx:o,cy:r,fill:G,"fill-opacity":F.pointFillOpacity,stroke:F.pointStrokeColor,r:d,"stroke-width":F.pointStrokeWidth,"stroke-dasharray":F.pointStrokeDashArray,"stroke-opacity":F.pointStrokeOpacity}),f.config.chart.dropShadow.enabled){var H=f.config.chart.dropShadow;b.dropShadow(I,H,h)}if(!this.initialAnim||f.globals.dataChanged||f.globals.resized)f.globals.animationEnded=!0;else{var m=f.config.chart.animations.speed;y.animateMarker(I,0,F.shape==="circle"?d:{width:F.width,height:F.height},m,f.globals.easing,function(){window.setTimeout(function(){y.animationCompleted(I)},100)})}if(f.globals.dataChanged&&F.shape==="circle")if(this.dynamicAnim){var x,P,k,V,B=f.config.chart.animations.dynamicAnimation.speed;(V=f.globals.previousPaths[h]&&f.globals.previousPaths[h][p])!=null&&(x=V.x,P=V.y,k=V.r!==void 0?V.r:d);for(var j=0;j<f.globals.collapsedSeries.length;j++)f.globals.collapsedSeries[j].index===h&&(B=1,d=0);o===0&&r===0&&(d=0),y.animateCircle(I,{cx:x,cy:P,r:k},{cx:o,cy:r,r:d},B,f.globals.easing)}else I.attr({r:d});return I.attr({rel:c,j:c,index:h,"default-marker-size":d}),b.setSelectionFilter(I,h,c),R.addEvents(I),I.node.classList.add("apexcharts-marker"),I}},{key:"centerTextInBubble",value:function(o){var r=this.w;return{y:o+=parseInt(r.config.dataLabels.style.fontSize,10)/4}}}]),O}(),Kt=function(){function O(o){l(this,O),this.ctx=o,this.w=o.w}return g(O,[{key:"dataLabelsCorrection",value:function(o,r,a,d,h,c,p){var f=this.w,v=!1,y=new $(this.ctx).getTextRects(a,p),b=y.width,w=y.height;r<0&&(r=0),r>f.globals.gridHeight+w&&(r=f.globals.gridHeight+w/2),f.globals.dataLabelsRects[d]===void 0&&(f.globals.dataLabelsRects[d]=[]),f.globals.dataLabelsRects[d].push({x:o,y:r,width:b,height:w});var R=f.globals.dataLabelsRects[d].length-2,T=f.globals.lastDrawnDataLabelsIndexes[d]!==void 0?f.globals.lastDrawnDataLabelsIndexes[d][f.globals.lastDrawnDataLabelsIndexes[d].length-1]:0;if(f.globals.dataLabelsRects[d][R]!==void 0){var F=f.globals.dataLabelsRects[d][T];(o>F.x+F.width||r>F.y+F.height||r+w<F.y||o+b<F.x)&&(v=!0)}return(h===0||c)&&(v=!0),{x:o,y:r,textRects:y,drawnextLabel:v}}},{key:"drawDataLabel",value:function(o){var r=this,a=o.type,d=o.pos,h=o.i,c=o.j,p=o.isRangeStart,f=o.strokeWidth,v=f===void 0?2:f,y=this.w,b=new $(this.ctx),w=y.config.dataLabels,R=0,T=0,F=c,I=null;if(!w.enabled||!Array.isArray(d.x))return I;I=b.group({class:"apexcharts-data-labels"});for(var G=0;G<d.x.length;G++)if(R=d.x[G]+w.offsetX,T=d.y[G]+w.offsetY+v,!isNaN(R)){c===1&&G===0&&(F=0),c===1&&G===1&&(F=1);var H=y.globals.series[h][F];a==="rangeArea"&&(H=p?y.globals.seriesRangeStart[h][F]:y.globals.seriesRangeEnd[h][F]);var m="",x=function(P){return y.config.dataLabels.formatter(P,{ctx:r.ctx,seriesIndex:h,dataPointIndex:F,w:y})};y.config.chart.type==="bubble"?(m=x(H=y.globals.seriesZ[h][F]),T=d.y[G],T=new qt(this.ctx).centerTextInBubble(T,h,F).y):H!==void 0&&(m=x(H)),this.plotDataLabelsText({x:R,y:T,text:m,i:h,j:F,parent:I,offsetCorrection:!0,dataLabelsConfig:y.config.dataLabels})}return I}},{key:"plotDataLabelsText",value:function(o){var r=this.w,a=new $(this.ctx),d=o.x,h=o.y,c=o.i,p=o.j,f=o.text,v=o.textAnchor,y=o.fontSize,b=o.parent,w=o.dataLabelsConfig,R=o.color,T=o.alwaysDrawDataLabel,F=o.offsetCorrection;if(!(Array.isArray(r.config.dataLabels.enabledOnSeries)&&r.config.dataLabels.enabledOnSeries.indexOf(c)<0)){var I={x:d,y:h,drawnextLabel:!0,textRects:null};F&&(I=this.dataLabelsCorrection(d,h,f,c,p,T,parseInt(w.style.fontSize,10))),r.globals.zoomed||(d=I.x,h=I.y),I.textRects&&(d<-20-I.textRects.width||d>r.globals.gridWidth+I.textRects.width+30)&&(f="");var G=r.globals.dataLabels.style.colors[c];((r.config.chart.type==="bar"||r.config.chart.type==="rangeBar")&&r.config.plotOptions.bar.distributed||r.config.dataLabels.distributed)&&(G=r.globals.dataLabels.style.colors[p]),typeof G=="function"&&(G=G({series:r.globals.series,seriesIndex:c,dataPointIndex:p,w:r})),R&&(G=R);var H=w.offsetX,m=w.offsetY;if(r.config.chart.type!=="bar"&&r.config.chart.type!=="rangeBar"||(H=0,m=0),I.drawnextLabel){var x=a.drawText({width:100,height:parseInt(w.style.fontSize,10),x:d+H,y:h+m,foreColor:G,textAnchor:v||w.textAnchor,text:f,fontSize:y||w.style.fontSize,fontFamily:w.style.fontFamily,fontWeight:w.style.fontWeight||"normal"});if(x.attr({class:"apexcharts-datalabel",cx:d,cy:h}),w.dropShadow.enabled){var P=w.dropShadow;new se(this.ctx).dropShadow(x,P)}b.add(x),r.globals.lastDrawnDataLabelsIndexes[c]===void 0&&(r.globals.lastDrawnDataLabelsIndexes[c]=[]),r.globals.lastDrawnDataLabelsIndexes[c].push(p)}}}},{key:"addBackgroundToDataLabel",value:function(o,r){var a=this.w,d=a.config.dataLabels.background,h=d.padding,c=d.padding/2,p=r.width,f=r.height,v=new $(this.ctx).drawRect(r.x-h,r.y-c/2,p+2*h,f+c,d.borderRadius,a.config.chart.background==="transparent"?"#fff":a.config.chart.background,d.opacity,d.borderWidth,d.borderColor);return d.dropShadow.enabled&&new se(this.ctx).dropShadow(v,d.dropShadow),v}},{key:"dataLabelsBackground",value:function(){var o=this.w;if(o.config.chart.type!=="bubble")for(var r=o.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels text"),a=0;a<r.length;a++){var d=r[a],h=d.getBBox(),c=null;if(h.width&&h.height&&(c=this.addBackgroundToDataLabel(d,h)),c){d.parentNode.insertBefore(c.node,d);var p=d.getAttribute("fill");o.config.chart.animations.enabled&&!o.globals.resized&&!o.globals.dataChanged?c.animate().attr({fill:p}):c.attr({fill:p}),d.setAttribute("fill",o.config.dataLabels.background.foreColor)}}}},{key:"bringForward",value:function(){for(var o=this.w,r=o.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels"),a=o.globals.dom.baseEl.querySelector(".apexcharts-plot-series:last-child"),d=0;d<r.length;d++)a&&a.insertBefore(r[d],a.nextSibling)}}]),O}(),xt=function(){function O(o){l(this,O),this.ctx=o,this.w=o.w,this.legendInactiveClass="legend-mouseover-inactive"}return g(O,[{key:"getAllSeriesEls",value:function(){return this.w.globals.dom.baseEl.getElementsByClassName("apexcharts-series")}},{key:"getSeriesByName",value:function(o){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner .apexcharts-series[seriesName='".concat(_.escapeString(o),"']"))}},{key:"isSeriesHidden",value:function(o){var r=this.getSeriesByName(o),a=parseInt(r.getAttribute("data:realIndex"),10);return{isHidden:r.classList.contains("apexcharts-series-collapsed"),realIndex:a}}},{key:"addCollapsedClassToSeries",value:function(o,r){var a=this.w;function d(h){for(var c=0;c<h.length;c++)h[c].index===r&&o.node.classList.add("apexcharts-series-collapsed")}d(a.globals.collapsedSeries),d(a.globals.ancillaryCollapsedSeries)}},{key:"toggleSeries",value:function(o){var r=this.isSeriesHidden(o);return this.ctx.legend.legendHelpers.toggleDataSeries(r.realIndex,r.isHidden),r.isHidden}},{key:"showSeries",value:function(o){var r=this.isSeriesHidden(o);r.isHidden&&this.ctx.legend.legendHelpers.toggleDataSeries(r.realIndex,!0)}},{key:"hideSeries",value:function(o){var r=this.isSeriesHidden(o);r.isHidden||this.ctx.legend.legendHelpers.toggleDataSeries(r.realIndex,!1)}},{key:"resetSeries",value:function(){var o=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],r=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],a=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],d=this.w,h=_.clone(d.globals.initialSeries);d.globals.previousPaths=[],a?(d.globals.collapsedSeries=[],d.globals.ancillaryCollapsedSeries=[],d.globals.collapsedSeriesIndices=[],d.globals.ancillaryCollapsedSeriesIndices=[]):h=this.emptyCollapsedSeries(h),d.config.series=h,o&&(r&&(d.globals.zoomed=!1,this.ctx.updateHelpers.revertDefaultAxisMinMax()),this.ctx.updateHelpers._updateSeries(h,d.config.chart.animations.dynamicAnimation.enabled))}},{key:"emptyCollapsedSeries",value:function(o){for(var r=this.w,a=0;a<o.length;a++)r.globals.collapsedSeriesIndices.indexOf(a)>-1&&(o[a].data=[]);return o}},{key:"toggleSeriesOnHover",value:function(o,r){var a=this.w;r||(r=o.target);var d=a.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels");if(o.type==="mousemove"){var h=parseInt(r.getAttribute("rel"),10)-1,c=null,p=null;a.globals.axisCharts||a.config.chart.type==="radialBar"?a.globals.axisCharts?(c=a.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(h,"']")),p=a.globals.dom.baseEl.querySelector(".apexcharts-datalabels[data\\:realIndex='".concat(h,"']"))):c=a.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(h+1,"']")):c=a.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(h+1,"'] path"));for(var f=0;f<d.length;f++)d[f].classList.add(this.legendInactiveClass);c!==null&&(a.globals.axisCharts||c.parentNode.classList.remove(this.legendInactiveClass),c.classList.remove(this.legendInactiveClass),p!==null&&p.classList.remove(this.legendInactiveClass))}else if(o.type==="mouseout")for(var v=0;v<d.length;v++)d[v].classList.remove(this.legendInactiveClass)}},{key:"highlightRangeInSeries",value:function(o,r){var a=this,d=this.w,h=d.globals.dom.baseEl.getElementsByClassName("apexcharts-heatmap-rect"),c=function(f){for(var v=0;v<h.length;v++)h[v].classList[f](a.legendInactiveClass)};if(o.type==="mousemove"){var p=parseInt(r.getAttribute("rel"),10)-1;c("add"),function(f){for(var v=0;v<h.length;v++){var y=parseInt(h[v].getAttribute("val"),10);y>=f.from&&y<=f.to&&h[v].classList.remove(a.legendInactiveClass)}}(d.config.plotOptions.heatmap.colorScale.ranges[p])}else o.type==="mouseout"&&c("remove")}},{key:"getActiveConfigSeriesIndex",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"asc",r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=this.w,d=0;if(a.config.series.length>1){for(var h=a.config.series.map(function(p,f){return p.data&&p.data.length>0&&a.globals.collapsedSeriesIndices.indexOf(f)===-1&&(!a.globals.comboCharts||r.length===0||r.length&&r.indexOf(a.config.series[f].type)>-1)?f:-1}),c=o==="asc"?0:h.length-1;o==="asc"?c<h.length:c>=0;o==="asc"?c++:c--)if(h[c]!==-1){d=h[c];break}}return d}},{key:"getBarSeriesIndices",value:function(){return this.w.globals.comboCharts?this.w.config.series.map(function(o,r){return o.type==="bar"||o.type==="column"?r:-1}).filter(function(o){return o!==-1}):this.w.config.series.map(function(o,r){return r})}},{key:"getPreviousPaths",value:function(){var o=this.w;function r(c,p,f){for(var v=c[p].childNodes,y={type:f,paths:[],realIndex:c[p].getAttribute("data:realIndex")},b=0;b<v.length;b++)if(v[b].hasAttribute("pathTo")){var w=v[b].getAttribute("pathTo");y.paths.push({d:w})}o.globals.previousPaths.push(y)}o.globals.previousPaths=[],["line","area","bar","rangebar","rangeArea","candlestick","radar"].forEach(function(c){for(var p,f=(p=c,o.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(p,"-series .apexcharts-series"))),v=0;v<f.length;v++)r(f,v,c)}),this.handlePrevBubbleScatterPaths("bubble"),this.handlePrevBubbleScatterPaths("scatter");var a=o.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(o.config.chart.type," .apexcharts-series"));if(a.length>0)for(var d=function(c){for(var p=o.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(o.config.chart.type," .apexcharts-series[data\\:realIndex='").concat(c,"'] rect")),f=[],v=function(b){var w=function(T){return p[b].getAttribute(T)},R={x:parseFloat(w("x")),y:parseFloat(w("y")),width:parseFloat(w("width")),height:parseFloat(w("height"))};f.push({rect:R,color:p[b].getAttribute("color")})},y=0;y<p.length;y++)v(y);o.globals.previousPaths.push(f)},h=0;h<a.length;h++)d(h);o.globals.axisCharts||(o.globals.previousPaths=o.globals.series)}},{key:"handlePrevBubbleScatterPaths",value:function(o){var r=this.w,a=r.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(o,"-series .apexcharts-series"));if(a.length>0)for(var d=0;d<a.length;d++){for(var h=r.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(o,"-series .apexcharts-series[data\\:realIndex='").concat(d,"'] circle")),c=[],p=0;p<h.length;p++)c.push({x:h[p].getAttribute("cx"),y:h[p].getAttribute("cy"),r:h[p].getAttribute("r")});r.globals.previousPaths.push(c)}}},{key:"clearPreviousPaths",value:function(){var o=this.w;o.globals.previousPaths=[],o.globals.allSeriesCollapsed=!1}},{key:"handleNoData",value:function(){var o=this.w,r=o.config.noData,a=new $(this.ctx),d=o.globals.svgWidth/2,h=o.globals.svgHeight/2,c="middle";if(o.globals.noData=!0,o.globals.animationEnded=!0,r.align==="left"?(d=10,c="start"):r.align==="right"&&(d=o.globals.svgWidth-10,c="end"),r.verticalAlign==="top"?h=50:r.verticalAlign==="bottom"&&(h=o.globals.svgHeight-50),d+=r.offsetX,h=h+parseInt(r.style.fontSize,10)+2+r.offsetY,r.text!==void 0&&r.text!==""){var p=a.drawText({x:d,y:h,text:r.text,textAnchor:c,fontSize:r.style.fontSize,fontFamily:r.style.fontFamily,foreColor:r.style.color,opacity:1,class:"apexcharts-text-nodata"});o.globals.dom.Paper.add(p)}}},{key:"setNullSeriesToZeroValues",value:function(o){for(var r=this.w,a=0;a<o.length;a++)if(o[a].length===0)for(var d=0;d<o[r.globals.maxValsInArrayIndex].length;d++)o[a].push(0);return o}},{key:"hasAllSeriesEqualX",value:function(){for(var o=!0,r=this.w,a=this.filteredSeriesX(),d=0;d<a.length-1;d++)if(a[d][0]!==a[d+1][0]){o=!1;break}return r.globals.allSeriesHasEqualX=o,o}},{key:"filteredSeriesX",value:function(){var o=this.w.globals.seriesX.map(function(r){return r.length>0?r:[]});return o}}]),O}(),ht=function(){function O(o){l(this,O),this.ctx=o,this.w=o.w,this.twoDSeries=[],this.threeDSeries=[],this.twoDSeriesX=[],this.seriesGoals=[],this.coreUtils=new Y(this.ctx)}return g(O,[{key:"isMultiFormat",value:function(){return this.isFormatXY()||this.isFormat2DArray()}},{key:"isFormatXY",value:function(){var o=this.w.config.series.slice(),r=new xt(this.ctx);if(this.activeSeriesIndex=r.getActiveConfigSeriesIndex(),o[this.activeSeriesIndex].data!==void 0&&o[this.activeSeriesIndex].data.length>0&&o[this.activeSeriesIndex].data[0]!==null&&o[this.activeSeriesIndex].data[0].x!==void 0&&o[this.activeSeriesIndex].data[0]!==null)return!0}},{key:"isFormat2DArray",value:function(){var o=this.w.config.series.slice(),r=new xt(this.ctx);if(this.activeSeriesIndex=r.getActiveConfigSeriesIndex(),o[this.activeSeriesIndex].data!==void 0&&o[this.activeSeriesIndex].data.length>0&&o[this.activeSeriesIndex].data[0]!==void 0&&o[this.activeSeriesIndex].data[0]!==null&&o[this.activeSeriesIndex].data[0].constructor===Array)return!0}},{key:"handleFormat2DArray",value:function(o,r){for(var a=this.w.config,d=this.w.globals,h=a.chart.type==="boxPlot"||a.series[r].type==="boxPlot",c=0;c<o[r].data.length;c++)if(o[r].data[c][1]!==void 0&&(Array.isArray(o[r].data[c][1])&&o[r].data[c][1].length===4&&!h?this.twoDSeries.push(_.parseNumber(o[r].data[c][1][3])):o[r].data[c].length>=5?this.twoDSeries.push(_.parseNumber(o[r].data[c][4])):this.twoDSeries.push(_.parseNumber(o[r].data[c][1])),d.dataFormatXNumeric=!0),a.xaxis.type==="datetime"){var p=new Date(o[r].data[c][0]);p=new Date(p).getTime(),this.twoDSeriesX.push(p)}else this.twoDSeriesX.push(o[r].data[c][0]);for(var f=0;f<o[r].data.length;f++)o[r].data[f][2]!==void 0&&(this.threeDSeries.push(o[r].data[f][2]),d.isDataXYZ=!0)}},{key:"handleFormatXY",value:function(o,r){var a=this.w.config,d=this.w.globals,h=new Ge(this.ctx),c=r;d.collapsedSeriesIndices.indexOf(r)>-1&&(c=this.activeSeriesIndex);for(var p=0;p<o[r].data.length;p++)o[r].data[p].y!==void 0&&(Array.isArray(o[r].data[p].y)?this.twoDSeries.push(_.parseNumber(o[r].data[p].y[o[r].data[p].y.length-1])):this.twoDSeries.push(_.parseNumber(o[r].data[p].y))),o[r].data[p].goals!==void 0&&Array.isArray(o[r].data[p].goals)?(this.seriesGoals[r]===void 0&&(this.seriesGoals[r]=[]),this.seriesGoals[r].push(o[r].data[p].goals)):(this.seriesGoals[r]===void 0&&(this.seriesGoals[r]=[]),this.seriesGoals[r].push(null));for(var f=0;f<o[c].data.length;f++){var v=typeof o[c].data[f].x=="string",y=Array.isArray(o[c].data[f].x),b=!y&&!!h.isValidDate(o[c].data[f].x);if(v||b)if(v||a.xaxis.convertedCatToNumeric){var w=d.isBarHorizontal&&d.isRangeData;a.xaxis.type!=="datetime"||w?(this.fallbackToCategory=!0,this.twoDSeriesX.push(o[c].data[f].x),isNaN(o[c].data[f].x)||this.w.config.xaxis.type==="category"||typeof o[c].data[f].x=="string"||(d.isXNumeric=!0)):this.twoDSeriesX.push(h.parseDate(o[c].data[f].x))}else a.xaxis.type==="datetime"?this.twoDSeriesX.push(h.parseDate(o[c].data[f].x.toString())):(d.dataFormatXNumeric=!0,d.isXNumeric=!0,this.twoDSeriesX.push(parseFloat(o[c].data[f].x)));else y?(this.fallbackToCategory=!0,this.twoDSeriesX.push(o[c].data[f].x)):(d.isXNumeric=!0,d.dataFormatXNumeric=!0,this.twoDSeriesX.push(o[c].data[f].x))}if(o[r].data[0]&&o[r].data[0].z!==void 0){for(var R=0;R<o[r].data.length;R++)this.threeDSeries.push(o[r].data[R].z);d.isDataXYZ=!0}}},{key:"handleRangeData",value:function(o,r){var a=this.w.globals,d={};return this.isFormat2DArray()?d=this.handleRangeDataFormat("array",o,r):this.isFormatXY()&&(d=this.handleRangeDataFormat("xy",o,r)),a.seriesRangeStart.push(d.start),a.seriesRangeEnd.push(d.end),a.seriesRange.push(d.rangeUniques),a.seriesRange.forEach(function(h,c){h&&h.forEach(function(p,f){p.y.forEach(function(v,y){for(var b=0;b<p.y.length;b++)if(y!==b){var w=v.y1,R=v.y2,T=p.y[b].y1;w<=p.y[b].y2&&T<=R&&(p.overlaps.indexOf(v.rangeName)<0&&p.overlaps.push(v.rangeName),p.overlaps.indexOf(p.y[b].rangeName)<0&&p.overlaps.push(p.y[b].rangeName))}})})}),d}},{key:"handleCandleStickBoxData",value:function(o,r){var a=this.w.globals,d={};return this.isFormat2DArray()?d=this.handleCandleStickBoxDataFormat("array",o,r):this.isFormatXY()&&(d=this.handleCandleStickBoxDataFormat("xy",o,r)),a.seriesCandleO[r]=d.o,a.seriesCandleH[r]=d.h,a.seriesCandleM[r]=d.m,a.seriesCandleL[r]=d.l,a.seriesCandleC[r]=d.c,d}},{key:"handleRangeDataFormat",value:function(o,r,a){var d=[],h=[],c=r[a].data.filter(function(y,b,w){return b===w.findIndex(function(R){return R.x===y.x})}).map(function(y,b){return{x:y.x,overlaps:[],y:[]}});if(o==="array")for(var p=0;p<r[a].data.length;p++)Array.isArray(r[a].data[p])?(d.push(r[a].data[p][1][0]),h.push(r[a].data[p][1][1])):(d.push(r[a].data[p]),h.push(r[a].data[p]));else if(o==="xy")for(var f=function(y){var b=Array.isArray(r[a].data[y].y),w=_.randomId(),R=r[a].data[y].x,T={y1:b?r[a].data[y].y[0]:r[a].data[y].y,y2:b?r[a].data[y].y[1]:r[a].data[y].y,rangeName:w};r[a].data[y].rangeName=w;var F=c.findIndex(function(I){return I.x===R});c[F].y.push(T),d.push(T.y1),h.push(T.y2)},v=0;v<r[a].data.length;v++)f(v);return{start:d,end:h,rangeUniques:c}}},{key:"handleCandleStickBoxDataFormat",value:function(o,r,a){var d=this.w,h=d.config.chart.type==="boxPlot"||d.config.series[a].type==="boxPlot",c=[],p=[],f=[],v=[],y=[];if(o==="array")if(h&&r[a].data[0].length===6||!h&&r[a].data[0].length===5)for(var b=0;b<r[a].data.length;b++)c.push(r[a].data[b][1]),p.push(r[a].data[b][2]),h?(f.push(r[a].data[b][3]),v.push(r[a].data[b][4]),y.push(r[a].data[b][5])):(v.push(r[a].data[b][3]),y.push(r[a].data[b][4]));else for(var w=0;w<r[a].data.length;w++)Array.isArray(r[a].data[w][1])&&(c.push(r[a].data[w][1][0]),p.push(r[a].data[w][1][1]),h?(f.push(r[a].data[w][1][2]),v.push(r[a].data[w][1][3]),y.push(r[a].data[w][1][4])):(v.push(r[a].data[w][1][2]),y.push(r[a].data[w][1][3])));else if(o==="xy")for(var R=0;R<r[a].data.length;R++)Array.isArray(r[a].data[R].y)&&(c.push(r[a].data[R].y[0]),p.push(r[a].data[R].y[1]),h?(f.push(r[a].data[R].y[2]),v.push(r[a].data[R].y[3]),y.push(r[a].data[R].y[4])):(v.push(r[a].data[R].y[2]),y.push(r[a].data[R].y[3])));return{o:c,h:p,m:f,l:v,c:y}}},{key:"parseDataAxisCharts",value:function(o){var r,a=this,d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.ctx,h=this.w.config,c=this.w.globals,p=new Ge(d),f=h.labels.length>0?h.labels.slice():h.xaxis.categories.slice();if(c.isRangeBar=h.chart.type==="rangeBar"&&c.isBarHorizontal,c.hasXaxisGroups=h.xaxis.type==="category"&&h.xaxis.group.groups.length>0,c.hasXaxisGroups&&(c.groups=h.xaxis.group.groups),c.hasSeriesGroups=(r=o[0])===null||r===void 0?void 0:r.group,c.hasSeriesGroups){var v=[],y=U(new Set(o.map(function(T){return T.group})));o.forEach(function(T,F){var I=y.indexOf(T.group);v[I]||(v[I]=[]),v[I].push(T.name)}),c.seriesGroups=v}for(var b=function(){for(var T=0;T<f.length;T++)if(typeof f[T]=="string"){if(!p.isValidDate(f[T]))throw new Error("You have provided invalid Date format. Please provide a valid JavaScript Date");a.twoDSeriesX.push(p.parseDate(f[T]))}else a.twoDSeriesX.push(f[T])},w=0;w<o.length;w++){if(this.twoDSeries=[],this.twoDSeriesX=[],this.threeDSeries=[],o[w].data===void 0)return void console.error("It is a possibility that you may have not included 'data' property in series.");if(h.chart.type!=="rangeBar"&&h.chart.type!=="rangeArea"&&o[w].type!=="rangeBar"&&o[w].type!=="rangeArea"||(c.isRangeData=!0,h.chart.type!=="rangeBar"&&h.chart.type!=="rangeArea"||this.handleRangeData(o,w)),this.isMultiFormat())this.isFormat2DArray()?this.handleFormat2DArray(o,w):this.isFormatXY()&&this.handleFormatXY(o,w),h.chart.type!=="candlestick"&&o[w].type!=="candlestick"&&h.chart.type!=="boxPlot"&&o[w].type!=="boxPlot"||this.handleCandleStickBoxData(o,w),c.series.push(this.twoDSeries),c.labels.push(this.twoDSeriesX),c.seriesX.push(this.twoDSeriesX),c.seriesGoals=this.seriesGoals,w!==this.activeSeriesIndex||this.fallbackToCategory||(c.isXNumeric=!0);else{h.xaxis.type==="datetime"?(c.isXNumeric=!0,b(),c.seriesX.push(this.twoDSeriesX)):h.xaxis.type==="numeric"&&(c.isXNumeric=!0,f.length>0&&(this.twoDSeriesX=f,c.seriesX.push(this.twoDSeriesX))),c.labels.push(this.twoDSeriesX);var R=o[w].data.map(function(T){return _.parseNumber(T)});c.series.push(R)}c.seriesZ.push(this.threeDSeries),o[w].name!==void 0?c.seriesNames.push(o[w].name):c.seriesNames.push("series-"+parseInt(w+1,10)),o[w].color!==void 0?c.seriesColors.push(o[w].color):c.seriesColors.push(void 0)}return this.w}},{key:"parseDataNonAxisCharts",value:function(o){var r=this.w.globals,a=this.w.config;r.series=o.slice(),r.seriesNames=a.labels.slice();for(var d=0;d<r.series.length;d++)r.seriesNames[d]===void 0&&r.seriesNames.push("series-"+(d+1));return this.w}},{key:"handleExternalLabelsData",value:function(o){var r=this.w.config,a=this.w.globals;r.xaxis.categories.length>0?a.labels=r.xaxis.categories:r.labels.length>0?a.labels=r.labels.slice():this.fallbackToCategory?(a.labels=a.labels[0],a.seriesRange.length&&(a.seriesRange.map(function(d){d.forEach(function(h){a.labels.indexOf(h.x)<0&&h.x&&a.labels.push(h.x)})}),a.labels=Array.from(new Set(a.labels.map(JSON.stringify)),JSON.parse)),r.xaxis.convertedCatToNumeric&&(new vt(r).convertCatToNumericXaxis(r,this.ctx,a.seriesX[0]),this._generateExternalLabels(o))):this._generateExternalLabels(o)}},{key:"_generateExternalLabels",value:function(o){var r=this.w.globals,a=this.w.config,d=[];if(r.axisCharts){if(r.series.length>0)if(this.isFormatXY())for(var h=a.series.map(function(b,w){return b.data.filter(function(R,T,F){return F.findIndex(function(I){return I.x===R.x})===T})}),c=h.reduce(function(b,w,R,T){return T[b].length>w.length?b:R},0),p=0;p<h[c].length;p++)d.push(p+1);else for(var f=0;f<r.series[r.maxValsInArrayIndex].length;f++)d.push(f+1);r.seriesX=[];for(var v=0;v<o.length;v++)r.seriesX.push(d);this.w.globals.isBarHorizontal||(r.isXNumeric=!0)}if(d.length===0){d=r.axisCharts?[]:r.series.map(function(b,w){return w+1});for(var y=0;y<o.length;y++)r.seriesX.push(d)}r.labels=d,a.xaxis.convertedCatToNumeric&&(r.categoryLabels=d.map(function(b){return a.xaxis.labels.formatter(b)})),r.noLabelsProvided=!0}},{key:"parseData",value:function(o){var r=this.w,a=r.config,d=r.globals;if(this.excludeCollapsedSeriesInYAxis(),this.fallbackToCategory=!1,this.ctx.core.resetGlobals(),this.ctx.core.isMultipleY(),d.axisCharts?(this.parseDataAxisCharts(o),this.coreUtils.getLargestSeries()):this.parseDataNonAxisCharts(o),a.chart.stacked){var h=new xt(this.ctx);d.series=h.setNullSeriesToZeroValues(d.series)}this.coreUtils.getSeriesTotals(),d.axisCharts&&(d.stackedSeriesTotals=this.coreUtils.getStackedSeriesTotals(),d.stackedSeriesTotalsByGroups=this.coreUtils.getStackedSeriesTotalsByGroups()),this.coreUtils.getPercentSeries(),d.dataFormatXNumeric||d.isXNumeric&&(a.xaxis.type!=="numeric"||a.labels.length!==0||a.xaxis.categories.length!==0)||this.handleExternalLabelsData(o);for(var c=this.coreUtils.getCategoryLabels(d.labels),p=0;p<c.length;p++)if(Array.isArray(c[p])){d.isMultiLineX=!0;break}}},{key:"excludeCollapsedSeriesInYAxis",value:function(){var o=this,r=this.w;r.globals.ignoreYAxisIndexes=r.globals.collapsedSeries.map(function(a,d){if(o.w.globals.isMultipleYAxis&&!r.config.chart.stacked)return a.index})}}]),O}(),Mt=function(){function O(o){l(this,O),this.ctx=o,this.w=o.w}return g(O,[{key:"getLabel",value:function(o,r,a,d){var h=arguments.length>4&&arguments[4]!==void 0?arguments[4]:[],c=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"12px",p=!(arguments.length>6&&arguments[6]!==void 0)||arguments[6],f=this.w,v=o[d]===void 0?"":o[d],y=v,b=f.globals.xLabelFormatter,w=f.config.xaxis.labels.formatter,R=!1,T=new et(this.ctx),F=v;p&&(y=T.xLabelFormat(b,v,F,{i:d,dateFormatter:new Ge(this.ctx).formatDate,w:f}),w!==void 0&&(y=w(v,o[d],{i:d,dateFormatter:new Ge(this.ctx).formatDate,w:f})));var I,G;r.length>0?(I=r[d].unit,G=null,r.forEach(function(P){P.unit==="month"?G="year":P.unit==="day"?G="month":P.unit==="hour"?G="day":P.unit==="minute"&&(G="hour")}),R=G===I,a=r[d].position,y=r[d].value):f.config.xaxis.type==="datetime"&&w===void 0&&(y=""),y===void 0&&(y=""),y=Array.isArray(y)?y:y.toString();var H=new $(this.ctx),m={};m=f.globals.rotateXLabels&&p?H.getTextRects(y,parseInt(c,10),null,"rotate(".concat(f.config.xaxis.labels.rotate," 0 0)"),!1):H.getTextRects(y,parseInt(c,10));var x=!f.config.xaxis.labels.showDuplicates&&this.ctx.timeScale;return!Array.isArray(y)&&(y.indexOf("NaN")===0||y.toLowerCase().indexOf("invalid")===0||y.toLowerCase().indexOf("infinity")>=0||h.indexOf(y)>=0&&x)&&(y=""),{x:a,text:y,textRect:m,isBold:R}}},{key:"checkLabelBasedOnTickamount",value:function(o,r,a){var d=this.w,h=d.config.xaxis.tickAmount;return h==="dataPoints"&&(h=Math.round(d.globals.gridWidth/120)),h>a||o%Math.round(a/(h+1))==0||(r.text=""),r}},{key:"checkForOverflowingLabels",value:function(o,r,a,d,h){var c=this.w;if(o===0&&c.globals.skipFirstTimelinelabel&&(r.text=""),o===a-1&&c.globals.skipLastTimelinelabel&&(r.text=""),c.config.xaxis.labels.hideOverlappingLabels&&d.length>0){var p=h[h.length-1];r.x<p.textRect.width/(c.globals.rotateXLabels?Math.abs(c.config.xaxis.labels.rotate)/12:1.01)+p.x&&(r.text="")}return r}},{key:"checkForReversedLabels",value:function(o,r){var a=this.w;return a.config.yaxis[o]&&a.config.yaxis[o].reversed&&r.reverse(),r}},{key:"isYAxisHidden",value:function(o){var r=this.w,a=new Y(this.ctx);return!r.config.yaxis[o].show||!r.config.yaxis[o].showForNullSeries&&a.isSeriesNull(o)&&r.globals.collapsedSeriesIndices.indexOf(o)===-1}},{key:"getYAxisForeColor",value:function(o,r){var a=this.w;return Array.isArray(o)&&a.globals.yAxisScale[r]&&this.ctx.theme.pushExtraColors(o,a.globals.yAxisScale[r].result.length,!1),o}},{key:"drawYAxisTicks",value:function(o,r,a,d,h,c,p){var f=this.w,v=new $(this.ctx),y=f.globals.translateY;if(d.show&&r>0){f.config.yaxis[h].opposite===!0&&(o+=d.width);for(var b=r;b>=0;b--){var w=y+r/10+f.config.yaxis[h].labels.offsetY-1;f.globals.isBarHorizontal&&(w=c*b),f.config.chart.type==="heatmap"&&(w+=c/2);var R=v.drawLine(o+a.offsetX-d.width+d.offsetX,w+d.offsetY,o+a.offsetX+d.offsetX,w+d.offsetY,d.color);p.add(R),y+=c}}}}]),O}(),si=function(){function O(o){l(this,O),this.ctx=o,this.w=o.w}return g(O,[{key:"scaleSvgNode",value:function(o,r){var a=parseFloat(o.getAttributeNS(null,"width")),d=parseFloat(o.getAttributeNS(null,"height"));o.setAttributeNS(null,"width",a*r),o.setAttributeNS(null,"height",d*r),o.setAttributeNS(null,"viewBox","0 0 "+a+" "+d)}},{key:"fixSvgStringForIe11",value:function(o){if(!_.isIE11())return o.replace(/&nbsp;/g,"&#160;");var r=0,a=o.replace(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g,function(d){return++r===2?'xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.dev"':d});return a=(a=a.replace(/xmlns:NS\d+=""/g,"")).replace(/NS\d+:(\w+:\w+=")/g,"$1")}},{key:"getSvgString",value:function(o){o==null&&(o=1);var r=this.w.globals.dom.Paper.svg();if(o!==1){var a=this.w.globals.dom.Paper.node.cloneNode(!0);this.scaleSvgNode(a,o),r=new XMLSerializer().serializeToString(a)}return this.fixSvgStringForIe11(r)}},{key:"cleanup",value:function(){var o=this.w,r=o.globals.dom.baseEl.getElementsByClassName("apexcharts-xcrosshairs"),a=o.globals.dom.baseEl.getElementsByClassName("apexcharts-ycrosshairs"),d=o.globals.dom.baseEl.querySelectorAll(".apexcharts-zoom-rect, .apexcharts-selection-rect");Array.prototype.forEach.call(d,function(h){h.setAttribute("width",0)}),r&&r[0]&&(r[0].setAttribute("x",-500),r[0].setAttribute("x1",-500),r[0].setAttribute("x2",-500)),a&&a[0]&&(a[0].setAttribute("y",-100),a[0].setAttribute("y1",-100),a[0].setAttribute("y2",-100))}},{key:"svgUrl",value:function(){this.cleanup();var o=this.getSvgString(),r=new Blob([o],{type:"image/svg+xml;charset=utf-8"});return URL.createObjectURL(r)}},{key:"dataURI",value:function(o){var r=this;return new Promise(function(a){var d=r.w,h=o?o.scale||o.width/d.globals.svgWidth:1;r.cleanup();var c=document.createElement("canvas");c.width=d.globals.svgWidth*h,c.height=parseInt(d.globals.dom.elWrap.style.height,10)*h;var p=d.config.chart.background==="transparent"?"#fff":d.config.chart.background,f=c.getContext("2d");f.fillStyle=p,f.fillRect(0,0,c.width*h,c.height*h);var v=r.getSvgString(h);if(window.canvg&&_.isIE11()){var y=window.canvg.Canvg.fromString(f,v,{ignoreClear:!0,ignoreDimensions:!0});y.start();var b=c.msToBlob();y.stop(),a({blob:b})}else{var w="data:image/svg+xml,"+encodeURIComponent(v),R=new Image;R.crossOrigin="anonymous",R.onload=function(){if(f.drawImage(R,0,0),c.msToBlob){var T=c.msToBlob();a({blob:T})}else{var F=c.toDataURL("image/png");a({imgURI:F})}},R.src=w}})}},{key:"exportToSVG",value:function(){this.triggerDownload(this.svgUrl(),this.w.config.chart.toolbar.export.svg.filename,".svg")}},{key:"exportToPng",value:function(){var o=this;this.dataURI().then(function(r){var a=r.imgURI,d=r.blob;d?navigator.msSaveOrOpenBlob(d,o.w.globals.chartID+".png"):o.triggerDownload(a,o.w.config.chart.toolbar.export.png.filename,".png")})}},{key:"exportToCSV",value:function(o){var r=this,a=o.series,d=o.fileName,h=o.columnDelimiter,c=h===void 0?",":h,p=o.lineDelimiter,f=p===void 0?`
`:p,v=this.w;a||(a=v.config.series);var y,b,w=[],R=[],T="",F=v.globals.series.map(function(k,V){return v.globals.collapsedSeriesIndices.indexOf(V)===-1?k:[]}),I=function(k){return v.config.xaxis.type==="datetime"&&String(k).length>=10},G=Math.max.apply(Math,U(a.map(function(k){return k.data?k.data.length:0}))),H=new ht(this.ctx),m=new Mt(this.ctx),x=function(k){var V="";if(v.globals.axisCharts){if(v.config.xaxis.type==="category"||v.config.xaxis.convertedCatToNumeric)if(v.globals.isBarHorizontal){var B=v.globals.yLabelFormatters[0],j=new xt(r.ctx).getActiveConfigSeriesIndex();V=B(v.globals.labels[k],{seriesIndex:j,dataPointIndex:k,w:v})}else V=m.getLabel(v.globals.labels,v.globals.timescaleLabels,0,k).text;v.config.xaxis.type==="datetime"&&(v.config.xaxis.categories.length?V=v.config.xaxis.categories[k]:v.config.labels.length&&(V=v.config.labels[k]))}else V=v.config.labels[k];return Array.isArray(V)&&(V=V.join(" ")),_.isNumber(V)?V:V.split(c).join("")},P=function(k,V){if(w.length&&V===0&&R.push(w.join(c)),k.data){k.data=k.data.length&&k.data||U(Array(G)).map(function(){return""});for(var B=0;B<k.data.length;B++){w=[];var j=x(B);if(j||(H.isFormatXY()?j=a[V].data[B].x:H.isFormat2DArray()&&(j=a[V].data[B]?a[V].data[B][0]:"")),V===0){w.push(I(j)?v.config.chart.toolbar.export.csv.dateFormatter(j):_.isNumber(j)?j:j.split(c).join(""));for(var K=0;K<v.globals.series.length;K++){var ie;H.isFormatXY()?w.push((ie=a[K].data[B])===null||ie===void 0?void 0:ie.y):w.push(F[K][B])}}(v.config.chart.type==="candlestick"||k.type&&k.type==="candlestick")&&(w.pop(),w.push(v.globals.seriesCandleO[V][B]),w.push(v.globals.seriesCandleH[V][B]),w.push(v.globals.seriesCandleL[V][B]),w.push(v.globals.seriesCandleC[V][B])),(v.config.chart.type==="boxPlot"||k.type&&k.type==="boxPlot")&&(w.pop(),w.push(v.globals.seriesCandleO[V][B]),w.push(v.globals.seriesCandleH[V][B]),w.push(v.globals.seriesCandleM[V][B]),w.push(v.globals.seriesCandleL[V][B]),w.push(v.globals.seriesCandleC[V][B])),v.config.chart.type==="rangeBar"&&(w.pop(),w.push(v.globals.seriesRangeStart[V][B]),w.push(v.globals.seriesRangeEnd[V][B])),w.length&&R.push(w.join(c))}}};w.push(v.config.chart.toolbar.export.csv.headerCategory),v.config.chart.type==="boxPlot"?(w.push("minimum"),w.push("q1"),w.push("median"),w.push("q3"),w.push("maximum")):v.config.chart.type==="candlestick"?(w.push("open"),w.push("high"),w.push("low"),w.push("close")):v.config.chart.type==="rangeBar"?(w.push("minimum"),w.push("maximum")):a.map(function(k,V){var B=(k.name?k.name:"series-".concat(V))+"";v.globals.axisCharts&&w.push(B.split(c).join("")?B.split(c).join(""):"series-".concat(V))}),v.globals.axisCharts||(w.push(v.config.chart.toolbar.export.csv.headerValue),R.push(w.join(c))),v.globals.allSeriesHasEqualX||!v.globals.axisCharts||v.config.xaxis.categories.length||v.config.labels.length?a.map(function(k,V){v.globals.axisCharts?P(k,V):((w=[]).push(v.globals.labels[V].split(c).join("")),w.push(F[V]),R.push(w.join(c)))}):(y=new Set,b={},a.forEach(function(k,V){k?.data.forEach(function(B){var j,K;if(H.isFormatXY())j=B.x,K=B.y;else{if(!H.isFormat2DArray())return;j=B[0],K=B[1]}b[j]||(b[j]=Array(a.length).fill("")),b[j][V]=K,y.add(j)})}),w.length&&R.push(w.join(c)),Array.from(y).sort().forEach(function(k){R.push([I(k)&&v.config.xaxis.type==="datetime"?v.config.chart.toolbar.export.csv.dateFormatter(k):_.isNumber(k)?k:k.split(c).join(""),b[k].join(c)])})),T+=R.join(f),this.triggerDownload("data:text/csv; charset=utf-8,"+encodeURIComponent("\uFEFF"+T),d||v.config.chart.toolbar.export.csv.filename,".csv")}},{key:"triggerDownload",value:function(o,r,a){var d=document.createElement("a");d.href=o,d.download=(r||this.w.globals.chartID)+a,document.body.appendChild(d),d.click(),document.body.removeChild(d)}}]),O}(),Pt=function(){function O(o,r){l(this,O),this.ctx=o,this.elgrid=r,this.w=o.w;var a=this.w;this.axesUtils=new Mt(o),this.xaxisLabels=a.globals.labels.slice(),a.globals.timescaleLabels.length>0&&!a.globals.isBarHorizontal&&(this.xaxisLabels=a.globals.timescaleLabels.slice()),a.config.xaxis.overwriteCategories&&(this.xaxisLabels=a.config.xaxis.overwriteCategories),this.drawnLabels=[],this.drawnLabelsRects=[],a.config.xaxis.position==="top"?this.offY=0:this.offY=a.globals.gridHeight+1,this.offY=this.offY+a.config.xaxis.axisBorder.offsetY,this.isCategoryBarHorizontal=a.config.chart.type==="bar"&&a.config.plotOptions.bar.horizontal,this.xaxisFontSize=a.config.xaxis.labels.style.fontSize,this.xaxisFontFamily=a.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=a.config.xaxis.labels.style.colors,this.xaxisBorderWidth=a.config.xaxis.axisBorder.width,this.isCategoryBarHorizontal&&(this.xaxisBorderWidth=a.config.yaxis[0].axisBorder.width.toString()),this.xaxisBorderWidth.indexOf("%")>-1?this.xaxisBorderWidth=a.globals.gridWidth*parseInt(this.xaxisBorderWidth,10)/100:this.xaxisBorderWidth=parseInt(this.xaxisBorderWidth,10),this.xaxisBorderHeight=a.config.xaxis.axisBorder.height,this.yaxis=a.config.yaxis[0]}return g(O,[{key:"drawXaxis",value:function(){var o=this.w,r=new $(this.ctx),a=r.group({class:"apexcharts-xaxis",transform:"translate(".concat(o.config.xaxis.offsetX,", ").concat(o.config.xaxis.offsetY,")")}),d=r.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(o.globals.translateXAxisX,", ").concat(o.globals.translateXAxisY,")")});a.add(d);for(var h=[],c=0;c<this.xaxisLabels.length;c++)h.push(this.xaxisLabels[c]);if(this.drawXAxisLabelAndGroup(!0,r,d,h,o.globals.isXNumeric,function(T,F){return F}),o.globals.hasXaxisGroups){var p=o.globals.groups;h=[];for(var f=0;f<p.length;f++)h.push(p[f].title);var v={};o.config.xaxis.group.style&&(v.xaxisFontSize=o.config.xaxis.group.style.fontSize,v.xaxisFontFamily=o.config.xaxis.group.style.fontFamily,v.xaxisForeColors=o.config.xaxis.group.style.colors,v.fontWeight=o.config.xaxis.group.style.fontWeight,v.cssClass=o.config.xaxis.group.style.cssClass),this.drawXAxisLabelAndGroup(!1,r,d,h,!1,function(T,F){return p[T].cols*F},v)}if(o.config.xaxis.title.text!==void 0){var y=r.group({class:"apexcharts-xaxis-title"}),b=r.drawText({x:o.globals.gridWidth/2+o.config.xaxis.title.offsetX,y:this.offY+parseFloat(this.xaxisFontSize)+(o.config.xaxis.position==="bottom"?o.globals.xAxisLabelsHeight:-o.globals.xAxisLabelsHeight-10)+o.config.xaxis.title.offsetY,text:o.config.xaxis.title.text,textAnchor:"middle",fontSize:o.config.xaxis.title.style.fontSize,fontFamily:o.config.xaxis.title.style.fontFamily,fontWeight:o.config.xaxis.title.style.fontWeight,foreColor:o.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+o.config.xaxis.title.style.cssClass});y.add(b),a.add(y)}if(o.config.xaxis.axisBorder.show){var w=o.globals.barPadForNumericAxis,R=r.drawLine(o.globals.padHorizontal+o.config.xaxis.axisBorder.offsetX-w,this.offY,this.xaxisBorderWidth+w,this.offY,o.config.xaxis.axisBorder.color,0,this.xaxisBorderHeight);this.elgrid&&this.elgrid.elGridBorders&&o.config.grid.show?this.elgrid.elGridBorders.add(R):a.add(R)}return a}},{key:"drawXAxisLabelAndGroup",value:function(o,r,a,d,h,c){var p,f=this,v=arguments.length>6&&arguments[6]!==void 0?arguments[6]:{},y=[],b=[],w=this.w,R=v.xaxisFontSize||this.xaxisFontSize,T=v.xaxisFontFamily||this.xaxisFontFamily,F=v.xaxisForeColors||this.xaxisForeColors,I=v.fontWeight||w.config.xaxis.labels.style.fontWeight,G=v.cssClass||w.config.xaxis.labels.style.cssClass,H=w.globals.padHorizontal,m=d.length,x=w.config.xaxis.type==="category"?w.globals.dataPoints:m;if(x===0&&m>x&&(x=m),h){var P=x>1?x-1:x;p=w.globals.gridWidth/Math.min(P,m-1),H=H+c(0,p)/2+w.config.xaxis.labels.offsetX}else p=w.globals.gridWidth/x,H=H+c(0,p)+w.config.xaxis.labels.offsetX;for(var k=function(B){var j=H-c(B,p)/2+w.config.xaxis.labels.offsetX;B===0&&m===1&&p/2===H&&x===1&&(j=w.globals.gridWidth/2);var K=f.axesUtils.getLabel(d,w.globals.timescaleLabels,j,B,y,R,o),ie=28;if(w.globals.rotateXLabels&&o&&(ie=22),w.config.xaxis.title.text&&w.config.xaxis.position==="top"&&(ie+=parseFloat(w.config.xaxis.title.style.fontSize)+2),o||(ie=ie+parseFloat(R)+(w.globals.xAxisLabelsHeight-w.globals.xAxisGroupLabelsHeight)+(w.globals.rotateXLabels?10:0)),K=w.config.xaxis.tickAmount!==void 0&&w.config.xaxis.tickAmount!=="dataPoints"&&w.config.xaxis.type!=="datetime"?f.axesUtils.checkLabelBasedOnTickamount(B,K,m):f.axesUtils.checkForOverflowingLabels(B,K,m,y,b),w.config.xaxis.labels.show){var he=r.drawText({x:K.x,y:f.offY+w.config.xaxis.labels.offsetY+ie-(w.config.xaxis.position==="top"?w.globals.xAxisHeight+w.config.xaxis.axisTicks.height-2:0),text:K.text,textAnchor:"middle",fontWeight:K.isBold?600:I,fontSize:R,fontFamily:T,foreColor:Array.isArray(F)?o&&w.config.xaxis.convertedCatToNumeric?F[w.globals.minX+B-1]:F[B]:F,isPlainText:!1,cssClass:(o?"apexcharts-xaxis-label ":"apexcharts-xaxis-group-label ")+G});if(a.add(he),he.on("click",function(Le){if(typeof w.config.chart.events.xAxisLabelClick=="function"){var Be=Object.assign({},w,{labelIndex:B});w.config.chart.events.xAxisLabelClick(Le,f.ctx,Be)}}),o){var ae=document.createElementNS(w.globals.SVGNS,"title");ae.textContent=Array.isArray(K.text)?K.text.join(" "):K.text,he.node.appendChild(ae),K.text!==""&&(y.push(K.text),b.push(K))}}B<m-1&&(H+=c(B+1,p))},V=0;V<=m-1;V++)k(V)}},{key:"drawXaxisInversed",value:function(o){var r,a,d=this,h=this.w,c=new $(this.ctx),p=h.config.yaxis[0].opposite?h.globals.translateYAxisX[o]:0,f=c.group({class:"apexcharts-yaxis apexcharts-xaxis-inversed",rel:o}),v=c.group({class:"apexcharts-yaxis-texts-g apexcharts-xaxis-inversed-texts-g",transform:"translate("+p+", 0)"});f.add(v);var y=[];if(h.config.yaxis[o].show)for(var b=0;b<this.xaxisLabels.length;b++)y.push(this.xaxisLabels[b]);r=h.globals.gridHeight/y.length,a=-r/2.2;var w=h.globals.yLabelFormatters[0],R=h.config.yaxis[0].labels;if(R.show)for(var T=function(P){var k=y[P]===void 0?"":y[P];k=w(k,{seriesIndex:o,dataPointIndex:P,w:h});var V=d.axesUtils.getYAxisForeColor(R.style.colors,o),B=0;Array.isArray(k)&&(B=k.length/2*parseInt(R.style.fontSize,10));var j=R.offsetX-15,K="end";d.yaxis.opposite&&(K="start"),h.config.yaxis[0].labels.align==="left"?(j=R.offsetX,K="start"):h.config.yaxis[0].labels.align==="center"?(j=R.offsetX,K="middle"):h.config.yaxis[0].labels.align==="right"&&(K="end");var ie=c.drawText({x:j,y:a+r+R.offsetY-B,text:k,textAnchor:K,foreColor:Array.isArray(V)?V[P]:V,fontSize:R.style.fontSize,fontFamily:R.style.fontFamily,fontWeight:R.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+R.style.cssClass,maxWidth:R.maxWidth});v.add(ie),ie.on("click",function(Le){if(typeof h.config.chart.events.xAxisLabelClick=="function"){var Be=Object.assign({},h,{labelIndex:P});h.config.chart.events.xAxisLabelClick(Le,d.ctx,Be)}});var he=document.createElementNS(h.globals.SVGNS,"title");if(he.textContent=Array.isArray(k)?k.join(" "):k,ie.node.appendChild(he),h.config.yaxis[o].labels.rotate!==0){var ae=c.rotateAroundCenter(ie.node);ie.node.setAttribute("transform","rotate(".concat(h.config.yaxis[o].labels.rotate," 0 ").concat(ae.y,")"))}a+=r},F=0;F<=y.length-1;F++)T(F);if(h.config.yaxis[0].title.text!==void 0){var I=c.group({class:"apexcharts-yaxis-title apexcharts-xaxis-title-inversed",transform:"translate("+p+", 0)"}),G=c.drawText({x:h.config.yaxis[0].title.offsetX,y:h.globals.gridHeight/2+h.config.yaxis[0].title.offsetY,text:h.config.yaxis[0].title.text,textAnchor:"middle",foreColor:h.config.yaxis[0].title.style.color,fontSize:h.config.yaxis[0].title.style.fontSize,fontWeight:h.config.yaxis[0].title.style.fontWeight,fontFamily:h.config.yaxis[0].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+h.config.yaxis[0].title.style.cssClass});I.add(G),f.add(I)}var H=0;this.isCategoryBarHorizontal&&h.config.yaxis[0].opposite&&(H=h.globals.gridWidth);var m=h.config.xaxis.axisBorder;if(m.show){var x=c.drawLine(h.globals.padHorizontal+m.offsetX+H,1+m.offsetY,h.globals.padHorizontal+m.offsetX+H,h.globals.gridHeight+m.offsetY,m.color,0);this.elgrid&&this.elgrid.elGridBorders&&h.config.grid.show?this.elgrid.elGridBorders.add(x):f.add(x)}return h.config.yaxis[0].axisTicks.show&&this.axesUtils.drawYAxisTicks(H,y.length,h.config.yaxis[0].axisBorder,h.config.yaxis[0].axisTicks,0,r,f),f}},{key:"drawXaxisTicks",value:function(o,r,a){var d=this.w,h=o;if(!(o<0||o-2>d.globals.gridWidth)){var c=this.offY+d.config.xaxis.axisTicks.offsetY;if(r=r+c+d.config.xaxis.axisTicks.height,d.config.xaxis.position==="top"&&(r=c-d.config.xaxis.axisTicks.height),d.config.xaxis.axisTicks.show){var p=new $(this.ctx).drawLine(o+d.config.xaxis.axisTicks.offsetX,c+d.config.xaxis.offsetY,h+d.config.xaxis.axisTicks.offsetX,r+d.config.xaxis.offsetY,d.config.xaxis.axisTicks.color);a.add(p),p.node.classList.add("apexcharts-xaxis-tick")}}}},{key:"getXAxisTicksPositions",value:function(){var o=this.w,r=[],a=this.xaxisLabels.length,d=o.globals.padHorizontal;if(o.globals.timescaleLabels.length>0)for(var h=0;h<a;h++)d=this.xaxisLabels[h].position,r.push(d);else for(var c=a,p=0;p<c;p++){var f=c;o.globals.isXNumeric&&o.config.chart.type!=="bar"&&(f-=1),d+=o.globals.gridWidth/f,r.push(d)}return r}},{key:"xAxisLabelCorrections",value:function(){var o=this.w,r=new $(this.ctx),a=o.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g"),d=o.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-texts-g text:not(.apexcharts-xaxis-group-label)"),h=o.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-inversed text"),c=o.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-inversed-texts-g text tspan");if(o.globals.rotateXLabels||o.config.xaxis.labels.rotateAlways)for(var p=0;p<d.length;p++){var f=r.rotateAroundCenter(d[p]);f.y=f.y-1,f.x=f.x+1,d[p].setAttribute("transform","rotate(".concat(o.config.xaxis.labels.rotate," ").concat(f.x," ").concat(f.y,")")),d[p].setAttribute("text-anchor","end"),a.setAttribute("transform","translate(0, ".concat(-10,")"));var v=d[p].childNodes;o.config.xaxis.labels.trim&&Array.prototype.forEach.call(v,function(R){r.placeTextWithEllipsis(R,R.textContent,o.globals.xAxisLabelsHeight-(o.config.legend.position==="bottom"?20:10))})}else(function(){for(var R=o.globals.gridWidth/(o.globals.labels.length+1),T=0;T<d.length;T++){var F=d[T].childNodes;o.config.xaxis.labels.trim&&o.config.xaxis.type!=="datetime"&&Array.prototype.forEach.call(F,function(I){r.placeTextWithEllipsis(I,I.textContent,R)})}})();if(h.length>0){var y=h[h.length-1].getBBox(),b=h[0].getBBox();y.x<-20&&h[h.length-1].parentNode.removeChild(h[h.length-1]),b.x+b.width>o.globals.gridWidth&&!o.globals.isBarHorizontal&&h[0].parentNode.removeChild(h[0]);for(var w=0;w<c.length;w++)r.placeTextWithEllipsis(c[w],c[w].textContent,o.config.yaxis[0].labels.maxWidth-(o.config.yaxis[0].title.text?2*parseFloat(o.config.yaxis[0].title.style.fontSize):0)-15)}}}]),O}(),Ee=function(){function O(o){l(this,O),this.ctx=o,this.w=o.w;var r=this.w;this.xaxisLabels=r.globals.labels.slice(),this.axesUtils=new Mt(o),this.isRangeBar=r.globals.seriesRange.length&&r.globals.isBarHorizontal,r.globals.timescaleLabels.length>0&&(this.xaxisLabels=r.globals.timescaleLabels.slice())}return g(O,[{key:"drawGridArea",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=this.w,a=new $(this.ctx);o===null&&(o=a.group({class:"apexcharts-grid"}));var d=a.drawLine(r.globals.padHorizontal,1,r.globals.padHorizontal,r.globals.gridHeight,"transparent"),h=a.drawLine(r.globals.padHorizontal,r.globals.gridHeight,r.globals.gridWidth,r.globals.gridHeight,"transparent");return o.add(h),o.add(d),o}},{key:"drawGrid",value:function(){var o=null;return this.w.globals.axisCharts&&(o=this.renderGrid(),this.drawGridArea(o.el)),o}},{key:"createGridMask",value:function(){var o=this.w,r=o.globals,a=new $(this.ctx),d=Array.isArray(o.config.stroke.width)?0:o.config.stroke.width;if(Array.isArray(o.config.stroke.width)){var h=0;o.config.stroke.width.forEach(function(b){h=Math.max(h,b)}),d=h}r.dom.elGridRectMask=document.createElementNS(r.SVGNS,"clipPath"),r.dom.elGridRectMask.setAttribute("id","gridRectMask".concat(r.cuid)),r.dom.elGridRectMarkerMask=document.createElementNS(r.SVGNS,"clipPath"),r.dom.elGridRectMarkerMask.setAttribute("id","gridRectMarkerMask".concat(r.cuid)),r.dom.elForecastMask=document.createElementNS(r.SVGNS,"clipPath"),r.dom.elForecastMask.setAttribute("id","forecastMask".concat(r.cuid)),r.dom.elNonForecastMask=document.createElementNS(r.SVGNS,"clipPath"),r.dom.elNonForecastMask.setAttribute("id","nonForecastMask".concat(r.cuid));var c=o.config.chart.type,p=0,f=0;(c==="bar"||c==="rangeBar"||c==="candlestick"||c==="boxPlot"||o.globals.comboBarCount>0)&&o.globals.isXNumeric&&!o.globals.isBarHorizontal&&(p=o.config.grid.padding.left,f=o.config.grid.padding.right,r.barPadForNumericAxis>p&&(p=r.barPadForNumericAxis,f=r.barPadForNumericAxis)),r.dom.elGridRect=a.drawRect(-d-p-2,2*-d-2,r.gridWidth+d+f+p+4,r.gridHeight+4*d+4,0,"#fff");var v=o.globals.markers.largestSize+1;r.dom.elGridRectMarker=a.drawRect(2*-v,2*-v,r.gridWidth+4*v,r.gridHeight+4*v,0,"#fff"),r.dom.elGridRectMask.appendChild(r.dom.elGridRect.node),r.dom.elGridRectMarkerMask.appendChild(r.dom.elGridRectMarker.node);var y=r.dom.baseEl.querySelector("defs");y.appendChild(r.dom.elGridRectMask),y.appendChild(r.dom.elForecastMask),y.appendChild(r.dom.elNonForecastMask),y.appendChild(r.dom.elGridRectMarkerMask)}},{key:"_drawGridLines",value:function(o){var r=o.i,a=o.x1,d=o.y1,h=o.x2,c=o.y2,p=o.xCount,f=o.parent,v=this.w;if(!(r===0&&v.globals.skipFirstTimelinelabel||r===p-1&&v.globals.skipLastTimelinelabel&&!v.config.xaxis.labels.formatter||v.config.chart.type==="radar")){v.config.grid.xaxis.lines.show&&this._drawGridLine({i:r,x1:a,y1:d,x2:h,y2:c,xCount:p,parent:f});var y=0;if(v.globals.hasXaxisGroups&&v.config.xaxis.tickPlacement==="between"){var b=v.globals.groups;if(b){for(var w=0,R=0;w<r&&R<b.length;R++)w+=b[R].cols;w===r&&(y=.6*v.globals.xAxisLabelsHeight)}}new Pt(this.ctx).drawXaxisTicks(a,y,v.globals.dom.elGraphical)}}},{key:"_drawGridLine",value:function(o){var r=o.i,a=o.x1,d=o.y1,h=o.x2,c=o.y2,p=o.xCount,f=o.parent,v=this.w,y=!1,b=f.node.classList.contains("apexcharts-gridlines-horizontal"),w=v.config.grid.strokeDashArray,R=v.globals.barPadForNumericAxis;(d===0&&c===0||a===0&&h===0)&&(y=!0),d===v.globals.gridHeight&&c===v.globals.gridHeight&&(y=!0),!v.globals.isBarHorizontal||r!==0&&r!==p-1||(y=!0);var T=new $(this).drawLine(a-(b?R:0),d,h+(b?R:0),c,v.config.grid.borderColor,w);T.node.classList.add("apexcharts-gridline"),y&&v.config.grid.show?this.elGridBorders.add(T):f.add(T)}},{key:"_drawGridBandRect",value:function(o){var r=o.c,a=o.x1,d=o.y1,h=o.x2,c=o.y2,p=o.type,f=this.w,v=new $(this.ctx),y=f.globals.barPadForNumericAxis;if(p!=="column"||f.config.xaxis.type!=="datetime"){var b=f.config.grid[p].colors[r],w=v.drawRect(a-(p==="row"?y:0),d,h+(p==="row"?2*y:0),c,0,b,f.config.grid[p].opacity);this.elg.add(w),w.attr("clip-path","url(#gridRectMask".concat(f.globals.cuid,")")),w.node.classList.add("apexcharts-grid-".concat(p))}}},{key:"_drawXYLines",value:function(o){var r=this,a=o.xCount,d=o.tickAmount,h=this.w;if(h.config.grid.xaxis.lines.show||h.config.xaxis.axisTicks.show){var c,p=h.globals.padHorizontal,f=h.globals.gridHeight;h.globals.timescaleLabels.length?function(T){for(var F=T.xC,I=T.x1,G=T.y1,H=T.x2,m=T.y2,x=0;x<F;x++)I=r.xaxisLabels[x].position,H=r.xaxisLabels[x].position,r._drawGridLines({i:x,x1:I,y1:G,x2:H,y2:m,xCount:a,parent:r.elgridLinesV})}({xC:a,x1:p,y1:0,x2:c,y2:f}):(h.globals.isXNumeric&&(a=h.globals.xAxisScale.result.length),function(T){for(var F=T.xC,I=T.x1,G=T.y1,H=T.x2,m=T.y2,x=0;x<F+(h.globals.isXNumeric?0:1);x++)x===0&&F===1&&h.globals.dataPoints===1&&(H=I=h.globals.gridWidth/2),r._drawGridLines({i:x,x1:I,y1:G,x2:H,y2:m,xCount:a,parent:r.elgridLinesV}),H=I+=h.globals.gridWidth/(h.globals.isXNumeric?F-1:F)}({xC:a,x1:p,y1:0,x2:c,y2:f}))}if(h.config.grid.yaxis.lines.show){var v=0,y=0,b=h.globals.gridWidth,w=d+1;this.isRangeBar&&(w=h.globals.labels.length);for(var R=0;R<w+(this.isRangeBar?1:0);R++)this._drawGridLine({i:R,xCount:w+(this.isRangeBar?1:0),x1:0,y1:v,x2:b,y2:y,parent:this.elgridLinesH}),y=v+=h.globals.gridHeight/(this.isRangeBar?w:d)}}},{key:"_drawInvertedXYLines",value:function(o){var r=o.xCount,a=this.w;if(a.config.grid.xaxis.lines.show||a.config.xaxis.axisTicks.show)for(var d,h=a.globals.padHorizontal,c=a.globals.gridHeight,p=0;p<r+1;p++)a.config.grid.xaxis.lines.show&&this._drawGridLine({i:p,xCount:r+1,x1:h,y1:0,x2:d,y2:c,parent:this.elgridLinesV}),new Pt(this.ctx).drawXaxisTicks(h,0,a.globals.dom.elGraphical),d=h=h+a.globals.gridWidth/r+.3;if(a.config.grid.yaxis.lines.show)for(var f=0,v=0,y=a.globals.gridWidth,b=0;b<a.globals.dataPoints+1;b++)this._drawGridLine({i:b,xCount:a.globals.dataPoints+1,x1:0,y1:f,x2:y,y2:v,parent:this.elgridLinesH}),v=f+=a.globals.gridHeight/a.globals.dataPoints}},{key:"renderGrid",value:function(){var o=this.w,r=new $(this.ctx);this.elg=r.group({class:"apexcharts-grid"}),this.elgridLinesH=r.group({class:"apexcharts-gridlines-horizontal"}),this.elgridLinesV=r.group({class:"apexcharts-gridlines-vertical"}),this.elGridBorders=r.group({class:"apexcharts-grid-borders"}),this.elg.add(this.elgridLinesH),this.elg.add(this.elgridLinesV),o.config.grid.show||(this.elgridLinesV.hide(),this.elgridLinesH.hide(),this.elGridBorders.hide());for(var a,d=o.globals.yAxisScale.length?o.globals.yAxisScale[0].result.length-1:5,h=0;h<o.globals.series.length&&(o.globals.yAxisScale[h]!==void 0&&(d=o.globals.yAxisScale[h].result.length-1),!(d>2));h++);if(!o.globals.isBarHorizontal||this.isRangeBar){var c,p,f;a=this.xaxisLabels.length,this.isRangeBar&&(a--,d=o.globals.labels.length,o.config.xaxis.tickAmount&&o.config.xaxis.labels.formatter&&(a=o.config.xaxis.tickAmount),((c=o.globals.yAxisScale)===null||c===void 0||(p=c[0])===null||p===void 0||(f=p.result)===null||f===void 0?void 0:f.length)>0&&o.config.xaxis.type!=="datetime"&&(a=o.globals.yAxisScale[0].result.length-1)),this._drawXYLines({xCount:a,tickAmount:d})}else a=d,d=o.globals.xTickAmount,this._drawInvertedXYLines({xCount:a,tickAmount:d});return this.drawGridBands(a,d),{el:this.elg,elGridBorders:this.elGridBorders,xAxisTickWidth:o.globals.gridWidth/a}}},{key:"drawGridBands",value:function(o,r){var a=this.w;if(a.config.grid.row.colors!==void 0&&a.config.grid.row.colors.length>0)for(var d=0,h=a.globals.gridHeight/r,c=a.globals.gridWidth,p=0,f=0;p<r;p++,f++)f>=a.config.grid.row.colors.length&&(f=0),this._drawGridBandRect({c:f,x1:0,y1:d,x2:c,y2:h,type:"row"}),d+=a.globals.gridHeight/r;if(a.config.grid.column.colors!==void 0&&a.config.grid.column.colors.length>0)for(var v=a.globals.isBarHorizontal||a.config.xaxis.tickPlacement!=="on"||a.config.xaxis.type!=="category"&&!a.config.xaxis.convertedCatToNumeric?o:o-1,y=a.globals.padHorizontal,b=a.globals.padHorizontal+a.globals.gridWidth/v,w=a.globals.gridHeight,R=0,T=0;R<o;R++,T++)T>=a.config.grid.column.colors.length&&(T=0),this._drawGridBandRect({c:T,x1:y,y1:0,x2:b,y2:w,type:"column"}),y+=a.globals.gridWidth/v}}]),O}(),ne=function(){function O(o){l(this,O),this.ctx=o,this.w=o.w}return g(O,[{key:"niceScale",value:function(o,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:5,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,h=arguments.length>4?arguments[4]:void 0,c=this.w,p=Math.abs(r-o);if((a=this._adjustTicksForSmallRange(a,d,p))==="dataPoints"&&(a=c.globals.dataPoints-1),o===Number.MIN_VALUE&&r===0||!_.isNumber(o)&&!_.isNumber(r)||o===Number.MIN_VALUE&&r===-Number.MAX_VALUE)return o=0,r=a,this.linearScale(o,r,a,d,c.config.yaxis[d].stepSize);o>r?(console.warn("axis.min cannot be greater than axis.max"),r=o+.1):o===r&&(o=o===0?0:o-.5,r=r===0?2:r+.5);var f=[];p<1&&h&&(c.config.chart.type==="candlestick"||c.config.series[d].type==="candlestick"||c.config.chart.type==="boxPlot"||c.config.series[d].type==="boxPlot"||c.globals.isRangeData)&&(r*=1.01);var v=a+1;v<2?v=2:v>2&&(v-=2);var y=p/v,b=Math.floor(_.log10(y)),w=Math.pow(10,b),R=Math.round(y/w);R<1&&(R=1);var T=R*w;c.config.yaxis[d].stepSize&&(T=c.config.yaxis[d].stepSize),c.globals.isBarHorizontal&&c.config.xaxis.stepSize&&c.config.xaxis.type!=="datetime"&&(T=c.config.xaxis.stepSize);var F=T*Math.floor(o/T),I=T*Math.ceil(r/T),G=F;if(h&&p>2){for(;f.push(_.stripNumber(G,7)),!((G+=T)>I););return{result:f,niceMin:f[0],niceMax:f[f.length-1]}}var H=o;(f=[]).push(_.stripNumber(H,7));for(var m=Math.abs(r-o)/a,x=0;x<=a;x++)H+=m,f.push(H);return f[f.length-2]>=r&&f.pop(),{result:f,niceMin:f[0],niceMax:f[f.length-1]}}},{key:"linearScale",value:function(o,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:5,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,h=arguments.length>4&&arguments[4]!==void 0?arguments[4]:void 0,c=Math.abs(r-o);(a=this._adjustTicksForSmallRange(a,d,c))==="dataPoints"&&(a=this.w.globals.dataPoints-1),h||(h=c/a),a===Number.MAX_VALUE&&(a=5,h=1);for(var p=[],f=o;a>=0;)p.push(f),f+=h,a-=1;return{result:p,niceMin:p[0],niceMax:p[p.length-1]}}},{key:"logarithmicScaleNice",value:function(o,r,a){r<=0&&(r=Math.max(o,a)),o<=0&&(o=Math.min(r,a));for(var d=[],h=Math.ceil(Math.log(r)/Math.log(a)+1),c=Math.floor(Math.log(o)/Math.log(a));c<h;c++)d.push(Math.pow(a,c));return{result:d,niceMin:d[0],niceMax:d[d.length-1]}}},{key:"logarithmicScale",value:function(o,r,a){r<=0&&(r=Math.max(o,a)),o<=0&&(o=Math.min(r,a));for(var d=[],h=Math.log(r)/Math.log(a),c=Math.log(o)/Math.log(a),p=h-c,f=Math.round(p),v=p/f,y=0,b=c;y<f;y++,b+=v)d.push(Math.pow(a,b));return d.push(Math.pow(a,h)),{result:d,niceMin:o,niceMax:r}}},{key:"_adjustTicksForSmallRange",value:function(o,r,a){var d=o;if(r!==void 0&&this.w.config.yaxis[r].labels.formatter&&this.w.config.yaxis[r].tickAmount===void 0){var h=Number(this.w.config.yaxis[r].labels.formatter(1));_.isNumber(h)&&this.w.globals.yValueDecimal===0&&(d=Math.ceil(a))}return d<o?d:o}},{key:"setYScaleForIndex",value:function(o,r,a){var d=this.w.globals,h=this.w.config,c=d.isBarHorizontal?h.xaxis:h.yaxis[o];d.yAxisScale[o]===void 0&&(d.yAxisScale[o]=[]);var p=Math.abs(a-r);if(c.logarithmic&&p<=5&&(d.invalidLogScale=!0),c.logarithmic&&p>5)d.allSeriesCollapsed=!1,d.yAxisScale[o]=this.logarithmicScale(r,a,c.logBase),d.yAxisScale[o]=c.forceNiceScale?this.logarithmicScaleNice(r,a,c.logBase):this.logarithmicScale(r,a,c.logBase);else if(a!==-Number.MAX_VALUE&&_.isNumber(a))if(d.allSeriesCollapsed=!1,c.min===void 0&&c.max===void 0||c.forceNiceScale){var f=h.yaxis[o].max===void 0&&h.yaxis[o].min===void 0||h.yaxis[o].forceNiceScale;d.yAxisScale[o]=this.niceScale(r,a,c.tickAmount?c.tickAmount:p<5&&p>1?p+1:5,o,f)}else d.yAxisScale[o]=this.linearScale(r,a,c.tickAmount,o,h.yaxis[o].stepSize);else d.yAxisScale[o]=this.linearScale(0,5,5,o,h.yaxis[o].stepSize)}},{key:"setXScale",value:function(o,r){var a=this.w,d=a.globals,h=Math.abs(r-o);return r!==-Number.MAX_VALUE&&_.isNumber(r)?d.xAxisScale=this.linearScale(o,r,a.config.xaxis.tickAmount?a.config.xaxis.tickAmount:h<5&&h>1?h+1:5,0,a.config.xaxis.stepSize):d.xAxisScale=this.linearScale(0,5,5),d.xAxisScale}},{key:"setMultipleYScales",value:function(){var o=this,r=this.w.globals,a=this.w.config,d=r.minYArr.concat([]),h=r.maxYArr.concat([]),c=[];a.yaxis.forEach(function(p,f){var v=f;a.series.forEach(function(w,R){w.name===p.seriesName&&(v=R,f!==R?c.push({index:R,similarIndex:f,alreadyExists:!0}):c.push({index:R}))});var y=d[v],b=h[v];o.setYScaleForIndex(f,y,b)}),this.sameScaleInMultipleAxes(d,h,c)}},{key:"sameScaleInMultipleAxes",value:function(o,r,a){var d=this,h=this.w.config,c=this.w.globals,p=[];a.forEach(function(F){F.alreadyExists&&(p[F.index]===void 0&&(p[F.index]=[]),p[F.index].push(F.index),p[F.index].push(F.similarIndex))}),c.yAxisSameScaleIndices=p,p.forEach(function(F,I){p.forEach(function(G,H){var m,x;I!==H&&(m=F,x=G,m.filter(function(P){return x.indexOf(P)!==-1})).length>0&&(p[I]=p[I].concat(p[H]))})});var f=p.map(function(F){return F.filter(function(I,G){return F.indexOf(I)===G})}).map(function(F){return F.sort()});p=p.filter(function(F){return!!F});var v=f.slice(),y=v.map(function(F){return JSON.stringify(F)});v=v.filter(function(F,I){return y.indexOf(JSON.stringify(F))===I});var b=[],w=[];o.forEach(function(F,I){v.forEach(function(G,H){G.indexOf(I)>-1&&(b[H]===void 0&&(b[H]=[],w[H]=[]),b[H].push({key:I,value:F}),w[H].push({key:I,value:r[I]}))})});var R=Array.apply(null,Array(v.length)).map(Number.prototype.valueOf,Number.MIN_VALUE),T=Array.apply(null,Array(v.length)).map(Number.prototype.valueOf,-Number.MAX_VALUE);b.forEach(function(F,I){F.forEach(function(G,H){R[I]=Math.min(G.value,R[I])})}),w.forEach(function(F,I){F.forEach(function(G,H){T[I]=Math.max(G.value,T[I])})}),o.forEach(function(F,I){w.forEach(function(G,H){var m=R[H],x=T[H];h.chart.stacked&&(x=0,G.forEach(function(P,k){P.value!==-Number.MAX_VALUE&&(x+=P.value),m!==Number.MIN_VALUE&&(m+=b[H][k].value)})),G.forEach(function(P,k){G[k].key===I&&(h.yaxis[I].min!==void 0&&(m=typeof h.yaxis[I].min=="function"?h.yaxis[I].min(c.minY):h.yaxis[I].min),h.yaxis[I].max!==void 0&&(x=typeof h.yaxis[I].max=="function"?h.yaxis[I].max(c.maxY):h.yaxis[I].max),d.setYScaleForIndex(I,m,x))})})})}},{key:"autoScaleY",value:function(o,r,a){o||(o=this);var d=o.w;if(d.globals.isMultipleYAxis||d.globals.collapsedSeries.length)return console.warn("autoScaleYaxis not supported in a multi-yaxis chart."),r;var h=d.globals.seriesX[0],c=d.config.chart.stacked;return r.forEach(function(p,f){for(var v=0,y=0;y<h.length;y++)if(h[y]>=a.xaxis.min){v=y;break}var b,w,R=d.globals.minYArr[f],T=d.globals.maxYArr[f],F=d.globals.stackedSeriesTotals;d.globals.series.forEach(function(I,G){var H=I[v];c?(H=F[v],b=w=H,F.forEach(function(m,x){h[x]<=a.xaxis.max&&h[x]>=a.xaxis.min&&(m>w&&m!==null&&(w=m),I[x]<b&&I[x]!==null&&(b=I[x]))})):(b=w=H,I.forEach(function(m,x){if(h[x]<=a.xaxis.max&&h[x]>=a.xaxis.min){var P=m,k=m;d.globals.series.forEach(function(V,B){m!==null&&(P=Math.min(V[x],P),k=Math.max(V[x],k))}),k>w&&k!==null&&(w=k),P<b&&P!==null&&(b=P)}})),b===void 0&&w===void 0&&(b=R,w=T),w*=w<0?.9:1.1,(b*=b<0?1.1:.9)===0&&w===0&&(b=-1,w=1),w<0&&w<T&&(w=T),b<0&&b>R&&(b=R),r.length>1?(r[G].min=p.min===void 0?b:p.min,r[G].max=p.max===void 0?w:p.max):(r[0].min=p.min===void 0?b:p.min,r[0].max=p.max===void 0?w:p.max)})}),r}}]),O}(),te=function(){function O(o){l(this,O),this.ctx=o,this.w=o.w,this.scales=new ne(o)}return g(O,[{key:"init",value:function(){this.setYRange(),this.setXRange(),this.setZRange()}},{key:"getMinYMaxY",value:function(o){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-Number.MAX_VALUE,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,h=this.w.config,c=this.w.globals,p=-Number.MAX_VALUE,f=Number.MIN_VALUE;d===null&&(d=o+1);var v=c.series,y=v,b=v;h.chart.type==="candlestick"?(y=c.seriesCandleL,b=c.seriesCandleH):h.chart.type==="boxPlot"?(y=c.seriesCandleO,b=c.seriesCandleC):c.isRangeData&&(y=c.seriesRangeStart,b=c.seriesRangeEnd);for(var w=o;w<d;w++){c.dataPoints=Math.max(c.dataPoints,v[w].length),c.categoryLabels.length&&(c.dataPoints=c.categoryLabels.filter(function(F){return F!==void 0}).length),c.labels.length&&h.xaxis.type!=="datetime"&&c.series.reduce(function(F,I){return F+I.length},0)!==0&&(c.dataPoints=Math.max(c.dataPoints,c.labels.length));for(var R=0;R<c.series[w].length;R++){var T=v[w][R];T!==null&&_.isNumber(T)?(b[w][R]!==void 0&&(p=Math.max(p,b[w][R]),r=Math.min(r,b[w][R])),y[w][R]!==void 0&&(r=Math.min(r,y[w][R]),a=Math.max(a,y[w][R])),this.w.config.chart.type!=="candlestick"&&this.w.config.chart.type!=="boxPlot"&&this.w.config.chart.type==="rangeArea"&&this.w.config.chart.type==="rangeBar"||(this.w.config.chart.type!=="candlestick"&&this.w.config.chart.type!=="boxPlot"||c.seriesCandleC[w][R]!==void 0&&(p=Math.max(p,c.seriesCandleO[w][R]),p=Math.max(p,c.seriesCandleH[w][R]),p=Math.max(p,c.seriesCandleL[w][R]),p=Math.max(p,c.seriesCandleC[w][R]),this.w.config.chart.type==="boxPlot"&&(p=Math.max(p,c.seriesCandleM[w][R]))),!h.series[w].type||h.series[w].type==="candlestick"&&h.series[w].type==="boxPlot"&&h.series[w].type==="rangeArea"&&h.series[w].type==="rangeBar"||(p=Math.max(p,c.series[w][R]),r=Math.min(r,c.series[w][R])),a=p),c.seriesGoals[w]&&c.seriesGoals[w][R]&&Array.isArray(c.seriesGoals[w][R])&&c.seriesGoals[w][R].forEach(function(F){f!==Number.MIN_VALUE&&(f=Math.min(f,F.value),r=f),p=Math.max(p,F.value),a=p}),_.isFloat(T)&&(T=_.noExponents(T),c.yValueDecimal=Math.max(c.yValueDecimal,T.toString().split(".")[1].length)),f>y[w][R]&&y[w][R]<0&&(f=y[w][R])):c.hasNullValues=!0}}return h.chart.type==="rangeBar"&&c.seriesRangeStart.length&&c.isBarHorizontal&&(f=r),h.chart.type==="bar"&&(f<0&&p<0&&(p=0),f===Number.MIN_VALUE&&(f=0)),{minY:f,maxY:p,lowestY:r,highestY:a}}},{key:"setYRange",value:function(){var o=this.w.globals,r=this.w.config;o.maxY=-Number.MAX_VALUE,o.minY=Number.MIN_VALUE;var a=Number.MAX_VALUE;if(o.isMultipleYAxis)for(var d=0;d<o.series.length;d++){var h=this.getMinYMaxY(d,a,null,d+1);o.minYArr.push(h.minY),o.maxYArr.push(h.maxY),a=h.lowestY}var c=this.getMinYMaxY(0,a,null,o.series.length);if(o.minY=c.minY,o.maxY=c.maxY,a=c.lowestY,r.chart.stacked&&this._setStackedMinMax(),(r.chart.type==="line"||r.chart.type==="area"||r.chart.type==="candlestick"||r.chart.type==="boxPlot"||r.chart.type==="rangeBar"&&!o.isBarHorizontal)&&o.minY===Number.MIN_VALUE&&a!==-Number.MAX_VALUE&&a!==o.maxY){var p=o.maxY-a;(a>=0&&a<=10||r.yaxis[0].min!==void 0||r.yaxis[0].max!==void 0)&&(p=0),o.minY=a-5*p/100,a>0&&o.minY<0&&(o.minY=0),o.maxY=o.maxY+5*p/100}return r.yaxis.forEach(function(f,v){f.max!==void 0&&(typeof f.max=="number"?o.maxYArr[v]=f.max:typeof f.max=="function"&&(o.maxYArr[v]=f.max(o.isMultipleYAxis?o.maxYArr[v]:o.maxY)),o.maxY=o.maxYArr[v]),f.min!==void 0&&(typeof f.min=="number"?o.minYArr[v]=f.min:typeof f.min=="function"&&(o.minYArr[v]=f.min(o.isMultipleYAxis?o.minYArr[v]===Number.MIN_VALUE?0:o.minYArr[v]:o.minY)),o.minY=o.minYArr[v])}),o.isBarHorizontal&&["min","max"].forEach(function(f){r.xaxis[f]!==void 0&&typeof r.xaxis[f]=="number"&&(f==="min"?o.minY=r.xaxis[f]:o.maxY=r.xaxis[f])}),o.isMultipleYAxis?(this.scales.setMultipleYScales(),o.minY=a,o.yAxisScale.forEach(function(f,v){o.minYArr[v]=f.niceMin,o.maxYArr[v]=f.niceMax})):(this.scales.setYScaleForIndex(0,o.minY,o.maxY),o.minY=o.yAxisScale[0].niceMin,o.maxY=o.yAxisScale[0].niceMax,o.minYArr[0]=o.yAxisScale[0].niceMin,o.maxYArr[0]=o.yAxisScale[0].niceMax),{minY:o.minY,maxY:o.maxY,minYArr:o.minYArr,maxYArr:o.maxYArr,yAxisScale:o.yAxisScale}}},{key:"setXRange",value:function(){var o=this.w.globals,r=this.w.config,a=r.xaxis.type==="numeric"||r.xaxis.type==="datetime"||r.xaxis.type==="category"&&!o.noLabelsProvided||o.noLabelsProvided||o.isXNumeric;if(o.isXNumeric&&function(){for(var p=0;p<o.series.length;p++)if(o.labels[p])for(var f=0;f<o.labels[p].length;f++)o.labels[p][f]!==null&&_.isNumber(o.labels[p][f])&&(o.maxX=Math.max(o.maxX,o.labels[p][f]),o.initialMaxX=Math.max(o.maxX,o.labels[p][f]),o.minX=Math.min(o.minX,o.labels[p][f]),o.initialMinX=Math.min(o.minX,o.labels[p][f]))}(),o.noLabelsProvided&&r.xaxis.categories.length===0&&(o.maxX=o.labels[o.labels.length-1],o.initialMaxX=o.labels[o.labels.length-1],o.minX=1,o.initialMinX=1),o.isXNumeric||o.noLabelsProvided||o.dataFormatXNumeric){var d;if(r.xaxis.tickAmount===void 0?(d=Math.round(o.svgWidth/150),r.xaxis.type==="numeric"&&o.dataPoints<30&&(d=o.dataPoints-1),d>o.dataPoints&&o.dataPoints!==0&&(d=o.dataPoints-1)):r.xaxis.tickAmount==="dataPoints"?(o.series.length>1&&(d=o.series[o.maxValsInArrayIndex].length-1),o.isXNumeric&&(d=o.maxX-o.minX-1)):d=r.xaxis.tickAmount,o.xTickAmount=d,r.xaxis.max!==void 0&&typeof r.xaxis.max=="number"&&(o.maxX=r.xaxis.max),r.xaxis.min!==void 0&&typeof r.xaxis.min=="number"&&(o.minX=r.xaxis.min),r.xaxis.range!==void 0&&(o.minX=o.maxX-r.xaxis.range),o.minX!==Number.MAX_VALUE&&o.maxX!==-Number.MAX_VALUE)if(r.xaxis.convertedCatToNumeric&&!o.dataFormatXNumeric){for(var h=[],c=o.minX-1;c<o.maxX;c++)h.push(c+1);o.xAxisScale={result:h,niceMin:h[0],niceMax:h[h.length-1]}}else o.xAxisScale=this.scales.setXScale(o.minX,o.maxX);else o.xAxisScale=this.scales.linearScale(0,d,d,0,r.xaxis.stepSize),o.noLabelsProvided&&o.labels.length>0&&(o.xAxisScale=this.scales.linearScale(1,o.labels.length,d-1,0,r.xaxis.stepSize),o.seriesX=o.labels.slice());a&&(o.labels=o.xAxisScale.result.slice())}return o.isBarHorizontal&&o.labels.length&&(o.xTickAmount=o.labels.length),this._handleSingleDataPoint(),this._getMinXDiff(),{minX:o.minX,maxX:o.maxX}}},{key:"setZRange",value:function(){var o=this.w.globals;if(o.isDataXYZ){for(var r=0;r<o.series.length;r++)if(o.seriesZ[r]!==void 0)for(var a=0;a<o.seriesZ[r].length;a++)o.seriesZ[r][a]!==null&&_.isNumber(o.seriesZ[r][a])&&(o.maxZ=Math.max(o.maxZ,o.seriesZ[r][a]),o.minZ=Math.min(o.minZ,o.seriesZ[r][a]))}}},{key:"_handleSingleDataPoint",value:function(){var o=this.w.globals,r=this.w.config;if(o.minX===o.maxX){var a=new Ge(this.ctx);if(r.xaxis.type==="datetime"){var d=a.getDate(o.minX);r.xaxis.labels.datetimeUTC?d.setUTCDate(d.getUTCDate()-2):d.setDate(d.getDate()-2),o.minX=new Date(d).getTime();var h=a.getDate(o.maxX);r.xaxis.labels.datetimeUTC?h.setUTCDate(h.getUTCDate()+2):h.setDate(h.getDate()+2),o.maxX=new Date(h).getTime()}else(r.xaxis.type==="numeric"||r.xaxis.type==="category"&&!o.noLabelsProvided)&&(o.minX=o.minX-2,o.initialMinX=o.minX,o.maxX=o.maxX+2,o.initialMaxX=o.maxX)}}},{key:"_getMinXDiff",value:function(){var o=this.w.globals;o.isXNumeric&&o.seriesX.forEach(function(r,a){r.length===1&&r.push(o.seriesX[o.maxValsInArrayIndex][o.seriesX[o.maxValsInArrayIndex].length-1]);var d=r.slice();d.sort(function(h,c){return h-c}),d.forEach(function(h,c){if(c>0){var p=h-d[c-1];p>0&&(o.minXDiff=Math.min(p,o.minXDiff))}}),o.dataPoints!==1&&o.minXDiff!==Number.MAX_VALUE||(o.minXDiff=.5)})}},{key:"_setStackedMinMax",value:function(){var o=this,r=this.w.globals;if(r.series.length){var a=r.seriesGroups;a.length||(a=[this.w.config.series.map(function(c){return c.name})]);var d={},h={};a.forEach(function(c){d[c]=[],h[c]=[],o.w.config.series.map(function(p,f){return c.indexOf(p.name)>-1?f:null}).filter(function(p){return p!==null}).forEach(function(p){for(var f=0;f<r.series[r.maxValsInArrayIndex].length;f++){var v,y;d[c][f]===void 0&&(d[c][f]=0,h[c][f]=0),(o.w.config.chart.stacked&&!r.comboCharts||o.w.config.chart.stacked&&r.comboCharts&&(!o.w.config.chart.stackOnlyBar||((v=o.w.config.series)===null||v===void 0||(y=v[p])===null||y===void 0?void 0:y.type)==="bar"))&&r.series[p][f]!==null&&_.isNumber(r.series[p][f])&&(r.series[p][f]>0?d[c][f]+=parseFloat(r.series[p][f])+1e-4:h[c][f]+=parseFloat(r.series[p][f]))}})}),Object.entries(d).forEach(function(c){var p=z(c,1)[0];d[p].forEach(function(f,v){r.maxY=Math.max(r.maxY,d[p][v]),r.minY=Math.min(r.minY,h[p][v])})})}}}]),O}(),qe=function(){function O(o,r){l(this,O),this.ctx=o,this.elgrid=r,this.w=o.w;var a=this.w;this.xaxisFontSize=a.config.xaxis.labels.style.fontSize,this.axisFontFamily=a.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=a.config.xaxis.labels.style.colors,this.isCategoryBarHorizontal=a.config.chart.type==="bar"&&a.config.plotOptions.bar.horizontal,this.xAxisoffX=0,a.config.xaxis.position==="bottom"&&(this.xAxisoffX=a.globals.gridHeight),this.drawnLabels=[],this.axesUtils=new Mt(o)}return g(O,[{key:"drawYaxis",value:function(o){var r=this,a=this.w,d=new $(this.ctx),h=a.config.yaxis[o].labels.style,c=h.fontSize,p=h.fontFamily,f=h.fontWeight,v=d.group({class:"apexcharts-yaxis",rel:o,transform:"translate("+a.globals.translateYAxisX[o]+", 0)"});if(this.axesUtils.isYAxisHidden(o))return v;var y=d.group({class:"apexcharts-yaxis-texts-g"});v.add(y);var b=a.globals.yAxisScale[o].result.length-1,w=a.globals.gridHeight/b,R=a.globals.translateY,T=a.globals.yLabelFormatters[o],F=a.globals.yAxisScale[o].result.slice();F=this.axesUtils.checkForReversedLabels(o,F);var I="";if(a.config.yaxis[o].labels.show)for(var G=function(j){var K=F[j];K=T(K,j,a);var ie=a.config.yaxis[o].labels.padding;a.config.yaxis[o].opposite&&a.config.yaxis.length!==0&&(ie*=-1);var he="end";a.config.yaxis[o].opposite&&(he="start"),a.config.yaxis[o].labels.align==="left"?he="start":a.config.yaxis[o].labels.align==="center"?he="middle":a.config.yaxis[o].labels.align==="right"&&(he="end");var ae=r.axesUtils.getYAxisForeColor(h.colors,o),Le=a.config.yaxis[o].labels.offsetY;a.config.chart.type==="heatmap"&&(Le-=(a.globals.gridHeight/a.globals.series.length-1)/2);var Be=d.drawText({x:ie,y:R+b/10+Le+1,text:K,textAnchor:he,fontSize:c,fontFamily:p,fontWeight:f,maxWidth:a.config.yaxis[o].labels.maxWidth,foreColor:Array.isArray(ae)?ae[j]:ae,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+h.cssClass});j===b&&(I=Be),y.add(Be);var je=document.createElementNS(a.globals.SVGNS,"title");if(je.textContent=Array.isArray(K)?K.join(" "):K,Be.node.appendChild(je),a.config.yaxis[o].labels.rotate!==0){var it=d.rotateAroundCenter(I.node),dt=d.rotateAroundCenter(Be.node);Be.node.setAttribute("transform","rotate(".concat(a.config.yaxis[o].labels.rotate," ").concat(it.x," ").concat(dt.y,")"))}R+=w},H=b;H>=0;H--)G(H);if(a.config.yaxis[o].title.text!==void 0){var m=d.group({class:"apexcharts-yaxis-title"}),x=0;a.config.yaxis[o].opposite&&(x=a.globals.translateYAxisX[o]);var P=d.drawText({x,y:a.globals.gridHeight/2+a.globals.translateY+a.config.yaxis[o].title.offsetY,text:a.config.yaxis[o].title.text,textAnchor:"end",foreColor:a.config.yaxis[o].title.style.color,fontSize:a.config.yaxis[o].title.style.fontSize,fontWeight:a.config.yaxis[o].title.style.fontWeight,fontFamily:a.config.yaxis[o].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+a.config.yaxis[o].title.style.cssClass});m.add(P),v.add(m)}var k=a.config.yaxis[o].axisBorder,V=31+k.offsetX;if(a.config.yaxis[o].opposite&&(V=-31-k.offsetX),k.show){var B=d.drawLine(V,a.globals.translateY+k.offsetY-2,V,a.globals.gridHeight+a.globals.translateY+k.offsetY+2,k.color,0,k.width);v.add(B)}return a.config.yaxis[o].axisTicks.show&&this.axesUtils.drawYAxisTicks(V,b,k,a.config.yaxis[o].axisTicks,o,w,v),v}},{key:"drawYaxisInversed",value:function(o){var r=this.w,a=new $(this.ctx),d=a.group({class:"apexcharts-xaxis apexcharts-yaxis-inversed"}),h=a.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(r.globals.translateXAxisX,", ").concat(r.globals.translateXAxisY,")")});d.add(h);var c=r.globals.yAxisScale[o].result.length-1,p=r.globals.gridWidth/c+.1,f=p+r.config.xaxis.labels.offsetX,v=r.globals.xLabelFormatter,y=r.globals.yAxisScale[o].result.slice(),b=r.globals.timescaleLabels;b.length>0&&(this.xaxisLabels=b.slice(),c=(y=b.slice()).length),y=this.axesUtils.checkForReversedLabels(o,y);var w=b.length;if(r.config.xaxis.labels.show)for(var R=w?0:c;w?R<w:R>=0;w?R++:R--){var T=y[R];T=v(T,R,r);var F=r.globals.gridWidth+r.globals.padHorizontal-(f-p+r.config.xaxis.labels.offsetX);if(b.length){var I=this.axesUtils.getLabel(y,b,F,R,this.drawnLabels,this.xaxisFontSize);F=I.x,T=I.text,this.drawnLabels.push(I.text),R===0&&r.globals.skipFirstTimelinelabel&&(T=""),R===y.length-1&&r.globals.skipLastTimelinelabel&&(T="")}var G=a.drawText({x:F,y:this.xAxisoffX+r.config.xaxis.labels.offsetY+30-(r.config.xaxis.position==="top"?r.globals.xAxisHeight+r.config.xaxis.axisTicks.height-2:0),text:T,textAnchor:"middle",foreColor:Array.isArray(this.xaxisForeColors)?this.xaxisForeColors[o]:this.xaxisForeColors,fontSize:this.xaxisFontSize,fontFamily:this.xaxisFontFamily,fontWeight:r.config.xaxis.labels.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-xaxis-label "+r.config.xaxis.labels.style.cssClass});h.add(G),G.tspan(T);var H=document.createElementNS(r.globals.SVGNS,"title");H.textContent=T,G.node.appendChild(H),f+=p}return this.inversedYAxisTitleText(d),this.inversedYAxisBorder(d),d}},{key:"inversedYAxisBorder",value:function(o){var r=this.w,a=new $(this.ctx),d=r.config.xaxis.axisBorder;if(d.show){var h=0;r.config.chart.type==="bar"&&r.globals.isXNumeric&&(h-=15);var c=a.drawLine(r.globals.padHorizontal+h+d.offsetX,this.xAxisoffX,r.globals.gridWidth,this.xAxisoffX,d.color,0,d.height);this.elgrid&&this.elgrid.elGridBorders&&r.config.grid.show?this.elgrid.elGridBorders.add(c):o.add(c)}}},{key:"inversedYAxisTitleText",value:function(o){var r=this.w,a=new $(this.ctx);if(r.config.xaxis.title.text!==void 0){var d=a.group({class:"apexcharts-xaxis-title apexcharts-yaxis-title-inversed"}),h=a.drawText({x:r.globals.gridWidth/2+r.config.xaxis.title.offsetX,y:this.xAxisoffX+parseFloat(this.xaxisFontSize)+parseFloat(r.config.xaxis.title.style.fontSize)+r.config.xaxis.title.offsetY+20,text:r.config.xaxis.title.text,textAnchor:"middle",fontSize:r.config.xaxis.title.style.fontSize,fontFamily:r.config.xaxis.title.style.fontFamily,fontWeight:r.config.xaxis.title.style.fontWeight,foreColor:r.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+r.config.xaxis.title.style.cssClass});d.add(h),o.add(d)}}},{key:"yAxisTitleRotate",value:function(o,r){var a=this.w,d=new $(this.ctx),h={width:0,height:0},c={width:0,height:0},p=a.globals.dom.baseEl.querySelector(" .apexcharts-yaxis[rel='".concat(o,"'] .apexcharts-yaxis-texts-g"));p!==null&&(h=p.getBoundingClientRect());var f=a.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(o,"'] .apexcharts-yaxis-title text"));if(f!==null&&(c=f.getBoundingClientRect()),f!==null){var v=this.xPaddingForYAxisTitle(o,h,c,r);f.setAttribute("x",v.xPos-(r?10:0))}if(f!==null){var y=d.rotateAroundCenter(f);f.setAttribute("transform","rotate(".concat(r?-1*a.config.yaxis[o].title.rotate:a.config.yaxis[o].title.rotate," ").concat(y.x," ").concat(y.y,")"))}}},{key:"xPaddingForYAxisTitle",value:function(o,r,a,d){var h=this.w,c=0,p=0,f=10;return h.config.yaxis[o].title.text===void 0||o<0?{xPos:p,padd:0}:(d?(p=r.width+h.config.yaxis[o].title.offsetX+a.width/2+f/2,(c+=1)===0&&(p-=f/2)):(p=-1*r.width+h.config.yaxis[o].title.offsetX+f/2+a.width/2,h.globals.isBarHorizontal&&(f=25,p=-1*r.width-h.config.yaxis[o].title.offsetX-f)),{xPos:p,padd:f})}},{key:"setYAxisXPosition",value:function(o,r){var a=this.w,d=0,h=0,c=18,p=1;a.config.yaxis.length>1&&(this.multipleYs=!0),a.config.yaxis.map(function(f,v){var y=a.globals.ignoreYAxisIndexes.indexOf(v)>-1||!f.show||f.floating||o[v].width===0,b=o[v].width+r[v].width;f.opposite?a.globals.isBarHorizontal?(h=a.globals.gridWidth+a.globals.translateX-1,a.globals.translateYAxisX[v]=h-f.labels.offsetX):(h=a.globals.gridWidth+a.globals.translateX+p,y||(p=p+b+20),a.globals.translateYAxisX[v]=h-f.labels.offsetX+20):(d=a.globals.translateX-c,y||(c=c+b+20),a.globals.translateYAxisX[v]=d+f.labels.offsetX)})}},{key:"setYAxisTextAlignments",value:function(){var o=this.w,r=o.globals.dom.baseEl.getElementsByClassName("apexcharts-yaxis");(r=_.listToArray(r)).forEach(function(a,d){var h=o.config.yaxis[d];if(h&&!h.floating&&h.labels.align!==void 0){var c=o.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(d,"'] .apexcharts-yaxis-texts-g")),p=o.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(d,"'] .apexcharts-yaxis-label"));p=_.listToArray(p);var f=c.getBoundingClientRect();h.labels.align==="left"?(p.forEach(function(v,y){v.setAttribute("text-anchor","start")}),h.opposite||c.setAttribute("transform","translate(-".concat(f.width,", 0)"))):h.labels.align==="center"?(p.forEach(function(v,y){v.setAttribute("text-anchor","middle")}),c.setAttribute("transform","translate(".concat(f.width/2*(h.opposite?1:-1),", 0)"))):h.labels.align==="right"&&(p.forEach(function(v,y){v.setAttribute("text-anchor","end")}),h.opposite&&c.setAttribute("transform","translate(".concat(f.width,", 0)")))}})}}]),O}(),Ne=function(){function O(o){l(this,O),this.ctx=o,this.w=o.w,this.documentEvent=_.bind(this.documentEvent,this)}return g(O,[{key:"addEventListener",value:function(o,r){var a=this.w;a.globals.events.hasOwnProperty(o)?a.globals.events[o].push(r):a.globals.events[o]=[r]}},{key:"removeEventListener",value:function(o,r){var a=this.w;if(a.globals.events.hasOwnProperty(o)){var d=a.globals.events[o].indexOf(r);d!==-1&&a.globals.events[o].splice(d,1)}}},{key:"fireEvent",value:function(o,r){var a=this.w;if(a.globals.events.hasOwnProperty(o)){r&&r.length||(r=[]);for(var d=a.globals.events[o],h=d.length,c=0;c<h;c++)d[c].apply(null,r)}}},{key:"setupEventHandlers",value:function(){var o=this,r=this.w,a=this.ctx,d=r.globals.dom.baseEl.querySelector(r.globals.chartClass);this.ctx.eventList.forEach(function(h){d.addEventListener(h,function(c){var p=Object.assign({},r,{seriesIndex:r.globals.capturedSeriesIndex,dataPointIndex:r.globals.capturedDataPointIndex});c.type==="mousemove"||c.type==="touchmove"?typeof r.config.chart.events.mouseMove=="function"&&r.config.chart.events.mouseMove(c,a,p):c.type==="mouseleave"||c.type==="touchleave"?typeof r.config.chart.events.mouseLeave=="function"&&r.config.chart.events.mouseLeave(c,a,p):(c.type==="mouseup"&&c.which===1||c.type==="touchend")&&(typeof r.config.chart.events.click=="function"&&r.config.chart.events.click(c,a,p),a.ctx.events.fireEvent("click",[c,a,p]))},{capture:!1,passive:!0})}),this.ctx.eventList.forEach(function(h){r.globals.dom.baseEl.addEventListener(h,o.documentEvent,{passive:!0})}),this.ctx.core.setupBrushHandler()}},{key:"documentEvent",value:function(o){var r=this.w,a=o.target.className;if(o.type==="click"){var d=r.globals.dom.baseEl.querySelector(".apexcharts-menu");d&&d.classList.contains("apexcharts-menu-open")&&a!=="apexcharts-menu-icon"&&d.classList.remove("apexcharts-menu-open")}r.globals.clientX=o.type==="touchmove"?o.touches[0].clientX:o.clientX,r.globals.clientY=o.type==="touchmove"?o.touches[0].clientY:o.clientY}}]),O}(),Ae=function(){function O(o){l(this,O),this.ctx=o,this.w=o.w}return g(O,[{key:"setCurrentLocaleValues",value:function(o){var r=this.w.config.chart.locales;window.Apex.chart&&window.Apex.chart.locales&&window.Apex.chart.locales.length>0&&(r=this.w.config.chart.locales.concat(window.Apex.chart.locales));var a=r.filter(function(h){return h.name===o})[0];if(!a)throw new Error("Wrong locale name provided. Please make sure you set the correct locale name in options");var d=_.extend(Pe,a);this.w.globals.locale=d.options}}]),O}(),ve=function(){function O(o){l(this,O),this.ctx=o,this.w=o.w}return g(O,[{key:"drawAxis",value:function(o,r){var a,d,h=this,c=this.w.globals,p=this.w.config,f=new Pt(this.ctx,r),v=new qe(this.ctx,r);c.axisCharts&&o!=="radar"&&(c.isBarHorizontal?(d=v.drawYaxisInversed(0),a=f.drawXaxisInversed(0),c.dom.elGraphical.add(a),c.dom.elGraphical.add(d)):(a=f.drawXaxis(),c.dom.elGraphical.add(a),p.yaxis.map(function(y,b){if(c.ignoreYAxisIndexes.indexOf(b)===-1&&(d=v.drawYaxis(b),c.dom.Paper.add(d),h.w.config.grid.position==="back")){var w=c.dom.Paper.children()[1];w.remove(),c.dom.Paper.add(w)}})))}}]),O}(),le=function(){function O(o){l(this,O),this.ctx=o,this.w=o.w}return g(O,[{key:"drawXCrosshairs",value:function(){var o=this.w,r=new $(this.ctx),a=new se(this.ctx),d=o.config.xaxis.crosshairs.fill.gradient,h=o.config.xaxis.crosshairs.dropShadow,c=o.config.xaxis.crosshairs.fill.type,p=d.colorFrom,f=d.colorTo,v=d.opacityFrom,y=d.opacityTo,b=d.stops,w=h.enabled,R=h.left,T=h.top,F=h.blur,I=h.color,G=h.opacity,H=o.config.xaxis.crosshairs.fill.color;if(o.config.xaxis.crosshairs.show){c==="gradient"&&(H=r.drawGradient("vertical",p,f,v,y,null,b,null));var m=r.drawRect();o.config.xaxis.crosshairs.width===1&&(m=r.drawLine());var x=o.globals.gridHeight;(!_.isNumber(x)||x<0)&&(x=0);var P=o.config.xaxis.crosshairs.width;(!_.isNumber(P)||P<0)&&(P=0),m.attr({class:"apexcharts-xcrosshairs",x:0,y:0,y2:x,width:P,height:x,fill:H,filter:"none","fill-opacity":o.config.xaxis.crosshairs.opacity,stroke:o.config.xaxis.crosshairs.stroke.color,"stroke-width":o.config.xaxis.crosshairs.stroke.width,"stroke-dasharray":o.config.xaxis.crosshairs.stroke.dashArray}),w&&(m=a.dropShadow(m,{left:R,top:T,blur:F,color:I,opacity:G})),o.globals.dom.elGraphical.add(m)}}},{key:"drawYCrosshairs",value:function(){var o=this.w,r=new $(this.ctx),a=o.config.yaxis[0].crosshairs,d=o.globals.barPadForNumericAxis;if(o.config.yaxis[0].crosshairs.show){var h=r.drawLine(-d,0,o.globals.gridWidth+d,0,a.stroke.color,a.stroke.dashArray,a.stroke.width);h.attr({class:"apexcharts-ycrosshairs"}),o.globals.dom.elGraphical.add(h)}var c=r.drawLine(-d,0,o.globals.gridWidth+d,0,a.stroke.color,0,0);c.attr({class:"apexcharts-ycrosshairs-hidden"}),o.globals.dom.elGraphical.add(c)}}]),O}(),_e=function(){function O(o){l(this,O),this.ctx=o,this.w=o.w}return g(O,[{key:"checkResponsiveConfig",value:function(o){var r=this,a=this.w,d=a.config;if(d.responsive.length!==0){var h=d.responsive.slice();h.sort(function(v,y){return v.breakpoint>y.breakpoint?1:y.breakpoint>v.breakpoint?-1:0}).reverse();var c=new _t({}),p=function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},y=h[0].breakpoint,b=window.innerWidth>0?window.innerWidth:screen.width;if(b>y){var w=Y.extendArrayProps(c,a.globals.initialConfig,a);v=_.extend(w,v),v=_.extend(a.config,v),r.overrideResponsiveOptions(v)}else for(var R=0;R<h.length;R++)b<h[R].breakpoint&&(v=Y.extendArrayProps(c,h[R].options,a),v=_.extend(a.config,v),r.overrideResponsiveOptions(v))};if(o){var f=Y.extendArrayProps(c,o,a);f=_.extend(a.config,f),p(f=_.extend(f,o))}else p({})}}},{key:"overrideResponsiveOptions",value:function(o){var r=new _t(o).init({responsiveOverride:!0});this.w.config=r}}]),O}(),fe=function(){function O(o){l(this,O),this.ctx=o,this.colors=[],this.w=o.w;var r=this.w;this.isColorFn=!1,this.isHeatmapDistributed=r.config.chart.type==="treemap"&&r.config.plotOptions.treemap.distributed||r.config.chart.type==="heatmap"&&r.config.plotOptions.heatmap.distributed,this.isBarDistributed=r.config.plotOptions.bar.distributed&&(r.config.chart.type==="bar"||r.config.chart.type==="rangeBar")}return g(O,[{key:"init",value:function(){this.setDefaultColors()}},{key:"setDefaultColors",value:function(){var o,r=this,a=this.w,d=new _;if(a.globals.dom.elWrap.classList.add("apexcharts-theme-".concat(a.config.theme.mode)),a.config.colors===void 0||((o=a.config.colors)===null||o===void 0?void 0:o.length)===0?a.globals.colors=this.predefined():(a.globals.colors=a.config.colors,Array.isArray(a.config.colors)&&a.config.colors.length>0&&typeof a.config.colors[0]=="function"&&(a.globals.colors=a.config.series.map(function(T,F){var I=a.config.colors[F];return I||(I=a.config.colors[0]),typeof I=="function"?(r.isColorFn=!0,I({value:a.globals.axisCharts?a.globals.series[F][0]?a.globals.series[F][0]:0:a.globals.series[F],seriesIndex:F,dataPointIndex:F,w:a})):I}))),a.globals.seriesColors.map(function(T,F){T&&(a.globals.colors[F]=T)}),a.config.theme.monochrome.enabled){var h=[],c=a.globals.series.length;(this.isBarDistributed||this.isHeatmapDistributed)&&(c=a.globals.series[0].length*a.globals.series.length);for(var p=a.config.theme.monochrome.color,f=1/(c/a.config.theme.monochrome.shadeIntensity),v=a.config.theme.monochrome.shadeTo,y=0,b=0;b<c;b++){var w=void 0;v==="dark"?(w=d.shadeColor(-1*y,p),y+=f):(w=d.shadeColor(y,p),y+=f),h.push(w)}a.globals.colors=h.slice()}var R=a.globals.colors.slice();this.pushExtraColors(a.globals.colors),["fill","stroke"].forEach(function(T){a.config[T].colors===void 0?a.globals[T].colors=r.isColorFn?a.config.colors:R:a.globals[T].colors=a.config[T].colors.slice(),r.pushExtraColors(a.globals[T].colors)}),a.config.dataLabels.style.colors===void 0?a.globals.dataLabels.style.colors=R:a.globals.dataLabels.style.colors=a.config.dataLabels.style.colors.slice(),this.pushExtraColors(a.globals.dataLabels.style.colors,50),a.config.plotOptions.radar.polygons.fill.colors===void 0?a.globals.radarPolygons.fill.colors=[a.config.theme.mode==="dark"?"#424242":"none"]:a.globals.radarPolygons.fill.colors=a.config.plotOptions.radar.polygons.fill.colors.slice(),this.pushExtraColors(a.globals.radarPolygons.fill.colors,20),a.config.markers.colors===void 0?a.globals.markers.colors=R:a.globals.markers.colors=a.config.markers.colors.slice(),this.pushExtraColors(a.globals.markers.colors)}},{key:"pushExtraColors",value:function(o,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,d=this.w,h=r||d.globals.series.length;if(a===null&&(a=this.isBarDistributed||this.isHeatmapDistributed||d.config.chart.type==="heatmap"&&d.config.plotOptions.heatmap.colorScale.inverse),a&&d.globals.series.length&&(h=d.globals.series[d.globals.maxValsInArrayIndex].length*d.globals.series.length),o.length<h)for(var c=h-o.length,p=0;p<c;p++)o.push(o[p])}},{key:"updateThemeOptions",value:function(o){o.chart=o.chart||{},o.tooltip=o.tooltip||{};var r=o.theme.mode||"light",a=o.theme.palette?o.theme.palette:r==="dark"?"palette4":"palette1",d=o.chart.foreColor?o.chart.foreColor:r==="dark"?"#f6f7f8":"#373d3f";return o.tooltip.theme=r,o.chart.foreColor=d,o.theme.palette=a,o}},{key:"predefined",value:function(){switch(this.w.config.theme.palette){case"palette1":default:this.colors=["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"];break;case"palette2":this.colors=["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#FF9800"];break;case"palette3":this.colors=["#33b2df","#546E7A","#d4526e","#13d8aa","#A5978B"];break;case"palette4":this.colors=["#4ecdc4","#c7f464","#81D4FA","#fd6a6a","#546E7A"];break;case"palette5":this.colors=["#2b908f","#f9a3a4","#90ee7e","#fa4443","#69d2e7"];break;case"palette6":this.colors=["#449DD1","#F86624","#EA3546","#662E9B","#C5D86D"];break;case"palette7":this.colors=["#D7263D","#1B998B","#2E294E","#F46036","#E2C044"];break;case"palette8":this.colors=["#662E9B","#F86624","#F9C80E","#EA3546","#43BCCD"];break;case"palette9":this.colors=["#5C4742","#A5978B","#8D5B4C","#5A2A27","#C4BBAF"];break;case"palette10":this.colors=["#A300D6","#7D02EB","#5653FE","#2983FF","#00B1F2"]}return this.colors}}]),O}(),ye=function(){function O(o){l(this,O),this.ctx=o,this.w=o.w}return g(O,[{key:"draw",value:function(){this.drawTitleSubtitle("title"),this.drawTitleSubtitle("subtitle")}},{key:"drawTitleSubtitle",value:function(o){var r=this.w,a=o==="title"?r.config.title:r.config.subtitle,d=r.globals.svgWidth/2,h=a.offsetY,c="middle";if(a.align==="left"?(d=10,c="start"):a.align==="right"&&(d=r.globals.svgWidth-10,c="end"),d+=a.offsetX,h=h+parseInt(a.style.fontSize,10)+a.margin/2,a.text!==void 0){var p=new $(this.ctx).drawText({x:d,y:h,text:a.text,textAnchor:c,fontSize:a.style.fontSize,fontFamily:a.style.fontFamily,fontWeight:a.style.fontWeight,foreColor:a.style.color,opacity:1});p.node.setAttribute("class","apexcharts-".concat(o,"-text")),r.globals.dom.Paper.add(p)}}}]),O}(),zt=function(){function O(o){l(this,O),this.w=o.w,this.dCtx=o}return g(O,[{key:"getTitleSubtitleCoords",value:function(o){var r=this.w,a=0,d=0,h=o==="title"?r.config.title.floating:r.config.subtitle.floating,c=r.globals.dom.baseEl.querySelector(".apexcharts-".concat(o,"-text"));if(c!==null&&!h){var p=c.getBoundingClientRect();a=p.width,d=r.globals.axisCharts?p.height+5:p.height}return{width:a,height:d}}},{key:"getLegendsRect",value:function(){var o=this.w,r=o.globals.dom.elLegendWrap;o.config.legend.height||o.config.legend.position!=="top"&&o.config.legend.position!=="bottom"||(r.style.maxHeight=o.globals.svgHeight/2+"px");var a=Object.assign({},_.getBoundingClientRect(r));return r!==null&&!o.config.legend.floating&&o.config.legend.show?this.dCtx.lgRect={x:a.x,y:a.y,height:a.height,width:a.height===0?0:a.width}:this.dCtx.lgRect={x:0,y:0,height:0,width:0},o.config.legend.position!=="left"&&o.config.legend.position!=="right"||1.5*this.dCtx.lgRect.width>o.globals.svgWidth&&(this.dCtx.lgRect.width=o.globals.svgWidth/1.5),this.dCtx.lgRect}},{key:"getLargestStringFromMultiArr",value:function(o,r){var a=o;if(this.w.globals.isMultiLineX){var d=r.map(function(c,p){return Array.isArray(c)?c.length:1}),h=Math.max.apply(Math,U(d));a=r[d.indexOf(h)]}return a}}]),O}(),Ie=function(){function O(o){l(this,O),this.w=o.w,this.dCtx=o}return g(O,[{key:"getxAxisLabelsCoords",value:function(){var o,r=this.w,a=r.globals.labels.slice();if(r.config.xaxis.convertedCatToNumeric&&a.length===0&&(a=r.globals.categoryLabels),r.globals.timescaleLabels.length>0){var d=this.getxAxisTimeScaleLabelsCoords();o={width:d.width,height:d.height},r.globals.rotateXLabels=!1}else{this.dCtx.lgWidthForSideLegends=r.config.legend.position!=="left"&&r.config.legend.position!=="right"||r.config.legend.floating?0:this.dCtx.lgRect.width;var h=r.globals.xLabelFormatter,c=_.getLargestStringFromArr(a),p=this.dCtx.dimHelpers.getLargestStringFromMultiArr(c,a);r.globals.isBarHorizontal&&(p=c=r.globals.yAxisScale[0].result.reduce(function(T,F){return T.length>F.length?T:F},0));var f=new et(this.dCtx.ctx),v=c;c=f.xLabelFormat(h,c,v,{i:void 0,dateFormatter:new Ge(this.dCtx.ctx).formatDate,w:r}),p=f.xLabelFormat(h,p,v,{i:void 0,dateFormatter:new Ge(this.dCtx.ctx).formatDate,w:r}),(r.config.xaxis.convertedCatToNumeric&&c===void 0||String(c).trim()==="")&&(p=c="1");var y=new $(this.dCtx.ctx),b=y.getTextRects(c,r.config.xaxis.labels.style.fontSize),w=b;if(c!==p&&(w=y.getTextRects(p,r.config.xaxis.labels.style.fontSize)),(o={width:b.width>=w.width?b.width:w.width,height:b.height>=w.height?b.height:w.height}).width*a.length>r.globals.svgWidth-this.dCtx.lgWidthForSideLegends-this.dCtx.yAxisWidth-this.dCtx.gridPad.left-this.dCtx.gridPad.right&&r.config.xaxis.labels.rotate!==0||r.config.xaxis.labels.rotateAlways){if(!r.globals.isBarHorizontal){r.globals.rotateXLabels=!0;var R=function(T){return y.getTextRects(T,r.config.xaxis.labels.style.fontSize,r.config.xaxis.labels.style.fontFamily,"rotate(".concat(r.config.xaxis.labels.rotate," 0 0)"),!1)};b=R(c),c!==p&&(w=R(p)),o.height=(b.height>w.height?b.height:w.height)/1.5,o.width=b.width>w.width?b.width:w.width}}else r.globals.rotateXLabels=!1}return r.config.xaxis.labels.show||(o={width:0,height:0}),{width:o.width,height:o.height}}},{key:"getxAxisGroupLabelsCoords",value:function(){var o,r=this.w;if(!r.globals.hasXaxisGroups)return{width:0,height:0};var a,d=((o=r.config.xaxis.group.style)===null||o===void 0?void 0:o.fontSize)||r.config.xaxis.labels.style.fontSize,h=r.globals.groups.map(function(b){return b.title}),c=_.getLargestStringFromArr(h),p=this.dCtx.dimHelpers.getLargestStringFromMultiArr(c,h),f=new $(this.dCtx.ctx),v=f.getTextRects(c,d),y=v;return c!==p&&(y=f.getTextRects(p,d)),a={width:v.width>=y.width?v.width:y.width,height:v.height>=y.height?v.height:y.height},r.config.xaxis.labels.show||(a={width:0,height:0}),{width:a.width,height:a.height}}},{key:"getxAxisTitleCoords",value:function(){var o=this.w,r=0,a=0;if(o.config.xaxis.title.text!==void 0){var d=new $(this.dCtx.ctx).getTextRects(o.config.xaxis.title.text,o.config.xaxis.title.style.fontSize);r=d.width,a=d.height}return{width:r,height:a}}},{key:"getxAxisTimeScaleLabelsCoords",value:function(){var o,r=this.w;this.dCtx.timescaleLabels=r.globals.timescaleLabels.slice();var a=this.dCtx.timescaleLabels.map(function(h){return h.value}),d=a.reduce(function(h,c){return h===void 0?(console.error("You have possibly supplied invalid Date format. Please supply a valid JavaScript Date"),0):h.length>c.length?h:c},0);return 1.05*(o=new $(this.dCtx.ctx).getTextRects(d,r.config.xaxis.labels.style.fontSize)).width*a.length>r.globals.gridWidth&&r.config.xaxis.labels.rotate!==0&&(r.globals.overlappingXLabels=!0),o}},{key:"additionalPaddingXLabels",value:function(o){var r=this,a=this.w,d=a.globals,h=a.config,c=h.xaxis.type,p=o.width;d.skipLastTimelinelabel=!1,d.skipFirstTimelinelabel=!1;var f=a.config.yaxis[0].opposite&&a.globals.isBarHorizontal,v=function(y,b){h.yaxis.length>1&&function(w){return d.collapsedSeriesIndices.indexOf(w)!==-1}(b)||function(w){if(r.dCtx.timescaleLabels&&r.dCtx.timescaleLabels.length){var R=r.dCtx.timescaleLabels[0],T=r.dCtx.timescaleLabels[r.dCtx.timescaleLabels.length-1].position+p/1.75-r.dCtx.yAxisWidthRight,F=R.position-p/1.75+r.dCtx.yAxisWidthLeft,I=a.config.legend.position==="right"&&r.dCtx.lgRect.width>0?r.dCtx.lgRect.width:0;T>d.svgWidth-d.translateX-I&&(d.skipLastTimelinelabel=!0),F<-(w.show&&!w.floating||h.chart.type!=="bar"&&h.chart.type!=="candlestick"&&h.chart.type!=="rangeBar"&&h.chart.type!=="boxPlot"?10:p/1.75)&&(d.skipFirstTimelinelabel=!0)}else c==="datetime"?r.dCtx.gridPad.right<p&&!d.rotateXLabels&&(d.skipLastTimelinelabel=!0):c!=="datetime"&&r.dCtx.gridPad.right<p/2-r.dCtx.yAxisWidthRight&&!d.rotateXLabels&&!a.config.xaxis.labels.trim&&(a.config.xaxis.tickPlacement!=="between"||a.globals.isBarHorizontal)&&(r.dCtx.xPadRight=p/2+1)}(y)};h.yaxis.forEach(function(y,b){f?(r.dCtx.gridPad.left<p&&(r.dCtx.xPadLeft=p/2+1),r.dCtx.xPadRight=p/2+1):v(y,b)})}}]),O}(),ue=function(){function O(o){l(this,O),this.w=o.w,this.dCtx=o}return g(O,[{key:"getyAxisLabelsCoords",value:function(){var o=this,r=this.w,a=[],d=10,h=new Mt(this.dCtx.ctx);return r.config.yaxis.map(function(c,p){var f={seriesIndex:p,dataPointIndex:-1,w:r},v=r.globals.yAxisScale[p],y=0;if(!h.isYAxisHidden(p)&&c.labels.show&&c.labels.minWidth!==void 0&&(y=c.labels.minWidth),!h.isYAxisHidden(p)&&c.labels.show&&v.result.length){var b=r.globals.yLabelFormatters[p],w=v.niceMin===Number.MIN_VALUE?0:v.niceMin,R=v.result.reduce(function(x,P){var k,V;return((k=String(b(x,f)))===null||k===void 0?void 0:k.length)>((V=String(b(P,f)))===null||V===void 0?void 0:V.length)?x:P},w),T=R=b(R,f);if(R!==void 0&&R.length!==0||(R=v.niceMax),r.globals.isBarHorizontal){d=0;var F=r.globals.labels.slice();R=_.getLargestStringFromArr(F),R=b(R,{seriesIndex:p,dataPointIndex:-1,w:r}),T=o.dCtx.dimHelpers.getLargestStringFromMultiArr(R,F)}var I=new $(o.dCtx.ctx),G="rotate(".concat(c.labels.rotate," 0 0)"),H=I.getTextRects(R,c.labels.style.fontSize,c.labels.style.fontFamily,G,!1),m=H;R!==T&&(m=I.getTextRects(T,c.labels.style.fontSize,c.labels.style.fontFamily,G,!1)),a.push({width:(y>m.width||y>H.width?y:m.width>H.width?m.width:H.width)+d,height:m.height>H.height?m.height:H.height})}else a.push({width:0,height:0})}),a}},{key:"getyAxisTitleCoords",value:function(){var o=this,r=this.w,a=[];return r.config.yaxis.map(function(d,h){if(d.show&&d.title.text!==void 0){var c=new $(o.dCtx.ctx),p="rotate(".concat(d.title.rotate," 0 0)"),f=c.getTextRects(d.title.text,d.title.style.fontSize,d.title.style.fontFamily,p,!1);a.push({width:f.width,height:f.height})}else a.push({width:0,height:0})}),a}},{key:"getTotalYAxisWidth",value:function(){var o=this.w,r=0,a=0,d=0,h=o.globals.yAxisScale.length>1?10:0,c=new Mt(this.dCtx.ctx),p=function(f,v){var y=o.config.yaxis[v].floating,b=0;f.width>0&&!y?(b=f.width+h,function(w){return o.globals.ignoreYAxisIndexes.indexOf(w)>-1}(v)&&(b=b-f.width-h)):b=y||c.isYAxisHidden(v)?0:5,o.config.yaxis[v].opposite?d+=b:a+=b,r+=b};return o.globals.yLabelsCoords.map(function(f,v){p(f,v)}),o.globals.yTitleCoords.map(function(f,v){p(f,v)}),o.globals.isBarHorizontal&&!o.config.yaxis[0].floating&&(r=o.globals.yLabelsCoords[0].width+o.globals.yTitleCoords[0].width+15),this.dCtx.yAxisWidthLeft=a,this.dCtx.yAxisWidthRight=d,r}}]),O}(),Me=function(){function O(o){l(this,O),this.w=o.w,this.dCtx=o}return g(O,[{key:"gridPadForColumnsInNumericAxis",value:function(o){var r=this.w;if(r.globals.noData||r.globals.allSeriesCollapsed)return 0;var a=function(y){return y==="bar"||y==="rangeBar"||y==="candlestick"||y==="boxPlot"},d=r.config.chart.type,h=0,c=a(d)?r.config.series.length:1;if(r.globals.comboBarCount>0&&(c=r.globals.comboBarCount),r.globals.collapsedSeries.forEach(function(y){a(y.type)&&(c-=1)}),r.config.chart.stacked&&(c=1),(a(d)||r.globals.comboBarCount>0)&&r.globals.isXNumeric&&!r.globals.isBarHorizontal&&c>0){var p,f,v=Math.abs(r.globals.initialMaxX-r.globals.initialMinX);v<=3&&(v=r.globals.dataPoints),p=v/o,r.globals.minXDiff&&r.globals.minXDiff/p>0&&(f=r.globals.minXDiff/p),f>o/2&&(f/=2),(h=f/c*parseInt(r.config.plotOptions.bar.columnWidth,10)/100)<1&&(h=1),h=h/(c>1?1:1.5)+5,r.globals.barPadForNumericAxis=h}return h}},{key:"gridPadFortitleSubtitle",value:function(){var o=this,r=this.w,a=r.globals,d=this.dCtx.isSparkline||!r.globals.axisCharts?0:10;["title","subtitle"].forEach(function(p){r.config[p].text!==void 0?d+=r.config[p].margin:d+=o.dCtx.isSparkline||!r.globals.axisCharts?0:5}),!r.config.legend.show||r.config.legend.position!=="bottom"||r.config.legend.floating||r.globals.axisCharts||(d+=10);var h=this.dCtx.dimHelpers.getTitleSubtitleCoords("title"),c=this.dCtx.dimHelpers.getTitleSubtitleCoords("subtitle");a.gridHeight=a.gridHeight-h.height-c.height-d,a.translateY=a.translateY+h.height+c.height+d}},{key:"setGridXPosForDualYAxis",value:function(o,r){var a=this.w,d=new Mt(this.dCtx.ctx);a.config.yaxis.map(function(h,c){a.globals.ignoreYAxisIndexes.indexOf(c)!==-1||h.floating||d.isYAxisHidden(c)||(h.opposite&&(a.globals.translateX=a.globals.translateX-(r[c].width+o[c].width)-parseInt(a.config.yaxis[c].labels.style.fontSize,10)/1.2-12),a.globals.translateX<2&&(a.globals.translateX=2))})}}]),O}(),bt=function(){function O(o){l(this,O),this.ctx=o,this.w=o.w,this.lgRect={},this.yAxisWidth=0,this.yAxisWidthLeft=0,this.yAxisWidthRight=0,this.xAxisHeight=0,this.isSparkline=this.w.config.chart.sparkline.enabled,this.dimHelpers=new zt(this),this.dimYAxis=new ue(this),this.dimXAxis=new Ie(this),this.dimGrid=new Me(this),this.lgWidthForSideLegends=0,this.gridPad=this.w.config.grid.padding,this.xPadRight=0,this.xPadLeft=0}return g(O,[{key:"plotCoords",value:function(){var o=this,r=this.w,a=r.globals;this.lgRect=this.dimHelpers.getLegendsRect(),this.isSparkline&&((r.config.markers.discrete.length>0||r.config.markers.size>0)&&Object.entries(this.gridPad).forEach(function(h){var c=z(h,2),p=c[0],f=c[1];o.gridPad[p]=Math.max(f,o.w.globals.markers.largestSize/1.5)}),this.gridPad.top=Math.max(r.config.stroke.width/2,this.gridPad.top),this.gridPad.bottom=Math.max(r.config.stroke.width/2,this.gridPad.bottom)),a.axisCharts?this.setDimensionsForAxisCharts():this.setDimensionsForNonAxisCharts(),this.dimGrid.gridPadFortitleSubtitle(),a.gridHeight=a.gridHeight-this.gridPad.top-this.gridPad.bottom,a.gridWidth=a.gridWidth-this.gridPad.left-this.gridPad.right-this.xPadRight-this.xPadLeft;var d=this.dimGrid.gridPadForColumnsInNumericAxis(a.gridWidth);a.gridWidth=a.gridWidth-2*d,a.translateX=a.translateX+this.gridPad.left+this.xPadLeft+(d>0?d+4:0),a.translateY=a.translateY+this.gridPad.top}},{key:"setDimensionsForAxisCharts",value:function(){var o=this,r=this.w,a=r.globals,d=this.dimYAxis.getyAxisLabelsCoords(),h=this.dimYAxis.getyAxisTitleCoords();r.globals.yLabelsCoords=[],r.globals.yTitleCoords=[],r.config.yaxis.map(function(R,T){r.globals.yLabelsCoords.push({width:d[T].width,index:T}),r.globals.yTitleCoords.push({width:h[T].width,index:T})}),this.yAxisWidth=this.dimYAxis.getTotalYAxisWidth();var c=this.dimXAxis.getxAxisLabelsCoords(),p=this.dimXAxis.getxAxisGroupLabelsCoords(),f=this.dimXAxis.getxAxisTitleCoords();this.conditionalChecksForAxisCoords(c,f,p),a.translateXAxisY=r.globals.rotateXLabels?this.xAxisHeight/8:-4,a.translateXAxisX=r.globals.rotateXLabels&&r.globals.isXNumeric&&r.config.xaxis.labels.rotate<=-45?-this.xAxisWidth/4:0,r.globals.isBarHorizontal&&(a.rotateXLabels=!1,a.translateXAxisY=parseInt(r.config.xaxis.labels.style.fontSize,10)/1.5*-1),a.translateXAxisY=a.translateXAxisY+r.config.xaxis.labels.offsetY,a.translateXAxisX=a.translateXAxisX+r.config.xaxis.labels.offsetX;var v=this.yAxisWidth,y=this.xAxisHeight;a.xAxisLabelsHeight=this.xAxisHeight-f.height,a.xAxisGroupLabelsHeight=a.xAxisLabelsHeight-c.height,a.xAxisLabelsWidth=this.xAxisWidth,a.xAxisHeight=this.xAxisHeight;var b=10;(r.config.chart.type==="radar"||this.isSparkline)&&(v=0,y=a.goldenPadding),this.isSparkline&&(this.lgRect={height:0,width:0}),(this.isSparkline||r.config.chart.type==="treemap")&&(v=0,y=0,b=0),this.isSparkline||this.dimXAxis.additionalPaddingXLabels(c);var w=function(){a.translateX=v,a.gridHeight=a.svgHeight-o.lgRect.height-y-(o.isSparkline||r.config.chart.type==="treemap"?0:r.globals.rotateXLabels?10:15),a.gridWidth=a.svgWidth-v};switch(r.config.xaxis.position==="top"&&(b=a.xAxisHeight-r.config.xaxis.axisTicks.height-5),r.config.legend.position){case"bottom":a.translateY=b,w();break;case"top":a.translateY=this.lgRect.height+b,w();break;case"left":a.translateY=b,a.translateX=this.lgRect.width+v,a.gridHeight=a.svgHeight-y-12,a.gridWidth=a.svgWidth-this.lgRect.width-v;break;case"right":a.translateY=b,a.translateX=v,a.gridHeight=a.svgHeight-y-12,a.gridWidth=a.svgWidth-this.lgRect.width-v-5;break;default:throw new Error("Legend position not supported")}this.dimGrid.setGridXPosForDualYAxis(h,d),new qe(this.ctx).setYAxisXPosition(d,h)}},{key:"setDimensionsForNonAxisCharts",value:function(){var o=this.w,r=o.globals,a=o.config,d=0;o.config.legend.show&&!o.config.legend.floating&&(d=20);var h=a.chart.type==="pie"||a.chart.type==="polarArea"||a.chart.type==="donut"?"pie":"radialBar",c=a.plotOptions[h].offsetY,p=a.plotOptions[h].offsetX;if(!a.legend.show||a.legend.floating)return r.gridHeight=r.svgHeight-a.grid.padding.left+a.grid.padding.right,r.gridWidth=r.gridHeight,r.translateY=c,void(r.translateX=p+(r.svgWidth-r.gridWidth)/2);switch(a.legend.position){case"bottom":r.gridHeight=r.svgHeight-this.lgRect.height-r.goldenPadding,r.gridWidth=r.svgWidth,r.translateY=c-10,r.translateX=p+(r.svgWidth-r.gridWidth)/2;break;case"top":r.gridHeight=r.svgHeight-this.lgRect.height-r.goldenPadding,r.gridWidth=r.svgWidth,r.translateY=this.lgRect.height+c+10,r.translateX=p+(r.svgWidth-r.gridWidth)/2;break;case"left":r.gridWidth=r.svgWidth-this.lgRect.width-d,r.gridHeight=a.chart.height!=="auto"?r.svgHeight:r.gridWidth,r.translateY=c,r.translateX=p+this.lgRect.width+d;break;case"right":r.gridWidth=r.svgWidth-this.lgRect.width-d-5,r.gridHeight=a.chart.height!=="auto"?r.svgHeight:r.gridWidth,r.translateY=c,r.translateX=p+10;break;default:throw new Error("Legend position not supported")}}},{key:"conditionalChecksForAxisCoords",value:function(o,r,a){var d=this.w,h=d.globals.hasXaxisGroups?2:1,c=a.height+o.height+r.height,p=d.globals.isMultiLineX?1.2:d.globals.LINE_HEIGHT_RATIO,f=d.globals.rotateXLabels?22:10,v=d.globals.rotateXLabels&&d.config.legend.position==="bottom"?10:0;this.xAxisHeight=c*p+h*f+v,this.xAxisWidth=o.width,this.xAxisHeight-r.height>d.config.xaxis.labels.maxHeight&&(this.xAxisHeight=d.config.xaxis.labels.maxHeight),d.config.xaxis.labels.minHeight&&this.xAxisHeight<d.config.xaxis.labels.minHeight&&(this.xAxisHeight=d.config.xaxis.labels.minHeight),d.config.xaxis.floating&&(this.xAxisHeight=0);var y=0,b=0;d.config.yaxis.forEach(function(w){y+=w.labels.minWidth,b+=w.labels.maxWidth}),this.yAxisWidth<y&&(this.yAxisWidth=y),this.yAxisWidth>b&&(this.yAxisWidth=b)}}]),O}(),at=function(){function O(o){l(this,O),this.w=o.w,this.lgCtx=o}return g(O,[{key:"getLegendStyles",value:function(){var o,r,a,d=document.createElement("style");d.setAttribute("type","text/css");var h=((o=this.lgCtx.ctx)===null||o===void 0||(r=o.opts)===null||r===void 0||(a=r.chart)===null||a===void 0?void 0:a.nonce)||this.w.config.chart.nonce;h&&d.setAttribute("nonce",h);var c=document.createTextNode(`
      .apexcharts-legend {
        display: flex;
        overflow: auto;
        padding: 0 10px;
      }
      .apexcharts-legend.apx-legend-position-bottom, .apexcharts-legend.apx-legend-position-top {
        flex-wrap: wrap
      }
      .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {
        flex-direction: column;
        bottom: 0;
      }
      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-left, .apexcharts-legend.apx-legend-position-top.apexcharts-align-left, .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {
        justify-content: flex-start;
      }
      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-center, .apexcharts-legend.apx-legend-position-top.apexcharts-align-center {
        justify-content: center;
      }
      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-right, .apexcharts-legend.apx-legend-position-top.apexcharts-align-right {
        justify-content: flex-end;
      }
      .apexcharts-legend-series {
        cursor: pointer;
        line-height: normal;
      }
      .apexcharts-legend.apx-legend-position-bottom .apexcharts-legend-series, .apexcharts-legend.apx-legend-position-top .apexcharts-legend-series{
        display: flex;
        align-items: center;
      }
      .apexcharts-legend-text {
        position: relative;
        font-size: 14px;
      }
      .apexcharts-legend-text *, .apexcharts-legend-marker * {
        pointer-events: none;
      }
      .apexcharts-legend-marker {
        position: relative;
        display: inline-block;
        cursor: pointer;
        margin-right: 3px;
        border-style: solid;
      }

      .apexcharts-legend.apexcharts-align-right .apexcharts-legend-series, .apexcharts-legend.apexcharts-align-left .apexcharts-legend-series{
        display: inline-block;
      }
      .apexcharts-legend-series.apexcharts-no-click {
        cursor: auto;
      }
      .apexcharts-legend .apexcharts-hidden-zero-series, .apexcharts-legend .apexcharts-hidden-null-series {
        display: none !important;
      }
      .apexcharts-inactive-legend {
        opacity: 0.45;
      }`);return d.appendChild(c),d}},{key:"getLegendBBox",value:function(){var o=this.w.globals.dom.baseEl.querySelector(".apexcharts-legend").getBoundingClientRect(),r=o.width;return{clwh:o.height,clww:r}}},{key:"appendToForeignObject",value:function(){this.w.globals.dom.elLegendForeign.appendChild(this.getLegendStyles())}},{key:"toggleDataSeries",value:function(o,r){var a=this,d=this.w;if(d.globals.axisCharts||d.config.chart.type==="radialBar"){d.globals.resized=!0;var h=null,c=null;d.globals.risingSeries=[],d.globals.axisCharts?(h=d.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(o,"']")),c=parseInt(h.getAttribute("data:realIndex"),10)):(h=d.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(o+1,"']")),c=parseInt(h.getAttribute("rel"),10)-1),r?[{cs:d.globals.collapsedSeries,csi:d.globals.collapsedSeriesIndices},{cs:d.globals.ancillaryCollapsedSeries,csi:d.globals.ancillaryCollapsedSeriesIndices}].forEach(function(y){a.riseCollapsedSeries(y.cs,y.csi,c)}):this.hideSeries({seriesEl:h,realIndex:c})}else{var p=d.globals.dom.Paper.select(" .apexcharts-series[rel='".concat(o+1,"'] path")),f=d.config.chart.type;if(f==="pie"||f==="polarArea"||f==="donut"){var v=d.config.plotOptions.pie.donut.labels;new $(this.lgCtx.ctx).pathMouseDown(p.members[0],null),this.lgCtx.ctx.pie.printDataLabelsInner(p.members[0].node,v)}p.fire("click")}}},{key:"hideSeries",value:function(o){var r=o.seriesEl,a=o.realIndex,d=this.w,h=_.clone(d.config.series);if(d.globals.axisCharts){var c=!1;if(d.config.yaxis[a]&&d.config.yaxis[a].show&&d.config.yaxis[a].showAlways&&(c=!0,d.globals.ancillaryCollapsedSeriesIndices.indexOf(a)<0&&(d.globals.ancillaryCollapsedSeries.push({index:a,data:h[a].data.slice(),type:r.parentNode.className.baseVal.split("-")[1]}),d.globals.ancillaryCollapsedSeriesIndices.push(a))),!c){d.globals.collapsedSeries.push({index:a,data:h[a].data.slice(),type:r.parentNode.className.baseVal.split("-")[1]}),d.globals.collapsedSeriesIndices.push(a);var p=d.globals.risingSeries.indexOf(a);d.globals.risingSeries.splice(p,1)}}else d.globals.collapsedSeries.push({index:a,data:h[a]}),d.globals.collapsedSeriesIndices.push(a);for(var f=r.childNodes,v=0;v<f.length;v++)f[v].classList.contains("apexcharts-series-markers-wrap")&&(f[v].classList.contains("apexcharts-hide")?f[v].classList.remove("apexcharts-hide"):f[v].classList.add("apexcharts-hide"));d.globals.allSeriesCollapsed=d.globals.collapsedSeries.length===d.config.series.length,h=this._getSeriesBasedOnCollapsedState(h),this.lgCtx.ctx.updateHelpers._updateSeries(h,d.config.chart.animations.dynamicAnimation.enabled)}},{key:"riseCollapsedSeries",value:function(o,r,a){var d=this.w,h=_.clone(d.config.series);if(o.length>0){for(var c=0;c<o.length;c++)o[c].index===a&&(d.globals.axisCharts?(h[a].data=o[c].data.slice(),o.splice(c,1),r.splice(c,1),d.globals.risingSeries.push(a)):(h[a]=o[c].data,o.splice(c,1),r.splice(c,1),d.globals.risingSeries.push(a)));h=this._getSeriesBasedOnCollapsedState(h),this.lgCtx.ctx.updateHelpers._updateSeries(h,d.config.chart.animations.dynamicAnimation.enabled)}}},{key:"_getSeriesBasedOnCollapsedState",value:function(o){var r=this.w;return r.globals.axisCharts?o.forEach(function(a,d){r.globals.collapsedSeriesIndices.indexOf(d)>-1&&(o[d].data=[])}):o.forEach(function(a,d){r.globals.collapsedSeriesIndices.indexOf(d)>-1&&(o[d]=0)}),o}}]),O}(),Re=function(){function O(o){l(this,O),this.ctx=o,this.w=o.w,this.onLegendClick=this.onLegendClick.bind(this),this.onLegendHovered=this.onLegendHovered.bind(this),this.isBarsDistributed=this.w.config.chart.type==="bar"&&this.w.config.plotOptions.bar.distributed&&this.w.config.series.length===1,this.legendHelpers=new at(this)}return g(O,[{key:"init",value:function(){var o=this.w,r=o.globals,a=o.config;if((a.legend.showForSingleSeries&&r.series.length===1||this.isBarsDistributed||r.series.length>1||!r.axisCharts)&&a.legend.show){for(;r.dom.elLegendWrap.firstChild;)r.dom.elLegendWrap.removeChild(r.dom.elLegendWrap.firstChild);this.drawLegends(),_.isIE11()?document.getElementsByTagName("head")[0].appendChild(this.legendHelpers.getLegendStyles()):this.legendHelpers.appendToForeignObject(),a.legend.position==="bottom"||a.legend.position==="top"?this.legendAlignHorizontal():a.legend.position!=="right"&&a.legend.position!=="left"||this.legendAlignVertical()}}},{key:"drawLegends",value:function(){var o=this,r=this.w,a=r.config.legend.fontFamily,d=r.globals.seriesNames,h=r.globals.colors.slice();if(r.config.chart.type==="heatmap"){var c=r.config.plotOptions.heatmap.colorScale.ranges;d=c.map(function(ae){return ae.name?ae.name:ae.from+" - "+ae.to}),h=c.map(function(ae){return ae.color})}else this.isBarsDistributed&&(d=r.globals.labels.slice());r.config.legend.customLegendItems.length&&(d=r.config.legend.customLegendItems);for(var p=r.globals.legendFormatter,f=r.config.legend.inverseOrder,v=f?d.length-1:0;f?v>=0:v<=d.length-1;f?v--:v++){var y,b=p(d[v],{seriesIndex:v,w:r}),w=!1,R=!1;if(r.globals.collapsedSeries.length>0)for(var T=0;T<r.globals.collapsedSeries.length;T++)r.globals.collapsedSeries[T].index===v&&(w=!0);if(r.globals.ancillaryCollapsedSeriesIndices.length>0)for(var F=0;F<r.globals.ancillaryCollapsedSeriesIndices.length;F++)r.globals.ancillaryCollapsedSeriesIndices[F]===v&&(R=!0);var I=document.createElement("span");I.classList.add("apexcharts-legend-marker");var G=r.config.legend.markers.offsetX,H=r.config.legend.markers.offsetY,m=r.config.legend.markers.height,x=r.config.legend.markers.width,P=r.config.legend.markers.strokeWidth,k=r.config.legend.markers.strokeColor,V=r.config.legend.markers.radius,B=I.style;B.background=h[v],B.color=h[v],B.setProperty("background",h[v],"important"),r.config.legend.markers.fillColors&&r.config.legend.markers.fillColors[v]&&(B.background=r.config.legend.markers.fillColors[v]),r.globals.seriesColors[v]!==void 0&&(B.background=r.globals.seriesColors[v],B.color=r.globals.seriesColors[v]),B.height=Array.isArray(m)?parseFloat(m[v])+"px":parseFloat(m)+"px",B.width=Array.isArray(x)?parseFloat(x[v])+"px":parseFloat(x)+"px",B.left=(Array.isArray(G)?parseFloat(G[v]):parseFloat(G))+"px",B.top=(Array.isArray(H)?parseFloat(H[v]):parseFloat(H))+"px",B.borderWidth=Array.isArray(P)?P[v]:P,B.borderColor=Array.isArray(k)?k[v]:k,B.borderRadius=Array.isArray(V)?parseFloat(V[v])+"px":parseFloat(V)+"px",r.config.legend.markers.customHTML&&(Array.isArray(r.config.legend.markers.customHTML)?r.config.legend.markers.customHTML[v]&&(I.innerHTML=r.config.legend.markers.customHTML[v]()):I.innerHTML=r.config.legend.markers.customHTML()),$.setAttrs(I,{rel:v+1,"data:collapsed":w||R}),(w||R)&&I.classList.add("apexcharts-inactive-legend");var j=document.createElement("div"),K=document.createElement("span");K.classList.add("apexcharts-legend-text"),K.innerHTML=Array.isArray(b)?b.join(" "):b;var ie=r.config.legend.labels.useSeriesColors?r.globals.colors[v]:Array.isArray(r.config.legend.labels.colors)?(y=r.config.legend.labels.colors)===null||y===void 0?void 0:y[v]:r.config.legend.labels.colors;ie||(ie=r.config.chart.foreColor),K.style.color=ie,K.style.fontSize=parseFloat(r.config.legend.fontSize)+"px",K.style.fontWeight=r.config.legend.fontWeight,K.style.fontFamily=a||r.config.chart.fontFamily,$.setAttrs(K,{rel:v+1,i:v,"data:default-text":encodeURIComponent(b),"data:collapsed":w||R}),j.appendChild(I),j.appendChild(K);var he=new Y(this.ctx);r.config.legend.showForZeroSeries||he.getSeriesTotalByIndex(v)===0&&he.seriesHaveSameValues(v)&&!he.isSeriesNull(v)&&r.globals.collapsedSeriesIndices.indexOf(v)===-1&&r.globals.ancillaryCollapsedSeriesIndices.indexOf(v)===-1&&j.classList.add("apexcharts-hidden-zero-series"),r.config.legend.showForNullSeries||he.isSeriesNull(v)&&r.globals.collapsedSeriesIndices.indexOf(v)===-1&&r.globals.ancillaryCollapsedSeriesIndices.indexOf(v)===-1&&j.classList.add("apexcharts-hidden-null-series"),r.globals.dom.elLegendWrap.appendChild(j),r.globals.dom.elLegendWrap.classList.add("apexcharts-align-".concat(r.config.legend.horizontalAlign)),r.globals.dom.elLegendWrap.classList.add("apx-legend-position-"+r.config.legend.position),j.classList.add("apexcharts-legend-series"),j.style.margin="".concat(r.config.legend.itemMargin.vertical,"px ").concat(r.config.legend.itemMargin.horizontal,"px"),r.globals.dom.elLegendWrap.style.width=r.config.legend.width?r.config.legend.width+"px":"",r.globals.dom.elLegendWrap.style.height=r.config.legend.height?r.config.legend.height+"px":"",$.setAttrs(j,{rel:v+1,seriesName:_.escapeString(d[v]),"data:collapsed":w||R}),(w||R)&&j.classList.add("apexcharts-inactive-legend"),r.config.legend.onItemClick.toggleDataSeries||j.classList.add("apexcharts-no-click")}r.globals.dom.elWrap.addEventListener("click",o.onLegendClick,!0),r.config.legend.onItemHover.highlightDataSeries&&r.config.legend.customLegendItems.length===0&&(r.globals.dom.elWrap.addEventListener("mousemove",o.onLegendHovered,!0),r.globals.dom.elWrap.addEventListener("mouseout",o.onLegendHovered,!0))}},{key:"setLegendWrapXY",value:function(o,r){var a=this.w,d=a.globals.dom.elLegendWrap,h=d.getBoundingClientRect(),c=0,p=0;if(a.config.legend.position==="bottom")p+=a.globals.svgHeight-h.height/2;else if(a.config.legend.position==="top"){var f=new bt(this.ctx),v=f.dimHelpers.getTitleSubtitleCoords("title").height,y=f.dimHelpers.getTitleSubtitleCoords("subtitle").height;p=p+(v>0?v-10:0)+(y>0?y-10:0)}d.style.position="absolute",c=c+o+a.config.legend.offsetX,p=p+r+a.config.legend.offsetY,d.style.left=c+"px",d.style.top=p+"px",a.config.legend.position==="bottom"?(d.style.top="auto",d.style.bottom=5-a.config.legend.offsetY+"px"):a.config.legend.position==="right"&&(d.style.left="auto",d.style.right=25+a.config.legend.offsetX+"px"),["width","height"].forEach(function(b){d.style[b]&&(d.style[b]=parseInt(a.config.legend[b],10)+"px")})}},{key:"legendAlignHorizontal",value:function(){var o=this.w;o.globals.dom.elLegendWrap.style.right=0;var r=this.legendHelpers.getLegendBBox(),a=new bt(this.ctx),d=a.dimHelpers.getTitleSubtitleCoords("title"),h=a.dimHelpers.getTitleSubtitleCoords("subtitle"),c=0;o.config.legend.position==="bottom"?c=-r.clwh/1.8:o.config.legend.position==="top"&&(c=d.height+h.height+o.config.title.margin+o.config.subtitle.margin-10),this.setLegendWrapXY(20,c)}},{key:"legendAlignVertical",value:function(){var o=this.w,r=this.legendHelpers.getLegendBBox(),a=0;o.config.legend.position==="left"&&(a=20),o.config.legend.position==="right"&&(a=o.globals.svgWidth-r.clww-10),this.setLegendWrapXY(a,20)}},{key:"onLegendHovered",value:function(o){var r=this.w,a=o.target.classList.contains("apexcharts-legend-series")||o.target.classList.contains("apexcharts-legend-text")||o.target.classList.contains("apexcharts-legend-marker");if(r.config.chart.type==="heatmap"||this.isBarsDistributed){if(a){var d=parseInt(o.target.getAttribute("rel"),10)-1;this.ctx.events.fireEvent("legendHover",[this.ctx,d,this.w]),new xt(this.ctx).highlightRangeInSeries(o,o.target)}}else!o.target.classList.contains("apexcharts-inactive-legend")&&a&&new xt(this.ctx).toggleSeriesOnHover(o,o.target)}},{key:"onLegendClick",value:function(o){var r=this.w;if(!r.config.legend.customLegendItems.length&&(o.target.classList.contains("apexcharts-legend-series")||o.target.classList.contains("apexcharts-legend-text")||o.target.classList.contains("apexcharts-legend-marker"))){var a=parseInt(o.target.getAttribute("rel"),10)-1,d=o.target.getAttribute("data:collapsed")==="true",h=this.w.config.chart.events.legendClick;typeof h=="function"&&h(this.ctx,a,this.w),this.ctx.events.fireEvent("legendClick",[this.ctx,a,this.w]);var c=this.w.config.legend.markers.onClick;typeof c=="function"&&o.target.classList.contains("apexcharts-legend-marker")&&(c(this.ctx,a,this.w),this.ctx.events.fireEvent("legendMarkerClick",[this.ctx,a,this.w])),r.config.chart.type!=="treemap"&&r.config.chart.type!=="heatmap"&&!this.isBarsDistributed&&r.config.legend.onItemClick.toggleDataSeries&&this.legendHelpers.toggleDataSeries(a,d)}}}]),O}(),gt=function(){function O(o){l(this,O),this.ctx=o,this.w=o.w;var r=this.w;this.ev=this.w.config.chart.events,this.selectedClass="apexcharts-selected",this.localeValues=this.w.globals.locale.toolbar,this.minX=r.globals.minX,this.maxX=r.globals.maxX}return g(O,[{key:"createToolbar",value:function(){var o=this,r=this.w,a=function(){return document.createElement("div")},d=a();if(d.setAttribute("class","apexcharts-toolbar"),d.style.top=r.config.chart.toolbar.offsetY+"px",d.style.right=3-r.config.chart.toolbar.offsetX+"px",r.globals.dom.elWrap.appendChild(d),this.elZoom=a(),this.elZoomIn=a(),this.elZoomOut=a(),this.elPan=a(),this.elSelection=a(),this.elZoomReset=a(),this.elMenuIcon=a(),this.elMenu=a(),this.elCustomIcons=[],this.t=r.config.chart.toolbar.tools,Array.isArray(this.t.customIcons))for(var h=0;h<this.t.customIcons.length;h++)this.elCustomIcons.push(a());var c=[],p=function(b,w,R){var T=b.toLowerCase();o.t[T]&&r.config.chart.zoom.enabled&&c.push({el:w,icon:typeof o.t[T]=="string"?o.t[T]:R,title:o.localeValues[b],class:"apexcharts-".concat(T,"-icon")})};p("zoomIn",this.elZoomIn,`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
</svg>
`),p("zoomOut",this.elZoomOut,`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
</svg>
`);var f=function(b){o.t[b]&&r.config.chart[b].enabled&&c.push({el:b==="zoom"?o.elZoom:o.elSelection,icon:typeof o.t[b]=="string"?o.t[b]:b==="zoom"?`<svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">
    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
    <path d="M0 0h24v24H0V0z" fill="none"/>
    <path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/>
</svg>`:`<svg fill="#6E8192" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2z"/>
</svg>`,title:o.localeValues[b==="zoom"?"selectionZoom":"selection"],class:r.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-".concat(b,"-icon")})};f("zoom"),f("selection"),this.t.pan&&r.config.chart.zoom.enabled&&c.push({el:this.elPan,icon:typeof this.t.pan=="string"?this.t.pan:`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" height="24" viewBox="0 0 24 24" width="24">
    <defs>
        <path d="M0 0h24v24H0z" id="a"/>
    </defs>
    <clipPath id="b">
        <use overflow="visible" xlink:href="#a"/>
    </clipPath>
    <path clip-path="url(#b)" d="M23 5.5V20c0 2.2-1.8 4-4 4h-7.3c-1.08 0-2.1-.43-2.85-1.19L1 14.83s1.26-1.23 1.3-1.25c.22-.19.49-.29.79-.29.22 0 .42.06.6.16.04.01 4.31 2.46 4.31 2.46V4c0-.83.67-1.5 1.5-1.5S11 3.17 11 4v7h1V1.5c0-.83.67-1.5 1.5-1.5S15 .67 15 1.5V11h1V2.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V11h1V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5z"/>
</svg>`,title:this.localeValues.pan,class:r.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-pan-icon"}),p("reset",this.elZoomReset,`<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>`),this.t.download&&c.push({el:this.elMenuIcon,icon:typeof this.t.download=="string"?this.t.download:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>',title:this.localeValues.menu,class:"apexcharts-menu-icon"});for(var v=0;v<this.elCustomIcons.length;v++)c.push({el:this.elCustomIcons[v],icon:this.t.customIcons[v].icon,title:this.t.customIcons[v].title,index:this.t.customIcons[v].index,class:"apexcharts-toolbar-custom-icon "+this.t.customIcons[v].class});c.forEach(function(b,w){b.index&&_.moveIndexInArray(c,w,b.index)});for(var y=0;y<c.length;y++)$.setAttrs(c[y].el,{class:c[y].class,title:c[y].title}),c[y].el.innerHTML=c[y].icon,d.appendChild(c[y].el);this._createHamburgerMenu(d),r.globals.zoomEnabled?this.elZoom.classList.add(this.selectedClass):r.globals.panEnabled?this.elPan.classList.add(this.selectedClass):r.globals.selectionEnabled&&this.elSelection.classList.add(this.selectedClass),this.addToolbarEventListeners()}},{key:"_createHamburgerMenu",value:function(o){this.elMenuItems=[],o.appendChild(this.elMenu),$.setAttrs(this.elMenu,{class:"apexcharts-menu"});for(var r=[{name:"exportSVG",title:this.localeValues.exportToSVG},{name:"exportPNG",title:this.localeValues.exportToPNG},{name:"exportCSV",title:this.localeValues.exportToCSV}],a=0;a<r.length;a++)this.elMenuItems.push(document.createElement("div")),this.elMenuItems[a].innerHTML=r[a].title,$.setAttrs(this.elMenuItems[a],{class:"apexcharts-menu-item ".concat(r[a].name),title:r[a].title}),this.elMenu.appendChild(this.elMenuItems[a])}},{key:"addToolbarEventListeners",value:function(){var o=this;this.elZoomReset.addEventListener("click",this.handleZoomReset.bind(this)),this.elSelection.addEventListener("click",this.toggleZoomSelection.bind(this,"selection")),this.elZoom.addEventListener("click",this.toggleZoomSelection.bind(this,"zoom")),this.elZoomIn.addEventListener("click",this.handleZoomIn.bind(this)),this.elZoomOut.addEventListener("click",this.handleZoomOut.bind(this)),this.elPan.addEventListener("click",this.togglePanning.bind(this)),this.elMenuIcon.addEventListener("click",this.toggleMenu.bind(this)),this.elMenuItems.forEach(function(a){a.classList.contains("exportSVG")?a.addEventListener("click",o.handleDownload.bind(o,"svg")):a.classList.contains("exportPNG")?a.addEventListener("click",o.handleDownload.bind(o,"png")):a.classList.contains("exportCSV")&&a.addEventListener("click",o.handleDownload.bind(o,"csv"))});for(var r=0;r<this.t.customIcons.length;r++)this.elCustomIcons[r].addEventListener("click",this.t.customIcons[r].click.bind(this,this.ctx,this.ctx.w))}},{key:"toggleZoomSelection",value:function(o){this.ctx.getSyncedCharts().forEach(function(r){r.ctx.toolbar.toggleOtherControls();var a=o==="selection"?r.ctx.toolbar.elSelection:r.ctx.toolbar.elZoom,d=o==="selection"?"selectionEnabled":"zoomEnabled";r.w.globals[d]=!r.w.globals[d],a.classList.contains(r.ctx.toolbar.selectedClass)?a.classList.remove(r.ctx.toolbar.selectedClass):a.classList.add(r.ctx.toolbar.selectedClass)})}},{key:"getToolbarIconsReference",value:function(){var o=this.w;this.elZoom||(this.elZoom=o.globals.dom.baseEl.querySelector(".apexcharts-zoom-icon")),this.elPan||(this.elPan=o.globals.dom.baseEl.querySelector(".apexcharts-pan-icon")),this.elSelection||(this.elSelection=o.globals.dom.baseEl.querySelector(".apexcharts-selection-icon"))}},{key:"enableZoomPanFromToolbar",value:function(o){this.toggleOtherControls(),o==="pan"?this.w.globals.panEnabled=!0:this.w.globals.zoomEnabled=!0;var r=o==="pan"?this.elPan:this.elZoom,a=o==="pan"?this.elZoom:this.elPan;r&&r.classList.add(this.selectedClass),a&&a.classList.remove(this.selectedClass)}},{key:"togglePanning",value:function(){this.ctx.getSyncedCharts().forEach(function(o){o.ctx.toolbar.toggleOtherControls(),o.w.globals.panEnabled=!o.w.globals.panEnabled,o.ctx.toolbar.elPan.classList.contains(o.ctx.toolbar.selectedClass)?o.ctx.toolbar.elPan.classList.remove(o.ctx.toolbar.selectedClass):o.ctx.toolbar.elPan.classList.add(o.ctx.toolbar.selectedClass)})}},{key:"toggleOtherControls",value:function(){var o=this,r=this.w;r.globals.panEnabled=!1,r.globals.zoomEnabled=!1,r.globals.selectionEnabled=!1,this.getToolbarIconsReference(),[this.elPan,this.elSelection,this.elZoom].forEach(function(a){a&&a.classList.remove(o.selectedClass)})}},{key:"handleZoomIn",value:function(){var o=this.w;o.globals.isRangeBar&&(this.minX=o.globals.minY,this.maxX=o.globals.maxY);var r=(this.minX+this.maxX)/2,a=(this.minX+r)/2,d=(this.maxX+r)/2,h=this._getNewMinXMaxX(a,d);o.globals.disableZoomIn||this.zoomUpdateOptions(h.minX,h.maxX)}},{key:"handleZoomOut",value:function(){var o=this.w;if(o.globals.isRangeBar&&(this.minX=o.globals.minY,this.maxX=o.globals.maxY),!(o.config.xaxis.type==="datetime"&&new Date(this.minX).getUTCFullYear()<1e3)){var r=(this.minX+this.maxX)/2,a=this.minX-(r-this.minX),d=this.maxX-(r-this.maxX),h=this._getNewMinXMaxX(a,d);o.globals.disableZoomOut||this.zoomUpdateOptions(h.minX,h.maxX)}}},{key:"_getNewMinXMaxX",value:function(o,r){var a=this.w.config.xaxis.convertedCatToNumeric;return{minX:a?Math.floor(o):o,maxX:a?Math.floor(r):r}}},{key:"zoomUpdateOptions",value:function(o,r){var a=this.w;if(o!==void 0||r!==void 0){if(!(a.config.xaxis.convertedCatToNumeric&&(o<1&&(o=1,r=a.globals.dataPoints),r-o<2))){var d={min:o,max:r},h=this.getBeforeZoomRange(d);h&&(d=h.xaxis);var c={xaxis:d},p=_.clone(a.globals.initialConfig.yaxis);a.config.chart.zoom.autoScaleYaxis&&(p=new ne(this.ctx).autoScaleY(this.ctx,p,{xaxis:d})),a.config.chart.group||(c.yaxis=p),this.w.globals.zoomed=!0,this.ctx.updateHelpers._updateOptions(c,!1,this.w.config.chart.animations.dynamicAnimation.enabled),this.zoomCallback(d,p)}}else this.handleZoomReset()}},{key:"zoomCallback",value:function(o,r){typeof this.ev.zoomed=="function"&&this.ev.zoomed(this.ctx,{xaxis:o,yaxis:r})}},{key:"getBeforeZoomRange",value:function(o,r){var a=null;return typeof this.ev.beforeZoom=="function"&&(a=this.ev.beforeZoom(this,{xaxis:o,yaxis:r})),a}},{key:"toggleMenu",value:function(){var o=this;window.setTimeout(function(){o.elMenu.classList.contains("apexcharts-menu-open")?o.elMenu.classList.remove("apexcharts-menu-open"):o.elMenu.classList.add("apexcharts-menu-open")},0)}},{key:"handleDownload",value:function(o){var r=this.w,a=new si(this.ctx);switch(o){case"svg":a.exportToSVG(this.ctx);break;case"png":a.exportToPng(this.ctx);break;case"csv":a.exportToCSV({series:r.config.series,columnDelimiter:r.config.chart.toolbar.export.csv.columnDelimiter})}}},{key:"handleZoomReset",value:function(o){this.ctx.getSyncedCharts().forEach(function(r){var a=r.w;if(a.globals.lastXAxis.min=a.globals.initialConfig.xaxis.min,a.globals.lastXAxis.max=a.globals.initialConfig.xaxis.max,r.updateHelpers.revertDefaultAxisMinMax(),typeof a.config.chart.events.beforeResetZoom=="function"){var d=a.config.chart.events.beforeResetZoom(r,a);d&&r.updateHelpers.revertDefaultAxisMinMax(d)}typeof a.config.chart.events.zoomed=="function"&&r.ctx.toolbar.zoomCallback({min:a.config.xaxis.min,max:a.config.xaxis.max}),a.globals.zoomed=!1;var h=r.ctx.series.emptyCollapsedSeries(_.clone(a.globals.initialSeries));r.updateHelpers._updateSeries(h,a.config.chart.animations.dynamicAnimation.enabled)})}},{key:"destroy",value:function(){this.elZoom=null,this.elZoomIn=null,this.elZoomOut=null,this.elPan=null,this.elSelection=null,this.elZoomReset=null,this.elMenuIcon=null}}]),O}(),$e=function(O){S(r,gt);var o=W(r);function r(a){var d;return l(this,r),(d=o.call(this,a)).ctx=a,d.w=a.w,d.dragged=!1,d.graphics=new $(d.ctx),d.eventList=["mousedown","mouseleave","mousemove","touchstart","touchmove","mouseup","touchend"],d.clientX=0,d.clientY=0,d.startX=0,d.endX=0,d.dragX=0,d.startY=0,d.endY=0,d.dragY=0,d.moveDirection="none",d}return g(r,[{key:"init",value:function(a){var d=this,h=a.xyRatios,c=this.w,p=this;this.xyRatios=h,this.zoomRect=this.graphics.drawRect(0,0,0,0),this.selectionRect=this.graphics.drawRect(0,0,0,0),this.gridRect=c.globals.dom.baseEl.querySelector(".apexcharts-grid"),this.zoomRect.node.classList.add("apexcharts-zoom-rect"),this.selectionRect.node.classList.add("apexcharts-selection-rect"),c.globals.dom.elGraphical.add(this.zoomRect),c.globals.dom.elGraphical.add(this.selectionRect),c.config.chart.selection.type==="x"?this.slDraggableRect=this.selectionRect.draggable({minX:0,minY:0,maxX:c.globals.gridWidth,maxY:c.globals.gridHeight}).on("dragmove",this.selectionDragging.bind(this,"dragging")):c.config.chart.selection.type==="y"?this.slDraggableRect=this.selectionRect.draggable({minX:0,maxX:c.globals.gridWidth}).on("dragmove",this.selectionDragging.bind(this,"dragging")):this.slDraggableRect=this.selectionRect.draggable().on("dragmove",this.selectionDragging.bind(this,"dragging")),this.preselectedSelection(),this.hoverArea=c.globals.dom.baseEl.querySelector("".concat(c.globals.chartClass," .apexcharts-svg")),this.hoverArea.classList.add("apexcharts-zoomable"),this.eventList.forEach(function(f){d.hoverArea.addEventListener(f,p.svgMouseEvents.bind(p,h),{capture:!1,passive:!0})})}},{key:"destroy",value:function(){this.slDraggableRect&&(this.slDraggableRect.draggable(!1),this.slDraggableRect.off(),this.selectionRect.off()),this.selectionRect=null,this.zoomRect=null,this.gridRect=null}},{key:"svgMouseEvents",value:function(a,d){var h=this.w,c=this,p=this.ctx.toolbar,f=h.globals.zoomEnabled?h.config.chart.zoom.type:h.config.chart.selection.type,v=h.config.chart.toolbar.autoSelected;if(d.shiftKey?(this.shiftWasPressed=!0,p.enableZoomPanFromToolbar(v==="pan"?"zoom":"pan")):this.shiftWasPressed&&(p.enableZoomPanFromToolbar(v),this.shiftWasPressed=!1),d.target){var y,b=d.target.classList;if(d.target.parentNode&&d.target.parentNode!==null&&(y=d.target.parentNode.classList),!(b.contains("apexcharts-selection-rect")||b.contains("apexcharts-legend-marker")||b.contains("apexcharts-legend-text")||y&&y.contains("apexcharts-toolbar"))){if(c.clientX=d.type==="touchmove"||d.type==="touchstart"?d.touches[0].clientX:d.type==="touchend"?d.changedTouches[0].clientX:d.clientX,c.clientY=d.type==="touchmove"||d.type==="touchstart"?d.touches[0].clientY:d.type==="touchend"?d.changedTouches[0].clientY:d.clientY,d.type==="mousedown"&&d.which===1){var w=c.gridRect.getBoundingClientRect();c.startX=c.clientX-w.left,c.startY=c.clientY-w.top,c.dragged=!1,c.w.globals.mousedown=!0}if((d.type==="mousemove"&&d.which===1||d.type==="touchmove")&&(c.dragged=!0,h.globals.panEnabled?(h.globals.selection=null,c.w.globals.mousedown&&c.panDragging({context:c,zoomtype:f,xyRatios:a})):(c.w.globals.mousedown&&h.globals.zoomEnabled||c.w.globals.mousedown&&h.globals.selectionEnabled)&&(c.selection=c.selectionDrawing({context:c,zoomtype:f}))),d.type==="mouseup"||d.type==="touchend"||d.type==="mouseleave"){var R=c.gridRect.getBoundingClientRect();c.w.globals.mousedown&&(c.endX=c.clientX-R.left,c.endY=c.clientY-R.top,c.dragX=Math.abs(c.endX-c.startX),c.dragY=Math.abs(c.endY-c.startY),(h.globals.zoomEnabled||h.globals.selectionEnabled)&&c.selectionDrawn({context:c,zoomtype:f}),h.globals.panEnabled&&h.config.xaxis.convertedCatToNumeric&&c.delayedPanScrolled()),h.globals.zoomEnabled&&c.hideSelectionRect(this.selectionRect),c.dragged=!1,c.w.globals.mousedown=!1}this.makeSelectionRectDraggable()}}}},{key:"makeSelectionRectDraggable",value:function(){var a=this.w;if(this.selectionRect){var d=this.selectionRect.node.getBoundingClientRect();d.width>0&&d.height>0&&this.slDraggableRect.selectize({points:"l, r",pointSize:8,pointType:"rect"}).resize({constraint:{minX:0,minY:0,maxX:a.globals.gridWidth,maxY:a.globals.gridHeight}}).on("resizing",this.selectionDragging.bind(this,"resizing"))}}},{key:"preselectedSelection",value:function(){var a=this.w,d=this.xyRatios;if(!a.globals.zoomEnabled){if(a.globals.selection!==void 0&&a.globals.selection!==null)this.drawSelectionRect(a.globals.selection);else if(a.config.chart.selection.xaxis.min!==void 0&&a.config.chart.selection.xaxis.max!==void 0){var h=(a.config.chart.selection.xaxis.min-a.globals.minX)/d.xRatio,c=a.globals.gridWidth-(a.globals.maxX-a.config.chart.selection.xaxis.max)/d.xRatio-h;a.globals.isRangeBar&&(h=(a.config.chart.selection.xaxis.min-a.globals.yAxisScale[0].niceMin)/d.invertedYRatio,c=(a.config.chart.selection.xaxis.max-a.config.chart.selection.xaxis.min)/d.invertedYRatio);var p={x:h,y:0,width:c,height:a.globals.gridHeight,translateX:0,translateY:0,selectionEnabled:!0};this.drawSelectionRect(p),this.makeSelectionRectDraggable(),typeof a.config.chart.events.selection=="function"&&a.config.chart.events.selection(this.ctx,{xaxis:{min:a.config.chart.selection.xaxis.min,max:a.config.chart.selection.xaxis.max},yaxis:{}})}}}},{key:"drawSelectionRect",value:function(a){var d=a.x,h=a.y,c=a.width,p=a.height,f=a.translateX,v=f===void 0?0:f,y=a.translateY,b=y===void 0?0:y,w=this.w,R=this.zoomRect,T=this.selectionRect;if(this.dragged||w.globals.selection!==null){var F={transform:"translate("+v+", "+b+")"};w.globals.zoomEnabled&&this.dragged&&(c<0&&(c=1),R.attr({x:d,y:h,width:c,height:p,fill:w.config.chart.zoom.zoomedArea.fill.color,"fill-opacity":w.config.chart.zoom.zoomedArea.fill.opacity,stroke:w.config.chart.zoom.zoomedArea.stroke.color,"stroke-width":w.config.chart.zoom.zoomedArea.stroke.width,"stroke-opacity":w.config.chart.zoom.zoomedArea.stroke.opacity}),$.setAttrs(R.node,F)),w.globals.selectionEnabled&&(T.attr({x:d,y:h,width:c>0?c:0,height:p>0?p:0,fill:w.config.chart.selection.fill.color,"fill-opacity":w.config.chart.selection.fill.opacity,stroke:w.config.chart.selection.stroke.color,"stroke-width":w.config.chart.selection.stroke.width,"stroke-dasharray":w.config.chart.selection.stroke.dashArray,"stroke-opacity":w.config.chart.selection.stroke.opacity}),$.setAttrs(T.node,F))}}},{key:"hideSelectionRect",value:function(a){a&&a.attr({x:0,y:0,width:0,height:0})}},{key:"selectionDrawing",value:function(a){var d=a.context,h=a.zoomtype,c=this.w,p=d,f=this.gridRect.getBoundingClientRect(),v=p.startX-1,y=p.startY,b=!1,w=!1,R=p.clientX-f.left-v,T=p.clientY-f.top-y,F={};return Math.abs(R+v)>c.globals.gridWidth?R=c.globals.gridWidth-v:p.clientX-f.left<0&&(R=v),v>p.clientX-f.left&&(b=!0,R=Math.abs(R)),y>p.clientY-f.top&&(w=!0,T=Math.abs(T)),F=h==="x"?{x:b?v-R:v,y:0,width:R,height:c.globals.gridHeight}:h==="y"?{x:0,y:w?y-T:y,width:c.globals.gridWidth,height:T}:{x:b?v-R:v,y:w?y-T:y,width:R,height:T},p.drawSelectionRect(F),p.selectionDragging("resizing"),F}},{key:"selectionDragging",value:function(a,d){var h=this,c=this.w,p=this.xyRatios,f=this.selectionRect,v=0;a==="resizing"&&(v=30);var y=function(w){return parseFloat(f.node.getAttribute(w))},b={x:y("x"),y:y("y"),width:y("width"),height:y("height")};c.globals.selection=b,typeof c.config.chart.events.selection=="function"&&c.globals.selectionEnabled&&(clearTimeout(this.w.globals.selectionResizeTimer),this.w.globals.selectionResizeTimer=window.setTimeout(function(){var w,R,T,F,I=h.gridRect.getBoundingClientRect(),G=f.node.getBoundingClientRect();c.globals.isRangeBar?(w=c.globals.yAxisScale[0].niceMin+(G.left-I.left)*p.invertedYRatio,R=c.globals.yAxisScale[0].niceMin+(G.right-I.left)*p.invertedYRatio,T=0,F=1):(w=c.globals.xAxisScale.niceMin+(G.left-I.left)*p.xRatio,R=c.globals.xAxisScale.niceMin+(G.right-I.left)*p.xRatio,T=c.globals.yAxisScale[0].niceMin+(I.bottom-G.bottom)*p.yRatio[0],F=c.globals.yAxisScale[0].niceMax-(G.top-I.top)*p.yRatio[0]);var H={xaxis:{min:w,max:R},yaxis:{min:T,max:F}};c.config.chart.events.selection(h.ctx,H),c.config.chart.brush.enabled&&c.config.chart.events.brushScrolled!==void 0&&c.config.chart.events.brushScrolled(h.ctx,H)},v))}},{key:"selectionDrawn",value:function(a){var d=a.context,h=a.zoomtype,c=this.w,p=d,f=this.xyRatios,v=this.ctx.toolbar;if(p.startX>p.endX){var y=p.startX;p.startX=p.endX,p.endX=y}if(p.startY>p.endY){var b=p.startY;p.startY=p.endY,p.endY=b}var w=void 0,R=void 0;c.globals.isRangeBar?(w=c.globals.yAxisScale[0].niceMin+p.startX*f.invertedYRatio,R=c.globals.yAxisScale[0].niceMin+p.endX*f.invertedYRatio):(w=c.globals.xAxisScale.niceMin+p.startX*f.xRatio,R=c.globals.xAxisScale.niceMin+p.endX*f.xRatio);var T=[],F=[];if(c.config.yaxis.forEach(function(V,B){T.push(c.globals.yAxisScale[B].niceMax-f.yRatio[B]*p.startY),F.push(c.globals.yAxisScale[B].niceMax-f.yRatio[B]*p.endY)}),p.dragged&&(p.dragX>10||p.dragY>10)&&w!==R){if(c.globals.zoomEnabled){var I=_.clone(c.globals.initialConfig.yaxis),G=_.clone(c.globals.initialConfig.xaxis);if(c.globals.zoomed=!0,c.config.xaxis.convertedCatToNumeric&&(w=Math.floor(w),R=Math.floor(R),w<1&&(w=1,R=c.globals.dataPoints),R-w<2&&(R=w+1)),h!=="xy"&&h!=="x"||(G={min:w,max:R}),h!=="xy"&&h!=="y"||I.forEach(function(V,B){I[B].min=F[B],I[B].max=T[B]}),c.config.chart.zoom.autoScaleYaxis){var H=new ne(p.ctx);I=H.autoScaleY(p.ctx,I,{xaxis:G})}if(v){var m=v.getBeforeZoomRange(G,I);m&&(G=m.xaxis?m.xaxis:G,I=m.yaxis?m.yaxis:I)}var x={xaxis:G};c.config.chart.group||(x.yaxis=I),p.ctx.updateHelpers._updateOptions(x,!1,p.w.config.chart.animations.dynamicAnimation.enabled),typeof c.config.chart.events.zoomed=="function"&&v.zoomCallback(G,I)}else if(c.globals.selectionEnabled){var P,k=null;P={min:w,max:R},h!=="xy"&&h!=="y"||(k=_.clone(c.config.yaxis)).forEach(function(V,B){k[B].min=F[B],k[B].max=T[B]}),c.globals.selection=p.selection,typeof c.config.chart.events.selection=="function"&&c.config.chart.events.selection(p.ctx,{xaxis:P,yaxis:k})}}}},{key:"panDragging",value:function(a){var d=a.context,h=this.w,c=d;if(h.globals.lastClientPosition.x!==void 0){var p=h.globals.lastClientPosition.x-c.clientX,f=h.globals.lastClientPosition.y-c.clientY;Math.abs(p)>Math.abs(f)&&p>0?this.moveDirection="left":Math.abs(p)>Math.abs(f)&&p<0?this.moveDirection="right":Math.abs(f)>Math.abs(p)&&f>0?this.moveDirection="up":Math.abs(f)>Math.abs(p)&&f<0&&(this.moveDirection="down")}h.globals.lastClientPosition={x:c.clientX,y:c.clientY};var v=h.globals.isRangeBar?h.globals.minY:h.globals.minX,y=h.globals.isRangeBar?h.globals.maxY:h.globals.maxX;h.config.xaxis.convertedCatToNumeric||c.panScrolled(v,y)}},{key:"delayedPanScrolled",value:function(){var a=this.w,d=a.globals.minX,h=a.globals.maxX,c=(a.globals.maxX-a.globals.minX)/2;this.moveDirection==="left"?(d=a.globals.minX+c,h=a.globals.maxX+c):this.moveDirection==="right"&&(d=a.globals.minX-c,h=a.globals.maxX-c),d=Math.floor(d),h=Math.floor(h),this.updateScrolledChart({xaxis:{min:d,max:h}},d,h)}},{key:"panScrolled",value:function(a,d){var h=this.w,c=this.xyRatios,p=_.clone(h.globals.initialConfig.yaxis),f=c.xRatio,v=h.globals.minX,y=h.globals.maxX;h.globals.isRangeBar&&(f=c.invertedYRatio,v=h.globals.minY,y=h.globals.maxY),this.moveDirection==="left"?(a=v+h.globals.gridWidth/15*f,d=y+h.globals.gridWidth/15*f):this.moveDirection==="right"&&(a=v-h.globals.gridWidth/15*f,d=y-h.globals.gridWidth/15*f),h.globals.isRangeBar||(a<h.globals.initialMinX||d>h.globals.initialMaxX)&&(a=v,d=y);var b={min:a,max:d};h.config.chart.zoom.autoScaleYaxis&&(p=new ne(this.ctx).autoScaleY(this.ctx,p,{xaxis:b}));var w={xaxis:{min:a,max:d}};h.config.chart.group||(w.yaxis=p),this.updateScrolledChart(w,a,d)}},{key:"updateScrolledChart",value:function(a,d,h){var c=this.w;this.ctx.updateHelpers._updateOptions(a,!1,!1),typeof c.config.chart.events.scrolled=="function"&&c.config.chart.events.scrolled(this.ctx,{xaxis:{min:d,max:h}})}}]),r}(),mi=function(){function O(o){l(this,O),this.w=o.w,this.ttCtx=o,this.ctx=o.ctx}return g(O,[{key:"getNearestValues",value:function(o){var r=o.hoverArea,a=o.elGrid,d=o.clientX,h=o.clientY,c=this.w,p=a.getBoundingClientRect(),f=p.width,v=p.height,y=f/(c.globals.dataPoints-1),b=v/c.globals.dataPoints,w=this.hasBars();!c.globals.comboCharts&&!w||c.config.xaxis.convertedCatToNumeric||(y=f/c.globals.dataPoints);var R=d-p.left-c.globals.barPadForNumericAxis,T=h-p.top;R<0||T<0||R>f||T>v?(r.classList.remove("hovering-zoom"),r.classList.remove("hovering-pan")):c.globals.zoomEnabled?(r.classList.remove("hovering-pan"),r.classList.add("hovering-zoom")):c.globals.panEnabled&&(r.classList.remove("hovering-zoom"),r.classList.add("hovering-pan"));var F=Math.round(R/y),I=Math.floor(T/b);w&&!c.config.xaxis.convertedCatToNumeric&&(F=Math.ceil(R/y),F-=1);var G=null,H=null,m=c.globals.seriesXvalues.map(function(B){return B.filter(function(j){return _.isNumber(j)})}),x=c.globals.seriesYvalues.map(function(B){return B.filter(function(j){return _.isNumber(j)})});if(c.globals.isXNumeric){var P=this.ttCtx.getElGrid().getBoundingClientRect(),k=R*(P.width/f),V=T*(P.height/v);G=(H=this.closestInMultiArray(k,V,m,x)).index,F=H.j,G!==null&&(m=c.globals.seriesXvalues[G],F=(H=this.closestInArray(k,m)).index)}return c.globals.capturedSeriesIndex=G===null?-1:G,(!F||F<1)&&(F=0),c.globals.isBarHorizontal?c.globals.capturedDataPointIndex=I:c.globals.capturedDataPointIndex=F,{capturedSeries:G,j:c.globals.isBarHorizontal?I:F,hoverX:R,hoverY:T}}},{key:"closestInMultiArray",value:function(o,r,a,d){var h=this.w,c=0,p=null,f=-1;h.globals.series.length>1?c=this.getFirstActiveXArray(a):p=0;var v=a[c][0],y=Math.abs(o-v);if(a.forEach(function(R){R.forEach(function(T,F){var I=Math.abs(o-T);I<=y&&(y=I,f=F)})}),f!==-1){var b=d[c][f],w=Math.abs(r-b);p=c,d.forEach(function(R,T){var F=Math.abs(r-R[f]);F<=w&&(w=F,p=T)})}return{index:p,j:f}}},{key:"getFirstActiveXArray",value:function(o){for(var r=this.w,a=0,d=o.map(function(c,p){return c.length>0?p:-1}),h=0;h<d.length;h++)if(d[h]!==-1&&r.globals.collapsedSeriesIndices.indexOf(h)===-1&&r.globals.ancillaryCollapsedSeriesIndices.indexOf(h)===-1){a=d[h];break}return a}},{key:"closestInArray",value:function(o,r){for(var a=r[0],d=null,h=Math.abs(o-a),c=0;c<r.length;c++){var p=Math.abs(o-r[c]);p<h&&(h=p,d=c)}return{index:d}}},{key:"isXoverlap",value:function(o){var r=[],a=this.w.globals.seriesX.filter(function(h){return h[0]!==void 0});if(a.length>0)for(var d=0;d<a.length-1;d++)a[d][o]!==void 0&&a[d+1][o]!==void 0&&a[d][o]!==a[d+1][o]&&r.push("unEqual");return r.length===0}},{key:"isInitialSeriesSameLen",value:function(){for(var o=!0,r=this.w.globals.initialSeries,a=0;a<r.length-1;a++)if(r[a].data.length!==r[a+1].data.length){o=!1;break}return o}},{key:"getBarsHeight",value:function(o){return U(o).reduce(function(r,a){return r+a.getBBox().height},0)}},{key:"getElMarkers",value:function(o){return typeof o=="number"?this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:realIndex='".concat(o,"'] .apexcharts-series-markers-wrap > *")):this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap > *")}},{key:"getAllMarkers",value:function(){var o=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap");(o=U(o)).sort(function(a,d){var h=Number(a.getAttribute("data:realIndex")),c=Number(d.getAttribute("data:realIndex"));return c<h?1:c>h?-1:0});var r=[];return o.forEach(function(a){r.push(a.querySelector(".apexcharts-marker"))}),r}},{key:"hasMarkers",value:function(o){return this.getElMarkers(o).length>0}},{key:"getElBars",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-bar-series,  .apexcharts-candlestick-series, .apexcharts-boxPlot-series, .apexcharts-rangebar-series")}},{key:"hasBars",value:function(){return this.getElBars().length>0}},{key:"getHoverMarkerSize",value:function(o){var r=this.w,a=r.config.markers.hover.size;return a===void 0&&(a=r.globals.markers.size[o]+r.config.markers.hover.sizeOffset),a}},{key:"toggleAllTooltipSeriesGroups",value:function(o){var r=this.w,a=this.ttCtx;a.allTooltipSeriesGroups.length===0&&(a.allTooltipSeriesGroups=r.globals.dom.baseEl.querySelectorAll(".apexcharts-tooltip-series-group"));for(var d=a.allTooltipSeriesGroups,h=0;h<d.length;h++)o==="enable"?(d[h].classList.add("apexcharts-active"),d[h].style.display=r.config.tooltip.items.display):(d[h].classList.remove("apexcharts-active"),d[h].style.display="none")}}]),O}(),It=function(){function O(o){l(this,O),this.w=o.w,this.ctx=o.ctx,this.ttCtx=o,this.tooltipUtil=new mi(o)}return g(O,[{key:"drawSeriesTexts",value:function(o){var r=o.shared,a=r===void 0||r,d=o.ttItems,h=o.i,c=h===void 0?0:h,p=o.j,f=p===void 0?null:p,v=o.y1,y=o.y2,b=o.e,w=this.w;w.config.tooltip.custom!==void 0?this.handleCustomTooltip({i:c,j:f,y1:v,y2:y,w}):this.toggleActiveInactiveSeries(a);var R=this.getValuesToPrint({i:c,j:f});this.printLabels({i:c,j:f,values:R,ttItems:d,shared:a,e:b});var T=this.ttCtx.getElTooltip();this.ttCtx.tooltipRect.ttWidth=T.getBoundingClientRect().width,this.ttCtx.tooltipRect.ttHeight=T.getBoundingClientRect().height}},{key:"printLabels",value:function(o){var r,a=this,d=o.i,h=o.j,c=o.values,p=o.ttItems,f=o.shared,v=o.e,y=this.w,b=[],w=function(P){return y.globals.seriesGoals[P]&&y.globals.seriesGoals[P][h]&&Array.isArray(y.globals.seriesGoals[P][h])},R=c.xVal,T=c.zVal,F=c.xAxisTTVal,I="",G=y.globals.colors[d];h!==null&&y.config.plotOptions.bar.distributed&&(G=y.globals.colors[h]);for(var H=function(P,k){var V=a.getFormatters(d);I=a.getSeriesName({fn:V.yLbTitleFormatter,index:d,seriesIndex:d,j:h}),y.config.chart.type==="treemap"&&(I=V.yLbTitleFormatter(String(y.config.series[d].data[h].x),{series:y.globals.series,seriesIndex:d,dataPointIndex:h,w:y}));var B=y.config.tooltip.inverseOrder?k:P;if(y.globals.axisCharts){var j=function(he){var ae,Le,Be,je;return y.globals.isRangeData?V.yLbFormatter((ae=y.globals.seriesRangeStart)===null||ae===void 0||(Le=ae[he])===null||Le===void 0?void 0:Le[h],{series:y.globals.seriesRangeStart,seriesIndex:he,dataPointIndex:h,w:y})+" - "+V.yLbFormatter((Be=y.globals.seriesRangeEnd)===null||Be===void 0||(je=Be[he])===null||je===void 0?void 0:je[h],{series:y.globals.seriesRangeEnd,seriesIndex:he,dataPointIndex:h,w:y}):V.yLbFormatter(y.globals.series[he][h],{series:y.globals.series,seriesIndex:he,dataPointIndex:h,w:y})};if(f)V=a.getFormatters(B),I=a.getSeriesName({fn:V.yLbTitleFormatter,index:B,seriesIndex:d,j:h}),G=y.globals.colors[B],r=j(B),w(B)&&(b=y.globals.seriesGoals[B][h].map(function(he){return{attrs:he,val:V.yLbFormatter(he.value,{seriesIndex:B,dataPointIndex:h,w:y})}}));else{var K,ie=v==null||(K=v.target)===null||K===void 0?void 0:K.getAttribute("fill");ie&&(G=ie.indexOf("url")!==-1?document.querySelector(ie.substr(4).slice(0,-1)).childNodes[0].getAttribute("stroke"):ie),r=j(d),w(d)&&Array.isArray(y.globals.seriesGoals[d][h])&&(b=y.globals.seriesGoals[d][h].map(function(he){return{attrs:he,val:V.yLbFormatter(he.value,{seriesIndex:d,dataPointIndex:h,w:y})}}))}}h===null&&(r=V.yLbFormatter(y.globals.series[d],s(s({},y),{},{seriesIndex:d,dataPointIndex:d}))),a.DOMHandling({i:d,t:B,j:h,ttItems:p,values:{val:r,goalVals:b,xVal:R,xAxisTTVal:F,zVal:T},seriesName:I,shared:f,pColor:G})},m=0,x=y.globals.series.length-1;m<y.globals.series.length;m++,x--)H(m,x)}},{key:"getFormatters",value:function(o){var r,a=this.w,d=a.globals.yLabelFormatters[o];return a.globals.ttVal!==void 0?Array.isArray(a.globals.ttVal)?(d=a.globals.ttVal[o]&&a.globals.ttVal[o].formatter,r=a.globals.ttVal[o]&&a.globals.ttVal[o].title&&a.globals.ttVal[o].title.formatter):(d=a.globals.ttVal.formatter,typeof a.globals.ttVal.title.formatter=="function"&&(r=a.globals.ttVal.title.formatter)):r=a.config.tooltip.y.title.formatter,typeof d!="function"&&(d=a.globals.yLabelFormatters[0]?a.globals.yLabelFormatters[0]:function(h){return h}),typeof r!="function"&&(r=function(h){return h}),{yLbFormatter:d,yLbTitleFormatter:r}}},{key:"getSeriesName",value:function(o){var r=o.fn,a=o.index,d=o.seriesIndex,h=o.j,c=this.w;return r(String(c.globals.seriesNames[a]),{series:c.globals.series,seriesIndex:d,dataPointIndex:h,w:c})}},{key:"DOMHandling",value:function(o){o.i;var r=o.t,a=o.j,d=o.ttItems,h=o.values,c=o.seriesName,p=o.shared,f=o.pColor,v=this.w,y=this.ttCtx,b=h.val,w=h.goalVals,R=h.xVal,T=h.xAxisTTVal,F=h.zVal,I=null;I=d[r].children,v.config.tooltip.fillSeriesColor&&(d[r].style.backgroundColor=f,I[0].style.display="none"),y.showTooltipTitle&&(y.tooltipTitle===null&&(y.tooltipTitle=v.globals.dom.baseEl.querySelector(".apexcharts-tooltip-title")),y.tooltipTitle.innerHTML=R),y.isXAxisTooltipEnabled&&(y.xaxisTooltipText.innerHTML=T!==""?T:R);var G=d[r].querySelector(".apexcharts-tooltip-text-y-label");G&&(G.innerHTML=c||"");var H=d[r].querySelector(".apexcharts-tooltip-text-y-value");H&&(H.innerHTML=b!==void 0?b:""),I[0]&&I[0].classList.contains("apexcharts-tooltip-marker")&&(v.config.tooltip.marker.fillColors&&Array.isArray(v.config.tooltip.marker.fillColors)&&(f=v.config.tooltip.marker.fillColors[r]),I[0].style.backgroundColor=f),v.config.tooltip.marker.show||(I[0].style.display="none");var m=d[r].querySelector(".apexcharts-tooltip-text-goals-label"),x=d[r].querySelector(".apexcharts-tooltip-text-goals-value");if(w.length&&v.globals.seriesGoals[r]){var P=function(){var B="<div >",j="<div>";w.forEach(function(K,ie){B+=' <div style="display: flex"><span class="apexcharts-tooltip-marker" style="background-color: '.concat(K.attrs.strokeColor,'; height: 3px; border-radius: 0; top: 5px;"></span> ').concat(K.attrs.name,"</div>"),j+="<div>".concat(K.val,"</div>")}),m.innerHTML=B+"</div>",x.innerHTML=j+"</div>"};p?v.globals.seriesGoals[r][a]&&Array.isArray(v.globals.seriesGoals[r][a])?P():(m.innerHTML="",x.innerHTML=""):P()}else m.innerHTML="",x.innerHTML="";if(F!==null&&(d[r].querySelector(".apexcharts-tooltip-text-z-label").innerHTML=v.config.tooltip.z.title,d[r].querySelector(".apexcharts-tooltip-text-z-value").innerHTML=F!==void 0?F:""),p&&I[0]){if(v.config.tooltip.hideEmptySeries){var k=d[r].querySelector(".apexcharts-tooltip-marker"),V=d[r].querySelector(".apexcharts-tooltip-text");parseFloat(b)==0?(k.style.display="none",V.style.display="none"):(k.style.display="block",V.style.display="block")}b==null||v.globals.ancillaryCollapsedSeriesIndices.indexOf(r)>-1||v.globals.collapsedSeriesIndices.indexOf(r)>-1?I[0].parentNode.style.display="none":I[0].parentNode.style.display=v.config.tooltip.items.display}}},{key:"toggleActiveInactiveSeries",value:function(o){var r=this.w;if(o)this.tooltipUtil.toggleAllTooltipSeriesGroups("enable");else{this.tooltipUtil.toggleAllTooltipSeriesGroups("disable");var a=r.globals.dom.baseEl.querySelector(".apexcharts-tooltip-series-group");a&&(a.classList.add("apexcharts-active"),a.style.display=r.config.tooltip.items.display)}}},{key:"getValuesToPrint",value:function(o){var r=o.i,a=o.j,d=this.w,h=this.ctx.series.filteredSeriesX(),c="",p="",f=null,v=null,y={series:d.globals.series,seriesIndex:r,dataPointIndex:a,w:d},b=d.globals.ttZFormatter;a===null?v=d.globals.series[r]:d.globals.isXNumeric&&d.config.chart.type!=="treemap"?(c=h[r][a],h[r].length===0&&(c=h[this.tooltipUtil.getFirstActiveXArray(h)][a])):c=d.globals.labels[a]!==void 0?d.globals.labels[a]:"";var w=c;return d.globals.isXNumeric&&d.config.xaxis.type==="datetime"?c=new et(this.ctx).xLabelFormat(d.globals.ttKeyFormatter,w,w,{i:void 0,dateFormatter:new Ge(this.ctx).formatDate,w:this.w}):c=d.globals.isBarHorizontal?d.globals.yLabelFormatters[0](w,y):d.globals.xLabelFormatter(w,y),d.config.tooltip.x.formatter!==void 0&&(c=d.globals.ttKeyFormatter(w,y)),d.globals.seriesZ.length>0&&d.globals.seriesZ[r].length>0&&(f=b(d.globals.seriesZ[r][a],d)),p=typeof d.config.xaxis.tooltip.formatter=="function"?d.globals.xaxisTooltipFormatter(w,y):c,{val:Array.isArray(v)?v.join(" "):v,xVal:Array.isArray(c)?c.join(" "):c,xAxisTTVal:Array.isArray(p)?p.join(" "):p,zVal:f}}},{key:"handleCustomTooltip",value:function(o){var r=o.i,a=o.j,d=o.y1,h=o.y2,c=o.w,p=this.ttCtx.getElTooltip(),f=c.config.tooltip.custom;Array.isArray(f)&&f[r]&&(f=f[r]),p.innerHTML=f({ctx:this.ctx,series:c.globals.series,seriesIndex:r,dataPointIndex:a,y1:d,y2:h,w:c})}}]),O}(),ha=function(){function O(o){l(this,O),this.ttCtx=o,this.ctx=o.ctx,this.w=o.w}return g(O,[{key:"moveXCrosshairs",value:function(o){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,a=this.ttCtx,d=this.w,h=a.getElXCrosshairs(),c=o-a.xcrosshairsWidth/2,p=d.globals.labels.slice().length;if(r!==null&&(c=d.globals.gridWidth/p*r),h===null||d.globals.isBarHorizontal||(h.setAttribute("x",c),h.setAttribute("x1",c),h.setAttribute("x2",c),h.setAttribute("y2",d.globals.gridHeight),h.classList.add("apexcharts-active")),c<0&&(c=0),c>d.globals.gridWidth&&(c=d.globals.gridWidth),a.isXAxisTooltipEnabled){var f=c;d.config.xaxis.crosshairs.width!=="tickWidth"&&d.config.xaxis.crosshairs.width!=="barWidth"||(f=c+a.xcrosshairsWidth/2),this.moveXAxisTooltip(f)}}},{key:"moveYCrosshairs",value:function(o){var r=this.ttCtx;r.ycrosshairs!==null&&$.setAttrs(r.ycrosshairs,{y1:o,y2:o}),r.ycrosshairsHidden!==null&&$.setAttrs(r.ycrosshairsHidden,{y1:o,y2:o})}},{key:"moveXAxisTooltip",value:function(o){var r=this.w,a=this.ttCtx;if(a.xaxisTooltip!==null&&a.xcrosshairsWidth!==0){a.xaxisTooltip.classList.add("apexcharts-active");var d=a.xaxisOffY+r.config.xaxis.tooltip.offsetY+r.globals.translateY+1+r.config.xaxis.offsetY;if(o-=a.xaxisTooltip.getBoundingClientRect().width/2,!isNaN(o)){o+=r.globals.translateX;var h;h=new $(this.ctx).getTextRects(a.xaxisTooltipText.innerHTML),a.xaxisTooltipText.style.minWidth=h.width+"px",a.xaxisTooltip.style.left=o+"px",a.xaxisTooltip.style.top=d+"px"}}}},{key:"moveYAxisTooltip",value:function(o){var r=this.w,a=this.ttCtx;a.yaxisTTEls===null&&(a.yaxisTTEls=r.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));var d=parseInt(a.ycrosshairsHidden.getAttribute("y1"),10),h=r.globals.translateY+d,c=a.yaxisTTEls[o].getBoundingClientRect().height,p=r.globals.translateYAxisX[o]-2;r.config.yaxis[o].opposite&&(p-=26),h-=c/2,r.globals.ignoreYAxisIndexes.indexOf(o)===-1?(a.yaxisTTEls[o].classList.add("apexcharts-active"),a.yaxisTTEls[o].style.top=h+"px",a.yaxisTTEls[o].style.left=p+r.config.yaxis[o].tooltip.offsetX+"px"):a.yaxisTTEls[o].classList.remove("apexcharts-active")}},{key:"moveTooltip",value:function(o,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,d=this.w,h=this.ttCtx,c=h.getElTooltip(),p=h.tooltipRect,f=a!==null?parseFloat(a):1,v=parseFloat(o)+f+5,y=parseFloat(r)+f/2;if(v>d.globals.gridWidth/2&&(v=v-p.ttWidth-f-10),v>d.globals.gridWidth-p.ttWidth-10&&(v=d.globals.gridWidth-p.ttWidth),v<-20&&(v=-20),d.config.tooltip.followCursor){var b=h.getElGrid().getBoundingClientRect();(v=h.e.clientX-b.left)>d.globals.gridWidth/2&&(v-=h.tooltipRect.ttWidth),(y=h.e.clientY+d.globals.translateY-b.top)>d.globals.gridHeight/2&&(y-=h.tooltipRect.ttHeight)}else d.globals.isBarHorizontal||p.ttHeight/2+y>d.globals.gridHeight&&(y=d.globals.gridHeight-p.ttHeight+d.globals.translateY);isNaN(v)||(v+=d.globals.translateX,c.style.left=v+"px",c.style.top=y+"px")}},{key:"moveMarkers",value:function(o,r){var a=this.w,d=this.ttCtx;if(a.globals.markers.size[o]>0)for(var h=a.globals.dom.baseEl.querySelectorAll(" .apexcharts-series[data\\:realIndex='".concat(o,"'] .apexcharts-marker")),c=0;c<h.length;c++)parseInt(h[c].getAttribute("rel"),10)===r&&(d.marker.resetPointsSize(),d.marker.enlargeCurrentPoint(r,h[c]));else d.marker.resetPointsSize(),this.moveDynamicPointOnHover(r,o)}},{key:"moveDynamicPointOnHover",value:function(o,r){var a,d,h=this.w,c=this.ttCtx,p=h.globals.pointsArray,f=c.tooltipUtil.getHoverMarkerSize(r),v=h.config.series[r].type;if(!v||v!=="column"&&v!=="candlestick"&&v!=="boxPlot"){a=p[r][o][0],d=p[r][o][1]?p[r][o][1]:0;var y=h.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(r,"'] .apexcharts-series-markers circle"));y&&d<h.globals.gridHeight&&d>0&&(y.setAttribute("r",f),y.setAttribute("cx",a),y.setAttribute("cy",d)),this.moveXCrosshairs(a),c.fixedTooltip||this.moveTooltip(a,d,f)}}},{key:"moveDynamicPointsOnHover",value:function(o){var r,a=this.ttCtx,d=a.w,h=0,c=0,p=d.globals.pointsArray;r=new xt(this.ctx).getActiveConfigSeriesIndex("asc",["line","area","scatter","bubble"]);var f=a.tooltipUtil.getHoverMarkerSize(r);p[r]&&(h=p[r][o][0],c=p[r][o][1]);var v=a.tooltipUtil.getAllMarkers();if(v!==null)for(var y=0;y<d.globals.series.length;y++){var b=p[y];if(d.globals.comboCharts&&b===void 0&&v.splice(y,0,null),b&&b.length){var w=p[y][o][1],R=void 0;if(v[y].setAttribute("cx",h),d.config.chart.type==="rangeArea"&&!d.globals.comboCharts){var T=o+d.globals.series[y].length;R=p[y][T][1],w-=Math.abs(w-R)/2}w!==null&&!isNaN(w)&&w<d.globals.gridHeight+f&&w+f>0?(v[y]&&v[y].setAttribute("r",f),v[y]&&v[y].setAttribute("cy",w)):v[y]&&v[y].setAttribute("r",0)}}this.moveXCrosshairs(h),a.fixedTooltip||this.moveTooltip(h,c||d.globals.gridHeight,f)}},{key:"moveStickyTooltipOverBars",value:function(o,r){var a=this.w,d=this.ttCtx,h=a.globals.columnSeries?a.globals.columnSeries.length:a.globals.series.length,c=h>=2&&h%2==0?Math.floor(h/2):Math.floor(h/2)+1;a.globals.isBarHorizontal&&(c=new xt(this.ctx).getActiveConfigSeriesIndex("desc")+1);var p=a.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[rel='".concat(c,"'] path[j='").concat(o,"'], .apexcharts-candlestick-series .apexcharts-series[rel='").concat(c,"'] path[j='").concat(o,"'], .apexcharts-boxPlot-series .apexcharts-series[rel='").concat(c,"'] path[j='").concat(o,"'], .apexcharts-rangebar-series .apexcharts-series[rel='").concat(c,"'] path[j='").concat(o,"']"));p||typeof r!="number"||(p=a.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[data\\:realIndex='".concat(r,"'] path[j='").concat(o,`'],
        .apexcharts-candlestick-series .apexcharts-series[data\\:realIndex='`).concat(r,"'] path[j='").concat(o,`'],
        .apexcharts-boxPlot-series .apexcharts-series[data\\:realIndex='`).concat(r,"'] path[j='").concat(o,`'],
        .apexcharts-rangebar-series .apexcharts-series[data\\:realIndex='`).concat(r,"'] path[j='").concat(o,"']")));var f=p?parseFloat(p.getAttribute("cx")):0,v=p?parseFloat(p.getAttribute("cy")):0,y=p?parseFloat(p.getAttribute("barWidth")):0,b=d.getElGrid().getBoundingClientRect(),w=p&&(p.classList.contains("apexcharts-candlestick-area")||p.classList.contains("apexcharts-boxPlot-area"));a.globals.isXNumeric?(p&&!w&&(f-=h%2!=0?y/2:0),p&&w&&a.globals.comboCharts&&(f-=y/2)):a.globals.isBarHorizontal||(f=d.xAxisTicksPositions[o-1]+d.dataPointsDividedWidth/2,isNaN(f)&&(f=d.xAxisTicksPositions[o]-d.dataPointsDividedWidth/2)),a.globals.isBarHorizontal?v-=d.tooltipRect.ttHeight:a.config.tooltip.followCursor?v=d.e.clientY-b.top-d.tooltipRect.ttHeight/2:v+d.tooltipRect.ttHeight+15>a.globals.gridHeight&&(v=a.globals.gridHeight),a.globals.isBarHorizontal||this.moveXCrosshairs(f),d.fixedTooltip||this.moveTooltip(f,v||a.globals.gridHeight)}}]),O}(),Ml=function(){function O(o){l(this,O),this.w=o.w,this.ttCtx=o,this.ctx=o.ctx,this.tooltipPosition=new ha(o)}return g(O,[{key:"drawDynamicPoints",value:function(){var o=this.w,r=new $(this.ctx),a=new Ke(this.ctx),d=o.globals.dom.baseEl.querySelectorAll(".apexcharts-series");d=U(d),o.config.chart.stacked&&d.sort(function(b,w){return parseFloat(b.getAttribute("data:realIndex"))-parseFloat(w.getAttribute("data:realIndex"))});for(var h=0;h<d.length;h++){var c=d[h].querySelector(".apexcharts-series-markers-wrap");if(c!==null){var p=void 0,f="apexcharts-marker w".concat((Math.random()+1).toString(36).substring(4));o.config.chart.type!=="line"&&o.config.chart.type!=="area"||o.globals.comboCharts||o.config.tooltip.intersect||(f+=" no-pointer-events");var v=a.getMarkerConfig({cssClass:f,seriesIndex:Number(c.getAttribute("data:realIndex"))});(p=r.drawMarker(0,0,v)).node.setAttribute("default-marker-size",0);var y=document.createElementNS(o.globals.SVGNS,"g");y.classList.add("apexcharts-series-markers"),y.appendChild(p.node),c.appendChild(y)}}}},{key:"enlargeCurrentPoint",value:function(o,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,h=this.w;h.config.chart.type!=="bubble"&&this.newPointSize(o,r);var c=r.getAttribute("cx"),p=r.getAttribute("cy");if(a!==null&&d!==null&&(c=a,p=d),this.tooltipPosition.moveXCrosshairs(c),!this.fixedTooltip){if(h.config.chart.type==="radar"){var f=this.ttCtx.getElGrid().getBoundingClientRect();c=this.ttCtx.e.clientX-f.left}this.tooltipPosition.moveTooltip(c,p,h.config.markers.hover.size)}}},{key:"enlargePoints",value:function(o){for(var r=this.w,a=this,d=this.ttCtx,h=o,c=r.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),p=r.config.markers.hover.size,f=0;f<c.length;f++){var v=c[f].getAttribute("rel"),y=c[f].getAttribute("index");if(p===void 0&&(p=r.globals.markers.size[y]+r.config.markers.hover.sizeOffset),h===parseInt(v,10)){a.newPointSize(h,c[f]);var b=c[f].getAttribute("cx"),w=c[f].getAttribute("cy");a.tooltipPosition.moveXCrosshairs(b),d.fixedTooltip||a.tooltipPosition.moveTooltip(b,w,p)}else a.oldPointSize(c[f])}}},{key:"newPointSize",value:function(o,r){var a=this.w,d=a.config.markers.hover.size,h=o===0?r.parentNode.firstChild:r.parentNode.lastChild;if(h.getAttribute("default-marker-size")!=="0"){var c=parseInt(h.getAttribute("index"),10);d===void 0&&(d=a.globals.markers.size[c]+a.config.markers.hover.sizeOffset),d<0&&(d=0),h.setAttribute("r",d)}}},{key:"oldPointSize",value:function(o){var r=parseFloat(o.getAttribute("default-marker-size"));o.setAttribute("r",r)}},{key:"resetPointsSize",value:function(){for(var o=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),r=0;r<o.length;r++){var a=parseFloat(o[r].getAttribute("default-marker-size"));_.isNumber(a)&&a>=0?o[r].setAttribute("r",a):o[r].setAttribute("r",0)}}}]),O}(),ca=function(){function O(o){l(this,O),this.w=o.w;var r=this.w;this.ttCtx=o,this.isVerticalGroupedRangeBar=!r.globals.isBarHorizontal&&r.config.chart.type==="rangeBar"&&r.config.plotOptions.bar.rangeBarGroupRows}return g(O,[{key:"getAttr",value:function(o,r){return parseFloat(o.target.getAttribute(r))}},{key:"handleHeatTreeTooltip",value:function(o){var r=o.e,a=o.opt,d=o.x,h=o.y,c=o.type,p=this.ttCtx,f=this.w;if(r.target.classList.contains("apexcharts-".concat(c,"-rect"))){var v=this.getAttr(r,"i"),y=this.getAttr(r,"j"),b=this.getAttr(r,"cx"),w=this.getAttr(r,"cy"),R=this.getAttr(r,"width"),T=this.getAttr(r,"height");if(p.tooltipLabels.drawSeriesTexts({ttItems:a.ttItems,i:v,j:y,shared:!1,e:r}),f.globals.capturedSeriesIndex=v,f.globals.capturedDataPointIndex=y,d=b+p.tooltipRect.ttWidth/2+R,h=w+p.tooltipRect.ttHeight/2-T/2,p.tooltipPosition.moveXCrosshairs(b+R/2),d>f.globals.gridWidth/2&&(d=b-p.tooltipRect.ttWidth/2+R),p.w.config.tooltip.followCursor){var F=f.globals.dom.elWrap.getBoundingClientRect();d=f.globals.clientX-F.left-(d>f.globals.gridWidth/2?p.tooltipRect.ttWidth:0),h=f.globals.clientY-F.top-(h>f.globals.gridHeight/2?p.tooltipRect.ttHeight:0)}}return{x:d,y:h}}},{key:"handleMarkerTooltip",value:function(o){var r,a,d=o.e,h=o.opt,c=o.x,p=o.y,f=this.w,v=this.ttCtx;if(d.target.classList.contains("apexcharts-marker")){var y=parseInt(h.paths.getAttribute("cx"),10),b=parseInt(h.paths.getAttribute("cy"),10),w=parseFloat(h.paths.getAttribute("val"));if(a=parseInt(h.paths.getAttribute("rel"),10),r=parseInt(h.paths.parentNode.parentNode.parentNode.getAttribute("rel"),10)-1,v.intersect){var R=_.findAncestor(h.paths,"apexcharts-series");R&&(r=parseInt(R.getAttribute("data:realIndex"),10))}if(v.tooltipLabels.drawSeriesTexts({ttItems:h.ttItems,i:r,j:a,shared:!v.showOnIntersect&&f.config.tooltip.shared,e:d}),d.type==="mouseup"&&v.markerClick(d,r,a),f.globals.capturedSeriesIndex=r,f.globals.capturedDataPointIndex=a,c=y,p=b+f.globals.translateY-1.4*v.tooltipRect.ttHeight,v.w.config.tooltip.followCursor){var T=v.getElGrid().getBoundingClientRect();p=v.e.clientY+f.globals.translateY-T.top}w<0&&(p=b),v.marker.enlargeCurrentPoint(a,h.paths,c,p)}return{x:c,y:p}}},{key:"handleBarTooltip",value:function(o){var r,a,d=o.e,h=o.opt,c=this.w,p=this.ttCtx,f=p.getElTooltip(),v=0,y=0,b=0,w=this.getBarTooltipXY({e:d,opt:h});r=w.i;var R=w.barHeight,T=w.j;c.globals.capturedSeriesIndex=r,c.globals.capturedDataPointIndex=T,c.globals.isBarHorizontal&&p.tooltipUtil.hasBars()||!c.config.tooltip.shared?(y=w.x,b=w.y,a=Array.isArray(c.config.stroke.width)?c.config.stroke.width[r]:c.config.stroke.width,v=y):c.globals.comboCharts||c.config.tooltip.shared||(v/=2),isNaN(b)&&(b=c.globals.svgHeight-p.tooltipRect.ttHeight);var F=parseInt(h.paths.parentNode.getAttribute("data:realIndex"),10),I=c.globals.isMultipleYAxis?c.config.yaxis[F]&&c.config.yaxis[F].reversed:c.config.yaxis[0].reversed;if(y+p.tooltipRect.ttWidth>c.globals.gridWidth&&!I?y-=p.tooltipRect.ttWidth:y<0&&(y=0),p.w.config.tooltip.followCursor){var G=p.getElGrid().getBoundingClientRect();b=p.e.clientY-G.top}p.tooltip===null&&(p.tooltip=c.globals.dom.baseEl.querySelector(".apexcharts-tooltip")),c.config.tooltip.shared||(c.globals.comboBarCount>0?p.tooltipPosition.moveXCrosshairs(v+a/2):p.tooltipPosition.moveXCrosshairs(v)),!p.fixedTooltip&&(!c.config.tooltip.shared||c.globals.isBarHorizontal&&p.tooltipUtil.hasBars())&&(I&&(y-=p.tooltipRect.ttWidth)<0&&(y=0),!I||c.globals.isBarHorizontal&&p.tooltipUtil.hasBars()||(b=b+R-2*(c.globals.series[r][T]<0?R:0)),b=b+c.globals.translateY-p.tooltipRect.ttHeight/2,f.style.left=y+c.globals.translateX+"px",f.style.top=b+"px")}},{key:"getBarTooltipXY",value:function(o){var r=this,a=o.e,d=o.opt,h=this.w,c=null,p=this.ttCtx,f=0,v=0,y=0,b=0,w=0,R=a.target.classList;if(R.contains("apexcharts-bar-area")||R.contains("apexcharts-candlestick-area")||R.contains("apexcharts-boxPlot-area")||R.contains("apexcharts-rangebar-area")){var T=a.target,F=T.getBoundingClientRect(),I=d.elGrid.getBoundingClientRect(),G=F.height;w=F.height;var H=F.width,m=parseInt(T.getAttribute("cx"),10),x=parseInt(T.getAttribute("cy"),10);b=parseFloat(T.getAttribute("barWidth"));var P=a.type==="touchmove"?a.touches[0].clientX:a.clientX;c=parseInt(T.getAttribute("j"),10),f=parseInt(T.parentNode.getAttribute("rel"),10)-1;var k=T.getAttribute("data-range-y1"),V=T.getAttribute("data-range-y2");h.globals.comboCharts&&(f=parseInt(T.parentNode.getAttribute("data:realIndex"),10));var B=function(K){return h.globals.isXNumeric?m-H/2:r.isVerticalGroupedRangeBar?m+H/2:m-p.dataPointsDividedWidth+H/2},j=function(){return x-p.dataPointsDividedHeight+G/2-p.tooltipRect.ttHeight/2};p.tooltipLabels.drawSeriesTexts({ttItems:d.ttItems,i:f,j:c,y1:k?parseInt(k,10):null,y2:V?parseInt(V,10):null,shared:!p.showOnIntersect&&h.config.tooltip.shared,e:a}),h.config.tooltip.followCursor?h.globals.isBarHorizontal?(v=P-I.left+15,y=j()):(v=B(),y=a.clientY-I.top-p.tooltipRect.ttHeight/2-15):h.globals.isBarHorizontal?((v=m)<p.xyRatios.baseLineInvertedY&&(v=m-p.tooltipRect.ttWidth),y=j()):(v=B(),y=x)}return{x:v,y,barHeight:w,barWidth:b,i:f,j:c}}}]),O}(),Il=function(){function O(o){l(this,O),this.w=o.w,this.ttCtx=o}return g(O,[{key:"drawXaxisTooltip",value:function(){var o=this.w,r=this.ttCtx,a=o.config.xaxis.position==="bottom";r.xaxisOffY=a?o.globals.gridHeight+1:-o.globals.xAxisHeight-o.config.xaxis.axisTicks.height+3;var d=a?"apexcharts-xaxistooltip apexcharts-xaxistooltip-bottom":"apexcharts-xaxistooltip apexcharts-xaxistooltip-top",h=o.globals.dom.elWrap;r.isXAxisTooltipEnabled&&o.globals.dom.baseEl.querySelector(".apexcharts-xaxistooltip")===null&&(r.xaxisTooltip=document.createElement("div"),r.xaxisTooltip.setAttribute("class",d+" apexcharts-theme-"+o.config.tooltip.theme),h.appendChild(r.xaxisTooltip),r.xaxisTooltipText=document.createElement("div"),r.xaxisTooltipText.classList.add("apexcharts-xaxistooltip-text"),r.xaxisTooltipText.style.fontFamily=o.config.xaxis.tooltip.style.fontFamily||o.config.chart.fontFamily,r.xaxisTooltipText.style.fontSize=o.config.xaxis.tooltip.style.fontSize,r.xaxisTooltip.appendChild(r.xaxisTooltipText))}},{key:"drawYaxisTooltip",value:function(){for(var o=this.w,r=this.ttCtx,a=function(h){var c=o.config.yaxis[h].opposite||o.config.yaxis[h].crosshairs.opposite;r.yaxisOffX=c?o.globals.gridWidth+1:1;var p="apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(h,c?" apexcharts-yaxistooltip-right":" apexcharts-yaxistooltip-left");o.globals.yAxisSameScaleIndices.map(function(v,y){v.map(function(b,w){w===h&&(p+=o.config.yaxis[w].show?" ":" apexcharts-yaxistooltip-hidden")})});var f=o.globals.dom.elWrap;o.globals.dom.baseEl.querySelector(".apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(h))===null&&(r.yaxisTooltip=document.createElement("div"),r.yaxisTooltip.setAttribute("class",p+" apexcharts-theme-"+o.config.tooltip.theme),f.appendChild(r.yaxisTooltip),h===0&&(r.yaxisTooltipText=[]),r.yaxisTooltipText[h]=document.createElement("div"),r.yaxisTooltipText[h].classList.add("apexcharts-yaxistooltip-text"),r.yaxisTooltip.appendChild(r.yaxisTooltipText[h]))},d=0;d<o.config.yaxis.length;d++)a(d)}},{key:"setXCrosshairWidth",value:function(){var o=this.w,r=this.ttCtx,a=r.getElXCrosshairs();if(r.xcrosshairsWidth=parseInt(o.config.xaxis.crosshairs.width,10),o.globals.comboCharts){var d=o.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(d!==null&&o.config.xaxis.crosshairs.width==="barWidth"){var h=parseFloat(d.getAttribute("barWidth"));r.xcrosshairsWidth=h}else if(o.config.xaxis.crosshairs.width==="tickWidth"){var c=o.globals.labels.length;r.xcrosshairsWidth=o.globals.gridWidth/c}}else if(o.config.xaxis.crosshairs.width==="tickWidth"){var p=o.globals.labels.length;r.xcrosshairsWidth=o.globals.gridWidth/p}else if(o.config.xaxis.crosshairs.width==="barWidth"){var f=o.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(f!==null){var v=parseFloat(f.getAttribute("barWidth"));r.xcrosshairsWidth=v}else r.xcrosshairsWidth=1}o.globals.isBarHorizontal&&(r.xcrosshairsWidth=0),a!==null&&r.xcrosshairsWidth>0&&a.setAttribute("width",r.xcrosshairsWidth)}},{key:"handleYCrosshair",value:function(){var o=this.w,r=this.ttCtx;r.ycrosshairs=o.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs"),r.ycrosshairsHidden=o.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs-hidden")}},{key:"drawYaxisTooltipText",value:function(o,r,a){var d=this.ttCtx,h=this.w,c=h.globals.yLabelFormatters[o];if(d.yaxisTooltips[o]){var p=d.getElGrid().getBoundingClientRect(),f=(r-p.top)*a.yRatio[o],v=h.globals.maxYArr[o]-h.globals.minYArr[o],y=h.globals.minYArr[o]+(v-f);d.tooltipPosition.moveYCrosshairs(r-p.top),d.yaxisTooltipText[o].innerHTML=c(y),d.tooltipPosition.moveYAxisTooltip(o)}}}]),O}(),Kr=function(){function O(o){l(this,O),this.ctx=o,this.w=o.w;var r=this.w;this.tConfig=r.config.tooltip,this.tooltipUtil=new mi(this),this.tooltipLabels=new It(this),this.tooltipPosition=new ha(this),this.marker=new Ml(this),this.intersect=new ca(this),this.axesTooltip=new Il(this),this.showOnIntersect=this.tConfig.intersect,this.showTooltipTitle=this.tConfig.x.show,this.fixedTooltip=this.tConfig.fixed.enabled,this.xaxisTooltip=null,this.yaxisTTEls=null,this.isBarShared=!r.globals.isBarHorizontal&&this.tConfig.shared,this.lastHoverTime=Date.now()}return g(O,[{key:"getElTooltip",value:function(o){return o||(o=this),o.w.globals.dom.baseEl?o.w.globals.dom.baseEl.querySelector(".apexcharts-tooltip"):null}},{key:"getElXCrosshairs",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-xcrosshairs")}},{key:"getElGrid",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-grid")}},{key:"drawTooltip",value:function(o){var r=this.w;this.xyRatios=o,this.isXAxisTooltipEnabled=r.config.xaxis.tooltip.enabled&&r.globals.axisCharts,this.yaxisTooltips=r.config.yaxis.map(function(c,p){return!!(c.show&&c.tooltip.enabled&&r.globals.axisCharts)}),this.allTooltipSeriesGroups=[],r.globals.axisCharts||(this.showTooltipTitle=!1);var a=document.createElement("div");if(a.classList.add("apexcharts-tooltip"),r.config.tooltip.cssClass&&a.classList.add(r.config.tooltip.cssClass),a.classList.add("apexcharts-theme-".concat(this.tConfig.theme)),r.globals.dom.elWrap.appendChild(a),r.globals.axisCharts){this.axesTooltip.drawXaxisTooltip(),this.axesTooltip.drawYaxisTooltip(),this.axesTooltip.setXCrosshairWidth(),this.axesTooltip.handleYCrosshair();var d=new Pt(this.ctx);this.xAxisTicksPositions=d.getXAxisTicksPositions()}if(!r.globals.comboCharts&&!this.tConfig.intersect&&r.config.chart.type!=="rangeBar"||this.tConfig.shared||(this.showOnIntersect=!0),r.config.markers.size!==0&&r.globals.markers.largestSize!==0||this.marker.drawDynamicPoints(this),r.globals.collapsedSeries.length!==r.globals.series.length){this.dataPointsDividedHeight=r.globals.gridHeight/r.globals.dataPoints,this.dataPointsDividedWidth=r.globals.gridWidth/r.globals.dataPoints,this.showTooltipTitle&&(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.classList.add("apexcharts-tooltip-title"),this.tooltipTitle.style.fontFamily=this.tConfig.style.fontFamily||r.config.chart.fontFamily,this.tooltipTitle.style.fontSize=this.tConfig.style.fontSize,a.appendChild(this.tooltipTitle));var h=r.globals.series.length;(r.globals.xyCharts||r.globals.comboCharts)&&this.tConfig.shared&&(h=this.showOnIntersect?1:r.globals.series.length),this.legendLabels=r.globals.dom.baseEl.querySelectorAll(".apexcharts-legend-text"),this.ttItems=this.createTTElements(h),this.addSVGEvents()}}},{key:"createTTElements",value:function(o){for(var r=this,a=this.w,d=[],h=this.getElTooltip(),c=function(f){var v=document.createElement("div");v.classList.add("apexcharts-tooltip-series-group"),v.style.order=a.config.tooltip.inverseOrder?o-f:f+1,r.tConfig.shared&&r.tConfig.enabledOnSeries&&Array.isArray(r.tConfig.enabledOnSeries)&&r.tConfig.enabledOnSeries.indexOf(f)<0&&v.classList.add("apexcharts-tooltip-series-group-hidden");var y=document.createElement("span");y.classList.add("apexcharts-tooltip-marker"),y.style.backgroundColor=a.globals.colors[f],v.appendChild(y);var b=document.createElement("div");b.classList.add("apexcharts-tooltip-text"),b.style.fontFamily=r.tConfig.style.fontFamily||a.config.chart.fontFamily,b.style.fontSize=r.tConfig.style.fontSize,["y","goals","z"].forEach(function(w){var R=document.createElement("div");R.classList.add("apexcharts-tooltip-".concat(w,"-group"));var T=document.createElement("span");T.classList.add("apexcharts-tooltip-text-".concat(w,"-label")),R.appendChild(T);var F=document.createElement("span");F.classList.add("apexcharts-tooltip-text-".concat(w,"-value")),R.appendChild(F),b.appendChild(R)}),v.appendChild(b),h.appendChild(v),d.push(v)},p=0;p<o;p++)c(p);return d}},{key:"addSVGEvents",value:function(){var o=this.w,r=o.config.chart.type,a=this.getElTooltip(),d=!(r!=="bar"&&r!=="candlestick"&&r!=="boxPlot"&&r!=="rangeBar"),h=r==="area"||r==="line"||r==="scatter"||r==="bubble"||r==="radar",c=o.globals.dom.Paper.node,p=this.getElGrid();p&&(this.seriesBound=p.getBoundingClientRect());var f,v=[],y=[],b={hoverArea:c,elGrid:p,tooltipEl:a,tooltipY:v,tooltipX:y,ttItems:this.ttItems};if(o.globals.axisCharts&&(h?f=o.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:longestSeries='true'] .apexcharts-marker"):d?f=o.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-bar-area, .apexcharts-series .apexcharts-candlestick-area, .apexcharts-series .apexcharts-boxPlot-area, .apexcharts-series .apexcharts-rangebar-area"):r!=="heatmap"&&r!=="treemap"||(f=o.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-heatmap, .apexcharts-series .apexcharts-treemap")),f&&f.length))for(var w=0;w<f.length;w++)v.push(f[w].getAttribute("cy")),y.push(f[w].getAttribute("cx"));if(o.globals.xyCharts&&!this.showOnIntersect||o.globals.comboCharts&&!this.showOnIntersect||d&&this.tooltipUtil.hasBars()&&this.tConfig.shared)this.addPathsEventListeners([c],b);else if(d&&!o.globals.comboCharts||h&&this.showOnIntersect)this.addDatapointEventsListeners(b);else if(!o.globals.axisCharts||r==="heatmap"||r==="treemap"){var R=o.globals.dom.baseEl.querySelectorAll(".apexcharts-series");this.addPathsEventListeners(R,b)}if(this.showOnIntersect){var T=o.globals.dom.baseEl.querySelectorAll(".apexcharts-line-series .apexcharts-marker, .apexcharts-area-series .apexcharts-marker");T.length>0&&this.addPathsEventListeners(T,b),this.tooltipUtil.hasBars()&&!this.tConfig.shared&&this.addDatapointEventsListeners(b)}}},{key:"drawFixedTooltipRect",value:function(){var o=this.w,r=this.getElTooltip(),a=r.getBoundingClientRect(),d=a.width+10,h=a.height+10,c=this.tConfig.fixed.offsetX,p=this.tConfig.fixed.offsetY,f=this.tConfig.fixed.position.toLowerCase();return f.indexOf("right")>-1&&(c=c+o.globals.svgWidth-d+10),f.indexOf("bottom")>-1&&(p=p+o.globals.svgHeight-h-10),r.style.left=c+"px",r.style.top=p+"px",{x:c,y:p,ttWidth:d,ttHeight:h}}},{key:"addDatapointEventsListeners",value:function(o){var r=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers .apexcharts-marker, .apexcharts-bar-area, .apexcharts-candlestick-area, .apexcharts-boxPlot-area, .apexcharts-rangebar-area");this.addPathsEventListeners(r,o)}},{key:"addPathsEventListeners",value:function(o,r){for(var a=this,d=function(c){var p={paths:o[c],tooltipEl:r.tooltipEl,tooltipY:r.tooltipY,tooltipX:r.tooltipX,elGrid:r.elGrid,hoverArea:r.hoverArea,ttItems:r.ttItems};["mousemove","mouseup","touchmove","mouseout","touchend"].map(function(f){return o[c].addEventListener(f,a.onSeriesHover.bind(a,p),{capture:!1,passive:!0})})},h=0;h<o.length;h++)d(h)}},{key:"onSeriesHover",value:function(o,r){var a=this,d=Date.now()-this.lastHoverTime;d>=100?this.seriesHover(o,r):(clearTimeout(this.seriesHoverTimeout),this.seriesHoverTimeout=setTimeout(function(){a.seriesHover(o,r)},100-d))}},{key:"seriesHover",value:function(o,r){var a=this;this.lastHoverTime=Date.now();var d=[],h=this.w;h.config.chart.group&&(d=this.ctx.getGroupedCharts()),h.globals.axisCharts&&(h.globals.minX===-1/0&&h.globals.maxX===1/0||h.globals.dataPoints===0)||(d.length?d.forEach(function(c){var p=a.getElTooltip(c),f={paths:o.paths,tooltipEl:p,tooltipY:o.tooltipY,tooltipX:o.tooltipX,elGrid:o.elGrid,hoverArea:o.hoverArea,ttItems:c.w.globals.tooltip.ttItems};c.w.globals.minX===a.w.globals.minX&&c.w.globals.maxX===a.w.globals.maxX&&c.w.globals.tooltip.seriesHoverByContext({chartCtx:c,ttCtx:c.w.globals.tooltip,opt:f,e:r})}):this.seriesHoverByContext({chartCtx:this.ctx,ttCtx:this.w.globals.tooltip,opt:o,e:r}))}},{key:"seriesHoverByContext",value:function(o){var r=o.chartCtx,a=o.ttCtx,d=o.opt,h=o.e,c=r.w,p=this.getElTooltip();p&&(a.tooltipRect={x:0,y:0,ttWidth:p.getBoundingClientRect().width,ttHeight:p.getBoundingClientRect().height},a.e=h,a.tooltipUtil.hasBars()&&!c.globals.comboCharts&&!a.isBarShared&&this.tConfig.onDatasetHover.highlightDataSeries&&new xt(r).toggleSeriesOnHover(h,h.target.parentNode),a.fixedTooltip&&a.drawFixedTooltipRect(),c.globals.axisCharts?a.axisChartsTooltips({e:h,opt:d,tooltipRect:a.tooltipRect}):a.nonAxisChartsTooltips({e:h,opt:d,tooltipRect:a.tooltipRect}))}},{key:"axisChartsTooltips",value:function(o){var r,a,d=o.e,h=o.opt,c=this.w,p=h.elGrid.getBoundingClientRect(),f=d.type==="touchmove"?d.touches[0].clientX:d.clientX,v=d.type==="touchmove"?d.touches[0].clientY:d.clientY;if(this.clientY=v,this.clientX=f,c.globals.capturedSeriesIndex=-1,c.globals.capturedDataPointIndex=-1,v<p.top||v>p.top+p.height)this.handleMouseOut(h);else{if(Array.isArray(this.tConfig.enabledOnSeries)&&!c.config.tooltip.shared){var y=parseInt(h.paths.getAttribute("index"),10);if(this.tConfig.enabledOnSeries.indexOf(y)<0)return void this.handleMouseOut(h)}var b=this.getElTooltip(),w=this.getElXCrosshairs(),R=c.globals.xyCharts||c.config.chart.type==="bar"&&!c.globals.isBarHorizontal&&this.tooltipUtil.hasBars()&&this.tConfig.shared||c.globals.comboCharts&&this.tooltipUtil.hasBars();if(d.type==="mousemove"||d.type==="touchmove"||d.type==="mouseup"){if(c.globals.collapsedSeries.length+c.globals.ancillaryCollapsedSeries.length===c.globals.series.length)return;w!==null&&w.classList.add("apexcharts-active");var T=this.yaxisTooltips.filter(function(G){return G===!0});if(this.ycrosshairs!==null&&T.length&&this.ycrosshairs.classList.add("apexcharts-active"),R&&!this.showOnIntersect)this.handleStickyTooltip(d,f,v,h);else if(c.config.chart.type==="heatmap"||c.config.chart.type==="treemap"){var F=this.intersect.handleHeatTreeTooltip({e:d,opt:h,x:r,y:a,type:c.config.chart.type});r=F.x,a=F.y,b.style.left=r+"px",b.style.top=a+"px"}else this.tooltipUtil.hasBars()&&this.intersect.handleBarTooltip({e:d,opt:h}),this.tooltipUtil.hasMarkers()&&this.intersect.handleMarkerTooltip({e:d,opt:h,x:r,y:a});if(this.yaxisTooltips.length)for(var I=0;I<c.config.yaxis.length;I++)this.axesTooltip.drawYaxisTooltipText(I,v,this.xyRatios);h.tooltipEl.classList.add("apexcharts-active")}else d.type!=="mouseout"&&d.type!=="touchend"||this.handleMouseOut(h)}}},{key:"nonAxisChartsTooltips",value:function(o){var r=o.e,a=o.opt,d=o.tooltipRect,h=this.w,c=a.paths.getAttribute("rel"),p=this.getElTooltip(),f=h.globals.dom.elWrap.getBoundingClientRect();if(r.type==="mousemove"||r.type==="touchmove"){p.classList.add("apexcharts-active"),this.tooltipLabels.drawSeriesTexts({ttItems:a.ttItems,i:parseInt(c,10)-1,shared:!1});var v=h.globals.clientX-f.left-d.ttWidth/2,y=h.globals.clientY-f.top-d.ttHeight-10;if(p.style.left=v+"px",p.style.top=y+"px",h.config.legend.tooltipHoverFormatter){var b=c-1,w=(0,h.config.legend.tooltipHoverFormatter)(this.legendLabels[b].getAttribute("data:default-text"),{seriesIndex:b,dataPointIndex:b,w:h});this.legendLabels[b].innerHTML=w}}else r.type!=="mouseout"&&r.type!=="touchend"||(p.classList.remove("apexcharts-active"),h.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(R){var T=R.getAttribute("data:default-text");R.innerHTML=decodeURIComponent(T)}))}},{key:"handleStickyTooltip",value:function(o,r,a,d){var h=this.w,c=this.tooltipUtil.getNearestValues({context:this,hoverArea:d.hoverArea,elGrid:d.elGrid,clientX:r,clientY:a}),p=c.j,f=c.capturedSeries;h.globals.collapsedSeriesIndices.includes(f)&&(f=null);var v=d.elGrid.getBoundingClientRect();if(c.hoverX<0||c.hoverX>v.width)this.handleMouseOut(d);else if(f!==null)this.handleStickyCapturedSeries(o,f,d,p);else if(this.tooltipUtil.isXoverlap(p)||h.globals.isBarHorizontal){var y=h.globals.series.findIndex(function(b,w){return!h.globals.collapsedSeriesIndices.includes(w)});this.create(o,this,y,p,d.ttItems)}}},{key:"handleStickyCapturedSeries",value:function(o,r,a,d){var h=this.w;if(!this.tConfig.shared&&h.globals.series[r][d]===null)return void this.handleMouseOut(a);if(h.globals.series[r][d]!==void 0)this.tConfig.shared&&this.tooltipUtil.isXoverlap(d)&&this.tooltipUtil.isInitialSeriesSameLen()?this.create(o,this,r,d,a.ttItems):this.create(o,this,r,d,a.ttItems,!1);else if(this.tooltipUtil.isXoverlap(d)){var c=h.globals.series.findIndex(function(p,f){return!h.globals.collapsedSeriesIndices.includes(f)});this.create(o,this,c,d,a.ttItems)}}},{key:"deactivateHoverFilter",value:function(){for(var o=this.w,r=new $(this.ctx),a=o.globals.dom.Paper.select(".apexcharts-bar-area"),d=0;d<a.length;d++)r.pathMouseLeave(a[d])}},{key:"handleMouseOut",value:function(o){var r=this.w,a=this.getElXCrosshairs();if(o.tooltipEl.classList.remove("apexcharts-active"),this.deactivateHoverFilter(),r.config.chart.type!=="bubble"&&this.marker.resetPointsSize(),a!==null&&a.classList.remove("apexcharts-active"),this.ycrosshairs!==null&&this.ycrosshairs.classList.remove("apexcharts-active"),this.isXAxisTooltipEnabled&&this.xaxisTooltip.classList.remove("apexcharts-active"),this.yaxisTooltips.length){this.yaxisTTEls===null&&(this.yaxisTTEls=r.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));for(var d=0;d<this.yaxisTTEls.length;d++)this.yaxisTTEls[d].classList.remove("apexcharts-active")}r.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(h){var c=h.getAttribute("data:default-text");h.innerHTML=decodeURIComponent(c)})}},{key:"markerClick",value:function(o,r,a){var d=this.w;typeof d.config.chart.events.markerClick=="function"&&d.config.chart.events.markerClick(o,this.ctx,{seriesIndex:r,dataPointIndex:a,w:d}),this.ctx.events.fireEvent("markerClick",[o,this.ctx,{seriesIndex:r,dataPointIndex:a,w:d}])}},{key:"create",value:function(o,r,a,d,h){var c,p,f,v,y,b,w,R,T,F,I,G,H,m,x,P,k=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,V=this.w,B=r;o.type==="mouseup"&&this.markerClick(o,a,d),k===null&&(k=this.tConfig.shared);var j=this.tooltipUtil.hasMarkers(a),K=this.tooltipUtil.getElBars();if(V.config.legend.tooltipHoverFormatter){var ie=V.config.legend.tooltipHoverFormatter,he=Array.from(this.legendLabels);he.forEach(function(rs){var Li=rs.getAttribute("data:default-text");rs.innerHTML=decodeURIComponent(Li)});for(var ae=0;ae<he.length;ae++){var Le=he[ae],Be=parseInt(Le.getAttribute("i"),10),je=decodeURIComponent(Le.getAttribute("data:default-text")),it=ie(je,{seriesIndex:k?Be:a,dataPointIndex:d,w:V});if(k)Le.innerHTML=V.globals.collapsedSeriesIndices.indexOf(Be)<0?it:je;else if(Le.innerHTML=Be===a?it:je,a===Be)break}}var dt=s(s({ttItems:h,i:a,j:d},((c=V.globals.seriesRange)===null||c===void 0||(p=c[a])===null||p===void 0||(f=p[d])===null||f===void 0||(v=f.y[0])===null||v===void 0?void 0:v.y1)!==void 0&&{y1:(y=V.globals.seriesRange)===null||y===void 0||(b=y[a])===null||b===void 0||(w=b[d])===null||w===void 0||(R=w.y[0])===null||R===void 0?void 0:R.y1}),((T=V.globals.seriesRange)===null||T===void 0||(F=T[a])===null||F===void 0||(I=F[d])===null||I===void 0||(G=I.y[0])===null||G===void 0?void 0:G.y2)!==void 0&&{y2:(H=V.globals.seriesRange)===null||H===void 0||(m=H[a])===null||m===void 0||(x=m[d])===null||x===void 0||(P=x.y[0])===null||P===void 0?void 0:P.y2});if(k){if(B.tooltipLabels.drawSeriesTexts(s(s({},dt),{},{shared:!this.showOnIntersect&&this.tConfig.shared})),j)V.globals.markers.largestSize>0?B.marker.enlargePoints(d):B.tooltipPosition.moveDynamicPointsOnHover(d);else if(this.tooltipUtil.hasBars()&&(this.barSeriesHeight=this.tooltipUtil.getBarsHeight(K),this.barSeriesHeight>0)){var rt=new $(this.ctx),Ot=V.globals.dom.Paper.select(".apexcharts-bar-area[j='".concat(d,"']"));this.deactivateHoverFilter(),this.tooltipPosition.moveStickyTooltipOverBars(d,a);for(var Ut=0;Ut<Ot.length;Ut++)rt.pathMouseEnter(Ot[Ut])}}else B.tooltipLabels.drawSeriesTexts(s({shared:!1},dt)),this.tooltipUtil.hasBars()&&B.tooltipPosition.moveStickyTooltipOverBars(d,a),j&&B.tooltipPosition.moveMarkers(a,d)}}]),O}(),Ol=function(){function O(o){l(this,O),this.w=o.w,this.barCtx=o,this.totalFormatter=this.w.config.plotOptions.bar.dataLabels.total.formatter,this.totalFormatter||(this.totalFormatter=this.w.config.dataLabels.formatter)}return g(O,[{key:"handleBarDataLabels",value:function(o){var r=o.x,a=o.y,d=o.y1,h=o.y2,c=o.i,p=o.j,f=o.realIndex,v=o.groupIndex,y=o.series,b=o.barHeight,w=o.barWidth,R=o.barXPosition,T=o.barYPosition,F=o.visibleSeries,I=o.renderedPath,G=this.w,H=new $(this.barCtx.ctx),m=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[f]:this.barCtx.strokeWidth,x=r+parseFloat(w*F),P=a+parseFloat(b*F);G.globals.isXNumeric&&!G.globals.isBarHorizontal&&(x=r+parseFloat(w*(F+1)),P=a+parseFloat(b*(F+1))-m);var k,V=null,B=r,j=a,K={},ie=G.config.dataLabels,he=this.barCtx.barOptions.dataLabels,ae=this.barCtx.barOptions.dataLabels.total;T!==void 0&&this.barCtx.isRangeBar&&(P=T,j=T),R!==void 0&&this.barCtx.isVerticalGroupedRangeBar&&(x=R,B=R);var Le=ie.offsetX,Be=ie.offsetY,je={width:0,height:0};if(G.config.dataLabels.enabled){var it=this.barCtx.series[c][p];je=H.getTextRects(G.globals.yLabelFormatters[0](it),parseFloat(ie.style.fontSize))}var dt={x:r,y:a,i:c,j:p,realIndex:f,groupIndex:v||-1,renderedPath:I,bcx:x,bcy:P,barHeight:b,barWidth:w,textRects:je,strokeWidth:m,dataLabelsX:B,dataLabelsY:j,dataLabelsConfig:ie,barDataLabelsConfig:he,barTotalDataLabelsConfig:ae,offX:Le,offY:Be};return K=this.barCtx.isHorizontal?this.calculateBarsDataLabelsPosition(dt):this.calculateColumnsDataLabelsPosition(dt),I.attr({cy:K.bcy,cx:K.bcx,j:p,val:y[c][p],barHeight:b,barWidth:w}),k=this.drawCalculatedDataLabels({x:K.dataLabelsX,y:K.dataLabelsY,val:this.barCtx.isRangeBar?[d,h]:y[c][p],i:f,j:p,barWidth:w,barHeight:b,textRects:je,dataLabelsConfig:ie}),G.config.chart.stacked&&ae.enabled&&(V=this.drawTotalDataLabels({x:K.totalDataLabelsX,y:K.totalDataLabelsY,barWidth:w,barHeight:b,realIndex:f,textAnchor:K.totalDataLabelsAnchor,val:this.getStackedTotalDataLabel({realIndex:f,j:p}),dataLabelsConfig:ie,barTotalDataLabelsConfig:ae})),{dataLabels:k,totalDataLabels:V}}},{key:"getStackedTotalDataLabel",value:function(o){var r=o.realIndex,a=o.j,d=this.w,h=this.barCtx.stackedSeriesTotals[a];return this.totalFormatter&&(h=this.totalFormatter(h,s(s({},d),{},{seriesIndex:r,dataPointIndex:a,w:d}))),h}},{key:"calculateColumnsDataLabelsPosition",value:function(o){var r,a,d=this.w,h=o.i,c=o.j,p=o.realIndex,f=o.groupIndex,v=o.y,y=o.bcx,b=o.barWidth,w=o.barHeight,R=o.textRects,T=o.dataLabelsX,F=o.dataLabelsY,I=o.dataLabelsConfig,G=o.barDataLabelsConfig,H=o.barTotalDataLabelsConfig,m=o.strokeWidth,x=o.offX,P=o.offY;w=Math.abs(w);var k=d.config.plotOptions.bar.dataLabels.orientation==="vertical",V=this.barCtx.barHelpers.getZeroValueEncounters({i:h,j:c}).zeroEncounters;y=y-m/2+(f!==-1?f*b:0);var B=d.globals.gridWidth/d.globals.dataPoints;this.barCtx.isVerticalGroupedRangeBar?T+=b/2:(T=d.globals.isXNumeric?y-b/2+x:y-B+b/2+x,V>0&&d.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(T-=b*V)),k&&(T=T+R.height/2-m/2-2);var j=this.barCtx.series[h][c]<0,K=v;switch(this.barCtx.isReversed&&(K=v-w+(j?2*w:0),v-=w),G.position){case"center":F=k?j?K-w/2+P:K+w/2-P:j?K-w/2+R.height/2+P:K+w/2+R.height/2-P;break;case"bottom":F=k?j?K-w+P:K+w-P:j?K-w+R.height+m+P:K+w-R.height/2+m-P;break;case"top":F=k?j?K+P:K-P:j?K-R.height/2-P:K+R.height+P}if(this.barCtx.lastActiveBarSerieIndex===p&&H.enabled){var ie=new $(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:p,j:c}),I.fontSize);r=j?K-ie.height/2-P-H.offsetY+18:K+ie.height+P+H.offsetY-18,a=T+H.offsetX}return d.config.chart.stacked||(F<0?F=0+m:F+R.height/3>d.globals.gridHeight&&(F=d.globals.gridHeight-m)),{bcx:y,bcy:v,dataLabelsX:T,dataLabelsY:F,totalDataLabelsX:a,totalDataLabelsY:r,totalDataLabelsAnchor:"middle"}}},{key:"calculateBarsDataLabelsPosition",value:function(o){var r=this.w,a=o.x,d=o.i,h=o.j,c=o.realIndex,p=o.groupIndex,f=o.bcy,v=o.barHeight,y=o.barWidth,b=o.textRects,w=o.dataLabelsX,R=o.strokeWidth,T=o.dataLabelsConfig,F=o.barDataLabelsConfig,I=o.barTotalDataLabelsConfig,G=o.offX,H=o.offY,m=r.globals.gridHeight/r.globals.dataPoints;y=Math.abs(y);var x,P,k=(f+=p!==-1?p*v:0)-(this.barCtx.isRangeBar?0:m)+v/2+b.height/2+H-3,V="start",B=this.barCtx.series[d][h]<0,j=a;switch(this.barCtx.isReversed&&(j=a+y-(B?2*y:0),a=r.globals.gridWidth-y),F.position){case"center":w=B?j+y/2-G:Math.max(b.width/2,j-y/2)+G;break;case"bottom":w=B?j+y-R-Math.round(b.width/2)-G:j-y+R+Math.round(b.width/2)+G;break;case"top":w=B?j-R+Math.round(b.width/2)-G:j-R-Math.round(b.width/2)+G}if(this.barCtx.lastActiveBarSerieIndex===c&&I.enabled){var K=new $(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:c,j:h}),T.fontSize);B?(x=j-R+Math.round(K.width/2)-G-I.offsetX-15,V="end"):x=j-R-Math.round(K.width/2)+G+I.offsetX+15,P=k+I.offsetY}return r.config.chart.stacked||(w<0?w=w+b.width+R:w+b.width/2>r.globals.gridWidth&&(w=r.globals.gridWidth-b.width-R)),{bcx:a,bcy:f,dataLabelsX:w,dataLabelsY:k,totalDataLabelsX:x,totalDataLabelsY:P,totalDataLabelsAnchor:V}}},{key:"drawCalculatedDataLabels",value:function(o){var r=o.x,a=o.y,d=o.val,h=o.i,c=o.j,p=o.textRects,f=o.barHeight,v=o.barWidth,y=o.dataLabelsConfig,b=this.w,w="rotate(0)";b.config.plotOptions.bar.dataLabels.orientation==="vertical"&&(w="rotate(-90, ".concat(r,", ").concat(a,")"));var R=new Kt(this.barCtx.ctx),T=new $(this.barCtx.ctx),F=y.formatter,I=null,G=b.globals.collapsedSeriesIndices.indexOf(h)>-1;if(y.enabled&&!G){I=T.group({class:"apexcharts-data-labels",transform:w});var H="";d!==void 0&&(H=F(d,s(s({},b),{},{seriesIndex:h,dataPointIndex:c,w:b}))),!d&&b.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(H="");var m=b.globals.series[h][c]<0,x=b.config.plotOptions.bar.dataLabels.position;b.config.plotOptions.bar.dataLabels.orientation==="vertical"&&(x==="top"&&(y.textAnchor=m?"end":"start"),x==="center"&&(y.textAnchor="middle"),x==="bottom"&&(y.textAnchor=m?"end":"start")),this.barCtx.isRangeBar&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&v<T.getTextRects(H,parseFloat(y.style.fontSize)).width&&(H=""),b.config.chart.stacked&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&(this.barCtx.isHorizontal?p.width/1.6>Math.abs(v)&&(H=""):p.height/1.6>Math.abs(f)&&(H=""));var P=s({},y);this.barCtx.isHorizontal&&d<0&&(y.textAnchor==="start"?P.textAnchor="end":y.textAnchor==="end"&&(P.textAnchor="start")),R.plotDataLabelsText({x:r,y:a,text:H,i:h,j:c,parent:I,dataLabelsConfig:P,alwaysDrawDataLabel:!0,offsetCorrection:!0})}return I}},{key:"drawTotalDataLabels",value:function(o){var r,a=o.x,d=o.y,h=o.val,c=o.barWidth,p=o.barHeight,f=o.realIndex,v=o.textAnchor,y=o.barTotalDataLabelsConfig,b=this.w,w=new $(this.barCtx.ctx);return y.enabled&&a!==void 0&&d!==void 0&&this.barCtx.lastActiveBarSerieIndex===f&&(r=w.drawText({x:a-(!b.globals.isBarHorizontal&&b.globals.seriesGroups.length?c/b.globals.seriesGroups.length:0),y:d-(b.globals.isBarHorizontal&&b.globals.seriesGroups.length?p/b.globals.seriesGroups.length:0),foreColor:y.style.color,text:h,textAnchor:v,fontFamily:y.style.fontFamily,fontSize:y.style.fontSize,fontWeight:y.style.fontWeight})),r}}]),O}(),kl=function(){function O(o){l(this,O),this.w=o.w,this.barCtx=o}return g(O,[{key:"initVariables",value:function(o){var r=this.w;this.barCtx.series=o,this.barCtx.totalItems=0,this.barCtx.seriesLen=0,this.barCtx.visibleI=-1,this.barCtx.visibleItems=1;for(var a=0;a<o.length;a++)if(o[a].length>0&&(this.barCtx.seriesLen=this.barCtx.seriesLen+1,this.barCtx.totalItems+=o[a].length),r.globals.isXNumeric)for(var d=0;d<o[a].length;d++)r.globals.seriesX[a][d]>r.globals.minX&&r.globals.seriesX[a][d]<r.globals.maxX&&this.barCtx.visibleItems++;else this.barCtx.visibleItems=r.globals.dataPoints;this.barCtx.seriesLen===0&&(this.barCtx.seriesLen=1),this.barCtx.zeroSerieses=[],r.globals.comboCharts||this.checkZeroSeries({series:o})}},{key:"initialPositions",value:function(){var o,r,a,d,h,c,p,f,v=this.w,y=v.globals.dataPoints;this.barCtx.isRangeBar&&(y=v.globals.labels.length);var b=this.barCtx.seriesLen;if(v.config.plotOptions.bar.rangeBarGroupRows&&(b=1),this.barCtx.isHorizontal)h=(a=v.globals.gridHeight/y)/b,v.globals.isXNumeric&&(h=(a=v.globals.gridHeight/this.barCtx.totalItems)/this.barCtx.seriesLen),h=h*parseInt(this.barCtx.barOptions.barHeight,10)/100,String(this.barCtx.barOptions.barHeight).indexOf("%")===-1&&(h=parseInt(this.barCtx.barOptions.barHeight,10)),f=this.barCtx.baseLineInvertedY+v.globals.padHorizontal+(this.barCtx.isReversed?v.globals.gridWidth:0)-(this.barCtx.isReversed?2*this.barCtx.baseLineInvertedY:0),this.barCtx.isFunnel&&(f=v.globals.gridWidth/2),r=(a-h*this.barCtx.seriesLen)/2;else{if(d=v.globals.gridWidth/this.barCtx.visibleItems,v.config.xaxis.convertedCatToNumeric&&(d=v.globals.gridWidth/v.globals.dataPoints),c=d/b*parseInt(this.barCtx.barOptions.columnWidth,10)/100,v.globals.isXNumeric){var w=this.barCtx.xRatio;v.globals.minXDiff&&v.globals.minXDiff!==.5&&v.globals.minXDiff/w>0&&(d=v.globals.minXDiff/w),(c=d/b*parseInt(this.barCtx.barOptions.columnWidth,10)/100)<1&&(c=1)}String(this.barCtx.barOptions.columnWidth).indexOf("%")===-1&&(c=parseInt(this.barCtx.barOptions.columnWidth,10)),p=v.globals.gridHeight-this.barCtx.baseLineY[this.barCtx.yaxisIndex]-(this.barCtx.isReversed?v.globals.gridHeight:0)+(this.barCtx.isReversed?2*this.barCtx.baseLineY[this.barCtx.yaxisIndex]:0),o=v.globals.padHorizontal+(d-c*this.barCtx.seriesLen)/2}return v.globals.barHeight=h,v.globals.barWidth=c,{x:o,y:r,yDivision:a,xDivision:d,barHeight:h,barWidth:c,zeroH:p,zeroW:f}}},{key:"initializeStackedPrevVars",value:function(o){var r=o.w;r.globals.hasSeriesGroups?r.globals.seriesGroups.forEach(function(a){o[a]||(o[a]={}),o[a].prevY=[],o[a].prevX=[],o[a].prevYF=[],o[a].prevXF=[],o[a].prevYVal=[],o[a].prevXVal=[]}):(o.prevY=[],o.prevX=[],o.prevYF=[],o.prevXF=[],o.prevYVal=[],o.prevXVal=[])}},{key:"initializeStackedXYVars",value:function(o){var r=o.w;r.globals.hasSeriesGroups?r.globals.seriesGroups.forEach(function(a){o[a]||(o[a]={}),o[a].xArrj=[],o[a].xArrjF=[],o[a].xArrjVal=[],o[a].yArrj=[],o[a].yArrjF=[],o[a].yArrjVal=[]}):(o.xArrj=[],o.xArrjF=[],o.xArrjVal=[],o.yArrj=[],o.yArrjF=[],o.yArrjVal=[])}},{key:"getPathFillColor",value:function(o,r,a,d){var h,c,p,f,v=this.w,y=new pt(this.barCtx.ctx),b=null,w=this.barCtx.barOptions.distributed?a:r;return this.barCtx.barOptions.colors.ranges.length>0&&this.barCtx.barOptions.colors.ranges.map(function(R){o[r][a]>=R.from&&o[r][a]<=R.to&&(b=R.color)}),v.config.series[r].data[a]&&v.config.series[r].data[a].fillColor&&(b=v.config.series[r].data[a].fillColor),y.fillPath({seriesNumber:this.barCtx.barOptions.distributed?w:d,dataPointIndex:a,color:b,value:o[r][a],fillConfig:(h=v.config.series[r].data[a])===null||h===void 0?void 0:h.fill,fillType:(c=v.config.series[r].data[a])!==null&&c!==void 0&&(p=c.fill)!==null&&p!==void 0&&p.type?(f=v.config.series[r].data[a])===null||f===void 0?void 0:f.fill.type:Array.isArray(v.config.fill.type)?v.config.fill.type[r]:v.config.fill.type})}},{key:"getStrokeWidth",value:function(o,r,a){var d=0,h=this.w;return this.barCtx.series[o][r]===void 0||this.barCtx.series[o][r]===null?this.barCtx.isNullValue=!0:this.barCtx.isNullValue=!1,h.config.stroke.show&&(this.barCtx.isNullValue||(d=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[a]:this.barCtx.strokeWidth)),d}},{key:"shouldApplyRadius",value:function(o){var r=this.w,a=!1;return r.config.plotOptions.bar.borderRadius>0&&(r.config.chart.stacked&&r.config.plotOptions.bar.borderRadiusWhenStacked==="last"?this.barCtx.lastActiveBarSerieIndex===o&&(a=!0):a=!0),a}},{key:"barBackground",value:function(o){var r=o.j,a=o.i,d=o.x1,h=o.x2,c=o.y1,p=o.y2,f=o.elSeries,v=this.w,y=new $(this.barCtx.ctx),b=new xt(this.barCtx.ctx).getActiveConfigSeriesIndex();if(this.barCtx.barOptions.colors.backgroundBarColors.length>0&&b===a){r>=this.barCtx.barOptions.colors.backgroundBarColors.length&&(r%=this.barCtx.barOptions.colors.backgroundBarColors.length);var w=this.barCtx.barOptions.colors.backgroundBarColors[r],R=y.drawRect(d!==void 0?d:0,c!==void 0?c:0,h!==void 0?h:v.globals.gridWidth,p!==void 0?p:v.globals.gridHeight,this.barCtx.barOptions.colors.backgroundBarRadius,w,this.barCtx.barOptions.colors.backgroundBarOpacity);f.add(R),R.node.classList.add("apexcharts-backgroundBar")}}},{key:"getColumnPaths",value:function(o){var r,a=o.barWidth,d=o.barXPosition,h=o.y1,c=o.y2,p=o.strokeWidth,f=o.seriesGroup,v=o.realIndex,y=o.i,b=o.j,w=o.w,R=new $(this.barCtx.ctx);(p=Array.isArray(p)?p[v]:p)||(p=0);var T=a,F=d;(r=w.config.series[v].data[b])!==null&&r!==void 0&&r.columnWidthOffset&&(F=d-w.config.series[v].data[b].columnWidthOffset/2,T=a+w.config.series[v].data[b].columnWidthOffset);var I=F,G=F+T;h+=.001,c+=.001;var H=R.move(I,h),m=R.move(I,h),x=R.line(G-p,h);if(w.globals.previousPaths.length>0&&(m=this.barCtx.getPreviousPath(v,b,!1)),H=H+R.line(I,c)+R.line(G-p,c)+R.line(G-p,h)+(w.config.plotOptions.bar.borderRadiusApplication==="around"?" Z":" z"),m=m+R.line(I,h)+x+x+x+x+x+R.line(I,h)+(w.config.plotOptions.bar.borderRadiusApplication==="around"?" Z":" z"),this.shouldApplyRadius(v)&&(H=R.roundPathCorners(H,w.config.plotOptions.bar.borderRadius)),w.config.chart.stacked){var P=this.barCtx;w.globals.hasSeriesGroups&&f&&(P=this.barCtx[f]),P.yArrj.push(c),P.yArrjF.push(Math.abs(h-c)),P.yArrjVal.push(this.barCtx.series[y][b])}return{pathTo:H,pathFrom:m}}},{key:"getBarpaths",value:function(o){var r,a=o.barYPosition,d=o.barHeight,h=o.x1,c=o.x2,p=o.strokeWidth,f=o.seriesGroup,v=o.realIndex,y=o.i,b=o.j,w=o.w,R=new $(this.barCtx.ctx);(p=Array.isArray(p)?p[v]:p)||(p=0);var T=a,F=d;(r=w.config.series[v].data[b])!==null&&r!==void 0&&r.barHeightOffset&&(T=a-w.config.series[v].data[b].barHeightOffset/2,F=d+w.config.series[v].data[b].barHeightOffset);var I=T,G=T+F;h+=.001,c+=.001;var H=R.move(h,I),m=R.move(h,I);w.globals.previousPaths.length>0&&(m=this.barCtx.getPreviousPath(v,b,!1));var x=R.line(h,G-p);if(H=H+R.line(c,I)+R.line(c,G-p)+x+(w.config.plotOptions.bar.borderRadiusApplication==="around"?" Z":" z"),m=m+R.line(h,I)+x+x+x+x+x+R.line(h,I)+(w.config.plotOptions.bar.borderRadiusApplication==="around"?" Z":" z"),this.shouldApplyRadius(v)&&(H=R.roundPathCorners(H,w.config.plotOptions.bar.borderRadius)),w.config.chart.stacked){var P=this.barCtx;w.globals.hasSeriesGroups&&f&&(P=this.barCtx[f]),P.xArrj.push(c),P.xArrjF.push(Math.abs(h-c)),P.xArrjVal.push(this.barCtx.series[y][b])}return{pathTo:H,pathFrom:m}}},{key:"checkZeroSeries",value:function(o){for(var r=o.series,a=this.w,d=0;d<r.length;d++){for(var h=0,c=0;c<r[a.globals.maxValsInArrayIndex].length;c++)h+=r[d][c];h===0&&this.barCtx.zeroSerieses.push(d)}}},{key:"getXForValue",value:function(o,r){var a=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2]?r:null;return o!=null&&(a=r+o/this.barCtx.invertedYRatio-2*(this.barCtx.isReversed?o/this.barCtx.invertedYRatio:0)),a}},{key:"getYForValue",value:function(o,r){var a=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2]?r:null;return o!=null&&(a=r-o/this.barCtx.yRatio[this.barCtx.yaxisIndex]+2*(this.barCtx.isReversed?o/this.barCtx.yRatio[this.barCtx.yaxisIndex]:0)),a}},{key:"getGoalValues",value:function(o,r,a,d,h){var c=this,p=this.w,f=[],v=function(w,R){var T;f.push((C(T={},o,o==="x"?c.getXForValue(w,r,!1):c.getYForValue(w,a,!1)),C(T,"attrs",R),T))};if(p.globals.seriesGoals[d]&&p.globals.seriesGoals[d][h]&&Array.isArray(p.globals.seriesGoals[d][h])&&p.globals.seriesGoals[d][h].forEach(function(w){v(w.value,w)}),this.barCtx.barOptions.isDumbbell&&p.globals.seriesRange.length){var y=this.barCtx.barOptions.dumbbellColors?this.barCtx.barOptions.dumbbellColors:p.globals.colors,b={strokeHeight:o==="x"?0:p.globals.markers.size[d],strokeWidth:o==="x"?p.globals.markers.size[d]:0,strokeDashArray:0,strokeLineCap:"round",strokeColor:Array.isArray(y[d])?y[d][0]:y[d]};v(p.globals.seriesRangeStart[d][h],b),v(p.globals.seriesRangeEnd[d][h],s(s({},b),{},{strokeColor:Array.isArray(y[d])?y[d][1]:y[d]}))}return f}},{key:"drawGoalLine",value:function(o){var r=o.barXPosition,a=o.barYPosition,d=o.goalX,h=o.goalY,c=o.barWidth,p=o.barHeight,f=new $(this.barCtx.ctx),v=f.group({className:"apexcharts-bar-goals-groups"});v.node.classList.add("apexcharts-element-hidden"),this.barCtx.w.globals.delayedElements.push({el:v.node}),v.attr("clip-path","url(#gridRectMarkerMask".concat(this.barCtx.w.globals.cuid,")"));var y=null;return this.barCtx.isHorizontal?Array.isArray(d)&&d.forEach(function(b){var w=b.attrs.strokeHeight!==void 0?b.attrs.strokeHeight:p/2,R=a+w+p/2;y=f.drawLine(b.x,R-2*w,b.x,R,b.attrs.strokeColor?b.attrs.strokeColor:void 0,b.attrs.strokeDashArray,b.attrs.strokeWidth?b.attrs.strokeWidth:2,b.attrs.strokeLineCap),v.add(y)}):Array.isArray(h)&&h.forEach(function(b){var w=b.attrs.strokeWidth!==void 0?b.attrs.strokeWidth:c/2,R=r+w+c/2;y=f.drawLine(R-2*w,b.y,R,b.y,b.attrs.strokeColor?b.attrs.strokeColor:void 0,b.attrs.strokeDashArray,b.attrs.strokeHeight?b.attrs.strokeHeight:2,b.attrs.strokeLineCap),v.add(y)}),v}},{key:"drawBarShadow",value:function(o){var r=o.prevPaths,a=o.currPaths,d=o.color,h=this.w,c=r.x,p=r.x1,f=r.barYPosition,v=a.x,y=a.x1,b=a.barYPosition,w=f+a.barHeight,R=new $(this.barCtx.ctx),T=new _,F=R.move(p,w)+R.line(c,w)+R.line(v,b)+R.line(y,b)+R.line(p,w)+(h.config.plotOptions.bar.borderRadiusApplication==="around"?" Z":" z");return R.drawPath({d:F,fill:T.shadeColor(.5,_.rgb2hex(d)),stroke:"none",strokeWidth:0,fillOpacity:1,classes:"apexcharts-bar-shadows"})}},{key:"getZeroValueEncounters",value:function(o){var r=o.i,a=o.j,d=this.w,h=0,c=0;return d.globals.seriesPercent.forEach(function(p,f){p[a]&&h++,f<r&&p[a]===0&&c++}),{nonZeroColumns:h,zeroEncounters:c}}}]),O}(),Qs=function(){function O(o,r){l(this,O),this.ctx=o,this.w=o.w;var a=this.w;this.barOptions=a.config.plotOptions.bar,this.isHorizontal=this.barOptions.horizontal,this.strokeWidth=a.config.stroke.width,this.isNullValue=!1,this.isRangeBar=a.globals.seriesRange.length&&this.isHorizontal,this.isVerticalGroupedRangeBar=!a.globals.isBarHorizontal&&a.globals.seriesRange.length&&a.config.plotOptions.bar.rangeBarGroupRows,this.isFunnel=this.barOptions.isFunnel,this.xyRatios=r,this.xyRatios!==null&&(this.xRatio=r.xRatio,this.yRatio=r.yRatio,this.invertedXRatio=r.invertedXRatio,this.invertedYRatio=r.invertedYRatio,this.baseLineY=r.baseLineY,this.baseLineInvertedY=r.baseLineInvertedY),this.yaxisIndex=0,this.seriesLen=0,this.pathArr=[];var d=new xt(this.ctx);this.lastActiveBarSerieIndex=d.getActiveConfigSeriesIndex("desc",["bar","column"]);var h=d.getBarSeriesIndices(),c=new Y(this.ctx);this.stackedSeriesTotals=c.getStackedSeriesTotals(this.w.config.series.map(function(p,f){return h.indexOf(f)===-1?f:-1}).filter(function(p){return p!==-1})),this.barHelpers=new kl(this)}return g(O,[{key:"draw",value:function(o,r){var a=this.w,d=new $(this.ctx),h=new Y(this.ctx,a);o=h.getLogSeries(o),this.series=o,this.yRatio=h.getLogYRatios(this.yRatio),this.barHelpers.initVariables(o);var c=d.group({class:"apexcharts-bar-series apexcharts-plot-series"});a.config.dataLabels.enabled&&this.totalItems>this.barOptions.dataLabels.maxItems&&console.warn("WARNING: DataLabels are enabled but there are too many to display. This may cause performance issue when rendering - ApexCharts");for(var p=0,f=0;p<o.length;p++,f++){var v,y,b,w,R=void 0,T=void 0,F=[],I=[],G=a.globals.comboCharts?r[p]:p,H=d.group({class:"apexcharts-series",rel:p+1,seriesName:_.escapeString(a.globals.seriesNames[G]),"data:realIndex":G});this.ctx.series.addCollapsedClassToSeries(H,G),o[p].length>0&&(this.visibleI=this.visibleI+1);var m=0,x=0;this.yRatio.length>1&&(this.yaxisIndex=G),this.isReversed=a.config.yaxis[this.yaxisIndex]&&a.config.yaxis[this.yaxisIndex].reversed;var P=this.barHelpers.initialPositions();T=P.y,m=P.barHeight,y=P.yDivision,w=P.zeroW,R=P.x,x=P.barWidth,v=P.xDivision,b=P.zeroH,this.horizontal||I.push(R+x/2);var k=d.group({class:"apexcharts-datalabels","data:realIndex":G});a.globals.delayedElements.push({el:k.node}),k.node.classList.add("apexcharts-element-hidden");var V=d.group({class:"apexcharts-bar-goals-markers"}),B=d.group({class:"apexcharts-bar-shadows"});a.globals.delayedElements.push({el:B.node}),B.node.classList.add("apexcharts-element-hidden");for(var j=0;j<a.globals.dataPoints;j++){var K=this.barHelpers.getStrokeWidth(p,j,G),ie=null,he={indexes:{i:p,j,realIndex:G,bc:f},x:R,y:T,strokeWidth:K,elSeries:H};this.isHorizontal?(ie=this.drawBarPaths(s(s({},he),{},{barHeight:m,zeroW:w,yDivision:y})),x=this.series[p][j]/this.invertedYRatio):(ie=this.drawColumnPaths(s(s({},he),{},{xDivision:v,barWidth:x,zeroH:b})),m=this.series[p][j]/this.yRatio[this.yaxisIndex]);var ae=this.barHelpers.getPathFillColor(o,p,j,G);if(this.isFunnel&&this.barOptions.isFunnel3d&&this.pathArr.length&&j>0){var Le=this.barHelpers.drawBarShadow({color:typeof ae=="string"&&ae?.indexOf("url")===-1?ae:_.hexToRgba(a.globals.colors[p]),prevPaths:this.pathArr[this.pathArr.length-1],currPaths:ie});Le&&B.add(Le)}this.pathArr.push(ie);var Be=this.barHelpers.drawGoalLine({barXPosition:ie.barXPosition,barYPosition:ie.barYPosition,goalX:ie.goalX,goalY:ie.goalY,barHeight:m,barWidth:x});Be&&V.add(Be),T=ie.y,R=ie.x,j>0&&I.push(R+x/2),F.push(T),this.renderSeries({realIndex:G,pathFill:ae,j,i:p,pathFrom:ie.pathFrom,pathTo:ie.pathTo,strokeWidth:K,elSeries:H,x:R,y:T,series:o,barHeight:ie.barHeight?ie.barHeight:m,barWidth:ie.barWidth?ie.barWidth:x,elDataLabelsWrap:k,elGoalsMarkers:V,elBarShadows:B,visibleSeries:this.visibleI,type:"bar"})}a.globals.seriesXvalues[G]=I,a.globals.seriesYvalues[G]=F,c.add(H)}return c}},{key:"renderSeries",value:function(o){var r=o.realIndex,a=o.pathFill,d=o.lineFill,h=o.j,c=o.i,p=o.groupIndex,f=o.pathFrom,v=o.pathTo,y=o.strokeWidth,b=o.elSeries,w=o.x,R=o.y,T=o.y1,F=o.y2,I=o.series,G=o.barHeight,H=o.barWidth,m=o.barXPosition,x=o.barYPosition,P=o.elDataLabelsWrap,k=o.elGoalsMarkers,V=o.elBarShadows,B=o.visibleSeries,j=o.type,K=this.w,ie=new $(this.ctx);d||(d=this.barOptions.distributed?K.globals.stroke.colors[h]:K.globals.stroke.colors[r]),K.config.series[c].data[h]&&K.config.series[c].data[h].strokeColor&&(d=K.config.series[c].data[h].strokeColor),this.isNullValue&&(a="none");var he=h/K.config.chart.animations.animateGradually.delay*(K.config.chart.animations.speed/K.globals.dataPoints)/2.4,ae=ie.renderPaths({i:c,j:h,realIndex:r,pathFrom:f,pathTo:v,stroke:d,strokeWidth:y,strokeLineCap:K.config.stroke.lineCap,fill:a,animationDelay:he,initialSpeed:K.config.chart.animations.speed,dataChangeSpeed:K.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(j,"-area")});ae.attr("clip-path","url(#gridRectMask".concat(K.globals.cuid,")"));var Le=K.config.forecastDataPoints;Le.count>0&&h>=K.globals.dataPoints-Le.count&&(ae.node.setAttribute("stroke-dasharray",Le.dashArray),ae.node.setAttribute("stroke-width",Le.strokeWidth),ae.node.setAttribute("fill-opacity",Le.fillOpacity)),T!==void 0&&F!==void 0&&(ae.attr("data-range-y1",T),ae.attr("data-range-y2",F)),new se(this.ctx).setSelectionFilter(ae,r,h),b.add(ae);var Be=new Ol(this).handleBarDataLabels({x:w,y:R,y1:T,y2:F,i:c,j:h,series:I,realIndex:r,groupIndex:p,barHeight:G,barWidth:H,barXPosition:m,barYPosition:x,renderedPath:ae,visibleSeries:B});return Be.dataLabels!==null&&P.add(Be.dataLabels),Be.totalDataLabels&&P.add(Be.totalDataLabels),b.add(P),k&&b.add(k),V&&b.add(V),b}},{key:"drawBarPaths",value:function(o){var r,a=o.indexes,d=o.barHeight,h=o.strokeWidth,c=o.zeroW,p=o.x,f=o.y,v=o.yDivision,y=o.elSeries,b=this.w,w=a.i,R=a.j;if(b.globals.isXNumeric)r=(f=(b.globals.seriesX[w][R]-b.globals.minX)/this.invertedXRatio-d)+d*this.visibleI;else if(b.config.plotOptions.bar.hideZeroBarsWhenGrouped){var T=0,F=0;b.globals.seriesPercent.forEach(function(G,H){G[R]&&T++,H<w&&G[R]===0&&F++}),T>0&&(d=this.seriesLen*d/T),r=f+d*this.visibleI,r-=d*F}else r=f+d*this.visibleI;this.isFunnel&&(c-=(this.barHelpers.getXForValue(this.series[w][R],c)-c)/2),p=this.barHelpers.getXForValue(this.series[w][R],c);var I=this.barHelpers.getBarpaths({barYPosition:r,barHeight:d,x1:c,x2:p,strokeWidth:h,series:this.series,realIndex:a.realIndex,i:w,j:R,w:b});return b.globals.isXNumeric||(f+=v),this.barHelpers.barBackground({j:R,i:w,y1:r-d*this.visibleI,y2:d*this.seriesLen,elSeries:y}),{pathTo:I.pathTo,pathFrom:I.pathFrom,x1:c,x:p,y:f,goalX:this.barHelpers.getGoalValues("x",c,null,w,R),barYPosition:r,barHeight:d}}},{key:"drawColumnPaths",value:function(o){var r,a=o.indexes,d=o.x,h=o.y,c=o.xDivision,p=o.barWidth,f=o.zeroH,v=o.strokeWidth,y=o.elSeries,b=this.w,w=a.realIndex,R=a.i,T=a.j,F=a.bc;if(b.globals.isXNumeric){var I=this.getBarXForNumericXAxis({x:d,j:T,realIndex:w,barWidth:p});d=I.x,r=I.barXPosition}else if(b.config.plotOptions.bar.hideZeroBarsWhenGrouped){var G=this.barHelpers.getZeroValueEncounters({i:R,j:T}),H=G.nonZeroColumns,m=G.zeroEncounters;H>0&&(p=this.seriesLen*p/H),r=d+p*this.visibleI,r-=p*m}else r=d+p*this.visibleI;h=this.barHelpers.getYForValue(this.series[R][T],f);var x=this.barHelpers.getColumnPaths({barXPosition:r,barWidth:p,y1:f,y2:h,strokeWidth:v,series:this.series,realIndex:a.realIndex,i:R,j:T,w:b});return b.globals.isXNumeric||(d+=c),this.barHelpers.barBackground({bc:F,j:T,i:R,x1:r-v/2-p*this.visibleI,x2:p*this.seriesLen+v/2,elSeries:y}),{pathTo:x.pathTo,pathFrom:x.pathFrom,x:d,y:h,goalY:this.barHelpers.getGoalValues("y",null,f,R,T),barXPosition:r,barWidth:p}}},{key:"getBarXForNumericXAxis",value:function(o){var r=o.x,a=o.barWidth,d=o.realIndex,h=o.j,c=this.w,p=d;return c.globals.seriesX[d].length||(p=c.globals.maxValsInArrayIndex),c.globals.seriesX[p][h]&&(r=(c.globals.seriesX[p][h]-c.globals.minX)/this.xRatio-a*this.seriesLen/2),{barXPosition:r+a*this.visibleI,x:r}}},{key:"getPreviousPath",value:function(o,r){for(var a,d=this.w,h=0;h<d.globals.previousPaths.length;h++){var c=d.globals.previousPaths[h];c.paths&&c.paths.length>0&&parseInt(c.realIndex,10)===parseInt(o,10)&&d.globals.previousPaths[h].paths[r]!==void 0&&(a=d.globals.previousPaths[h].paths[r].d)}return a}}]),O}(),ua=function(O){S(r,Qs);var o=W(r);function r(){return l(this,r),o.apply(this,arguments)}return g(r,[{key:"draw",value:function(a,d){var h=this,c=this.w;this.graphics=new $(this.ctx),this.bar=new Qs(this.ctx,this.xyRatios);var p=new Y(this.ctx,c);a=p.getLogSeries(a),this.yRatio=p.getLogYRatios(this.yRatio),this.barHelpers.initVariables(a),c.config.chart.stackType==="100%"&&(a=c.globals.seriesPercent.slice()),this.series=a,this.barHelpers.initializeStackedPrevVars(this);for(var f=this.graphics.group({class:"apexcharts-bar-series apexcharts-plot-series"}),v=0,y=0,b=function(T,F){var I=void 0,G=void 0,H=void 0,m=void 0,x=-1;h.groupCtx=h,c.globals.seriesGroups.forEach(function(Ot,Ut){Ot.indexOf(c.config.series[T].name)>-1&&(x=Ut)}),x!==-1&&(h.groupCtx=h[c.globals.seriesGroups[x]]);var P=[],k=[],V=c.globals.comboCharts?d[T]:T;h.yRatio.length>1&&(h.yaxisIndex=V),h.isReversed=c.config.yaxis[h.yaxisIndex]&&c.config.yaxis[h.yaxisIndex].reversed;var B=h.graphics.group({class:"apexcharts-series",seriesName:_.escapeString(c.globals.seriesNames[V]),rel:T+1,"data:realIndex":V});h.ctx.series.addCollapsedClassToSeries(B,V);var j=h.graphics.group({class:"apexcharts-datalabels","data:realIndex":V}),K=h.graphics.group({class:"apexcharts-bar-goals-markers"}),ie=0,he=0,ae=h.initialPositions(v,y,I,G,H,m);y=ae.y,ie=ae.barHeight,G=ae.yDivision,m=ae.zeroW,v=ae.x,he=ae.barWidth,I=ae.xDivision,H=ae.zeroH,c.globals.barHeight=ie,c.globals.barWidth=he,h.barHelpers.initializeStackedXYVars(h),h.groupCtx.prevY.length===1&&h.groupCtx.prevY[0].every(function(Ot){return isNaN(Ot)})&&(h.groupCtx.prevY[0]=h.groupCtx.prevY[0].map(function(Ot){return H}),h.groupCtx.prevYF[0]=h.groupCtx.prevYF[0].map(function(Ot){return 0}));for(var Le=0;Le<c.globals.dataPoints;Le++){var Be=h.barHelpers.getStrokeWidth(T,Le,V),je={indexes:{i:T,j:Le,realIndex:V,bc:F},strokeWidth:Be,x:v,y,elSeries:B,groupIndex:x,seriesGroup:c.globals.seriesGroups[x]},it=null;h.isHorizontal?(it=h.drawStackedBarPaths(s(s({},je),{},{zeroW:m,barHeight:ie,yDivision:G})),he=h.series[T][Le]/h.invertedYRatio):(it=h.drawStackedColumnPaths(s(s({},je),{},{xDivision:I,barWidth:he,zeroH:H})),ie=h.series[T][Le]/h.yRatio[h.yaxisIndex]);var dt=h.barHelpers.drawGoalLine({barXPosition:it.barXPosition,barYPosition:it.barYPosition,goalX:it.goalX,goalY:it.goalY,barHeight:ie,barWidth:he});dt&&K.add(dt),y=it.y,v=it.x,P.push(v),k.push(y);var rt=h.barHelpers.getPathFillColor(a,T,Le,V);B=h.renderSeries({realIndex:V,pathFill:rt,j:Le,i:T,groupIndex:x,pathFrom:it.pathFrom,pathTo:it.pathTo,strokeWidth:Be,elSeries:B,x:v,y,series:a,barHeight:ie,barWidth:he,elDataLabelsWrap:j,elGoalsMarkers:K,type:"bar",visibleSeries:0})}c.globals.seriesXvalues[V]=P,c.globals.seriesYvalues[V]=k,h.groupCtx.prevY.push(h.groupCtx.yArrj),h.groupCtx.prevYF.push(h.groupCtx.yArrjF),h.groupCtx.prevYVal.push(h.groupCtx.yArrjVal),h.groupCtx.prevX.push(h.groupCtx.xArrj),h.groupCtx.prevXF.push(h.groupCtx.xArrjF),h.groupCtx.prevXVal.push(h.groupCtx.xArrjVal),f.add(B)},w=0,R=0;w<a.length;w++,R++)b(w,R);return f}},{key:"initialPositions",value:function(a,d,h,c,p,f){var v,y,b,w,R=this.w;return this.isHorizontal?(b=(b=c=R.globals.gridHeight/R.globals.dataPoints)*parseInt(R.config.plotOptions.bar.barHeight,10)/100,String(R.config.plotOptions.bar.barHeight).indexOf("%")===-1&&(b=parseInt(R.config.plotOptions.bar.barHeight,10)),f=this.baseLineInvertedY+R.globals.padHorizontal+(this.isReversed?R.globals.gridWidth:0)-(this.isReversed?2*this.baseLineInvertedY:0),d=(c-b)/2):(w=h=R.globals.gridWidth/R.globals.dataPoints,w=R.globals.isXNumeric&&R.globals.dataPoints>1?(h=R.globals.minXDiff/this.xRatio)*parseInt(this.barOptions.columnWidth,10)/100:w*parseInt(R.config.plotOptions.bar.columnWidth,10)/100,String(R.config.plotOptions.bar.columnWidth).indexOf("%")===-1&&(w=parseInt(R.config.plotOptions.bar.columnWidth,10)),p=R.globals.gridHeight-this.baseLineY[this.yaxisIndex]-(this.isReversed?R.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),a=R.globals.padHorizontal+(h-w)/2),{x:a,y:d,yDivision:c,xDivision:h,barHeight:(v=R.globals.seriesGroups)!==null&&v!==void 0&&v.length?b/R.globals.seriesGroups.length:b,barWidth:(y=R.globals.seriesGroups)!==null&&y!==void 0&&y.length?w/R.globals.seriesGroups.length:w,zeroH:p,zeroW:f}}},{key:"drawStackedBarPaths",value:function(a){for(var d,h=a.indexes,c=a.barHeight,p=a.strokeWidth,f=a.zeroW,v=a.x,y=a.y,b=a.groupIndex,w=a.seriesGroup,R=a.yDivision,T=a.elSeries,F=this.w,I=y+(b!==-1?b*c:0),G=h.i,H=h.j,m=0,x=0;x<this.groupCtx.prevXF.length;x++)m+=this.groupCtx.prevXF[x][H];var P=G;if(w&&(P=w.indexOf(F.config.series[G].name)),P>0){var k=f;this.groupCtx.prevXVal[P-1][H]<0?k=this.series[G][H]>=0?this.groupCtx.prevX[P-1][H]+m-2*(this.isReversed?m:0):this.groupCtx.prevX[P-1][H]:this.groupCtx.prevXVal[P-1][H]>=0&&(k=this.series[G][H]>=0?this.groupCtx.prevX[P-1][H]:this.groupCtx.prevX[P-1][H]-m+2*(this.isReversed?m:0)),d=k}else d=f;v=this.series[G][H]===null?d:d+this.series[G][H]/this.invertedYRatio-2*(this.isReversed?this.series[G][H]/this.invertedYRatio:0);var V=this.barHelpers.getBarpaths({barYPosition:I,barHeight:c,x1:d,x2:v,strokeWidth:p,series:this.series,realIndex:h.realIndex,seriesGroup:w,i:G,j:H,w:F});return this.barHelpers.barBackground({j:H,i:G,y1:I,y2:c,elSeries:T}),y+=R,{pathTo:V.pathTo,pathFrom:V.pathFrom,goalX:this.barHelpers.getGoalValues("x",f,null,G,H),barYPosition:I,x:v,y}}},{key:"drawStackedColumnPaths",value:function(a){var d=a.indexes,h=a.x,c=a.y,p=a.xDivision,f=a.barWidth,v=a.zeroH,y=a.groupIndex,b=a.seriesGroup,w=a.elSeries,R=this.w,T=d.i,F=d.j,I=d.bc;if(R.globals.isXNumeric){var G=R.globals.seriesX[T][F];G||(G=0),h=(G-R.globals.minX)/this.xRatio-f/2,R.globals.seriesGroups.length&&(h=(G-R.globals.minX)/this.xRatio-f/2*R.globals.seriesGroups.length)}for(var H,m=h+(y!==-1?y*f:0),x=0,P=0;P<this.groupCtx.prevYF.length;P++)x+=isNaN(this.groupCtx.prevYF[P][F])?0:this.groupCtx.prevYF[P][F];var k=T;if(b&&(k=b.indexOf(R.config.series[T].name)),k>0&&!R.globals.isXNumeric||k>0&&R.globals.isXNumeric&&R.globals.seriesX[T-1][F]===R.globals.seriesX[T][F]){var V,B,j,K=Math.min(this.yRatio.length+1,T+1);if(this.groupCtx.prevY[k-1]!==void 0&&this.groupCtx.prevY[k-1].length)for(var ie=1;ie<K;ie++){var he;if(!isNaN((he=this.groupCtx.prevY[k-ie])===null||he===void 0?void 0:he[F])){j=this.groupCtx.prevY[k-ie][F];break}}for(var ae=1;ae<K;ae++){var Le,Be;if(((Le=this.groupCtx.prevYVal[k-ae])===null||Le===void 0?void 0:Le[F])<0){B=this.series[T][F]>=0?j-x+2*(this.isReversed?x:0):j;break}if(((Be=this.groupCtx.prevYVal[k-ae])===null||Be===void 0?void 0:Be[F])>=0){B=this.series[T][F]>=0?j:j+x-2*(this.isReversed?x:0);break}}B===void 0&&(B=R.globals.gridHeight),H=(V=this.groupCtx.prevYF[0])!==null&&V!==void 0&&V.every(function(it){return it===0})&&this.groupCtx.prevYF.slice(1,k).every(function(it){return it.every(function(dt){return isNaN(dt)})})?v:B}else H=v;c=this.series[T][F]?H-this.series[T][F]/this.yRatio[this.yaxisIndex]+2*(this.isReversed?this.series[T][F]/this.yRatio[this.yaxisIndex]:0):H;var je=this.barHelpers.getColumnPaths({barXPosition:m,barWidth:f,y1:H,y2:c,yRatio:this.yRatio[this.yaxisIndex],strokeWidth:this.strokeWidth,series:this.series,seriesGroup:b,realIndex:d.realIndex,i:T,j:F,w:R});return this.barHelpers.barBackground({bc:I,j:F,i:T,x1:m,x2:f,elSeries:w}),h+=p,{pathTo:je.pathTo,pathFrom:je.pathFrom,goalY:this.barHelpers.getGoalValues("y",null,v,T,F),barXPosition:m,x:R.globals.isXNumeric?h-p:h,y:c}}}]),r}(),qr=function(O){S(r,Qs);var o=W(r);function r(){return l(this,r),o.apply(this,arguments)}return g(r,[{key:"draw",value:function(a,d,h){var c=this,p=this.w,f=new $(this.ctx),v=p.globals.comboCharts?d:p.config.chart.type,y=new pt(this.ctx);this.candlestickOptions=this.w.config.plotOptions.candlestick,this.boxOptions=this.w.config.plotOptions.boxPlot,this.isHorizontal=p.config.plotOptions.bar.horizontal;var b=new Y(this.ctx,p);a=b.getLogSeries(a),this.series=a,this.yRatio=b.getLogYRatios(this.yRatio),this.barHelpers.initVariables(a);for(var w=f.group({class:"apexcharts-".concat(v,"-series apexcharts-plot-series")}),R=function(F){c.isBoxPlot=p.config.chart.type==="boxPlot"||p.config.series[F].type==="boxPlot";var I,G,H,m,x=void 0,P=void 0,k=[],V=[],B=p.globals.comboCharts?h[F]:F,j=f.group({class:"apexcharts-series",seriesName:_.escapeString(p.globals.seriesNames[B]),rel:F+1,"data:realIndex":B});c.ctx.series.addCollapsedClassToSeries(j,B),a[F].length>0&&(c.visibleI=c.visibleI+1);var K,ie;c.yRatio.length>1&&(c.yaxisIndex=B);var he=c.barHelpers.initialPositions();P=he.y,K=he.barHeight,G=he.yDivision,m=he.zeroW,x=he.x,ie=he.barWidth,I=he.xDivision,H=he.zeroH,V.push(x+ie/2);for(var ae=f.group({class:"apexcharts-datalabels","data:realIndex":B}),Le=function(je){var it=c.barHelpers.getStrokeWidth(F,je,B),dt=null,rt={indexes:{i:F,j:je,realIndex:B},x,y:P,strokeWidth:it,elSeries:j};dt=c.isHorizontal?c.drawHorizontalBoxPaths(s(s({},rt),{},{yDivision:G,barHeight:K,zeroW:m})):c.drawVerticalBoxPaths(s(s({},rt),{},{xDivision:I,barWidth:ie,zeroH:H})),P=dt.y,x=dt.x,je>0&&V.push(x+ie/2),k.push(P),dt.pathTo.forEach(function(Ot,Ut){var rs=!c.isBoxPlot&&c.candlestickOptions.wick.useFillColor?dt.color[Ut]:p.globals.stroke.colors[F],Li=y.fillPath({seriesNumber:B,dataPointIndex:je,color:dt.color[Ut],value:a[F][je]});c.renderSeries({realIndex:B,pathFill:Li,lineFill:rs,j:je,i:F,pathFrom:dt.pathFrom,pathTo:Ot,strokeWidth:it,elSeries:j,x,y:P,series:a,barHeight:K,barWidth:ie,elDataLabelsWrap:ae,visibleSeries:c.visibleI,type:p.config.chart.type})})},Be=0;Be<p.globals.dataPoints;Be++)Le(Be);p.globals.seriesXvalues[B]=V,p.globals.seriesYvalues[B]=k,w.add(j)},T=0;T<a.length;T++)R(T);return w}},{key:"drawVerticalBoxPaths",value:function(a){var d=a.indexes,h=a.x;a.y;var c=a.xDivision,p=a.barWidth,f=a.zeroH,v=a.strokeWidth,y=this.w,b=new $(this.ctx),w=d.i,R=d.j,T=!0,F=y.config.plotOptions.candlestick.colors.upward,I=y.config.plotOptions.candlestick.colors.downward,G="";this.isBoxPlot&&(G=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var H=this.yRatio[this.yaxisIndex],m=d.realIndex,x=this.getOHLCValue(m,R),P=f,k=f;x.o>x.c&&(T=!1);var V=Math.min(x.o,x.c),B=Math.max(x.o,x.c),j=x.m;y.globals.isXNumeric&&(h=(y.globals.seriesX[m][R]-y.globals.minX)/this.xRatio-p/2);var K=h+p*this.visibleI;this.series[w][R]===void 0||this.series[w][R]===null?(V=f,B=f):(V=f-V/H,B=f-B/H,P=f-x.h/H,k=f-x.l/H,j=f-x.m/H);var ie=b.move(K,f),he=b.move(K+p/2,V);return y.globals.previousPaths.length>0&&(he=this.getPreviousPath(m,R,!0)),ie=this.isBoxPlot?[b.move(K,V)+b.line(K+p/2,V)+b.line(K+p/2,P)+b.line(K+p/4,P)+b.line(K+p-p/4,P)+b.line(K+p/2,P)+b.line(K+p/2,V)+b.line(K+p,V)+b.line(K+p,j)+b.line(K,j)+b.line(K,V+v/2),b.move(K,j)+b.line(K+p,j)+b.line(K+p,B)+b.line(K+p/2,B)+b.line(K+p/2,k)+b.line(K+p-p/4,k)+b.line(K+p/4,k)+b.line(K+p/2,k)+b.line(K+p/2,B)+b.line(K,B)+b.line(K,j)+"z"]:[b.move(K,B)+b.line(K+p/2,B)+b.line(K+p/2,P)+b.line(K+p/2,B)+b.line(K+p,B)+b.line(K+p,V)+b.line(K+p/2,V)+b.line(K+p/2,k)+b.line(K+p/2,V)+b.line(K,V)+b.line(K,B-v/2)],he+=b.move(K,V),y.globals.isXNumeric||(h+=c),{pathTo:ie,pathFrom:he,x:h,y:B,barXPosition:K,color:this.isBoxPlot?G:T?[F]:[I]}}},{key:"drawHorizontalBoxPaths",value:function(a){var d=a.indexes;a.x;var h=a.y,c=a.yDivision,p=a.barHeight,f=a.zeroW,v=a.strokeWidth,y=this.w,b=new $(this.ctx),w=d.i,R=d.j,T=this.boxOptions.colors.lower;this.isBoxPlot&&(T=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var F=this.invertedYRatio,I=d.realIndex,G=this.getOHLCValue(I,R),H=f,m=f,x=Math.min(G.o,G.c),P=Math.max(G.o,G.c),k=G.m;y.globals.isXNumeric&&(h=(y.globals.seriesX[I][R]-y.globals.minX)/this.invertedXRatio-p/2);var V=h+p*this.visibleI;this.series[w][R]===void 0||this.series[w][R]===null?(x=f,P=f):(x=f+x/F,P=f+P/F,H=f+G.h/F,m=f+G.l/F,k=f+G.m/F);var B=b.move(f,V),j=b.move(x,V+p/2);return y.globals.previousPaths.length>0&&(j=this.getPreviousPath(I,R,!0)),B=[b.move(x,V)+b.line(x,V+p/2)+b.line(H,V+p/2)+b.line(H,V+p/2-p/4)+b.line(H,V+p/2+p/4)+b.line(H,V+p/2)+b.line(x,V+p/2)+b.line(x,V+p)+b.line(k,V+p)+b.line(k,V)+b.line(x+v/2,V),b.move(k,V)+b.line(k,V+p)+b.line(P,V+p)+b.line(P,V+p/2)+b.line(m,V+p/2)+b.line(m,V+p-p/4)+b.line(m,V+p/4)+b.line(m,V+p/2)+b.line(P,V+p/2)+b.line(P,V)+b.line(k,V)+"z"],j+=b.move(x,V),y.globals.isXNumeric||(h+=c),{pathTo:B,pathFrom:j,x:P,y:h,barYPosition:V,color:T}}},{key:"getOHLCValue",value:function(a,d){var h=this.w;return{o:this.isBoxPlot?h.globals.seriesCandleH[a][d]:h.globals.seriesCandleO[a][d],h:this.isBoxPlot?h.globals.seriesCandleO[a][d]:h.globals.seriesCandleH[a][d],m:h.globals.seriesCandleM[a][d],l:this.isBoxPlot?h.globals.seriesCandleC[a][d]:h.globals.seriesCandleL[a][d],c:this.isBoxPlot?h.globals.seriesCandleL[a][d]:h.globals.seriesCandleC[a][d]}}}]),r}(),pa=function(){function O(o){l(this,O),this.ctx=o,this.w=o.w}return g(O,[{key:"checkColorRange",value:function(){var o=this.w,r=!1,a=o.config.plotOptions[o.config.chart.type];return a.colorScale.ranges.length>0&&a.colorScale.ranges.map(function(d,h){d.from<=0&&(r=!0)}),r}},{key:"getShadeColor",value:function(o,r,a,d){var h=this.w,c=1,p=h.config.plotOptions[o].shadeIntensity,f=this.determineColor(o,r,a);h.globals.hasNegs||d?c=h.config.plotOptions[o].reverseNegativeShade?f.percent<0?f.percent/100*(1.25*p):(1-f.percent/100)*(1.25*p):f.percent<=0?1-(1+f.percent/100)*p:(1-f.percent/100)*p:(c=1-f.percent/100,o==="treemap"&&(c=(1-f.percent/100)*(1.25*p)));var v=f.color,y=new _;return h.config.plotOptions[o].enableShades&&(v=this.w.config.theme.mode==="dark"?_.hexToRgba(y.shadeColor(-1*c,f.color),h.config.fill.opacity):_.hexToRgba(y.shadeColor(c,f.color),h.config.fill.opacity)),{color:v,colorProps:f}}},{key:"determineColor",value:function(o,r,a){var d=this.w,h=d.globals.series[r][a],c=d.config.plotOptions[o],p=c.colorScale.inverse?a:r;c.distributed&&d.config.chart.type==="treemap"&&(p=a);var f=d.globals.colors[p],v=null,y=Math.min.apply(Math,U(d.globals.series[r])),b=Math.max.apply(Math,U(d.globals.series[r]));c.distributed||o!=="heatmap"||(y=d.globals.minY,b=d.globals.maxY),c.colorScale.min!==void 0&&(y=c.colorScale.min<d.globals.minY?c.colorScale.min:d.globals.minY,b=c.colorScale.max>d.globals.maxY?c.colorScale.max:d.globals.maxY);var w=Math.abs(b)+Math.abs(y),R=100*h/(w===0?w-1e-6:w);return c.colorScale.ranges.length>0&&c.colorScale.ranges.map(function(T,F){if(h>=T.from&&h<=T.to){f=T.color,v=T.foreColor?T.foreColor:null,y=T.from,b=T.to;var I=Math.abs(b)+Math.abs(y);R=100*h/(I===0?I-1e-6:I)}}),{color:f,foreColor:v,percent:R}}},{key:"calculateDataLabels",value:function(o){var r=o.text,a=o.x,d=o.y,h=o.i,c=o.j,p=o.colorProps,f=o.fontSize,v=this.w.config.dataLabels,y=new $(this.ctx),b=new Kt(this.ctx),w=null;if(v.enabled){w=y.group({class:"apexcharts-data-labels"});var R=v.offsetX,T=v.offsetY,F=a+R,I=d+parseFloat(v.style.fontSize)/3+T;b.plotDataLabelsText({x:F,y:I,text:r,i:h,j:c,color:p.foreColor,parent:w,fontSize:f,dataLabelsConfig:v})}return w}},{key:"addListeners",value:function(o){var r=new $(this.ctx);o.node.addEventListener("mouseenter",r.pathMouseEnter.bind(this,o)),o.node.addEventListener("mouseleave",r.pathMouseLeave.bind(this,o)),o.node.addEventListener("mousedown",r.pathMouseDown.bind(this,o))}}]),O}(),Nl=function(){function O(o,r){l(this,O),this.ctx=o,this.w=o.w,this.xRatio=r.xRatio,this.yRatio=r.yRatio,this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.helpers=new pa(o),this.rectRadius=this.w.config.plotOptions.heatmap.radius,this.strokeWidth=this.w.config.stroke.show?this.w.config.stroke.width:0}return g(O,[{key:"draw",value:function(o){var r=this.w,a=new $(this.ctx),d=a.group({class:"apexcharts-heatmap"});d.attr("clip-path","url(#gridRectMask".concat(r.globals.cuid,")"));var h=r.globals.gridWidth/r.globals.dataPoints,c=r.globals.gridHeight/r.globals.series.length,p=0,f=!1;this.negRange=this.helpers.checkColorRange();var v=o.slice();r.config.yaxis[0].reversed&&(f=!0,v.reverse());for(var y=f?0:v.length-1;f?y<v.length:y>=0;f?y++:y--){var b=a.group({class:"apexcharts-series apexcharts-heatmap-series",seriesName:_.escapeString(r.globals.seriesNames[y]),rel:y+1,"data:realIndex":y});if(this.ctx.series.addCollapsedClassToSeries(b,y),r.config.chart.dropShadow.enabled){var w=r.config.chart.dropShadow;new se(this.ctx).dropShadow(b,w,y)}for(var R=0,T=r.config.plotOptions.heatmap.shadeIntensity,F=0;F<v[y].length;F++){var I=this.helpers.getShadeColor(r.config.chart.type,y,F,this.negRange),G=I.color,H=I.colorProps;r.config.fill.type==="image"&&(G=new pt(this.ctx).fillPath({seriesNumber:y,dataPointIndex:F,opacity:r.globals.hasNegs?H.percent<0?1-(1+H.percent/100):T+H.percent/100:H.percent/100,patternID:_.randomId(),width:r.config.fill.image.width?r.config.fill.image.width:h,height:r.config.fill.image.height?r.config.fill.image.height:c}));var m=this.rectRadius,x=a.drawRect(R,p,h,c,m);if(x.attr({cx:R,cy:p}),x.node.classList.add("apexcharts-heatmap-rect"),b.add(x),x.attr({fill:G,i:y,index:y,j:F,val:o[y][F],"stroke-width":this.strokeWidth,stroke:r.config.plotOptions.heatmap.useFillColorAsStroke?G:r.globals.stroke.colors[0],color:G}),this.helpers.addListeners(x),r.config.chart.animations.enabled&&!r.globals.dataChanged){var P=1;r.globals.resized||(P=r.config.chart.animations.speed),this.animateHeatMap(x,R,p,h,c,P)}if(r.globals.dataChanged){var k=1;if(this.dynamicAnim.enabled&&r.globals.shouldAnimate){k=this.dynamicAnim.speed;var V=r.globals.previousPaths[y]&&r.globals.previousPaths[y][F]&&r.globals.previousPaths[y][F].color;V||(V="rgba(255, 255, 255, 0)"),this.animateHeatColor(x,_.isColorHex(V)?V:_.rgb2hex(V),_.isColorHex(G)?G:_.rgb2hex(G),k)}}var B=(0,r.config.dataLabels.formatter)(r.globals.series[y][F],{value:r.globals.series[y][F],seriesIndex:y,dataPointIndex:F,w:r}),j=this.helpers.calculateDataLabels({text:B,x:R+h/2,y:p+c/2,i:y,j:F,colorProps:H,series:v});j!==null&&b.add(j),R+=h}p+=c,d.add(b)}var K=r.globals.yAxisScale[0].result.slice();return r.config.yaxis[0].reversed?K.unshift(""):K.push(""),r.globals.yAxisScale[0].result=K,d}},{key:"animateHeatMap",value:function(o,r,a,d,h,c){var p=new J(this.ctx);p.animateRect(o,{x:r+d/2,y:a+h/2,width:0,height:0},{x:r,y:a,width:d,height:h},c,function(){p.animationCompleted(o)})}},{key:"animateHeatColor",value:function(o,r,a,d){o.attr({fill:r}).animate(d).attr({fill:a})}}]),O}(),ga=function(){function O(o){l(this,O),this.ctx=o,this.w=o.w}return g(O,[{key:"drawYAxisTexts",value:function(o,r,a,d){var h=this.w,c=h.config.yaxis[0],p=h.globals.yLabelFormatters[0];return new $(this.ctx).drawText({x:o+c.labels.offsetX,y:r+c.labels.offsetY,text:p(d,a),textAnchor:"middle",fontSize:c.labels.style.fontSize,fontFamily:c.labels.style.fontFamily,foreColor:Array.isArray(c.labels.style.colors)?c.labels.style.colors[a]:c.labels.style.colors})}}]),O}(),fa=function(){function O(o){l(this,O),this.ctx=o,this.w=o.w;var r=this.w;this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animBeginArr=[0],this.animDur=0,this.donutDataLabels=this.w.config.plotOptions.pie.donut.labels,this.lineColorArr=r.globals.stroke.colors!==void 0?r.globals.stroke.colors:r.globals.colors,this.defaultSize=Math.min(r.globals.gridWidth,r.globals.gridHeight),this.centerY=this.defaultSize/2,this.centerX=r.globals.gridWidth/2,r.config.chart.type==="radialBar"?this.fullAngle=360:this.fullAngle=Math.abs(r.config.plotOptions.pie.endAngle-r.config.plotOptions.pie.startAngle),this.initialAngle=r.config.plotOptions.pie.startAngle%this.fullAngle,r.globals.radialSize=this.defaultSize/2.05-r.config.stroke.width-(r.config.chart.sparkline.enabled?0:r.config.chart.dropShadow.blur),this.donutSize=r.globals.radialSize*parseInt(r.config.plotOptions.pie.donut.size,10)/100,this.maxY=0,this.sliceLabels=[],this.sliceSizes=[],this.prevSectorAngleArr=[]}return g(O,[{key:"draw",value:function(o){var r=this,a=this.w,d=new $(this.ctx);if(this.ret=d.group({class:"apexcharts-pie"}),a.globals.noData)return this.ret;for(var h=0,c=0;c<o.length;c++)h+=_.negToZero(o[c]);var p=[],f=d.group();h===0&&(h=1e-5),o.forEach(function(V){r.maxY=Math.max(r.maxY,V)}),a.config.yaxis[0].max&&(this.maxY=a.config.yaxis[0].max),a.config.grid.position==="back"&&this.chartType==="polarArea"&&this.drawPolarElements(this.ret);for(var v=0;v<o.length;v++){var y=this.fullAngle*_.negToZero(o[v])/h;p.push(y),this.chartType==="polarArea"?(p[v]=this.fullAngle/o.length,this.sliceSizes.push(a.globals.radialSize*o[v]/this.maxY)):this.sliceSizes.push(a.globals.radialSize)}if(a.globals.dataChanged){for(var b,w=0,R=0;R<a.globals.previousPaths.length;R++)w+=_.negToZero(a.globals.previousPaths[R]);for(var T=0;T<a.globals.previousPaths.length;T++)b=this.fullAngle*_.negToZero(a.globals.previousPaths[T])/w,this.prevSectorAngleArr.push(b)}this.donutSize<0&&(this.donutSize=0);var F=a.config.plotOptions.pie.customScale,I=a.globals.gridWidth/2,G=a.globals.gridHeight/2,H=I-a.globals.gridWidth/2*F,m=G-a.globals.gridHeight/2*F;if(this.chartType==="donut"){var x=d.drawCircle(this.donutSize);x.attr({cx:this.centerX,cy:this.centerY,fill:a.config.plotOptions.pie.donut.background?a.config.plotOptions.pie.donut.background:"transparent"}),f.add(x)}var P=this.drawArcs(p,o);if(this.sliceLabels.forEach(function(V){P.add(V)}),f.attr({transform:"translate(".concat(H,", ").concat(m,") scale(").concat(F,")")}),f.add(P),this.ret.add(f),this.donutDataLabels.show){var k=this.renderInnerDataLabels(this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show,translateX:H,translateY:m});this.ret.add(k)}return a.config.grid.position==="front"&&this.chartType==="polarArea"&&this.drawPolarElements(this.ret),this.ret}},{key:"drawArcs",value:function(o,r){var a=this.w,d=new se(this.ctx),h=new $(this.ctx),c=new pt(this.ctx),p=h.group({class:"apexcharts-slices"}),f=this.initialAngle,v=this.initialAngle,y=this.initialAngle,b=this.initialAngle;this.strokeWidth=a.config.stroke.show?a.config.stroke.width:0;for(var w=0;w<o.length;w++){var R=h.group({class:"apexcharts-series apexcharts-pie-series",seriesName:_.escapeString(a.globals.seriesNames[w]),rel:w+1,"data:realIndex":w});p.add(R),v=b,y=(f=y)+o[w],b=v+this.prevSectorAngleArr[w];var T=y<f?this.fullAngle+y-f:y-f,F=c.fillPath({seriesNumber:w,size:this.sliceSizes[w],value:r[w]}),I=this.getChangedPath(v,b),G=h.drawPath({d:I,stroke:Array.isArray(this.lineColorArr)?this.lineColorArr[w]:this.lineColorArr,strokeWidth:0,fill:F,fillOpacity:a.config.fill.opacity,classes:"apexcharts-pie-area apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(w)});if(G.attr({index:0,j:w}),d.setSelectionFilter(G,0,w),a.config.chart.dropShadow.enabled){var H=a.config.chart.dropShadow;d.dropShadow(G,H,w)}this.addListeners(G,this.donutDataLabels),$.setAttrs(G.node,{"data:angle":T,"data:startAngle":f,"data:strokeWidth":this.strokeWidth,"data:value":r[w]});var m={x:0,y:0};this.chartType==="pie"||this.chartType==="polarArea"?m=_.polarToCartesian(this.centerX,this.centerY,a.globals.radialSize/1.25+a.config.plotOptions.pie.dataLabels.offset,(f+T/2)%this.fullAngle):this.chartType==="donut"&&(m=_.polarToCartesian(this.centerX,this.centerY,(a.globals.radialSize+this.donutSize)/2+a.config.plotOptions.pie.dataLabels.offset,(f+T/2)%this.fullAngle)),R.add(G);var x=0;if(!this.initialAnim||a.globals.resized||a.globals.dataChanged?this.animBeginArr.push(0):((x=T/this.fullAngle*a.config.chart.animations.speed)===0&&(x=1),this.animDur=x+this.animDur,this.animBeginArr.push(this.animDur)),this.dynamicAnim&&a.globals.dataChanged?this.animatePaths(G,{size:this.sliceSizes[w],endAngle:y,startAngle:f,prevStartAngle:v,prevEndAngle:b,animateStartingPos:!0,i:w,animBeginArr:this.animBeginArr,shouldSetPrevPaths:!0,dur:a.config.chart.animations.dynamicAnimation.speed}):this.animatePaths(G,{size:this.sliceSizes[w],endAngle:y,startAngle:f,i:w,totalItems:o.length-1,animBeginArr:this.animBeginArr,dur:x}),a.config.plotOptions.pie.expandOnClick&&this.chartType!=="polarArea"&&G.click(this.pieClicked.bind(this,w)),a.globals.selectedDataPoints[0]!==void 0&&a.globals.selectedDataPoints[0].indexOf(w)>-1&&this.pieClicked(w),a.config.dataLabels.enabled){var P=m.x,k=m.y,V=100*T/this.fullAngle+"%";if(T!==0&&a.config.plotOptions.pie.dataLabels.minAngleToShowLabel<o[w]){var B=a.config.dataLabels.formatter;B!==void 0&&(V=B(a.globals.seriesPercent[w][0],{seriesIndex:w,w:a}));var j=a.globals.dataLabels.style.colors[w],K=h.group({class:"apexcharts-datalabels"}),ie=h.drawText({x:P,y:k,text:V,textAnchor:"middle",fontSize:a.config.dataLabels.style.fontSize,fontFamily:a.config.dataLabels.style.fontFamily,fontWeight:a.config.dataLabels.style.fontWeight,foreColor:j});if(K.add(ie),a.config.dataLabels.dropShadow.enabled){var he=a.config.dataLabels.dropShadow;d.dropShadow(ie,he)}ie.node.classList.add("apexcharts-pie-label"),a.config.chart.animations.animate&&a.globals.resized===!1&&(ie.node.classList.add("apexcharts-pie-label-delay"),ie.node.style.animationDelay=a.config.chart.animations.speed/940+"s"),this.sliceLabels.push(K)}}}return p}},{key:"addListeners",value:function(o,r){var a=new $(this.ctx);o.node.addEventListener("mouseenter",a.pathMouseEnter.bind(this,o)),o.node.addEventListener("mouseleave",a.pathMouseLeave.bind(this,o)),o.node.addEventListener("mouseleave",this.revertDataLabelsInner.bind(this,o.node,r)),o.node.addEventListener("mousedown",a.pathMouseDown.bind(this,o)),this.donutDataLabels.total.showAlways||(o.node.addEventListener("mouseenter",this.printDataLabelsInner.bind(this,o.node,r)),o.node.addEventListener("mousedown",this.printDataLabelsInner.bind(this,o.node,r)))}},{key:"animatePaths",value:function(o,r){var a=this.w,d=r.endAngle<r.startAngle?this.fullAngle+r.endAngle-r.startAngle:r.endAngle-r.startAngle,h=d,c=r.startAngle,p=r.startAngle;r.prevStartAngle!==void 0&&r.prevEndAngle!==void 0&&(c=r.prevEndAngle,h=r.prevEndAngle<r.prevStartAngle?this.fullAngle+r.prevEndAngle-r.prevStartAngle:r.prevEndAngle-r.prevStartAngle),r.i===a.config.series.length-1&&(d+p>this.fullAngle?r.endAngle=r.endAngle-(d+p):d+p<this.fullAngle&&(r.endAngle=r.endAngle+(this.fullAngle-(d+p)))),d===this.fullAngle&&(d=this.fullAngle-.01),this.animateArc(o,c,p,d,h,r)}},{key:"animateArc",value:function(o,r,a,d,h,c){var p,f=this,v=this.w,y=new J(this.ctx),b=c.size;(isNaN(r)||isNaN(h))&&(r=a,h=d,c.dur=0);var w=d,R=a,T=r<a?this.fullAngle+r-a:r-a;v.globals.dataChanged&&c.shouldSetPrevPaths&&c.prevEndAngle&&(p=f.getPiePath({me:f,startAngle:c.prevStartAngle,angle:c.prevEndAngle<c.prevStartAngle?this.fullAngle+c.prevEndAngle-c.prevStartAngle:c.prevEndAngle-c.prevStartAngle,size:b}),o.attr({d:p})),c.dur!==0?o.animate(c.dur,v.globals.easing,c.animBeginArr[c.i]).afterAll(function(){f.chartType!=="pie"&&f.chartType!=="donut"&&f.chartType!=="polarArea"||this.animate(v.config.chart.animations.dynamicAnimation.speed).attr({"stroke-width":f.strokeWidth}),c.i===v.config.series.length-1&&y.animationCompleted(o)}).during(function(F){w=T+(d-T)*F,c.animateStartingPos&&(w=h+(d-h)*F,R=r-h+(a-(r-h))*F),p=f.getPiePath({me:f,startAngle:R,angle:w,size:b}),o.node.setAttribute("data:pathOrig",p),o.attr({d:p})}):(p=f.getPiePath({me:f,startAngle:R,angle:d,size:b}),c.isTrack||(v.globals.animationEnded=!0),o.node.setAttribute("data:pathOrig",p),o.attr({d:p,"stroke-width":f.strokeWidth}))}},{key:"pieClicked",value:function(o){var r,a=this.w,d=this,h=d.sliceSizes[o]+(a.config.plotOptions.pie.expandOnClick?4:0),c=a.globals.dom.Paper.select(".apexcharts-".concat(d.chartType.toLowerCase(),"-slice-").concat(o)).members[0];if(c.attr("data:pieClicked")!=="true"){var p=a.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area");Array.prototype.forEach.call(p,function(b){b.setAttribute("data:pieClicked","false");var w=b.getAttribute("data:pathOrig");w&&b.setAttribute("d",w)}),c.attr("data:pieClicked","true");var f=parseInt(c.attr("data:startAngle"),10),v=parseInt(c.attr("data:angle"),10);r=d.getPiePath({me:d,startAngle:f,angle:v,size:h}),v!==360&&c.plot(r)}else{c.attr({"data:pieClicked":"false"}),this.revertDataLabelsInner(c.node,this.donutDataLabels);var y=c.attr("data:pathOrig");c.attr({d:y})}}},{key:"getChangedPath",value:function(o,r){var a="";return this.dynamicAnim&&this.w.globals.dataChanged&&(a=this.getPiePath({me:this,startAngle:o,angle:r-o,size:this.size})),a}},{key:"getPiePath",value:function(o){var r,a=o.me,d=o.startAngle,h=o.angle,c=o.size,p=new $(this.ctx),f=d,v=Math.PI*(f-90)/180,y=h+d;Math.ceil(y)>=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle&&(y=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle-.01),Math.ceil(y)>this.fullAngle&&(y-=this.fullAngle);var b=Math.PI*(y-90)/180,w=a.centerX+c*Math.cos(v),R=a.centerY+c*Math.sin(v),T=a.centerX+c*Math.cos(b),F=a.centerY+c*Math.sin(b),I=_.polarToCartesian(a.centerX,a.centerY,a.donutSize,y),G=_.polarToCartesian(a.centerX,a.centerY,a.donutSize,f),H=h>180?1:0,m=["M",w,R,"A",c,c,0,H,1,T,F];return r=a.chartType==="donut"?[].concat(m,["L",I.x,I.y,"A",a.donutSize,a.donutSize,0,H,0,G.x,G.y,"L",w,R,"z"]).join(" "):a.chartType==="pie"||a.chartType==="polarArea"?[].concat(m,["L",a.centerX,a.centerY,"L",w,R]).join(" "):[].concat(m).join(" "),p.roundPathCorners(r,2*this.strokeWidth)}},{key:"drawPolarElements",value:function(o){var r=this.w,a=new ne(this.ctx),d=new $(this.ctx),h=new ga(this.ctx),c=d.group(),p=d.group(),f=a.niceScale(0,Math.ceil(this.maxY),r.config.yaxis[0].tickAmount,0,!0),v=f.result.reverse(),y=f.result.length;this.maxY=f.niceMax;for(var b=r.globals.radialSize,w=b/(y-1),R=0;R<y-1;R++){var T=d.drawCircle(b);if(T.attr({cx:this.centerX,cy:this.centerY,fill:"none","stroke-width":r.config.plotOptions.polarArea.rings.strokeWidth,stroke:r.config.plotOptions.polarArea.rings.strokeColor}),r.config.yaxis[0].show){var F=h.drawYAxisTexts(this.centerX,this.centerY-b+parseInt(r.config.yaxis[0].labels.style.fontSize,10)/2,R,v[R]);p.add(F)}c.add(T),b-=w}this.drawSpokes(o),o.add(c),o.add(p)}},{key:"renderInnerDataLabels",value:function(o,r){var a=this.w,d=new $(this.ctx),h=d.group({class:"apexcharts-datalabels-group",transform:"translate(".concat(r.translateX?r.translateX:0,", ").concat(r.translateY?r.translateY:0,") scale(").concat(a.config.plotOptions.pie.customScale,")")}),c=o.total.show;h.node.style.opacity=r.opacity;var p,f,v=r.centerX,y=r.centerY;p=o.name.color===void 0?a.globals.colors[0]:o.name.color;var b=o.name.fontSize,w=o.name.fontFamily,R=o.name.fontWeight;f=o.value.color===void 0?a.config.chart.foreColor:o.value.color;var T=o.value.formatter,F="",I="";if(c?(p=o.total.color,b=o.total.fontSize,w=o.total.fontFamily,R=o.total.fontWeight,I=o.total.label,F=o.total.formatter(a)):a.globals.series.length===1&&(F=T(a.globals.series[0],a),I=a.globals.seriesNames[0]),I&&(I=o.name.formatter(I,o.total.show,a)),o.name.show){var G=d.drawText({x:v,y:y+parseFloat(o.name.offsetY),text:I,textAnchor:"middle",foreColor:p,fontSize:b,fontWeight:R,fontFamily:w});G.node.classList.add("apexcharts-datalabel-label"),h.add(G)}if(o.value.show){var H=o.name.show?parseFloat(o.value.offsetY)+16:o.value.offsetY,m=d.drawText({x:v,y:y+H,text:F,textAnchor:"middle",foreColor:f,fontWeight:o.value.fontWeight,fontSize:o.value.fontSize,fontFamily:o.value.fontFamily});m.node.classList.add("apexcharts-datalabel-value"),h.add(m)}return h}},{key:"printInnerLabels",value:function(o,r,a,d){var h,c=this.w;d?h=o.name.color===void 0?c.globals.colors[parseInt(d.parentNode.getAttribute("rel"),10)-1]:o.name.color:c.globals.series.length>1&&o.total.show&&(h=o.total.color);var p=c.globals.dom.baseEl.querySelector(".apexcharts-datalabel-label"),f=c.globals.dom.baseEl.querySelector(".apexcharts-datalabel-value");a=(0,o.value.formatter)(a,c),d||typeof o.total.formatter!="function"||(a=o.total.formatter(c));var v=r===o.total.label;r=o.name.formatter(r,v,c),p!==null&&(p.textContent=r),f!==null&&(f.textContent=a),p!==null&&(p.style.fill=h)}},{key:"printDataLabelsInner",value:function(o,r){var a=this.w,d=o.getAttribute("data:value"),h=a.globals.seriesNames[parseInt(o.parentNode.getAttribute("rel"),10)-1];a.globals.series.length>1&&this.printInnerLabels(r,h,d,o);var c=a.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group");c!==null&&(c.style.opacity=1)}},{key:"drawSpokes",value:function(o){var r=this,a=this.w,d=new $(this.ctx),h=a.config.plotOptions.polarArea.spokes;if(h.strokeWidth!==0){for(var c=[],p=360/a.globals.series.length,f=0;f<a.globals.series.length;f++)c.push(_.polarToCartesian(this.centerX,this.centerY,a.globals.radialSize,a.config.plotOptions.pie.startAngle+p*f));c.forEach(function(v,y){var b=d.drawLine(v.x,v.y,r.centerX,r.centerY,Array.isArray(h.connectorColors)?h.connectorColors[y]:h.connectorColors);o.add(b)})}}},{key:"revertDataLabelsInner",value:function(o,r,a){var d=this,h=this.w,c=h.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group"),p=!1,f=h.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area"),v=function(w){var R=w.makeSliceOut,T=w.printLabel;Array.prototype.forEach.call(f,function(F){F.getAttribute("data:pieClicked")==="true"&&(R&&(p=!0),T&&d.printDataLabelsInner(F,r))})};if(v({makeSliceOut:!0,printLabel:!1}),r.total.show&&h.globals.series.length>1)p&&!r.total.showAlways?v({makeSliceOut:!1,printLabel:!0}):this.printInnerLabels(r,r.total.label,r.total.formatter(h));else if(v({makeSliceOut:!1,printLabel:!0}),!p)if(h.globals.selectedDataPoints.length&&h.globals.series.length>1)if(h.globals.selectedDataPoints[0].length>0){var y=h.globals.selectedDataPoints[0],b=h.globals.dom.baseEl.querySelector(".apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(y));this.printDataLabelsInner(b,r)}else c&&h.globals.selectedDataPoints.length&&h.globals.selectedDataPoints[0].length===0&&(c.style.opacity=0);else c&&h.globals.series.length>1&&(c.style.opacity=0)}}]),O}(),Gl=function(){function O(o){l(this,O),this.ctx=o,this.w=o.w,this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animDur=0;var r=this.w;this.graphics=new $(this.ctx),this.lineColorArr=r.globals.stroke.colors!==void 0?r.globals.stroke.colors:r.globals.colors,this.defaultSize=r.globals.svgHeight<r.globals.svgWidth?r.globals.gridHeight+1.5*r.globals.goldenPadding:r.globals.gridWidth,this.isLog=r.config.yaxis[0].logarithmic,this.coreUtils=new Y(this.ctx),this.maxValue=this.isLog?this.coreUtils.getLogVal(r.globals.maxY,0):r.globals.maxY,this.minValue=this.isLog?this.coreUtils.getLogVal(this.w.globals.minY,0):r.globals.minY,this.polygons=r.config.plotOptions.radar.polygons,this.strokeWidth=r.config.stroke.show?r.config.stroke.width:0,this.size=this.defaultSize/2.1-this.strokeWidth-r.config.chart.dropShadow.blur,r.config.xaxis.labels.show&&(this.size=this.size-r.globals.xAxisLabelsWidth/1.75),r.config.plotOptions.radar.size!==void 0&&(this.size=r.config.plotOptions.radar.size),this.dataRadiusOfPercent=[],this.dataRadius=[],this.angleArr=[],this.yaxisLabelsTextsPos=[]}return g(O,[{key:"draw",value:function(o){var r=this,a=this.w,d=new pt(this.ctx),h=[],c=new Kt(this.ctx);o.length&&(this.dataPointsLen=o[a.globals.maxValsInArrayIndex].length),this.disAngle=2*Math.PI/this.dataPointsLen;var p=a.globals.gridWidth/2,f=a.globals.gridHeight/2,v=p+a.config.plotOptions.radar.offsetX,y=f+a.config.plotOptions.radar.offsetY,b=this.graphics.group({class:"apexcharts-radar-series apexcharts-plot-series",transform:"translate(".concat(v||0,", ").concat(y||0,")")}),w=[],R=null,T=null;if(this.yaxisLabels=this.graphics.group({class:"apexcharts-yaxis"}),o.forEach(function(I,G){var H=I.length===a.globals.dataPoints,m=r.graphics.group().attr({class:"apexcharts-series","data:longestSeries":H,seriesName:_.escapeString(a.globals.seriesNames[G]),rel:G+1,"data:realIndex":G});r.dataRadiusOfPercent[G]=[],r.dataRadius[G]=[],r.angleArr[G]=[],I.forEach(function(ae,Le){var Be=Math.abs(r.maxValue-r.minValue);ae+=Math.abs(r.minValue),r.isLog&&(ae=r.coreUtils.getLogVal(ae,0)),r.dataRadiusOfPercent[G][Le]=ae/Be,r.dataRadius[G][Le]=r.dataRadiusOfPercent[G][Le]*r.size,r.angleArr[G][Le]=Le*r.disAngle}),w=r.getDataPointsPos(r.dataRadius[G],r.angleArr[G]);var x=r.createPaths(w,{x:0,y:0});R=r.graphics.group({class:"apexcharts-series-markers-wrap apexcharts-element-hidden"}),T=r.graphics.group({class:"apexcharts-datalabels","data:realIndex":G}),a.globals.delayedElements.push({el:R.node,index:G});var P={i:G,realIndex:G,animationDelay:G,initialSpeed:a.config.chart.animations.speed,dataChangeSpeed:a.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-radar",shouldClipToGrid:!1,bindEventsOnPaths:!1,stroke:a.globals.stroke.colors[G],strokeLineCap:a.config.stroke.lineCap},k=null;a.globals.previousPaths.length>0&&(k=r.getPreviousPath(G));for(var V=0;V<x.linePathsTo.length;V++){var B=r.graphics.renderPaths(s(s({},P),{},{pathFrom:k===null?x.linePathsFrom[V]:k,pathTo:x.linePathsTo[V],strokeWidth:Array.isArray(r.strokeWidth)?r.strokeWidth[G]:r.strokeWidth,fill:"none",drawShadow:!1}));m.add(B);var j=d.fillPath({seriesNumber:G}),K=r.graphics.renderPaths(s(s({},P),{},{pathFrom:k===null?x.areaPathsFrom[V]:k,pathTo:x.areaPathsTo[V],strokeWidth:0,fill:j,drawShadow:!1}));if(a.config.chart.dropShadow.enabled){var ie=new se(r.ctx),he=a.config.chart.dropShadow;ie.dropShadow(K,Object.assign({},he,{noUserSpaceOnUse:!0}),G)}m.add(K)}I.forEach(function(ae,Le){var Be=new Ke(r.ctx).getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:G,dataPointIndex:Le}),je=r.graphics.drawMarker(w[Le].x,w[Le].y,Be);je.attr("rel",Le),je.attr("j",Le),je.attr("index",G),je.node.setAttribute("default-marker-size",Be.pSize);var it=r.graphics.group({class:"apexcharts-series-markers"});it&&it.add(je),R.add(it),m.add(R);var dt=a.config.dataLabels;if(dt.enabled){var rt=dt.formatter(a.globals.series[G][Le],{seriesIndex:G,dataPointIndex:Le,w:a});c.plotDataLabelsText({x:w[Le].x,y:w[Le].y,text:rt,textAnchor:"middle",i:G,j:G,parent:T,offsetCorrection:!1,dataLabelsConfig:s({},dt)})}m.add(T)}),h.push(m)}),this.drawPolygons({parent:b}),a.config.xaxis.labels.show){var F=this.drawXAxisTexts();b.add(F)}return h.forEach(function(I){b.add(I)}),b.add(this.yaxisLabels),b}},{key:"drawPolygons",value:function(o){for(var r=this,a=this.w,d=o.parent,h=new ga(this.ctx),c=a.globals.yAxisScale[0].result.reverse(),p=c.length,f=[],v=this.size/(p-1),y=0;y<p;y++)f[y]=v*y;f.reverse();var b=[],w=[];f.forEach(function(R,T){var F=_.getPolygonPos(R,r.dataPointsLen),I="";F.forEach(function(G,H){if(T===0){var m=r.graphics.drawLine(G.x,G.y,0,0,Array.isArray(r.polygons.connectorColors)?r.polygons.connectorColors[H]:r.polygons.connectorColors);w.push(m)}H===0&&r.yaxisLabelsTextsPos.push({x:G.x,y:G.y}),I+=G.x+","+G.y+" "}),b.push(I)}),b.forEach(function(R,T){var F=r.polygons.strokeColors,I=r.polygons.strokeWidth,G=r.graphics.drawPolygon(R,Array.isArray(F)?F[T]:F,Array.isArray(I)?I[T]:I,a.globals.radarPolygons.fill.colors[T]);d.add(G)}),w.forEach(function(R){d.add(R)}),a.config.yaxis[0].show&&this.yaxisLabelsTextsPos.forEach(function(R,T){var F=h.drawYAxisTexts(R.x,R.y,T,c[T]);r.yaxisLabels.add(F)})}},{key:"drawXAxisTexts",value:function(){var o=this,r=this.w,a=r.config.xaxis.labels,d=this.graphics.group({class:"apexcharts-xaxis"}),h=_.getPolygonPos(this.size,this.dataPointsLen);return r.globals.labels.forEach(function(c,p){var f=r.config.xaxis.labels.formatter,v=new Kt(o.ctx);if(h[p]){var y=o.getTextPos(h[p],o.size),b=f(c,{seriesIndex:-1,dataPointIndex:p,w:r});v.plotDataLabelsText({x:y.newX,y:y.newY,text:b,textAnchor:y.textAnchor,i:p,j:p,parent:d,color:Array.isArray(a.style.colors)&&a.style.colors[p]?a.style.colors[p]:"#a8a8a8",dataLabelsConfig:s({textAnchor:y.textAnchor,dropShadow:{enabled:!1}},a),offsetCorrection:!1})}}),d}},{key:"createPaths",value:function(o,r){var a=this,d=[],h=[],c=[],p=[];if(o.length){h=[this.graphics.move(r.x,r.y)],p=[this.graphics.move(r.x,r.y)];var f=this.graphics.move(o[0].x,o[0].y),v=this.graphics.move(o[0].x,o[0].y);o.forEach(function(y,b){f+=a.graphics.line(y.x,y.y),v+=a.graphics.line(y.x,y.y),b===o.length-1&&(f+="Z",v+="Z")}),d.push(f),c.push(v)}return{linePathsFrom:h,linePathsTo:d,areaPathsFrom:p,areaPathsTo:c}}},{key:"getTextPos",value:function(o,r){var a="middle",d=o.x,h=o.y;return Math.abs(o.x)>=10?o.x>0?(a="start",d+=10):o.x<0&&(a="end",d-=10):a="middle",Math.abs(o.y)>=r-10&&(o.y<0?h-=10:o.y>0&&(h+=10)),{textAnchor:a,newX:d,newY:h}}},{key:"getPreviousPath",value:function(o){for(var r=this.w,a=null,d=0;d<r.globals.previousPaths.length;d++){var h=r.globals.previousPaths[d];h.paths.length>0&&parseInt(h.realIndex,10)===parseInt(o,10)&&r.globals.previousPaths[d].paths[0]!==void 0&&(a=r.globals.previousPaths[d].paths[0].d)}return a}},{key:"getDataPointsPos",value:function(o,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.dataPointsLen;o=o||[],r=r||[];for(var d=[],h=0;h<a;h++){var c={};c.x=o[h]*Math.sin(r[h]),c.y=-o[h]*Math.cos(r[h]),d.push(c)}return d}}]),O}(),_l=function(O){S(r,fa);var o=W(r);function r(a){var d;l(this,r),(d=o.call(this,a)).ctx=a,d.w=a.w,d.animBeginArr=[0],d.animDur=0;var h=d.w;return d.startAngle=h.config.plotOptions.radialBar.startAngle,d.endAngle=h.config.plotOptions.radialBar.endAngle,d.totalAngle=Math.abs(h.config.plotOptions.radialBar.endAngle-h.config.plotOptions.radialBar.startAngle),d.trackStartAngle=h.config.plotOptions.radialBar.track.startAngle,d.trackEndAngle=h.config.plotOptions.radialBar.track.endAngle,d.barLabels=d.w.config.plotOptions.radialBar.barLabels,d.donutDataLabels=d.w.config.plotOptions.radialBar.dataLabels,d.radialDataLabels=d.donutDataLabels,d.trackStartAngle||(d.trackStartAngle=d.startAngle),d.trackEndAngle||(d.trackEndAngle=d.endAngle),d.endAngle===360&&(d.endAngle=359.99),d.margin=parseInt(h.config.plotOptions.radialBar.track.margin,10),d.onBarLabelClick=d.onBarLabelClick.bind(M(d)),d}return g(r,[{key:"draw",value:function(a){var d=this.w,h=new $(this.ctx),c=h.group({class:"apexcharts-radialbar"});if(d.globals.noData)return c;var p=h.group(),f=this.defaultSize/2,v=d.globals.gridWidth/2,y=this.defaultSize/2.05;d.config.chart.sparkline.enabled||(y=y-d.config.stroke.width-d.config.chart.dropShadow.blur);var b=d.globals.fill.colors;if(d.config.plotOptions.radialBar.track.show){var w=this.drawTracks({size:y,centerX:v,centerY:f,colorArr:b,series:a});p.add(w)}var R=this.drawArcs({size:y,centerX:v,centerY:f,colorArr:b,series:a}),T=360;d.config.plotOptions.radialBar.startAngle<0&&(T=this.totalAngle);var F=(360-T)/360;if(d.globals.radialSize=y-y*F,this.radialDataLabels.value.show){var I=Math.max(this.radialDataLabels.value.offsetY,this.radialDataLabels.name.offsetY);d.globals.radialSize+=I*F}return p.add(R.g),d.config.plotOptions.radialBar.hollow.position==="front"&&(R.g.add(R.elHollow),R.dataLabels&&R.g.add(R.dataLabels)),c.add(p),c}},{key:"drawTracks",value:function(a){var d=this.w,h=new $(this.ctx),c=h.group({class:"apexcharts-tracks"}),p=new se(this.ctx),f=new pt(this.ctx),v=this.getStrokeWidth(a);a.size=a.size-v/2;for(var y=0;y<a.series.length;y++){var b=h.group({class:"apexcharts-radialbar-track apexcharts-track"});c.add(b),b.attr({rel:y+1}),a.size=a.size-v-this.margin;var w=d.config.plotOptions.radialBar.track,R=f.fillPath({seriesNumber:0,size:a.size,fillColors:Array.isArray(w.background)?w.background[y]:w.background,solid:!0}),T=this.trackStartAngle,F=this.trackEndAngle;Math.abs(F)+Math.abs(T)>=360&&(F=360-Math.abs(this.startAngle)-.1);var I=h.drawPath({d:"",stroke:R,strokeWidth:v*parseInt(w.strokeWidth,10)/100,fill:"none",strokeOpacity:w.opacity,classes:"apexcharts-radialbar-area"});if(w.dropShadow.enabled){var G=w.dropShadow;p.dropShadow(I,G)}b.add(I),I.attr("id","apexcharts-radialbarTrack-"+y),this.animatePaths(I,{centerX:a.centerX,centerY:a.centerY,endAngle:F,startAngle:T,size:a.size,i:y,totalItems:2,animBeginArr:0,dur:0,isTrack:!0,easing:d.globals.easing})}return c}},{key:"drawArcs",value:function(a){var d=this.w,h=new $(this.ctx),c=new pt(this.ctx),p=new se(this.ctx),f=h.group(),v=this.getStrokeWidth(a);a.size=a.size-v/2;var y=d.config.plotOptions.radialBar.hollow.background,b=a.size-v*a.series.length-this.margin*a.series.length-v*parseInt(d.config.plotOptions.radialBar.track.strokeWidth,10)/100/2,w=b-d.config.plotOptions.radialBar.hollow.margin;d.config.plotOptions.radialBar.hollow.image!==void 0&&(y=this.drawHollowImage(a,f,b,y));var R=this.drawHollow({size:w,centerX:a.centerX,centerY:a.centerY,fill:y||"transparent"});if(d.config.plotOptions.radialBar.hollow.dropShadow.enabled){var T=d.config.plotOptions.radialBar.hollow.dropShadow;p.dropShadow(R,T)}var F=1;!this.radialDataLabels.total.show&&d.globals.series.length>1&&(F=0);var I=null;this.radialDataLabels.show&&(I=this.renderInnerDataLabels(this.radialDataLabels,{hollowSize:b,centerX:a.centerX,centerY:a.centerY,opacity:F})),d.config.plotOptions.radialBar.hollow.position==="back"&&(f.add(R),I&&f.add(I));var G=!1;d.config.plotOptions.radialBar.inverseOrder&&(G=!0);for(var H=G?a.series.length-1:0;G?H>=0:H<a.series.length;G?H--:H++){var m=h.group({class:"apexcharts-series apexcharts-radial-series",seriesName:_.escapeString(d.globals.seriesNames[H])});f.add(m),m.attr({rel:H+1,"data:realIndex":H}),this.ctx.series.addCollapsedClassToSeries(m,H),a.size=a.size-v-this.margin;var x=c.fillPath({seriesNumber:H,size:a.size,value:a.series[H]}),P=this.startAngle,k=void 0,V=_.negToZero(a.series[H]>100?100:a.series[H])/100,B=Math.round(this.totalAngle*V)+this.startAngle,j=void 0;d.globals.dataChanged&&(k=this.startAngle,j=Math.round(this.totalAngle*_.negToZero(d.globals.previousPaths[H])/100)+k),Math.abs(B)+Math.abs(P)>=360&&(B-=.01),Math.abs(j)+Math.abs(k)>=360&&(j-=.01);var K=B-P,ie=Array.isArray(d.config.stroke.dashArray)?d.config.stroke.dashArray[H]:d.config.stroke.dashArray,he=h.drawPath({d:"",stroke:x,strokeWidth:v,fill:"none",fillOpacity:d.config.fill.opacity,classes:"apexcharts-radialbar-area apexcharts-radialbar-slice-"+H,strokeDashArray:ie});if($.setAttrs(he.node,{"data:angle":K,"data:value":a.series[H]}),d.config.chart.dropShadow.enabled){var ae=d.config.chart.dropShadow;p.dropShadow(he,ae,H)}if(p.setSelectionFilter(he,0,H),this.addListeners(he,this.radialDataLabels),m.add(he),he.attr({index:0,j:H}),this.barLabels.enabled){var Le=_.polarToCartesian(a.centerX,a.centerY,a.size,P),Be=this.barLabels.formatter(d.globals.seriesNames[H],{seriesIndex:H,w:d}),je=["apexcharts-radialbar-label"];this.barLabels.onClick||je.push("apexcharts-no-click");var it=this.barLabels.useSeriesColors?d.globals.colors[H]:d.config.chart.foreColor;it||(it=d.config.chart.foreColor);var dt=Le.x-this.barLabels.margin,rt=Le.y,Ot=h.drawText({x:dt,y:rt,text:Be,textAnchor:"end",dominantBaseline:"middle",fontFamily:this.barLabels.fontFamily,fontWeight:this.barLabels.fontWeight,fontSize:this.barLabels.fontSize,foreColor:it,cssClass:je.join(" ")});Ot.on("click",this.onBarLabelClick),Ot.attr({rel:H+1}),P!==0&&Ot.attr({"transform-origin":"".concat(dt," ").concat(rt),transform:"rotate(".concat(P," 0 0)")}),m.add(Ot)}var Ut=0;!this.initialAnim||d.globals.resized||d.globals.dataChanged||(Ut=d.config.chart.animations.speed),d.globals.dataChanged&&(Ut=d.config.chart.animations.dynamicAnimation.speed),this.animDur=Ut/(1.2*a.series.length)+this.animDur,this.animBeginArr.push(this.animDur),this.animatePaths(he,{centerX:a.centerX,centerY:a.centerY,endAngle:B,startAngle:P,prevEndAngle:j,prevStartAngle:k,size:a.size,i:H,totalItems:2,animBeginArr:this.animBeginArr,dur:Ut,shouldSetPrevPaths:!0,easing:d.globals.easing})}return{g:f,elHollow:R,dataLabels:I}}},{key:"drawHollow",value:function(a){var d=new $(this.ctx).drawCircle(2*a.size);return d.attr({class:"apexcharts-radialbar-hollow",cx:a.centerX,cy:a.centerY,r:a.size,fill:a.fill}),d}},{key:"drawHollowImage",value:function(a,d,h,c){var p=this.w,f=new pt(this.ctx),v=_.randomId(),y=p.config.plotOptions.radialBar.hollow.image;if(p.config.plotOptions.radialBar.hollow.imageClipped)f.clippedImgArea({width:h,height:h,image:y,patternID:"pattern".concat(p.globals.cuid).concat(v)}),c="url(#pattern".concat(p.globals.cuid).concat(v,")");else{var b=p.config.plotOptions.radialBar.hollow.imageWidth,w=p.config.plotOptions.radialBar.hollow.imageHeight;if(b===void 0&&w===void 0){var R=p.globals.dom.Paper.image(y).loaded(function(F){this.move(a.centerX-F.width/2+p.config.plotOptions.radialBar.hollow.imageOffsetX,a.centerY-F.height/2+p.config.plotOptions.radialBar.hollow.imageOffsetY)});d.add(R)}else{var T=p.globals.dom.Paper.image(y).loaded(function(F){this.move(a.centerX-b/2+p.config.plotOptions.radialBar.hollow.imageOffsetX,a.centerY-w/2+p.config.plotOptions.radialBar.hollow.imageOffsetY),this.size(b,w)});d.add(T)}}return c}},{key:"getStrokeWidth",value:function(a){var d=this.w;return a.size*(100-parseInt(d.config.plotOptions.radialBar.hollow.size,10))/100/(a.series.length+1)-this.margin}},{key:"onBarLabelClick",value:function(a){var d=parseInt(a.target.getAttribute("rel"),10)-1,h=this.barLabels.onClick,c=this.w;h&&h(c.globals.seriesNames[d],{w:c,seriesIndex:d})}}]),r}(),Vl=function(O){S(r,Qs);var o=W(r);function r(){return l(this,r),o.apply(this,arguments)}return g(r,[{key:"draw",value:function(a,d){var h=this.w,c=new $(this.ctx);this.rangeBarOptions=this.w.config.plotOptions.rangeBar,this.series=a,this.seriesRangeStart=h.globals.seriesRangeStart,this.seriesRangeEnd=h.globals.seriesRangeEnd,this.barHelpers.initVariables(a);for(var p=c.group({class:"apexcharts-rangebar-series apexcharts-plot-series"}),f=0;f<a.length;f++){var v,y,b,w,R=void 0,T=void 0,F=h.globals.comboCharts?d[f]:f,I=c.group({class:"apexcharts-series",seriesName:_.escapeString(h.globals.seriesNames[F]),rel:f+1,"data:realIndex":F});this.ctx.series.addCollapsedClassToSeries(I,F),a[f].length>0&&(this.visibleI=this.visibleI+1);var G=0,H=0;this.yRatio.length>1&&(this.yaxisIndex=F);var m=this.barHelpers.initialPositions();T=m.y,w=m.zeroW,R=m.x,H=m.barWidth,G=m.barHeight,v=m.xDivision,y=m.yDivision,b=m.zeroH;for(var x=c.group({class:"apexcharts-datalabels","data:realIndex":F}),P=c.group({class:"apexcharts-rangebar-goals-markers"}),k=0;k<h.globals.dataPoints;k++){var V,B=this.barHelpers.getStrokeWidth(f,k,F),j=this.seriesRangeStart[f][k],K=this.seriesRangeEnd[f][k],ie=null,he=null,ae=null,Le={x:R,y:T,strokeWidth:B,elSeries:I},Be=this.seriesLen;if(h.config.plotOptions.bar.rangeBarGroupRows&&(Be=1),h.config.series[f].data[k]===void 0)break;if(this.isHorizontal){ae=T+G*this.visibleI;var je=(y-G*Be)/2;if(h.config.series[f].data[k].x){var it=this.detectOverlappingBars({i:f,j:k,barYPosition:ae,srty:je,barHeight:G,yDivision:y,initPositions:m});G=it.barHeight,ae=it.barYPosition}H=(ie=this.drawRangeBarPaths(s({indexes:{i:f,j:k,realIndex:F},barHeight:G,barYPosition:ae,zeroW:w,yDivision:y,y1:j,y2:K},Le))).barWidth}else{h.globals.isXNumeric&&(R=(h.globals.seriesX[f][k]-h.globals.minX)/this.xRatio-H/2),he=R+H*this.visibleI;var dt=(v-H*Be)/2;if(h.config.series[f].data[k].x){var rt=this.detectOverlappingBars({i:f,j:k,barXPosition:he,srtx:dt,barWidth:H,xDivision:v,initPositions:m});H=rt.barWidth,he=rt.barXPosition}G=(ie=this.drawRangeColumnPaths(s({indexes:{i:f,j:k,realIndex:F},barWidth:H,barXPosition:he,zeroH:b,xDivision:v},Le))).barHeight}var Ot=this.barHelpers.drawGoalLine({barXPosition:ie.barXPosition,barYPosition:ae,goalX:ie.goalX,goalY:ie.goalY,barHeight:G,barWidth:H});Ot&&P.add(Ot),T=ie.y,R=ie.x;var Ut=this.barHelpers.getPathFillColor(a,f,k,F),rs=h.globals.stroke.colors[F];this.renderSeries((C(V={realIndex:F,pathFill:Ut,lineFill:rs,j:k,i:f,x:R,y:T,y1:j,y2:K,pathFrom:ie.pathFrom,pathTo:ie.pathTo,strokeWidth:B,elSeries:I,series:a,barHeight:G,barWidth:H,barXPosition:he,barYPosition:ae},"barWidth",H),C(V,"elDataLabelsWrap",x),C(V,"elGoalsMarkers",P),C(V,"visibleSeries",this.visibleI),C(V,"type","rangebar"),V))}p.add(I)}return p}},{key:"detectOverlappingBars",value:function(a){var d=a.i,h=a.j,c=a.barYPosition,p=a.barXPosition,f=a.srty,v=a.srtx,y=a.barHeight,b=a.barWidth,w=a.yDivision,R=a.xDivision,T=a.initPositions,F=this.w,I=[],G=F.config.series[d].data[h].rangeName,H=F.config.series[d].data[h].x,m=Array.isArray(H)?H.join(" "):H,x=F.globals.labels.map(function(k){return Array.isArray(k)?k.join(" "):k}).indexOf(m),P=F.globals.seriesRange[d].findIndex(function(k){return k.x===m&&k.overlaps.length>0});return this.isHorizontal?(c=F.config.plotOptions.bar.rangeBarGroupRows?f+w*x:f+y*this.visibleI+w*x,P>-1&&!F.config.plotOptions.bar.rangeBarOverlap&&(I=F.globals.seriesRange[d][P].overlaps).indexOf(G)>-1&&(c=(y=T.barHeight/I.length)*this.visibleI+w*(100-parseInt(this.barOptions.barHeight,10))/100/2+y*(this.visibleI+I.indexOf(G))+w*x)):(x>-1&&(p=F.config.plotOptions.bar.rangeBarGroupRows?v+R*x:v+b*this.visibleI+R*x),P>-1&&!F.config.plotOptions.bar.rangeBarOverlap&&(I=F.globals.seriesRange[d][P].overlaps).indexOf(G)>-1&&(p=(b=T.barWidth/I.length)*this.visibleI+R*(100-parseInt(this.barOptions.barWidth,10))/100/2+b*(this.visibleI+I.indexOf(G))+R*x)),{barYPosition:c,barXPosition:p,barHeight:y,barWidth:b}}},{key:"drawRangeColumnPaths",value:function(a){var d=a.indexes,h=a.x,c=a.xDivision,p=a.barWidth,f=a.barXPosition,v=a.zeroH,y=this.w,b=d.i,w=d.j,R=this.yRatio[this.yaxisIndex],T=d.realIndex,F=this.getRangeValue(T,w),I=Math.min(F.start,F.end),G=Math.max(F.start,F.end);this.series[b][w]===void 0||this.series[b][w]===null?I=v:(I=v-I/R,G=v-G/R);var H=Math.abs(G-I),m=this.barHelpers.getColumnPaths({barXPosition:f,barWidth:p,y1:I,y2:G,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,realIndex:d.realIndex,i:T,j:w,w:y});if(y.globals.isXNumeric){var x=this.getBarXForNumericXAxis({x:h,j:w,realIndex:T,barWidth:p});h=x.x,f=x.barXPosition}else h+=c;return{pathTo:m.pathTo,pathFrom:m.pathFrom,barHeight:H,x:h,y:G,goalY:this.barHelpers.getGoalValues("y",null,v,b,w),barXPosition:f}}},{key:"drawRangeBarPaths",value:function(a){var d=a.indexes,h=a.y,c=a.y1,p=a.y2,f=a.yDivision,v=a.barHeight,y=a.barYPosition,b=a.zeroW,w=this.w,R=b+c/this.invertedYRatio,T=b+p/this.invertedYRatio,F=Math.abs(T-R),I=this.barHelpers.getBarpaths({barYPosition:y,barHeight:v,x1:R,x2:T,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,i:d.realIndex,realIndex:d.realIndex,j:d.j,w});return w.globals.isXNumeric||(h+=f),{pathTo:I.pathTo,pathFrom:I.pathFrom,barWidth:F,x:T,goalX:this.barHelpers.getGoalValues("x",b,null,d.realIndex,d.j),y:h}}},{key:"getRangeValue",value:function(a,d){var h=this.w;return{start:h.globals.seriesRangeStart[a][d],end:h.globals.seriesRangeEnd[a][d]}}}]),r}(),Hl=function(){function O(o){l(this,O),this.w=o.w,this.lineCtx=o}return g(O,[{key:"sameValueSeriesFix",value:function(o,r){var a=this.w;if((a.config.fill.type==="gradient"||a.config.fill.type[o]==="gradient")&&new Y(this.lineCtx.ctx,a).seriesHaveSameValues(o)){var d=r[o].slice();d[d.length-1]=d[d.length-1]+1e-6,r[o]=d}return r}},{key:"calculatePoints",value:function(o){var r=o.series,a=o.realIndex,d=o.x,h=o.y,c=o.i,p=o.j,f=o.prevY,v=this.w,y=[],b=[];if(p===0){var w=this.lineCtx.categoryAxisCorrection+v.config.markers.offsetX;v.globals.isXNumeric&&(w=(v.globals.seriesX[a][0]-v.globals.minX)/this.lineCtx.xRatio+v.config.markers.offsetX),y.push(w),b.push(_.isNumber(r[c][0])?f+v.config.markers.offsetY:null),y.push(d+v.config.markers.offsetX),b.push(_.isNumber(r[c][p+1])?h+v.config.markers.offsetY:null)}else y.push(d+v.config.markers.offsetX),b.push(_.isNumber(r[c][p+1])?h+v.config.markers.offsetY:null);return{x:y,y:b}}},{key:"checkPreviousPaths",value:function(o){for(var r=o.pathFromLine,a=o.pathFromArea,d=o.realIndex,h=this.w,c=0;c<h.globals.previousPaths.length;c++){var p=h.globals.previousPaths[c];(p.type==="line"||p.type==="area")&&p.paths.length>0&&parseInt(p.realIndex,10)===parseInt(d,10)&&(p.type==="line"?(this.lineCtx.appendPathFrom=!1,r=h.globals.previousPaths[c].paths[0].d):p.type==="area"&&(this.lineCtx.appendPathFrom=!1,a=h.globals.previousPaths[c].paths[0].d,h.config.stroke.show&&h.globals.previousPaths[c].paths[1]&&(r=h.globals.previousPaths[c].paths[1].d)))}return{pathFromLine:r,pathFromArea:a}}},{key:"determineFirstPrevY",value:function(o){var r,a,d=o.i,h=o.series,c=o.prevY,p=o.lineYPosition,f=this.w,v=f.config.chart.stacked&&!f.globals.comboCharts||f.config.chart.stacked&&f.globals.comboCharts&&(!this.w.config.chart.stackOnlyBar||((r=this.w.config.series[d])===null||r===void 0?void 0:r.type)==="bar");if(((a=h[d])===null||a===void 0?void 0:a[0])!==void 0)c=(p=v&&d>0?this.lineCtx.prevSeriesY[d-1][0]:this.lineCtx.zeroY)-h[d][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]+2*(this.lineCtx.isReversed?h[d][0]/this.lineCtx.yRatio[this.lineCtx.yaxisIndex]:0);else if(v&&d>0&&h[d][0]===void 0){for(var y=d-1;y>=0;y--)if(h[y][0]!==null&&h[y][0]!==void 0){c=p=this.lineCtx.prevSeriesY[y][0];break}}return{prevY:c,lineYPosition:p}}}]),O}(),Bl=function(O){for(var o,r,a,d,h=function(y){for(var b=[],w=y[0],R=y[1],T=b[0]=Zr(w,R),F=1,I=y.length-1;F<I;F++)w=R,R=y[F+1],b[F]=.5*(T+(T=Zr(w,R)));return b[F]=T,b}(O),c=O.length-1,p=[],f=0;f<c;f++)a=Zr(O[f],O[f+1]),Math.abs(a)<1e-6?h[f]=h[f+1]=0:(d=(o=h[f]/a)*o+(r=h[f+1]/a)*r)>9&&(d=3*a/Math.sqrt(d),h[f]=d*o,h[f+1]=d*r);for(var v=0;v<=c;v++)d=(O[Math.min(c,v+1)][0]-O[Math.max(0,v-1)][0])/(6*(1+h[v]*h[v])),p.push([d||0,h[v]*d||0]);return p},Qr=function(O){for(var o="",r=0;r<O.length;r++){var a=O[r],d=a.length;d>4?(o+="C".concat(a[0],", ").concat(a[1]),o+=", ".concat(a[2],", ").concat(a[3]),o+=", ".concat(a[4],", ").concat(a[5])):d>2&&(o+="S".concat(a[0],", ").concat(a[1]),o+=", ".concat(a[2],", ").concat(a[3]))}return o},ma=function(O){var o=Bl(O),r=O[1],a=O[0],d=[],h=o[1],c=o[0];d.push(a,[a[0]+c[0],a[1]+c[1],r[0]-h[0],r[1]-h[1],r[0],r[1]]);for(var p=2,f=o.length;p<f;p++){var v=O[p],y=o[p];d.push([v[0]-y[0],v[1]-y[1],v[0],v[1]])}return d};function Zr(O,o){return(o[1]-O[1])/(o[0]-O[0])}var $i=function(){function O(o,r,a){l(this,O),this.ctx=o,this.w=o.w,this.xyRatios=r,this.pointsChart=!(this.w.config.chart.type!=="bubble"&&this.w.config.chart.type!=="scatter")||a,this.scatter=new qt(this.ctx),this.noNegatives=this.w.globals.minX===Number.MAX_VALUE,this.lineHelpers=new Hl(this),this.markers=new Ke(this.ctx),this.prevSeriesY=[],this.categoryAxisCorrection=0,this.yaxisIndex=0}return g(O,[{key:"draw",value:function(o,r,a,d){var h,c=this.w,p=new $(this.ctx),f=c.globals.comboCharts?r:c.config.chart.type,v=p.group({class:"apexcharts-".concat(f,"-series apexcharts-plot-series")}),y=new Y(this.ctx,c);this.yRatio=this.xyRatios.yRatio,this.zRatio=this.xyRatios.zRatio,this.xRatio=this.xyRatios.xRatio,this.baseLineY=this.xyRatios.baseLineY,o=y.getLogSeries(o),this.yRatio=y.getLogYRatios(this.yRatio);for(var b=[],w=0;w<o.length;w++){o=this.lineHelpers.sameValueSeriesFix(w,o);var R=c.globals.comboCharts?a[w]:w;this._initSerieVariables(o,w,R);var T=[],F=[],I=[],G=c.globals.padHorizontal+this.categoryAxisCorrection;this.ctx.series.addCollapsedClassToSeries(this.elSeries,R),c.globals.isXNumeric&&c.globals.seriesX.length>0&&(G=(c.globals.seriesX[R][0]-c.globals.minX)/this.xRatio),I.push(G);var H,m=G,x=void 0,P=m,k=this.zeroY,V=this.zeroY;k=this.lineHelpers.determineFirstPrevY({i:w,series:o,prevY:k,lineYPosition:0}).prevY,c.config.stroke.curve==="monotonCubic"&&o[w][0]===null?T.push(null):T.push(k),H=k,f==="rangeArea"&&(x=V=this.lineHelpers.determineFirstPrevY({i:w,series:d,prevY:V,lineYPosition:0}).prevY,F.push(V));var B={type:f,series:o,realIndex:R,i:w,x:G,y:1,pX:m,pY:H,pathsFrom:this._calculatePathsFrom({type:f,series:o,i:w,realIndex:R,prevX:P,prevY:k,prevY2:V}),linePaths:[],areaPaths:[],seriesIndex:a,lineYPosition:0,xArrj:I,yArrj:T,y2Arrj:F,seriesRangeEnd:d},j=this._iterateOverDataPoints(s(s({},B),{},{iterations:f==="rangeArea"?o[w].length-1:void 0,isRangeStart:!0}));if(f==="rangeArea"){var K=this._calculatePathsFrom({series:d,i:w,realIndex:R,prevX:P,prevY:V}),ie=this._iterateOverDataPoints(s(s({},B),{},{series:d,pY:x,pathsFrom:K,iterations:d[w].length-1,isRangeStart:!1}));j.linePaths[0]=ie.linePath+j.linePath,j.pathFromLine=ie.pathFromLine+j.pathFromLine}this._handlePaths({type:f,realIndex:R,i:w,paths:j}),this.elSeries.add(this.elPointsMain),this.elSeries.add(this.elDataLabelsWrap),b.push(this.elSeries)}if(((h=c.config.series[0])===null||h===void 0?void 0:h.zIndex)!==void 0&&b.sort(function(Le,Be){return Number(Le.node.getAttribute("zIndex"))-Number(Be.node.getAttribute("zIndex"))}),c.config.chart.stacked)for(var he=b.length;he>0;he--)v.add(b[he-1]);else for(var ae=0;ae<b.length;ae++)v.add(b[ae]);return v}},{key:"_initSerieVariables",value:function(o,r,a){var d=this.w,h=new $(this.ctx);this.xDivision=d.globals.gridWidth/(d.globals.dataPoints-(d.config.xaxis.tickPlacement==="on"?1:0)),this.strokeWidth=Array.isArray(d.config.stroke.width)?d.config.stroke.width[a]:d.config.stroke.width,this.yRatio.length>1&&(this.yaxisIndex=a),this.isReversed=d.config.yaxis[this.yaxisIndex]&&d.config.yaxis[this.yaxisIndex].reversed,this.zeroY=d.globals.gridHeight-this.baseLineY[this.yaxisIndex]-(this.isReversed?d.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[this.yaxisIndex]:0),this.areaBottomY=this.zeroY,(this.zeroY>d.globals.gridHeight||d.config.plotOptions.area.fillTo==="end")&&(this.areaBottomY=d.globals.gridHeight),this.categoryAxisCorrection=this.xDivision/2,this.elSeries=h.group({class:"apexcharts-series",zIndex:d.config.series[a].zIndex!==void 0?d.config.series[a].zIndex:a,seriesName:_.escapeString(d.globals.seriesNames[a])}),this.elPointsMain=h.group({class:"apexcharts-series-markers-wrap","data:realIndex":a}),this.elDataLabelsWrap=h.group({class:"apexcharts-datalabels","data:realIndex":a});var c=o[r].length===d.globals.dataPoints;this.elSeries.attr({"data:longestSeries":c,rel:r+1,"data:realIndex":a}),this.appendPathFrom=!0}},{key:"_calculatePathsFrom",value:function(o){var r,a,d,h,c=o.type,p=o.series,f=o.i,v=o.realIndex,y=o.prevX,b=o.prevY,w=o.prevY2,R=this.w,T=new $(this.ctx);if(p[f][0]===null){for(var F=0;F<p[f].length;F++)if(p[f][F]!==null){y=this.xDivision*F,b=this.zeroY-p[f][F]/this.yRatio[this.yaxisIndex],r=T.move(y,b),a=T.move(y,this.areaBottomY);break}}else r=T.move(y,b),c==="rangeArea"&&(r=T.move(y,w)+T.line(y,b)),a=T.move(y,this.areaBottomY)+T.line(y,b);if(d=T.move(-1,this.zeroY)+T.line(-1,this.zeroY),h=T.move(-1,this.zeroY)+T.line(-1,this.zeroY),R.globals.previousPaths.length>0){var I=this.lineHelpers.checkPreviousPaths({pathFromLine:d,pathFromArea:h,realIndex:v});d=I.pathFromLine,h=I.pathFromArea}return{prevX:y,prevY:b,linePath:r,areaPath:a,pathFromLine:d,pathFromArea:h}}},{key:"_handlePaths",value:function(o){var r=o.type,a=o.realIndex,d=o.i,h=o.paths,c=this.w,p=new $(this.ctx),f=new pt(this.ctx);this.prevSeriesY.push(h.yArrj),c.globals.seriesXvalues[a]=h.xArrj,c.globals.seriesYvalues[a]=h.yArrj;var v=c.config.forecastDataPoints;if(v.count>0&&r!=="rangeArea"){var y=c.globals.seriesXvalues[a][c.globals.seriesXvalues[a].length-v.count-1],b=p.drawRect(y,0,c.globals.gridWidth,c.globals.gridHeight,0);c.globals.dom.elForecastMask.appendChild(b.node);var w=p.drawRect(0,0,y,c.globals.gridHeight,0);c.globals.dom.elNonForecastMask.appendChild(w.node)}this.pointsChart||c.globals.delayedElements.push({el:this.elPointsMain.node,index:a});var R={i:d,realIndex:a,animationDelay:d,initialSpeed:c.config.chart.animations.speed,dataChangeSpeed:c.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(r)};if(r==="area")for(var T=f.fillPath({seriesNumber:a}),F=0;F<h.areaPaths.length;F++){var I=p.renderPaths(s(s({},R),{},{pathFrom:h.pathFromArea,pathTo:h.areaPaths[F],stroke:"none",strokeWidth:0,strokeLineCap:null,fill:T}));this.elSeries.add(I)}if(c.config.stroke.show&&!this.pointsChart){var G=null;if(r==="line")G=f.fillPath({seriesNumber:a,i:d});else if(c.config.stroke.fill.type==="solid")G=c.globals.stroke.colors[a];else{var H=c.config.fill;c.config.fill=c.config.stroke.fill,G=f.fillPath({seriesNumber:a,i:d}),c.config.fill=H}for(var m=0;m<h.linePaths.length;m++){var x=G;r==="rangeArea"&&(x=f.fillPath({seriesNumber:a}));var P=s(s({},R),{},{pathFrom:h.pathFromLine,pathTo:h.linePaths[m],stroke:G,strokeWidth:this.strokeWidth,strokeLineCap:c.config.stroke.lineCap,fill:r==="rangeArea"?x:"none"}),k=p.renderPaths(P);if(this.elSeries.add(k),k.attr("fill-rule","evenodd"),v.count>0&&r!=="rangeArea"){var V=p.renderPaths(P);V.node.setAttribute("stroke-dasharray",v.dashArray),v.strokeWidth&&V.node.setAttribute("stroke-width",v.strokeWidth),this.elSeries.add(V),V.attr("clip-path","url(#forecastMask".concat(c.globals.cuid,")")),k.attr("clip-path","url(#nonForecastMask".concat(c.globals.cuid,")"))}}}}},{key:"_iterateOverDataPoints",value:function(o){var r,a=this,d=o.type,h=o.series,c=o.iterations,p=o.realIndex,f=o.i,v=o.x,y=o.y,b=o.pX,w=o.pY,R=o.pathsFrom,T=o.linePaths,F=o.areaPaths,I=o.seriesIndex,G=o.lineYPosition,H=o.xArrj,m=o.yArrj,x=o.y2Arrj,P=o.isRangeStart,k=o.seriesRangeEnd,V=this.w,B=new $(this.ctx),j=this.yRatio,K=R.prevY,ie=R.linePath,he=R.areaPath,ae=R.pathFromLine,Le=R.pathFromArea,Be=_.isNumber(V.globals.minYArr[p])?V.globals.minYArr[p]:V.globals.minY;c||(c=V.globals.dataPoints>1?V.globals.dataPoints-1:V.globals.dataPoints);for(var je=function(Ns,Gs){return Gs-Ns/j[a.yaxisIndex]+2*(a.isReversed?Ns/j[a.yaxisIndex]:0)},it=y,dt=V.config.chart.stacked&&!V.globals.comboCharts||V.config.chart.stacked&&V.globals.comboCharts&&(!this.w.config.chart.stackOnlyBar||((r=this.w.config.series[p])===null||r===void 0?void 0:r.type)==="bar"),rt=0;rt<c;rt++){var Ot=h[f][rt+1]===void 0||h[f][rt+1]===null;if(V.globals.isXNumeric){var Ut=V.globals.seriesX[p][rt+1];V.globals.seriesX[p][rt+1]===void 0&&(Ut=V.globals.seriesX[p][c-1]),v=(Ut-V.globals.minX)/this.xRatio}else v+=this.xDivision;dt?f>0&&V.globals.collapsedSeries.length<V.config.series.length-1?G=this.prevSeriesY[function(Ns){for(var Gs=Ns,vi=0;vi<V.globals.series.length;vi++)if(V.globals.collapsedSeriesIndices.indexOf(Ns)>-1){Gs--;break}return Gs>=0?Gs:0}(f-1)][rt+1]:G=this.zeroY:G=this.zeroY,Ot?y=je(Be,G):(y=je(h[f][rt+1],G),d==="rangeArea"&&(it=je(k[f][rt+1],G))),H.push(v),Ot&&V.config.stroke.curve==="smooth"?m.push(null):m.push(y),x.push(it);var rs=this.lineHelpers.calculatePoints({series:h,x:v,y,realIndex:p,i:f,j:rt,prevY:K}),Li=this._createPaths({type:d,series:h,i:f,realIndex:p,j:rt,x:v,y,y2:it,xArrj:H,yArrj:m,y2Arrj:x,pX:b,pY:w,linePath:ie,areaPath:he,linePaths:T,areaPaths:F,seriesIndex:I,isRangeStart:P});F=Li.areaPaths,T=Li.linePaths,b=Li.pX,w=Li.pY,he=Li.areaPath,ie=Li.linePath,!this.appendPathFrom||V.config.stroke.curve==="monotoneCubic"&&d==="rangeArea"||(ae+=B.line(v,this.zeroY),Le+=B.line(v,this.zeroY)),this.handleNullDataPoints(h,rs,f,rt,p),this._handleMarkersAndLabels({type:d,pointsPos:rs,i:f,j:rt,realIndex:p,isRangeStart:P})}return{yArrj:m,xArrj:H,pathFromArea:Le,areaPaths:F,pathFromLine:ae,linePaths:T,linePath:ie,areaPath:he}}},{key:"_handleMarkersAndLabels",value:function(o){var r=o.type,a=o.pointsPos,d=o.isRangeStart,h=o.i,c=o.j,p=o.realIndex,f=this.w,v=new Kt(this.ctx);if(this.pointsChart)this.scatter.draw(this.elSeries,c,{realIndex:p,pointsPos:a,zRatio:this.zRatio,elParent:this.elPointsMain});else{f.globals.series[h].length>1&&this.elPointsMain.node.classList.add("apexcharts-element-hidden");var y=this.markers.plotChartMarkers(a,p,c+1);y!==null&&this.elPointsMain.add(y)}var b=v.drawDataLabel({type:r,isRangeStart:d,pos:a,i:p,j:c+1});b!==null&&this.elDataLabelsWrap.add(b)}},{key:"_createPaths",value:function(o){var r=o.type,a=o.series,d=o.i,h=o.realIndex,c=o.j,p=o.x,f=o.y,v=o.xArrj,y=o.yArrj,b=o.y2,w=o.y2Arrj,R=o.pX,T=o.pY,F=o.linePath,I=o.areaPath,G=o.linePaths,H=o.areaPaths,m=o.seriesIndex,x=o.isRangeStart,P=this.w,k=new $(this.ctx),V=P.config.stroke.curve,B=this.areaBottomY;if(Array.isArray(P.config.stroke.curve)&&(V=Array.isArray(m)?P.config.stroke.curve[m[d]]:P.config.stroke.curve[d]),r==="rangeArea"&&(P.globals.hasNullValues||P.config.forecastDataPoints.count>0)&&V==="monotoneCubic"&&(V="straight"),V==="monotoneCubic"){var j=r==="rangeArea"?v.length===P.globals.dataPoints:c===a[d].length-2,K=v.map(function(dt,rt){return[v[rt],y[rt]]}).filter(function(dt){return dt[1]!==null});if(j&&K.length>1){var ie=ma(K);if(F+=Qr(ie),a[d][0]===null?I=F:I+=Qr(ie),r==="rangeArea"&&x){F+=k.line(v[v.length-1],w[w.length-1]);var he=v.slice().reverse(),ae=w.slice().reverse(),Le=he.map(function(dt,rt){return[he[rt],ae[rt]]}),Be=ma(Le);I=F+=Qr(Be)}else I+=k.line(K[K.length-1][0],B)+k.line(K[0][0],B)+k.move(K[0][0],K[0][1])+"z";G.push(F),H.push(I)}}else if(V==="smooth"){var je=.35*(p-R);P.globals.hasNullValues?(a[d][c]!==null&&(a[d][c+1]!==null?(F=k.move(R,T)+k.curve(R+je,T,p-je,f,p+1,f),I=k.move(R+1,T)+k.curve(R+je,T,p-je,f,p+1,f)+k.line(p,B)+k.line(R,B)+"z"):(F=k.move(R,T),I=k.move(R,T)+"z")),G.push(F),H.push(I)):(F+=k.curve(R+je,T,p-je,f,p,f),I+=k.curve(R+je,T,p-je,f,p,f)),R=p,T=f,c===a[d].length-2&&(I=I+k.curve(R,T,p,f,p,B)+k.move(p,f)+"z",r==="rangeArea"&&x?F=F+k.curve(R,T,p,f,p,b)+k.move(p,b)+"z":P.globals.hasNullValues||(G.push(F),H.push(I)))}else{if(a[d][c+1]===null){F+=k.move(p,f);var it=P.globals.isXNumeric?(P.globals.seriesX[h][c]-P.globals.minX)/this.xRatio:p-this.xDivision;I=I+k.line(it,B)+k.move(p,f)+"z"}a[d][c]===null&&(F+=k.move(p,f),I+=k.move(p,B)),V==="stepline"?(F=F+k.line(p,null,"H")+k.line(null,f,"V"),I=I+k.line(p,null,"H")+k.line(null,f,"V")):V==="straight"&&(F+=k.line(p,f),I+=k.line(p,f)),c===a[d].length-2&&(I=I+k.line(p,B)+k.move(p,f)+"z",r==="rangeArea"&&x?F=F+k.line(p,b)+k.move(p,b)+"z":(G.push(F),H.push(I)))}return{linePaths:G,areaPaths:H,pX:R,pY:T,linePath:F,areaPath:I}}},{key:"handleNullDataPoints",value:function(o,r,a,d,h){var c=this.w;if(o[a][d]===null&&c.config.markers.showNullDataPoints||o[a].length===1){var p=this.markers.plotChartMarkers(r,h,d+1,this.strokeWidth-c.config.markers.strokeWidth/2,!0);p!==null&&this.elPointsMain.add(p)}}}]),O}();window.TreemapSquared={},window.TreemapSquared.generate=function(){function O(p,f,v,y){this.xoffset=p,this.yoffset=f,this.height=y,this.width=v,this.shortestEdge=function(){return Math.min(this.height,this.width)},this.getCoordinates=function(b){var w,R=[],T=this.xoffset,F=this.yoffset,I=h(b)/this.height,G=h(b)/this.width;if(this.width>=this.height)for(w=0;w<b.length;w++)R.push([T,F,T+I,F+b[w]/I]),F+=b[w]/I;else for(w=0;w<b.length;w++)R.push([T,F,T+b[w]/G,F+G]),T+=b[w]/G;return R},this.cutArea=function(b){var w;if(this.width>=this.height){var R=b/this.height,T=this.width-R;w=new O(this.xoffset+R,this.yoffset,T,this.height)}else{var F=b/this.width,I=this.height-F;w=new O(this.xoffset,this.yoffset+F,this.width,I)}return w}}function o(p,f,v,y,b){y=y===void 0?0:y,b=b===void 0?0:b;var w=r(function(R,T){var F,I=[],G=T/h(R);for(F=0;F<R.length;F++)I[F]=R[F]*G;return I}(p,f*v),[],new O(y,b,f,v),[]);return function(R){var T,F,I=[];for(T=0;T<R.length;T++)for(F=0;F<R[T].length;F++)I.push(R[T][F]);return I}(w)}function r(p,f,v,y){var b,w,R;if(p.length!==0)return b=v.shortestEdge(),function(T,F,I){var G;if(T.length===0)return!0;(G=T.slice()).push(F);var H=a(T,I),m=a(G,I);return H>=m}(f,w=p[0],b)?(f.push(w),r(p.slice(1),f,v,y)):(R=v.cutArea(h(f),y),y.push(v.getCoordinates(f)),r(p,[],R,y)),y;y.push(v.getCoordinates(f))}function a(p,f){var v=Math.min.apply(Math,p),y=Math.max.apply(Math,p),b=h(p);return Math.max(Math.pow(f,2)*y/Math.pow(b,2),Math.pow(b,2)/(Math.pow(f,2)*v))}function d(p){return p&&p.constructor===Array}function h(p){var f,v=0;for(f=0;f<p.length;f++)v+=p[f];return v}function c(p){var f,v=0;if(d(p[0]))for(f=0;f<p.length;f++)v+=c(p[f]);else v=h(p);return v}return function p(f,v,y,b,w){b=b===void 0?0:b,w=w===void 0?0:w;var R,T,F=[],I=[];if(d(f[0])){for(T=0;T<f.length;T++)F[T]=c(f[T]);for(R=o(F,v,y,b,w),T=0;T<f.length;T++)I.push(p(f[T],R[T][2]-R[T][0],R[T][3]-R[T][1],R[T][0],R[T][1]))}else I=o(f,v,y,b,w);return I}}();var ks,Zs,Wl=function(){function O(o,r){l(this,O),this.ctx=o,this.w=o.w,this.strokeWidth=this.w.config.stroke.width,this.helpers=new pa(o),this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.labels=[]}return g(O,[{key:"draw",value:function(o){var r=this,a=this.w,d=new $(this.ctx),h=new pt(this.ctx),c=d.group({class:"apexcharts-treemap"});if(a.globals.noData)return c;var p=[];return o.forEach(function(f){var v=f.map(function(y){return Math.abs(y)});p.push(v)}),this.negRange=this.helpers.checkColorRange(),a.config.series.forEach(function(f,v){f.data.forEach(function(y){Array.isArray(r.labels[v])||(r.labels[v]=[]),r.labels[v].push(y.x)})}),window.TreemapSquared.generate(p,a.globals.gridWidth,a.globals.gridHeight).forEach(function(f,v){var y=d.group({class:"apexcharts-series apexcharts-treemap-series",seriesName:_.escapeString(a.globals.seriesNames[v]),rel:v+1,"data:realIndex":v});if(a.config.chart.dropShadow.enabled){var b=a.config.chart.dropShadow;new se(r.ctx).dropShadow(c,b,v)}var w=d.group({class:"apexcharts-data-labels"});f.forEach(function(R,T){var F=R[0],I=R[1],G=R[2],H=R[3],m=d.drawRect(F,I,G-F,H-I,a.config.plotOptions.treemap.borderRadius,"#fff",1,r.strokeWidth,a.config.plotOptions.treemap.useFillColorAsStroke?P:a.globals.stroke.colors[v]);m.attr({cx:F,cy:I,index:v,i:v,j:T,width:G-F,height:H-I});var x=r.helpers.getShadeColor(a.config.chart.type,v,T,r.negRange),P=x.color;a.config.series[v].data[T]!==void 0&&a.config.series[v].data[T].fillColor&&(P=a.config.series[v].data[T].fillColor);var k=h.fillPath({color:P,seriesNumber:v,dataPointIndex:T});m.node.classList.add("apexcharts-treemap-rect"),m.attr({fill:k}),r.helpers.addListeners(m);var V={x:F+(G-F)/2,y:I+(H-I)/2,width:0,height:0},B={x:F,y:I,width:G-F,height:H-I};if(a.config.chart.animations.enabled&&!a.globals.dataChanged){var j=1;a.globals.resized||(j=a.config.chart.animations.speed),r.animateTreemap(m,V,B,j)}if(a.globals.dataChanged){var K=1;r.dynamicAnim.enabled&&a.globals.shouldAnimate&&(K=r.dynamicAnim.speed,a.globals.previousPaths[v]&&a.globals.previousPaths[v][T]&&a.globals.previousPaths[v][T].rect&&(V=a.globals.previousPaths[v][T].rect),r.animateTreemap(m,V,B,K))}var ie=r.getFontSize(R),he=a.config.dataLabels.formatter(r.labels[v][T],{value:a.globals.series[v][T],seriesIndex:v,dataPointIndex:T,w:a});a.config.plotOptions.treemap.dataLabels.format==="truncate"&&(ie=parseInt(a.config.dataLabels.style.fontSize,10),he=r.truncateLabels(he,ie,F,I,G,H));var ae=r.helpers.calculateDataLabels({text:he,x:(F+G)/2,y:(I+H)/2+r.strokeWidth/2+ie/3,i:v,j:T,colorProps:x,fontSize:ie,series:o});a.config.dataLabels.enabled&&ae&&r.rotateToFitLabel(ae,ie,he,F,I,G,H),y.add(m),ae!==null&&y.add(ae)}),y.add(w),c.add(y)}),c}},{key:"getFontSize",value:function(o){var r=this.w,a,d,h,c,p=function f(v){var y,b=0;if(Array.isArray(v[0]))for(y=0;y<v.length;y++)b+=f(v[y]);else for(y=0;y<v.length;y++)b+=v[y].length;return b}(this.labels)/function f(v){var y,b=0;if(Array.isArray(v[0]))for(y=0;y<v.length;y++)b+=f(v[y]);else for(y=0;y<v.length;y++)b+=1;return b}(this.labels);return a=o[2]-o[0],d=o[3]-o[1],h=a*d,c=Math.pow(h,.5),Math.min(c/p,parseInt(r.config.dataLabels.style.fontSize,10))}},{key:"rotateToFitLabel",value:function(o,r,a,d,h,c,p){var f=new $(this.ctx),v=f.getTextRects(a,r);if(v.width+this.w.config.stroke.width+5>c-d&&v.width<=p-h){var y=f.rotateAroundCenter(o.node);o.node.setAttribute("transform","rotate(-90 ".concat(y.x," ").concat(y.y,") translate(").concat(v.height/3,")"))}}},{key:"truncateLabels",value:function(o,r,a,d,h,c){var p=new $(this.ctx),f=p.getTextRects(o,r).width+this.w.config.stroke.width+5>h-a&&c-d>h-a?c-d:h-a,v=p.getTextBasedOnMaxWidth({text:o,maxWidth:f,fontSize:r});return o.length!==v.length&&f/r<5?"":v}},{key:"animateTreemap",value:function(o,r,a,d){var h=new J(this.ctx);h.animateRect(o,{x:r.x,y:r.y,width:r.width,height:r.height},{x:a.x,y:a.y,width:a.width,height:a.height},d,function(){h.animationCompleted(o)})}}]),O}(),Js=86400,Jr=function(){function O(o){l(this,O),this.ctx=o,this.w=o.w,this.timeScaleArray=[],this.utc=this.w.config.xaxis.labels.datetimeUTC}return g(O,[{key:"calculateTimeScaleTicks",value:function(o,r){var a=this,d=this.w;if(d.globals.allSeriesCollapsed)return d.globals.labels=[],d.globals.timescaleLabels=[],[];var h=new Ge(this.ctx),c=(r-o)/864e5;this.determineInterval(c),d.globals.disableZoomIn=!1,d.globals.disableZoomOut=!1,c<.00011574074074074075?d.globals.disableZoomIn=!0:c>5e4&&(d.globals.disableZoomOut=!0);var p=h.getTimeUnitsfromTimestamp(o,r,this.utc),f=d.globals.gridWidth/c,v=f/24,y=v/60,b=y/60,w=Math.floor(24*c),R=Math.floor(1440*c),T=Math.floor(c*Js),F=Math.floor(c),I=Math.floor(c/30),G=Math.floor(c/365),H={minMillisecond:p.minMillisecond,minSecond:p.minSecond,minMinute:p.minMinute,minHour:p.minHour,minDate:p.minDate,minMonth:p.minMonth,minYear:p.minYear},m={firstVal:H,currentMillisecond:H.minMillisecond,currentSecond:H.minSecond,currentMinute:H.minMinute,currentHour:H.minHour,currentMonthDate:H.minDate,currentDate:H.minDate,currentMonth:H.minMonth,currentYear:H.minYear,daysWidthOnXAxis:f,hoursWidthOnXAxis:v,minutesWidthOnXAxis:y,secondsWidthOnXAxis:b,numberOfSeconds:T,numberOfMinutes:R,numberOfHours:w,numberOfDays:F,numberOfMonths:I,numberOfYears:G};switch(this.tickInterval){case"years":this.generateYearScale(m);break;case"months":case"half_year":this.generateMonthScale(m);break;case"months_days":case"months_fortnight":case"days":case"week_days":this.generateDayScale(m);break;case"hours":this.generateHourScale(m);break;case"minutes_fives":case"minutes":this.generateMinuteScale(m);break;case"seconds_tens":case"seconds_fives":case"seconds":this.generateSecondScale(m)}var x=this.timeScaleArray.map(function(P){var k={position:P.position,unit:P.unit,year:P.year,day:P.day?P.day:1,hour:P.hour?P.hour:0,month:P.month+1};return P.unit==="month"?s(s({},k),{},{day:1,value:P.value+1}):P.unit==="day"||P.unit==="hour"?s(s({},k),{},{value:P.value}):P.unit==="minute"?s(s({},k),{},{value:P.value,minute:P.value}):P.unit==="second"?s(s({},k),{},{value:P.value,minute:P.minute,second:P.second}):P});return x.filter(function(P){var k=1,V=Math.ceil(d.globals.gridWidth/120),B=P.value;d.config.xaxis.tickAmount!==void 0&&(V=d.config.xaxis.tickAmount),x.length>V&&(k=Math.floor(x.length/V));var j=!1,K=!1;switch(a.tickInterval){case"years":P.unit==="year"&&(j=!0);break;case"half_year":k=7,P.unit==="year"&&(j=!0);break;case"months":k=1,P.unit==="year"&&(j=!0);break;case"months_fortnight":k=15,P.unit!=="year"&&P.unit!=="month"||(j=!0),B===30&&(K=!0);break;case"months_days":k=10,P.unit==="month"&&(j=!0),B===30&&(K=!0);break;case"week_days":k=8,P.unit==="month"&&(j=!0);break;case"days":k=1,P.unit==="month"&&(j=!0);break;case"hours":P.unit==="day"&&(j=!0);break;case"minutes_fives":case"seconds_fives":B%5!=0&&(K=!0);break;case"seconds_tens":B%10!=0&&(K=!0)}if(a.tickInterval==="hours"||a.tickInterval==="minutes_fives"||a.tickInterval==="seconds_tens"||a.tickInterval==="seconds_fives"){if(!K)return!0}else if((B%k==0||j)&&!K)return!0})}},{key:"recalcDimensionsBasedOnFormat",value:function(o,r){var a=this.w,d=this.formatDates(o),h=this.removeOverlappingTS(d);a.globals.timescaleLabels=h.slice(),new bt(this.ctx).plotCoords()}},{key:"determineInterval",value:function(o){var r=24*o,a=60*r;switch(!0){case o/365>5:this.tickInterval="years";break;case o>800:this.tickInterval="half_year";break;case o>180:this.tickInterval="months";break;case o>90:this.tickInterval="months_fortnight";break;case o>60:this.tickInterval="months_days";break;case o>30:this.tickInterval="week_days";break;case o>2:this.tickInterval="days";break;case r>2.4:this.tickInterval="hours";break;case a>15:this.tickInterval="minutes_fives";break;case a>5:this.tickInterval="minutes";break;case a>1:this.tickInterval="seconds_tens";break;case 60*a>20:this.tickInterval="seconds_fives";break;default:this.tickInterval="seconds"}}},{key:"generateYearScale",value:function(o){var r=o.firstVal,a=o.currentMonth,d=o.currentYear,h=o.daysWidthOnXAxis,c=o.numberOfYears,p=r.minYear,f=0,v=new Ge(this.ctx),y="year";if(r.minDate>1||r.minMonth>0){var b=v.determineRemainingDaysOfYear(r.minYear,r.minMonth,r.minDate);f=(v.determineDaysOfYear(r.minYear)-b+1)*h,p=r.minYear+1,this.timeScaleArray.push({position:f,value:p,unit:y,year:p,month:_.monthMod(a+1)})}else r.minDate===1&&r.minMonth===0&&this.timeScaleArray.push({position:f,value:p,unit:y,year:d,month:_.monthMod(a+1)});for(var w=p,R=f,T=0;T<c;T++)w++,R=v.determineDaysOfYear(w-1)*h+R,this.timeScaleArray.push({position:R,value:w,unit:y,year:w,month:1})}},{key:"generateMonthScale",value:function(o){var r=o.firstVal,a=o.currentMonthDate,d=o.currentMonth,h=o.currentYear,c=o.daysWidthOnXAxis,p=o.numberOfMonths,f=d,v=0,y=new Ge(this.ctx),b="month",w=0;if(r.minDate>1){v=(y.determineDaysOfMonths(d+1,r.minYear)-a+1)*c,f=_.monthMod(d+1);var R=h+w,T=_.monthMod(f),F=f;f===0&&(b="year",F=R,T=1,R+=w+=1),this.timeScaleArray.push({position:v,value:F,unit:b,year:R,month:T})}else this.timeScaleArray.push({position:v,value:f,unit:b,year:h,month:_.monthMod(d)});for(var I=f+1,G=v,H=0,m=1;H<p;H++,m++){(I=_.monthMod(I))===0?(b="year",w+=1):b="month";var x=this._getYear(h,I,w);G=y.determineDaysOfMonths(I,x)*c+G;var P=I===0?x:I;this.timeScaleArray.push({position:G,value:P,unit:b,year:x,month:I===0?1:I}),I++}}},{key:"generateDayScale",value:function(o){var r=o.firstVal,a=o.currentMonth,d=o.currentYear,h=o.hoursWidthOnXAxis,c=o.numberOfDays,p=new Ge(this.ctx),f="day",v=r.minDate+1,y=v,b=function(m,x,P){return m>p.determineDaysOfMonths(x+1,P)&&(y=1,f="month",R=x+=1),x},w=(24-r.minHour)*h,R=v,T=b(y,a,d);r.minHour===0&&r.minDate===1?(w=0,R=_.monthMod(r.minMonth),f="month",y=r.minDate):r.minDate!==1&&r.minHour===0&&r.minMinute===0&&(w=0,v=r.minDate,R=v,T=b(y=v,a,d)),this.timeScaleArray.push({position:w,value:R,unit:f,year:this._getYear(d,T,0),month:_.monthMod(T),day:y});for(var F=w,I=0;I<c;I++){f="day",T=b(y+=1,T,this._getYear(d,T,0));var G=this._getYear(d,T,0);F=24*h+F;var H=y===1?_.monthMod(T):y;this.timeScaleArray.push({position:F,value:H,unit:f,year:G,month:_.monthMod(T),day:H})}}},{key:"generateHourScale",value:function(o){var r=o.firstVal,a=o.currentDate,d=o.currentMonth,h=o.currentYear,c=o.minutesWidthOnXAxis,p=o.numberOfHours,f=new Ge(this.ctx),v="hour",y=function(k,V){return k>f.determineDaysOfMonths(V+1,h)&&(I=1,V+=1),{month:V,date:I}},b=function(k,V){return k>f.determineDaysOfMonths(V+1,h)?V+=1:V},w=60-(r.minMinute+r.minSecond/60),R=w*c,T=r.minHour+1,F=T;w===60&&(R=0,F=T=r.minHour);var I=a;F>=24&&(F=0,I+=1,v="day");var G=y(I,d).month;G=b(I,G),this.timeScaleArray.push({position:R,value:T,unit:v,day:I,hour:F,year:h,month:_.monthMod(G)}),F++;for(var H=R,m=0;m<p;m++){v="hour",F>=24&&(F=0,v="day",G=y(I+=1,G).month,G=b(I,G));var x=this._getYear(h,G,0);H=60*c+H;var P=F===0?I:F;this.timeScaleArray.push({position:H,value:P,unit:v,hour:F,day:I,year:x,month:_.monthMod(G)}),F++}}},{key:"generateMinuteScale",value:function(o){for(var r=o.currentMillisecond,a=o.currentSecond,d=o.currentMinute,h=o.currentHour,c=o.currentDate,p=o.currentMonth,f=o.currentYear,v=o.minutesWidthOnXAxis,y=o.secondsWidthOnXAxis,b=o.numberOfMinutes,w=d+1,R=c,T=p,F=f,I=h,G=(60-a-r/1e3)*y,H=0;H<b;H++)w>=60&&(w=0,(I+=1)===24&&(I=0)),this.timeScaleArray.push({position:G,value:w,unit:"minute",hour:I,minute:w,day:R,year:this._getYear(F,T,0),month:_.monthMod(T)}),G+=v,w++}},{key:"generateSecondScale",value:function(o){for(var r=o.currentMillisecond,a=o.currentSecond,d=o.currentMinute,h=o.currentHour,c=o.currentDate,p=o.currentMonth,f=o.currentYear,v=o.secondsWidthOnXAxis,y=o.numberOfSeconds,b=a+1,w=d,R=c,T=p,F=f,I=h,G=(1e3-r)/1e3*v,H=0;H<y;H++)b>=60&&(b=0,++w>=60&&(w=0,++I===24&&(I=0))),this.timeScaleArray.push({position:G,value:b,unit:"second",hour:I,minute:w,second:b,day:R,year:this._getYear(F,T,0),month:_.monthMod(T)}),G+=v,b++}},{key:"createRawDateString",value:function(o,r){var a=o.year;return o.month===0&&(o.month=1),a+="-"+("0"+o.month.toString()).slice(-2),o.unit==="day"?a+=o.unit==="day"?"-"+("0"+r).slice(-2):"-01":a+="-"+("0"+(o.day?o.day:"1")).slice(-2),o.unit==="hour"?a+=o.unit==="hour"?"T"+("0"+r).slice(-2):"T00":a+="T"+("0"+(o.hour?o.hour:"0")).slice(-2),o.unit==="minute"?a+=":"+("0"+r).slice(-2):a+=":"+(o.minute?("0"+o.minute).slice(-2):"00"),o.unit==="second"?a+=":"+("0"+r).slice(-2):a+=":00",this.utc&&(a+=".000Z"),a}},{key:"formatDates",value:function(o){var r=this,a=this.w;return o.map(function(d){var h=d.value.toString(),c=new Ge(r.ctx),p=r.createRawDateString(d,h),f=c.getDate(c.parseDate(p));if(r.utc||(f=c.getDate(c.parseDateWithTimezone(p))),a.config.xaxis.labels.format===void 0){var v="dd MMM",y=a.config.xaxis.labels.datetimeFormatter;d.unit==="year"&&(v=y.year),d.unit==="month"&&(v=y.month),d.unit==="day"&&(v=y.day),d.unit==="hour"&&(v=y.hour),d.unit==="minute"&&(v=y.minute),d.unit==="second"&&(v=y.second),h=c.formatDate(f,v)}else h=c.formatDate(f,a.config.xaxis.labels.format);return{dateString:p,position:d.position,value:h,unit:d.unit,year:d.year,month:d.month}})}},{key:"removeOverlappingTS",value:function(o){var r,a=this,d=new $(this.ctx),h=!1;o.length>0&&o[0].value&&o.every(function(f){return f.value.length===o[0].value.length})&&(h=!0,r=d.getTextRects(o[0].value).width);var c=0,p=o.map(function(f,v){if(v>0&&a.w.config.xaxis.labels.hideOverlappingLabels){var y=h?r:d.getTextRects(o[c].value).width,b=o[c].position;return f.position>b+y+10?(c=v,f):null}return f});return p=p.filter(function(f){return f!==null})}},{key:"_getYear",value:function(o,r,a){return o+Math.floor(r/12)+a}}]),O}(),va=function(){function O(o,r){l(this,O),this.ctx=r,this.w=r.w,this.el=o}return g(O,[{key:"setupElements",value:function(){var o=this.w.globals,r=this.w.config,a=r.chart.type;o.axisCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble","radar","heatmap","treemap"].indexOf(a)>-1,o.xyCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble"].indexOf(a)>-1,o.isBarHorizontal=(r.chart.type==="bar"||r.chart.type==="rangeBar"||r.chart.type==="boxPlot")&&r.plotOptions.bar.horizontal,o.chartClass=".apexcharts"+o.chartID,o.dom.baseEl=this.el,o.dom.elWrap=document.createElement("div"),$.setAttrs(o.dom.elWrap,{id:o.chartClass.substring(1),class:"apexcharts-canvas "+o.chartClass.substring(1)}),this.el.appendChild(o.dom.elWrap),o.dom.Paper=new window.SVG.Doc(o.dom.elWrap),o.dom.Paper.attr({class:"apexcharts-svg","xmlns:data":"ApexChartsNS",transform:"translate(".concat(r.chart.offsetX,", ").concat(r.chart.offsetY,")")}),o.dom.Paper.node.style.background=r.theme.mode!=="dark"||r.chart.background?r.chart.background:"rgba(0, 0, 0, 0.8)",this.setSVGDimensions(),o.dom.elLegendForeign=document.createElementNS(o.SVGNS,"foreignObject"),$.setAttrs(o.dom.elLegendForeign,{x:0,y:0,width:o.svgWidth,height:o.svgHeight}),o.dom.elLegendWrap=document.createElement("div"),o.dom.elLegendWrap.classList.add("apexcharts-legend"),o.dom.elLegendWrap.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),o.dom.elLegendForeign.appendChild(o.dom.elLegendWrap),o.dom.Paper.node.appendChild(o.dom.elLegendForeign),o.dom.elGraphical=o.dom.Paper.group().attr({class:"apexcharts-inner apexcharts-graphical"}),o.dom.elDefs=o.dom.Paper.defs(),o.dom.Paper.add(o.dom.elGraphical),o.dom.elGraphical.add(o.dom.elDefs)}},{key:"plotChartType",value:function(o,r){var a=this.w,d=a.config,h=a.globals,c={series:[],i:[]},p={series:[],i:[]},f={series:[],i:[]},v={series:[],i:[]},y={series:[],i:[]},b={series:[],i:[]},w={series:[],i:[]},R={series:[],i:[]},T={series:[],seriesRangeEnd:[],i:[]};h.series.map(function(V,B){var j=0;o[B].type!==void 0?(o[B].type==="column"||o[B].type==="bar"?(h.series.length>1&&d.plotOptions.bar.horizontal&&console.warn("Horizontal bars are not supported in a mixed/combo chart. Please turn off `plotOptions.bar.horizontal`"),y.series.push(V),y.i.push(B),j++,a.globals.columnSeries=y.series):o[B].type==="area"?(p.series.push(V),p.i.push(B),j++):o[B].type==="line"?(c.series.push(V),c.i.push(B),j++):o[B].type==="scatter"?(f.series.push(V),f.i.push(B)):o[B].type==="bubble"?(v.series.push(V),v.i.push(B),j++):o[B].type==="candlestick"?(b.series.push(V),b.i.push(B),j++):o[B].type==="boxPlot"?(w.series.push(V),w.i.push(B),j++):o[B].type==="rangeBar"?(R.series.push(V),R.i.push(B),j++):o[B].type==="rangeArea"?(T.series.push(h.seriesRangeStart[B]),T.seriesRangeEnd.push(h.seriesRangeEnd[B]),T.i.push(B),j++):console.warn("You have specified an unrecognized chart type. Available types for this property are line/area/column/bar/scatter/bubble/candlestick/boxPlot/rangeBar/rangeArea"),j>1&&(h.comboCharts=!0)):(c.series.push(V),c.i.push(B))});var F=new $i(this.ctx,r),I=new qr(this.ctx,r);this.ctx.pie=new fa(this.ctx);var G=new _l(this.ctx);this.ctx.rangeBar=new Vl(this.ctx,r);var H=new Gl(this.ctx),m=[];if(h.comboCharts){if(p.series.length>0&&m.push(F.draw(p.series,"area",p.i)),y.series.length>0)if(a.config.chart.stacked){var x=new ua(this.ctx,r);m.push(x.draw(y.series,y.i))}else this.ctx.bar=new Qs(this.ctx,r),m.push(this.ctx.bar.draw(y.series,y.i));if(T.series.length>0&&m.push(F.draw(T.series,"rangeArea",T.i,T.seriesRangeEnd)),c.series.length>0&&m.push(F.draw(c.series,"line",c.i)),b.series.length>0&&m.push(I.draw(b.series,"candlestick",b.i)),w.series.length>0&&m.push(I.draw(w.series,"boxPlot",w.i)),R.series.length>0&&m.push(this.ctx.rangeBar.draw(R.series,R.i)),f.series.length>0){var P=new $i(this.ctx,r,!0);m.push(P.draw(f.series,"scatter",f.i))}if(v.series.length>0){var k=new $i(this.ctx,r,!0);m.push(k.draw(v.series,"bubble",v.i))}}else switch(d.chart.type){case"line":m=F.draw(h.series,"line");break;case"area":m=F.draw(h.series,"area");break;case"bar":d.chart.stacked?m=new ua(this.ctx,r).draw(h.series):(this.ctx.bar=new Qs(this.ctx,r),m=this.ctx.bar.draw(h.series));break;case"candlestick":m=new qr(this.ctx,r).draw(h.series,"candlestick");break;case"boxPlot":m=new qr(this.ctx,r).draw(h.series,d.chart.type);break;case"rangeBar":m=this.ctx.rangeBar.draw(h.series);break;case"rangeArea":m=F.draw(h.seriesRangeStart,"rangeArea",void 0,h.seriesRangeEnd);break;case"heatmap":m=new Nl(this.ctx,r).draw(h.series);break;case"treemap":m=new Wl(this.ctx,r).draw(h.series);break;case"pie":case"donut":case"polarArea":m=this.ctx.pie.draw(h.series);break;case"radialBar":m=G.draw(h.series);break;case"radar":m=H.draw(h.series);break;default:m=F.draw(h.series)}return m}},{key:"setSVGDimensions",value:function(){var o=this.w.globals,r=this.w.config;o.svgWidth=r.chart.width,o.svgHeight=r.chart.height;var a=_.getDimensions(this.el),d=r.chart.width.toString().split(/[0-9]+/g).pop();d==="%"?_.isNumber(a[0])&&(a[0].width===0&&(a=_.getDimensions(this.el.parentNode)),o.svgWidth=a[0]*parseInt(r.chart.width,10)/100):d!=="px"&&d!==""||(o.svgWidth=parseInt(r.chart.width,10));var h=r.chart.height.toString().split(/[0-9]+/g).pop();if(o.svgHeight!=="auto"&&o.svgHeight!=="")if(h==="%"){var c=_.getDimensions(this.el.parentNode);o.svgHeight=c[1]*parseInt(r.chart.height,10)/100}else o.svgHeight=parseInt(r.chart.height,10);else o.axisCharts?o.svgHeight=o.svgWidth/1.61:o.svgHeight=o.svgWidth/1.2;if(o.svgWidth<0&&(o.svgWidth=0),o.svgHeight<0&&(o.svgHeight=0),$.setAttrs(o.dom.Paper.node,{width:o.svgWidth,height:o.svgHeight}),h!=="%"){var p=r.chart.sparkline.enabled?0:o.axisCharts?r.chart.parentHeightOffset:0;o.dom.Paper.node.parentNode.parentNode.style.minHeight=o.svgHeight+p+"px"}o.dom.elWrap.style.width=o.svgWidth+"px",o.dom.elWrap.style.height=o.svgHeight+"px"}},{key:"shiftGraphPosition",value:function(){var o=this.w.globals,r=o.translateY,a={transform:"translate("+o.translateX+", "+r+")"};$.setAttrs(o.dom.elGraphical.node,a)}},{key:"resizeNonAxisCharts",value:function(){var o=this.w,r=o.globals,a=0,d=o.config.chart.sparkline.enabled?1:15;d+=o.config.grid.padding.bottom,o.config.legend.position!=="top"&&o.config.legend.position!=="bottom"||!o.config.legend.show||o.config.legend.floating||(a=new Re(this.ctx).legendHelpers.getLegendBBox().clwh+10);var h=o.globals.dom.baseEl.querySelector(".apexcharts-radialbar, .apexcharts-pie"),c=2.05*o.globals.radialSize;if(h&&!o.config.chart.sparkline.enabled&&o.config.plotOptions.radialBar.startAngle!==0){var p=_.getBoundingClientRect(h);c=p.bottom;var f=p.bottom-p.top;c=Math.max(2.05*o.globals.radialSize,f)}var v=c+r.translateY+a+d;r.dom.elLegendForeign&&r.dom.elLegendForeign.setAttribute("height",v),o.config.chart.height&&String(o.config.chart.height).indexOf("%")>0||(r.dom.elWrap.style.height=v+"px",$.setAttrs(r.dom.Paper.node,{height:v}),r.dom.Paper.node.parentNode.parentNode.style.minHeight=v+"px")}},{key:"coreCalculations",value:function(){new te(this.ctx).init()}},{key:"resetGlobals",value:function(){var o=this,r=function(){return o.w.config.series.map(function(h){return[]})},a=new ti,d=this.w.globals;a.initGlobalVars(d),d.seriesXvalues=r(),d.seriesYvalues=r()}},{key:"isMultipleY",value:function(){if(this.w.config.yaxis.constructor===Array&&this.w.config.yaxis.length>1)return this.w.globals.isMultipleYAxis=!0,!0}},{key:"xySettings",value:function(){var o=null,r=this.w;if(r.globals.axisCharts){if(r.config.xaxis.crosshairs.position==="back"&&new le(this.ctx).drawXCrosshairs(),r.config.yaxis[0].crosshairs.position==="back"&&new le(this.ctx).drawYCrosshairs(),r.config.xaxis.type==="datetime"&&r.config.xaxis.labels.formatter===void 0){this.ctx.timeScale=new Jr(this.ctx);var a=[];isFinite(r.globals.minX)&&isFinite(r.globals.maxX)&&!r.globals.isBarHorizontal?a=this.ctx.timeScale.calculateTimeScaleTicks(r.globals.minX,r.globals.maxX):r.globals.isBarHorizontal&&(a=this.ctx.timeScale.calculateTimeScaleTicks(r.globals.minY,r.globals.maxY)),this.ctx.timeScale.recalcDimensionsBasedOnFormat(a)}o=new Y(this.ctx).getCalculatedRatios()}return o}},{key:"updateSourceChart",value:function(o){this.ctx.w.globals.selection=void 0,this.ctx.updateHelpers._updateOptions({chart:{selection:{xaxis:{min:o.w.globals.minX,max:o.w.globals.maxX}}}},!1,!1)}},{key:"setupBrushHandler",value:function(){var o=this,r=this.w;if(r.config.chart.brush.enabled&&typeof r.config.chart.events.selection!="function"){var a=Array.isArray(r.config.chart.brush.targets)?r.config.chart.brush.targets:[r.config.chart.brush.target];a.forEach(function(d){var h=ApexCharts.getChartByID(d);h.w.globals.brushSource=o.ctx,typeof h.w.config.chart.events.zoomed!="function"&&(h.w.config.chart.events.zoomed=function(){o.updateSourceChart(h)}),typeof h.w.config.chart.events.scrolled!="function"&&(h.w.config.chart.events.scrolled=function(){o.updateSourceChart(h)})}),r.config.chart.events.selection=function(d,h){a.forEach(function(c){var p=ApexCharts.getChartByID(c),f=_.clone(r.config.yaxis);if(r.config.chart.brush.autoScaleYaxis&&p.w.globals.series.length===1){var v=new ne(p);f=v.autoScaleY(p,f,h)}var y=p.w.config.yaxis.reduce(function(b,w,R){return[].concat(U(b),[s(s({},p.w.config.yaxis[R]),{},{min:f[0].min,max:f[0].max})])},[]);p.ctx.updateHelpers._updateOptions({xaxis:{min:h.xaxis.min,max:h.xaxis.max},yaxis:y},!1,!1,!1,!1)})}}}}]),O}(),me=function(){function O(o){l(this,O),this.ctx=o,this.w=o.w}return g(O,[{key:"_updateOptions",value:function(o){var r=this,a=arguments.length>1&&arguments[1]!==void 0&&arguments[1],d=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],h=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],c=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return new Promise(function(p){var f=[r.ctx];h&&(f=r.ctx.getSyncedCharts()),r.ctx.w.globals.isExecCalled&&(f=[r.ctx],r.ctx.w.globals.isExecCalled=!1),f.forEach(function(v,y){var b=v.w;if(b.globals.shouldAnimate=d,a||(b.globals.resized=!0,b.globals.dataChanged=!0,d&&v.series.getPreviousPaths()),o&&n(o)==="object"&&(v.config=new _t(o),o=Y.extendArrayProps(v.config,o,b),v.w.globals.chartID!==r.ctx.w.globals.chartID&&delete o.series,b.config=_.extend(b.config,o),c&&(b.globals.lastXAxis=o.xaxis?_.clone(o.xaxis):[],b.globals.lastYAxis=o.yaxis?_.clone(o.yaxis):[],b.globals.initialConfig=_.extend({},b.config),b.globals.initialSeries=_.clone(b.config.series),o.series))){for(var w=0;w<b.globals.collapsedSeriesIndices.length;w++){var R=b.config.series[b.globals.collapsedSeriesIndices[w]];b.globals.collapsedSeries[w].data=b.globals.axisCharts?R.data.slice():R}for(var T=0;T<b.globals.ancillaryCollapsedSeriesIndices.length;T++){var F=b.config.series[b.globals.ancillaryCollapsedSeriesIndices[T]];b.globals.ancillaryCollapsedSeries[T].data=b.globals.axisCharts?F.data.slice():F}v.series.emptyCollapsedSeries(b.config.series)}return v.update(o).then(function(){y===f.length-1&&p(v)})})})}},{key:"_updateSeries",value:function(o,r){var a=this,d=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return new Promise(function(h){var c,p=a.w;return p.globals.shouldAnimate=r,p.globals.dataChanged=!0,r&&a.ctx.series.getPreviousPaths(),p.globals.axisCharts?((c=o.map(function(f,v){return a._extendSeries(f,v)})).length===0&&(c=[{data:[]}]),p.config.series=c):p.config.series=o.slice(),d&&(p.globals.initialConfig.series=_.clone(p.config.series),p.globals.initialSeries=_.clone(p.config.series)),a.ctx.update().then(function(){h(a.ctx)})})}},{key:"_extendSeries",value:function(o,r){var a=this.w,d=a.config.series[r];return s(s({},a.config.series[r]),{},{name:o.name?o.name:d?.name,color:o.color?o.color:d?.color,type:o.type?o.type:d?.type,group:o.group?o.group:d?.group,data:o.data?o.data:d?.data,zIndex:o.zIndex!==void 0?o.zIndex:r})}},{key:"toggleDataPointSelection",value:function(o,r){var a=this.w,d=null,h=".apexcharts-series[data\\:realIndex='".concat(o,"']");return a.globals.axisCharts?d=a.globals.dom.Paper.select("".concat(h," path[j='").concat(r,"'], ").concat(h," circle[j='").concat(r,"'], ").concat(h," rect[j='").concat(r,"']")).members[0]:r===void 0&&(d=a.globals.dom.Paper.select("".concat(h," path[j='").concat(o,"']")).members[0],a.config.chart.type!=="pie"&&a.config.chart.type!=="polarArea"&&a.config.chart.type!=="donut"||this.ctx.pie.pieClicked(o)),d?(new $(this.ctx).pathMouseDown(d,null),d.node?d.node:null):(console.warn("toggleDataPointSelection: Element not found"),null)}},{key:"forceXAxisUpdate",value:function(o){var r=this.w;if(["min","max"].forEach(function(d){o.xaxis[d]!==void 0&&(r.config.xaxis[d]=o.xaxis[d],r.globals.lastXAxis[d]=o.xaxis[d])}),o.xaxis.categories&&o.xaxis.categories.length&&(r.config.xaxis.categories=o.xaxis.categories),r.config.xaxis.convertedCatToNumeric){var a=new vt(o);o=a.convertCatToNumericXaxis(o,this.ctx)}return o}},{key:"forceYAxisUpdate",value:function(o){return o.chart&&o.chart.stacked&&o.chart.stackType==="100%"&&(Array.isArray(o.yaxis)?o.yaxis.forEach(function(r,a){o.yaxis[a].min=0,o.yaxis[a].max=100}):(o.yaxis.min=0,o.yaxis.max=100)),o}},{key:"revertDefaultAxisMinMax",value:function(o){var r=this,a=this.w,d=a.globals.lastXAxis,h=a.globals.lastYAxis;o&&o.xaxis&&(d=o.xaxis),o&&o.yaxis&&(h=o.yaxis),a.config.xaxis.min=d.min,a.config.xaxis.max=d.max;var c=function(p){h[p]!==void 0&&(a.config.yaxis[p].min=h[p].min,a.config.yaxis[p].max=h[p].max)};a.config.yaxis.map(function(p,f){a.globals.zoomed||h[f]!==void 0?c(f):r.ctx.opts.yaxis[f]!==void 0&&(p.min=r.ctx.opts.yaxis[f].min,p.max=r.ctx.opts.yaxis[f].max)})}}]),O}();ks=typeof window<"u"?window:void 0,Zs=function(O,o){var r=(this!==void 0?this:O).SVG=function(m){if(r.supported)return m=new r.Doc(m),r.parser.draw||r.prepare(),m};if(r.ns="http://www.w3.org/2000/svg",r.xmlns="http://www.w3.org/2000/xmlns/",r.xlink="http://www.w3.org/1999/xlink",r.svgjs="http://svgjs.dev",r.supported=!0,!r.supported)return!1;r.did=1e3,r.eid=function(m){return"Svgjs"+y(m)+r.did++},r.create=function(m){var x=o.createElementNS(this.ns,m);return x.setAttribute("id",this.eid(m)),x},r.extend=function(){var m,x;x=(m=[].slice.call(arguments)).pop();for(var P=m.length-1;P>=0;P--)if(m[P])for(var k in x)m[P].prototype[k]=x[k];r.Set&&r.Set.inherit&&r.Set.inherit()},r.invent=function(m){var x=typeof m.create=="function"?m.create:function(){this.constructor.call(this,r.create(m.create))};return m.inherit&&(x.prototype=new m.inherit),m.extend&&r.extend(x,m.extend),m.construct&&r.extend(m.parent||r.Container,m.construct),x},r.adopt=function(m){return m?m.instance?m.instance:((x=m.nodeName=="svg"?m.parentNode instanceof O.SVGElement?new r.Nested:new r.Doc:m.nodeName=="linearGradient"?new r.Gradient("linear"):m.nodeName=="radialGradient"?new r.Gradient("radial"):r[y(m.nodeName)]?new r[y(m.nodeName)]:new r.Element(m)).type=m.nodeName,x.node=m,m.instance=x,x instanceof r.Doc&&x.namespace().defs(),x.setData(JSON.parse(m.getAttribute("svgjs:data"))||{}),x):null;var x},r.prepare=function(){var m=o.getElementsByTagName("body")[0],x=(m?new r.Doc(m):r.adopt(o.documentElement).nested()).size(2,0);r.parser={body:m||o.documentElement,draw:x.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").node,poly:x.polyline().node,path:x.path().node,native:r.create("svg")}},r.parser={native:r.create("svg")},o.addEventListener("DOMContentLoaded",function(){r.parser.draw||r.prepare()},!1),r.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},r.utils={map:function(m,x){for(var P=m.length,k=[],V=0;V<P;V++)k.push(x(m[V]));return k},filter:function(m,x){for(var P=m.length,k=[],V=0;V<P;V++)x(m[V])&&k.push(m[V]);return k},filterSVGElements:function(m){return this.filter(m,function(x){return x instanceof O.SVGElement})}},r.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},r.Color=function(m){var x,P;this.r=0,this.g=0,this.b=0,m&&(typeof m=="string"?r.regex.isRgb.test(m)?(x=r.regex.rgb.exec(m.replace(r.regex.whitespace,"")),this.r=parseInt(x[1]),this.g=parseInt(x[2]),this.b=parseInt(x[3])):r.regex.isHex.test(m)&&(x=r.regex.hex.exec((P=m).length==4?["#",P.substring(1,2),P.substring(1,2),P.substring(2,3),P.substring(2,3),P.substring(3,4),P.substring(3,4)].join(""):P),this.r=parseInt(x[1],16),this.g=parseInt(x[2],16),this.b=parseInt(x[3],16)):n(m)==="object"&&(this.r=m.r,this.g=m.g,this.b=m.b))},r.extend(r.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+b(this.r)+b(this.g)+b(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(m){return this.destination=new r.Color(m),this},at:function(m){return this.destination?(m=m<0?0:m>1?1:m,new r.Color({r:~~(this.r+(this.destination.r-this.r)*m),g:~~(this.g+(this.destination.g-this.g)*m),b:~~(this.b+(this.destination.b-this.b)*m)})):this}}),r.Color.test=function(m){return m+="",r.regex.isHex.test(m)||r.regex.isRgb.test(m)},r.Color.isRgb=function(m){return m&&typeof m.r=="number"&&typeof m.g=="number"&&typeof m.b=="number"},r.Color.isColor=function(m){return r.Color.isRgb(m)||r.Color.test(m)},r.Array=function(m,x){(m=(m||[]).valueOf()).length==0&&x&&(m=x.valueOf()),this.value=this.parse(m)},r.extend(r.Array,{toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(m){return m=m.valueOf(),Array.isArray(m)?m:this.split(m)}}),r.PointArray=function(m,x){r.Array.call(this,m,x||[[0,0]])},r.PointArray.prototype=new r.Array,r.PointArray.prototype.constructor=r.PointArray;for(var a={M:function(m,x,P){return x.x=P.x=m[0],x.y=P.y=m[1],["M",x.x,x.y]},L:function(m,x){return x.x=m[0],x.y=m[1],["L",m[0],m[1]]},H:function(m,x){return x.x=m[0],["H",m[0]]},V:function(m,x){return x.y=m[0],["V",m[0]]},C:function(m,x){return x.x=m[4],x.y=m[5],["C",m[0],m[1],m[2],m[3],m[4],m[5]]},Q:function(m,x){return x.x=m[2],x.y=m[3],["Q",m[0],m[1],m[2],m[3]]},S:function(m,x){return x.x=m[2],x.y=m[3],["S",m[0],m[1],m[2],m[3]]},Z:function(m,x,P){return x.x=P.x,x.y=P.y,["Z"]}},d="mlhvqtcsaz".split(""),h=0,c=d.length;h<c;++h)a[d[h]]=function(m){return function(x,P,k){if(m=="H")x[0]=x[0]+P.x;else if(m=="V")x[0]=x[0]+P.y;else if(m=="A")x[5]=x[5]+P.x,x[6]=x[6]+P.y;else for(var V=0,B=x.length;V<B;++V)x[V]=x[V]+(V%2?P.y:P.x);if(a&&typeof a[m]=="function")return a[m](x,P,k)}}(d[h].toUpperCase());r.PathArray=function(m,x){r.Array.call(this,m,x||[["M",0,0]])},r.PathArray.prototype=new r.Array,r.PathArray.prototype.constructor=r.PathArray,r.extend(r.PathArray,{toString:function(){return function(m){for(var x=0,P=m.length,k="";x<P;x++)k+=m[x][0],m[x][1]!=null&&(k+=m[x][1],m[x][2]!=null&&(k+=" ",k+=m[x][2],m[x][3]!=null&&(k+=" ",k+=m[x][3],k+=" ",k+=m[x][4],m[x][5]!=null&&(k+=" ",k+=m[x][5],k+=" ",k+=m[x][6],m[x][7]!=null&&(k+=" ",k+=m[x][7])))));return k+" "}(this.value)},move:function(m,x){var P=this.bbox();return P.x,P.y,this},at:function(m){if(!this.destination)return this;for(var x=this.value,P=this.destination.value,k=[],V=new r.PathArray,B=0,j=x.length;B<j;B++){k[B]=[x[B][0]];for(var K=1,ie=x[B].length;K<ie;K++)k[B][K]=x[B][K]+(P[B][K]-x[B][K])*m;k[B][0]==="A"&&(k[B][4]=+(k[B][4]!=0),k[B][5]=+(k[B][5]!=0))}return V.value=k,V},parse:function(m){if(m instanceof r.PathArray)return m.valueOf();var x,P={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};m=typeof m=="string"?m.replace(r.regex.numbersWithDots,f).replace(r.regex.pathLetters," $& ").replace(r.regex.hyphen,"$1 -").trim().split(r.regex.delimiter):m.reduce(function(ie,he){return[].concat.call(ie,he)},[]);var k=[],V=new r.Point,B=new r.Point,j=0,K=m.length;do r.regex.isPathLetter.test(m[j])?(x=m[j],++j):x=="M"?x="L":x=="m"&&(x="l"),k.push(a[x].call(null,m.slice(j,j+=P[x.toUpperCase()]).map(parseFloat),V,B));while(K>j);return k},bbox:function(){return r.parser.draw||r.prepare(),r.parser.path.setAttribute("d",this.toString()),r.parser.path.getBBox()}}),r.Number=r.invent({create:function(m,x){this.value=0,this.unit=x||"",typeof m=="number"?this.value=isNaN(m)?0:isFinite(m)?m:m<0?-34e37:34e37:typeof m=="string"?(x=m.match(r.regex.numberAndUnit))&&(this.value=parseFloat(x[1]),x[5]=="%"?this.value/=100:x[5]=="s"&&(this.value*=1e3),this.unit=x[5]):m instanceof r.Number&&(this.value=m.valueOf(),this.unit=m.unit)},extend:{toString:function(){return(this.unit=="%"?~~(1e8*this.value)/1e6:this.unit=="s"?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(m){return m=new r.Number(m),new r.Number(this+m,this.unit||m.unit)},minus:function(m){return m=new r.Number(m),new r.Number(this-m,this.unit||m.unit)},times:function(m){return m=new r.Number(m),new r.Number(this*m,this.unit||m.unit)},divide:function(m){return m=new r.Number(m),new r.Number(this/m,this.unit||m.unit)},to:function(m){var x=new r.Number(this);return typeof m=="string"&&(x.unit=m),x},morph:function(m){return this.destination=new r.Number(m),m.relative&&(this.destination.value+=this.value),this},at:function(m){return this.destination?new r.Number(this.destination).minus(this).times(m).plus(this):this}}}),r.Element=r.invent({create:function(m){this._stroke=r.defaults.attrs.stroke,this._event=null,this.dom={},(this.node=m)&&(this.type=m.nodeName,this.node.instance=this,this._stroke=m.getAttribute("stroke")||this._stroke)},extend:{x:function(m){return this.attr("x",m)},y:function(m){return this.attr("y",m)},cx:function(m){return m==null?this.x()+this.width()/2:this.x(m-this.width()/2)},cy:function(m){return m==null?this.y()+this.height()/2:this.y(m-this.height()/2)},move:function(m,x){return this.x(m).y(x)},center:function(m,x){return this.cx(m).cy(x)},width:function(m){return this.attr("width",m)},height:function(m){return this.attr("height",m)},size:function(m,x){var P=w(this,m,x);return this.width(new r.Number(P.width)).height(new r.Number(P.height))},clone:function(m){this.writeDataToDom();var x=F(this.node.cloneNode(!0));return m?m.add(x):this.after(x),x},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(m){return this.after(m).remove(),m},addTo:function(m){return m.put(this)},putIn:function(m){return m.add(this)},id:function(m){return this.attr("id",m)},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return this.style("display")!="none"},toString:function(){return this.attr("id")},classes:function(){var m=this.attr("class");return m==null?[]:m.trim().split(r.regex.delimiter)},hasClass:function(m){return this.classes().indexOf(m)!=-1},addClass:function(m){if(!this.hasClass(m)){var x=this.classes();x.push(m),this.attr("class",x.join(" "))}return this},removeClass:function(m){return this.hasClass(m)&&this.attr("class",this.classes().filter(function(x){return x!=m}).join(" ")),this},toggleClass:function(m){return this.hasClass(m)?this.removeClass(m):this.addClass(m)},reference:function(m){return r.get(this.attr(m))},parent:function(m){var x=this;if(!x.node.parentNode)return null;if(x=r.adopt(x.node.parentNode),!m)return x;for(;x&&x.node instanceof O.SVGElement;){if(typeof m=="string"?x.matches(m):x instanceof m)return x;if(!x.node.parentNode||x.node.parentNode.nodeName=="#document")return null;x=r.adopt(x.node.parentNode)}},doc:function(){return this instanceof r.Doc?this:this.parent(r.Doc)},parents:function(m){var x=[],P=this;do{if(!(P=P.parent(m))||!P.node)break;x.push(P)}while(P.parent);return x},matches:function(m){return function(x,P){return(x.matches||x.matchesSelector||x.msMatchesSelector||x.mozMatchesSelector||x.webkitMatchesSelector||x.oMatchesSelector).call(x,P)}(this.node,m)},native:function(){return this.node},svg:function(m){var x=o.createElement("svg");if(!(m&&this instanceof r.Parent))return x.appendChild(m=o.createElement("svg")),this.writeDataToDom(),m.appendChild(this.node.cloneNode(!0)),x.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");x.innerHTML="<svg>"+m.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var P=0,k=x.firstChild.childNodes.length;P<k;P++)this.node.appendChild(x.firstChild.firstChild);return this},writeDataToDom:function(){return(this.each||this.lines)&&(this.each?this:this.lines()).each(function(){this.writeDataToDom()}),this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(m){return this.dom=m,this},is:function(m){return function(x,P){return x instanceof P}(this,m)}}}),r.easing={"-":function(m){return m},"<>":function(m){return-Math.cos(m*Math.PI)/2+.5},">":function(m){return Math.sin(m*Math.PI/2)},"<":function(m){return 1-Math.cos(m*Math.PI/2)}},r.morph=function(m){return function(x,P){return new r.MorphObj(x,P).at(m)}},r.Situation=r.invent({create:function(m){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new r.Number(m.duration).valueOf(),this.delay=new r.Number(m.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=m.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),r.FX=r.invent({create:function(m){this._target=m,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(m,x,P){n(m)==="object"&&(x=m.ease,P=m.delay,m=m.duration);var k=new r.Situation({duration:m||1e3,delay:P||0,ease:r.easing[x||"-"]||x});return this.queue(k),this},target:function(m){return m&&m instanceof r.Element?(this._target=m,this):this._target},timeToAbsPos:function(m){return(m-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(m){return this.situation.duration/this._speed*m+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=O.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){O.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(m){return(typeof m=="function"||m instanceof r.Situation)&&this.situations.push(m),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof r.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var m,x=this.situation;if(x.init)return this;for(var P in x.animations){m=this.target()[P](),Array.isArray(m)||(m=[m]),Array.isArray(x.animations[P])||(x.animations[P]=[x.animations[P]]);for(var k=m.length;k--;)x.animations[P][k]instanceof r.Number&&(m[k]=new r.Number(m[k])),x.animations[P][k]=m[k].morph(x.animations[P][k])}for(var P in x.attrs)x.attrs[P]=new r.MorphObj(this.target().attr(P),x.attrs[P]);for(var P in x.styles)x.styles[P]=new r.MorphObj(this.target().style(P),x.styles[P]);return x.initialTransformation=this.target().matrixify(),x.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(m,x){var P=this.active;return this.active=!1,x&&this.clearQueue(),m&&this.situation&&(!P&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},after:function(m){var x=this.last();return this.target().on("finished.fx",function P(k){k.detail.situation==x&&(m.call(this,x),this.off("finished.fx",P))}),this._callStart()},during:function(m){var x=this.last(),P=function(k){k.detail.situation==x&&m.call(this,k.detail.pos,r.morph(k.detail.pos),k.detail.eased,x)};return this.target().off("during.fx",P).on("during.fx",P),this.after(function(){this.off("during.fx",P)}),this._callStart()},afterAll:function(m){var x=function P(k){m.call(this),this.off("allfinished.fx",P)};return this.target().off("allfinished.fx",x).on("allfinished.fx",x),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(m,x,P){return this.last()[P||"animations"][m]=x,this._callStart()},step:function(m){var x,P,k;m||(this.absPos=this.timeToAbsPos(+new Date)),this.situation.loops!==!1?(x=Math.max(this.absPos,0),P=Math.floor(x),this.situation.loops===!0||P<this.situation.loops?(this.pos=x-P,k=this.situation.loop,this.situation.loop=P):(this.absPos=this.situation.loops,this.pos=1,k=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=!!((this.situation.loop-k)%2))):(this.absPos=Math.min(this.absPos,1),this.pos=this.absPos),this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var V=this.situation.ease(this.pos);for(var B in this.situation.once)B>this.lastPos&&B<=V&&(this.situation.once[B].call(this.target(),this.pos,V),delete this.situation.once[B]);return this.active&&this.target().fire("during",{pos:this.pos,eased:V,fx:this,situation:this.situation}),this.situation?(this.eachAt(),this.pos==1&&!this.situation.reversed||this.situation.reversed&&this.pos==0?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=V,this):this},eachAt:function(){var m,x=this,P=this.target(),k=this.situation;for(var V in k.animations)m=[].concat(k.animations[V]).map(function(K){return typeof K!="string"&&K.at?K.at(k.ease(x.pos),x.pos):K}),P[V].apply(P,m);for(var V in k.attrs)m=[V].concat(k.attrs[V]).map(function(ie){return typeof ie!="string"&&ie.at?ie.at(k.ease(x.pos),x.pos):ie}),P.attr.apply(P,m);for(var V in k.styles)m=[V].concat(k.styles[V]).map(function(ie){return typeof ie!="string"&&ie.at?ie.at(k.ease(x.pos),x.pos):ie}),P.style.apply(P,m);if(k.transforms.length){m=k.initialTransformation,V=0;for(var B=k.transforms.length;V<B;V++){var j=k.transforms[V];j instanceof r.Matrix?m=j.relative?m.multiply(new r.Matrix().morph(j).at(k.ease(this.pos))):m.morph(j).at(k.ease(this.pos)):(j.relative||j.undo(m.extract()),m=m.multiply(j.at(k.ease(this.pos))))}P.matrix(m)}return this},once:function(m,x,P){var k=this.last();return P||(m=k.ease(m)),k.once[m]=x,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:r.Element,construct:{animate:function(m,x,P){return(this.fx||(this.fx=new r.FX(this))).animate(m,x,P)},delay:function(m){return(this.fx||(this.fx=new r.FX(this))).delay(m)},stop:function(m,x){return this.fx&&this.fx.stop(m,x),this},finish:function(){return this.fx&&this.fx.finish(),this}}}),r.MorphObj=r.invent({create:function(m,x){return r.Color.isColor(x)?new r.Color(m).morph(x):r.regex.delimiter.test(m)?r.regex.pathLetters.test(m)?new r.PathArray(m).morph(x):new r.Array(m).morph(x):r.regex.numberAndUnit.test(x)?new r.Number(m).morph(x):(this.value=m,void(this.destination=x))},extend:{at:function(m,x){return x<1?this.value:this.destination},valueOf:function(){return this.value}}}),r.extend(r.FX,{attr:function(m,x,P){if(n(m)==="object")for(var k in m)this.attr(k,m[k]);else this.add(m,x,"attrs");return this},plot:function(m,x,P,k){return arguments.length==4?this.plot([m,x,P,k]):this.add("plot",new(this.target()).morphArray(m))}}),r.Box=r.invent({create:function(m,x,P,k){if(!(n(m)!=="object"||m instanceof r.Element))return r.Box.call(this,m.left!=null?m.left:m.x,m.top!=null?m.top:m.y,m.width,m.height);var V;arguments.length==4&&(this.x=m,this.y=x,this.width=P,this.height=k),(V=this).x==null&&(V.x=0,V.y=0,V.width=0,V.height=0),V.w=V.width,V.h=V.height,V.x2=V.x+V.width,V.y2=V.y+V.height,V.cx=V.x+V.width/2,V.cy=V.y+V.height/2}}),r.BBox=r.invent({create:function(m){if(r.Box.apply(this,[].slice.call(arguments)),m instanceof r.Element){var x;try{if(!o.documentElement.contains){for(var P=m.node;P.parentNode;)P=P.parentNode;if(P!=o)throw new Error("Element not in the dom")}x=m.node.getBBox()}catch{if(m instanceof r.Shape){r.parser.draw||r.prepare();var k=m.clone(r.parser.draw.instance).show();k&&k.node&&typeof k.node.getBBox=="function"&&(x=k.node.getBBox()),k&&typeof k.remove=="function"&&k.remove()}else x={x:m.node.clientLeft,y:m.node.clientTop,width:m.node.clientWidth,height:m.node.clientHeight}}r.Box.call(this,x)}},inherit:r.Box,parent:r.Element,construct:{bbox:function(){return new r.BBox(this)}}}),r.BBox.prototype.constructor=r.BBox,r.Matrix=r.invent({create:function(m){var x=T([1,0,0,1,0,0]);m=m===null?x:m instanceof r.Element?m.matrixify():typeof m=="string"?T(m.split(r.regex.delimiter).map(parseFloat)):arguments.length==6?T([].slice.call(arguments)):Array.isArray(m)?T(m):m&&n(m)==="object"?m:x;for(var P=G.length-1;P>=0;--P)this[G[P]]=m[G[P]]!=null?m[G[P]]:x[G[P]]},extend:{extract:function(){var m=R(this,0,1);R(this,1,0);var x=180/Math.PI*Math.atan2(m.y,m.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(x*Math.PI/180)+this.f*Math.sin(x*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(x*Math.PI/180)+this.e*Math.sin(-x*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),rotation:x,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new r.Matrix(this)}},clone:function(){return new r.Matrix(this)},morph:function(m){return this.destination=new r.Matrix(m),this},multiply:function(m){return new r.Matrix(this.native().multiply(function(x){return x instanceof r.Matrix||(x=new r.Matrix(x)),x}(m).native()))},inverse:function(){return new r.Matrix(this.native().inverse())},translate:function(m,x){return new r.Matrix(this.native().translate(m||0,x||0))},native:function(){for(var m=r.parser.native.createSVGMatrix(),x=G.length-1;x>=0;x--)m[G[x]]=this[G[x]];return m},toString:function(){return"matrix("+I(this.a)+","+I(this.b)+","+I(this.c)+","+I(this.d)+","+I(this.e)+","+I(this.f)+")"}},parent:r.Element,construct:{ctm:function(){return new r.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof r.Nested){var m=this.rect(1,1),x=m.node.getScreenCTM();return m.remove(),new r.Matrix(x)}return new r.Matrix(this.node.getScreenCTM())}}}),r.Point=r.invent({create:function(m,x){var P;P=Array.isArray(m)?{x:m[0],y:m[1]}:n(m)==="object"?{x:m.x,y:m.y}:m!=null?{x:m,y:x??m}:{x:0,y:0},this.x=P.x,this.y=P.y},extend:{clone:function(){return new r.Point(this)},morph:function(m,x){return this.destination=new r.Point(m,x),this}}}),r.extend(r.Element,{point:function(m,x){return new r.Point(m,x).transform(this.screenCTM().inverse())}}),r.extend(r.Element,{attr:function(m,x,P){if(m==null){for(m={},P=(x=this.node.attributes).length-1;P>=0;P--)m[x[P].nodeName]=r.regex.isNumber.test(x[P].nodeValue)?parseFloat(x[P].nodeValue):x[P].nodeValue;return m}if(n(m)==="object")for(var k in m)this.attr(k,m[k]);else if(x===null)this.node.removeAttribute(m);else{if(x==null)return(x=this.node.getAttribute(m))==null?r.defaults.attrs[m]:r.regex.isNumber.test(x)?parseFloat(x):x;m=="stroke-width"?this.attr("stroke",parseFloat(x)>0?this._stroke:null):m=="stroke"&&(this._stroke=x),m!="fill"&&m!="stroke"||(r.regex.isImage.test(x)&&(x=this.doc().defs().image(x,0,0)),x instanceof r.Image&&(x=this.doc().defs().pattern(0,0,function(){this.add(x)}))),typeof x=="number"?x=new r.Number(x):r.Color.isColor(x)?x=new r.Color(x):Array.isArray(x)&&(x=new r.Array(x)),m=="leading"?this.leading&&this.leading(x):typeof P=="string"?this.node.setAttributeNS(P,m,x.toString()):this.node.setAttribute(m,x.toString()),!this.rebuild||m!="font-size"&&m!="x"||this.rebuild(m,x)}return this}}),r.extend(r.Element,{transform:function(m,x){var P;return n(m)!=="object"?(P=new r.Matrix(this).extract(),typeof m=="string"?P[m]:P):(P=new r.Matrix(this),x=!!x||!!m.relative,m.a!=null&&(P=x?P.multiply(new r.Matrix(m)):new r.Matrix(m)),this.attr("transform",P))}}),r.extend(r.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(r.regex.transforms).slice(0,-1).map(function(m){var x=m.trim().split("(");return[x[0],x[1].split(r.regex.delimiter).map(function(P){return parseFloat(P)})]}).reduce(function(m,x){return x[0]=="matrix"?m.multiply(T(x[1])):m[x[0]].apply(m,x[1])},new r.Matrix)},toParent:function(m){if(this==m)return this;var x=this.screenCTM(),P=m.screenCTM().inverse();return this.addTo(m).untransform().transform(P.multiply(x)),this},toDoc:function(){return this.toParent(this.doc())}}),r.Transformation=r.invent({create:function(m,x){if(arguments.length>1&&typeof x!="boolean")return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(m))for(var P=0,k=this.arguments.length;P<k;++P)this[this.arguments[P]]=m[P];else if(m&&n(m)==="object")for(P=0,k=this.arguments.length;P<k;++P)this[this.arguments[P]]=m[this.arguments[P]];this.inversed=!1,x===!0&&(this.inversed=!0)}}),r.Translate=r.invent({parent:r.Matrix,inherit:r.Transformation,create:function(m,x){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),r.extend(r.Element,{style:function(m,x){if(arguments.length==0)return this.node.style.cssText||"";if(arguments.length<2)if(n(m)==="object")for(var P in m)this.style(P,m[P]);else{if(!r.regex.isCss.test(m))return this.node.style[v(m)];for(m=m.split(/\s*;\s*/).filter(function(k){return!!k}).map(function(k){return k.split(/\s*:\s*/)});x=m.pop();)this.style(x[0],x[1])}else this.node.style[v(m)]=x===null||r.regex.isBlank.test(x)?"":x;return this}}),r.Parent=r.invent({create:function(m){this.constructor.call(this,m)},inherit:r.Element,extend:{children:function(){return r.utils.map(r.utils.filterSVGElements(this.node.childNodes),function(m){return r.adopt(m)})},add:function(m,x){return x==null?this.node.appendChild(m.node):m.node!=this.node.childNodes[x]&&this.node.insertBefore(m.node,this.node.childNodes[x]),this},put:function(m,x){return this.add(m,x),m},has:function(m){return this.index(m)>=0},index:function(m){return[].slice.call(this.node.childNodes).indexOf(m.node)},get:function(m){return r.adopt(this.node.childNodes[m])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(m,x){for(var P=this.children(),k=0,V=P.length;k<V;k++)P[k]instanceof r.Element&&m.apply(P[k],[k,P]),x&&P[k]instanceof r.Container&&P[k].each(m,x);return this},removeElement:function(m){return this.node.removeChild(m.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),r.extend(r.Parent,{ungroup:function(m,x){return x===0||this instanceof r.Defs||this.node==r.parser.draw||(m=m||(this instanceof r.Doc?this:this.parent(r.Parent)),x=x||1/0,this.each(function(){return this instanceof r.Defs?this:this instanceof r.Parent?this.ungroup(m,x-1):this.toParent(m)}),this.node.firstChild||this.remove()),this},flatten:function(m,x){return this.ungroup(m,x)}}),r.Container=r.invent({create:function(m){this.constructor.call(this,m)},inherit:r.Parent}),r.ViewBox=r.invent({parent:r.Container,construct:{}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(m){r.Element.prototype[m]=function(x){return r.on(this.node,m,x),this}}),r.listeners=[],r.handlerMap=[],r.listenerId=0,r.on=function(m,x,P,k,V){var B=P.bind(k||m.instance||m),j=(r.handlerMap.indexOf(m)+1||r.handlerMap.push(m))-1,K=x.split(".")[0],ie=x.split(".")[1]||"*";r.listeners[j]=r.listeners[j]||{},r.listeners[j][K]=r.listeners[j][K]||{},r.listeners[j][K][ie]=r.listeners[j][K][ie]||{},P._svgjsListenerId||(P._svgjsListenerId=++r.listenerId),r.listeners[j][K][ie][P._svgjsListenerId]=B,m.addEventListener(K,B,V||{passive:!0})},r.off=function(m,x,P){var k=r.handlerMap.indexOf(m),V=x&&x.split(".")[0],B=x&&x.split(".")[1],j="";if(k!=-1)if(P){if(typeof P=="function"&&(P=P._svgjsListenerId),!P)return;r.listeners[k][V]&&r.listeners[k][V][B||"*"]&&(m.removeEventListener(V,r.listeners[k][V][B||"*"][P],!1),delete r.listeners[k][V][B||"*"][P])}else if(B&&V){if(r.listeners[k][V]&&r.listeners[k][V][B]){for(var K in r.listeners[k][V][B])r.off(m,[V,B].join("."),K);delete r.listeners[k][V][B]}}else if(B)for(var ie in r.listeners[k])for(var j in r.listeners[k][ie])B===j&&r.off(m,[ie,B].join("."));else if(V){if(r.listeners[k][V]){for(var j in r.listeners[k][V])r.off(m,[V,j].join("."));delete r.listeners[k][V]}}else{for(var ie in r.listeners[k])r.off(m,ie);delete r.listeners[k],delete r.handlerMap[k]}},r.extend(r.Element,{on:function(m,x,P,k){return r.on(this.node,m,x,P,k),this},off:function(m,x){return r.off(this.node,m,x),this},fire:function(m,x){return m instanceof O.Event?this.node.dispatchEvent(m):this.node.dispatchEvent(m=new r.CustomEvent(m,{detail:x,cancelable:!0})),this._event=m,this},event:function(){return this._event}}),r.Defs=r.invent({create:"defs",inherit:r.Container}),r.G=r.invent({create:"g",inherit:r.Container,extend:{x:function(m){return m==null?this.transform("x"):this.transform({x:m-this.x()},!0)}},construct:{group:function(){return this.put(new r.G)}}}),r.Doc=r.invent({create:function(m){m&&((m=typeof m=="string"?o.getElementById(m):m).nodeName=="svg"?this.constructor.call(this,m):(this.constructor.call(this,r.create("svg")),m.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:r.Container,extend:{namespace:function(){return this.attr({xmlns:r.ns,version:"1.1"}).attr("xmlns:xlink",r.xlink,r.xmlns).attr("xmlns:svgjs",r.svgjs,r.xmlns)},defs:function(){var m;return this._defs||((m=this.node.getElementsByTagName("defs")[0])?this._defs=r.adopt(m):this._defs=new r.Defs,this.node.appendChild(this._defs.node)),this._defs},parent:function(){return this.node.parentNode&&this.node.parentNode.nodeName!="#document"?this.node.parentNode:null},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,r.parser.draw&&!r.parser.draw.parentNode&&this.node.appendChild(r.parser.draw),this},clone:function(m){this.writeDataToDom();var x=this.node,P=F(x.cloneNode(!0));return m?(m.node||m).appendChild(P.node):x.parentNode.insertBefore(P.node,x.nextSibling),P}}}),r.extend(r.Element,{}),r.Gradient=r.invent({create:function(m){this.constructor.call(this,r.create(m+"Gradient")),this.type=m},inherit:r.Container,extend:{at:function(m,x,P){return this.put(new r.Stop).update(m,x,P)},update:function(m){return this.clear(),typeof m=="function"&&m.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(m,x,P){return m=="transform"&&(m="gradientTransform"),r.Container.prototype.attr.call(this,m,x,P)}},construct:{gradient:function(m,x){return this.defs().gradient(m,x)}}}),r.extend(r.Gradient,r.FX,{from:function(m,x){return(this._target||this).type=="radial"?this.attr({fx:new r.Number(m),fy:new r.Number(x)}):this.attr({x1:new r.Number(m),y1:new r.Number(x)})},to:function(m,x){return(this._target||this).type=="radial"?this.attr({cx:new r.Number(m),cy:new r.Number(x)}):this.attr({x2:new r.Number(m),y2:new r.Number(x)})}}),r.extend(r.Defs,{gradient:function(m,x){return this.put(new r.Gradient(m)).update(x)}}),r.Stop=r.invent({create:"stop",inherit:r.Element,extend:{update:function(m){return(typeof m=="number"||m instanceof r.Number)&&(m={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),m.opacity!=null&&this.attr("stop-opacity",m.opacity),m.color!=null&&this.attr("stop-color",m.color),m.offset!=null&&this.attr("offset",new r.Number(m.offset)),this}}}),r.Pattern=r.invent({create:"pattern",inherit:r.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(m){return this.clear(),typeof m=="function"&&m.call(this,this),this},toString:function(){return this.fill()},attr:function(m,x,P){return m=="transform"&&(m="patternTransform"),r.Container.prototype.attr.call(this,m,x,P)}},construct:{pattern:function(m,x,P){return this.defs().pattern(m,x,P)}}}),r.extend(r.Defs,{pattern:function(m,x,P){return this.put(new r.Pattern).update(P).attr({x:0,y:0,width:m,height:x,patternUnits:"userSpaceOnUse"})}}),r.Shape=r.invent({create:function(m){this.constructor.call(this,m)},inherit:r.Element}),r.Symbol=r.invent({create:"symbol",inherit:r.Container,construct:{symbol:function(){return this.put(new r.Symbol)}}}),r.Use=r.invent({create:"use",inherit:r.Shape,extend:{element:function(m,x){return this.attr("href",(x||"")+"#"+m,r.xlink)}},construct:{use:function(m,x){return this.put(new r.Use).element(m,x)}}}),r.Rect=r.invent({create:"rect",inherit:r.Shape,construct:{rect:function(m,x){return this.put(new r.Rect).size(m,x)}}}),r.Circle=r.invent({create:"circle",inherit:r.Shape,construct:{circle:function(m){return this.put(new r.Circle).rx(new r.Number(m).divide(2)).move(0,0)}}}),r.extend(r.Circle,r.FX,{rx:function(m){return this.attr("r",m)},ry:function(m){return this.rx(m)}}),r.Ellipse=r.invent({create:"ellipse",inherit:r.Shape,construct:{ellipse:function(m,x){return this.put(new r.Ellipse).size(m,x).move(0,0)}}}),r.extend(r.Ellipse,r.Rect,r.FX,{rx:function(m){return this.attr("rx",m)},ry:function(m){return this.attr("ry",m)}}),r.extend(r.Circle,r.Ellipse,{x:function(m){return m==null?this.cx()-this.rx():this.cx(m+this.rx())},y:function(m){return m==null?this.cy()-this.ry():this.cy(m+this.ry())},cx:function(m){return m==null?this.attr("cx"):this.attr("cx",m)},cy:function(m){return m==null?this.attr("cy"):this.attr("cy",m)},width:function(m){return m==null?2*this.rx():this.rx(new r.Number(m).divide(2))},height:function(m){return m==null?2*this.ry():this.ry(new r.Number(m).divide(2))},size:function(m,x){var P=w(this,m,x);return this.rx(new r.Number(P.width).divide(2)).ry(new r.Number(P.height).divide(2))}}),r.Line=r.invent({create:"line",inherit:r.Shape,extend:{array:function(){return new r.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(m,x,P,k){return m==null?this.array():(m=x!==void 0?{x1:m,y1:x,x2:P,y2:k}:new r.PointArray(m).toLine(),this.attr(m))},move:function(m,x){return this.attr(this.array().move(m,x).toLine())},size:function(m,x){var P=w(this,m,x);return this.attr(this.array().size(P.width,P.height).toLine())}},construct:{line:function(m,x,P,k){return r.Line.prototype.plot.apply(this.put(new r.Line),m!=null?[m,x,P,k]:[0,0,0,0])}}}),r.Polyline=r.invent({create:"polyline",inherit:r.Shape,construct:{polyline:function(m){return this.put(new r.Polyline).plot(m||new r.PointArray)}}}),r.Polygon=r.invent({create:"polygon",inherit:r.Shape,construct:{polygon:function(m){return this.put(new r.Polygon).plot(m||new r.PointArray)}}}),r.extend(r.Polyline,r.Polygon,{array:function(){return this._array||(this._array=new r.PointArray(this.attr("points")))},plot:function(m){return m==null?this.array():this.clear().attr("points",typeof m=="string"?m:this._array=new r.PointArray(m))},clear:function(){return delete this._array,this},move:function(m,x){return this.attr("points",this.array().move(m,x))},size:function(m,x){var P=w(this,m,x);return this.attr("points",this.array().size(P.width,P.height))}}),r.extend(r.Line,r.Polyline,r.Polygon,{morphArray:r.PointArray,x:function(m){return m==null?this.bbox().x:this.move(m,this.bbox().y)},y:function(m){return m==null?this.bbox().y:this.move(this.bbox().x,m)},width:function(m){var x=this.bbox();return m==null?x.width:this.size(m,x.height)},height:function(m){var x=this.bbox();return m==null?x.height:this.size(x.width,m)}}),r.Path=r.invent({create:"path",inherit:r.Shape,extend:{morphArray:r.PathArray,array:function(){return this._array||(this._array=new r.PathArray(this.attr("d")))},plot:function(m){return m==null?this.array():this.clear().attr("d",typeof m=="string"?m:this._array=new r.PathArray(m))},clear:function(){return delete this._array,this}},construct:{path:function(m){return this.put(new r.Path).plot(m||new r.PathArray)}}}),r.Image=r.invent({create:"image",inherit:r.Shape,extend:{load:function(m){if(!m)return this;var x=this,P=new O.Image;return r.on(P,"load",function(){r.off(P);var k=x.parent(r.Pattern);k!==null&&(x.width()==0&&x.height()==0&&x.size(P.width,P.height),k&&k.width()==0&&k.height()==0&&k.size(x.width(),x.height()),typeof x._loaded=="function"&&x._loaded.call(x,{width:P.width,height:P.height,ratio:P.width/P.height,url:m}))}),r.on(P,"error",function(k){r.off(P),typeof x._error=="function"&&x._error.call(x,k)}),this.attr("href",P.src=this.src=m,r.xlink)},loaded:function(m){return this._loaded=m,this},error:function(m){return this._error=m,this}},construct:{image:function(m,x,P){return this.put(new r.Image).load(m).size(x||0,P||x||0)}}}),r.Text=r.invent({create:function(){this.constructor.call(this,r.create("text")),this.dom.leading=new r.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",r.defaults.attrs["font-family"])},inherit:r.Shape,extend:{x:function(m){return m==null?this.attr("x"):this.attr("x",m)},text:function(m){if(m===void 0){m="";for(var x=this.node.childNodes,P=0,k=x.length;P<k;++P)P!=0&&x[P].nodeType!=3&&r.adopt(x[P]).dom.newLined==1&&(m+=`
`),m+=x[P].textContent;return m}if(this.clear().build(!0),typeof m=="function")m.call(this,this);else{P=0;for(var V=(m=m.split(`
`)).length;P<V;P++)this.tspan(m[P]).newLine()}return this.build(!1).rebuild()},size:function(m){return this.attr("font-size",m).rebuild()},leading:function(m){return m==null?this.dom.leading:(this.dom.leading=new r.Number(m),this.rebuild())},lines:function(){var m=(this.textPath&&this.textPath()||this).node,x=r.utils.map(r.utils.filterSVGElements(m.childNodes),function(P){return r.adopt(P)});return new r.Set(x)},rebuild:function(m){if(typeof m=="boolean"&&(this._rebuild=m),this._rebuild){var x=this,P=0,k=this.dom.leading*new r.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(x.textPath()||this.attr("x",x.attr("x")),this.text()==`
`?P+=k:(this.attr("dy",k+P),P=0))}),this.fire("rebuild")}return this},build:function(m){return this._build=!!m,this},setData:function(m){return this.dom=m,this.dom.leading=new r.Number(m.leading||1.3),this}},construct:{text:function(m){return this.put(new r.Text).text(m)},plain:function(m){return this.put(new r.Text).plain(m)}}}),r.Tspan=r.invent({create:"tspan",inherit:r.Shape,extend:{text:function(m){return m==null?this.node.textContent+(this.dom.newLined?`
`:""):(typeof m=="function"?m.call(this,this):this.plain(m),this)},dx:function(m){return this.attr("dx",m)},dy:function(m){return this.attr("dy",m)},newLine:function(){var m=this.parent(r.Text);return this.dom.newLined=!0,this.dy(m.dom.leading*m.attr("font-size")).attr("x",m.x())}}}),r.extend(r.Text,r.Tspan,{plain:function(m){return this._build===!1&&this.clear(),this.node.appendChild(o.createTextNode(m)),this},tspan:function(m){var x=(this.textPath&&this.textPath()||this).node,P=new r.Tspan;return this._build===!1&&this.clear(),x.appendChild(P.node),P.text(m)},clear:function(){for(var m=(this.textPath&&this.textPath()||this).node;m.hasChildNodes();)m.removeChild(m.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),r.TextPath=r.invent({create:"textPath",inherit:r.Parent,parent:r.Text,construct:{morphArray:r.PathArray,array:function(){var m=this.track();return m?m.array():null},plot:function(m){var x=this.track(),P=null;return x&&(P=x.plot(m)),m==null?P:this},track:function(){var m=this.textPath();if(m)return m.reference("href")},textPath:function(){if(this.node.firstChild&&this.node.firstChild.nodeName=="textPath")return r.adopt(this.node.firstChild)}}}),r.Nested=r.invent({create:function(){this.constructor.call(this,r.create("svg")),this.style("overflow","visible")},inherit:r.Container,construct:{nested:function(){return this.put(new r.Nested)}}});var p={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(m,x){return x=="color"?m:m+"-"+x}};function f(m,x,P,k){return P+k.replace(r.regex.dots," .")}function v(m){return m.toLowerCase().replace(/-(.)/g,function(x,P){return P.toUpperCase()})}function y(m){return m.charAt(0).toUpperCase()+m.slice(1)}function b(m){var x=m.toString(16);return x.length==1?"0"+x:x}function w(m,x,P){if(x==null||P==null){var k=m.bbox();x==null?x=k.width/k.height*P:P==null&&(P=k.height/k.width*x)}return{width:x,height:P}}function R(m,x,P){return{x:x*m.a+P*m.c+0,y:x*m.b+P*m.d+0}}function T(m){return{a:m[0],b:m[1],c:m[2],d:m[3],e:m[4],f:m[5]}}function F(m){for(var x=m.childNodes.length-1;x>=0;x--)m.childNodes[x]instanceof O.SVGElement&&F(m.childNodes[x]);return r.adopt(m).id(r.eid(m.nodeName))}function I(m){return Math.abs(m)>1e-37?m:0}["fill","stroke"].forEach(function(m){var x={};x[m]=function(P){if(P===void 0)return this;if(typeof P=="string"||r.Color.isRgb(P)||P&&typeof P.fill=="function")this.attr(m,P);else for(var k=p[m].length-1;k>=0;k--)P[p[m][k]]!=null&&this.attr(p.prefix(m,p[m][k]),P[p[m][k]]);return this},r.extend(r.Element,r.FX,x)}),r.extend(r.Element,r.FX,{translate:function(m,x){return this.transform({x:m,y:x})},matrix:function(m){return this.attr("transform",new r.Matrix(arguments.length==6?[].slice.call(arguments):m))},opacity:function(m){return this.attr("opacity",m)},dx:function(m){return this.x(new r.Number(m).plus(this instanceof r.FX?0:this.x()),!0)},dy:function(m){return this.y(new r.Number(m).plus(this instanceof r.FX?0:this.y()),!0)}}),r.extend(r.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(m){return this.node.getPointAtLength(m)}}),r.Set=r.invent({create:function(m){Array.isArray(m)?this.members=m:this.clear()},extend:{add:function(){for(var m=[].slice.call(arguments),x=0,P=m.length;x<P;x++)this.members.push(m[x]);return this},remove:function(m){var x=this.index(m);return x>-1&&this.members.splice(x,1),this},each:function(m){for(var x=0,P=this.members.length;x<P;x++)m.apply(this.members[x],[x,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(m){return this.index(m)>=0},index:function(m){return this.members.indexOf(m)},get:function(m){return this.members[m]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members}},construct:{set:function(m){return new r.Set(m)}}}),r.FX.Set=r.invent({create:function(m){this.set=m}}),r.Set.inherit=function(){var m=[];for(var x in r.Shape.prototype)typeof r.Shape.prototype[x]=="function"&&typeof r.Set.prototype[x]!="function"&&m.push(x);for(var x in m.forEach(function(k){r.Set.prototype[k]=function(){for(var V=0,B=this.members.length;V<B;V++)this.members[V]&&typeof this.members[V][k]=="function"&&this.members[V][k].apply(this.members[V],arguments);return k=="animate"?this.fx||(this.fx=new r.FX.Set(this)):this}}),m=[],r.FX.prototype)typeof r.FX.prototype[x]=="function"&&typeof r.FX.Set.prototype[x]!="function"&&m.push(x);m.forEach(function(P){r.FX.Set.prototype[P]=function(){for(var k=0,V=this.set.members.length;k<V;k++)this.set.members[k].fx[P].apply(this.set.members[k].fx,arguments);return this}})},r.extend(r.Element,{}),r.extend(r.Element,{remember:function(m,x){if(n(arguments[0])==="object")for(var P in m)this.remember(P,m[P]);else{if(arguments.length==1)return this.memory()[m];this.memory()[m]=x}return this},forget:function(){if(arguments.length==0)this._memory={};else for(var m=arguments.length-1;m>=0;m--)delete this.memory()[arguments[m]];return this},memory:function(){return this._memory||(this._memory={})}}),r.get=function(m){var x=o.getElementById(function(P){var k=(P||"").toString().match(r.regex.reference);if(k)return k[1]}(m)||m);return r.adopt(x)},r.select=function(m,x){return new r.Set(r.utils.map((x||o).querySelectorAll(m),function(P){return r.adopt(P)}))},r.extend(r.Parent,{select:function(m){return r.select(m,this.node)}});var G="abcdef".split("");if(typeof O.CustomEvent!="function"){var H=function(m,x){x=x||{bubbles:!1,cancelable:!1,detail:void 0};var P=o.createEvent("CustomEvent");return P.initCustomEvent(m,x.bubbles,x.cancelable,x.detail),P};H.prototype=O.Event.prototype,r.CustomEvent=H}else r.CustomEvent=O.CustomEvent;return r},n(t)==="object"?e.exports=ks.document?Zs(ks,ks.document):function(O){return Zs(O,O.document)}:ks.SVG=Zs(ks,ks.document),function(){SVG.Filter=SVG.invent({create:"filter",inherit:SVG.Parent,extend:{source:"SourceGraphic",sourceAlpha:"SourceAlpha",background:"BackgroundImage",backgroundAlpha:"BackgroundAlpha",fill:"FillPaint",stroke:"StrokePaint",autoSetIn:!0,put:function(c,p){return this.add(c,p),!c.attr("in")&&this.autoSetIn&&c.attr("in",this.source),c.attr("result")||c.attr("result",c),c},blend:function(c,p,f){return this.put(new SVG.BlendEffect(c,p,f))},colorMatrix:function(c,p){return this.put(new SVG.ColorMatrixEffect(c,p))},convolveMatrix:function(c){return this.put(new SVG.ConvolveMatrixEffect(c))},componentTransfer:function(c){return this.put(new SVG.ComponentTransferEffect(c))},composite:function(c,p,f){return this.put(new SVG.CompositeEffect(c,p,f))},flood:function(c,p){return this.put(new SVG.FloodEffect(c,p))},offset:function(c,p){return this.put(new SVG.OffsetEffect(c,p))},image:function(c){return this.put(new SVG.ImageEffect(c))},merge:function(){var c=[void 0];for(var p in arguments)c.push(arguments[p]);return this.put(new(SVG.MergeEffect.bind.apply(SVG.MergeEffect,c)))},gaussianBlur:function(c,p){return this.put(new SVG.GaussianBlurEffect(c,p))},morphology:function(c,p){return this.put(new SVG.MorphologyEffect(c,p))},diffuseLighting:function(c,p,f){return this.put(new SVG.DiffuseLightingEffect(c,p,f))},displacementMap:function(c,p,f,v,y){return this.put(new SVG.DisplacementMapEffect(c,p,f,v,y))},specularLighting:function(c,p,f,v){return this.put(new SVG.SpecularLightingEffect(c,p,f,v))},tile:function(){return this.put(new SVG.TileEffect)},turbulence:function(c,p,f,v,y){return this.put(new SVG.TurbulenceEffect(c,p,f,v,y))},toString:function(){return"url(#"+this.attr("id")+")"}}}),SVG.extend(SVG.Defs,{filter:function(c){var p=this.put(new SVG.Filter);return typeof c=="function"&&c.call(p,p),p}}),SVG.extend(SVG.Container,{filter:function(c){return this.defs().filter(c)}}),SVG.extend(SVG.Element,SVG.G,SVG.Nested,{filter:function(c){return this.filterer=c instanceof SVG.Element?c:this.doc().filter(c),this.doc()&&this.filterer.doc()!==this.doc()&&this.doc().defs().add(this.filterer),this.attr("filter",this.filterer),this.filterer},unfilter:function(c){return this.filterer&&c===!0&&this.filterer.remove(),delete this.filterer,this.attr("filter",null)}}),SVG.Effect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(c){return c==null?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",c)},result:function(c){return c==null?this.attr("result"):this.attr("result",c)},toString:function(){return this.result()}}}),SVG.ParentEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Parent,extend:{in:function(c){return c==null?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",c)},result:function(c){return c==null?this.attr("result"):this.attr("result",c)},toString:function(){return this.result()}}});var O={blend:function(c,p){return this.parent()&&this.parent().blend(this,c,p)},colorMatrix:function(c,p){return this.parent()&&this.parent().colorMatrix(c,p).in(this)},convolveMatrix:function(c){return this.parent()&&this.parent().convolveMatrix(c).in(this)},componentTransfer:function(c){return this.parent()&&this.parent().componentTransfer(c).in(this)},composite:function(c,p){return this.parent()&&this.parent().composite(this,c,p)},flood:function(c,p){return this.parent()&&this.parent().flood(c,p)},offset:function(c,p){return this.parent()&&this.parent().offset(c,p).in(this)},image:function(c){return this.parent()&&this.parent().image(c)},merge:function(){return this.parent()&&this.parent().merge.apply(this.parent(),[this].concat(arguments))},gaussianBlur:function(c,p){return this.parent()&&this.parent().gaussianBlur(c,p).in(this)},morphology:function(c,p){return this.parent()&&this.parent().morphology(c,p).in(this)},diffuseLighting:function(c,p,f){return this.parent()&&this.parent().diffuseLighting(c,p,f).in(this)},displacementMap:function(c,p,f,v){return this.parent()&&this.parent().displacementMap(this,c,p,f,v)},specularLighting:function(c,p,f,v){return this.parent()&&this.parent().specularLighting(c,p,f,v).in(this)},tile:function(){return this.parent()&&this.parent().tile().in(this)},turbulence:function(c,p,f,v,y){return this.parent()&&this.parent().turbulence(c,p,f,v,y).in(this)}};SVG.extend(SVG.Effect,O),SVG.extend(SVG.ParentEffect,O),SVG.ChildEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(c){this.attr("in",c)}}});var o={blend:function(c,p,f){this.attr({in:c,in2:p,mode:f||"normal"})},colorMatrix:function(c,p){c=="matrix"&&(p=d(p)),this.attr({type:c,values:p===void 0?null:p})},convolveMatrix:function(c){c=d(c),this.attr({order:Math.sqrt(c.split(" ").length),kernelMatrix:c})},composite:function(c,p,f){this.attr({in:c,in2:p,operator:f})},flood:function(c,p){this.attr("flood-color",c),p!=null&&this.attr("flood-opacity",p)},offset:function(c,p){this.attr({dx:c,dy:p})},image:function(c){this.attr("href",c,SVG.xlink)},displacementMap:function(c,p,f,v,y){this.attr({in:c,in2:p,scale:f,xChannelSelector:v,yChannelSelector:y})},gaussianBlur:function(c,p){c!=null||p!=null?this.attr("stdDeviation",function(f){if(!Array.isArray(f))return f;for(var v=0,y=f.length,b=[];v<y;v++)b.push(f[v]);return b.join(" ")}(Array.prototype.slice.call(arguments))):this.attr("stdDeviation","0 0")},morphology:function(c,p){this.attr({operator:c,radius:p})},tile:function(){},turbulence:function(c,p,f,v,y){this.attr({numOctaves:p,seed:f,stitchTiles:v,baseFrequency:c,type:y})}},r={merge:function(){var c;if(arguments[0]instanceof SVG.Set){var p=this;arguments[0].each(function(v){this instanceof SVG.MergeNode?p.put(this):(this instanceof SVG.Effect||this instanceof SVG.ParentEffect)&&p.put(new SVG.MergeNode(this))})}else{c=Array.isArray(arguments[0])?arguments[0]:arguments;for(var f=0;f<c.length;f++)c[f]instanceof SVG.MergeNode?this.put(c[f]):this.put(new SVG.MergeNode(c[f]))}},componentTransfer:function(c){if(this.rgb=new SVG.Set,["r","g","b","a"].forEach(function(f){this[f]=new SVG["Func"+f.toUpperCase()]("identity"),this.rgb.add(this[f]),this.node.appendChild(this[f].node)}.bind(this)),c)for(var p in c.rgb&&(["r","g","b"].forEach(function(f){this[f].attr(c.rgb)}.bind(this)),delete c.rgb),c)this[p].attr(c[p])},diffuseLighting:function(c,p,f){this.attr({surfaceScale:c,diffuseConstant:p,kernelUnitLength:f})},specularLighting:function(c,p,f,v){this.attr({surfaceScale:c,diffuseConstant:p,specularExponent:f,kernelUnitLength:v})}},a={distantLight:function(c,p){this.attr({azimuth:c,elevation:p})},pointLight:function(c,p,f){this.attr({x:c,y:p,z:f})},spotLight:function(c,p,f,v,y,b){this.attr({x:c,y:p,z:f,pointsAtX:v,pointsAtY:y,pointsAtZ:b})},mergeNode:function(c){this.attr("in",c)}};function d(c){return Array.isArray(c)&&(c=new SVG.Array(c)),c.toString().replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}function h(){var c=function(){};for(var p in typeof arguments[arguments.length-1]=="function"&&(c=arguments[arguments.length-1],Array.prototype.splice.call(arguments,arguments.length-1,1)),arguments)for(var f in arguments[p])c(arguments[p][f],f,arguments[p])}["r","g","b","a"].forEach(function(c){a["Func"+c.toUpperCase()]=function(p){switch(this.attr("type",p),p){case"table":this.attr("tableValues",arguments[1]);break;case"linear":this.attr("slope",arguments[1]),this.attr("intercept",arguments[2]);break;case"gamma":this.attr("amplitude",arguments[1]),this.attr("exponent",arguments[2]),this.attr("offset",arguments[2])}}}),h(o,function(c,p){var f=p.charAt(0).toUpperCase()+p.slice(1);SVG[f+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+f)),c.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.Effect,extend:{}})}),h(r,function(c,p){var f=p.charAt(0).toUpperCase()+p.slice(1);SVG[f+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+f)),c.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.ParentEffect,extend:{}})}),h(a,function(c,p){var f=p.charAt(0).toUpperCase()+p.slice(1);SVG[f]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+f)),c.apply(this,arguments)},inherit:SVG.ChildEffect,extend:{}})}),SVG.extend(SVG.MergeEffect,{in:function(c){return c instanceof SVG.MergeNode?this.add(c,0):this.add(new SVG.MergeNode(c),0),this}}),SVG.extend(SVG.CompositeEffect,SVG.BlendEffect,SVG.DisplacementMapEffect,{in2:function(c){return c==null?this.parent()&&this.parent().select('[result="'+this.attr("in2")+'"]').get(0)||this.attr("in2"):this.attr("in2",c)}}),SVG.filter={sepiatone:[.343,.669,.119,0,0,.249,.626,.13,0,0,.172,.334,.111,0,0,0,0,0,1,0]}}.call(void 0),function(){function O(h,c,p,f,v,y,b){for(var w=h.slice(c,p||b),R=f.slice(v,y||b),T=0,F={pos:[0,0],start:[0,0]},I={pos:[0,0],start:[0,0]};w[T]=o.call(F,w[T]),R[T]=o.call(I,R[T]),w[T][0]!=R[T][0]||w[T][0]=="M"||w[T][0]=="A"&&(w[T][4]!=R[T][4]||w[T][5]!=R[T][5])?(Array.prototype.splice.apply(w,[T,1].concat(a.call(F,w[T]))),Array.prototype.splice.apply(R,[T,1].concat(a.call(I,R[T])))):(w[T]=r.call(F,w[T]),R[T]=r.call(I,R[T])),!(++T==w.length&&T==R.length);)T==w.length&&w.push(["C",F.pos[0],F.pos[1],F.pos[0],F.pos[1],F.pos[0],F.pos[1]]),T==R.length&&R.push(["C",I.pos[0],I.pos[1],I.pos[0],I.pos[1],I.pos[0],I.pos[1]]);return{start:w,dest:R}}function o(h){switch(h[0]){case"z":case"Z":h[0]="L",h[1]=this.start[0],h[2]=this.start[1];break;case"H":h[0]="L",h[2]=this.pos[1];break;case"V":h[0]="L",h[2]=h[1],h[1]=this.pos[0];break;case"T":h[0]="Q",h[3]=h[1],h[4]=h[2],h[1]=this.reflection[1],h[2]=this.reflection[0];break;case"S":h[0]="C",h[6]=h[4],h[5]=h[3],h[4]=h[2],h[3]=h[1],h[2]=this.reflection[1],h[1]=this.reflection[0]}return h}function r(h){var c=h.length;return this.pos=[h[c-2],h[c-1]],"SCQT".indexOf(h[0])!=-1&&(this.reflection=[2*this.pos[0]-h[c-4],2*this.pos[1]-h[c-3]]),h}function a(h){var c=[h];switch(h[0]){case"M":return this.pos=this.start=[h[1],h[2]],c;case"L":h[5]=h[3]=h[1],h[6]=h[4]=h[2],h[1]=this.pos[0],h[2]=this.pos[1];break;case"Q":h[6]=h[4],h[5]=h[3],h[4]=1*h[4]/3+2*h[2]/3,h[3]=1*h[3]/3+2*h[1]/3,h[2]=1*this.pos[1]/3+2*h[2]/3,h[1]=1*this.pos[0]/3+2*h[1]/3;break;case"A":c=function(p,f){var v,y,b,w,R,T,F,I,G,H,m,x,P,k,V,B,j,K,ie,he,ae,Le,Be,je,it,dt,rt=Math.abs(f[1]),Ot=Math.abs(f[2]),Ut=f[3]%360,rs=f[4],Li=f[5],Ns=f[6],Gs=f[7],vi=new SVG.Point(p),Ci=new SVG.Point(Ns,Gs),lc=[];if(rt===0||Ot===0||vi.x===Ci.x&&vi.y===Ci.y)return[["C",vi.x,vi.y,Ci.x,Ci.y,Ci.x,Ci.y]];for(v=new SVG.Point((vi.x-Ci.x)/2,(vi.y-Ci.y)/2).transform(new SVG.Matrix().rotate(Ut)),(y=v.x*v.x/(rt*rt)+v.y*v.y/(Ot*Ot))>1&&(rt*=y=Math.sqrt(y),Ot*=y),b=new SVG.Matrix().rotate(Ut).scale(1/rt,1/Ot).rotate(-Ut),vi=vi.transform(b),Ci=Ci.transform(b),w=[Ci.x-vi.x,Ci.y-vi.y],T=w[0]*w[0]+w[1]*w[1],R=Math.sqrt(T),w[0]/=R,w[1]/=R,F=T<4?Math.sqrt(1-T/4):0,rs===Li&&(F*=-1),I=new SVG.Point((Ci.x+vi.x)/2+F*-w[1],(Ci.y+vi.y)/2+F*w[0]),G=new SVG.Point(vi.x-I.x,vi.y-I.y),H=new SVG.Point(Ci.x-I.x,Ci.y-I.y),m=Math.acos(G.x/Math.sqrt(G.x*G.x+G.y*G.y)),G.y<0&&(m*=-1),x=Math.acos(H.x/Math.sqrt(H.x*H.x+H.y*H.y)),H.y<0&&(x*=-1),Li&&m>x&&(x+=2*Math.PI),!Li&&m<x&&(x-=2*Math.PI),k=Math.ceil(2*Math.abs(m-x)/Math.PI),B=[],j=m,P=(x-m)/k,V=4*Math.tan(P/4)/3,ae=0;ae<=k;ae++)ie=Math.cos(j),K=Math.sin(j),he=new SVG.Point(I.x+ie,I.y+K),B[ae]=[new SVG.Point(he.x+V*K,he.y-V*ie),he,new SVG.Point(he.x-V*K,he.y+V*ie)],j+=P;for(B[0][0]=B[0][1].clone(),B[B.length-1][2]=B[B.length-1][1].clone(),b=new SVG.Matrix().rotate(Ut).scale(rt,Ot).rotate(-Ut),ae=0,Le=B.length;ae<Le;ae++)B[ae][0]=B[ae][0].transform(b),B[ae][1]=B[ae][1].transform(b),B[ae][2]=B[ae][2].transform(b);for(ae=1,Le=B.length;ae<Le;ae++)Be=(he=B[ae-1][2]).x,je=he.y,it=(he=B[ae][0]).x,dt=he.y,Ns=(he=B[ae][1]).x,Gs=he.y,lc.push(["C",Be,je,it,dt,Ns,Gs]);return lc}(this.pos,h),h=c[0]}return h[0]="C",this.pos=[h[5],h[6]],this.reflection=[2*h[5]-h[3],2*h[6]-h[4]],c}function d(h,c){if(c===!1)return!1;for(var p=c,f=h.length;p<f;++p)if(h[p][0]=="M")return p;return!1}SVG.extend(SVG.PathArray,{morph:function(h){for(var c=this.value,p=this.parse(h),f=0,v=0,y=!1,b=!1;f!==!1||v!==!1;){var w;y=d(c,f!==!1&&f+1),b=d(p,v!==!1&&v+1),f===!1&&(f=(w=new SVG.PathArray(R.start).bbox()).height==0||w.width==0?c.push(c[0])-1:c.push(["M",w.x+w.width/2,w.y+w.height/2])-1),v===!1&&(v=(w=new SVG.PathArray(R.dest).bbox()).height==0||w.width==0?p.push(p[0])-1:p.push(["M",w.x+w.width/2,w.y+w.height/2])-1);var R=O(c,f,y,p,v,b);c=c.slice(0,f).concat(R.start,y===!1?[]:c.slice(y)),p=p.slice(0,v).concat(R.dest,b===!1?[]:p.slice(b)),f=y!==!1&&f+R.start.length,v=b!==!1&&v+R.dest.length}return this.value=c,this.destination=new SVG.PathArray,this.destination.value=p,this}})}(),function(){function O(o){o.remember("_draggable",this),this.el=o}O.prototype.init=function(o,r){var a=this;this.constraint=o,this.value=r,this.el.on("mousedown.drag",function(d){a.start(d)}),this.el.on("touchstart.drag",function(d){a.start(d)})},O.prototype.transformPoint=function(o,r){var a=(o=o||window.event).changedTouches&&o.changedTouches[0]||o;return this.p.x=a.clientX-(r||0),this.p.y=a.clientY,this.p.matrixTransform(this.m)},O.prototype.getBBox=function(){var o=this.el.bbox();return this.el instanceof SVG.Nested&&(o=this.el.rbox()),(this.el instanceof SVG.G||this.el instanceof SVG.Use||this.el instanceof SVG.Nested)&&(o.x=this.el.x(),o.y=this.el.y()),o},O.prototype.start=function(o){if(o.type!="click"&&o.type!="mousedown"&&o.type!="mousemove"||(o.which||o.buttons)==1){var r=this;if(this.el.fire("beforedrag",{event:o,handler:this}),!this.el.event().defaultPrevented){o.preventDefault(),o.stopPropagation(),this.parent=this.parent||this.el.parent(SVG.Nested)||this.el.parent(SVG.Doc),this.p=this.parent.node.createSVGPoint(),this.m=this.el.node.getScreenCTM().inverse();var a,d=this.getBBox();if(this.el instanceof SVG.Text)switch(a=this.el.node.getComputedTextLength(),this.el.attr("text-anchor")){case"middle":a/=2;break;case"start":a=0}this.startPoints={point:this.transformPoint(o,a),box:d,transform:this.el.transform()},SVG.on(window,"mousemove.drag",function(h){r.drag(h)}),SVG.on(window,"touchmove.drag",function(h){r.drag(h)}),SVG.on(window,"mouseup.drag",function(h){r.end(h)}),SVG.on(window,"touchend.drag",function(h){r.end(h)}),this.el.fire("dragstart",{event:o,p:this.startPoints.point,m:this.m,handler:this})}}},O.prototype.drag=function(o){var r=this.getBBox(),a=this.transformPoint(o),d=this.startPoints.box.x+a.x-this.startPoints.point.x,h=this.startPoints.box.y+a.y-this.startPoints.point.y,c=this.constraint,p=a.x-this.startPoints.point.x,f=a.y-this.startPoints.point.y;if(this.el.fire("dragmove",{event:o,p:a,m:this.m,handler:this}),this.el.event().defaultPrevented)return a;if(typeof c=="function"){var v=c.call(this.el,d,h,this.m);typeof v=="boolean"&&(v={x:v,y:v}),v.x===!0?this.el.x(d):v.x!==!1&&this.el.x(v.x),v.y===!0?this.el.y(h):v.y!==!1&&this.el.y(v.y)}else typeof c=="object"&&(c.minX!=null&&d<c.minX?p=(d=c.minX)-this.startPoints.box.x:c.maxX!=null&&d>c.maxX-r.width&&(p=(d=c.maxX-r.width)-this.startPoints.box.x),c.minY!=null&&h<c.minY?f=(h=c.minY)-this.startPoints.box.y:c.maxY!=null&&h>c.maxY-r.height&&(f=(h=c.maxY-r.height)-this.startPoints.box.y),c.snapToGrid!=null&&(d-=d%c.snapToGrid,h-=h%c.snapToGrid,p-=p%c.snapToGrid,f-=f%c.snapToGrid),this.el instanceof SVG.G?this.el.matrix(this.startPoints.transform).transform({x:p,y:f},!0):this.el.move(d,h));return a},O.prototype.end=function(o){var r=this.drag(o);this.el.fire("dragend",{event:o,p:r,m:this.m,handler:this}),SVG.off(window,"mousemove.drag"),SVG.off(window,"touchmove.drag"),SVG.off(window,"mouseup.drag"),SVG.off(window,"touchend.drag")},SVG.extend(SVG.Element,{draggable:function(o,r){typeof o!="function"&&typeof o!="object"||(r=o,o=!0);var a=this.remember("_draggable")||new O(this);return(o=o===void 0||o)?a.init(r||{},o):(this.off("mousedown.drag"),this.off("touchstart.drag")),this}})}.call(void 0),function(){function O(o){this.el=o,o.remember("_selectHandler",this),this.pointSelection={isSelected:!1},this.rectSelection={isSelected:!1},this.pointsList={lt:[0,0],rt:["width",0],rb:["width","height"],lb:[0,"height"],t:["width",0],r:["width","height"],b:["width","height"],l:[0,"height"]},this.pointCoord=function(r,a,d){var h=typeof r!="string"?r:a[r];return d?h/2:h},this.pointCoords=function(r,a){var d=this.pointsList[r];return{x:this.pointCoord(d[0],a,r==="t"||r==="b"),y:this.pointCoord(d[1],a,r==="r"||r==="l")}}}O.prototype.init=function(o,r){var a=this.el.bbox();this.options={};var d=this.el.selectize.defaults.points;for(var h in this.el.selectize.defaults)this.options[h]=this.el.selectize.defaults[h],r[h]!==void 0&&(this.options[h]=r[h]);var c=["points","pointsExclude"];for(var h in c){var p=this.options[c[h]];typeof p=="string"?p=p.length>0?p.split(/\s*,\s*/i):[]:typeof p=="boolean"&&c[h]==="points"&&(p=p?d:[]),this.options[c[h]]=p}this.options.points=[d,this.options.points].reduce(function(f,v){return f.filter(function(y){return v.indexOf(y)>-1})}),this.options.points=[this.options.points,this.options.pointsExclude].reduce(function(f,v){return f.filter(function(y){return v.indexOf(y)<0})}),this.parent=this.el.parent(),this.nested=this.nested||this.parent.group(),this.nested.matrix(new SVG.Matrix(this.el).translate(a.x,a.y)),this.options.deepSelect&&["line","polyline","polygon"].indexOf(this.el.type)!==-1?this.selectPoints(o):this.selectRect(o),this.observe(),this.cleanup()},O.prototype.selectPoints=function(o){return this.pointSelection.isSelected=o,this.pointSelection.set||(this.pointSelection.set=this.parent.set(),this.drawPoints()),this},O.prototype.getPointArray=function(){var o=this.el.bbox();return this.el.array().valueOf().map(function(r){return[r[0]-o.x,r[1]-o.y]})},O.prototype.drawPoints=function(){for(var o=this,r=this.getPointArray(),a=0,d=r.length;a<d;++a){var h=function(p){return function(f){(f=f||window.event).preventDefault?f.preventDefault():f.returnValue=!1,f.stopPropagation();var v=f.pageX||f.touches[0].pageX,y=f.pageY||f.touches[0].pageY;o.el.fire("point",{x:v,y,i:p,event:f})}}(a),c=this.drawPoint(r[a][0],r[a][1]).addClass(this.options.classPoints).addClass(this.options.classPoints+"_point").on("touchstart",h).on("mousedown",h);this.pointSelection.set.add(c)}},O.prototype.drawPoint=function(o,r){var a=this.options.pointType;switch(a){case"circle":return this.drawCircle(o,r);case"rect":return this.drawRect(o,r);default:if(typeof a=="function")return a.call(this,o,r);throw new Error("Unknown "+a+" point type!")}},O.prototype.drawCircle=function(o,r){return this.nested.circle(this.options.pointSize).center(o,r)},O.prototype.drawRect=function(o,r){return this.nested.rect(this.options.pointSize,this.options.pointSize).center(o,r)},O.prototype.updatePointSelection=function(){var o=this.getPointArray();this.pointSelection.set.each(function(r){this.cx()===o[r][0]&&this.cy()===o[r][1]||this.center(o[r][0],o[r][1])})},O.prototype.updateRectSelection=function(){var o=this,r=this.el.bbox();if(this.rectSelection.set.get(0).attr({width:r.width,height:r.height}),this.options.points.length&&this.options.points.map(function(d,h){var c=o.pointCoords(d,r);o.rectSelection.set.get(h+1).center(c.x,c.y)}),this.options.rotationPoint){var a=this.rectSelection.set.length();this.rectSelection.set.get(a-1).center(r.width/2,20)}},O.prototype.selectRect=function(o){var r=this,a=this.el.bbox();function d(p){return function(f){(f=f||window.event).preventDefault?f.preventDefault():f.returnValue=!1,f.stopPropagation();var v=f.pageX||f.touches[0].pageX,y=f.pageY||f.touches[0].pageY;r.el.fire(p,{x:v,y,event:f})}}if(this.rectSelection.isSelected=o,this.rectSelection.set=this.rectSelection.set||this.parent.set(),this.rectSelection.set.get(0)||this.rectSelection.set.add(this.nested.rect(a.width,a.height).addClass(this.options.classRect)),this.options.points.length&&this.rectSelection.set.length()<2&&(this.options.points.map(function(p,f){var v=r.pointCoords(p,a),y=r.drawPoint(v.x,v.y).attr("class",r.options.classPoints+"_"+p).on("mousedown",d(p)).on("touchstart",d(p));r.rectSelection.set.add(y)}),this.rectSelection.set.each(function(){this.addClass(r.options.classPoints)})),this.options.rotationPoint&&(this.options.points&&!this.rectSelection.set.get(9)||!this.options.points&&!this.rectSelection.set.get(1))){var h=function(p){(p=p||window.event).preventDefault?p.preventDefault():p.returnValue=!1,p.stopPropagation();var f=p.pageX||p.touches[0].pageX,v=p.pageY||p.touches[0].pageY;r.el.fire("rot",{x:f,y:v,event:p})},c=this.drawPoint(a.width/2,20).attr("class",this.options.classPoints+"_rot").on("touchstart",h).on("mousedown",h);this.rectSelection.set.add(c)}},O.prototype.handler=function(){var o=this.el.bbox();this.nested.matrix(new SVG.Matrix(this.el).translate(o.x,o.y)),this.rectSelection.isSelected&&this.updateRectSelection(),this.pointSelection.isSelected&&this.updatePointSelection()},O.prototype.observe=function(){var o=this;if(MutationObserver)if(this.rectSelection.isSelected||this.pointSelection.isSelected)this.observerInst=this.observerInst||new MutationObserver(function(){o.handler()}),this.observerInst.observe(this.el.node,{attributes:!0});else try{this.observerInst.disconnect(),delete this.observerInst}catch{}else this.el.off("DOMAttrModified.select"),(this.rectSelection.isSelected||this.pointSelection.isSelected)&&this.el.on("DOMAttrModified.select",function(){o.handler()})},O.prototype.cleanup=function(){!this.rectSelection.isSelected&&this.rectSelection.set&&(this.rectSelection.set.each(function(){this.remove()}),this.rectSelection.set.clear(),delete this.rectSelection.set),!this.pointSelection.isSelected&&this.pointSelection.set&&(this.pointSelection.set.each(function(){this.remove()}),this.pointSelection.set.clear(),delete this.pointSelection.set),this.pointSelection.isSelected||this.rectSelection.isSelected||(this.nested.remove(),delete this.nested)},SVG.extend(SVG.Element,{selectize:function(o,r){return typeof o=="object"&&(r=o,o=!0),(this.remember("_selectHandler")||new O(this)).init(o===void 0||o,r||{}),this}}),SVG.Element.prototype.selectize.defaults={points:["lt","rt","rb","lb","t","r","b","l"],pointsExclude:[],classRect:"svg_select_boundingRect",classPoints:"svg_select_points",pointSize:7,rotationPoint:!0,deepSelect:!1,pointType:"circle"}}(),function(){(function(){function O(o){o.remember("_resizeHandler",this),this.el=o,this.parameters={},this.lastUpdateCall=null,this.p=o.doc().node.createSVGPoint()}O.prototype.transformPoint=function(o,r,a){return this.p.x=o-(this.offset.x-window.pageXOffset),this.p.y=r-(this.offset.y-window.pageYOffset),this.p.matrixTransform(a||this.m)},O.prototype._extractPosition=function(o){return{x:o.clientX!=null?o.clientX:o.touches[0].clientX,y:o.clientY!=null?o.clientY:o.touches[0].clientY}},O.prototype.init=function(o){var r=this;if(this.stop(),o!=="stop"){for(var a in this.options={},this.el.resize.defaults)this.options[a]=this.el.resize.defaults[a],o[a]!==void 0&&(this.options[a]=o[a]);this.el.on("lt.resize",function(d){r.resize(d||window.event)}),this.el.on("rt.resize",function(d){r.resize(d||window.event)}),this.el.on("rb.resize",function(d){r.resize(d||window.event)}),this.el.on("lb.resize",function(d){r.resize(d||window.event)}),this.el.on("t.resize",function(d){r.resize(d||window.event)}),this.el.on("r.resize",function(d){r.resize(d||window.event)}),this.el.on("b.resize",function(d){r.resize(d||window.event)}),this.el.on("l.resize",function(d){r.resize(d||window.event)}),this.el.on("rot.resize",function(d){r.resize(d||window.event)}),this.el.on("point.resize",function(d){r.resize(d||window.event)}),this.update()}},O.prototype.stop=function(){return this.el.off("lt.resize"),this.el.off("rt.resize"),this.el.off("rb.resize"),this.el.off("lb.resize"),this.el.off("t.resize"),this.el.off("r.resize"),this.el.off("b.resize"),this.el.off("l.resize"),this.el.off("rot.resize"),this.el.off("point.resize"),this},O.prototype.resize=function(o){var r=this;this.m=this.el.node.getScreenCTM().inverse(),this.offset={x:window.pageXOffset,y:window.pageYOffset};var a=this._extractPosition(o.detail.event);if(this.parameters={type:this.el.type,p:this.transformPoint(a.x,a.y),x:o.detail.x,y:o.detail.y,box:this.el.bbox(),rotation:this.el.transform().rotation},this.el.type==="text"&&(this.parameters.fontSize=this.el.attr()["font-size"]),o.detail.i!==void 0){var d=this.el.array().valueOf();this.parameters.i=o.detail.i,this.parameters.pointCoords=[d[o.detail.i][0],d[o.detail.i][1]]}switch(o.type){case"lt":this.calc=function(h,c){var p=this.snapToGrid(h,c);if(this.parameters.box.width-p[0]>0&&this.parameters.box.height-p[1]>0){if(this.parameters.type==="text")return this.el.move(this.parameters.box.x+p[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-p[0]);p=this.checkAspectRatio(p),this.el.move(this.parameters.box.x+p[0],this.parameters.box.y+p[1]).size(this.parameters.box.width-p[0],this.parameters.box.height-p[1])}};break;case"rt":this.calc=function(h,c){var p=this.snapToGrid(h,c,2);if(this.parameters.box.width+p[0]>0&&this.parameters.box.height-p[1]>0){if(this.parameters.type==="text")return this.el.move(this.parameters.box.x-p[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+p[0]);p=this.checkAspectRatio(p,!0),this.el.move(this.parameters.box.x,this.parameters.box.y+p[1]).size(this.parameters.box.width+p[0],this.parameters.box.height-p[1])}};break;case"rb":this.calc=function(h,c){var p=this.snapToGrid(h,c,0);if(this.parameters.box.width+p[0]>0&&this.parameters.box.height+p[1]>0){if(this.parameters.type==="text")return this.el.move(this.parameters.box.x-p[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+p[0]);p=this.checkAspectRatio(p),this.el.move(this.parameters.box.x,this.parameters.box.y).size(this.parameters.box.width+p[0],this.parameters.box.height+p[1])}};break;case"lb":this.calc=function(h,c){var p=this.snapToGrid(h,c,1);if(this.parameters.box.width-p[0]>0&&this.parameters.box.height+p[1]>0){if(this.parameters.type==="text")return this.el.move(this.parameters.box.x+p[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-p[0]);p=this.checkAspectRatio(p,!0),this.el.move(this.parameters.box.x+p[0],this.parameters.box.y).size(this.parameters.box.width-p[0],this.parameters.box.height+p[1])}};break;case"t":this.calc=function(h,c){var p=this.snapToGrid(h,c,2);if(this.parameters.box.height-p[1]>0){if(this.parameters.type==="text")return;this.el.move(this.parameters.box.x,this.parameters.box.y+p[1]).height(this.parameters.box.height-p[1])}};break;case"r":this.calc=function(h,c){var p=this.snapToGrid(h,c,0);if(this.parameters.box.width+p[0]>0){if(this.parameters.type==="text")return;this.el.move(this.parameters.box.x,this.parameters.box.y).width(this.parameters.box.width+p[0])}};break;case"b":this.calc=function(h,c){var p=this.snapToGrid(h,c,0);if(this.parameters.box.height+p[1]>0){if(this.parameters.type==="text")return;this.el.move(this.parameters.box.x,this.parameters.box.y).height(this.parameters.box.height+p[1])}};break;case"l":this.calc=function(h,c){var p=this.snapToGrid(h,c,1);if(this.parameters.box.width-p[0]>0){if(this.parameters.type==="text")return;this.el.move(this.parameters.box.x+p[0],this.parameters.box.y).width(this.parameters.box.width-p[0])}};break;case"rot":this.calc=function(h,c){var p=h+this.parameters.p.x,f=c+this.parameters.p.y,v=Math.atan2(this.parameters.p.y-this.parameters.box.y-this.parameters.box.height/2,this.parameters.p.x-this.parameters.box.x-this.parameters.box.width/2),y=Math.atan2(f-this.parameters.box.y-this.parameters.box.height/2,p-this.parameters.box.x-this.parameters.box.width/2),b=this.parameters.rotation+180*(y-v)/Math.PI+this.options.snapToAngle/2;this.el.center(this.parameters.box.cx,this.parameters.box.cy).rotate(b-b%this.options.snapToAngle,this.parameters.box.cx,this.parameters.box.cy)};break;case"point":this.calc=function(h,c){var p=this.snapToGrid(h,c,this.parameters.pointCoords[0],this.parameters.pointCoords[1]),f=this.el.array().valueOf();f[this.parameters.i][0]=this.parameters.pointCoords[0]+p[0],f[this.parameters.i][1]=this.parameters.pointCoords[1]+p[1],this.el.plot(f)}}this.el.fire("resizestart",{dx:this.parameters.x,dy:this.parameters.y,event:o}),SVG.on(window,"touchmove.resize",function(h){r.update(h||window.event)}),SVG.on(window,"touchend.resize",function(){r.done()}),SVG.on(window,"mousemove.resize",function(h){r.update(h||window.event)}),SVG.on(window,"mouseup.resize",function(){r.done()})},O.prototype.update=function(o){if(o){var r=this._extractPosition(o),a=this.transformPoint(r.x,r.y),d=a.x-this.parameters.p.x,h=a.y-this.parameters.p.y;this.lastUpdateCall=[d,h],this.calc(d,h),this.el.fire("resizing",{dx:d,dy:h,event:o})}else this.lastUpdateCall&&this.calc(this.lastUpdateCall[0],this.lastUpdateCall[1])},O.prototype.done=function(){this.lastUpdateCall=null,SVG.off(window,"mousemove.resize"),SVG.off(window,"mouseup.resize"),SVG.off(window,"touchmove.resize"),SVG.off(window,"touchend.resize"),this.el.fire("resizedone")},O.prototype.snapToGrid=function(o,r,a,d){var h;return d!==void 0?h=[(a+o)%this.options.snapToGrid,(d+r)%this.options.snapToGrid]:(a=a??3,h=[(this.parameters.box.x+o+(1&a?0:this.parameters.box.width))%this.options.snapToGrid,(this.parameters.box.y+r+(2&a?0:this.parameters.box.height))%this.options.snapToGrid]),o<0&&(h[0]-=this.options.snapToGrid),r<0&&(h[1]-=this.options.snapToGrid),o-=Math.abs(h[0])<this.options.snapToGrid/2?h[0]:h[0]-(o<0?-this.options.snapToGrid:this.options.snapToGrid),r-=Math.abs(h[1])<this.options.snapToGrid/2?h[1]:h[1]-(r<0?-this.options.snapToGrid:this.options.snapToGrid),this.constraintToBox(o,r,a,d)},O.prototype.constraintToBox=function(o,r,a,d){var h,c,p=this.options.constraint||{};return d!==void 0?(h=a,c=d):(h=this.parameters.box.x+(1&a?0:this.parameters.box.width),c=this.parameters.box.y+(2&a?0:this.parameters.box.height)),p.minX!==void 0&&h+o<p.minX&&(o=p.minX-h),p.maxX!==void 0&&h+o>p.maxX&&(o=p.maxX-h),p.minY!==void 0&&c+r<p.minY&&(r=p.minY-c),p.maxY!==void 0&&c+r>p.maxY&&(r=p.maxY-c),[o,r]},O.prototype.checkAspectRatio=function(o,r){if(!this.options.saveAspectRatio)return o;var a=o.slice(),d=this.parameters.box.width/this.parameters.box.height,h=this.parameters.box.width+o[0],c=this.parameters.box.height-o[1],p=h/c;return p<d?(a[1]=h/d-this.parameters.box.height,r&&(a[1]=-a[1])):p>d&&(a[0]=this.parameters.box.width-c*d,r&&(a[0]=-a[0])),a},SVG.extend(SVG.Element,{resize:function(o){return(this.remember("_resizeHandler")||new O(this)).init(o||{}),this}}),SVG.Element.prototype.resize.defaults={snapToAngle:.1,snapToGrid:1,constraint:{},saveAspectRatio:!1}}).call(this)}(),window.Apex===void 0&&(window.Apex={});var Se=function(){function O(o){l(this,O),this.ctx=o,this.w=o.w}return g(O,[{key:"initModules",value:function(){this.ctx.publicMethods=["updateOptions","updateSeries","appendData","appendSeries","isSeriesHidden","toggleSeries","showSeries","hideSeries","setLocale","resetSeries","zoomX","toggleDataPointSelection","dataURI","exportToCSV","addXaxisAnnotation","addYaxisAnnotation","addPointAnnotation","clearAnnotations","removeAnnotation","paper","destroy"],this.ctx.eventList=["click","mousedown","mousemove","mouseleave","touchstart","touchmove","touchleave","mouseup","touchend"],this.ctx.animations=new J(this.ctx),this.ctx.axes=new ve(this.ctx),this.ctx.core=new va(this.ctx.el,this.ctx),this.ctx.config=new _t({}),this.ctx.data=new ht(this.ctx),this.ctx.grid=new Ee(this.ctx),this.ctx.graphics=new $(this.ctx),this.ctx.coreUtils=new Y(this.ctx),this.ctx.crosshairs=new le(this.ctx),this.ctx.events=new Ne(this.ctx),this.ctx.exports=new si(this.ctx),this.ctx.localization=new Ae(this.ctx),this.ctx.options=new He,this.ctx.responsive=new _e(this.ctx),this.ctx.series=new xt(this.ctx),this.ctx.theme=new fe(this.ctx),this.ctx.formatters=new et(this.ctx),this.ctx.titleSubtitle=new ye(this.ctx),this.ctx.legend=new Re(this.ctx),this.ctx.toolbar=new gt(this.ctx),this.ctx.tooltip=new Kr(this.ctx),this.ctx.dimensions=new bt(this.ctx),this.ctx.updateHelpers=new me(this.ctx),this.ctx.zoomPanSelection=new $e(this.ctx),this.ctx.w.globals.tooltip=new Kr(this.ctx)}}]),O}(),Te=function(){function O(o){l(this,O),this.ctx=o,this.w=o.w}return g(O,[{key:"clear",value:function(o){var r=o.isUpdating;this.ctx.zoomPanSelection&&this.ctx.zoomPanSelection.destroy(),this.ctx.toolbar&&this.ctx.toolbar.destroy(),this.ctx.animations=null,this.ctx.axes=null,this.ctx.annotations=null,this.ctx.core=null,this.ctx.data=null,this.ctx.grid=null,this.ctx.series=null,this.ctx.responsive=null,this.ctx.theme=null,this.ctx.formatters=null,this.ctx.titleSubtitle=null,this.ctx.legend=null,this.ctx.dimensions=null,this.ctx.options=null,this.ctx.crosshairs=null,this.ctx.zoomPanSelection=null,this.ctx.updateHelpers=null,this.ctx.toolbar=null,this.ctx.localization=null,this.ctx.w.globals.tooltip=null,this.clearDomElements({isUpdating:r})}},{key:"killSVG",value:function(o){o.each(function(r,a){this.removeClass("*"),this.off(),this.stop()},!0),o.ungroup(),o.clear()}},{key:"clearDomElements",value:function(o){var r=this,a=o.isUpdating,d=this.w.globals.dom.Paper.node;d.parentNode&&d.parentNode.parentNode&&!a&&(d.parentNode.parentNode.style.minHeight="unset");var h=this.w.globals.dom.baseEl;h&&this.ctx.eventList.forEach(function(p){h.removeEventListener(p,r.ctx.events.documentEvent)});var c=this.w.globals.dom;if(this.ctx.el!==null)for(;this.ctx.el.firstChild;)this.ctx.el.removeChild(this.ctx.el.firstChild);this.killSVG(c.Paper),c.Paper.remove(),c.elWrap=null,c.elGraphical=null,c.elLegendWrap=null,c.elLegendForeign=null,c.baseEl=null,c.elGridRect=null,c.elGridRectMask=null,c.elGridRectMarkerMask=null,c.elForecastMask=null,c.elNonForecastMask=null,c.elDefs=null}}]),O}(),St=new WeakMap,Ct=function(){function O(o,r){l(this,O),this.opts=r,this.ctx=this,this.w=new ii(r).init(),this.el=o,this.w.globals.cuid=_.randomId(),this.w.globals.chartID=this.w.config.chart.id?_.escapeString(this.w.config.chart.id):this.w.globals.cuid,new Se(this).initModules(),this.create=_.bind(this.create,this),this.windowResizeHandler=this._windowResizeHandler.bind(this),this.parentResizeHandler=this._parentResizeCallback.bind(this)}return g(O,[{key:"render",value:function(){var o=this;return new Promise(function(r,a){if(o.el!==null){Apex._chartInstances===void 0&&(Apex._chartInstances=[]),o.w.config.chart.id&&Apex._chartInstances.push({id:o.w.globals.chartID,group:o.w.config.chart.group,chart:o}),o.setLocale(o.w.config.chart.defaultLocale);var d=o.w.config.chart.events.beforeMount;if(typeof d=="function"&&d(o,o.w),o.events.fireEvent("beforeMount",[o,o.w]),window.addEventListener("resize",o.windowResizeHandler),function(w,R){var T=!1;if(w.nodeType!==Node.DOCUMENT_FRAGMENT_NODE){var F=w.getBoundingClientRect();w.style.display!=="none"&&F.width!==0||(T=!0)}var I=new ResizeObserver(function(G){T&&R.call(w,G),T=!0});w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?Array.from(w.children).forEach(function(G){return I.observe(G)}):I.observe(w),St.set(R,I)}(o.el.parentNode,o.parentResizeHandler),!o.css){var h=o.el.getRootNode&&o.el.getRootNode(),c=_.is("ShadowRoot",h),p=o.el.ownerDocument,f=p.getElementById("apexcharts-css");if(c||!f){var v;o.css=document.createElement("style"),o.css.id="apexcharts-css",o.css.textContent=`@keyframes opaque {
  0% {
      opacity: 0
  }

  to {
      opacity: 1
  }
}

@keyframes resizeanim {
  0%,to {
      opacity: 0
  }
}

.apexcharts-canvas {
  position: relative;
  user-select: none
}

.apexcharts-canvas ::-webkit-scrollbar {
  -webkit-appearance: none;
  width: 6px
}

.apexcharts-canvas ::-webkit-scrollbar-thumb {
  border-radius: 4px;
  background-color: rgba(0,0,0,.5);
  box-shadow: 0 0 1px rgba(255,255,255,.5);
  -webkit-box-shadow: 0 0 1px rgba(255,255,255,.5)
}

.apexcharts-inner {
  position: relative
}

.apexcharts-text tspan {
  font-family: inherit
}

.legend-mouseover-inactive {
  transition: .15s ease all;
  opacity: .2
}

.apexcharts-legend-text {
  padding-left: 15px;
  margin-left: -15px;
}

.apexcharts-series-collapsed {
  opacity: 0
}

.apexcharts-tooltip {
  border-radius: 5px;
  box-shadow: 2px 2px 6px -4px #999;
  cursor: default;
  font-size: 14px;
  left: 62px;
  opacity: 0;
  pointer-events: none;
  position: absolute;
  top: 20px;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  white-space: nowrap;
  z-index: 12;
  transition: .15s ease all
}

.apexcharts-tooltip.apexcharts-active {
  opacity: 1;
  transition: .15s ease all
}

.apexcharts-tooltip.apexcharts-theme-light {
  border: 1px solid #e3e3e3;
  background: rgba(255,255,255,.96)
}

.apexcharts-tooltip.apexcharts-theme-dark {
  color: #fff;
  background: rgba(30,30,30,.8)
}

.apexcharts-tooltip * {
  font-family: inherit
}

.apexcharts-tooltip-title {
  padding: 6px;
  font-size: 15px;
  margin-bottom: 4px
}

.apexcharts-tooltip.apexcharts-theme-light .apexcharts-tooltip-title {
  background: #eceff1;
  border-bottom: 1px solid #ddd
}

.apexcharts-tooltip.apexcharts-theme-dark .apexcharts-tooltip-title {
  background: rgba(0,0,0,.7);
  border-bottom: 1px solid #333
}

.apexcharts-tooltip-text-goals-value,.apexcharts-tooltip-text-y-value,.apexcharts-tooltip-text-z-value {
  display: inline-block;
  margin-left: 5px;
  font-weight: 600
}

.apexcharts-tooltip-text-goals-label:empty,.apexcharts-tooltip-text-goals-value:empty,.apexcharts-tooltip-text-y-label:empty,.apexcharts-tooltip-text-y-value:empty,.apexcharts-tooltip-text-z-value:empty,.apexcharts-tooltip-title:empty {
  display: none
}

.apexcharts-tooltip-text-goals-label,.apexcharts-tooltip-text-goals-value {
  padding: 6px 0 5px
}

.apexcharts-tooltip-goals-group,.apexcharts-tooltip-text-goals-label,.apexcharts-tooltip-text-goals-value {
  display: flex
}

.apexcharts-tooltip-text-goals-label:not(:empty),.apexcharts-tooltip-text-goals-value:not(:empty) {
  margin-top: -6px
}

.apexcharts-tooltip-marker {
  width: 12px;
  height: 12px;
  position: relative;
  top: 0;
  margin-right: 10px;
  border-radius: 50%
}

.apexcharts-tooltip-series-group {
  padding: 0 10px;
  display: none;
  text-align: left;
  justify-content: left;
  align-items: center
}

.apexcharts-tooltip-series-group.apexcharts-active .apexcharts-tooltip-marker {
  opacity: 1
}

.apexcharts-tooltip-series-group.apexcharts-active,.apexcharts-tooltip-series-group:last-child {
  padding-bottom: 4px
}

.apexcharts-tooltip-series-group-hidden {
  opacity: 0;
  height: 0;
  line-height: 0;
  padding: 0!important
}

.apexcharts-tooltip-y-group {
  padding: 6px 0 5px
}

.apexcharts-custom-tooltip,.apexcharts-tooltip-box {
  padding: 4px 8px
}

.apexcharts-tooltip-boxPlot {
  display: flex;
  flex-direction: column-reverse
}

.apexcharts-tooltip-box>div {
  margin: 4px 0
}

.apexcharts-tooltip-box span.value {
  font-weight: 700
}

.apexcharts-tooltip-rangebar {
  padding: 5px 8px
}

.apexcharts-tooltip-rangebar .category {
  font-weight: 600;
  color: #777
}

.apexcharts-tooltip-rangebar .series-name {
  font-weight: 700;
  display: block;
  margin-bottom: 5px
}

.apexcharts-xaxistooltip,.apexcharts-yaxistooltip {
  opacity: 0;
  pointer-events: none;
  color: #373d3f;
  font-size: 13px;
  text-align: center;
  border-radius: 2px;
  position: absolute;
  z-index: 10;
  background: #eceff1;
  border: 1px solid #90a4ae
}

.apexcharts-xaxistooltip {
  padding: 9px 10px;
  transition: .15s ease all
}

.apexcharts-xaxistooltip.apexcharts-theme-dark {
  background: rgba(0,0,0,.7);
  border: 1px solid rgba(0,0,0,.5);
  color: #fff
}

.apexcharts-xaxistooltip:after,.apexcharts-xaxistooltip:before {
  left: 50%;
  border: solid transparent;
  content: " ";
  height: 0;
  width: 0;
  position: absolute;
  pointer-events: none
}

.apexcharts-xaxistooltip:after {
  border-color: transparent;
  border-width: 6px;
  margin-left: -6px
}

.apexcharts-xaxistooltip:before {
  border-color: transparent;
  border-width: 7px;
  margin-left: -7px
}

.apexcharts-xaxistooltip-bottom:after,.apexcharts-xaxistooltip-bottom:before {
  bottom: 100%
}

.apexcharts-xaxistooltip-top:after,.apexcharts-xaxistooltip-top:before {
  top: 100%
}

.apexcharts-xaxistooltip-bottom:after {
  border-bottom-color: #eceff1
}

.apexcharts-xaxistooltip-bottom:before {
  border-bottom-color: #90a4ae
}

.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:after,.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:before {
  border-bottom-color: rgba(0,0,0,.5)
}

.apexcharts-xaxistooltip-top:after {
  border-top-color: #eceff1
}

.apexcharts-xaxistooltip-top:before {
  border-top-color: #90a4ae
}

.apexcharts-xaxistooltip-top.apexcharts-theme-dark:after,.apexcharts-xaxistooltip-top.apexcharts-theme-dark:before {
  border-top-color: rgba(0,0,0,.5)
}

.apexcharts-xaxistooltip.apexcharts-active {
  opacity: 1;
  transition: .15s ease all
}

.apexcharts-yaxistooltip {
  padding: 4px 10px
}

.apexcharts-yaxistooltip.apexcharts-theme-dark {
  background: rgba(0,0,0,.7);
  border: 1px solid rgba(0,0,0,.5);
  color: #fff
}

.apexcharts-yaxistooltip:after,.apexcharts-yaxistooltip:before {
  top: 50%;
  border: solid transparent;
  content: " ";
  height: 0;
  width: 0;
  position: absolute;
  pointer-events: none
}

.apexcharts-yaxistooltip:after {
  border-color: transparent;
  border-width: 6px;
  margin-top: -6px
}

.apexcharts-yaxistooltip:before {
  border-color: transparent;
  border-width: 7px;
  margin-top: -7px
}

.apexcharts-yaxistooltip-left:after,.apexcharts-yaxistooltip-left:before {
  left: 100%
}

.apexcharts-yaxistooltip-right:after,.apexcharts-yaxistooltip-right:before {
  right: 100%
}

.apexcharts-yaxistooltip-left:after {
  border-left-color: #eceff1
}

.apexcharts-yaxistooltip-left:before {
  border-left-color: #90a4ae
}

.apexcharts-yaxistooltip-left.apexcharts-theme-dark:after,.apexcharts-yaxistooltip-left.apexcharts-theme-dark:before {
  border-left-color: rgba(0,0,0,.5)
}

.apexcharts-yaxistooltip-right:after {
  border-right-color: #eceff1
}

.apexcharts-yaxistooltip-right:before {
  border-right-color: #90a4ae
}

.apexcharts-yaxistooltip-right.apexcharts-theme-dark:after,.apexcharts-yaxistooltip-right.apexcharts-theme-dark:before {
  border-right-color: rgba(0,0,0,.5)
}

.apexcharts-yaxistooltip.apexcharts-active {
  opacity: 1
}

.apexcharts-yaxistooltip-hidden {
  display: none
}

.apexcharts-xcrosshairs,.apexcharts-ycrosshairs {
  pointer-events: none;
  opacity: 0;
  transition: .15s ease all
}

.apexcharts-xcrosshairs.apexcharts-active,.apexcharts-ycrosshairs.apexcharts-active {
  opacity: 1;
  transition: .15s ease all
}

.apexcharts-ycrosshairs-hidden {
  opacity: 0
}

.apexcharts-selection-rect {
  cursor: move
}

.svg_select_boundingRect,.svg_select_points_rot {
  pointer-events: none;
  opacity: 0;
  visibility: hidden
}

.apexcharts-selection-rect+g .svg_select_boundingRect,.apexcharts-selection-rect+g .svg_select_points_rot {
  opacity: 0;
  visibility: hidden
}

.apexcharts-selection-rect+g .svg_select_points_l,.apexcharts-selection-rect+g .svg_select_points_r {
  cursor: ew-resize;
  opacity: 1;
  visibility: visible
}

.svg_select_points {
  fill: #efefef;
  stroke: #333;
  rx: 2
}

.apexcharts-svg.apexcharts-zoomable.hovering-zoom {
  cursor: crosshair
}

.apexcharts-svg.apexcharts-zoomable.hovering-pan {
  cursor: move
}

.apexcharts-menu-icon,.apexcharts-pan-icon,.apexcharts-reset-icon,.apexcharts-selection-icon,.apexcharts-toolbar-custom-icon,.apexcharts-zoom-icon,.apexcharts-zoomin-icon,.apexcharts-zoomout-icon {
  cursor: pointer;
  width: 20px;
  height: 20px;
  line-height: 24px;
  color: #6e8192;
  text-align: center
}

.apexcharts-menu-icon svg,.apexcharts-reset-icon svg,.apexcharts-zoom-icon svg,.apexcharts-zoomin-icon svg,.apexcharts-zoomout-icon svg {
  fill: #6e8192
}

.apexcharts-selection-icon svg {
  fill: #444;
  transform: scale(.76)
}

.apexcharts-theme-dark .apexcharts-menu-icon svg,.apexcharts-theme-dark .apexcharts-pan-icon svg,.apexcharts-theme-dark .apexcharts-reset-icon svg,.apexcharts-theme-dark .apexcharts-selection-icon svg,.apexcharts-theme-dark .apexcharts-toolbar-custom-icon svg,.apexcharts-theme-dark .apexcharts-zoom-icon svg,.apexcharts-theme-dark .apexcharts-zoomin-icon svg,.apexcharts-theme-dark .apexcharts-zoomout-icon svg {
  fill: #f3f4f5
}

.apexcharts-canvas .apexcharts-reset-zoom-icon.apexcharts-selected svg,.apexcharts-canvas .apexcharts-selection-icon.apexcharts-selected svg,.apexcharts-canvas .apexcharts-zoom-icon.apexcharts-selected svg {
  fill: #008ffb
}

.apexcharts-theme-light .apexcharts-menu-icon:hover svg,.apexcharts-theme-light .apexcharts-reset-icon:hover svg,.apexcharts-theme-light .apexcharts-selection-icon:not(.apexcharts-selected):hover svg,.apexcharts-theme-light .apexcharts-zoom-icon:not(.apexcharts-selected):hover svg,.apexcharts-theme-light .apexcharts-zoomin-icon:hover svg,.apexcharts-theme-light .apexcharts-zoomout-icon:hover svg {
  fill: #333
}

.apexcharts-menu-icon,.apexcharts-selection-icon {
  position: relative
}

.apexcharts-reset-icon {
  margin-left: 5px
}

.apexcharts-menu-icon,.apexcharts-reset-icon,.apexcharts-zoom-icon {
  transform: scale(.85)
}

.apexcharts-zoomin-icon,.apexcharts-zoomout-icon {
  transform: scale(.7)
}

.apexcharts-zoomout-icon {
  margin-right: 3px
}

.apexcharts-pan-icon {
  transform: scale(.62);
  position: relative;
  left: 1px;
  top: 0
}

.apexcharts-pan-icon svg {
  fill: #fff;
  stroke: #6e8192;
  stroke-width: 2
}

.apexcharts-pan-icon.apexcharts-selected svg {
  stroke: #008ffb
}

.apexcharts-pan-icon:not(.apexcharts-selected):hover svg {
  stroke: #333
}

.apexcharts-toolbar {
  position: absolute;
  z-index: 11;
  max-width: 176px;
  text-align: right;
  border-radius: 3px;
  padding: 0 6px 2px;
  display: flex;
  justify-content: space-between;
  align-items: center
}

.apexcharts-menu {
  background: #fff;
  position: absolute;
  top: 100%;
  border: 1px solid #ddd;
  border-radius: 3px;
  padding: 3px;
  right: 10px;
  opacity: 0;
  min-width: 110px;
  transition: .15s ease all;
  pointer-events: none
}

.apexcharts-menu.apexcharts-menu-open {
  opacity: 1;
  pointer-events: all;
  transition: .15s ease all
}

.apexcharts-menu-item {
  padding: 6px 7px;
  font-size: 12px;
  cursor: pointer
}

.apexcharts-theme-light .apexcharts-menu-item:hover {
  background: #eee
}

.apexcharts-theme-dark .apexcharts-menu {
  background: rgba(0,0,0,.7);
  color: #fff
}

@media screen and (min-width:768px) {
  .apexcharts-canvas:hover .apexcharts-toolbar {
      opacity: 1
  }
}

.apexcharts-canvas .apexcharts-element-hidden,.apexcharts-datalabel.apexcharts-element-hidden,.apexcharts-hide .apexcharts-series-points {
  opacity: 0
}

.apexcharts-hidden-element-shown {
  opacity: 1;
  transition: 0.25s ease all;
}
.apexcharts-datalabel,.apexcharts-datalabel-label,.apexcharts-datalabel-value,.apexcharts-datalabels,.apexcharts-pie-label {
  cursor: default;
  pointer-events: none
}

.apexcharts-pie-label-delay {
  opacity: 0;
  animation-name: opaque;
  animation-duration: .3s;
  animation-fill-mode: forwards;
  animation-timing-function: ease
}

.apexcharts-radialbar-label {
  cursor: pointer;
}

.apexcharts-annotation-rect,.apexcharts-area-series .apexcharts-area,.apexcharts-area-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,.apexcharts-gridline,.apexcharts-line,.apexcharts-line-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,.apexcharts-point-annotation-label,.apexcharts-radar-series path,.apexcharts-radar-series polygon,.apexcharts-toolbar svg,.apexcharts-tooltip .apexcharts-marker,.apexcharts-xaxis-annotation-label,.apexcharts-yaxis-annotation-label,.apexcharts-zoom-rect {
  pointer-events: none
}

.apexcharts-marker {
  transition: .15s ease all
}

.resize-triggers {
  animation: 1ms resizeanim;
  visibility: hidden;
  opacity: 0;
  height: 100%;
  width: 100%;
  overflow: hidden
}

.contract-trigger:before,.resize-triggers,.resize-triggers>div {
  content: " ";
  display: block;
  position: absolute;
  top: 0;
  left: 0
}

.resize-triggers>div {
  height: 100%;
  width: 100%;
  background: #eee;
  overflow: auto
}

.contract-trigger:before {
  overflow: hidden;
  width: 200%;
  height: 200%
}

.apexcharts-bar-goals-markers{
  pointer-events: none
}

.apexcharts-bar-shadows{
  pointer-events: none
}

.apexcharts-rangebar-goals-markers{
  pointer-events: none
}`;var y=((v=o.opts.chart)===null||v===void 0?void 0:v.nonce)||o.w.config.chart.nonce;y&&o.css.setAttribute("nonce",y),c?h.prepend(o.css):p.head.appendChild(o.css)}}var b=o.create(o.w.config.series,{});if(!b)return r(o);o.mount(b).then(function(){typeof o.w.config.chart.events.mounted=="function"&&o.w.config.chart.events.mounted(o,o.w),o.events.fireEvent("mounted",[o,o.w]),r(b)}).catch(function(w){a(w)})}else a(new Error("Element not found"))})}},{key:"create",value:function(o,r){var a=this.w;new Se(this).initModules();var d=this.w.globals;if(d.noData=!1,d.animationEnded=!1,this.responsive.checkResponsiveConfig(r),a.config.xaxis.convertedCatToNumeric&&new vt(a.config).convertCatToNumericXaxis(a.config,this.ctx),this.el===null||(this.core.setupElements(),a.config.chart.type==="treemap"&&(a.config.grid.show=!1,a.config.yaxis[0].show=!1),d.svgWidth===0))return d.animationEnded=!0,null;var h=Y.checkComboSeries(o);d.comboCharts=h.comboCharts,d.comboBarCount=h.comboBarCount;var c=o.every(function(y){return y.data&&y.data.length===0});(o.length===0||c)&&this.series.handleNoData(),this.events.setupEventHandlers(),this.data.parseData(o),this.theme.init(),new Ke(this).setGlobalMarkerSize(),this.formatters.setLabelFormatters(),this.titleSubtitle.draw(),d.noData&&d.collapsedSeries.length!==d.series.length&&!a.config.legend.showForSingleSeries||this.legend.init(),this.series.hasAllSeriesEqualX(),d.axisCharts&&(this.core.coreCalculations(),a.config.xaxis.type!=="category"&&this.formatters.setLabelFormatters(),this.ctx.toolbar.minX=a.globals.minX,this.ctx.toolbar.maxX=a.globals.maxX),this.formatters.heatmapLabelFormatters(),new Y(this).getLargestMarkerSize(),this.dimensions.plotCoords();var p=this.core.xySettings();this.grid.createGridMask();var f=this.core.plotChartType(o,p),v=new Kt(this);return v.bringForward(),a.config.dataLabels.background.enabled&&v.dataLabelsBackground(),this.core.shiftGraphPosition(),{elGraph:f,xyRatios:p,dimensions:{plot:{left:a.globals.translateX,top:a.globals.translateY,width:a.globals.gridWidth,height:a.globals.gridHeight}}}}},{key:"mount",value:function(){var o=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,a=this,d=a.w;return new Promise(function(h,c){if(a.el===null)return c(new Error("Not enough data to display or target element not found"));(r===null||d.globals.allSeriesCollapsed)&&a.series.handleNoData(),a.grid=new Ee(a);var p,f,v=a.grid.drawGrid();if(a.annotations=new tt(a),a.annotations.drawImageAnnos(),a.annotations.drawTextAnnos(),d.config.grid.position==="back"&&(v&&d.globals.dom.elGraphical.add(v.el),v!=null&&(p=v.elGridBorders)!==null&&p!==void 0&&p.node&&d.globals.dom.elGraphical.add(v.elGridBorders)),Array.isArray(r.elGraph))for(var y=0;y<r.elGraph.length;y++)d.globals.dom.elGraphical.add(r.elGraph[y]);else d.globals.dom.elGraphical.add(r.elGraph);d.config.grid.position==="front"&&(v&&d.globals.dom.elGraphical.add(v.el),v!=null&&(f=v.elGridBorders)!==null&&f!==void 0&&f.node&&d.globals.dom.elGraphical.add(v.elGridBorders)),d.config.xaxis.crosshairs.position==="front"&&a.crosshairs.drawXCrosshairs(),d.config.yaxis[0].crosshairs.position==="front"&&a.crosshairs.drawYCrosshairs(),d.config.chart.type!=="treemap"&&a.axes.drawAxis(d.config.chart.type,v);var b=new Pt(o.ctx,v),w=new qe(o.ctx,v);if(v!==null&&(b.xAxisLabelCorrections(v.xAxisTickWidth),w.setYAxisTextAlignments(),d.config.yaxis.map(function(T,F){d.globals.ignoreYAxisIndexes.indexOf(F)===-1&&w.yAxisTitleRotate(F,T.opposite)})),a.annotations.drawAxesAnnotations(),!d.globals.noData){if(d.config.tooltip.enabled&&!d.globals.noData&&a.w.globals.tooltip.drawTooltip(r.xyRatios),d.globals.axisCharts&&(d.globals.isXNumeric||d.config.xaxis.convertedCatToNumeric||d.globals.isRangeBar))(d.config.chart.zoom.enabled||d.config.chart.selection&&d.config.chart.selection.enabled||d.config.chart.pan&&d.config.chart.pan.enabled)&&a.zoomPanSelection.init({xyRatios:r.xyRatios});else{var R=d.config.chart.toolbar.tools;["zoom","zoomin","zoomout","selection","pan","reset"].forEach(function(T){R[T]=!1})}d.config.chart.toolbar.show&&!d.globals.allSeriesCollapsed&&a.toolbar.createToolbar()}d.globals.memory.methodsToExec.length>0&&d.globals.memory.methodsToExec.forEach(function(T){T.method(T.params,!1,T.context)}),d.globals.axisCharts||d.globals.noData||a.core.resizeNonAxisCharts(),h(a)})}},{key:"destroy",value:function(){var o,r;window.removeEventListener("resize",this.windowResizeHandler),this.el.parentNode,o=this.parentResizeHandler,(r=St.get(o))&&(r.disconnect(),St.delete(o));var a=this.w.config.chart.id;a&&Apex._chartInstances.forEach(function(d,h){d.id===_.escapeString(a)&&Apex._chartInstances.splice(h,1)}),new Te(this.ctx).clear({isUpdating:!1})}},{key:"updateOptions",value:function(o){var r=this,a=arguments.length>1&&arguments[1]!==void 0&&arguments[1],d=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],h=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],c=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],p=this.w;return p.globals.selection=void 0,o.series&&(this.series.resetSeries(!1,!0,!1),o.series.length&&o.series[0].data&&(o.series=o.series.map(function(f,v){return r.updateHelpers._extendSeries(f,v)})),this.updateHelpers.revertDefaultAxisMinMax()),o.xaxis&&(o=this.updateHelpers.forceXAxisUpdate(o)),o.yaxis&&(o=this.updateHelpers.forceYAxisUpdate(o)),p.globals.collapsedSeriesIndices.length>0&&this.series.clearPreviousPaths(),o.theme&&(o=this.theme.updateThemeOptions(o)),this.updateHelpers._updateOptions(o,a,d,h,c)}},{key:"updateSeries",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],a=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];return this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(o,r,a)}},{key:"appendSeries",value:function(o){var r=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],a=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],d=this.w.config.series.slice();return d.push(o),this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(d,r,a)}},{key:"appendData",value:function(o){var r=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],a=this;a.w.globals.dataChanged=!0,a.series.getPreviousPaths();for(var d=a.w.config.series.slice(),h=0;h<d.length;h++)if(o[h]!==null&&o[h]!==void 0)for(var c=0;c<o[h].data.length;c++)d[h].data.push(o[h].data[c]);return a.w.config.series=d,r&&(a.w.globals.initialSeries=_.clone(a.w.config.series)),this.update()}},{key:"update",value:function(o){var r=this;return new Promise(function(a,d){new Te(r.ctx).clear({isUpdating:!0});var h=r.create(r.w.config.series,o);if(!h)return a(r);r.mount(h).then(function(){typeof r.w.config.chart.events.updated=="function"&&r.w.config.chart.events.updated(r,r.w),r.events.fireEvent("updated",[r,r.w]),r.w.globals.isDirty=!0,a(r)}).catch(function(c){d(c)})})}},{key:"getSyncedCharts",value:function(){var o=this.getGroupedCharts(),r=[this];return o.length&&(r=[],o.forEach(function(a){r.push(a)})),r}},{key:"getGroupedCharts",value:function(){var o=this;return Apex._chartInstances.filter(function(r){if(r.group)return!0}).map(function(r){return o.w.config.chart.group===r.group?r.chart:o})}},{key:"toggleSeries",value:function(o){return this.series.toggleSeries(o)}},{key:"highlightSeriesOnLegendHover",value:function(o,r){return this.series.toggleSeriesOnHover(o,r)}},{key:"showSeries",value:function(o){this.series.showSeries(o)}},{key:"hideSeries",value:function(o){this.series.hideSeries(o)}},{key:"isSeriesHidden",value:function(o){this.series.isSeriesHidden(o)}},{key:"resetSeries",value:function(){var o=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],r=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.series.resetSeries(o,r)}},{key:"addEventListener",value:function(o,r){this.events.addEventListener(o,r)}},{key:"removeEventListener",value:function(o,r){this.events.removeEventListener(o,r)}},{key:"addXaxisAnnotation",value:function(o){var r=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,d=this;a&&(d=a),d.annotations.addXaxisAnnotationExternal(o,r,d)}},{key:"addYaxisAnnotation",value:function(o){var r=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,d=this;a&&(d=a),d.annotations.addYaxisAnnotationExternal(o,r,d)}},{key:"addPointAnnotation",value:function(o){var r=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,d=this;a&&(d=a),d.annotations.addPointAnnotationExternal(o,r,d)}},{key:"clearAnnotations",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,r=this;o&&(r=o),r.annotations.clearAnnotations(r)}},{key:"removeAnnotation",value:function(o){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,a=this;r&&(a=r),a.annotations.removeAnnotation(a,o)}},{key:"getChartArea",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner")}},{key:"getSeriesTotalXRange",value:function(o,r){return this.coreUtils.getSeriesTotalsXRange(o,r)}},{key:"getHighestValueInSeries",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new te(this.ctx).getMinYMaxY(o).highestY}},{key:"getLowestValueInSeries",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new te(this.ctx).getMinYMaxY(o).lowestY}},{key:"getSeriesTotal",value:function(){return this.w.globals.seriesTotals}},{key:"toggleDataPointSelection",value:function(o,r){return this.updateHelpers.toggleDataPointSelection(o,r)}},{key:"zoomX",value:function(o,r){this.ctx.toolbar.zoomUpdateOptions(o,r)}},{key:"setLocale",value:function(o){this.localization.setCurrentLocaleValues(o)}},{key:"dataURI",value:function(o){return new si(this.ctx).dataURI(o)}},{key:"exportToCSV",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new si(this.ctx).exportToCSV(o)}},{key:"paper",value:function(){return this.w.globals.dom.Paper}},{key:"_parentResizeCallback",value:function(){this.w.globals.animationEnded&&this.w.config.chart.redrawOnParentResize&&this._windowResize()}},{key:"_windowResize",value:function(){var o=this;clearTimeout(this.w.globals.resizeTimer),this.w.globals.resizeTimer=window.setTimeout(function(){o.w.globals.resized=!0,o.w.globals.dataChanged=!1,o.ctx.update()},150)}},{key:"_windowResizeHandler",value:function(){var o=this.w.config.chart.redrawOnWindowResize;typeof o=="function"&&(o=o()),o&&this._windowResize()}}],[{key:"getChartByID",value:function(o){var r=_.escapeString(o);if(Apex._chartInstances){var a=Apex._chartInstances.filter(function(d){return d.id===r})[0];return a&&a.chart}}},{key:"initOnLoad",value:function(){for(var o=document.querySelectorAll("[data-apexcharts]"),r=0;r<o.length;r++)new O(o[r],JSON.parse(o[r].getAttribute("data-options"))).render()}},{key:"exec",value:function(o,r){var a=this.getChartByID(o);if(a){a.w.globals.isExecCalled=!0;var d=null;if(a.publicMethods.indexOf(r)!==-1){for(var h=arguments.length,c=new Array(h>2?h-2:0),p=2;p<h;p++)c[p-2]=arguments[p];d=a[r].apply(a,c)}return d}}},{key:"merge",value:function(o,r){return _.extend(o,r)}}]),O}();e.exports=Ct})(Kd,Kd.exports);var vx=Kd.exports;const Zc=mx(vx),Jc=["animationEnd","beforeMount","mounted","updated","click","mouseMove","mouseLeave","legendClick","markerClick","selection","dataPointSelection","dataPointMouseEnter","dataPointMouseLeave","beforeZoom","beforeResetZoom","zoomed","scrolled","brushScrolled"],tl=is({name:"apexchart",props:{options:{type:Object},type:{type:String},series:{type:Array,required:!0},width:{default:"100%"},height:{default:"auto"}},emits:Jc,setup(e,{emit:t}){const i=pe(null),s=pe(null),n=Pe=>Pe&&typeof Pe=="object"&&!Array.isArray(Pe)&&Pe!=null,l=(Pe,He)=>{typeof Object.assign!="function"&&function(){Object.assign=function(Ge){if(Ge==null)throw new TypeError("Cannot convert undefined or null to object");let et=Object(Ge);for(let Gt=1;Gt<arguments.length;Gt++){let At=arguments[Gt];if(At!=null)for(let vt in At)At.hasOwnProperty(vt)&&(et[vt]=At[vt])}return et}}();let tt=Object.assign({},Pe);return n(Pe)&&n(He)&&Object.keys(He).forEach(Ge=>{n(He[Ge])?Ge in Pe?tt[Ge]=l(Pe[Ge],He[Ge]):Object.assign(tt,{[Ge]:He[Ge]}):Object.assign(tt,{[Ge]:He[Ge]})}),tt},u=async()=>{if(await xo(),s.value)return;const Pe={chart:{type:e.type||e.options.chart.type||"line",height:e.height,width:e.width,events:{}},series:e.series};Jc.forEach(tt=>{let Ge=(...et)=>t(tt,...et);Pe.chart.events[tt]=Ge});const He=l(e.options,Pe);return s.value=new Zc(i.value,He),s.value.render()},g=()=>(C(),u()),C=()=>{s.value.destroy()},S=(Pe,He)=>s.value.updateSeries(Pe,He),A=(Pe,He,tt,Ge)=>s.value.updateOptions(Pe,He,tt,Ge),D=Pe=>s.value.toggleSeries(Pe),M=Pe=>{s.value.showSeries(Pe)},W=Pe=>{s.value.hideSeries(Pe)},z=(Pe,He)=>s.value.appendSeries(Pe,He),U=()=>{s.value.resetSeries()},X=(Pe,He)=>{s.value.toggleDataPointSelection(Pe,He)},q=Pe=>s.value.appendData(Pe),_=(Pe,He)=>s.value.zoomX(Pe,He),J=Pe=>s.value.dataURI(Pe),se=Pe=>s.value.setLocale(Pe),$=(Pe,He)=>{s.value.addXaxisAnnotation(Pe,He)},Y=(Pe,He)=>{s.value.addYaxisAnnotation(Pe,He)},oe=(Pe,He)=>{s.value.addPointAnnotation(Pe,He)},Oe=(Pe,He)=>{s.value.removeAnnotation(Pe,He)},re=()=>{s.value.clearAnnotations()};Jd(()=>{window.ApexCharts=Zc}),Us(()=>{i.value=ru().proxy.$el,u()}),Af(()=>{s.value&&C()});const Ve=Rf(e);return ui(Ve.options,()=>{!s.value&&e.options?u():s.value.updateOptions(e.options)}),ui(Ve.series,()=>{!s.value&&e.series?u():s.value.updateSeries(e.series)},{deep:!0}),ui(Ve.type,()=>{g()}),ui(Ve.width,()=>{g()}),ui(Ve.height,()=>{g()}),{chart:s,init:u,refresh:g,destroy:C,updateOptions:A,updateSeries:S,toggleSeries:D,showSeries:M,hideSeries:W,resetSeries:U,zoomX:_,toggleDataPointSelection:X,appendData:q,appendSeries:z,addXaxisAnnotation:$,addYaxisAnnotation:Y,addPointAnnotation:oe,removeAnnotation:Oe,clearAnnotations:re,setLocale:se,dataURI:J}},render(){return ou("div",{class:"vue-apexcharts"})}}),Cx=e=>{e.component(tl.name,tl)};tl.install=Cx;const Sa=["#F3B415","#F27036","#663F59","#6A6E94","#4E88B4","#00A7C6","#18D8D8","#A9D794","#46AF78","#A93F55","#8C5E58","#2176FF","#33A1FD","#7A918D","#BAFF29"],yx=is({setup(){const e=Is(),t=zs();return{mainStore:e,apiStore:t}},components:{apexchart:tl},layout:"Indicators",computed:{optionChart(){let e=!1,t=this.title.split(" "),i={position:"right"},s=[{breakpoint:970,options:{chart:{width:400},legend:i}},{breakpoint:785,options:{chart:{width:300},legend:i}},{breakpoint:650,options:{chart:{width:440},legend:i}},{breakpoint:450,options:{chart:{width:370},legend:i}},{breakpoint:396,options:{chart:{width:300},legend:i}},{breakpoint:320,options:{chart:{width:250},legend:i}}];switch(this.type){case"bar":e={colors:Sa,plotOptions:{bar:{horizontal:!1,columnWidth:"30px"}},dataLabels:{enabled:!1},stroke:{show:!0,width:1,colors:["transparent"]},xaxis:{categories:this.categories},yaxis:{title:{text:this.title}},fill:{opacity:1},tooltip:{y:{formatter:function(n){return t[0]+" "+n+" "+t[1]}}}};break;case"pie":e={colors:Sa,labels:this.labels,legend:i,responsive:s};break;case"donut":e={colors:Sa,labels:this.labels,legend:i,responsive:s};break;case"polarArea":e={colors:Sa,labels:this.labels,legend:i,responsive:s};break}return e}},props:{type:{type:String,default:""},options:{type:Object,default:()=>{}},series:{type:Array,default:()=>[]},categories:{type:Array,default:()=>[]},labels:{type:Array,default:()=>[]},title:{type:String,default:"($) PESOS"},legend:{type:Boolean,default:!1},positionLegend:{type:String,default:"botton"}}}),bx={key:0,id:"chart"};function wx(e,t,i,s,n,l){const u=Dt("apexchart");return e.series&&e.series.length>0?(ee(),be("div",bx,[de(u,{type:e.type,options:e.optionChart,series:e.series},null,8,["type","options","series"])])):we("",!0)}var xx=gi(yx,[["render",wx]]);const Sx={components:{},props:{size:{type:String,default:"lg"},color:{type:String,default:""},label:{type:String,default:""}}};function Ex(e,t,i,s,n,l){return ee(),be("div",{class:As("q-pa-"+i.size)},[Z("p",{style:yr({color:i.color}),class:"text-weight-bold q-title"},ze(i.label),5),de(iu,{indeterminate:"",stripe:"",size:i.size,color:i.color},null,8,["size","color"])],2)}var Ax=gi(Sx,[["render",Ex]]);const Rx=is({setup(){const e=Is(),t=zs();return{mainStore:e,apiStore:t}},emits:["clicked"],props:{name:{type:String,default:""},textStyle:{type:Object,default:()=>{}}},methods:{clickTitle(){this.$emit("clicked")}},computed:{txtColor(){return this.textColor+" !important"}},mounted(){}}),Dx={class:"space-between q-pb-xs"};function Tx(e,t,i,s,n,l){return ee(),be("div",Dx,[(e.name||0)&&e.name.trim()!=""?(ee(),be("h3",{key:0,class:"text-primary",style:yr(e.textStyle),onClick:t[0]||(t[0]=(...u)=>e.clickTitle&&e.clickTitle(...u))},ze(e.name),5)):we("",!0),wt(e.$slots,"default")])}var Px=gi(Rx,[["render",Tx]]);const Fx={name:"t-page",props:{title:{type:String,default:""}}},Lx={class:"form-border"};function Mx(e,t,i,s,n,l){const u=Dt("t-title");return ee(),be("div",Lx,[de(u,{name:i.title},{default:De(()=>[wt(e.$slots,"title"),wt(e.$slots,"title-right")]),_:3},8,["name"]),wt(e.$slots,"default")])}var Ix=gi(Fx,[["render",Mx]]);const Ox=is({setup(){const e=Is(),t=zs();return{mainStore:e,apiStore:t}},props:{type:{type:String,default:"success"},title:{type:String,default:""},text:{type:String,default:""}}}),kx={key:0,class:"doc-note__title"};function Nx(e,t,i,s,n,l){return ee(),be("div",{class:As(["doc-note full","doc-note--"+e.type])},[e.title?(ee(),be("p",kx,ze(e.title),1)):we("",!0),Z("p",null,ze(e.text),1),Z("p",null,[wt(e.$slots,"default",{},void 0,!0)])],2)}var Gx=gi(Ox,[["render",Nx],["__scopeId","data-v-0c37798f"]]);const _x={},Vx=e=>(qd("data-v-abc93f80"),e=e(),Qd(),e),Hx={class:"null-ticket",style:{width:"450px",height:"50px",background:"rgb(236, 39, 39)",position:"absolute",top:"93px",right:"-100px","-ms-transform":"rotate(45deg)","-webkit-transform":"rotate(45deg)",transform:"rotate(45deg)","text-align":"center",color:"#fff","vertical-align":"middle",opacity:"0.85"}},Bx=Vx(()=>Z("p",{style:{width:"100%","padding-top":"15px",color:"white","font-size":"18px","font-weight":"bold","text-align":"center",margin:"0"}},"ANULADA - ANULADA - ANULADA",-1)),Wx=[Bx];function zx(e,t){return ee(),be("div",Hx,Wx)}var Ux=gi(_x,[["render",zx],["__scopeId","data-v-abc93f80"]]);const Yx=Z("br",null,null,-1),Xx=["innerHTML"],$x={key:2},jx=["src"],Kx={__name:"t-help",props:{message:{default:"",type:String},title:{default:"",type:String},url:{default:null,type:String}},setup(e){const t=e;return(i,s)=>{const n=Dt("t-progress");return ee(),ke(_s,{name:"fa-regular fa-circle-question",class:"text-primary cursor-pointer"},{default:De(()=>[de(nn,{"transition-show":"flip-up","transition-hide":"flip-down"},{default:De(()=>[de(Df,{class:"bg-primary text-white"},{avatar:De(()=>[de(_s,{name:"fa-regular fa-circle-question"})]),default:De(()=>[Z("span",null,[Z("strong",null,ze(t.title)+":",1)]),Yx,t.message?(ee(),be("span",{key:0,innerHTML:t.message},null,8,Xx)):(ee(),ke(n,{key:1})),t.url?(ee(),be("div",$x,[Z("iframe",{width:"560",height:"315",src:t.url,title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:""},null,8,jx)])):we("",!0)]),_:1})]),_:1})]),_:1})}}},qx={class:"q-pa-md flex-center"},Qx={__name:"t-enable-config",props:{title:{type:String,default:""},config:{type:String,default:""},icon:{type:String,default:null},size:{type:String,default:"sm"}},setup(e){const t=e,i=pe(!1),s=pe(!1),{u_config:n,u_post:l}=uo(),u=()=>{i.value=!0},g=ls(()=>{let S="grey";return n.value[t.config]?S="positive":S="grey",S});ui(n,S=>{S[t.config]&&(s.value=S[t.config])});const C=()=>{const S={id:t.config,value:s.value};l("configurations",S).then(A=>{A.res&&(n.value[t.config]=s.value,i.value=!1)})};return Us(()=>{s.value=n.value[t.config]}),(S,A)=>{const D=Dt("t-tooltip"),M=Dt("t-input"),W=Dt("t-msg"),z=Dt("t-modal");return ee(),ke(Ye,{size:t.size,round:"",outline:"",color:g.value,class:"btn-enable-config",onClick:A[2]||(A[2]=U=>u()),icon:t.icon},{default:De(()=>[de(D,null,{default:De(()=>[ut("Activar "+ze(t.title),1)]),_:1}),de(z,{modelValue:i.value,"onUpdate:modelValue":A[1]||(A[1]=U=>i.value=U),title:"Activar "+t.title},{footer:De(()=>[de(Ye,{onClick:C},{default:De(()=>[ut("Guardar")]),_:1})]),default:De(()=>[Z("div",qx,[ut(" Desactivar "),de(M,{modelValue:s.value,"onUpdate:modelValue":A[0]||(A[0]=U=>s.value=U),type:"toggle",label:"Activar"},null,8,["modelValue"])]),de(W,{type:"init"},{default:De(()=>[wt(S.$slots,"default")]),_:3}),de(W,{type:"init",class:"q-mt-sm"},{default:De(()=>[ut(" - Debe tener permisos administrativos para realizar este ajuste. ")]),_:1})]),_:3},8,["modelValue","title"])]),_:3},8,["size","color","icon"])}}};var rf=()=>({setup(e,{emit:t}){const{u_config:i,u_get:s,u_objectEmpty:n,u_getVal:l,u_currency:u,u_print:g,u_loading:C,u_getLang:S,u_getCache:A}=uo(),D=pe(!1),M=pe(""),W=pe(""),z=pe(0),U=pe(""),X=pe(""),q=pe(""),_=pe(""),J=pe(""),se=pe(""),$=pe(""),Y=pe(""),oe=pe(""),Oe=pe(""),re=pe(""),Ve=pe(""),Pe=pe(""),He=pe(""),tt=pe(""),Ge=pe(""),et=pe(""),Gt=pe(""),At=pe(0),vt=pe({}),_t=pe(""),ti=pe([]),ii=pe([]),pt=pe(!1),Ke=Ee=>{let ne="";Ee==="egreso"?ne="egress":ne="entry";const te=ti.value.find(qe=>qe.type===ne);ii.value=te.options,pt.value=Ee==="egreso"},qt=()=>{A("general-lists/ListConceptsSelect").then(Ee=>{const ne=Ee.res||[];ti.value=ne})},Kt=ls(()=>U.value=="ingreso"),xt=ls(()=>Kt.value?i.value.cashier_relation_residue:i.value.cashier_relation_residue2),ht=()=>{g("printarea-checkout",!0)},Mt=Ee=>{let ne=[],te=[],qe="";Array.isArray(Ee)&&(Ee.forEach(Ne=>{Ne.id_engagement_fee&&(qe="engagement",te.indexOf(Ne.id_engagement_fee)<0&&te.push(Ne.id_engagement_fee),ne.indexOf(Ne.id_engagement)<0&&ne.push(Ne.id_engagement)),Ne.id_bills_credits&&(qe="credits",te.indexOf(Ne.id_bills_credits)<0&&te.push(Ne.id_bills_credits),ne.indexOf(Ne.id_bills)<0&&ne.push(Ne.id_bills))}),ne=ne.join("-"),te=te.join("-"),s("general-checkout/descriptionDetails/"+qe+"/"+ne+"/"+te).then(Ne=>{Ne.res&&(vt.value=Ne.res||{})}))},si=Ee=>{if(Ee){et.value=Ee.serial,z.value=parseFloat(Ee.ammount)||0,Oe.value=parseFloat(Ee.egress)||0,Gt.value=Ee.date_client||Ee.date,U.value=Ee.activity_checkout,X.value=Ee.activity_checkout_id,q.value=Ee.cancel,_.value=Ee.client,J.value=Ee.provider,_t.value=Ee.nit,se.value=Ee.concept,$.value=Ee.concept_name,Y.value=Ee.description;try{oe.value=JSON.parse(Ee.description_full)||[]}catch{oe.value=[]}Mt(oe.value),re.value=Ee.id_clients,Ve.value=Ee.id_payment_methods,Pe.value=Ee.id_users,He.value=Ee.id_users2,tt.value=Ee.method,Ge.value=Ee.name_seller,et.value=Ee.serial,W.value=U.value=="ingreso"?"COMPROBANTE DE INGRESO":"COMPROBANTE DE EGRESO",t("title",W.value)}},Pt=()=>{D.value=!0;let Ee;return n(e.data)&&e.id>0?(Ee=s("general-checkout/x/x/",[e.id]),Ee.then(ne=>{D.value=!1,ne=ne.res||{},si(ne)})):(D.value=!1,M.value=e.data.id_bills,si(e.data)),Ee};return Us(()=>{C(1),Pt().then(()=>{C(0)})}),{showResidue:xt,is_credit:At,u_getVal:l,u_currency:u,print:ht,loading:D,getBill:Pt,u_config:i,u_currency:u,egress:Oe,ammount:z,description:Y,method:tt,name_seller:Ge,provider:J,client:_,serial:et,date:Gt,description:Y,type_document:W,activity_checkout:U,u_getLang:S,isIncome:Kt,description_full:oe,provider_nit:_t,descriptionDetails:vt,typeActivity:Ke,getConceptCheckout:qt}},props:{id:{type:String,default:""},data:{type:Object,default:()=>({})},copy:{type:String,default:"false"},modelValue:{type:Boolean,default:!1}},emit:["title"]});const Zx=rf(),Jx={id:"print-box",class:"material-card absolute_view",ref:"export",style:{width:"100%"}},eS={key:0,id:"printarea-checkout",class:"zoom-80"},tS={style:{"text-align":"center"}},iS=Z("br",null,null,-1),sS=["src"],oS={style:{"font-size":"22px"}},rS=["innerHTML"],nS={key:0,style:{padding:"0 0 5px 0","text-align":"center","font-size":"15px"}},aS=["innerHTML"],lS=["innerHTML"],dS=Z("hr",null,null,-1),hS={width:"100%",class:"padding"},cS={key:0},uS={colspan:"4"},pS={key:0},gS={colspan:"4"},fS=Z("strong",null,"Cliente:",-1),mS={key:1},vS={colspan:"4"},CS=Z("strong",null,"Proveedor:",-1),yS={colspan:"4"},bS=Z("strong",null,"Usuario:",-1),wS={colspan:"4"},xS=Z("strong",null,"Medio de Pago:",-1),SS=Z("tr",null,[Z("td",{colspan:"4"},[Z("hr")])],-1),ES=Z("tr",null,[Z("td",{colspan:"4"},[Z("strong",null,"Descripci\xF3n:")])],-1),AS={colspan:"4"},RS=Z("tr",null,[Z("td",{colspan:"4"},[Z("hr")])],-1),DS=Z("tr",null,[Z("td",{colspan:"4"},[Z("hr")])],-1),TS=Z("th",{colspan:"3",style:{"text-align":"left"}},"TOTAL",-1),PS={style:{width:"90px","text-align":"right"}},FS=Z("th",{colspan:"4"},[Z("hr")],-1),LS=[FS],MS=Z("tr",null,[Z("td",{colspan:"4"},"\xA0")],-1),IS={key:1,class:"flex-center"};function OS(e,t,i,s,n,l){return Nt((ee(),be("div",Jx,[e.loading?(ee(),be("div",IS,[de(eh,{size:"4em"})])):Nt((ee(),be("div",eS,[Z("div",tS,[iS,Z("img",{src:e.u_getVal("logo"),id:"login-logo",style:{width:"180px"}},null,8,sS),Z("h2",oS,[Z("strong",null,ze(e.u_config.checkout_title),1)]),Z("p",{innerHTML:e.u_config.checkout_subtitle3},null,8,rS),e.u_config.checkout_subtitle2?(ee(),be("div",nS,[Z("strong",{innerHTML:e.u_config.checkout_subtitle2},null,8,aS)])):we("",!0),Z("p",{innerHTML:e.u_config.checkout_subtitle},null,8,lS),Z("p",null,"Fecha: "+ze(e.date),1)]),dS,Z("table",hS,[e.serial?(ee(),be("tr",cS,[Z("td",uS,[Z("strong",null,ze(e.type_document)+" N.",1),ut(" "+ze(e.serial),1)])])):we("",!0),e.client||e.provider?(ee(),be(yi,{key:1},[e.activity_checkout=="ingreso"?(ee(),be("tr",pS,[Z("td",gS,[fS,ut(" "+ze(e.client),1)])])):(ee(),be("tr",mS,[Z("td",vS,[CS,ut(" "+ze(e.provider),1)])]))],64)):we("",!0),Z("tr",null,[Z("td",yS,[bS,ut(" "+ze((e.name_seller||"").toUpperCase()),1)])]),Z("tr",null,[Z("td",wS,[xS,ut(" "+ze(e.method),1)])]),SS,ES,Z("tr",null,[Z("td",AS,ze(e.description),1)]),RS,DS,Z("tr",null,[TS,Z("th",PS,ze(e.u_currency(e.ammount||e.egress)),1)]),Nt(Z("tr",null,LS,512),[[Bt,e.is_credit=="1"]]),MS])],512)),[[Bt,e.id||e.idx]])],512)),[[Bt,e.id||e.idx]])}var kS=gi(Zx,[["render",OS]]);const NS=rf(),GS={id:"print-box",class:"material-card absolute_view"},_S={key:0},VS={id:"printarea-checkout",class:"zoom-70"},HS={style:{"font-size":"13px",padding:"3px",width:"100%"}},BS={width:"100%",height:"75px"},WS={key:0},zS=["width"],US=["src"],YS=["width"],XS={style:{padding:"5px","text-align":"center"}},$S={style:{"font-size":"22px",margin:"0"}},jS={style:{padding:"5px","text-align":"center"}},KS=["innerHTML"],qS={style:{padding:"5px","text-align":"center","font-size":"14px"}},QS={key:0,style:{padding:"5px","text-align":"center"}},ZS=["innerHTML"],JS=["width"],eE={key:0,style:{border:"1px solid black","border-radius":"10px",padding:"5px",margin:"5px"}},tE={style:{border:"1px solid black","border-radius":"10px",padding:"5px",margin:"5px"}},iE=Z("br",null,null,-1),sE={style:{border:"1px solid black","border-radius":"12px","font-size":"15px"}},oE={width:"100%",height:"80px",cellspacing:"0"},rE={width:"60%",style:{padding:"5px","text-align":"center"}},nE={key:0},aE=Z("td",{class:"text-left"},"Cliente:",-1),lE={class:"text-left"},dE={key:1},hE=Z("td",{class:"text-left"},"Proveedor:",-1),cE={class:"text-left"},uE={key:2},pE=Z("td",{class:"text-left"},"NIT:",-1),gE={class:"text-left"},fE={width:"40%",style:{"text-align":"center"},class:"border-left"},mE={class:"text-left"},vE={class:"text-left"},CE=Z("td",{class:"text-left"},"Forma de Pago:",-1),yE={class:"text-left"},bE={key:0,style:{position:"absolute",width:"100%",margin:"0",height:"100%",display:"flex","align-items":"center","justify-content":"center"}},wE=["src"],xE={class:"q-mt-md"},SE={key:1,class:"flex-center q-mt-md",style:{display:"flex","justify-content":"center"}},EE={class:"table table-bordered",style:{width:"510px",border:"1px solid gray"}},AE=["colspan"],RE={key:0},DE=Z("th",{class:"center",style:{width:"90px"}},"Ref. ",-1),TE=Z("th",{class:"center",style:{width:"90px"}},"Cuota",-1),PE=Z("th",{class:"right"},"Paga",-1),FE={key:0,class:"right"},LE=["colspan"],ME={key:0},IE=Z("th",{class:"center",style:{width:"90px"}},"Ref.",-1),OE=Z("th",{class:"center",style:{width:"90px"}},"Cuota",-1),kE=Z("th",{class:"right"},"Paga",-1),NE={key:0,class:"right"},GE={class:"right"},_E={key:0,class:"center"},VE={key:1,class:"center"},HE={class:"right"},BE={key:2,class:"right"},WE=["colspan"],zE=Z("strong",null,"Deuda Total",-1),UE=[zE],YE={class:"right"},XE={style:{width:"100%","border-top":"1px solid black"}},$E={style:{width:"100%",position:"relative",left:"-1px",margin:"0",padding:"0"}},jE={style:{width:"60%",padding:"0px"}},KE={key:0,style:{border:"1px solid #000000","border-radius":"12px",padding:"10px","margin-left":"4px","font-size":"11px"}},qE=["innerHTML"],QE={style:{width:"40%",padding:"0px"}},ZE={style:{width:"100%",height:"45px"}},JE={style:{"font-size":"17px"}},e0=Z("th",{colspan:"4",class:"text-right"},[Z("b",null,"Total")],-1),t0={style:{width:"90px","text-align":"right"}},i0=Z("br",null,null,-1),s0=Z("hr",null,null,-1),o0={key:1,class:"flex-center"};function r0(e,t,i,s,n,l){return Nt((ee(),be("div",GS,[e.loading?(ee(),be("div",o0,[de(eh,{size:"4em"})])):(ee(),be("div",_S,[Nt(Z("div",VS,[Z("div",HS,[Z("table",BS,[e.u_config.size_colums_head?(ee(),be("tr",WS,[Z("td",{width:(e.u_config.size_colums_head||{}).left},[Z("img",{src:e.u_getVal("logo"),style:{"max-width":"200px",width:"100%"}},null,8,US)],8,zS),Z("td",{width:(e.u_config.size_colums_head||{}).center,style:{"vertical-align":"top",padding:"12px 0px 0px !important",display:"flex","align-items":"center","justify-content":"center","flex-direction":"column",width:"100%"}},[Z("div",XS,[Z("h2",$S,[Z("b",null,ze(e.u_config.checkout_title),1)])]),Z("div",jS,[Z("span",{innerHTML:e.u_config.checkout_subtitle},null,8,KS)]),Z("div",qS,[Z("span",null,"Nit: "+ze(e.u_config.bills_nit),1)]),e.u_config.checkout_subtitle2?(ee(),be("div",QS,[Z("span",{innerHTML:e.u_config.checkout_subtitle2},null,8,ZS)])):we("",!0)],8,YS),Z("td",{width:(e.u_config.size_colums_head||{}).right,class:"",style:{padding:"5px","text-align":"center"}},[e.serial?(ee(),be("div",eE,[Z("span",null,ze(e.type_document)+" No.",1),Z("b",null,ze(e.serial),1)])):we("",!0),Z("div",tE,[ut(" Fecha "),iE,ut(" "+ze(e.date),1)])],8,JS)])):we("",!0)]),Z("div",sE,[Z("table",oE,[Z("tr",null,[Z("td",rE,[Z("table",null,[e.isIncome?(ee(),be("tr",nE,[aE,Z("td",lE,ze(e.client),1)])):(ee(),be("tr",dE,[hE,Z("td",cE,ze(e.provider),1)])),e.provider?(ee(),be("tr",uE,[pE,Z("td",gE,ze(e.provider_nit),1)])):we("",!0)])]),Z("td",fE,[Z("table",null,[Z("tr",null,[Z("td",mE,ze(e.u_getLang.common_user)+":",1),Z("td",vE,ze((e.name_seller||"").toUpperCase()),1)]),Z("tr",null,[CE,Z("td",yE,ze(e.method),1)])])])])]),Z("div",{style:yr(e.isIncome?e.u_config.css_checkout:e.u_config.css_checkout2)},[(e.u_config.watermark||{}).active=="true"?(ee(),be("div",bE,[Z("img",{alt:"",src:e.u_getVal("logo"),style:yr("width: 70%; height: auto; opacity: 0.1; filter: grayscale(100%);")},null,12,wE)])):we("",!0),Z("div",xE,ze(e.description),1),e.description_full&&e.description_full.length>0?(ee(),be("div",SE,[Z("table",EE,[Z("tr",null,[Z("th",{class:"center",colspan:e.showResidue?4:3}," Relaci\xF3n de Pago ",8,AE)]),e.isIncome&&!e.u_config.cashier_relation_description||!e.isIncome&&!e.u_config.cashier_relation_description2?(ee(),be("tr",RE,[DE,TE,PE,e.showResidue?(ee(),be("th",FE,"Saldo")):we("",!0)])):we("",!0),e.descriptionDetails&&e.descriptionDetails[0]?(ee(!0),be(yi,{key:1},Es(e.descriptionDetails[0],(u,g)=>(ee(),be(yi,null,[e.isIncome&&e.u_config.cashier_relation_description||!e.isIncome&&e.u_config.cashier_relation_description2?(ee(),be("tr",{key:"des_t_"+g},[Z("th",{class:"center",colspan:e.showResidue?4:3},[ut(" # "+ze(u.ref)+" ",1),u.description?(ee(),be("span",ME,"-")):we("",!0),Z("span",null,ze(u.description),1)],8,LE)])):we("",!0),e.u_config.cashier_relation_description?(ee(),be("tr",{key:"des_t_tit"+g},[IE,OE,kE,e.showResidue?(ee(),be("th",NE,"Saldo")):we("",!0)])):we("",!0),(ee(!0),be(yi,null,Es(e.description_full,(C,S)=>Nt((ee(),be("tr",{key:"des_"+S+"-"+g},[Z("td",GE,ze(C.ref),1),C.id_engagement_fee&&(e.descriptionDetails[1]||0)&&(e.descriptionDetails[1][C.id_engagement_fee]||0)?(ee(),be("td",_E,ze(e.descriptionDetails[1][C.id_engagement_fee]),1)):we("",!0),C.id_bills_credits&&(e.descriptionDetails[1]||0)&&(e.descriptionDetails[1][C.id_bills_credits]||0)?(ee(),be("td",VE,ze(e.descriptionDetails[1][C.id_bills_credits]),1)):we("",!0),Z("td",HE,ze(e.u_currency((parseFloat(C.price)||0)-(parseFloat(C.residue)||0))),1),e.showResidue?(ee(),be("td",BE,ze(e.u_currency(C.residue)),1)):we("",!0)])),[[Bt,g==C.id_engagement||g==C.id_bills]])),128)),(e.isIncome?e.u_config.cashier_relation_total:e.u_config.cashier_relation_total2)?(ee(),be("tr",{key:"des_t_total"+g},[Z("td",{class:"center",colspan:e.showResidue?3:2},UE,8,WE),Z("td",YE,[Z("strong",null,ze(e.u_currency(u.residue))+" \xA0 / \xA0 "+ze(e.u_currency(u.total)),1)])])):we("",!0)],64))),256)):we("",!0)])])):we("",!0)],4),Z("div",XE,[Z("table",$E,[Z("tr",null,[Z("td",jE,[(e.isIncome?e.u_config.checkout_footer:e.u_config.checkout_footer2)?(ee(),be("div",KE,[Z("div",{innerHTML:e.isIncome?e.u_config.checkout_footer:e.u_config.checkout_footer2},null,8,qE)])):we("",!0)]),Z("td",QE,[Z("div",null,[Z("table",ZE,[Z("tr",JE,[e0,Z("th",t0,ze(e.u_currency(e.ammount||e.egress)),1)])])])])])])])])])],512),[[Bt,e.id||e.idx]]),i0,s0]))],512)),[[Bt,e.id||e.idx]])}var n0=gi(NS,[["render",r0]]);const a0={__name:"modal-checkout",props:{id:{type:[Boolean,Number,String],default:!1},data:{type:Object,default:()=>({})},modelValue:{type:[Boolean,Object],default:!1},activity_checkout:{type:String,default:""}},emits:["update:modelValue"],setup(e,{emit:t}){const i=t,{u_config:s}=uo(),n=pe(),l=pe(!1),u=pe(!1),g=pe(""),C=e,S=()=>{n.value.print()},A=()=>{s.value.checkout_type!==""||s.value.checkout_type2!==""?u.value=C.activity_checkout=="ingreso"?s.value.checkout_type:s.value.checkout_type2:u.value=s.value.bills_type};return Us(()=>{A()}),ui(l,D=>{i("update:modelValue",D)}),ui(C,D=>{D.modelValue&&(l.value=D.modelValue)}),ui(s,D=>{D.checkout_type&&this.setType()}),(D,M)=>{const W=Dt("t-config"),z=Dt("t-modal");return l.value?(ee(),ke(z,{key:0,modelValue:l.value,"onUpdate:modelValue":M[2]||(M[2]=U=>l.value=U),title:g.value,"content-class":u.value==1?"small-bill-w":""},{footer:De(()=>[de(Ye,{class:"secundary",onClick:S,icon:"print",label:"Imprimir"}),de(W,{name:"config-checkout"})]),default:De(()=>[u.value==1?(ee(),ke(kS,{key:0,id:e.id,data:e.data,ref_key:"billcomponent",ref:n,onTitle:M[0]||(M[0]=U=>g.value=U)},null,8,["id","data"])):(ee(),ke(n0,{key:1,id:e.id,data:e.data,ref_key:"billcomponent",ref:n,onTitle:M[1]||(M[1]=U=>g.value=U)},null,8,["id","data"]))]),_:1},8,["modelValue","title","content-class"])):we("",!0)}}};var c0=Tf(({app:e})=>{e.component("t-input",Tv),e.component("t-modal",kv),e.component("t-audit",zv),e.component("t-image",Xv),e.component("t-footer",Qv),e.component("t-form",uC),e.component("t-table",ox),e.component("t-edit-list",dx),e.component("t-tooltip",ux),e.component("t-config",fx),e.component("t-chart",xx),e.component("t-progress",Ax),e.component("t-title",Px),e.component("t-page",Ix),e.component("t-msg",Gx),e.component("t-null",Ux),e.component("t-help",Kx),e.component("t-enable-config",Qx),e.component("modal-checkout",a0)});export{c0 as default};
